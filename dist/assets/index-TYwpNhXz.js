function r9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i9(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Cw={exports:{}},_h={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FD;function a9(){if(FD)return _h;FD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return _h.Fragment=e,_h.jsx=n,_h.jsxs=n,_h}var BD;function o9(){return BD||(BD=1,Cw.exports=a9()),Cw.exports}var fe=o9(),$w={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD;function s9(){if(zD)return it;zD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=d&&L[d]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function b(L,G,q){this.props=L,this.context=G,this.refs=x,this.updater=q||g}b.prototype.isReactComponent={},b.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function w(){}w.prototype=b.prototype;function S(L,G,q){this.props=L,this.context=G,this.refs=x,this.updater=q||g}var $=S.prototype=new w;$.constructor=S,y($,b.prototype),$.isPureReactComponent=!0;var T=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function I(L,G,q,K,oe,pe){return q=pe.ref,{$$typeof:t,type:L,key:G,ref:q!==void 0?q:null,props:pe}}function _(L,G){return I(L.type,G,void 0,void 0,void 0,L.props)}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function R(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(q){return G[q]})}var O=/\/+/g;function P(L,G){return typeof L=="object"&&L!==null&&L.key!=null?R(""+L.key):G.toString(36)}function B(){}function U(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(B,B):(L.status="pending",L.then(function(G){L.status==="pending"&&(L.status="fulfilled",L.value=G)},function(G){L.status==="pending"&&(L.status="rejected",L.reason=G)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function z(L,G,q,K,oe){var pe=typeof L;(pe==="undefined"||pe==="boolean")&&(L=null);var ge=!1;if(L===null)ge=!0;else switch(pe){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(L.$$typeof){case t:case e:ge=!0;break;case h:return ge=L._init,z(ge(L._payload),G,q,K,oe)}}if(ge)return oe=oe(L),ge=K===""?"."+P(L,0):K,T(oe)?(q="",ge!=null&&(q=ge.replace(O,"$&/")+"/"),z(oe,G,q,"",function(ye){return ye})):oe!=null&&(N(oe)&&(oe=_(oe,q+(oe.key==null||L&&L.key===oe.key?"":(""+oe.key).replace(O,"$&/")+"/")+ge)),G.push(oe)),1;ge=0;var Re=K===""?".":K+":";if(T(L))for(var Ee=0;Ee<L.length;Ee++)K=L[Ee],pe=Re+P(K,Ee),ge+=z(K,G,q,pe,oe);else if(Ee=p(L),typeof Ee=="function")for(L=Ee.call(L),Ee=0;!(K=L.next()).done;)K=K.value,pe=Re+P(K,Ee++),ge+=z(K,G,q,pe,oe);else if(pe==="object"){if(typeof L.then=="function")return z(U(L),G,q,K,oe);throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ge}function M(L,G,q){if(L==null)return L;var K=[],oe=0;return z(L,K,"","",function(pe){return G.call(q,pe,oe++)}),K}function V(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(q){(L._status===0||L._status===-1)&&(L._status=1,L._result=q)},function(q){(L._status===0||L._status===-1)&&(L._status=2,L._result=q)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var W=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function H(){}return it.Children={map:M,forEach:function(L,G,q){M(L,function(){G.apply(this,arguments)},q)},count:function(L){var G=0;return M(L,function(){G++}),G},toArray:function(L){return M(L,function(G){return G})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},it.Component=b,it.Fragment=n,it.Profiler=i,it.PureComponent=S,it.StrictMode=r,it.Suspense=l,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,it.__COMPILER_RUNTIME={__proto__:null,c:function(L){return k.H.useMemoCache(L)}},it.cache=function(L){return function(){return L.apply(null,arguments)}},it.cloneElement=function(L,G,q){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var K=y({},L.props),oe=L.key,pe=void 0;if(G!=null)for(ge in G.ref!==void 0&&(pe=void 0),G.key!==void 0&&(oe=""+G.key),G)!E.call(G,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&G.ref===void 0||(K[ge]=G[ge]);var ge=arguments.length-2;if(ge===1)K.children=q;else if(1<ge){for(var Re=Array(ge),Ee=0;Ee<ge;Ee++)Re[Ee]=arguments[Ee+2];K.children=Re}return I(L.type,oe,void 0,void 0,pe,K)},it.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},it.createElement=function(L,G,q){var K,oe={},pe=null;if(G!=null)for(K in G.key!==void 0&&(pe=""+G.key),G)E.call(G,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(oe[K]=G[K]);var ge=arguments.length-2;if(ge===1)oe.children=q;else if(1<ge){for(var Re=Array(ge),Ee=0;Ee<ge;Ee++)Re[Ee]=arguments[Ee+2];oe.children=Re}if(L&&L.defaultProps)for(K in ge=L.defaultProps,ge)oe[K]===void 0&&(oe[K]=ge[K]);return I(L,pe,void 0,void 0,null,oe)},it.createRef=function(){return{current:null}},it.forwardRef=function(L){return{$$typeof:s,render:L}},it.isValidElement=N,it.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:V}},it.memo=function(L,G){return{$$typeof:c,type:L,compare:G===void 0?null:G}},it.startTransition=function(L){var G=k.T,q={};k.T=q;try{var K=L(),oe=k.S;oe!==null&&oe(q,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(H,W)}catch(pe){W(pe)}finally{k.T=G}},it.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},it.use=function(L){return k.H.use(L)},it.useActionState=function(L,G,q){return k.H.useActionState(L,G,q)},it.useCallback=function(L,G){return k.H.useCallback(L,G)},it.useContext=function(L){return k.H.useContext(L)},it.useDebugValue=function(){},it.useDeferredValue=function(L,G){return k.H.useDeferredValue(L,G)},it.useEffect=function(L,G,q){var K=k.H;if(typeof q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(L,G)},it.useId=function(){return k.H.useId()},it.useImperativeHandle=function(L,G,q){return k.H.useImperativeHandle(L,G,q)},it.useInsertionEffect=function(L,G){return k.H.useInsertionEffect(L,G)},it.useLayoutEffect=function(L,G){return k.H.useLayoutEffect(L,G)},it.useMemo=function(L,G){return k.H.useMemo(L,G)},it.useOptimistic=function(L,G){return k.H.useOptimistic(L,G)},it.useReducer=function(L,G,q){return k.H.useReducer(L,G,q)},it.useRef=function(L){return k.H.useRef(L)},it.useState=function(L){return k.H.useState(L)},it.useSyncExternalStore=function(L,G,q){return k.H.useSyncExternalStore(L,G,q)},it.useTransition=function(){return k.H.useTransition()},it.version="19.1.0",it}var jD;function tA(){return jD||(jD=1,$w.exports=s9()),$w.exports}var Z=tA();const Q=Pt(Z);var Tw={exports:{}},Rh={},kw={exports:{}},Aw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UD;function l9(){return UD||(UD=1,function(t){function e(M,V){var W=M.length;M.push(V);e:for(;0<W;){var H=W-1>>>1,L=M[H];if(0<i(L,V))M[H]=V,M[W]=L,W=H;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var V=M[0],W=M.pop();if(W!==V){M[0]=W;e:for(var H=0,L=M.length,G=L>>>1;H<G;){var q=2*(H+1)-1,K=M[q],oe=q+1,pe=M[oe];if(0>i(K,W))oe<L&&0>i(pe,K)?(M[H]=pe,M[oe]=W,H=oe):(M[H]=K,M[q]=W,H=q);else if(oe<L&&0>i(pe,W))M[H]=pe,M[oe]=W,H=oe;else break e}}return V}function i(M,V){var W=M.sortIndex-V.sortIndex;return W!==0?W:M.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],c=[],h=1,d=null,p=3,g=!1,y=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function T(M){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=M)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function k(M){if(x=!1,T(M),!y)if(n(l)!==null)y=!0,E||(E=!0,P());else{var V=n(c);V!==null&&z(k,V.startTime-M)}}var E=!1,I=-1,_=5,N=-1;function R(){return b?!0:!(t.unstable_now()-N<_)}function O(){if(b=!1,E){var M=t.unstable_now();N=M;var V=!0;try{e:{y=!1,x&&(x=!1,S(I),I=-1),g=!0;var W=p;try{t:{for(T(M),d=n(l);d!==null&&!(d.expirationTime>M&&R());){var H=d.callback;if(typeof H=="function"){d.callback=null,p=d.priorityLevel;var L=H(d.expirationTime<=M);if(M=t.unstable_now(),typeof L=="function"){d.callback=L,T(M),V=!0;break t}d===n(l)&&r(l),T(M)}else r(l);d=n(l)}if(d!==null)V=!0;else{var G=n(c);G!==null&&z(k,G.startTime-M),V=!1}}break e}finally{d=null,p=W,g=!1}V=void 0}}finally{V?P():E=!1}}}var P;if(typeof $=="function")P=function(){$(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,U=B.port2;B.port1.onmessage=O,P=function(){U.postMessage(null)}}else P=function(){w(O,0)};function z(M,V){I=w(function(){M(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var W=p;p=V;try{return M()}finally{p=W}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(M,V){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var W=p;p=M;try{return V()}finally{p=W}},t.unstable_scheduleCallback=function(M,V,W){var H=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?H+W:H):W=H,M){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,M={id:h++,callback:V,priorityLevel:M,startTime:W,expirationTime:L,sortIndex:-1},W>H?(M.sortIndex=W,e(c,M),n(l)===null&&M===n(c)&&(x?(S(I),I=-1):x=!0,z(k,W-H))):(M.sortIndex=L,e(l,M),y||g||(y=!0,E||(E=!0,P()))),M},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(M){var V=p;return function(){var W=p;p=V;try{return M.apply(this,arguments)}finally{p=W}}}}(Aw)),Aw}var VD;function u9(){return VD||(VD=1,kw.exports=l9()),kw.exports}var Ew={exports:{}},vr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WD;function c9(){if(WD)return vr;WD=1;var t=tA();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(l,c,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return vr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vr.createPortal=function(l,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,h)},vr.flushSync=function(l){var c=o.T,h=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=h,r.d.f()}},vr.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},vr.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},vr.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var h=c.as,d=s(h,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:p,fetchPriority:g}):h==="script"&&r.d.X(l,{crossOrigin:d,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},vr.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=s(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},vr.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,d=s(h,c.crossOrigin);r.d.L(l,h,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},vr.preloadModule=function(l,c){if(typeof l=="string")if(c){var h=s(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},vr.requestFormReset=function(l){r.d.r(l)},vr.unstable_batchedUpdates=function(l,c){return l(c)},vr.useFormState=function(l,c,h){return o.H.useFormState(l,c,h)},vr.useFormStatus=function(){return o.H.useHostTransitionStatus()},vr.version="19.1.0",vr}var GD;function f9(){if(GD)return Ew.exports;GD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ew.exports=c9(),Ew.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qD;function h9(){if(qD)return Rh;qD=1;var t=u9(),e=tA(),n=f9();function r(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var f=u,m=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(m=f.return),u=f.return;while(u)}return f.tag===3?m:null}function o(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function s(u){if(a(u)!==u)throw Error(r(188))}function l(u){var f=u.alternate;if(!f){if(f=a(u),f===null)throw Error(r(188));return f!==u?null:u}for(var m=u,v=f;;){var C=m.return;if(C===null)break;var A=C.alternate;if(A===null){if(v=C.return,v!==null){m=v;continue}break}if(C.child===A.child){for(A=C.child;A;){if(A===m)return s(C),u;if(A===v)return s(C),f;A=A.sibling}throw Error(r(188))}if(m.return!==v.return)m=C,v=A;else{for(var D=!1,F=C.child;F;){if(F===m){D=!0,m=C,v=A;break}if(F===v){D=!0,v=C,m=A;break}F=F.sibling}if(!D){for(F=A.child;F;){if(F===m){D=!0,m=A,v=C;break}if(F===v){D=!0,v=A,m=C;break}F=F.sibling}if(!D)throw Error(r(189))}}if(m.alternate!==v)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var h=Object.assign,d=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),$=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(u){return u===null||typeof u!="object"?null:(u=O&&u[O]||u["@@iterator"],typeof u=="function"?u:null)}var B=Symbol.for("react.client.reference");function U(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===B?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case y:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case k:return"Suspense";case E:return"SuspenseList";case N:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case g:return"Portal";case $:return(u.displayName||"Context")+".Provider";case S:return(u._context.displayName||"Context")+".Consumer";case T:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case I:return f=u.displayName||null,f!==null?f:U(u.type)||"Memo";case _:f=u._payload,u=u._init;try{return U(u(f))}catch{}}return null}var z=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},H=[],L=-1;function G(u){return{current:u}}function q(u){0>L||(u.current=H[L],H[L]=null,L--)}function K(u,f){L++,H[L]=u.current,u.current=f}var oe=G(null),pe=G(null),ge=G(null),Re=G(null);function Ee(u,f){switch(K(ge,f),K(pe,u),K(oe,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?hD(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=hD(f),u=dD(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}q(oe),K(oe,u)}function ye(){q(oe),q(pe),q(ge)}function Ie(u){u.memoizedState!==null&&K(Re,u);var f=oe.current,m=dD(f,u.type);f!==m&&(K(pe,u),K(oe,m))}function Oe(u){pe.current===u&&(q(oe),q(pe)),Re.current===u&&(q(Re),Ah._currentValue=W)}var be=Object.prototype.hasOwnProperty,Ge=t.unstable_scheduleCallback,Ue=t.unstable_cancelCallback,xe=t.unstable_shouldYield,ke=t.unstable_requestPaint,Ne=t.unstable_now,Le=t.unstable_getCurrentPriorityLevel,st=t.unstable_ImmediatePriority,gt=t.unstable_UserBlockingPriority,tt=t.unstable_NormalPriority,Lt=t.unstable_LowPriority,vn=t.unstable_IdlePriority,Gn=t.log,zr=t.unstable_setDisableYieldValue,jr=null,ln=null;function rr(u){if(typeof Gn=="function"&&zr(u),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(jr,u)}catch{}}var Dn=Math.clz32?Math.clz32:fx,Df=Math.log,Mf=Math.LN2;function fx(u){return u>>>=0,u===0?32:31-(Df(u)/Mf|0)|0}var Ha=256,uu=4194304;function Xa(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Rm(u,f,m){var v=u.pendingLanes;if(v===0)return 0;var C=0,A=u.suspendedLanes,D=u.pingedLanes;u=u.warmLanes;var F=v&134217727;return F!==0?(v=F&~A,v!==0?C=Xa(v):(D&=F,D!==0?C=Xa(D):m||(m=F&~u,m!==0&&(C=Xa(m))))):(F=v&~A,F!==0?C=Xa(F):D!==0?C=Xa(D):m||(m=v&~u,m!==0&&(C=Xa(m)))),C===0?0:f!==0&&f!==C&&(f&A)===0&&(A=C&-C,m=f&-f,A>=m||A===32&&(m&4194048)!==0)?f:C}function Pf(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function WX(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KO(){var u=Ha;return Ha<<=1,(Ha&4194048)===0&&(Ha=256),u}function YO(){var u=uu;return uu<<=1,(uu&62914560)===0&&(uu=4194304),u}function hx(u){for(var f=[],m=0;31>m;m++)f.push(u);return f}function Lf(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function GX(u,f,m,v,C,A){var D=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var F=u.entanglements,Y=u.expirationTimes,ue=u.hiddenUpdates;for(m=D&~m;0<m;){var Se=31-Dn(m),$e=1<<Se;F[Se]=0,Y[Se]=-1;var ce=ue[Se];if(ce!==null)for(ue[Se]=null,Se=0;Se<ce.length;Se++){var de=ce[Se];de!==null&&(de.lane&=-536870913)}m&=~$e}v!==0&&ZO(u,v,0),A!==0&&C===0&&u.tag!==0&&(u.suspendedLanes|=A&~(D&~f))}function ZO(u,f,m){u.pendingLanes|=f,u.suspendedLanes&=~f;var v=31-Dn(f);u.entangledLanes|=f,u.entanglements[v]=u.entanglements[v]|1073741824|m&4194090}function QO(u,f){var m=u.entangledLanes|=f;for(u=u.entanglements;m;){var v=31-Dn(m),C=1<<v;C&f|u[v]&f&&(u[v]|=f),m&=~C}}function dx(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function px(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function JO(){var u=V.p;return u!==0?u:(u=window.event,u===void 0?32:_D(u.type))}function qX(u,f){var m=V.p;try{return V.p=u,f()}finally{V.p=m}}var Bo=Math.random().toString(36).slice(2),gr="__reactFiber$"+Bo,Ur="__reactProps$"+Bo,cu="__reactContainer$"+Bo,mx="__reactEvents$"+Bo,HX="__reactListeners$"+Bo,XX="__reactHandles$"+Bo,eN="__reactResources$"+Bo,Ff="__reactMarker$"+Bo;function gx(u){delete u[gr],delete u[Ur],delete u[mx],delete u[HX],delete u[XX]}function fu(u){var f=u[gr];if(f)return f;for(var m=u.parentNode;m;){if(f=m[cu]||m[gr]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(u=yD(u);u!==null;){if(m=u[gr])return m;u=yD(u)}return f}u=m,m=u.parentNode}return null}function hu(u){if(u=u[gr]||u[cu]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function Bf(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(r(33))}function du(u){var f=u[eN];return f||(f=u[eN]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function qn(u){u[Ff]=!0}var tN=new Set,nN={};function Gs(u,f){pu(u,f),pu(u+"Capture",f)}function pu(u,f){for(nN[u]=f,u=0;u<f.length;u++)tN.add(f[u])}var KX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rN={},iN={};function YX(u){return be.call(iN,u)?!0:be.call(rN,u)?!1:KX.test(u)?iN[u]=!0:(rN[u]=!0,!1)}function Dm(u,f,m){if(YX(f))if(m===null)u.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var v=f.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+m)}}function Mm(u,f,m){if(m===null)u.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+m)}}function Ka(u,f,m,v){if(v===null)u.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(f,m,""+v)}}var yx,aN;function mu(u){if(yx===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);yx=f&&f[1]||"",aN=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yx+u+aN}var vx=!1;function bx(u,f){if(!u||vx)return"";vx=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(f){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(de){var ce=de}Reflect.construct(u,[],$e)}else{try{$e.call()}catch(de){ce=de}u.call($e.prototype)}}else{try{throw Error()}catch(de){ce=de}($e=u())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(de){if(de&&ce&&typeof de.stack=="string")return[de.stack,ce.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=v.DetermineComponentFrameRoot(),D=A[0],F=A[1];if(D&&F){var Y=D.split(`
`),ue=F.split(`
`);for(C=v=0;v<Y.length&&!Y[v].includes("DetermineComponentFrameRoot");)v++;for(;C<ue.length&&!ue[C].includes("DetermineComponentFrameRoot");)C++;if(v===Y.length||C===ue.length)for(v=Y.length-1,C=ue.length-1;1<=v&&0<=C&&Y[v]!==ue[C];)C--;for(;1<=v&&0<=C;v--,C--)if(Y[v]!==ue[C]){if(v!==1||C!==1)do if(v--,C--,0>C||Y[v]!==ue[C]){var Se=`
`+Y[v].replace(" at new "," at ");return u.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",u.displayName)),Se}while(1<=v&&0<=C);break}}}finally{vx=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?mu(m):""}function ZX(u){switch(u.tag){case 26:case 27:case 5:return mu(u.type);case 16:return mu("Lazy");case 13:return mu("Suspense");case 19:return mu("SuspenseList");case 0:case 15:return bx(u.type,!1);case 11:return bx(u.type.render,!1);case 1:return bx(u.type,!0);case 31:return mu("Activity");default:return""}}function oN(u){try{var f="";do f+=ZX(u),u=u.return;while(u);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function vi(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function sN(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function QX(u){var f=sN(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),v=""+u[f];if(!u.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,A=m.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return C.call(this)},set:function(D){v=""+D,A.call(this,D)}}),Object.defineProperty(u,f,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(D){v=""+D},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Pm(u){u._valueTracker||(u._valueTracker=QX(u))}function lN(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var m=f.getValue(),v="";return u&&(v=sN(u)?u.checked?"true":"false":u.value),u=v,u!==m?(f.setValue(u),!0):!1}function Lm(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var JX=/[\n"\\]/g;function bi(u){return u.replace(JX,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function xx(u,f,m,v,C,A,D,F){u.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?u.type=D:u.removeAttribute("type"),f!=null?D==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+vi(f)):u.value!==""+vi(f)&&(u.value=""+vi(f)):D!=="submit"&&D!=="reset"||u.removeAttribute("value"),f!=null?wx(u,D,vi(f)):m!=null?wx(u,D,vi(m)):v!=null&&u.removeAttribute("value"),C==null&&A!=null&&(u.defaultChecked=!!A),C!=null&&(u.checked=C&&typeof C!="function"&&typeof C!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?u.name=""+vi(F):u.removeAttribute("name")}function uN(u,f,m,v,C,A,D,F){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(u.type=A),f!=null||m!=null){if(!(A!=="submit"&&A!=="reset"||f!=null))return;m=m!=null?""+vi(m):"",f=f!=null?""+vi(f):m,F||f===u.value||(u.value=f),u.defaultValue=f}v=v??C,v=typeof v!="function"&&typeof v!="symbol"&&!!v,u.checked=F?u.checked:!!v,u.defaultChecked=!!v,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(u.name=D)}function wx(u,f,m){f==="number"&&Lm(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function gu(u,f,m,v){if(u=u.options,f){f={};for(var C=0;C<m.length;C++)f["$"+m[C]]=!0;for(m=0;m<u.length;m++)C=f.hasOwnProperty("$"+u[m].value),u[m].selected!==C&&(u[m].selected=C),C&&v&&(u[m].defaultSelected=!0)}else{for(m=""+vi(m),f=null,C=0;C<u.length;C++){if(u[C].value===m){u[C].selected=!0,v&&(u[C].defaultSelected=!0);return}f!==null||u[C].disabled||(f=u[C])}f!==null&&(f.selected=!0)}}function cN(u,f,m){if(f!=null&&(f=""+vi(f),f!==u.value&&(u.value=f),m==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=m!=null?""+vi(m):""}function fN(u,f,m,v){if(f==null){if(v!=null){if(m!=null)throw Error(r(92));if(z(v)){if(1<v.length)throw Error(r(93));v=v[0]}m=v}m==null&&(m=""),f=m}m=vi(f),u.defaultValue=m,v=u.textContent,v===m&&v!==""&&v!==null&&(u.value=v)}function yu(u,f){if(f){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=f;return}}u.textContent=f}var eK=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hN(u,f,m){var v=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?v?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":v?u.setProperty(f,m):typeof m!="number"||m===0||eK.has(f)?f==="float"?u.cssFloat=m:u[f]=(""+m).trim():u[f]=m+"px"}function dN(u,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(u=u.style,m!=null){for(var v in m)!m.hasOwnProperty(v)||f!=null&&f.hasOwnProperty(v)||(v.indexOf("--")===0?u.setProperty(v,""):v==="float"?u.cssFloat="":u[v]="");for(var C in f)v=f[C],f.hasOwnProperty(C)&&m[C]!==v&&hN(u,C,v)}else for(var A in f)f.hasOwnProperty(A)&&hN(u,A,f[A])}function Sx(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tK=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nK=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fm(u){return nK.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Cx=null;function $x(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var vu=null,bu=null;function pN(u){var f=hu(u);if(f&&(u=f.stateNode)){var m=u[Ur]||null;e:switch(u=f.stateNode,f.type){case"input":if(xx(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+bi(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var v=m[f];if(v!==u&&v.form===u.form){var C=v[Ur]||null;if(!C)throw Error(r(90));xx(v,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(f=0;f<m.length;f++)v=m[f],v.form===u.form&&lN(v)}break e;case"textarea":cN(u,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&gu(u,!!m.multiple,f,!1)}}}var Tx=!1;function mN(u,f,m){if(Tx)return u(f,m);Tx=!0;try{var v=u(f);return v}finally{if(Tx=!1,(vu!==null||bu!==null)&&(Cg(),vu&&(f=vu,u=bu,bu=vu=null,pN(f),u)))for(f=0;f<u.length;f++)pN(u[f])}}function zf(u,f){var m=u.stateNode;if(m===null)return null;var v=m[Ur]||null;if(v===null)return null;m=v[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(u=u.type,v=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!v;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var Ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kx=!1;if(Ya)try{var jf={};Object.defineProperty(jf,"passive",{get:function(){kx=!0}}),window.addEventListener("test",jf,jf),window.removeEventListener("test",jf,jf)}catch{kx=!1}var zo=null,Ax=null,Bm=null;function gN(){if(Bm)return Bm;var u,f=Ax,m=f.length,v,C="value"in zo?zo.value:zo.textContent,A=C.length;for(u=0;u<m&&f[u]===C[u];u++);var D=m-u;for(v=1;v<=D&&f[m-v]===C[A-v];v++);return Bm=C.slice(u,1<v?1-v:void 0)}function zm(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function jm(){return!0}function yN(){return!1}function Vr(u){function f(m,v,C,A,D){this._reactName=m,this._targetInst=C,this.type=v,this.nativeEvent=A,this.target=D,this.currentTarget=null;for(var F in u)u.hasOwnProperty(F)&&(m=u[F],this[F]=m?m(A):A[F]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?jm:yN,this.isPropagationStopped=yN,this}return h(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=jm)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=jm)},persist:function(){},isPersistent:jm}),f}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Um=Vr(qs),Uf=h({},qs,{view:0,detail:0}),rK=Vr(Uf),Ex,Ix,Vf,Vm=h({},Uf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nx,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Vf&&(Vf&&u.type==="mousemove"?(Ex=u.screenX-Vf.screenX,Ix=u.screenY-Vf.screenY):Ix=Ex=0,Vf=u),Ex)},movementY:function(u){return"movementY"in u?u.movementY:Ix}}),vN=Vr(Vm),iK=h({},Vm,{dataTransfer:0}),aK=Vr(iK),oK=h({},Uf,{relatedTarget:0}),Ox=Vr(oK),sK=h({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),lK=Vr(sK),uK=h({},qs,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),cK=Vr(uK),fK=h({},qs,{data:0}),bN=Vr(fK),hK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mK(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=pK[u])?!!f[u]:!1}function Nx(){return mK}var gK=h({},Uf,{key:function(u){if(u.key){var f=hK[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=zm(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?dK[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nx,charCode:function(u){return u.type==="keypress"?zm(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?zm(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),yK=Vr(gK),vK=h({},Vm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xN=Vr(vK),bK=h({},Uf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nx}),xK=Vr(bK),wK=h({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),SK=Vr(wK),CK=h({},Vm,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),$K=Vr(CK),TK=h({},qs,{newState:0,oldState:0}),kK=Vr(TK),AK=[9,13,27,32],_x=Ya&&"CompositionEvent"in window,Wf=null;Ya&&"documentMode"in document&&(Wf=document.documentMode);var EK=Ya&&"TextEvent"in window&&!Wf,wN=Ya&&(!_x||Wf&&8<Wf&&11>=Wf),SN=" ",CN=!1;function $N(u,f){switch(u){case"keyup":return AK.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TN(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var xu=!1;function IK(u,f){switch(u){case"compositionend":return TN(f);case"keypress":return f.which!==32?null:(CN=!0,SN);case"textInput":return u=f.data,u===SN&&CN?null:u;default:return null}}function OK(u,f){if(xu)return u==="compositionend"||!_x&&$N(u,f)?(u=gN(),Bm=Ax=zo=null,xu=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return wN&&f.locale!=="ko"?null:f.data;default:return null}}var NK={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kN(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!NK[u.type]:f==="textarea"}function AN(u,f,m,v){vu?bu?bu.push(v):bu=[v]:vu=v,f=Ig(f,"onChange"),0<f.length&&(m=new Um("onChange","change",null,m,v),u.push({event:m,listeners:f}))}var Gf=null,qf=null;function _K(u){sD(u,0)}function Wm(u){var f=Bf(u);if(lN(f))return u}function EN(u,f){if(u==="change")return f}var IN=!1;if(Ya){var Rx;if(Ya){var Dx="oninput"in document;if(!Dx){var ON=document.createElement("div");ON.setAttribute("oninput","return;"),Dx=typeof ON.oninput=="function"}Rx=Dx}else Rx=!1;IN=Rx&&(!document.documentMode||9<document.documentMode)}function NN(){Gf&&(Gf.detachEvent("onpropertychange",_N),qf=Gf=null)}function _N(u){if(u.propertyName==="value"&&Wm(qf)){var f=[];AN(f,qf,u,$x(u)),mN(_K,f)}}function RK(u,f,m){u==="focusin"?(NN(),Gf=f,qf=m,Gf.attachEvent("onpropertychange",_N)):u==="focusout"&&NN()}function DK(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Wm(qf)}function MK(u,f){if(u==="click")return Wm(f)}function PK(u,f){if(u==="input"||u==="change")return Wm(f)}function LK(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var ti=typeof Object.is=="function"?Object.is:LK;function Hf(u,f){if(ti(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var m=Object.keys(u),v=Object.keys(f);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var C=m[v];if(!be.call(f,C)||!ti(u[C],f[C]))return!1}return!0}function RN(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function DN(u,f){var m=RN(u);u=0;for(var v;m;){if(m.nodeType===3){if(v=u+m.textContent.length,u<=f&&v>=f)return{node:m,offset:f-u};u=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=RN(m)}}function MN(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?MN(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function PN(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Lm(u.document);f instanceof u.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)u=f.contentWindow;else break;f=Lm(u.document)}return f}function Mx(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var FK=Ya&&"documentMode"in document&&11>=document.documentMode,wu=null,Px=null,Xf=null,Lx=!1;function LN(u,f,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Lx||wu==null||wu!==Lm(v)||(v=wu,"selectionStart"in v&&Mx(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Xf&&Hf(Xf,v)||(Xf=v,v=Ig(Px,"onSelect"),0<v.length&&(f=new Um("onSelect","select",null,f,m),u.push({event:f,listeners:v}),f.target=wu)))}function Hs(u,f){var m={};return m[u.toLowerCase()]=f.toLowerCase(),m["Webkit"+u]="webkit"+f,m["Moz"+u]="moz"+f,m}var Su={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},Fx={},FN={};Ya&&(FN=document.createElement("div").style,"AnimationEvent"in window||(delete Su.animationend.animation,delete Su.animationiteration.animation,delete Su.animationstart.animation),"TransitionEvent"in window||delete Su.transitionend.transition);function Xs(u){if(Fx[u])return Fx[u];if(!Su[u])return u;var f=Su[u],m;for(m in f)if(f.hasOwnProperty(m)&&m in FN)return Fx[u]=f[m];return u}var BN=Xs("animationend"),zN=Xs("animationiteration"),jN=Xs("animationstart"),BK=Xs("transitionrun"),zK=Xs("transitionstart"),jK=Xs("transitioncancel"),UN=Xs("transitionend"),VN=new Map,Bx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bx.push("scrollEnd");function Gi(u,f){VN.set(u,f),Gs(f,[u])}var WN=new WeakMap;function xi(u,f){if(typeof u=="object"&&u!==null){var m=WN.get(u);return m!==void 0?m:(f={value:u,source:f,stack:oN(f)},WN.set(u,f),f)}return{value:u,source:f,stack:oN(f)}}var wi=[],Cu=0,zx=0;function Gm(){for(var u=Cu,f=zx=Cu=0;f<u;){var m=wi[f];wi[f++]=null;var v=wi[f];wi[f++]=null;var C=wi[f];wi[f++]=null;var A=wi[f];if(wi[f++]=null,v!==null&&C!==null){var D=v.pending;D===null?C.next=C:(C.next=D.next,D.next=C),v.pending=C}A!==0&&GN(m,C,A)}}function qm(u,f,m,v){wi[Cu++]=u,wi[Cu++]=f,wi[Cu++]=m,wi[Cu++]=v,zx|=v,u.lanes|=v,u=u.alternate,u!==null&&(u.lanes|=v)}function jx(u,f,m,v){return qm(u,f,m,v),Hm(u)}function $u(u,f){return qm(u,null,null,f),Hm(u)}function GN(u,f,m){u.lanes|=m;var v=u.alternate;v!==null&&(v.lanes|=m);for(var C=!1,A=u.return;A!==null;)A.childLanes|=m,v=A.alternate,v!==null&&(v.childLanes|=m),A.tag===22&&(u=A.stateNode,u===null||u._visibility&1||(C=!0)),u=A,A=A.return;return u.tag===3?(A=u.stateNode,C&&f!==null&&(C=31-Dn(m),u=A.hiddenUpdates,v=u[C],v===null?u[C]=[f]:v.push(f),f.lane=m|536870912),A):null}function Hm(u){if(50<bh)throw bh=0,H1=null,Error(r(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var Tu={};function UK(u,f,m,v){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(u,f,m,v){return new UK(u,f,m,v)}function Ux(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Za(u,f){var m=u.alternate;return m===null?(m=ni(u.tag,f,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=f,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,f=u.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function qN(u,f){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,f=m.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function Xm(u,f,m,v,C,A){var D=0;if(v=u,typeof u=="function")Ux(u)&&(D=1);else if(typeof u=="string")D=W7(u,m,oe.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case N:return u=ni(31,m,f,C),u.elementType=N,u.lanes=A,u;case y:return Ks(m.children,C,A,f);case x:D=8,C|=24;break;case b:return u=ni(12,m,f,C|2),u.elementType=b,u.lanes=A,u;case k:return u=ni(13,m,f,C),u.elementType=k,u.lanes=A,u;case E:return u=ni(19,m,f,C),u.elementType=E,u.lanes=A,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case w:case $:D=10;break e;case S:D=9;break e;case T:D=11;break e;case I:D=14;break e;case _:D=16,v=null;break e}D=29,m=Error(r(130,u===null?"null":typeof u,"")),v=null}return f=ni(D,m,f,C),f.elementType=u,f.type=v,f.lanes=A,f}function Ks(u,f,m,v){return u=ni(7,u,v,f),u.lanes=m,u}function Vx(u,f,m){return u=ni(6,u,null,f),u.lanes=m,u}function Wx(u,f,m){return f=ni(4,u.children!==null?u.children:[],u.key,f),f.lanes=m,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var ku=[],Au=0,Km=null,Ym=0,Si=[],Ci=0,Ys=null,Qa=1,Ja="";function Zs(u,f){ku[Au++]=Ym,ku[Au++]=Km,Km=u,Ym=f}function HN(u,f,m){Si[Ci++]=Qa,Si[Ci++]=Ja,Si[Ci++]=Ys,Ys=u;var v=Qa;u=Ja;var C=32-Dn(v)-1;v&=~(1<<C),m+=1;var A=32-Dn(f)+C;if(30<A){var D=C-C%5;A=(v&(1<<D)-1).toString(32),v>>=D,C-=D,Qa=1<<32-Dn(f)+C|m<<C|v,Ja=A+u}else Qa=1<<A|m<<C|v,Ja=u}function Gx(u){u.return!==null&&(Zs(u,1),HN(u,1,0))}function qx(u){for(;u===Km;)Km=ku[--Au],ku[Au]=null,Ym=ku[--Au],ku[Au]=null;for(;u===Ys;)Ys=Si[--Ci],Si[Ci]=null,Ja=Si[--Ci],Si[Ci]=null,Qa=Si[--Ci],Si[Ci]=null}var Ir=null,un=null,Et=!1,Qs=null,ya=!1,Hx=Error(r(519));function Js(u){var f=Error(r(418,""));throw Zf(xi(f,u)),Hx}function XN(u){var f=u.stateNode,m=u.type,v=u.memoizedProps;switch(f[gr]=u,f[Ur]=v,m){case"dialog":mt("cancel",f),mt("close",f);break;case"iframe":case"object":case"embed":mt("load",f);break;case"video":case"audio":for(m=0;m<wh.length;m++)mt(wh[m],f);break;case"source":mt("error",f);break;case"img":case"image":case"link":mt("error",f),mt("load",f);break;case"details":mt("toggle",f);break;case"input":mt("invalid",f),uN(f,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Pm(f);break;case"select":mt("invalid",f);break;case"textarea":mt("invalid",f),fN(f,v.value,v.defaultValue,v.children),Pm(f)}m=v.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||v.suppressHydrationWarning===!0||fD(f.textContent,m)?(v.popover!=null&&(mt("beforetoggle",f),mt("toggle",f)),v.onScroll!=null&&mt("scroll",f),v.onScrollEnd!=null&&mt("scrollend",f),v.onClick!=null&&(f.onclick=Og),f=!0):f=!1,f||Js(u)}function KN(u){for(Ir=u.return;Ir;)switch(Ir.tag){case 5:case 13:ya=!1;return;case 27:case 3:ya=!0;return;default:Ir=Ir.return}}function Kf(u){if(u!==Ir)return!1;if(!Et)return KN(u),Et=!0,!1;var f=u.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||uw(u.type,u.memoizedProps)),m=!m),m&&un&&Js(u),KN(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(f===0){un=Hi(u.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;u=u.nextSibling}un=null}}else f===27?(f=un,ns(u.type)?(u=dw,dw=null,un=u):un=f):un=Ir?Hi(u.stateNode.nextSibling):null;return!0}function Yf(){un=Ir=null,Et=!1}function YN(){var u=Qs;return u!==null&&(qr===null?qr=u:qr.push.apply(qr,u),Qs=null),u}function Zf(u){Qs===null?Qs=[u]:Qs.push(u)}var Xx=G(null),el=null,eo=null;function jo(u,f,m){K(Xx,f._currentValue),f._currentValue=m}function to(u){u._currentValue=Xx.current,q(Xx)}function Kx(u,f,m){for(;u!==null;){var v=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,v!==null&&(v.childLanes|=f)):v!==null&&(v.childLanes&f)!==f&&(v.childLanes|=f),u===m)break;u=u.return}}function Yx(u,f,m,v){var C=u.child;for(C!==null&&(C.return=u);C!==null;){var A=C.dependencies;if(A!==null){var D=C.child;A=A.firstContext;e:for(;A!==null;){var F=A;A=C;for(var Y=0;Y<f.length;Y++)if(F.context===f[Y]){A.lanes|=m,F=A.alternate,F!==null&&(F.lanes|=m),Kx(A.return,m,u),v||(D=null);break e}A=F.next}}else if(C.tag===18){if(D=C.return,D===null)throw Error(r(341));D.lanes|=m,A=D.alternate,A!==null&&(A.lanes|=m),Kx(D,m,u),D=null}else D=C.child;if(D!==null)D.return=C;else for(D=C;D!==null;){if(D===u){D=null;break}if(C=D.sibling,C!==null){C.return=D.return,D=C;break}D=D.return}C=D}}function Qf(u,f,m,v){u=null;for(var C=f,A=!1;C!==null;){if(!A){if((C.flags&524288)!==0)A=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var D=C.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var F=C.type;ti(C.pendingProps.value,D.value)||(u!==null?u.push(F):u=[F])}}else if(C===Re.current){if(D=C.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(u!==null?u.push(Ah):u=[Ah])}C=C.return}u!==null&&Yx(f,u,m,v),f.flags|=262144}function Zm(u){for(u=u.firstContext;u!==null;){if(!ti(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function tl(u){el=u,eo=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function yr(u){return ZN(el,u)}function Qm(u,f){return el===null&&tl(u),ZN(u,f)}function ZN(u,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},eo===null){if(u===null)throw Error(r(308));eo=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else eo=eo.next=f;return m}var VK=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(m,v){u.push(v)}};this.abort=function(){f.aborted=!0,u.forEach(function(m){return m()})}},WK=t.unstable_scheduleCallback,GK=t.unstable_NormalPriority,Mn={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zx(){return{controller:new VK,data:new Map,refCount:0}}function Jf(u){u.refCount--,u.refCount===0&&WK(GK,function(){u.controller.abort()})}var eh=null,Qx=0,Eu=0,Iu=null;function qK(u,f){if(eh===null){var m=eh=[];Qx=0,Eu=ew(),Iu={status:"pending",value:void 0,then:function(v){m.push(v)}}}return Qx++,f.then(QN,QN),f}function QN(){if(--Qx===0&&eh!==null){Iu!==null&&(Iu.status="fulfilled");var u=eh;eh=null,Eu=0,Iu=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function HK(u,f){var m=[],v={status:"pending",value:null,reason:null,then:function(C){m.push(C)}};return u.then(function(){v.status="fulfilled",v.value=f;for(var C=0;C<m.length;C++)(0,m[C])(f)},function(C){for(v.status="rejected",v.reason=C,C=0;C<m.length;C++)(0,m[C])(void 0)}),v}var JN=M.S;M.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&qK(u,f),JN!==null&&JN(u,f)};var nl=G(null);function Jx(){var u=nl.current;return u!==null?u:Xt.pooledCache}function Jm(u,f){f===null?K(nl,nl.current):K(nl,f.pool)}function e_(){var u=Jx();return u===null?null:{parent:Mn._currentValue,pool:u}}var th=Error(r(460)),t_=Error(r(474)),eg=Error(r(542)),e1={then:function(){}};function n_(u){return u=u.status,u==="fulfilled"||u==="rejected"}function tg(){}function r_(u,f,m){switch(m=u[m],m===void 0?u.push(f):m!==f&&(f.then(tg,tg),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,a_(u),u;default:if(typeof f.status=="string")f.then(tg,tg);else{if(u=Xt,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=f,u.status="pending",u.then(function(v){if(f.status==="pending"){var C=f;C.status="fulfilled",C.value=v}},function(v){if(f.status==="pending"){var C=f;C.status="rejected",C.reason=v}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,a_(u),u}throw nh=f,th}}var nh=null;function i_(){if(nh===null)throw Error(r(459));var u=nh;return nh=null,u}function a_(u){if(u===th||u===eg)throw Error(r(483))}var Uo=!1;function t1(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function n1(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Vo(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Wo(u,f,m){var v=u.updateQueue;if(v===null)return null;if(v=v.shared,(Rt&2)!==0){var C=v.pending;return C===null?f.next=f:(f.next=C.next,C.next=f),v.pending=f,f=Hm(u),GN(u,null,m),f}return qm(u,v,f,m),Hm(u)}function rh(u,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var v=f.lanes;v&=u.pendingLanes,m|=v,f.lanes=m,QO(u,m)}}function r1(u,f){var m=u.updateQueue,v=u.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var C=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var D={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};A===null?C=A=D:A=A.next=D,m=m.next}while(m!==null);A===null?C=A=f:A=A.next=f}else C=A=f;m={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:A,shared:v.shared,callbacks:v.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=f}var i1=!1;function ih(){if(i1){var u=Iu;if(u!==null)throw u}}function ah(u,f,m,v){i1=!1;var C=u.updateQueue;Uo=!1;var A=C.firstBaseUpdate,D=C.lastBaseUpdate,F=C.shared.pending;if(F!==null){C.shared.pending=null;var Y=F,ue=Y.next;Y.next=null,D===null?A=ue:D.next=ue,D=Y;var Se=u.alternate;Se!==null&&(Se=Se.updateQueue,F=Se.lastBaseUpdate,F!==D&&(F===null?Se.firstBaseUpdate=ue:F.next=ue,Se.lastBaseUpdate=Y))}if(A!==null){var $e=C.baseState;D=0,Se=ue=Y=null,F=A;do{var ce=F.lane&-536870913,de=ce!==F.lane;if(de?(xt&ce)===ce:(v&ce)===ce){ce!==0&&ce===Eu&&(i1=!0),Se!==null&&(Se=Se.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Je=u,Xe=F;ce=f;var zt=m;switch(Xe.tag){case 1:if(Je=Xe.payload,typeof Je=="function"){$e=Je.call(zt,$e,ce);break e}$e=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=Xe.payload,ce=typeof Je=="function"?Je.call(zt,$e,ce):Je,ce==null)break e;$e=h({},$e,ce);break e;case 2:Uo=!0}}ce=F.callback,ce!==null&&(u.flags|=64,de&&(u.flags|=8192),de=C.callbacks,de===null?C.callbacks=[ce]:de.push(ce))}else de={lane:ce,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Se===null?(ue=Se=de,Y=$e):Se=Se.next=de,D|=ce;if(F=F.next,F===null){if(F=C.shared.pending,F===null)break;de=F,F=de.next,de.next=null,C.lastBaseUpdate=de,C.shared.pending=null}}while(!0);Se===null&&(Y=$e),C.baseState=Y,C.firstBaseUpdate=ue,C.lastBaseUpdate=Se,A===null&&(C.shared.lanes=0),Qo|=D,u.lanes=D,u.memoizedState=$e}}function o_(u,f){if(typeof u!="function")throw Error(r(191,u));u.call(f)}function s_(u,f){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)o_(m[u],f)}var Ou=G(null),ng=G(0);function l_(u,f){u=lo,K(ng,u),K(Ou,f),lo=u|f.baseLanes}function a1(){K(ng,lo),K(Ou,Ou.current)}function o1(){lo=ng.current,q(Ou),q(ng)}var Go=0,ft=null,Ft=null,Cn=null,rg=!1,Nu=!1,rl=!1,ig=0,oh=0,_u=null,XK=0;function bn(){throw Error(r(321))}function s1(u,f){if(f===null)return!1;for(var m=0;m<f.length&&m<u.length;m++)if(!ti(u[m],f[m]))return!1;return!0}function l1(u,f,m,v,C,A){return Go=A,ft=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,M.H=u===null||u.memoizedState===null?G_:q_,rl=!1,A=m(v,C),rl=!1,Nu&&(A=c_(f,m,v,C)),u_(u),A}function u_(u){M.H=cg;var f=Ft!==null&&Ft.next!==null;if(Go=0,Cn=Ft=ft=null,rg=!1,oh=0,_u=null,f)throw Error(r(300));u===null||Hn||(u=u.dependencies,u!==null&&Zm(u)&&(Hn=!0))}function c_(u,f,m,v){ft=u;var C=0;do{if(Nu&&(_u=null),oh=0,Nu=!1,25<=C)throw Error(r(301));if(C+=1,Cn=Ft=null,u.updateQueue!=null){var A=u.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}M.H=t7,A=f(m,v)}while(Nu);return A}function KK(){var u=M.H,f=u.useState()[0];return f=typeof f.then=="function"?sh(f):f,u=u.useState()[0],(Ft!==null?Ft.memoizedState:null)!==u&&(ft.flags|=1024),f}function u1(){var u=ig!==0;return ig=0,u}function c1(u,f,m){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~m}function f1(u){if(rg){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}rg=!1}Go=0,Cn=Ft=ft=null,Nu=!1,oh=ig=0,_u=null}function Wr(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?ft.memoizedState=Cn=u:Cn=Cn.next=u,Cn}function $n(){if(Ft===null){var u=ft.alternate;u=u!==null?u.memoizedState:null}else u=Ft.next;var f=Cn===null?ft.memoizedState:Cn.next;if(f!==null)Cn=f,Ft=u;else{if(u===null)throw ft.alternate===null?Error(r(467)):Error(r(310));Ft=u,u={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Cn===null?ft.memoizedState=Cn=u:Cn=Cn.next=u}return Cn}function h1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sh(u){var f=oh;return oh+=1,_u===null&&(_u=[]),u=r_(_u,u,f),f=ft,(Cn===null?f.memoizedState:Cn.next)===null&&(f=f.alternate,M.H=f===null||f.memoizedState===null?G_:q_),u}function ag(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return sh(u);if(u.$$typeof===$)return yr(u)}throw Error(r(438,String(u)))}function d1(u){var f=null,m=ft.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var v=ft.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(f={data:v.data.map(function(C){return C.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=h1(),ft.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(u),v=0;v<u;v++)m[v]=R;return f.index++,m}function no(u,f){return typeof f=="function"?f(u):f}function og(u){var f=$n();return p1(f,Ft,u)}function p1(u,f,m){var v=u.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=m;var C=u.baseQueue,A=v.pending;if(A!==null){if(C!==null){var D=C.next;C.next=A.next,A.next=D}f.baseQueue=C=A,v.pending=null}if(A=u.baseState,C===null)u.memoizedState=A;else{f=C.next;var F=D=null,Y=null,ue=f,Se=!1;do{var $e=ue.lane&-536870913;if($e!==ue.lane?(xt&$e)===$e:(Go&$e)===$e){var ce=ue.revertLane;if(ce===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),$e===Eu&&(Se=!0);else if((Go&ce)===ce){ue=ue.next,ce===Eu&&(Se=!0);continue}else $e={lane:0,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Y===null?(F=Y=$e,D=A):Y=Y.next=$e,ft.lanes|=ce,Qo|=ce;$e=ue.action,rl&&m(A,$e),A=ue.hasEagerState?ue.eagerState:m(A,$e)}else ce={lane:$e,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Y===null?(F=Y=ce,D=A):Y=Y.next=ce,ft.lanes|=$e,Qo|=$e;ue=ue.next}while(ue!==null&&ue!==f);if(Y===null?D=A:Y.next=F,!ti(A,u.memoizedState)&&(Hn=!0,Se&&(m=Iu,m!==null)))throw m;u.memoizedState=A,u.baseState=D,u.baseQueue=Y,v.lastRenderedState=A}return C===null&&(v.lanes=0),[u.memoizedState,v.dispatch]}function m1(u){var f=$n(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var v=m.dispatch,C=m.pending,A=f.memoizedState;if(C!==null){m.pending=null;var D=C=C.next;do A=u(A,D.action),D=D.next;while(D!==C);ti(A,f.memoizedState)||(Hn=!0),f.memoizedState=A,f.baseQueue===null&&(f.baseState=A),m.lastRenderedState=A}return[A,v]}function f_(u,f,m){var v=ft,C=$n(),A=Et;if(A){if(m===void 0)throw Error(r(407));m=m()}else m=f();var D=!ti((Ft||C).memoizedState,m);D&&(C.memoizedState=m,Hn=!0),C=C.queue;var F=p_.bind(null,v,C,u);if(lh(2048,8,F,[u]),C.getSnapshot!==f||D||Cn!==null&&Cn.memoizedState.tag&1){if(v.flags|=2048,Ru(9,sg(),d_.bind(null,v,C,m,f),null),Xt===null)throw Error(r(349));A||(Go&124)!==0||h_(v,f,m)}return m}function h_(u,f,m){u.flags|=16384,u={getSnapshot:f,value:m},f=ft.updateQueue,f===null?(f=h1(),ft.updateQueue=f,f.stores=[u]):(m=f.stores,m===null?f.stores=[u]:m.push(u))}function d_(u,f,m,v){f.value=m,f.getSnapshot=v,m_(f)&&g_(u)}function p_(u,f,m){return m(function(){m_(f)&&g_(u)})}function m_(u){var f=u.getSnapshot;u=u.value;try{var m=f();return!ti(u,m)}catch{return!0}}function g_(u){var f=$u(u,2);f!==null&&si(f,u,2)}function g1(u){var f=Wr();if(typeof u=="function"){var m=u;if(u=m(),rl){rr(!0);try{m()}finally{rr(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:u},f}function y_(u,f,m,v){return u.baseState=m,p1(u,Ft,typeof v=="function"?v:no)}function YK(u,f,m,v,C){if(ug(u))throw Error(r(485));if(u=f.action,u!==null){var A={payload:C,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){A.listeners.push(D)}};M.T!==null?m(!0):A.isTransition=!1,v(A),m=f.pending,m===null?(A.next=f.pending=A,v_(f,A)):(A.next=m.next,f.pending=m.next=A)}}function v_(u,f){var m=f.action,v=f.payload,C=u.state;if(f.isTransition){var A=M.T,D={};M.T=D;try{var F=m(C,v),Y=M.S;Y!==null&&Y(D,F),b_(u,f,F)}catch(ue){y1(u,f,ue)}finally{M.T=A}}else try{A=m(C,v),b_(u,f,A)}catch(ue){y1(u,f,ue)}}function b_(u,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(v){x_(u,f,v)},function(v){return y1(u,f,v)}):x_(u,f,m)}function x_(u,f,m){f.status="fulfilled",f.value=m,w_(f),u.state=m,f=u.pending,f!==null&&(m=f.next,m===f?u.pending=null:(m=m.next,f.next=m,v_(u,m)))}function y1(u,f,m){var v=u.pending;if(u.pending=null,v!==null){v=v.next;do f.status="rejected",f.reason=m,w_(f),f=f.next;while(f!==v)}u.action=null}function w_(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function S_(u,f){return f}function C_(u,f){if(Et){var m=Xt.formState;if(m!==null){e:{var v=ft;if(Et){if(un){t:{for(var C=un,A=ya;C.nodeType!==8;){if(!A){C=null;break t}if(C=Hi(C.nextSibling),C===null){C=null;break t}}A=C.data,C=A==="F!"||A==="F"?C:null}if(C){un=Hi(C.nextSibling),v=C.data==="F!";break e}}Js(v)}v=!1}v&&(f=m[0])}}return m=Wr(),m.memoizedState=m.baseState=f,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:S_,lastRenderedState:f},m.queue=v,m=U_.bind(null,ft,v),v.dispatch=m,v=g1(!1),A=S1.bind(null,ft,!1,v.queue),v=Wr(),C={state:f,dispatch:null,action:u,pending:null},v.queue=C,m=YK.bind(null,ft,C,A,m),C.dispatch=m,v.memoizedState=u,[f,m,!1]}function $_(u){var f=$n();return T_(f,Ft,u)}function T_(u,f,m){if(f=p1(u,f,S_)[0],u=og(no)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var v=sh(f)}catch(D){throw D===th?eg:D}else v=f;f=$n();var C=f.queue,A=C.dispatch;return m!==f.memoizedState&&(ft.flags|=2048,Ru(9,sg(),ZK.bind(null,C,m),null)),[v,A,u]}function ZK(u,f){u.action=f}function k_(u){var f=$n(),m=Ft;if(m!==null)return T_(f,m,u);$n(),f=f.memoizedState,m=$n();var v=m.queue.dispatch;return m.memoizedState=u,[f,v,!1]}function Ru(u,f,m,v){return u={tag:u,create:m,deps:v,inst:f,next:null},f=ft.updateQueue,f===null&&(f=h1(),ft.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=u.next=u:(v=m.next,m.next=u,u.next=v,f.lastEffect=u),u}function sg(){return{destroy:void 0,resource:void 0}}function A_(){return $n().memoizedState}function lg(u,f,m,v){var C=Wr();v=v===void 0?null:v,ft.flags|=u,C.memoizedState=Ru(1|f,sg(),m,v)}function lh(u,f,m,v){var C=$n();v=v===void 0?null:v;var A=C.memoizedState.inst;Ft!==null&&v!==null&&s1(v,Ft.memoizedState.deps)?C.memoizedState=Ru(f,A,m,v):(ft.flags|=u,C.memoizedState=Ru(1|f,A,m,v))}function E_(u,f){lg(8390656,8,u,f)}function I_(u,f){lh(2048,8,u,f)}function O_(u,f){return lh(4,2,u,f)}function N_(u,f){return lh(4,4,u,f)}function __(u,f){if(typeof f=="function"){u=u();var m=f(u);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function R_(u,f,m){m=m!=null?m.concat([u]):null,lh(4,4,__.bind(null,f,u),m)}function v1(){}function D_(u,f){var m=$n();f=f===void 0?null:f;var v=m.memoizedState;return f!==null&&s1(f,v[1])?v[0]:(m.memoizedState=[u,f],u)}function M_(u,f){var m=$n();f=f===void 0?null:f;var v=m.memoizedState;if(f!==null&&s1(f,v[1]))return v[0];if(v=u(),rl){rr(!0);try{u()}finally{rr(!1)}}return m.memoizedState=[v,f],v}function b1(u,f,m){return m===void 0||(Go&1073741824)!==0?u.memoizedState=f:(u.memoizedState=m,u=FR(),ft.lanes|=u,Qo|=u,m)}function P_(u,f,m,v){return ti(m,f)?m:Ou.current!==null?(u=b1(u,m,v),ti(u,f)||(Hn=!0),u):(Go&42)===0?(Hn=!0,u.memoizedState=m):(u=FR(),ft.lanes|=u,Qo|=u,f)}function L_(u,f,m,v,C){var A=V.p;V.p=A!==0&&8>A?A:8;var D=M.T,F={};M.T=F,S1(u,!1,f,m);try{var Y=C(),ue=M.S;if(ue!==null&&ue(F,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var Se=HK(Y,v);uh(u,f,Se,oi(u))}else uh(u,f,v,oi(u))}catch($e){uh(u,f,{then:function(){},status:"rejected",reason:$e},oi())}finally{V.p=A,M.T=D}}function QK(){}function x1(u,f,m,v){if(u.tag!==5)throw Error(r(476));var C=F_(u).queue;L_(u,C,f,W,m===null?QK:function(){return B_(u),m(v)})}function F_(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:W},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:m},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function B_(u){var f=F_(u).next.queue;uh(u,f,{},oi())}function w1(){return yr(Ah)}function z_(){return $n().memoizedState}function j_(){return $n().memoizedState}function JK(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var m=oi();u=Vo(m);var v=Wo(f,u,m);v!==null&&(si(v,f,m),rh(v,f,m)),f={cache:Zx()},u.payload=f;return}f=f.return}}function e7(u,f,m){var v=oi();m={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},ug(u)?V_(f,m):(m=jx(u,f,m,v),m!==null&&(si(m,u,v),W_(m,f,v)))}function U_(u,f,m){var v=oi();uh(u,f,m,v)}function uh(u,f,m,v){var C={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(ug(u))V_(f,C);else{var A=u.alternate;if(u.lanes===0&&(A===null||A.lanes===0)&&(A=f.lastRenderedReducer,A!==null))try{var D=f.lastRenderedState,F=A(D,m);if(C.hasEagerState=!0,C.eagerState=F,ti(F,D))return qm(u,f,C,0),Xt===null&&Gm(),!1}catch{}finally{}if(m=jx(u,f,C,v),m!==null)return si(m,u,v),W_(m,f,v),!0}return!1}function S1(u,f,m,v){if(v={lane:2,revertLane:ew(),action:v,hasEagerState:!1,eagerState:null,next:null},ug(u)){if(f)throw Error(r(479))}else f=jx(u,m,v,2),f!==null&&si(f,u,2)}function ug(u){var f=u.alternate;return u===ft||f!==null&&f===ft}function V_(u,f){Nu=rg=!0;var m=u.pending;m===null?f.next=f:(f.next=m.next,m.next=f),u.pending=f}function W_(u,f,m){if((m&4194048)!==0){var v=f.lanes;v&=u.pendingLanes,m|=v,f.lanes=m,QO(u,m)}}var cg={readContext:yr,use:ag,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn,useHostTransitionStatus:bn,useFormState:bn,useActionState:bn,useOptimistic:bn,useMemoCache:bn,useCacheRefresh:bn},G_={readContext:yr,use:ag,useCallback:function(u,f){return Wr().memoizedState=[u,f===void 0?null:f],u},useContext:yr,useEffect:E_,useImperativeHandle:function(u,f,m){m=m!=null?m.concat([u]):null,lg(4194308,4,__.bind(null,f,u),m)},useLayoutEffect:function(u,f){return lg(4194308,4,u,f)},useInsertionEffect:function(u,f){lg(4,2,u,f)},useMemo:function(u,f){var m=Wr();f=f===void 0?null:f;var v=u();if(rl){rr(!0);try{u()}finally{rr(!1)}}return m.memoizedState=[v,f],v},useReducer:function(u,f,m){var v=Wr();if(m!==void 0){var C=m(f);if(rl){rr(!0);try{m(f)}finally{rr(!1)}}}else C=f;return v.memoizedState=v.baseState=C,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:C},v.queue=u,u=u.dispatch=e7.bind(null,ft,u),[v.memoizedState,u]},useRef:function(u){var f=Wr();return u={current:u},f.memoizedState=u},useState:function(u){u=g1(u);var f=u.queue,m=U_.bind(null,ft,f);return f.dispatch=m,[u.memoizedState,m]},useDebugValue:v1,useDeferredValue:function(u,f){var m=Wr();return b1(m,u,f)},useTransition:function(){var u=g1(!1);return u=L_.bind(null,ft,u.queue,!0,!1),Wr().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,m){var v=ft,C=Wr();if(Et){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),Xt===null)throw Error(r(349));(xt&124)!==0||h_(v,f,m)}C.memoizedState=m;var A={value:m,getSnapshot:f};return C.queue=A,E_(p_.bind(null,v,A,u),[u]),v.flags|=2048,Ru(9,sg(),d_.bind(null,v,A,m,f),null),m},useId:function(){var u=Wr(),f=Xt.identifierPrefix;if(Et){var m=Ja,v=Qa;m=(v&~(1<<32-Dn(v)-1)).toString(32)+m,f="«"+f+"R"+m,m=ig++,0<m&&(f+="H"+m.toString(32)),f+="»"}else m=XK++,f="«"+f+"r"+m.toString(32)+"»";return u.memoizedState=f},useHostTransitionStatus:w1,useFormState:C_,useActionState:C_,useOptimistic:function(u){var f=Wr();f.memoizedState=f.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=S1.bind(null,ft,!0,m),m.dispatch=f,[u,f]},useMemoCache:d1,useCacheRefresh:function(){return Wr().memoizedState=JK.bind(null,ft)}},q_={readContext:yr,use:ag,useCallback:D_,useContext:yr,useEffect:I_,useImperativeHandle:R_,useInsertionEffect:O_,useLayoutEffect:N_,useMemo:M_,useReducer:og,useRef:A_,useState:function(){return og(no)},useDebugValue:v1,useDeferredValue:function(u,f){var m=$n();return P_(m,Ft.memoizedState,u,f)},useTransition:function(){var u=og(no)[0],f=$n().memoizedState;return[typeof u=="boolean"?u:sh(u),f]},useSyncExternalStore:f_,useId:z_,useHostTransitionStatus:w1,useFormState:$_,useActionState:$_,useOptimistic:function(u,f){var m=$n();return y_(m,Ft,u,f)},useMemoCache:d1,useCacheRefresh:j_},t7={readContext:yr,use:ag,useCallback:D_,useContext:yr,useEffect:I_,useImperativeHandle:R_,useInsertionEffect:O_,useLayoutEffect:N_,useMemo:M_,useReducer:m1,useRef:A_,useState:function(){return m1(no)},useDebugValue:v1,useDeferredValue:function(u,f){var m=$n();return Ft===null?b1(m,u,f):P_(m,Ft.memoizedState,u,f)},useTransition:function(){var u=m1(no)[0],f=$n().memoizedState;return[typeof u=="boolean"?u:sh(u),f]},useSyncExternalStore:f_,useId:z_,useHostTransitionStatus:w1,useFormState:k_,useActionState:k_,useOptimistic:function(u,f){var m=$n();return Ft!==null?y_(m,Ft,u,f):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:d1,useCacheRefresh:j_},Du=null,ch=0;function fg(u){var f=ch;return ch+=1,Du===null&&(Du=[]),r_(Du,u,f)}function fh(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function hg(u,f){throw f.$$typeof===d?Error(r(525)):(u=Object.prototype.toString.call(f),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function H_(u){var f=u._init;return f(u._payload)}function X_(u){function f(ae,ee){if(u){var se=ae.deletions;se===null?(ae.deletions=[ee],ae.flags|=16):se.push(ee)}}function m(ae,ee){if(!u)return null;for(;ee!==null;)f(ae,ee),ee=ee.sibling;return null}function v(ae){for(var ee=new Map;ae!==null;)ae.key!==null?ee.set(ae.key,ae):ee.set(ae.index,ae),ae=ae.sibling;return ee}function C(ae,ee){return ae=Za(ae,ee),ae.index=0,ae.sibling=null,ae}function A(ae,ee,se){return ae.index=se,u?(se=ae.alternate,se!==null?(se=se.index,se<ee?(ae.flags|=67108866,ee):se):(ae.flags|=67108866,ee)):(ae.flags|=1048576,ee)}function D(ae){return u&&ae.alternate===null&&(ae.flags|=67108866),ae}function F(ae,ee,se,Ce){return ee===null||ee.tag!==6?(ee=Vx(se,ae.mode,Ce),ee.return=ae,ee):(ee=C(ee,se),ee.return=ae,ee)}function Y(ae,ee,se,Ce){var ze=se.type;return ze===y?Se(ae,ee,se.props.children,Ce,se.key):ee!==null&&(ee.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===_&&H_(ze)===ee.type)?(ee=C(ee,se.props),fh(ee,se),ee.return=ae,ee):(ee=Xm(se.type,se.key,se.props,null,ae.mode,Ce),fh(ee,se),ee.return=ae,ee)}function ue(ae,ee,se,Ce){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==se.containerInfo||ee.stateNode.implementation!==se.implementation?(ee=Wx(se,ae.mode,Ce),ee.return=ae,ee):(ee=C(ee,se.children||[]),ee.return=ae,ee)}function Se(ae,ee,se,Ce,ze){return ee===null||ee.tag!==7?(ee=Ks(se,ae.mode,Ce,ze),ee.return=ae,ee):(ee=C(ee,se),ee.return=ae,ee)}function $e(ae,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Vx(""+ee,ae.mode,se),ee.return=ae,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case p:return se=Xm(ee.type,ee.key,ee.props,null,ae.mode,se),fh(se,ee),se.return=ae,se;case g:return ee=Wx(ee,ae.mode,se),ee.return=ae,ee;case _:var Ce=ee._init;return ee=Ce(ee._payload),$e(ae,ee,se)}if(z(ee)||P(ee))return ee=Ks(ee,ae.mode,se,null),ee.return=ae,ee;if(typeof ee.then=="function")return $e(ae,fg(ee),se);if(ee.$$typeof===$)return $e(ae,Qm(ae,ee),se);hg(ae,ee)}return null}function ce(ae,ee,se,Ce){var ze=ee!==null?ee.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return ze!==null?null:F(ae,ee,""+se,Ce);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case p:return se.key===ze?Y(ae,ee,se,Ce):null;case g:return se.key===ze?ue(ae,ee,se,Ce):null;case _:return ze=se._init,se=ze(se._payload),ce(ae,ee,se,Ce)}if(z(se)||P(se))return ze!==null?null:Se(ae,ee,se,Ce,null);if(typeof se.then=="function")return ce(ae,ee,fg(se),Ce);if(se.$$typeof===$)return ce(ae,ee,Qm(ae,se),Ce);hg(ae,se)}return null}function de(ae,ee,se,Ce,ze){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ae=ae.get(se)||null,F(ee,ae,""+Ce,ze);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case p:return ae=ae.get(Ce.key===null?se:Ce.key)||null,Y(ee,ae,Ce,ze);case g:return ae=ae.get(Ce.key===null?se:Ce.key)||null,ue(ee,ae,Ce,ze);case _:var ht=Ce._init;return Ce=ht(Ce._payload),de(ae,ee,se,Ce,ze)}if(z(Ce)||P(Ce))return ae=ae.get(se)||null,Se(ee,ae,Ce,ze,null);if(typeof Ce.then=="function")return de(ae,ee,se,fg(Ce),ze);if(Ce.$$typeof===$)return de(ae,ee,se,Qm(ee,Ce),ze);hg(ee,Ce)}return null}function Je(ae,ee,se,Ce){for(var ze=null,ht=null,We=ee,Ye=ee=0,Kn=null;We!==null&&Ye<se.length;Ye++){We.index>Ye?(Kn=We,We=null):Kn=We.sibling;var Ct=ce(ae,We,se[Ye],Ce);if(Ct===null){We===null&&(We=Kn);break}u&&We&&Ct.alternate===null&&f(ae,We),ee=A(Ct,ee,Ye),ht===null?ze=Ct:ht.sibling=Ct,ht=Ct,We=Kn}if(Ye===se.length)return m(ae,We),Et&&Zs(ae,Ye),ze;if(We===null){for(;Ye<se.length;Ye++)We=$e(ae,se[Ye],Ce),We!==null&&(ee=A(We,ee,Ye),ht===null?ze=We:ht.sibling=We,ht=We);return Et&&Zs(ae,Ye),ze}for(We=v(We);Ye<se.length;Ye++)Kn=de(We,ae,Ye,se[Ye],Ce),Kn!==null&&(u&&Kn.alternate!==null&&We.delete(Kn.key===null?Ye:Kn.key),ee=A(Kn,ee,Ye),ht===null?ze=Kn:ht.sibling=Kn,ht=Kn);return u&&We.forEach(function(ss){return f(ae,ss)}),Et&&Zs(ae,Ye),ze}function Xe(ae,ee,se,Ce){if(se==null)throw Error(r(151));for(var ze=null,ht=null,We=ee,Ye=ee=0,Kn=null,Ct=se.next();We!==null&&!Ct.done;Ye++,Ct=se.next()){We.index>Ye?(Kn=We,We=null):Kn=We.sibling;var ss=ce(ae,We,Ct.value,Ce);if(ss===null){We===null&&(We=Kn);break}u&&We&&ss.alternate===null&&f(ae,We),ee=A(ss,ee,Ye),ht===null?ze=ss:ht.sibling=ss,ht=ss,We=Kn}if(Ct.done)return m(ae,We),Et&&Zs(ae,Ye),ze;if(We===null){for(;!Ct.done;Ye++,Ct=se.next())Ct=$e(ae,Ct.value,Ce),Ct!==null&&(ee=A(Ct,ee,Ye),ht===null?ze=Ct:ht.sibling=Ct,ht=Ct);return Et&&Zs(ae,Ye),ze}for(We=v(We);!Ct.done;Ye++,Ct=se.next())Ct=de(We,ae,Ye,Ct.value,Ce),Ct!==null&&(u&&Ct.alternate!==null&&We.delete(Ct.key===null?Ye:Ct.key),ee=A(Ct,ee,Ye),ht===null?ze=Ct:ht.sibling=Ct,ht=Ct);return u&&We.forEach(function(n9){return f(ae,n9)}),Et&&Zs(ae,Ye),ze}function zt(ae,ee,se,Ce){if(typeof se=="object"&&se!==null&&se.type===y&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case p:e:{for(var ze=se.key;ee!==null;){if(ee.key===ze){if(ze=se.type,ze===y){if(ee.tag===7){m(ae,ee.sibling),Ce=C(ee,se.props.children),Ce.return=ae,ae=Ce;break e}}else if(ee.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===_&&H_(ze)===ee.type){m(ae,ee.sibling),Ce=C(ee,se.props),fh(Ce,se),Ce.return=ae,ae=Ce;break e}m(ae,ee);break}else f(ae,ee);ee=ee.sibling}se.type===y?(Ce=Ks(se.props.children,ae.mode,Ce,se.key),Ce.return=ae,ae=Ce):(Ce=Xm(se.type,se.key,se.props,null,ae.mode,Ce),fh(Ce,se),Ce.return=ae,ae=Ce)}return D(ae);case g:e:{for(ze=se.key;ee!==null;){if(ee.key===ze)if(ee.tag===4&&ee.stateNode.containerInfo===se.containerInfo&&ee.stateNode.implementation===se.implementation){m(ae,ee.sibling),Ce=C(ee,se.children||[]),Ce.return=ae,ae=Ce;break e}else{m(ae,ee);break}else f(ae,ee);ee=ee.sibling}Ce=Wx(se,ae.mode,Ce),Ce.return=ae,ae=Ce}return D(ae);case _:return ze=se._init,se=ze(se._payload),zt(ae,ee,se,Ce)}if(z(se))return Je(ae,ee,se,Ce);if(P(se)){if(ze=P(se),typeof ze!="function")throw Error(r(150));return se=ze.call(se),Xe(ae,ee,se,Ce)}if(typeof se.then=="function")return zt(ae,ee,fg(se),Ce);if(se.$$typeof===$)return zt(ae,ee,Qm(ae,se),Ce);hg(ae,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,ee!==null&&ee.tag===6?(m(ae,ee.sibling),Ce=C(ee,se),Ce.return=ae,ae=Ce):(m(ae,ee),Ce=Vx(se,ae.mode,Ce),Ce.return=ae,ae=Ce),D(ae)):m(ae,ee)}return function(ae,ee,se,Ce){try{ch=0;var ze=zt(ae,ee,se,Ce);return Du=null,ze}catch(We){if(We===th||We===eg)throw We;var ht=ni(29,We,null,ae.mode);return ht.lanes=Ce,ht.return=ae,ht}finally{}}}var Mu=X_(!0),K_=X_(!1),$i=G(null),va=null;function qo(u){var f=u.alternate;K(Pn,Pn.current&1),K($i,u),va===null&&(f===null||Ou.current!==null||f.memoizedState!==null)&&(va=u)}function Y_(u){if(u.tag===22){if(K(Pn,Pn.current),K($i,u),va===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(va=u)}}else Ho()}function Ho(){K(Pn,Pn.current),K($i,$i.current)}function ro(u){q($i),va===u&&(va=null),q(Pn)}var Pn=G(0);function dg(u){for(var f=u;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||hw(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function C1(u,f,m,v){f=u.memoizedState,m=m(v,f),m=m==null?f:h({},f,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var $1={enqueueSetState:function(u,f,m){u=u._reactInternals;var v=oi(),C=Vo(v);C.payload=f,m!=null&&(C.callback=m),f=Wo(u,C,v),f!==null&&(si(f,u,v),rh(f,u,v))},enqueueReplaceState:function(u,f,m){u=u._reactInternals;var v=oi(),C=Vo(v);C.tag=1,C.payload=f,m!=null&&(C.callback=m),f=Wo(u,C,v),f!==null&&(si(f,u,v),rh(f,u,v))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var m=oi(),v=Vo(m);v.tag=2,f!=null&&(v.callback=f),f=Wo(u,v,m),f!==null&&(si(f,u,m),rh(f,u,m))}};function Z_(u,f,m,v,C,A,D){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(v,A,D):f.prototype&&f.prototype.isPureReactComponent?!Hf(m,v)||!Hf(C,A):!0}function Q_(u,f,m,v){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,v),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,v),f.state!==u&&$1.enqueueReplaceState(f,f.state,null)}function il(u,f){var m=f;if("ref"in f){m={};for(var v in f)v!=="ref"&&(m[v]=f[v])}if(u=u.defaultProps){m===f&&(m=h({},m));for(var C in u)m[C]===void 0&&(m[C]=u[C])}return m}var pg=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function J_(u){pg(u)}function eR(u){console.error(u)}function tR(u){pg(u)}function mg(u,f){try{var m=u.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(v){setTimeout(function(){throw v})}}function nR(u,f,m){try{var v=u.onCaughtError;v(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function T1(u,f,m){return m=Vo(m),m.tag=3,m.payload={element:null},m.callback=function(){mg(u,f)},m}function rR(u){return u=Vo(u),u.tag=3,u}function iR(u,f,m,v){var C=m.type.getDerivedStateFromError;if(typeof C=="function"){var A=v.value;u.payload=function(){return C(A)},u.callback=function(){nR(f,m,v)}}var D=m.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(u.callback=function(){nR(f,m,v),typeof C!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var F=v.stack;this.componentDidCatch(v.value,{componentStack:F!==null?F:""})})}function n7(u,f,m,v,C){if(m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(f=m.alternate,f!==null&&Qf(f,m,C,!0),m=$i.current,m!==null){switch(m.tag){case 13:return va===null?K1():m.alternate===null&&cn===0&&(cn=3),m.flags&=-257,m.flags|=65536,m.lanes=C,v===e1?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([v]):f.add(v),Z1(u,v,C)),!1;case 22:return m.flags|=65536,v===e1?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([v])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([v]):m.add(v)),Z1(u,v,C)),!1}throw Error(r(435,m.tag))}return Z1(u,v,C),K1(),!1}if(Et)return f=$i.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=C,v!==Hx&&(u=Error(r(422),{cause:v}),Zf(xi(u,m)))):(v!==Hx&&(f=Error(r(423),{cause:v}),Zf(xi(f,m))),u=u.current.alternate,u.flags|=65536,C&=-C,u.lanes|=C,v=xi(v,m),C=T1(u.stateNode,v,C),r1(u,C),cn!==4&&(cn=2)),!1;var A=Error(r(520),{cause:v});if(A=xi(A,m),vh===null?vh=[A]:vh.push(A),cn!==4&&(cn=2),f===null)return!0;v=xi(v,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,u=C&-C,m.lanes|=u,u=T1(m.stateNode,v,u),r1(m,u),!1;case 1:if(f=m.type,A=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Jo===null||!Jo.has(A))))return m.flags|=65536,C&=-C,m.lanes|=C,C=rR(C),iR(C,u,m,v),r1(m,C),!1}m=m.return}while(m!==null);return!1}var aR=Error(r(461)),Hn=!1;function ir(u,f,m,v){f.child=u===null?K_(f,null,m,v):Mu(f,u.child,m,v)}function oR(u,f,m,v,C){m=m.render;var A=f.ref;if("ref"in v){var D={};for(var F in v)F!=="ref"&&(D[F]=v[F])}else D=v;return tl(f),v=l1(u,f,m,D,A,C),F=u1(),u!==null&&!Hn?(c1(u,f,C),io(u,f,C)):(Et&&F&&Gx(f),f.flags|=1,ir(u,f,v,C),f.child)}function sR(u,f,m,v,C){if(u===null){var A=m.type;return typeof A=="function"&&!Ux(A)&&A.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=A,lR(u,f,A,v,C)):(u=Xm(m.type,null,v,f,f.mode,C),u.ref=f.ref,u.return=f,f.child=u)}if(A=u.child,!R1(u,C)){var D=A.memoizedProps;if(m=m.compare,m=m!==null?m:Hf,m(D,v)&&u.ref===f.ref)return io(u,f,C)}return f.flags|=1,u=Za(A,v),u.ref=f.ref,u.return=f,f.child=u}function lR(u,f,m,v,C){if(u!==null){var A=u.memoizedProps;if(Hf(A,v)&&u.ref===f.ref)if(Hn=!1,f.pendingProps=v=A,R1(u,C))(u.flags&131072)!==0&&(Hn=!0);else return f.lanes=u.lanes,io(u,f,C)}return k1(u,f,m,v,C)}function uR(u,f,m){var v=f.pendingProps,C=v.children,A=u!==null?u.memoizedState:null;if(v.mode==="hidden"){if((f.flags&128)!==0){if(v=A!==null?A.baseLanes|m:m,u!==null){for(C=f.child=u.child,A=0;C!==null;)A=A|C.lanes|C.childLanes,C=C.sibling;f.childLanes=A&~v}else f.childLanes=0,f.child=null;return cR(u,f,v,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&Jm(f,A!==null?A.cachePool:null),A!==null?l_(f,A):a1(),Y_(f);else return f.lanes=f.childLanes=536870912,cR(u,f,A!==null?A.baseLanes|m:m,m)}else A!==null?(Jm(f,A.cachePool),l_(f,A),Ho(),f.memoizedState=null):(u!==null&&Jm(f,null),a1(),Ho());return ir(u,f,C,m),f.child}function cR(u,f,m,v){var C=Jx();return C=C===null?null:{parent:Mn._currentValue,pool:C},f.memoizedState={baseLanes:m,cachePool:C},u!==null&&Jm(f,null),a1(),Y_(f),u!==null&&Qf(u,f,v,!0),null}function gg(u,f){var m=f.ref;if(m===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(u===null||u.ref!==m)&&(f.flags|=4194816)}}function k1(u,f,m,v,C){return tl(f),m=l1(u,f,m,v,void 0,C),v=u1(),u!==null&&!Hn?(c1(u,f,C),io(u,f,C)):(Et&&v&&Gx(f),f.flags|=1,ir(u,f,m,C),f.child)}function fR(u,f,m,v,C,A){return tl(f),f.updateQueue=null,m=c_(f,v,m,C),u_(u),v=u1(),u!==null&&!Hn?(c1(u,f,A),io(u,f,A)):(Et&&v&&Gx(f),f.flags|=1,ir(u,f,m,A),f.child)}function hR(u,f,m,v,C){if(tl(f),f.stateNode===null){var A=Tu,D=m.contextType;typeof D=="object"&&D!==null&&(A=yr(D)),A=new m(v,A),f.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=$1,f.stateNode=A,A._reactInternals=f,A=f.stateNode,A.props=v,A.state=f.memoizedState,A.refs={},t1(f),D=m.contextType,A.context=typeof D=="object"&&D!==null?yr(D):Tu,A.state=f.memoizedState,D=m.getDerivedStateFromProps,typeof D=="function"&&(C1(f,m,D,v),A.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(D=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),D!==A.state&&$1.enqueueReplaceState(A,A.state,null),ah(f,v,A,C),ih(),A.state=f.memoizedState),typeof A.componentDidMount=="function"&&(f.flags|=4194308),v=!0}else if(u===null){A=f.stateNode;var F=f.memoizedProps,Y=il(m,F);A.props=Y;var ue=A.context,Se=m.contextType;D=Tu,typeof Se=="object"&&Se!==null&&(D=yr(Se));var $e=m.getDerivedStateFromProps;Se=typeof $e=="function"||typeof A.getSnapshotBeforeUpdate=="function",F=f.pendingProps!==F,Se||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(F||ue!==D)&&Q_(f,A,v,D),Uo=!1;var ce=f.memoizedState;A.state=ce,ah(f,v,A,C),ih(),ue=f.memoizedState,F||ce!==ue||Uo?(typeof $e=="function"&&(C1(f,m,$e,v),ue=f.memoizedState),(Y=Uo||Z_(f,m,Y,v,ce,ue,D))?(Se||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(f.flags|=4194308)):(typeof A.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=v,f.memoizedState=ue),A.props=v,A.state=ue,A.context=D,v=Y):(typeof A.componentDidMount=="function"&&(f.flags|=4194308),v=!1)}else{A=f.stateNode,n1(u,f),D=f.memoizedProps,Se=il(m,D),A.props=Se,$e=f.pendingProps,ce=A.context,ue=m.contextType,Y=Tu,typeof ue=="object"&&ue!==null&&(Y=yr(ue)),F=m.getDerivedStateFromProps,(ue=typeof F=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(D!==$e||ce!==Y)&&Q_(f,A,v,Y),Uo=!1,ce=f.memoizedState,A.state=ce,ah(f,v,A,C),ih();var de=f.memoizedState;D!==$e||ce!==de||Uo||u!==null&&u.dependencies!==null&&Zm(u.dependencies)?(typeof F=="function"&&(C1(f,m,F,v),de=f.memoizedState),(Se=Uo||Z_(f,m,Se,v,ce,de,Y)||u!==null&&u.dependencies!==null&&Zm(u.dependencies))?(ue||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(v,de,Y),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(v,de,Y)),typeof A.componentDidUpdate=="function"&&(f.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof A.componentDidUpdate!="function"||D===u.memoizedProps&&ce===u.memoizedState||(f.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&ce===u.memoizedState||(f.flags|=1024),f.memoizedProps=v,f.memoizedState=de),A.props=v,A.state=de,A.context=Y,v=Se):(typeof A.componentDidUpdate!="function"||D===u.memoizedProps&&ce===u.memoizedState||(f.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&ce===u.memoizedState||(f.flags|=1024),v=!1)}return A=v,gg(u,f),v=(f.flags&128)!==0,A||v?(A=f.stateNode,m=v&&typeof m.getDerivedStateFromError!="function"?null:A.render(),f.flags|=1,u!==null&&v?(f.child=Mu(f,u.child,null,C),f.child=Mu(f,null,m,C)):ir(u,f,m,C),f.memoizedState=A.state,u=f.child):u=io(u,f,C),u}function dR(u,f,m,v){return Yf(),f.flags|=256,ir(u,f,m,v),f.child}var A1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function E1(u){return{baseLanes:u,cachePool:e_()}}function I1(u,f,m){return u=u!==null?u.childLanes&~m:0,f&&(u|=Ti),u}function pR(u,f,m){var v=f.pendingProps,C=!1,A=(f.flags&128)!==0,D;if((D=A)||(D=u!==null&&u.memoizedState===null?!1:(Pn.current&2)!==0),D&&(C=!0,f.flags&=-129),D=(f.flags&32)!==0,f.flags&=-33,u===null){if(Et){if(C?qo(f):Ho(),Et){var F=un,Y;if(Y=F){e:{for(Y=F,F=ya;Y.nodeType!==8;){if(!F){F=null;break e}if(Y=Hi(Y.nextSibling),Y===null){F=null;break e}}F=Y}F!==null?(f.memoizedState={dehydrated:F,treeContext:Ys!==null?{id:Qa,overflow:Ja}:null,retryLane:536870912,hydrationErrors:null},Y=ni(18,null,null,0),Y.stateNode=F,Y.return=f,f.child=Y,Ir=f,un=null,Y=!0):Y=!1}Y||Js(f)}if(F=f.memoizedState,F!==null&&(F=F.dehydrated,F!==null))return hw(F)?f.lanes=32:f.lanes=536870912,null;ro(f)}return F=v.children,v=v.fallback,C?(Ho(),C=f.mode,F=yg({mode:"hidden",children:F},C),v=Ks(v,C,m,null),F.return=f,v.return=f,F.sibling=v,f.child=F,C=f.child,C.memoizedState=E1(m),C.childLanes=I1(u,D,m),f.memoizedState=A1,v):(qo(f),O1(f,F))}if(Y=u.memoizedState,Y!==null&&(F=Y.dehydrated,F!==null)){if(A)f.flags&256?(qo(f),f.flags&=-257,f=N1(u,f,m)):f.memoizedState!==null?(Ho(),f.child=u.child,f.flags|=128,f=null):(Ho(),C=v.fallback,F=f.mode,v=yg({mode:"visible",children:v.children},F),C=Ks(C,F,m,null),C.flags|=2,v.return=f,C.return=f,v.sibling=C,f.child=v,Mu(f,u.child,null,m),v=f.child,v.memoizedState=E1(m),v.childLanes=I1(u,D,m),f.memoizedState=A1,f=C);else if(qo(f),hw(F)){if(D=F.nextSibling&&F.nextSibling.dataset,D)var ue=D.dgst;D=ue,v=Error(r(419)),v.stack="",v.digest=D,Zf({value:v,source:null,stack:null}),f=N1(u,f,m)}else if(Hn||Qf(u,f,m,!1),D=(m&u.childLanes)!==0,Hn||D){if(D=Xt,D!==null&&(v=m&-m,v=(v&42)!==0?1:dx(v),v=(v&(D.suspendedLanes|m))!==0?0:v,v!==0&&v!==Y.retryLane))throw Y.retryLane=v,$u(u,v),si(D,u,v),aR;F.data==="$?"||K1(),f=N1(u,f,m)}else F.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=Y.treeContext,un=Hi(F.nextSibling),Ir=f,Et=!0,Qs=null,ya=!1,u!==null&&(Si[Ci++]=Qa,Si[Ci++]=Ja,Si[Ci++]=Ys,Qa=u.id,Ja=u.overflow,Ys=f),f=O1(f,v.children),f.flags|=4096);return f}return C?(Ho(),C=v.fallback,F=f.mode,Y=u.child,ue=Y.sibling,v=Za(Y,{mode:"hidden",children:v.children}),v.subtreeFlags=Y.subtreeFlags&65011712,ue!==null?C=Za(ue,C):(C=Ks(C,F,m,null),C.flags|=2),C.return=f,v.return=f,v.sibling=C,f.child=v,v=C,C=f.child,F=u.child.memoizedState,F===null?F=E1(m):(Y=F.cachePool,Y!==null?(ue=Mn._currentValue,Y=Y.parent!==ue?{parent:ue,pool:ue}:Y):Y=e_(),F={baseLanes:F.baseLanes|m,cachePool:Y}),C.memoizedState=F,C.childLanes=I1(u,D,m),f.memoizedState=A1,v):(qo(f),m=u.child,u=m.sibling,m=Za(m,{mode:"visible",children:v.children}),m.return=f,m.sibling=null,u!==null&&(D=f.deletions,D===null?(f.deletions=[u],f.flags|=16):D.push(u)),f.child=m,f.memoizedState=null,m)}function O1(u,f){return f=yg({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function yg(u,f){return u=ni(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function N1(u,f,m){return Mu(f,u.child,null,m),u=O1(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function mR(u,f,m){u.lanes|=f;var v=u.alternate;v!==null&&(v.lanes|=f),Kx(u.return,f,m)}function _1(u,f,m,v,C){var A=u.memoizedState;A===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:C}:(A.isBackwards=f,A.rendering=null,A.renderingStartTime=0,A.last=v,A.tail=m,A.tailMode=C)}function gR(u,f,m){var v=f.pendingProps,C=v.revealOrder,A=v.tail;if(ir(u,f,v.children,m),v=Pn.current,(v&2)!==0)v=v&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&mR(u,m,f);else if(u.tag===19)mR(u,m,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}v&=1}switch(K(Pn,v),C){case"forwards":for(m=f.child,C=null;m!==null;)u=m.alternate,u!==null&&dg(u)===null&&(C=m),m=m.sibling;m=C,m===null?(C=f.child,f.child=null):(C=m.sibling,m.sibling=null),_1(f,!1,C,m,A);break;case"backwards":for(m=null,C=f.child,f.child=null;C!==null;){if(u=C.alternate,u!==null&&dg(u)===null){f.child=C;break}u=C.sibling,C.sibling=m,m=C,C=u}_1(f,!0,m,null,A);break;case"together":_1(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function io(u,f,m){if(u!==null&&(f.dependencies=u.dependencies),Qo|=f.lanes,(m&f.childLanes)===0)if(u!==null){if(Qf(u,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(r(153));if(f.child!==null){for(u=f.child,m=Za(u,u.pendingProps),f.child=m,m.return=f;u.sibling!==null;)u=u.sibling,m=m.sibling=Za(u,u.pendingProps),m.return=f;m.sibling=null}return f.child}function R1(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&Zm(u)))}function r7(u,f,m){switch(f.tag){case 3:Ee(f,f.stateNode.containerInfo),jo(f,Mn,u.memoizedState.cache),Yf();break;case 27:case 5:Ie(f);break;case 4:Ee(f,f.stateNode.containerInfo);break;case 10:jo(f,f.type,f.memoizedProps.value);break;case 13:var v=f.memoizedState;if(v!==null)return v.dehydrated!==null?(qo(f),f.flags|=128,null):(m&f.child.childLanes)!==0?pR(u,f,m):(qo(f),u=io(u,f,m),u!==null?u.sibling:null);qo(f);break;case 19:var C=(u.flags&128)!==0;if(v=(m&f.childLanes)!==0,v||(Qf(u,f,m,!1),v=(m&f.childLanes)!==0),C){if(v)return gR(u,f,m);f.flags|=128}if(C=f.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),K(Pn,Pn.current),v)break;return null;case 22:case 23:return f.lanes=0,uR(u,f,m);case 24:jo(f,Mn,u.memoizedState.cache)}return io(u,f,m)}function yR(u,f,m){if(u!==null)if(u.memoizedProps!==f.pendingProps)Hn=!0;else{if(!R1(u,m)&&(f.flags&128)===0)return Hn=!1,r7(u,f,m);Hn=(u.flags&131072)!==0}else Hn=!1,Et&&(f.flags&1048576)!==0&&HN(f,Ym,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var v=f.elementType,C=v._init;if(v=C(v._payload),f.type=v,typeof v=="function")Ux(v)?(u=il(v,u),f.tag=1,f=hR(null,f,v,u,m)):(f.tag=0,f=k1(null,f,v,u,m));else{if(v!=null){if(C=v.$$typeof,C===T){f.tag=11,f=oR(null,f,v,u,m);break e}else if(C===I){f.tag=14,f=sR(null,f,v,u,m);break e}}throw f=U(v)||v,Error(r(306,f,""))}}return f;case 0:return k1(u,f,f.type,f.pendingProps,m);case 1:return v=f.type,C=il(v,f.pendingProps),hR(u,f,v,C,m);case 3:e:{if(Ee(f,f.stateNode.containerInfo),u===null)throw Error(r(387));v=f.pendingProps;var A=f.memoizedState;C=A.element,n1(u,f),ah(f,v,null,m);var D=f.memoizedState;if(v=D.cache,jo(f,Mn,v),v!==A.cache&&Yx(f,[Mn],m,!0),ih(),v=D.element,A.isDehydrated)if(A={element:v,isDehydrated:!1,cache:D.cache},f.updateQueue.baseState=A,f.memoizedState=A,f.flags&256){f=dR(u,f,v,m);break e}else if(v!==C){C=xi(Error(r(424)),f),Zf(C),f=dR(u,f,v,m);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(un=Hi(u.firstChild),Ir=f,Et=!0,Qs=null,ya=!0,m=K_(f,null,v,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Yf(),v===C){f=io(u,f,m);break e}ir(u,f,v,m)}f=f.child}return f;case 26:return gg(u,f),u===null?(m=wD(f.type,null,f.pendingProps,null))?f.memoizedState=m:Et||(m=f.type,u=f.pendingProps,v=Ng(ge.current).createElement(m),v[gr]=f,v[Ur]=u,or(v,m,u),qn(v),f.stateNode=v):f.memoizedState=wD(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return Ie(f),u===null&&Et&&(v=f.stateNode=vD(f.type,f.pendingProps,ge.current),Ir=f,ya=!0,C=un,ns(f.type)?(dw=C,un=Hi(v.firstChild)):un=C),ir(u,f,f.pendingProps.children,m),gg(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&Et&&((C=v=un)&&(v=N7(v,f.type,f.pendingProps,ya),v!==null?(f.stateNode=v,Ir=f,un=Hi(v.firstChild),ya=!1,C=!0):C=!1),C||Js(f)),Ie(f),C=f.type,A=f.pendingProps,D=u!==null?u.memoizedProps:null,v=A.children,uw(C,A)?v=null:D!==null&&uw(C,D)&&(f.flags|=32),f.memoizedState!==null&&(C=l1(u,f,KK,null,null,m),Ah._currentValue=C),gg(u,f),ir(u,f,v,m),f.child;case 6:return u===null&&Et&&((u=m=un)&&(m=_7(m,f.pendingProps,ya),m!==null?(f.stateNode=m,Ir=f,un=null,u=!0):u=!1),u||Js(f)),null;case 13:return pR(u,f,m);case 4:return Ee(f,f.stateNode.containerInfo),v=f.pendingProps,u===null?f.child=Mu(f,null,v,m):ir(u,f,v,m),f.child;case 11:return oR(u,f,f.type,f.pendingProps,m);case 7:return ir(u,f,f.pendingProps,m),f.child;case 8:return ir(u,f,f.pendingProps.children,m),f.child;case 12:return ir(u,f,f.pendingProps.children,m),f.child;case 10:return v=f.pendingProps,jo(f,f.type,v.value),ir(u,f,v.children,m),f.child;case 9:return C=f.type._context,v=f.pendingProps.children,tl(f),C=yr(C),v=v(C),f.flags|=1,ir(u,f,v,m),f.child;case 14:return sR(u,f,f.type,f.pendingProps,m);case 15:return lR(u,f,f.type,f.pendingProps,m);case 19:return gR(u,f,m);case 31:return v=f.pendingProps,m=f.mode,v={mode:v.mode,children:v.children},u===null?(m=yg(v,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=Za(u.child,v),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return uR(u,f,m);case 24:return tl(f),v=yr(Mn),u===null?(C=Jx(),C===null&&(C=Xt,A=Zx(),C.pooledCache=A,A.refCount++,A!==null&&(C.pooledCacheLanes|=m),C=A),f.memoizedState={parent:v,cache:C},t1(f),jo(f,Mn,C)):((u.lanes&m)!==0&&(n1(u,f),ah(f,null,null,m),ih()),C=u.memoizedState,A=f.memoizedState,C.parent!==v?(C={parent:v,cache:v},f.memoizedState=C,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=C),jo(f,Mn,v)):(v=A.cache,jo(f,Mn,v),v!==C.cache&&Yx(f,[Mn],m,!0))),ir(u,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function ao(u){u.flags|=4}function vR(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!kD(f)){if(f=$i.current,f!==null&&((xt&4194048)===xt?va!==null:(xt&62914560)!==xt&&(xt&536870912)===0||f!==va))throw nh=e1,t_;u.flags|=8192}}function vg(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?YO():536870912,u.lanes|=f,Bu|=f)}function hh(u,f){if(!Et)switch(u.tailMode){case"hidden":f=u.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:v.sibling=null}}function sn(u){var f=u.alternate!==null&&u.alternate.child===u.child,m=0,v=0;if(f)for(var C=u.child;C!==null;)m|=C.lanes|C.childLanes,v|=C.subtreeFlags&65011712,v|=C.flags&65011712,C.return=u,C=C.sibling;else for(C=u.child;C!==null;)m|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=u,C=C.sibling;return u.subtreeFlags|=v,u.childLanes=m,f}function i7(u,f,m){var v=f.pendingProps;switch(qx(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(f),null;case 1:return sn(f),null;case 3:return m=f.stateNode,v=null,u!==null&&(v=u.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),to(Mn),ye(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(Kf(f)?ao(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,YN())),sn(f),null;case 26:return m=f.memoizedState,u===null?(ao(f),m!==null?(sn(f),vR(f,m)):(sn(f),f.flags&=-16777217)):m?m!==u.memoizedState?(ao(f),sn(f),vR(f,m)):(sn(f),f.flags&=-16777217):(u.memoizedProps!==v&&ao(f),sn(f),f.flags&=-16777217),null;case 27:Oe(f),m=ge.current;var C=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==v&&ao(f);else{if(!v){if(f.stateNode===null)throw Error(r(166));return sn(f),null}u=oe.current,Kf(f)?XN(f):(u=vD(C,v,m),f.stateNode=u,ao(f))}return sn(f),null;case 5:if(Oe(f),m=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==v&&ao(f);else{if(!v){if(f.stateNode===null)throw Error(r(166));return sn(f),null}if(u=oe.current,Kf(f))XN(f);else{switch(C=Ng(ge.current),u){case 1:u=C.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=C.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=C.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof v.is=="string"?C.createElement("select",{is:v.is}):C.createElement("select"),v.multiple?u.multiple=!0:v.size&&(u.size=v.size);break;default:u=typeof v.is=="string"?C.createElement(m,{is:v.is}):C.createElement(m)}}u[gr]=f,u[Ur]=v;e:for(C=f.child;C!==null;){if(C.tag===5||C.tag===6)u.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===f)break e;for(;C.sibling===null;){if(C.return===null||C.return===f)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}f.stateNode=u;e:switch(or(u,m,v),m){case"button":case"input":case"select":case"textarea":u=!!v.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ao(f)}}return sn(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==v&&ao(f);else{if(typeof v!="string"&&f.stateNode===null)throw Error(r(166));if(u=ge.current,Kf(f)){if(u=f.stateNode,m=f.memoizedProps,v=null,C=Ir,C!==null)switch(C.tag){case 27:case 5:v=C.memoizedProps}u[gr]=f,u=!!(u.nodeValue===m||v!==null&&v.suppressHydrationWarning===!0||fD(u.nodeValue,m)),u||Js(f)}else u=Ng(u).createTextNode(v),u[gr]=f,f.stateNode=u}return sn(f),null;case 13:if(v=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(C=Kf(f),v!==null&&v.dehydrated!==null){if(u===null){if(!C)throw Error(r(318));if(C=f.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[gr]=f}else Yf(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;sn(f),C=!1}else C=YN(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=C),C=!0;if(!C)return f.flags&256?(ro(f),f):(ro(f),null)}if(ro(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=v!==null,u=u!==null&&u.memoizedState!==null,m){v=f.child,C=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(C=v.alternate.memoizedState.cachePool.pool);var A=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(A=v.memoizedState.cachePool.pool),A!==C&&(v.flags|=2048)}return m!==u&&m&&(f.child.flags|=8192),vg(f,f.updateQueue),sn(f),null;case 4:return ye(),u===null&&iw(f.stateNode.containerInfo),sn(f),null;case 10:return to(f.type),sn(f),null;case 19:if(q(Pn),C=f.memoizedState,C===null)return sn(f),null;if(v=(f.flags&128)!==0,A=C.rendering,A===null)if(v)hh(C,!1);else{if(cn!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(A=dg(u),A!==null){for(f.flags|=128,hh(C,!1),u=A.updateQueue,f.updateQueue=u,vg(f,u),f.subtreeFlags=0,u=m,m=f.child;m!==null;)qN(m,u),m=m.sibling;return K(Pn,Pn.current&1|2),f.child}u=u.sibling}C.tail!==null&&Ne()>wg&&(f.flags|=128,v=!0,hh(C,!1),f.lanes=4194304)}else{if(!v)if(u=dg(A),u!==null){if(f.flags|=128,v=!0,u=u.updateQueue,f.updateQueue=u,vg(f,u),hh(C,!0),C.tail===null&&C.tailMode==="hidden"&&!A.alternate&&!Et)return sn(f),null}else 2*Ne()-C.renderingStartTime>wg&&m!==536870912&&(f.flags|=128,v=!0,hh(C,!1),f.lanes=4194304);C.isBackwards?(A.sibling=f.child,f.child=A):(u=C.last,u!==null?u.sibling=A:f.child=A,C.last=A)}return C.tail!==null?(f=C.tail,C.rendering=f,C.tail=f.sibling,C.renderingStartTime=Ne(),f.sibling=null,u=Pn.current,K(Pn,v?u&1|2:u&1),f):(sn(f),null);case 22:case 23:return ro(f),o1(),v=f.memoizedState!==null,u!==null?u.memoizedState!==null!==v&&(f.flags|=8192):v&&(f.flags|=8192),v?(m&536870912)!==0&&(f.flags&128)===0&&(sn(f),f.subtreeFlags&6&&(f.flags|=8192)):sn(f),m=f.updateQueue,m!==null&&vg(f,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),v=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==m&&(f.flags|=2048),u!==null&&q(nl),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),to(Mn),sn(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function a7(u,f){switch(qx(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return to(Mn),ye(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return Oe(f),null;case 13:if(ro(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Yf()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return q(Pn),null;case 4:return ye(),null;case 10:return to(f.type),null;case 22:case 23:return ro(f),o1(),u!==null&&q(nl),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return to(Mn),null;case 25:return null;default:return null}}function bR(u,f){switch(qx(f),f.tag){case 3:to(Mn),ye();break;case 26:case 27:case 5:Oe(f);break;case 4:ye();break;case 13:ro(f);break;case 19:q(Pn);break;case 10:to(f.type);break;case 22:case 23:ro(f),o1(),u!==null&&q(nl);break;case 24:to(Mn)}}function dh(u,f){try{var m=f.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var C=v.next;m=C;do{if((m.tag&u)===u){v=void 0;var A=m.create,D=m.inst;v=A(),D.destroy=v}m=m.next}while(m!==C)}}catch(F){Vt(f,f.return,F)}}function Xo(u,f,m){try{var v=f.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var A=C.next;v=A;do{if((v.tag&u)===u){var D=v.inst,F=D.destroy;if(F!==void 0){D.destroy=void 0,C=f;var Y=m,ue=F;try{ue()}catch(Se){Vt(C,Y,Se)}}}v=v.next}while(v!==A)}}catch(Se){Vt(f,f.return,Se)}}function xR(u){var f=u.updateQueue;if(f!==null){var m=u.stateNode;try{s_(f,m)}catch(v){Vt(u,u.return,v)}}}function wR(u,f,m){m.props=il(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(v){Vt(u,f,v)}}function ph(u,f){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var v=u.stateNode;break;case 30:v=u.stateNode;break;default:v=u.stateNode}typeof m=="function"?u.refCleanup=m(v):m.current=v}}catch(C){Vt(u,f,C)}}function ba(u,f){var m=u.ref,v=u.refCleanup;if(m!==null)if(typeof v=="function")try{v()}catch(C){Vt(u,f,C)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(C){Vt(u,f,C)}else m.current=null}function SR(u){var f=u.type,m=u.memoizedProps,v=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&v.focus();break e;case"img":m.src?v.src=m.src:m.srcSet&&(v.srcset=m.srcSet)}}catch(C){Vt(u,u.return,C)}}function D1(u,f,m){try{var v=u.stateNode;k7(v,u.type,m,f),v[Ur]=f}catch(C){Vt(u,u.return,C)}}function CR(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&ns(u.type)||u.tag===4}function M1(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||CR(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&ns(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function P1(u,f,m){var v=u.tag;if(v===5||v===6)u=u.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(u),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=Og));else if(v!==4&&(v===27&&ns(u.type)&&(m=u.stateNode,f=null),u=u.child,u!==null))for(P1(u,f,m),u=u.sibling;u!==null;)P1(u,f,m),u=u.sibling}function bg(u,f,m){var v=u.tag;if(v===5||v===6)u=u.stateNode,f?m.insertBefore(u,f):m.appendChild(u);else if(v!==4&&(v===27&&ns(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(bg(u,f,m),u=u.sibling;u!==null;)bg(u,f,m),u=u.sibling}function $R(u){var f=u.stateNode,m=u.memoizedProps;try{for(var v=u.type,C=f.attributes;C.length;)f.removeAttributeNode(C[0]);or(f,v,m),f[gr]=u,f[Ur]=m}catch(A){Vt(u,u.return,A)}}var oo=!1,xn=!1,L1=!1,TR=typeof WeakSet=="function"?WeakSet:Set,Xn=null;function o7(u,f){if(u=u.containerInfo,sw=Lg,u=PN(u),Mx(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var C=v.anchorOffset,A=v.focusNode;v=v.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var D=0,F=-1,Y=-1,ue=0,Se=0,$e=u,ce=null;t:for(;;){for(var de;$e!==m||C!==0&&$e.nodeType!==3||(F=D+C),$e!==A||v!==0&&$e.nodeType!==3||(Y=D+v),$e.nodeType===3&&(D+=$e.nodeValue.length),(de=$e.firstChild)!==null;)ce=$e,$e=de;for(;;){if($e===u)break t;if(ce===m&&++ue===C&&(F=D),ce===A&&++Se===v&&(Y=D),(de=$e.nextSibling)!==null)break;$e=ce,ce=$e.parentNode}$e=de}m=F===-1||Y===-1?null:{start:F,end:Y}}else m=null}m=m||{start:0,end:0}}else m=null;for(lw={focusedElem:u,selectionRange:m},Lg=!1,Xn=f;Xn!==null;)if(f=Xn,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,Xn=u;else for(;Xn!==null;){switch(f=Xn,A=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&A!==null){u=void 0,m=f,C=A.memoizedProps,A=A.memoizedState,v=m.stateNode;try{var Je=il(m.type,C,m.elementType===m.type);u=v.getSnapshotBeforeUpdate(Je,A),v.__reactInternalSnapshotBeforeUpdate=u}catch(Xe){Vt(m,m.return,Xe)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,m=u.nodeType,m===9)fw(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":fw(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=f.sibling,u!==null){u.return=f.return,Xn=u;break}Xn=f.return}}function kR(u,f,m){var v=m.flags;switch(m.tag){case 0:case 11:case 15:Ko(u,m),v&4&&dh(5,m);break;case 1:if(Ko(u,m),v&4)if(u=m.stateNode,f===null)try{u.componentDidMount()}catch(D){Vt(m,m.return,D)}else{var C=il(m.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(C,f,u.__reactInternalSnapshotBeforeUpdate)}catch(D){Vt(m,m.return,D)}}v&64&&xR(m),v&512&&ph(m,m.return);break;case 3:if(Ko(u,m),v&64&&(u=m.updateQueue,u!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{s_(u,f)}catch(D){Vt(m,m.return,D)}}break;case 27:f===null&&v&4&&$R(m);case 26:case 5:Ko(u,m),f===null&&v&4&&SR(m),v&512&&ph(m,m.return);break;case 12:Ko(u,m);break;case 13:Ko(u,m),v&4&&IR(u,m),v&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=m7.bind(null,m),R7(u,m))));break;case 22:if(v=m.memoizedState!==null||oo,!v){f=f!==null&&f.memoizedState!==null||xn,C=oo;var A=xn;oo=v,(xn=f)&&!A?Yo(u,m,(m.subtreeFlags&8772)!==0):Ko(u,m),oo=C,xn=A}break;case 30:break;default:Ko(u,m)}}function AR(u){var f=u.alternate;f!==null&&(u.alternate=null,AR(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&gx(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var tn=null,Gr=!1;function so(u,f,m){for(m=m.child;m!==null;)ER(u,f,m),m=m.sibling}function ER(u,f,m){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(jr,m)}catch{}switch(m.tag){case 26:xn||ba(m,f),so(u,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:xn||ba(m,f);var v=tn,C=Gr;ns(m.type)&&(tn=m.stateNode,Gr=!1),so(u,f,m),Ch(m.stateNode),tn=v,Gr=C;break;case 5:xn||ba(m,f);case 6:if(v=tn,C=Gr,tn=null,so(u,f,m),tn=v,Gr=C,tn!==null)if(Gr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(m.stateNode)}catch(A){Vt(m,f,A)}else try{tn.removeChild(m.stateNode)}catch(A){Vt(m,f,A)}break;case 18:tn!==null&&(Gr?(u=tn,gD(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),Nh(u)):gD(tn,m.stateNode));break;case 4:v=tn,C=Gr,tn=m.stateNode.containerInfo,Gr=!0,so(u,f,m),tn=v,Gr=C;break;case 0:case 11:case 14:case 15:xn||Xo(2,m,f),xn||Xo(4,m,f),so(u,f,m);break;case 1:xn||(ba(m,f),v=m.stateNode,typeof v.componentWillUnmount=="function"&&wR(m,f,v)),so(u,f,m);break;case 21:so(u,f,m);break;case 22:xn=(v=xn)||m.memoizedState!==null,so(u,f,m),xn=v;break;default:so(u,f,m)}}function IR(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Nh(u)}catch(m){Vt(f,f.return,m)}}function s7(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new TR),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new TR),f;default:throw Error(r(435,u.tag))}}function F1(u,f){var m=s7(u);f.forEach(function(v){var C=g7.bind(null,u,v);m.has(v)||(m.add(v),v.then(C,C))})}function ri(u,f){var m=f.deletions;if(m!==null)for(var v=0;v<m.length;v++){var C=m[v],A=u,D=f,F=D;e:for(;F!==null;){switch(F.tag){case 27:if(ns(F.type)){tn=F.stateNode,Gr=!1;break e}break;case 5:tn=F.stateNode,Gr=!1;break e;case 3:case 4:tn=F.stateNode.containerInfo,Gr=!0;break e}F=F.return}if(tn===null)throw Error(r(160));ER(A,D,C),tn=null,Gr=!1,A=C.alternate,A!==null&&(A.return=null),C.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)OR(f,u),f=f.sibling}var qi=null;function OR(u,f){var m=u.alternate,v=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:ri(f,u),ii(u),v&4&&(Xo(3,u,u.return),dh(3,u),Xo(5,u,u.return));break;case 1:ri(f,u),ii(u),v&512&&(xn||m===null||ba(m,m.return)),v&64&&oo&&(u=u.updateQueue,u!==null&&(v=u.callbacks,v!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?v:m.concat(v))));break;case 26:var C=qi;if(ri(f,u),ii(u),v&512&&(xn||m===null||ba(m,m.return)),v&4){var A=m!==null?m.memoizedState:null;if(v=u.memoizedState,m===null)if(v===null)if(u.stateNode===null){e:{v=u.type,m=u.memoizedProps,C=C.ownerDocument||C;t:switch(v){case"title":A=C.getElementsByTagName("title")[0],(!A||A[Ff]||A[gr]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=C.createElement(v),C.head.insertBefore(A,C.querySelector("head > title"))),or(A,v,m),A[gr]=u,qn(A),v=A;break e;case"link":var D=$D("link","href",C).get(v+(m.href||""));if(D){for(var F=0;F<D.length;F++)if(A=D[F],A.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&A.getAttribute("rel")===(m.rel==null?null:m.rel)&&A.getAttribute("title")===(m.title==null?null:m.title)&&A.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){D.splice(F,1);break t}}A=C.createElement(v),or(A,v,m),C.head.appendChild(A);break;case"meta":if(D=$D("meta","content",C).get(v+(m.content||""))){for(F=0;F<D.length;F++)if(A=D[F],A.getAttribute("content")===(m.content==null?null:""+m.content)&&A.getAttribute("name")===(m.name==null?null:m.name)&&A.getAttribute("property")===(m.property==null?null:m.property)&&A.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&A.getAttribute("charset")===(m.charSet==null?null:m.charSet)){D.splice(F,1);break t}}A=C.createElement(v),or(A,v,m),C.head.appendChild(A);break;default:throw Error(r(468,v))}A[gr]=u,qn(A),v=A}u.stateNode=v}else TD(C,u.type,u.stateNode);else u.stateNode=CD(C,v,u.memoizedProps);else A!==v?(A===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):A.count--,v===null?TD(C,u.type,u.stateNode):CD(C,v,u.memoizedProps)):v===null&&u.stateNode!==null&&D1(u,u.memoizedProps,m.memoizedProps)}break;case 27:ri(f,u),ii(u),v&512&&(xn||m===null||ba(m,m.return)),m!==null&&v&4&&D1(u,u.memoizedProps,m.memoizedProps);break;case 5:if(ri(f,u),ii(u),v&512&&(xn||m===null||ba(m,m.return)),u.flags&32){C=u.stateNode;try{yu(C,"")}catch(de){Vt(u,u.return,de)}}v&4&&u.stateNode!=null&&(C=u.memoizedProps,D1(u,C,m!==null?m.memoizedProps:C)),v&1024&&(L1=!0);break;case 6:if(ri(f,u),ii(u),v&4){if(u.stateNode===null)throw Error(r(162));v=u.memoizedProps,m=u.stateNode;try{m.nodeValue=v}catch(de){Vt(u,u.return,de)}}break;case 3:if(Dg=null,C=qi,qi=_g(f.containerInfo),ri(f,u),qi=C,ii(u),v&4&&m!==null&&m.memoizedState.isDehydrated)try{Nh(f.containerInfo)}catch(de){Vt(u,u.return,de)}L1&&(L1=!1,NR(u));break;case 4:v=qi,qi=_g(u.stateNode.containerInfo),ri(f,u),ii(u),qi=v;break;case 12:ri(f,u),ii(u);break;case 13:ri(f,u),ii(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(W1=Ne()),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,F1(u,v)));break;case 22:C=u.memoizedState!==null;var Y=m!==null&&m.memoizedState!==null,ue=oo,Se=xn;if(oo=ue||C,xn=Se||Y,ri(f,u),xn=Se,oo=ue,ii(u),v&8192)e:for(f=u.stateNode,f._visibility=C?f._visibility&-2:f._visibility|1,C&&(m===null||Y||oo||xn||al(u)),m=null,f=u;;){if(f.tag===5||f.tag===26){if(m===null){Y=m=f;try{if(A=Y.stateNode,C)D=A.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{F=Y.stateNode;var $e=Y.memoizedProps.style,ce=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;F.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(de){Vt(Y,Y.return,de)}}}else if(f.tag===6){if(m===null){Y=f;try{Y.stateNode.nodeValue=C?"":Y.memoizedProps}catch(de){Vt(Y,Y.return,de)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}v&4&&(v=u.updateQueue,v!==null&&(m=v.retryQueue,m!==null&&(v.retryQueue=null,F1(u,m))));break;case 19:ri(f,u),ii(u),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,F1(u,v)));break;case 30:break;case 21:break;default:ri(f,u),ii(u)}}function ii(u){var f=u.flags;if(f&2){try{for(var m,v=u.return;v!==null;){if(CR(v)){m=v;break}v=v.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var C=m.stateNode,A=M1(u);bg(u,A,C);break;case 5:var D=m.stateNode;m.flags&32&&(yu(D,""),m.flags&=-33);var F=M1(u);bg(u,F,D);break;case 3:case 4:var Y=m.stateNode.containerInfo,ue=M1(u);P1(u,ue,Y);break;default:throw Error(r(161))}}catch(Se){Vt(u,u.return,Se)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function NR(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;NR(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function Ko(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)kR(u,f.alternate,f),f=f.sibling}function al(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Xo(4,f,f.return),al(f);break;case 1:ba(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&wR(f,f.return,m),al(f);break;case 27:Ch(f.stateNode);case 26:case 5:ba(f,f.return),al(f);break;case 22:f.memoizedState===null&&al(f);break;case 30:al(f);break;default:al(f)}u=u.sibling}}function Yo(u,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var v=f.alternate,C=u,A=f,D=A.flags;switch(A.tag){case 0:case 11:case 15:Yo(C,A,m),dh(4,A);break;case 1:if(Yo(C,A,m),v=A,C=v.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(ue){Vt(v,v.return,ue)}if(v=A,C=v.updateQueue,C!==null){var F=v.stateNode;try{var Y=C.shared.hiddenCallbacks;if(Y!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Y.length;C++)o_(Y[C],F)}catch(ue){Vt(v,v.return,ue)}}m&&D&64&&xR(A),ph(A,A.return);break;case 27:$R(A);case 26:case 5:Yo(C,A,m),m&&v===null&&D&4&&SR(A),ph(A,A.return);break;case 12:Yo(C,A,m);break;case 13:Yo(C,A,m),m&&D&4&&IR(C,A);break;case 22:A.memoizedState===null&&Yo(C,A,m),ph(A,A.return);break;case 30:break;default:Yo(C,A,m)}f=f.sibling}}function B1(u,f){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&Jf(m))}function z1(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Jf(u))}function xa(u,f,m,v){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)_R(u,f,m,v),f=f.sibling}function _R(u,f,m,v){var C=f.flags;switch(f.tag){case 0:case 11:case 15:xa(u,f,m,v),C&2048&&dh(9,f);break;case 1:xa(u,f,m,v);break;case 3:xa(u,f,m,v),C&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Jf(u)));break;case 12:if(C&2048){xa(u,f,m,v),u=f.stateNode;try{var A=f.memoizedProps,D=A.id,F=A.onPostCommit;typeof F=="function"&&F(D,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Y){Vt(f,f.return,Y)}}else xa(u,f,m,v);break;case 13:xa(u,f,m,v);break;case 23:break;case 22:A=f.stateNode,D=f.alternate,f.memoizedState!==null?A._visibility&2?xa(u,f,m,v):mh(u,f):A._visibility&2?xa(u,f,m,v):(A._visibility|=2,Pu(u,f,m,v,(f.subtreeFlags&10256)!==0)),C&2048&&B1(D,f);break;case 24:xa(u,f,m,v),C&2048&&z1(f.alternate,f);break;default:xa(u,f,m,v)}}function Pu(u,f,m,v,C){for(C=C&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var A=u,D=f,F=m,Y=v,ue=D.flags;switch(D.tag){case 0:case 11:case 15:Pu(A,D,F,Y,C),dh(8,D);break;case 23:break;case 22:var Se=D.stateNode;D.memoizedState!==null?Se._visibility&2?Pu(A,D,F,Y,C):mh(A,D):(Se._visibility|=2,Pu(A,D,F,Y,C)),C&&ue&2048&&B1(D.alternate,D);break;case 24:Pu(A,D,F,Y,C),C&&ue&2048&&z1(D.alternate,D);break;default:Pu(A,D,F,Y,C)}f=f.sibling}}function mh(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=u,v=f,C=v.flags;switch(v.tag){case 22:mh(m,v),C&2048&&B1(v.alternate,v);break;case 24:mh(m,v),C&2048&&z1(v.alternate,v);break;default:mh(m,v)}f=f.sibling}}var gh=8192;function Lu(u){if(u.subtreeFlags&gh)for(u=u.child;u!==null;)RR(u),u=u.sibling}function RR(u){switch(u.tag){case 26:Lu(u),u.flags&gh&&u.memoizedState!==null&&q7(qi,u.memoizedState,u.memoizedProps);break;case 5:Lu(u);break;case 3:case 4:var f=qi;qi=_g(u.stateNode.containerInfo),Lu(u),qi=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=gh,gh=16777216,Lu(u),gh=f):Lu(u));break;default:Lu(u)}}function DR(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function yh(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var v=f[m];Xn=v,PR(v,u)}DR(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)MR(u),u=u.sibling}function MR(u){switch(u.tag){case 0:case 11:case 15:yh(u),u.flags&2048&&Xo(9,u,u.return);break;case 3:yh(u);break;case 12:yh(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,xg(u)):yh(u);break;default:yh(u)}}function xg(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var v=f[m];Xn=v,PR(v,u)}DR(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Xo(8,f,f.return),xg(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,xg(f));break;default:xg(f)}u=u.sibling}}function PR(u,f){for(;Xn!==null;){var m=Xn;switch(m.tag){case 0:case 11:case 15:Xo(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var v=m.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Jf(m.memoizedState.cache)}if(v=m.child,v!==null)v.return=m,Xn=v;else e:for(m=u;Xn!==null;){v=Xn;var C=v.sibling,A=v.return;if(AR(v),v===m){Xn=null;break e}if(C!==null){C.return=A,Xn=C;break e}Xn=A}}}var l7={getCacheForType:function(u){var f=yr(Mn),m=f.data.get(u);return m===void 0&&(m=u(),f.data.set(u,m)),m}},u7=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Xt=null,pt=null,xt=0,Dt=0,ai=null,Zo=!1,Fu=!1,j1=!1,lo=0,cn=0,Qo=0,ol=0,U1=0,Ti=0,Bu=0,vh=null,qr=null,V1=!1,W1=0,wg=1/0,Sg=null,Jo=null,ar=0,es=null,zu=null,ju=0,G1=0,q1=null,LR=null,bh=0,H1=null;function oi(){if((Rt&2)!==0&&xt!==0)return xt&-xt;if(M.T!==null){var u=Eu;return u!==0?u:ew()}return JO()}function FR(){Ti===0&&(Ti=(xt&536870912)===0||Et?KO():536870912);var u=$i.current;return u!==null&&(u.flags|=32),Ti}function si(u,f,m){(u===Xt&&(Dt===2||Dt===9)||u.cancelPendingCommit!==null)&&(Uu(u,0),ts(u,xt,Ti,!1)),Lf(u,m),((Rt&2)===0||u!==Xt)&&(u===Xt&&((Rt&2)===0&&(ol|=m),cn===4&&ts(u,xt,Ti,!1)),wa(u))}function BR(u,f,m){if((Rt&6)!==0)throw Error(r(327));var v=!m&&(f&124)===0&&(f&u.expiredLanes)===0||Pf(u,f),C=v?h7(u,f):Y1(u,f,!0),A=v;do{if(C===0){Fu&&!v&&ts(u,f,0,!1);break}else{if(m=u.current.alternate,A&&!c7(m)){C=Y1(u,f,!1),A=!1;continue}if(C===2){if(A=f,u.errorRecoveryDisabledLanes&A)var D=0;else D=u.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){f=D;e:{var F=u;C=vh;var Y=F.current.memoizedState.isDehydrated;if(Y&&(Uu(F,D).flags|=256),D=Y1(F,D,!1),D!==2){if(j1&&!Y){F.errorRecoveryDisabledLanes|=A,ol|=A,C=4;break e}A=qr,qr=C,A!==null&&(qr===null?qr=A:qr.push.apply(qr,A))}C=D}if(A=!1,C!==2)continue}}if(C===1){Uu(u,0),ts(u,f,0,!0);break}e:{switch(v=u,A=C,A){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:ts(v,f,Ti,!Zo);break e;case 2:qr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(C=W1+300-Ne(),10<C)){if(ts(v,f,Ti,!Zo),Rm(v,0,!0)!==0)break e;v.timeoutHandle=pD(zR.bind(null,v,m,qr,Sg,V1,f,Ti,ol,Bu,Zo,A,2,-0,0),C);break e}zR(v,m,qr,Sg,V1,f,Ti,ol,Bu,Zo,A,0,-0,0)}}break}while(!0);wa(u)}function zR(u,f,m,v,C,A,D,F,Y,ue,Se,$e,ce,de){if(u.timeoutHandle=-1,$e=f.subtreeFlags,($e&8192||($e&16785408)===16785408)&&(kh={stylesheets:null,count:0,unsuspend:G7},RR(f),$e=H7(),$e!==null)){u.cancelPendingCommit=$e(HR.bind(null,u,f,A,m,v,C,D,F,Y,Se,1,ce,de)),ts(u,A,D,!ue);return}HR(u,f,A,m,v,C,D,F,Y)}function c7(u){for(var f=u;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var v=0;v<m.length;v++){var C=m[v],A=C.getSnapshot;C=C.value;try{if(!ti(A(),C))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function ts(u,f,m,v){f&=~U1,f&=~ol,u.suspendedLanes|=f,u.pingedLanes&=~f,v&&(u.warmLanes|=f),v=u.expirationTimes;for(var C=f;0<C;){var A=31-Dn(C),D=1<<A;v[A]=-1,C&=~D}m!==0&&ZO(u,m,f)}function Cg(){return(Rt&6)===0?(xh(0),!1):!0}function X1(){if(pt!==null){if(Dt===0)var u=pt.return;else u=pt,eo=el=null,f1(u),Du=null,ch=0,u=pt;for(;u!==null;)bR(u.alternate,u),u=u.return;pt=null}}function Uu(u,f){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,E7(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),X1(),Xt=u,pt=m=Za(u.current,null),xt=f,Dt=0,ai=null,Zo=!1,Fu=Pf(u,f),j1=!1,Bu=Ti=U1=ol=Qo=cn=0,qr=vh=null,V1=!1,(f&8)!==0&&(f|=f&32);var v=u.entangledLanes;if(v!==0)for(u=u.entanglements,v&=f;0<v;){var C=31-Dn(v),A=1<<C;f|=u[C],v&=~A}return lo=f,Gm(),m}function jR(u,f){ft=null,M.H=cg,f===th||f===eg?(f=i_(),Dt=3):f===t_?(f=i_(),Dt=4):Dt=f===aR?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,ai=f,pt===null&&(cn=1,mg(u,xi(f,u.current)))}function UR(){var u=M.H;return M.H=cg,u===null?cg:u}function VR(){var u=M.A;return M.A=l7,u}function K1(){cn=4,Zo||(xt&4194048)!==xt&&$i.current!==null||(Fu=!0),(Qo&134217727)===0&&(ol&134217727)===0||Xt===null||ts(Xt,xt,Ti,!1)}function Y1(u,f,m){var v=Rt;Rt|=2;var C=UR(),A=VR();(Xt!==u||xt!==f)&&(Sg=null,Uu(u,f)),f=!1;var D=cn;e:do try{if(Dt!==0&&pt!==null){var F=pt,Y=ai;switch(Dt){case 8:X1(),D=6;break e;case 3:case 2:case 9:case 6:$i.current===null&&(f=!0);var ue=Dt;if(Dt=0,ai=null,Vu(u,F,Y,ue),m&&Fu){D=0;break e}break;default:ue=Dt,Dt=0,ai=null,Vu(u,F,Y,ue)}}f7(),D=cn;break}catch(Se){jR(u,Se)}while(!0);return f&&u.shellSuspendCounter++,eo=el=null,Rt=v,M.H=C,M.A=A,pt===null&&(Xt=null,xt=0,Gm()),D}function f7(){for(;pt!==null;)WR(pt)}function h7(u,f){var m=Rt;Rt|=2;var v=UR(),C=VR();Xt!==u||xt!==f?(Sg=null,wg=Ne()+500,Uu(u,f)):Fu=Pf(u,f);e:do try{if(Dt!==0&&pt!==null){f=pt;var A=ai;t:switch(Dt){case 1:Dt=0,ai=null,Vu(u,f,A,1);break;case 2:case 9:if(n_(A)){Dt=0,ai=null,GR(f);break}f=function(){Dt!==2&&Dt!==9||Xt!==u||(Dt=7),wa(u)},A.then(f,f);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:n_(A)?(Dt=0,ai=null,GR(f)):(Dt=0,ai=null,Vu(u,f,A,7));break;case 5:var D=null;switch(pt.tag){case 26:D=pt.memoizedState;case 5:case 27:var F=pt;if(!D||kD(D)){Dt=0,ai=null;var Y=F.sibling;if(Y!==null)pt=Y;else{var ue=F.return;ue!==null?(pt=ue,$g(ue)):pt=null}break t}}Dt=0,ai=null,Vu(u,f,A,5);break;case 6:Dt=0,ai=null,Vu(u,f,A,6);break;case 8:X1(),cn=6;break e;default:throw Error(r(462))}}d7();break}catch(Se){jR(u,Se)}while(!0);return eo=el=null,M.H=v,M.A=C,Rt=m,pt!==null?0:(Xt=null,xt=0,Gm(),cn)}function d7(){for(;pt!==null&&!xe();)WR(pt)}function WR(u){var f=yR(u.alternate,u,lo);u.memoizedProps=u.pendingProps,f===null?$g(u):pt=f}function GR(u){var f=u,m=f.alternate;switch(f.tag){case 15:case 0:f=fR(m,f,f.pendingProps,f.type,void 0,xt);break;case 11:f=fR(m,f,f.pendingProps,f.type.render,f.ref,xt);break;case 5:f1(f);default:bR(m,f),f=pt=qN(f,lo),f=yR(m,f,lo)}u.memoizedProps=u.pendingProps,f===null?$g(u):pt=f}function Vu(u,f,m,v){eo=el=null,f1(f),Du=null,ch=0;var C=f.return;try{if(n7(u,C,f,m,xt)){cn=1,mg(u,xi(m,u.current)),pt=null;return}}catch(A){if(C!==null)throw pt=C,A;cn=1,mg(u,xi(m,u.current)),pt=null;return}f.flags&32768?(Et||v===1?u=!0:Fu||(xt&536870912)!==0?u=!1:(Zo=u=!0,(v===2||v===9||v===3||v===6)&&(v=$i.current,v!==null&&v.tag===13&&(v.flags|=16384))),qR(f,u)):$g(f)}function $g(u){var f=u;do{if((f.flags&32768)!==0){qR(f,Zo);return}u=f.return;var m=i7(f.alternate,f,lo);if(m!==null){pt=m;return}if(f=f.sibling,f!==null){pt=f;return}pt=f=u}while(f!==null);cn===0&&(cn=5)}function qR(u,f){do{var m=a7(u.alternate,u);if(m!==null){m.flags&=32767,pt=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(u=u.sibling,u!==null)){pt=u;return}pt=u=m}while(u!==null);cn=6,pt=null}function HR(u,f,m,v,C,A,D,F,Y){u.cancelPendingCommit=null;do Tg();while(ar!==0);if((Rt&6)!==0)throw Error(r(327));if(f!==null){if(f===u.current)throw Error(r(177));if(A=f.lanes|f.childLanes,A|=zx,GX(u,m,A,D,F,Y),u===Xt&&(pt=Xt=null,xt=0),zu=f,es=u,ju=m,G1=A,q1=C,LR=v,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,y7(tt,function(){return QR(),null})):(u.callbackNode=null,u.callbackPriority=0),v=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||v){v=M.T,M.T=null,C=V.p,V.p=2,D=Rt,Rt|=4;try{o7(u,f,m)}finally{Rt=D,V.p=C,M.T=v}}ar=1,XR(),KR(),YR()}}function XR(){if(ar===1){ar=0;var u=es,f=zu,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=M.T,M.T=null;var v=V.p;V.p=2;var C=Rt;Rt|=4;try{OR(f,u);var A=lw,D=PN(u.containerInfo),F=A.focusedElem,Y=A.selectionRange;if(D!==F&&F&&F.ownerDocument&&MN(F.ownerDocument.documentElement,F)){if(Y!==null&&Mx(F)){var ue=Y.start,Se=Y.end;if(Se===void 0&&(Se=ue),"selectionStart"in F)F.selectionStart=ue,F.selectionEnd=Math.min(Se,F.value.length);else{var $e=F.ownerDocument||document,ce=$e&&$e.defaultView||window;if(ce.getSelection){var de=ce.getSelection(),Je=F.textContent.length,Xe=Math.min(Y.start,Je),zt=Y.end===void 0?Xe:Math.min(Y.end,Je);!de.extend&&Xe>zt&&(D=zt,zt=Xe,Xe=D);var ae=DN(F,Xe),ee=DN(F,zt);if(ae&&ee&&(de.rangeCount!==1||de.anchorNode!==ae.node||de.anchorOffset!==ae.offset||de.focusNode!==ee.node||de.focusOffset!==ee.offset)){var se=$e.createRange();se.setStart(ae.node,ae.offset),de.removeAllRanges(),Xe>zt?(de.addRange(se),de.extend(ee.node,ee.offset)):(se.setEnd(ee.node,ee.offset),de.addRange(se))}}}}for($e=[],de=F;de=de.parentNode;)de.nodeType===1&&$e.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<$e.length;F++){var Ce=$e[F];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}Lg=!!sw,lw=sw=null}finally{Rt=C,V.p=v,M.T=m}}u.current=f,ar=2}}function KR(){if(ar===2){ar=0;var u=es,f=zu,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=M.T,M.T=null;var v=V.p;V.p=2;var C=Rt;Rt|=4;try{kR(u,f.alternate,f)}finally{Rt=C,V.p=v,M.T=m}}ar=3}}function YR(){if(ar===4||ar===3){ar=0,ke();var u=es,f=zu,m=ju,v=LR;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ar=5:(ar=0,zu=es=null,ZR(u,u.pendingLanes));var C=u.pendingLanes;if(C===0&&(Jo=null),px(m),f=f.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(jr,f,void 0,(f.current.flags&128)===128)}catch{}if(v!==null){f=M.T,C=V.p,V.p=2,M.T=null;try{for(var A=u.onRecoverableError,D=0;D<v.length;D++){var F=v[D];A(F.value,{componentStack:F.stack})}}finally{M.T=f,V.p=C}}(ju&3)!==0&&Tg(),wa(u),C=u.pendingLanes,(m&4194090)!==0&&(C&42)!==0?u===H1?bh++:(bh=0,H1=u):bh=0,xh(0)}}function ZR(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Jf(f)))}function Tg(u){return XR(),KR(),YR(),QR()}function QR(){if(ar!==5)return!1;var u=es,f=G1;G1=0;var m=px(ju),v=M.T,C=V.p;try{V.p=32>m?32:m,M.T=null,m=q1,q1=null;var A=es,D=ju;if(ar=0,zu=es=null,ju=0,(Rt&6)!==0)throw Error(r(331));var F=Rt;if(Rt|=4,MR(A.current),_R(A,A.current,D,m),Rt=F,xh(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(jr,A)}catch{}return!0}finally{V.p=C,M.T=v,ZR(u,f)}}function JR(u,f,m){f=xi(m,f),f=T1(u.stateNode,f,2),u=Wo(u,f,2),u!==null&&(Lf(u,2),wa(u))}function Vt(u,f,m){if(u.tag===3)JR(u,u,m);else for(;f!==null;){if(f.tag===3){JR(f,u,m);break}else if(f.tag===1){var v=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Jo===null||!Jo.has(v))){u=xi(m,u),m=rR(2),v=Wo(f,m,2),v!==null&&(iR(m,v,f,u),Lf(v,2),wa(v));break}}f=f.return}}function Z1(u,f,m){var v=u.pingCache;if(v===null){v=u.pingCache=new u7;var C=new Set;v.set(f,C)}else C=v.get(f),C===void 0&&(C=new Set,v.set(f,C));C.has(m)||(j1=!0,C.add(m),u=p7.bind(null,u,f,m),f.then(u,u))}function p7(u,f,m){var v=u.pingCache;v!==null&&v.delete(f),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,Xt===u&&(xt&m)===m&&(cn===4||cn===3&&(xt&62914560)===xt&&300>Ne()-W1?(Rt&2)===0&&Uu(u,0):U1|=m,Bu===xt&&(Bu=0)),wa(u)}function eD(u,f){f===0&&(f=YO()),u=$u(u,f),u!==null&&(Lf(u,f),wa(u))}function m7(u){var f=u.memoizedState,m=0;f!==null&&(m=f.retryLane),eD(u,m)}function g7(u,f){var m=0;switch(u.tag){case 13:var v=u.stateNode,C=u.memoizedState;C!==null&&(m=C.retryLane);break;case 19:v=u.stateNode;break;case 22:v=u.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(f),eD(u,m)}function y7(u,f){return Ge(u,f)}var kg=null,Wu=null,Q1=!1,Ag=!1,J1=!1,sl=0;function wa(u){u!==Wu&&u.next===null&&(Wu===null?kg=Wu=u:Wu=Wu.next=u),Ag=!0,Q1||(Q1=!0,b7())}function xh(u,f){if(!J1&&Ag){J1=!0;do for(var m=!1,v=kg;v!==null;){if(u!==0){var C=v.pendingLanes;if(C===0)var A=0;else{var D=v.suspendedLanes,F=v.pingedLanes;A=(1<<31-Dn(42|u)+1)-1,A&=C&~(D&~F),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(m=!0,iD(v,A))}else A=xt,A=Rm(v,v===Xt?A:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(A&3)===0||Pf(v,A)||(m=!0,iD(v,A));v=v.next}while(m);J1=!1}}function v7(){tD()}function tD(){Ag=Q1=!1;var u=0;sl!==0&&(A7()&&(u=sl),sl=0);for(var f=Ne(),m=null,v=kg;v!==null;){var C=v.next,A=nD(v,f);A===0?(v.next=null,m===null?kg=C:m.next=C,C===null&&(Wu=m)):(m=v,(u!==0||(A&3)!==0)&&(Ag=!0)),v=C}xh(u)}function nD(u,f){for(var m=u.suspendedLanes,v=u.pingedLanes,C=u.expirationTimes,A=u.pendingLanes&-62914561;0<A;){var D=31-Dn(A),F=1<<D,Y=C[D];Y===-1?((F&m)===0||(F&v)!==0)&&(C[D]=WX(F,f)):Y<=f&&(u.expiredLanes|=F),A&=~F}if(f=Xt,m=xt,m=Rm(u,u===f?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v=u.callbackNode,m===0||u===f&&(Dt===2||Dt===9)||u.cancelPendingCommit!==null)return v!==null&&v!==null&&Ue(v),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||Pf(u,m)){if(f=m&-m,f===u.callbackPriority)return f;switch(v!==null&&Ue(v),px(m)){case 2:case 8:m=gt;break;case 32:m=tt;break;case 268435456:m=vn;break;default:m=tt}return v=rD.bind(null,u),m=Ge(m,v),u.callbackPriority=f,u.callbackNode=m,f}return v!==null&&v!==null&&Ue(v),u.callbackPriority=2,u.callbackNode=null,2}function rD(u,f){if(ar!==0&&ar!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(Tg()&&u.callbackNode!==m)return null;var v=xt;return v=Rm(u,u===Xt?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v===0?null:(BR(u,v,f),nD(u,Ne()),u.callbackNode!=null&&u.callbackNode===m?rD.bind(null,u):null)}function iD(u,f){if(Tg())return null;BR(u,f,!0)}function b7(){I7(function(){(Rt&6)!==0?Ge(st,v7):tD()})}function ew(){return sl===0&&(sl=KO()),sl}function aD(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Fm(""+u)}function oD(u,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,u.id&&m.setAttribute("form",u.id),f.parentNode.insertBefore(m,f),u=new FormData(u),m.parentNode.removeChild(m),u}function x7(u,f,m,v,C){if(f==="submit"&&m&&m.stateNode===C){var A=aD((C[Ur]||null).action),D=v.submitter;D&&(f=(f=D[Ur]||null)?aD(f.formAction):D.getAttribute("formAction"),f!==null&&(A=f,D=null));var F=new Um("action","action",null,v,C);u.push({event:F,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(sl!==0){var Y=D?oD(C,D):new FormData(C);x1(m,{pending:!0,data:Y,method:C.method,action:A},null,Y)}}else typeof A=="function"&&(F.preventDefault(),Y=D?oD(C,D):new FormData(C),x1(m,{pending:!0,data:Y,method:C.method,action:A},A,Y))},currentTarget:C}]})}}for(var tw=0;tw<Bx.length;tw++){var nw=Bx[tw],w7=nw.toLowerCase(),S7=nw[0].toUpperCase()+nw.slice(1);Gi(w7,"on"+S7)}Gi(BN,"onAnimationEnd"),Gi(zN,"onAnimationIteration"),Gi(jN,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(BK,"onTransitionRun"),Gi(zK,"onTransitionStart"),Gi(jK,"onTransitionCancel"),Gi(UN,"onTransitionEnd"),pu("onMouseEnter",["mouseout","mouseover"]),pu("onMouseLeave",["mouseout","mouseover"]),pu("onPointerEnter",["pointerout","pointerover"]),pu("onPointerLeave",["pointerout","pointerover"]),Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wh));function sD(u,f){f=(f&4)!==0;for(var m=0;m<u.length;m++){var v=u[m],C=v.event;v=v.listeners;e:{var A=void 0;if(f)for(var D=v.length-1;0<=D;D--){var F=v[D],Y=F.instance,ue=F.currentTarget;if(F=F.listener,Y!==A&&C.isPropagationStopped())break e;A=F,C.currentTarget=ue;try{A(C)}catch(Se){pg(Se)}C.currentTarget=null,A=Y}else for(D=0;D<v.length;D++){if(F=v[D],Y=F.instance,ue=F.currentTarget,F=F.listener,Y!==A&&C.isPropagationStopped())break e;A=F,C.currentTarget=ue;try{A(C)}catch(Se){pg(Se)}C.currentTarget=null,A=Y}}}}function mt(u,f){var m=f[mx];m===void 0&&(m=f[mx]=new Set);var v=u+"__bubble";m.has(v)||(lD(f,u,2,!1),m.add(v))}function rw(u,f,m){var v=0;f&&(v|=4),lD(m,u,v,f)}var Eg="_reactListening"+Math.random().toString(36).slice(2);function iw(u){if(!u[Eg]){u[Eg]=!0,tN.forEach(function(m){m!=="selectionchange"&&(C7.has(m)||rw(m,!1,u),rw(m,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[Eg]||(f[Eg]=!0,rw("selectionchange",!1,f))}}function lD(u,f,m,v){switch(_D(f)){case 2:var C=Y7;break;case 8:C=Z7;break;default:C=vw}m=C.bind(null,f,m,u),C=void 0,!kx||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(C=!0),v?C!==void 0?u.addEventListener(f,m,{capture:!0,passive:C}):u.addEventListener(f,m,!0):C!==void 0?u.addEventListener(f,m,{passive:C}):u.addEventListener(f,m,!1)}function aw(u,f,m,v,C){var A=v;if((f&1)===0&&(f&2)===0&&v!==null)e:for(;;){if(v===null)return;var D=v.tag;if(D===3||D===4){var F=v.stateNode.containerInfo;if(F===C)break;if(D===4)for(D=v.return;D!==null;){var Y=D.tag;if((Y===3||Y===4)&&D.stateNode.containerInfo===C)return;D=D.return}for(;F!==null;){if(D=fu(F),D===null)return;if(Y=D.tag,Y===5||Y===6||Y===26||Y===27){v=A=D;continue e}F=F.parentNode}}v=v.return}mN(function(){var ue=A,Se=$x(m),$e=[];e:{var ce=VN.get(u);if(ce!==void 0){var de=Um,Je=u;switch(u){case"keypress":if(zm(m)===0)break e;case"keydown":case"keyup":de=yK;break;case"focusin":Je="focus",de=Ox;break;case"focusout":Je="blur",de=Ox;break;case"beforeblur":case"afterblur":de=Ox;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=vN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=aK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=xK;break;case BN:case zN:case jN:de=lK;break;case UN:de=SK;break;case"scroll":case"scrollend":de=rK;break;case"wheel":de=$K;break;case"copy":case"cut":case"paste":de=cK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=xN;break;case"toggle":case"beforetoggle":de=kK}var Xe=(f&4)!==0,zt=!Xe&&(u==="scroll"||u==="scrollend"),ae=Xe?ce!==null?ce+"Capture":null:ce;Xe=[];for(var ee=ue,se;ee!==null;){var Ce=ee;if(se=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||se===null||ae===null||(Ce=zf(ee,ae),Ce!=null&&Xe.push(Sh(ee,Ce,se))),zt)break;ee=ee.return}0<Xe.length&&(ce=new de(ce,Je,null,m,Se),$e.push({event:ce,listeners:Xe}))}}if((f&7)===0){e:{if(ce=u==="mouseover"||u==="pointerover",de=u==="mouseout"||u==="pointerout",ce&&m!==Cx&&(Je=m.relatedTarget||m.fromElement)&&(fu(Je)||Je[cu]))break e;if((de||ce)&&(ce=Se.window===Se?Se:(ce=Se.ownerDocument)?ce.defaultView||ce.parentWindow:window,de?(Je=m.relatedTarget||m.toElement,de=ue,Je=Je?fu(Je):null,Je!==null&&(zt=a(Je),Xe=Je.tag,Je!==zt||Xe!==5&&Xe!==27&&Xe!==6)&&(Je=null)):(de=null,Je=ue),de!==Je)){if(Xe=vN,Ce="onMouseLeave",ae="onMouseEnter",ee="mouse",(u==="pointerout"||u==="pointerover")&&(Xe=xN,Ce="onPointerLeave",ae="onPointerEnter",ee="pointer"),zt=de==null?ce:Bf(de),se=Je==null?ce:Bf(Je),ce=new Xe(Ce,ee+"leave",de,m,Se),ce.target=zt,ce.relatedTarget=se,Ce=null,fu(Se)===ue&&(Xe=new Xe(ae,ee+"enter",Je,m,Se),Xe.target=se,Xe.relatedTarget=zt,Ce=Xe),zt=Ce,de&&Je)t:{for(Xe=de,ae=Je,ee=0,se=Xe;se;se=Gu(se))ee++;for(se=0,Ce=ae;Ce;Ce=Gu(Ce))se++;for(;0<ee-se;)Xe=Gu(Xe),ee--;for(;0<se-ee;)ae=Gu(ae),se--;for(;ee--;){if(Xe===ae||ae!==null&&Xe===ae.alternate)break t;Xe=Gu(Xe),ae=Gu(ae)}Xe=null}else Xe=null;de!==null&&uD($e,ce,de,Xe,!1),Je!==null&&zt!==null&&uD($e,zt,Je,Xe,!0)}}e:{if(ce=ue?Bf(ue):window,de=ce.nodeName&&ce.nodeName.toLowerCase(),de==="select"||de==="input"&&ce.type==="file")var ze=EN;else if(kN(ce))if(IN)ze=PK;else{ze=DK;var ht=RK}else de=ce.nodeName,!de||de.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ue&&Sx(ue.elementType)&&(ze=EN):ze=MK;if(ze&&(ze=ze(u,ue))){AN($e,ze,m,Se);break e}ht&&ht(u,ce,ue),u==="focusout"&&ue&&ce.type==="number"&&ue.memoizedProps.value!=null&&wx(ce,"number",ce.value)}switch(ht=ue?Bf(ue):window,u){case"focusin":(kN(ht)||ht.contentEditable==="true")&&(wu=ht,Px=ue,Xf=null);break;case"focusout":Xf=Px=wu=null;break;case"mousedown":Lx=!0;break;case"contextmenu":case"mouseup":case"dragend":Lx=!1,LN($e,m,Se);break;case"selectionchange":if(FK)break;case"keydown":case"keyup":LN($e,m,Se)}var We;if(_x)e:{switch(u){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else xu?$N(u,m)&&(Ye="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Ye="onCompositionStart");Ye&&(wN&&m.locale!=="ko"&&(xu||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&xu&&(We=gN()):(zo=Se,Ax="value"in zo?zo.value:zo.textContent,xu=!0)),ht=Ig(ue,Ye),0<ht.length&&(Ye=new bN(Ye,u,null,m,Se),$e.push({event:Ye,listeners:ht}),We?Ye.data=We:(We=TN(m),We!==null&&(Ye.data=We)))),(We=EK?IK(u,m):OK(u,m))&&(Ye=Ig(ue,"onBeforeInput"),0<Ye.length&&(ht=new bN("onBeforeInput","beforeinput",null,m,Se),$e.push({event:ht,listeners:Ye}),ht.data=We)),x7($e,u,ue,m,Se)}sD($e,f)})}function Sh(u,f,m){return{instance:u,listener:f,currentTarget:m}}function Ig(u,f){for(var m=f+"Capture",v=[];u!==null;){var C=u,A=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||A===null||(C=zf(u,m),C!=null&&v.unshift(Sh(u,C,A)),C=zf(u,f),C!=null&&v.push(Sh(u,C,A))),u.tag===3)return v;u=u.return}return[]}function Gu(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function uD(u,f,m,v,C){for(var A=f._reactName,D=[];m!==null&&m!==v;){var F=m,Y=F.alternate,ue=F.stateNode;if(F=F.tag,Y!==null&&Y===v)break;F!==5&&F!==26&&F!==27||ue===null||(Y=ue,C?(ue=zf(m,A),ue!=null&&D.unshift(Sh(m,ue,Y))):C||(ue=zf(m,A),ue!=null&&D.push(Sh(m,ue,Y)))),m=m.return}D.length!==0&&u.push({event:f,listeners:D})}var $7=/\r\n?/g,T7=/\u0000|\uFFFD/g;function cD(u){return(typeof u=="string"?u:""+u).replace($7,`
`).replace(T7,"")}function fD(u,f){return f=cD(f),cD(u)===f}function Og(){}function Bt(u,f,m,v,C,A){switch(m){case"children":typeof v=="string"?f==="body"||f==="textarea"&&v===""||yu(u,v):(typeof v=="number"||typeof v=="bigint")&&f!=="body"&&yu(u,""+v);break;case"className":Mm(u,"class",v);break;case"tabIndex":Mm(u,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Mm(u,m,v);break;case"style":dN(u,v,A);break;case"data":if(f!=="object"){Mm(u,"data",v);break}case"src":case"href":if(v===""&&(f!=="a"||m!=="href")){u.removeAttribute(m);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(m);break}v=Fm(""+v),u.setAttribute(m,v);break;case"action":case"formAction":if(typeof v=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(m==="formAction"?(f!=="input"&&Bt(u,f,"name",C.name,C,null),Bt(u,f,"formEncType",C.formEncType,C,null),Bt(u,f,"formMethod",C.formMethod,C,null),Bt(u,f,"formTarget",C.formTarget,C,null)):(Bt(u,f,"encType",C.encType,C,null),Bt(u,f,"method",C.method,C,null),Bt(u,f,"target",C.target,C,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(m);break}v=Fm(""+v),u.setAttribute(m,v);break;case"onClick":v!=null&&(u.onclick=Og);break;case"onScroll":v!=null&&mt("scroll",u);break;case"onScrollEnd":v!=null&&mt("scrollend",u);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(C.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"multiple":u.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":u.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){u.removeAttribute("xlink:href");break}m=Fm(""+v),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,""+v):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":v===!0?u.setAttribute(m,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,v):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?u.setAttribute(m,v):u.removeAttribute(m);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?u.removeAttribute(m):u.setAttribute(m,v);break;case"popover":mt("beforetoggle",u),mt("toggle",u),Dm(u,"popover",v);break;case"xlinkActuate":Ka(u,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Ka(u,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Ka(u,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Ka(u,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Ka(u,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Ka(u,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Ka(u,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Ka(u,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Ka(u,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Dm(u,"is",v);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=tK.get(m)||m,Dm(u,m,v))}}function ow(u,f,m,v,C,A){switch(m){case"style":dN(u,v,A);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(C.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"children":typeof v=="string"?yu(u,v):(typeof v=="number"||typeof v=="bigint")&&yu(u,""+v);break;case"onScroll":v!=null&&mt("scroll",u);break;case"onScrollEnd":v!=null&&mt("scrollend",u);break;case"onClick":v!=null&&(u.onclick=Og);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nN.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(C=m.endsWith("Capture"),f=m.slice(2,C?m.length-7:void 0),A=u[Ur]||null,A=A!=null?A[m]:null,typeof A=="function"&&u.removeEventListener(f,A,C),typeof v=="function")){typeof A!="function"&&A!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(f,v,C);break e}m in u?u[m]=v:v===!0?u.setAttribute(m,""):Dm(u,m,v)}}}function or(u,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",u),mt("load",u);var v=!1,C=!1,A;for(A in m)if(m.hasOwnProperty(A)){var D=m[A];if(D!=null)switch(A){case"src":v=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Bt(u,f,A,D,m,null)}}C&&Bt(u,f,"srcSet",m.srcSet,m,null),v&&Bt(u,f,"src",m.src,m,null);return;case"input":mt("invalid",u);var F=A=D=C=null,Y=null,ue=null;for(v in m)if(m.hasOwnProperty(v)){var Se=m[v];if(Se!=null)switch(v){case"name":C=Se;break;case"type":D=Se;break;case"checked":Y=Se;break;case"defaultChecked":ue=Se;break;case"value":A=Se;break;case"defaultValue":F=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(r(137,f));break;default:Bt(u,f,v,Se,m,null)}}uN(u,A,F,Y,ue,D,C,!1),Pm(u);return;case"select":mt("invalid",u),v=D=A=null;for(C in m)if(m.hasOwnProperty(C)&&(F=m[C],F!=null))switch(C){case"value":A=F;break;case"defaultValue":D=F;break;case"multiple":v=F;default:Bt(u,f,C,F,m,null)}f=A,m=D,u.multiple=!!v,f!=null?gu(u,!!v,f,!1):m!=null&&gu(u,!!v,m,!0);return;case"textarea":mt("invalid",u),A=C=v=null;for(D in m)if(m.hasOwnProperty(D)&&(F=m[D],F!=null))switch(D){case"value":v=F;break;case"defaultValue":C=F;break;case"children":A=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:Bt(u,f,D,F,m,null)}fN(u,v,C,A),Pm(u);return;case"option":for(Y in m)if(m.hasOwnProperty(Y)&&(v=m[Y],v!=null))switch(Y){case"selected":u.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Bt(u,f,Y,v,m,null)}return;case"dialog":mt("beforetoggle",u),mt("toggle",u),mt("cancel",u),mt("close",u);break;case"iframe":case"object":mt("load",u);break;case"video":case"audio":for(v=0;v<wh.length;v++)mt(wh[v],u);break;case"image":mt("error",u),mt("load",u);break;case"details":mt("toggle",u);break;case"embed":case"source":case"link":mt("error",u),mt("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in m)if(m.hasOwnProperty(ue)&&(v=m[ue],v!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Bt(u,f,ue,v,m,null)}return;default:if(Sx(f)){for(Se in m)m.hasOwnProperty(Se)&&(v=m[Se],v!==void 0&&ow(u,f,Se,v,m,void 0));return}}for(F in m)m.hasOwnProperty(F)&&(v=m[F],v!=null&&Bt(u,f,F,v,m,null))}function k7(u,f,m,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,A=null,D=null,F=null,Y=null,ue=null,Se=null;for(de in m){var $e=m[de];if(m.hasOwnProperty(de)&&$e!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":Y=$e;default:v.hasOwnProperty(de)||Bt(u,f,de,null,v,$e)}}for(var ce in v){var de=v[ce];if($e=m[ce],v.hasOwnProperty(ce)&&(de!=null||$e!=null))switch(ce){case"type":A=de;break;case"name":C=de;break;case"checked":ue=de;break;case"defaultChecked":Se=de;break;case"value":D=de;break;case"defaultValue":F=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,f));break;default:de!==$e&&Bt(u,f,ce,de,v,$e)}}xx(u,D,F,Y,ue,Se,A,C);return;case"select":de=D=F=ce=null;for(A in m)if(Y=m[A],m.hasOwnProperty(A)&&Y!=null)switch(A){case"value":break;case"multiple":de=Y;default:v.hasOwnProperty(A)||Bt(u,f,A,null,v,Y)}for(C in v)if(A=v[C],Y=m[C],v.hasOwnProperty(C)&&(A!=null||Y!=null))switch(C){case"value":ce=A;break;case"defaultValue":F=A;break;case"multiple":D=A;default:A!==Y&&Bt(u,f,C,A,v,Y)}f=F,m=D,v=de,ce!=null?gu(u,!!m,ce,!1):!!v!=!!m&&(f!=null?gu(u,!!m,f,!0):gu(u,!!m,m?[]:"",!1));return;case"textarea":de=ce=null;for(F in m)if(C=m[F],m.hasOwnProperty(F)&&C!=null&&!v.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Bt(u,f,F,null,v,C)}for(D in v)if(C=v[D],A=m[D],v.hasOwnProperty(D)&&(C!=null||A!=null))switch(D){case"value":ce=C;break;case"defaultValue":de=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==A&&Bt(u,f,D,C,v,A)}cN(u,ce,de);return;case"option":for(var Je in m)if(ce=m[Je],m.hasOwnProperty(Je)&&ce!=null&&!v.hasOwnProperty(Je))switch(Je){case"selected":u.selected=!1;break;default:Bt(u,f,Je,null,v,ce)}for(Y in v)if(ce=v[Y],de=m[Y],v.hasOwnProperty(Y)&&ce!==de&&(ce!=null||de!=null))switch(Y){case"selected":u.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Bt(u,f,Y,ce,v,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in m)ce=m[Xe],m.hasOwnProperty(Xe)&&ce!=null&&!v.hasOwnProperty(Xe)&&Bt(u,f,Xe,null,v,ce);for(ue in v)if(ce=v[ue],de=m[ue],v.hasOwnProperty(ue)&&ce!==de&&(ce!=null||de!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,f));break;default:Bt(u,f,ue,ce,v,de)}return;default:if(Sx(f)){for(var zt in m)ce=m[zt],m.hasOwnProperty(zt)&&ce!==void 0&&!v.hasOwnProperty(zt)&&ow(u,f,zt,void 0,v,ce);for(Se in v)ce=v[Se],de=m[Se],!v.hasOwnProperty(Se)||ce===de||ce===void 0&&de===void 0||ow(u,f,Se,ce,v,de);return}}for(var ae in m)ce=m[ae],m.hasOwnProperty(ae)&&ce!=null&&!v.hasOwnProperty(ae)&&Bt(u,f,ae,null,v,ce);for($e in v)ce=v[$e],de=m[$e],!v.hasOwnProperty($e)||ce===de||ce==null&&de==null||Bt(u,f,$e,ce,v,de)}var sw=null,lw=null;function Ng(u){return u.nodeType===9?u:u.ownerDocument}function hD(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dD(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function uw(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var cw=null;function A7(){var u=window.event;return u&&u.type==="popstate"?u===cw?!1:(cw=u,!0):(cw=null,!1)}var pD=typeof setTimeout=="function"?setTimeout:void 0,E7=typeof clearTimeout=="function"?clearTimeout:void 0,mD=typeof Promise=="function"?Promise:void 0,I7=typeof queueMicrotask=="function"?queueMicrotask:typeof mD<"u"?function(u){return mD.resolve(null).then(u).catch(O7)}:pD;function O7(u){setTimeout(function(){throw u})}function ns(u){return u==="head"}function gD(u,f){var m=f,v=0,C=0;do{var A=m.nextSibling;if(u.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"){if(0<v&&8>v){m=v;var D=u.ownerDocument;if(m&1&&Ch(D.documentElement),m&2&&Ch(D.body),m&4)for(m=D.head,Ch(m),D=m.firstChild;D;){var F=D.nextSibling,Y=D.nodeName;D[Ff]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&D.rel.toLowerCase()==="stylesheet"||m.removeChild(D),D=F}}if(C===0){u.removeChild(A),Nh(f);return}C--}else m==="$"||m==="$?"||m==="$!"?C++:v=m.charCodeAt(0)-48;else v=0;m=A}while(m);Nh(f)}function fw(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":fw(m),gx(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function N7(u,f,m,v){for(;u.nodeType===1;){var C=m;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!v&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(v){if(!u[Ff])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(A=u.getAttribute("rel"),A==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(A!==C.rel||u.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||u.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||u.getAttribute("title")!==(C.title==null?null:C.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(A=u.getAttribute("src"),(A!==(C.src==null?null:C.src)||u.getAttribute("type")!==(C.type==null?null:C.type)||u.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&A&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var A=C.name==null?null:""+C.name;if(C.type==="hidden"&&u.getAttribute("name")===A)return u}else return u;if(u=Hi(u.nextSibling),u===null)break}return null}function _7(u,f,m){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=Hi(u.nextSibling),u===null))return null;return u}function hw(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function R7(u,f){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")f();else{var v=function(){f(),m.removeEventListener("DOMContentLoaded",v)};m.addEventListener("DOMContentLoaded",v),u._reactRetry=v}}function Hi(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var dw=null;function yD(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return u;f--}else m==="/$"&&f++}u=u.previousSibling}return null}function vD(u,f,m){switch(f=Ng(m),u){case"html":if(u=f.documentElement,!u)throw Error(r(452));return u;case"head":if(u=f.head,!u)throw Error(r(453));return u;case"body":if(u=f.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function Ch(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);gx(u)}var ki=new Map,bD=new Set;function _g(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var uo=V.d;V.d={f:D7,r:M7,D:P7,C:L7,L:F7,m:B7,X:j7,S:z7,M:U7};function D7(){var u=uo.f(),f=Cg();return u||f}function M7(u){var f=hu(u);f!==null&&f.tag===5&&f.type==="form"?B_(f):uo.r(u)}var qu=typeof document>"u"?null:document;function xD(u,f,m){var v=qu;if(v&&typeof f=="string"&&f){var C=bi(f);C='link[rel="'+u+'"][href="'+C+'"]',typeof m=="string"&&(C+='[crossorigin="'+m+'"]'),bD.has(C)||(bD.add(C),u={rel:u,crossOrigin:m,href:f},v.querySelector(C)===null&&(f=v.createElement("link"),or(f,"link",u),qn(f),v.head.appendChild(f)))}}function P7(u){uo.D(u),xD("dns-prefetch",u,null)}function L7(u,f){uo.C(u,f),xD("preconnect",u,f)}function F7(u,f,m){uo.L(u,f,m);var v=qu;if(v&&u&&f){var C='link[rel="preload"][as="'+bi(f)+'"]';f==="image"&&m&&m.imageSrcSet?(C+='[imagesrcset="'+bi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(C+='[imagesizes="'+bi(m.imageSizes)+'"]')):C+='[href="'+bi(u)+'"]';var A=C;switch(f){case"style":A=Hu(u);break;case"script":A=Xu(u)}ki.has(A)||(u=h({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:u,as:f},m),ki.set(A,u),v.querySelector(C)!==null||f==="style"&&v.querySelector($h(A))||f==="script"&&v.querySelector(Th(A))||(f=v.createElement("link"),or(f,"link",u),qn(f),v.head.appendChild(f)))}}function B7(u,f){uo.m(u,f);var m=qu;if(m&&u){var v=f&&typeof f.as=="string"?f.as:"script",C='link[rel="modulepreload"][as="'+bi(v)+'"][href="'+bi(u)+'"]',A=C;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Xu(u)}if(!ki.has(A)&&(u=h({rel:"modulepreload",href:u},f),ki.set(A,u),m.querySelector(C)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Th(A)))return}v=m.createElement("link"),or(v,"link",u),qn(v),m.head.appendChild(v)}}}function z7(u,f,m){uo.S(u,f,m);var v=qu;if(v&&u){var C=du(v).hoistableStyles,A=Hu(u);f=f||"default";var D=C.get(A);if(!D){var F={loading:0,preload:null};if(D=v.querySelector($h(A)))F.loading=5;else{u=h({rel:"stylesheet",href:u,"data-precedence":f},m),(m=ki.get(A))&&pw(u,m);var Y=D=v.createElement("link");qn(Y),or(Y,"link",u),Y._p=new Promise(function(ue,Se){Y.onload=ue,Y.onerror=Se}),Y.addEventListener("load",function(){F.loading|=1}),Y.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Rg(D,f,v)}D={type:"stylesheet",instance:D,count:1,state:F},C.set(A,D)}}}function j7(u,f){uo.X(u,f);var m=qu;if(m&&u){var v=du(m).hoistableScripts,C=Xu(u),A=v.get(C);A||(A=m.querySelector(Th(C)),A||(u=h({src:u,async:!0},f),(f=ki.get(C))&&mw(u,f),A=m.createElement("script"),qn(A),or(A,"link",u),m.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(C,A))}}function U7(u,f){uo.M(u,f);var m=qu;if(m&&u){var v=du(m).hoistableScripts,C=Xu(u),A=v.get(C);A||(A=m.querySelector(Th(C)),A||(u=h({src:u,async:!0,type:"module"},f),(f=ki.get(C))&&mw(u,f),A=m.createElement("script"),qn(A),or(A,"link",u),m.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(C,A))}}function wD(u,f,m,v){var C=(C=ge.current)?_g(C):null;if(!C)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=Hu(m.href),m=du(C).hoistableStyles,v=m.get(f),v||(v={type:"style",instance:null,count:0,state:null},m.set(f,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Hu(m.href);var A=du(C).hoistableStyles,D=A.get(u);if(D||(C=C.ownerDocument||C,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(u,D),(A=C.querySelector($h(u)))&&!A._p&&(D.instance=A,D.state.loading=5),ki.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},ki.set(u,m),A||V7(C,u,m,D.state))),f&&v===null)throw Error(r(528,""));return D}if(f&&v!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Xu(m),m=du(C).hoistableScripts,v=m.get(f),v||(v={type:"script",instance:null,count:0,state:null},m.set(f,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function Hu(u){return'href="'+bi(u)+'"'}function $h(u){return'link[rel="stylesheet"]['+u+"]"}function SD(u){return h({},u,{"data-precedence":u.precedence,precedence:null})}function V7(u,f,m,v){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?v.loading=1:(f=u.createElement("link"),v.preload=f,f.addEventListener("load",function(){return v.loading|=1}),f.addEventListener("error",function(){return v.loading|=2}),or(f,"link",m),qn(f),u.head.appendChild(f))}function Xu(u){return'[src="'+bi(u)+'"]'}function Th(u){return"script[async]"+u}function CD(u,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var v=u.querySelector('style[data-href~="'+bi(m.href)+'"]');if(v)return f.instance=v,qn(v),v;var C=h({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return v=(u.ownerDocument||u).createElement("style"),qn(v),or(v,"style",C),Rg(v,m.precedence,u),f.instance=v;case"stylesheet":C=Hu(m.href);var A=u.querySelector($h(C));if(A)return f.state.loading|=4,f.instance=A,qn(A),A;v=SD(m),(C=ki.get(C))&&pw(v,C),A=(u.ownerDocument||u).createElement("link"),qn(A);var D=A;return D._p=new Promise(function(F,Y){D.onload=F,D.onerror=Y}),or(A,"link",v),f.state.loading|=4,Rg(A,m.precedence,u),f.instance=A;case"script":return A=Xu(m.src),(C=u.querySelector(Th(A)))?(f.instance=C,qn(C),C):(v=m,(C=ki.get(A))&&(v=h({},m),mw(v,C)),u=u.ownerDocument||u,C=u.createElement("script"),qn(C),or(C,"link",v),u.head.appendChild(C),f.instance=C);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(v=f.instance,f.state.loading|=4,Rg(v,m.precedence,u));return f.instance}function Rg(u,f,m){for(var v=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=v.length?v[v.length-1]:null,A=C,D=0;D<v.length;D++){var F=v[D];if(F.dataset.precedence===f)A=F;else if(A!==C)break}A?A.parentNode.insertBefore(u,A.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(u,f.firstChild))}function pw(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function mw(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var Dg=null;function $D(u,f,m){if(Dg===null){var v=new Map,C=Dg=new Map;C.set(m,v)}else C=Dg,v=C.get(m),v||(v=new Map,C.set(m,v));if(v.has(u))return v;for(v.set(u,null),m=m.getElementsByTagName(u),C=0;C<m.length;C++){var A=m[C];if(!(A[Ff]||A[gr]||u==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var D=A.getAttribute(f)||"";D=u+D;var F=v.get(D);F?F.push(A):v.set(D,[A])}}return v}function TD(u,f,m){u=u.ownerDocument||u,u.head.insertBefore(m,f==="title"?u.querySelector("head > title"):null)}function W7(u,f,m){if(m===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function kD(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var kh=null;function G7(){}function q7(u,f,m){if(kh===null)throw Error(r(475));var v=kh;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var C=Hu(m.href),A=u.querySelector($h(C));if(A){u=A._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(v.count++,v=Mg.bind(v),u.then(v,v)),f.state.loading|=4,f.instance=A,qn(A);return}A=u.ownerDocument||u,m=SD(m),(C=ki.get(C))&&pw(m,C),A=A.createElement("link"),qn(A);var D=A;D._p=new Promise(function(F,Y){D.onload=F,D.onerror=Y}),or(A,"link",m),f.instance=A}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(v.count++,f=Mg.bind(v),u.addEventListener("load",f),u.addEventListener("error",f))}}function H7(){if(kh===null)throw Error(r(475));var u=kh;return u.stylesheets&&u.count===0&&gw(u,u.stylesheets),0<u.count?function(f){var m=setTimeout(function(){if(u.stylesheets&&gw(u,u.stylesheets),u.unsuspend){var v=u.unsuspend;u.unsuspend=null,v()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(m)}}:null}function Mg(){if(this.count--,this.count===0){if(this.stylesheets)gw(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Pg=null;function gw(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Pg=new Map,f.forEach(X7,u),Pg=null,Mg.call(u))}function X7(u,f){if(!(f.state.loading&4)){var m=Pg.get(u);if(m)var v=m.get(null);else{m=new Map,Pg.set(u,m);for(var C=u.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<C.length;A++){var D=C[A];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(m.set(D.dataset.precedence,D),v=D)}v&&m.set(null,v)}C=f.instance,D=C.getAttribute("data-precedence"),A=m.get(D)||v,A===v&&m.set(null,C),m.set(D,C),this.count++,v=Mg.bind(this),C.addEventListener("load",v),C.addEventListener("error",v),A?A.parentNode.insertBefore(C,A.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(C,u.firstChild)),f.state.loading|=4}}var Ah={$$typeof:$,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function K7(u,f,m,v,C,A,D,F){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hx(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hx(0),this.hiddenUpdates=hx(null),this.identifierPrefix=v,this.onUncaughtError=C,this.onCaughtError=A,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function AD(u,f,m,v,C,A,D,F,Y,ue,Se,$e){return u=new K7(u,f,m,D,F,Y,ue,$e),f=1,A===!0&&(f|=24),A=ni(3,null,null,f),u.current=A,A.stateNode=u,f=Zx(),f.refCount++,u.pooledCache=f,f.refCount++,A.memoizedState={element:v,isDehydrated:m,cache:f},t1(A),u}function ED(u){return u?(u=Tu,u):Tu}function ID(u,f,m,v,C,A){C=ED(C),v.context===null?v.context=C:v.pendingContext=C,v=Vo(f),v.payload={element:m},A=A===void 0?null:A,A!==null&&(v.callback=A),m=Wo(u,v,f),m!==null&&(si(m,u,f),rh(m,u,f))}function OD(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<f?m:f}}function yw(u,f){OD(u,f),(u=u.alternate)&&OD(u,f)}function ND(u){if(u.tag===13){var f=$u(u,67108864);f!==null&&si(f,u,67108864),yw(u,67108864)}}var Lg=!0;function Y7(u,f,m,v){var C=M.T;M.T=null;var A=V.p;try{V.p=2,vw(u,f,m,v)}finally{V.p=A,M.T=C}}function Z7(u,f,m,v){var C=M.T;M.T=null;var A=V.p;try{V.p=8,vw(u,f,m,v)}finally{V.p=A,M.T=C}}function vw(u,f,m,v){if(Lg){var C=bw(v);if(C===null)aw(u,f,v,Fg,m),RD(u,v);else if(J7(C,u,f,m,v))v.stopPropagation();else if(RD(u,v),f&4&&-1<Q7.indexOf(u)){for(;C!==null;){var A=hu(C);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var D=Xa(A.pendingLanes);if(D!==0){var F=A;for(F.pendingLanes|=2,F.entangledLanes|=2;D;){var Y=1<<31-Dn(D);F.entanglements[1]|=Y,D&=~Y}wa(A),(Rt&6)===0&&(wg=Ne()+500,xh(0))}}break;case 13:F=$u(A,2),F!==null&&si(F,A,2),Cg(),yw(A,2)}if(A=bw(v),A===null&&aw(u,f,v,Fg,m),A===C)break;C=A}C!==null&&v.stopPropagation()}else aw(u,f,v,null,m)}}function bw(u){return u=$x(u),xw(u)}var Fg=null;function xw(u){if(Fg=null,u=fu(u),u!==null){var f=a(u);if(f===null)u=null;else{var m=f.tag;if(m===13){if(u=o(f),u!==null)return u;u=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return Fg=u,null}function _D(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case st:return 2;case gt:return 8;case tt:case Lt:return 32;case vn:return 268435456;default:return 32}default:return 32}}var ww=!1,rs=null,is=null,as=null,Eh=new Map,Ih=new Map,os=[],Q7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RD(u,f){switch(u){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Eh.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ih.delete(f.pointerId)}}function Oh(u,f,m,v,C,A){return u===null||u.nativeEvent!==A?(u={blockedOn:f,domEventName:m,eventSystemFlags:v,nativeEvent:A,targetContainers:[C]},f!==null&&(f=hu(f),f!==null&&ND(f)),u):(u.eventSystemFlags|=v,f=u.targetContainers,C!==null&&f.indexOf(C)===-1&&f.push(C),u)}function J7(u,f,m,v,C){switch(f){case"focusin":return rs=Oh(rs,u,f,m,v,C),!0;case"dragenter":return is=Oh(is,u,f,m,v,C),!0;case"mouseover":return as=Oh(as,u,f,m,v,C),!0;case"pointerover":var A=C.pointerId;return Eh.set(A,Oh(Eh.get(A)||null,u,f,m,v,C)),!0;case"gotpointercapture":return A=C.pointerId,Ih.set(A,Oh(Ih.get(A)||null,u,f,m,v,C)),!0}return!1}function DD(u){var f=fu(u.target);if(f!==null){var m=a(f);if(m!==null){if(f=m.tag,f===13){if(f=o(m),f!==null){u.blockedOn=f,qX(u.priority,function(){if(m.tag===13){var v=oi();v=dx(v);var C=$u(m,v);C!==null&&si(C,m,v),yw(m,v)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Bg(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var m=bw(u.nativeEvent);if(m===null){m=u.nativeEvent;var v=new m.constructor(m.type,m);Cx=v,m.target.dispatchEvent(v),Cx=null}else return f=hu(m),f!==null&&ND(f),u.blockedOn=m,!1;f.shift()}return!0}function MD(u,f,m){Bg(u)&&m.delete(f)}function e9(){ww=!1,rs!==null&&Bg(rs)&&(rs=null),is!==null&&Bg(is)&&(is=null),as!==null&&Bg(as)&&(as=null),Eh.forEach(MD),Ih.forEach(MD)}function zg(u,f){u.blockedOn===f&&(u.blockedOn=null,ww||(ww=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,e9)))}var jg=null;function PD(u){jg!==u&&(jg=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){jg===u&&(jg=null);for(var f=0;f<u.length;f+=3){var m=u[f],v=u[f+1],C=u[f+2];if(typeof v!="function"){if(xw(v||m)===null)continue;break}var A=hu(m);A!==null&&(u.splice(f,3),f-=3,x1(A,{pending:!0,data:C,method:m.method,action:v},v,C))}}))}function Nh(u){function f(Y){return zg(Y,u)}rs!==null&&zg(rs,u),is!==null&&zg(is,u),as!==null&&zg(as,u),Eh.forEach(f),Ih.forEach(f);for(var m=0;m<os.length;m++){var v=os[m];v.blockedOn===u&&(v.blockedOn=null)}for(;0<os.length&&(m=os[0],m.blockedOn===null);)DD(m),m.blockedOn===null&&os.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(v=0;v<m.length;v+=3){var C=m[v],A=m[v+1],D=C[Ur]||null;if(typeof A=="function")D||PD(m);else if(D){var F=null;if(A&&A.hasAttribute("formAction")){if(C=A,D=A[Ur]||null)F=D.formAction;else if(xw(C)!==null)continue}else F=D.action;typeof F=="function"?m[v+1]=F:(m.splice(v,3),v-=3),PD(m)}}}function Sw(u){this._internalRoot=u}Ug.prototype.render=Sw.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,v=oi();ID(m,v,u,f,null,null)},Ug.prototype.unmount=Sw.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;ID(u.current,2,null,u,null,null),Cg(),f[cu]=null}};function Ug(u){this._internalRoot=u}Ug.prototype.unstable_scheduleHydration=function(u){if(u){var f=JO();u={blockedOn:null,target:u,priority:f};for(var m=0;m<os.length&&f!==0&&f<os[m].priority;m++);os.splice(m,0,u),m===0&&DD(u)}};var LD=e.version;if(LD!=="19.1.0")throw Error(r(527,LD,"19.1.0"));V.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var t9={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vg.isDisabled&&Vg.supportsFiber)try{jr=Vg.inject(t9),ln=Vg}catch{}}return Rh.createRoot=function(u,f){if(!i(u))throw Error(r(299));var m=!1,v="",C=J_,A=eR,D=tR,F=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(A=f.onCaughtError),f.onRecoverableError!==void 0&&(D=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(F=f.unstable_transitionCallbacks)),f=AD(u,1,!1,null,null,m,v,C,A,D,F,null),u[cu]=f.current,iw(u),new Sw(f)},Rh.hydrateRoot=function(u,f,m){if(!i(u))throw Error(r(299));var v=!1,C="",A=J_,D=eR,F=tR,Y=null,ue=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(A=m.onUncaughtError),m.onCaughtError!==void 0&&(D=m.onCaughtError),m.onRecoverableError!==void 0&&(F=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Y=m.unstable_transitionCallbacks),m.formState!==void 0&&(ue=m.formState)),f=AD(u,1,!0,f,m??null,v,C,A,D,F,Y,ue),f.context=ED(null),m=f.current,v=oi(),v=dx(v),C=Vo(v),C.callback=null,Wo(m,C,v),m=v,f.current.lanes=m,Lf(f,m),wa(f),u[cu]=f.current,iw(u),new Ug(f)},Rh.version="19.1.0",Rh}var HD;function d9(){if(HD)return Tw.exports;HD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tw.exports=h9(),Tw.exports}var p9=d9();const m9=Pt(p9);var Dh={},XD;function g9(){if(XD)return Dh;XD=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.parse=o,Dh.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function o(p,g){const y=new a,x=p.length;if(x<2)return y;const b=(g==null?void 0:g.decode)||h;let w=0;do{const S=p.indexOf("=",w);if(S===-1)break;const $=p.indexOf(";",w),T=$===-1?x:$;if(S>T){w=p.lastIndexOf(";",S-1)+1;continue}const k=s(p,w,S),E=l(p,S,k),I=p.slice(k,E);if(y[I]===void 0){let _=s(p,S+1,T),N=l(p,T,_);const R=b(p.slice(_,N));y[I]=R}w=T+1}while(w<x);return y}function s(p,g,y){do{const x=p.charCodeAt(g);if(x!==32&&x!==9)return g}while(++g<y);return y}function l(p,g,y){for(;g>y;){const x=p.charCodeAt(--g);if(x!==32&&x!==9)return g+1}return y}function c(p,g,y){const x=(y==null?void 0:y.encode)||encodeURIComponent;if(!t.test(p))throw new TypeError(`argument name is invalid: ${p}`);const b=x(g);if(!e.test(b))throw new TypeError(`argument val is invalid: ${g}`);let w=p+"="+b;if(!y)return w;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);w+="; Max-Age="+y.maxAge}if(y.domain){if(!n.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);w+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);w+="; Path="+y.path}if(y.expires){if(!d(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);w+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(w+="; HttpOnly"),y.secure&&(w+="; Secure"),y.partitioned&&(w+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return w}function h(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function d(p){return i.call(p)==="[object Date]"}return Dh}g9();var KD="popstate";function y9(t={}){function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return YT("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:fd(i)}return b9(e,n,null,t)}function an(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ua(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v9(){return Math.random().toString(36).substring(2,10)}function YD(t,e){return{usr:t.state,key:t.key,idx:e}}function YT(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?af(e):e,state:n,key:e&&e.key||r||v9()}}function fd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function af(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function b9(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",l=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function d(){s="POP";let b=h(),w=b==null?null:b-c;c=b,l&&l({action:s,location:x.location,delta:w})}function p(b,w){s="PUSH";let S=YT(x.location,b,w);c=h()+1;let $=YD(S,c),T=x.createHref(S);try{o.pushState($,"",T)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(T)}a&&l&&l({action:s,location:x.location,delta:1})}function g(b,w){s="REPLACE";let S=YT(x.location,b,w);c=h();let $=YD(S,c),T=x.createHref(S);o.replaceState($,"",T),a&&l&&l({action:s,location:x.location,delta:0})}function y(b){return x9(b)}let x={get action(){return s},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(KD,d),l=b,()=>{i.removeEventListener(KD,d),l=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let w=y(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(b){return o.go(b)}};return x}function x9(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),an(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:fd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function _j(t,e,n="/"){return w9(t,e,n,!1)}function w9(t,e,n,r){let i=typeof e=="string"?af(e):e,a=$o(i.pathname||"/",n);if(a==null)return null;let o=Rj(t);S9(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=R9(a);s=N9(o[l],c,r)}return s}function Rj(t,e=[],n=[],r=""){let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(an(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=vo([r,l.relativePath]),h=n.concat(l);a.children&&a.children.length>0&&(an(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Rj(a.children,e,h,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:I9(c,a.index),routesMeta:h})};return t.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of Dj(a.path))i(a,o,l)}),e}function Dj(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=Dj(r.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function S9(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:O9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var C9=/^:[\w-]+$/,$9=3,T9=2,k9=1,A9=10,E9=-2,ZD=t=>t==="*";function I9(t,e){let n=t.split("/"),r=n.length;return n.some(ZD)&&(r+=E9),e&&(r+=T9),n.filter(i=>!ZD(i)).reduce((i,a)=>i+(C9.test(a)?$9:a===""?k9:A9),r)}function O9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function N9(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",d=Iy({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=Iy({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:vo([a,d.pathname]),pathnameBase:L9(vo([a,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(a=vo([a,d.pathnameBase]))}return o}function Iy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_9(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:d},p)=>{if(h==="*"){let y=s[p]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const g=s[p];return d&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:t}}function _9(t,e=!1,n=!0){ua(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function R9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ua(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function $o(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function D9(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?af(t):t;return{pathname:n?n.startsWith("/")?n:M9(n,e):e,search:F9(r),hash:B9(i)}}function M9(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Iw(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function P9(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function nA(t){let e=P9(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function rA(t,e,n,r=!1){let i;typeof t=="string"?i=af(t):(i={...t},an(!i.pathname||!i.pathname.includes("?"),Iw("?","pathname","search",i)),an(!i.pathname||!i.pathname.includes("#"),Iw("#","pathname","hash",i)),an(!i.search||!i.search.includes("#"),Iw("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}s=d>=0?e[d]:"/"}let l=D9(i,s),c=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var vo=t=>t.join("/").replace(/\/\/+/g,"/"),L9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),F9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function z9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Mj=["POST","PUT","PATCH","DELETE"];new Set(Mj);var j9=["GET",...Mj];new Set(j9);var of=Z.createContext(null);of.displayName="DataRouter";var nb=Z.createContext(null);nb.displayName="DataRouterState";var Pj=Z.createContext({isTransitioning:!1});Pj.displayName="ViewTransition";var U9=Z.createContext(new Map);U9.displayName="Fetchers";var V9=Z.createContext(null);V9.displayName="Await";var da=Z.createContext(null);da.displayName="Navigation";var ap=Z.createContext(null);ap.displayName="Location";var Wa=Z.createContext({outlet:null,matches:[],isDataRoute:!1});Wa.displayName="Route";var iA=Z.createContext(null);iA.displayName="RouteError";function W9(t,{relative:e}={}){an(sf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=Z.useContext(da),{hash:i,pathname:a,search:o}=op(t,{relative:e}),s=a;return n!=="/"&&(s=a==="/"?n:vo([n,a])),r.createHref({pathname:s,search:o,hash:i})}function sf(){return Z.useContext(ap)!=null}function Es(){return an(sf(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(ap).location}var Lj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fj(t){Z.useContext(da).static||Z.useLayoutEffect(t)}function aA(){let{isDataRoute:t}=Z.useContext(Wa);return t?rY():G9()}function G9(){an(sf(),"useNavigate() may be used only in the context of a <Router> component.");let t=Z.useContext(of),{basename:e,navigator:n}=Z.useContext(da),{matches:r}=Z.useContext(Wa),{pathname:i}=Es(),a=JSON.stringify(nA(r)),o=Z.useRef(!1);return Fj(()=>{o.current=!0}),Z.useCallback((l,c={})=>{if(ua(o.current,Lj),!o.current)return;if(typeof l=="number"){n.go(l);return}let h=rA(l,JSON.parse(a),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:vo([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,a,i,t])}Z.createContext(null);function op(t,{relative:e}={}){let{matches:n}=Z.useContext(Wa),{pathname:r}=Es(),i=JSON.stringify(nA(n));return Z.useMemo(()=>rA(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function q9(t,e){return Bj(t,e)}function Bj(t,e,n,r){var w;an(sf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=Z.useContext(da),{matches:a}=Z.useContext(Wa),o=a[a.length-1],s=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;{let S=h&&h.path||"";zj(l,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let d=Es(),p;if(e){let S=typeof e=="string"?af(e):e;an(c==="/"||((w=S.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${S.pathname}" was given in the \`location\` prop.`),p=S}else p=d;let g=p.pathname||"/",y=g;if(c!=="/"){let S=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=_j(t,{pathname:y});ua(h||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),ua(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=Z9(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},s,S.params),pathname:vo([c,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:vo([c,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,n,r);return e&&b?Z.createElement(ap.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function H9(){let t=nY(),e=z9(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=Z.createElement(Z.Fragment,null,Z.createElement("p",null,"💿 Hey developer 👋"),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:a},"ErrorBoundary")," or"," ",Z.createElement("code",{style:a},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),n?Z.createElement("pre",{style:i},n):null,o)}var X9=Z.createElement(H9,null),K9=class extends Z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?Z.createElement(Wa.Provider,{value:this.props.routeContext},Z.createElement(iA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Y9({routeContext:t,match:e,children:n}){let r=Z.useContext(of);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Z.createElement(Wa.Provider,{value:t},n)}function Z9(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let l=i.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);an(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,s=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(s=l),c.route.id){let{loaderData:h,errors:d}=n,p=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||p){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((l,c,h)=>{let d,p=!1,g=null,y=null;n&&(d=a&&c.route.id?a[c.route.id]:void 0,g=c.route.errorElement||X9,o&&(s<0&&h===0?(zj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,y=null):s===h&&(p=!0,y=c.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,h+1)),b=()=>{let w;return d?w=g:p?w=y:c.route.Component?w=Z.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=l,Z.createElement(Y9,{match:c,routeContext:{outlet:l,matches:x,isDataRoute:n!=null},children:w})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?Z.createElement(K9,{location:n.location,revalidation:n.revalidation,component:g,error:d,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}function oA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q9(t){let e=Z.useContext(of);return an(e,oA(t)),e}function J9(t){let e=Z.useContext(nb);return an(e,oA(t)),e}function eY(t){let e=Z.useContext(Wa);return an(e,oA(t)),e}function sA(t){let e=eY(t),n=e.matches[e.matches.length-1];return an(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function tY(){return sA("useRouteId")}function nY(){var r;let t=Z.useContext(iA),e=J9("useRouteError"),n=sA("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function rY(){let{router:t}=Q9("useNavigate"),e=sA("useNavigate"),n=Z.useRef(!1);return Fj(()=>{n.current=!0}),Z.useCallback(async(i,a={})=>{ua(n.current,Lj),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var QD={};function zj(t,e,n){!e&&!QD[t]&&(QD[t]=!0,ua(!1,n))}Z.memo(iY);function iY({routes:t,future:e,state:n}){return Bj(t,void 0,n,e)}function JD({to:t,replace:e,state:n,relative:r}){an(sf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=Z.useContext(da);ua(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=Z.useContext(Wa),{pathname:o}=Es(),s=aA(),l=rA(t,nA(a),o,r==="path"),c=JSON.stringify(l);return Z.useEffect(()=>{s(JSON.parse(c),{replace:e,state:n,relative:r})},[s,c,r,e,n]),null}function ZT(t){an(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aY({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){an(!sf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),s=Z.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=af(n));let{pathname:l="/",search:c="",hash:h="",state:d=null,key:p="default"}=n,g=Z.useMemo(()=>{let y=$o(l,o);return y==null?null:{location:{pathname:y,search:c,hash:h,state:d,key:p},navigationType:r}},[o,l,c,h,d,p,r]);return ua(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:Z.createElement(da.Provider,{value:s},Z.createElement(ap.Provider,{children:e,value:g}))}function oY({children:t,location:e}){return q9(QT(t),e)}function QT(t,e=[]){let n=[];return Z.Children.forEach(t,(r,i)=>{if(!Z.isValidElement(r))return;let a=[...e,i];if(r.type===Z.Fragment){n.push.apply(n,QT(r.props.children,a));return}an(r.type===ZT,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),an(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=QT(r.props.children,a)),n.push(o)}),n}var vy="get",by="application/x-www-form-urlencoded";function rb(t){return t!=null&&typeof t.tagName=="string"}function sY(t){return rb(t)&&t.tagName.toLowerCase()==="button"}function lY(t){return rb(t)&&t.tagName.toLowerCase()==="form"}function uY(t){return rb(t)&&t.tagName.toLowerCase()==="input"}function cY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fY(t,e){return t.button===0&&(!e||e==="_self")&&!cY(t)}var Gg=null;function hY(){if(Gg===null)try{new FormData(document.createElement("form"),0),Gg=!1}catch{Gg=!0}return Gg}var dY=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ow(t){return t!=null&&!dY.has(t)?(ua(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${by}"`),null):t}function pY(t,e){let n,r,i,a,o;if(lY(t)){let s=t.getAttribute("action");r=s?$o(s,e):null,n=t.getAttribute("method")||vy,i=Ow(t.getAttribute("enctype"))||by,a=new FormData(t)}else if(sY(t)||uY(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||s.getAttribute("action");if(r=l?$o(l,e):null,n=t.getAttribute("formmethod")||s.getAttribute("method")||vy,i=Ow(t.getAttribute("formenctype"))||Ow(s.getAttribute("enctype"))||by,a=new FormData(s,t),!hY()){let{name:c,type:h,value:d}=t;if(h==="image"){let p=c?`${c}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else c&&a.append(c,d)}}else{if(rb(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vy,r=null,i=by,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}function lA(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function mY(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gY(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function yY(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await mY(a,n);return o.links?o.links():[]}return[]}));return wY(r.flat(1).filter(gY).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function eM(t,e,n,r,i,a){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,s=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,c)=>o(l,c)||s(l,c)):a==="data"?e.filter((l,c)=>{var d;let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,c)||s(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function vY(t,e,{includeHydrateFallback:n}={}){return bY(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function bY(t){return[...new Set(t)]}function xY(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function wY(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(xY(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var SY=new Set([100,101,204,205]);function CY(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&$o(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function jj(){let t=Z.useContext(of);return lA(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function $Y(){let t=Z.useContext(nb);return lA(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var uA=Z.createContext(void 0);uA.displayName="FrameworkContext";function Uj(){let t=Z.useContext(uA);return lA(t,"You must render this element inside a <HydratedRouter> element"),t}function TY(t,e){let n=Z.useContext(uA),[r,i]=Z.useState(!1),[a,o]=Z.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,p=Z.useRef(null);Z.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let x=w=>{w.forEach(S=>{o(S.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[t]),Z.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{i(!0)},y=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,p,{}]:[a,p,{onFocus:Mh(s,g),onBlur:Mh(l,y),onMouseEnter:Mh(c,g),onMouseLeave:Mh(h,y),onTouchStart:Mh(d,g)}]:[!1,p,{}]}function Mh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function kY({page:t,...e}){let{router:n}=jj(),r=Z.useMemo(()=>_j(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?Z.createElement(EY,{page:t,matches:r,...e}):null}function AY(t){let{manifest:e,routeModules:n}=Uj(),[r,i]=Z.useState([]);return Z.useEffect(()=>{let a=!1;return yY(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function EY({page:t,matches:e,...n}){let r=Es(),{manifest:i,routeModules:a}=Uj(),{basename:o}=jj(),{loaderData:s,matches:l}=$Y(),c=Z.useMemo(()=>eM(t,e,l,i,r,"data"),[t,e,l,i,r]),h=Z.useMemo(()=>eM(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=Z.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,x=!1;if(e.forEach(w=>{var $;let S=i.routes[w.route.id];!S||!S.hasLoader||(!c.some(T=>T.route.id===w.route.id)&&w.route.id in s&&(($=a[w.route.id])!=null&&$.shouldRevalidate)||S.hasClientLoader?x=!0:y.add(w.route.id))}),y.size===0)return[];let b=CY(t,o);return x&&y.size>0&&b.searchParams.set("_routes",e.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[b.pathname+b.search]},[o,s,r,i,c,e,t,a]),p=Z.useMemo(()=>vY(h,i),[h,i]),g=AY(h);return Z.createElement(Z.Fragment,null,d.map(y=>Z.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),p.map(y=>Z.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),g.map(({key:y,link:x})=>Z.createElement("link",{key:y,...x})))}function IY(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Vj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vj&&(window.__reactRouterVersion="7.6.2")}catch{}function OY({basename:t,children:e,window:n}){let r=Z.useRef();r.current==null&&(r.current=y9({window:n,v5Compat:!0}));let i=r.current,[a,o]=Z.useState({action:i.action,location:i.location}),s=Z.useCallback(l=>{Z.startTransition(()=>o(l))},[o]);return Z.useLayoutEffect(()=>i.listen(s),[i,s]),Z.createElement(aY,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var Wj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gj=Z.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:l,to:c,preventScrollReset:h,viewTransition:d,...p},g){let{basename:y}=Z.useContext(da),x=typeof c=="string"&&Wj.test(c),b,w=!1;if(typeof c=="string"&&x&&(b=c,Vj))try{let N=new URL(window.location.href),R=c.startsWith("//")?new URL(N.protocol+c):new URL(c),O=$o(R.pathname,y);R.origin===N.origin&&O!=null?c=O+R.search+R.hash:w=!0}catch{ua(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=W9(c,{relative:i}),[$,T,k]=TY(r,p),E=DY(c,{replace:o,state:s,target:l,preventScrollReset:h,relative:i,viewTransition:d});function I(N){e&&e(N),N.defaultPrevented||E(N)}let _=Z.createElement("a",{...p,...k,href:b||S,onClick:w||a?e:I,ref:IY(g,T),target:l,"data-discover":!x&&n==="render"?"true":void 0});return $&&!x?Z.createElement(Z.Fragment,null,_,Z.createElement(kY,{page:S})):_});Gj.displayName="Link";var NY=Z.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:l,...c},h){let d=op(o,{relative:c.relative}),p=Es(),g=Z.useContext(nb),{navigator:y,basename:x}=Z.useContext(da),b=g!=null&&BY(d)&&s===!0,w=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,S=p.pathname,$=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(S=S.toLowerCase(),$=$?$.toLowerCase():null,w=w.toLowerCase()),$&&x&&($=$o($,x)||$);const T=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let k=S===w||!i&&S.startsWith(w)&&S.charAt(T)==="/",E=$!=null&&($===w||!i&&$.startsWith(w)&&$.charAt(w.length)==="/"),I={isActive:k,isPending:E,isTransitioning:b},_=k?e:void 0,N;typeof r=="function"?N=r(I):N=[r,k?"active":null,E?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(I):a;return Z.createElement(Gj,{...c,"aria-current":_,className:N,ref:h,style:R,to:o,viewTransition:s},typeof l=="function"?l(I):l)});NY.displayName="NavLink";var _Y=Z.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=vy,action:s,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:d,...p},g)=>{let y=LY(),x=FY(s,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",w=typeof s=="string"&&Wj.test(s),S=$=>{if(l&&l($),$.defaultPrevented)return;$.preventDefault();let T=$.nativeEvent.submitter,k=(T==null?void 0:T.getAttribute("formmethod"))||o;y(T||$.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:a,relative:c,preventScrollReset:h,viewTransition:d})};return Z.createElement("form",{ref:g,method:b,action:x,onSubmit:r?l:S,...p,"data-discover":!w&&t==="render"?"true":void 0})});_Y.displayName="Form";function RY(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qj(t){let e=Z.useContext(of);return an(e,RY(t)),e}function DY(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=aA(),l=Es(),c=op(t,{relative:a});return Z.useCallback(h=>{if(fY(h,e)){h.preventDefault();let d=n!==void 0?n:fd(l)===fd(c);s(t,{replace:d,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[l,s,c,n,r,e,t,i,a,o])}var MY=0,PY=()=>`__${String(++MY)}__`;function LY(){let{router:t}=qj("useSubmit"),{basename:e}=Z.useContext(da),n=tY();return Z.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:l,body:c}=pY(r,e);if(i.navigate===!1){let h=i.fetcherKey||PY();await t.fetch(h,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function FY(t,{relative:e}={}){let{basename:n}=Z.useContext(da),r=Z.useContext(Wa);an(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...op(t||".",{relative:e})},o=Es();if(t==null){a.search=o.search;let s=new URLSearchParams(a.search),l=s.getAll("index");if(l.some(h=>h==="")){s.delete("index"),l.filter(d=>d).forEach(d=>s.append("index",d));let h=s.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:vo([n,a.pathname])),fd(a)}function BY(t,e={}){let n=Z.useContext(Pj);an(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=qj("useViewTransitionState"),i=op(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=$o(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=$o(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Iy(i.pathname,o)!=null||Iy(i.pathname,a)!=null}[...SY];/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jY=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),tM=t=>{const e=jY(t);return e.charAt(0).toUpperCase()+e.slice(1)},Hj=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),UY=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=Z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},l)=>Z.createElement("svg",{ref:l,...VY,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Hj("lucide",i),...!a&&!UY(s)&&{"aria-hidden":"true"},...s},[...o.map(([c,h])=>Z.createElement(c,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=(t,e)=>{const n=Z.forwardRef(({className:r,...i},a)=>Z.createElement(WY,{ref:a,iconNode:e,className:Hj(`lucide-${zY(tM(t))}`,`lucide-${t}`,r),...i}));return n.displayName=tM(t),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],qY=pa("activity",GY);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],nM=pa("brain",HY);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],KY=pa("calendar",XY);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ZY=pa("chart-column",YY);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],JY=pa("circle-check-big",QY);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Xj=pa("heart",eZ);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],nZ=pa("lock",tZ);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],iZ=pa("mail",rZ);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],oZ=pa("trending-up",aZ);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],lZ=pa("triangle-alert",sZ);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cZ=pa("user",uZ);function Kj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Kj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function wt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Kj(t))&&(r&&(r+=" "),r+=e);return r}var Nw,rM;function ei(){if(rM)return Nw;rM=1;var t=Array.isArray;return Nw=t,Nw}var _w,iM;function Yj(){if(iM)return _w;iM=1;var t=typeof Wg=="object"&&Wg&&Wg.Object===Object&&Wg;return _w=t,_w}var Rw,aM;function Ga(){if(aM)return Rw;aM=1;var t=Yj(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return Rw=n,Rw}var Dw,oM;function sp(){if(oM)return Dw;oM=1;var t=Ga(),e=t.Symbol;return Dw=e,Dw}var Mw,sM;function fZ(){if(sM)return Mw;sM=1;var t=sp(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(o){var s=n.call(o,i),l=o[i];try{o[i]=void 0;var c=!0}catch{}var h=r.call(o);return c&&(s?o[i]=l:delete o[i]),h}return Mw=a,Mw}var Pw,lM;function hZ(){if(lM)return Pw;lM=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return Pw=n,Pw}var Lw,uM;function _o(){if(uM)return Lw;uM=1;var t=sp(),e=fZ(),n=hZ(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?i:r:a&&a in Object(s)?e(s):n(s)}return Lw=o,Lw}var Fw,cM;function Ro(){if(cM)return Fw;cM=1;function t(e){return e!=null&&typeof e=="object"}return Fw=t,Fw}var Bw,fM;function lf(){if(fM)return Bw;fM=1;var t=_o(),e=Ro(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return Bw=r,Bw}var zw,hM;function cA(){if(hM)return zw;hM=1;var t=ei(),e=lf(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){if(t(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||o!=null&&a in Object(o)}return zw=i,zw}var jw,dM;function Is(){if(dM)return jw;dM=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return jw=t,jw}var Uw,pM;function fA(){if(pM)return Uw;pM=1;var t=_o(),e=Is(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var l=t(s);return l==r||l==i||l==n||l==a}return Uw=o,Uw}var Vw,mM;function dZ(){if(mM)return Vw;mM=1;var t=Ga(),e=t["__core-js_shared__"];return Vw=e,Vw}var Ww,gM;function pZ(){if(gM)return Ww;gM=1;var t=dZ(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return Ww=n,Ww}var Gw,yM;function Zj(){if(yM)return Gw;yM=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Gw=n,Gw}var qw,vM;function mZ(){if(vM)return qw;vM=1;var t=fA(),e=pZ(),n=Is(),r=Zj(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,l=o.toString,c=s.hasOwnProperty,h=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(p){if(!n(p)||e(p))return!1;var g=t(p)?h:a;return g.test(r(p))}return qw=d,qw}var Hw,bM;function gZ(){if(bM)return Hw;bM=1;function t(e,n){return e==null?void 0:e[n]}return Hw=t,Hw}var Xw,xM;function Xl(){if(xM)return Xw;xM=1;var t=mZ(),e=gZ();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return Xw=n,Xw}var Kw,wM;function ib(){if(wM)return Kw;wM=1;var t=Xl(),e=t(Object,"create");return Kw=e,Kw}var Yw,SM;function yZ(){if(SM)return Yw;SM=1;var t=ib();function e(){this.__data__=t?t(null):{},this.size=0}return Yw=e,Yw}var Zw,CM;function vZ(){if(CM)return Zw;CM=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return Zw=t,Zw}var Qw,$M;function bZ(){if($M)return Qw;$M=1;var t=ib(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var o=this.__data__;if(t){var s=o[a];return s===e?void 0:s}return r.call(o,a)?o[a]:void 0}return Qw=i,Qw}var Jw,TM;function xZ(){if(TM)return Jw;TM=1;var t=ib(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return Jw=r,Jw}var eS,kM;function wZ(){if(kM)return eS;kM=1;var t=ib(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return eS=n,eS}var tS,AM;function SZ(){if(AM)return tS;AM=1;var t=yZ(),e=vZ(),n=bZ(),r=xZ(),i=wZ();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,tS=a,tS}var nS,EM;function CZ(){if(EM)return nS;EM=1;function t(){this.__data__=[],this.size=0}return nS=t,nS}var rS,IM;function hA(){if(IM)return rS;IM=1;function t(e,n){return e===n||e!==e&&n!==n}return rS=t,rS}var iS,OM;function ab(){if(OM)return iS;OM=1;var t=hA();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return iS=e,iS}var aS,NM;function $Z(){if(NM)return aS;NM=1;var t=ab(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,o=t(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():n.call(a,o,1),--this.size,!0}return aS=r,aS}var oS,_M;function TZ(){if(_M)return oS;_M=1;var t=ab();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return oS=e,oS}var sS,RM;function kZ(){if(RM)return sS;RM=1;var t=ab();function e(n){return t(this.__data__,n)>-1}return sS=e,sS}var lS,DM;function AZ(){if(DM)return lS;DM=1;var t=ab();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return lS=e,lS}var uS,MM;function ob(){if(MM)return uS;MM=1;var t=CZ(),e=$Z(),n=TZ(),r=kZ(),i=AZ();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,uS=a,uS}var cS,PM;function dA(){if(PM)return cS;PM=1;var t=Xl(),e=Ga(),n=t(e,"Map");return cS=n,cS}var fS,LM;function EZ(){if(LM)return fS;LM=1;var t=SZ(),e=ob(),n=dA();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return fS=r,fS}var hS,FM;function IZ(){if(FM)return hS;FM=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return hS=t,hS}var dS,BM;function sb(){if(BM)return dS;BM=1;var t=IZ();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return dS=e,dS}var pS,zM;function OZ(){if(zM)return pS;zM=1;var t=sb();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return pS=e,pS}var mS,jM;function NZ(){if(jM)return mS;jM=1;var t=sb();function e(n){return t(this,n).get(n)}return mS=e,mS}var gS,UM;function _Z(){if(UM)return gS;UM=1;var t=sb();function e(n){return t(this,n).has(n)}return gS=e,gS}var yS,VM;function RZ(){if(VM)return yS;VM=1;var t=sb();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return yS=e,yS}var vS,WM;function pA(){if(WM)return vS;WM=1;var t=EZ(),e=OZ(),n=NZ(),r=_Z(),i=RZ();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,vS=a,vS}var bS,GM;function Qj(){if(GM)return bS;GM=1;var t=pA(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],l=a.cache;if(l.has(s))return l.get(s);var c=r.apply(this,o);return a.cache=l.set(s,c)||l,c};return a.cache=new(n.Cache||t),a}return n.Cache=t,bS=n,bS}var xS,qM;function DZ(){if(qM)return xS;qM=1;var t=Qj(),e=500;function n(r){var i=t(r,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return xS=n,xS}var wS,HM;function MZ(){if(HM)return wS;HM=1;var t=DZ(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,l,c){a.push(l?c.replace(n,"$1"):s||o)}),a});return wS=r,wS}var SS,XM;function mA(){if(XM)return SS;XM=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return SS=t,SS}var CS,KM;function PZ(){if(KM)return CS;KM=1;var t=sp(),e=mA(),n=ei(),r=lf(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(n(s))return e(s,o)+"";if(r(s))return a?a.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return CS=o,CS}var $S,YM;function Jj(){if(YM)return $S;YM=1;var t=PZ();function e(n){return n==null?"":t(n)}return $S=e,$S}var TS,ZM;function eU(){if(ZM)return TS;ZM=1;var t=ei(),e=cA(),n=MZ(),r=Jj();function i(a,o){return t(a)?a:e(a,o)?[a]:n(r(a))}return TS=i,TS}var kS,QM;function lb(){if(QM)return kS;QM=1;var t=lf();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return kS=e,kS}var AS,JM;function gA(){if(JM)return AS;JM=1;var t=eU(),e=lb();function n(r,i){i=t(i,r);for(var a=0,o=i.length;r!=null&&a<o;)r=r[e(i[a++])];return a&&a==o?r:void 0}return AS=n,AS}var ES,eP;function tU(){if(eP)return ES;eP=1;var t=gA();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return ES=e,ES}var LZ=tU();const Pi=Pt(LZ);var IS,tP;function FZ(){if(tP)return IS;tP=1;function t(e){return e==null}return IS=t,IS}var BZ=FZ();const dt=Pt(BZ);var OS,nP;function zZ(){if(nP)return OS;nP=1;var t=_o(),e=ei(),n=Ro(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return OS=i,OS}var jZ=zZ();const Il=Pt(jZ);var UZ=fA();const nt=Pt(UZ);var VZ=Is();const uf=Pt(VZ);var NS={exports:{}},It={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rP;function WZ(){if(rP)return It;rP=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function x(b){if(typeof b=="object"&&b!==null){var w=b.$$typeof;switch(w){case t:switch(b=b.type,b){case n:case i:case r:case c:case h:return b;default:switch(b=b&&b.$$typeof,b){case s:case o:case l:case p:case d:case a:return b;default:return w}}case e:return w}}}return It.ContextConsumer=o,It.ContextProvider=a,It.Element=t,It.ForwardRef=l,It.Fragment=n,It.Lazy=p,It.Memo=d,It.Portal=e,It.Profiler=i,It.StrictMode=r,It.Suspense=c,It.SuspenseList=h,It.isAsyncMode=function(){return!1},It.isConcurrentMode=function(){return!1},It.isContextConsumer=function(b){return x(b)===o},It.isContextProvider=function(b){return x(b)===a},It.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},It.isForwardRef=function(b){return x(b)===l},It.isFragment=function(b){return x(b)===n},It.isLazy=function(b){return x(b)===p},It.isMemo=function(b){return x(b)===d},It.isPortal=function(b){return x(b)===e},It.isProfiler=function(b){return x(b)===i},It.isStrictMode=function(b){return x(b)===r},It.isSuspense=function(b){return x(b)===c},It.isSuspenseList=function(b){return x(b)===h},It.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===c||b===h||b===g||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===d||b.$$typeof===a||b.$$typeof===o||b.$$typeof===l||b.$$typeof===y||b.getModuleId!==void 0)},It.typeOf=x,It}var iP;function GZ(){return iP||(iP=1,NS.exports=WZ()),NS.exports}var qZ=GZ(),_S,aP;function nU(){if(aP)return _S;aP=1;var t=_o(),e=Ro(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return _S=r,_S}var RS,oP;function HZ(){if(oP)return RS;oP=1;var t=nU();function e(n){return t(n)&&n!=+n}return RS=e,RS}var XZ=HZ();const cf=Pt(XZ);var KZ=nU();const YZ=Pt(KZ);var ia=function(e){return e===0?0:e>0?1:-1},yl=function(e){return Il(e)&&e.indexOf("%")===e.length-1},_e=function(e){return YZ(e)&&!cf(e)},jn=function(e){return _e(e)||Il(e)},ZZ=0,ff=function(e){var n=++ZZ;return"".concat(e||"").concat(n)},Ol=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_e(e)&&!Il(e))return r;var a;if(yl(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return cf(a)&&(a=r),i&&a>n&&(a=n),a},fs=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},QZ=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},lr=function(e,n){return _e(e)&&_e(n)?function(r){return e+r*(n-e)}:function(){return n}};function Oy(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Pi(r,e))===n})}var JZ=function(e,n){return _e(e)&&_e(n)?e-n:Il(e)&&Il(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function lc(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function JT(t){"@babel/helpers - typeof";return JT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JT(t)}var eQ=["viewBox","children"],tQ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],sP=["points","pathLength"],DS={svg:eQ,polygon:sP,polyline:sP},yA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ny=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(Z.isValidElement(e)&&(r=e.props),!uf(r))return null;var i={};return Object.keys(r).forEach(function(a){yA.includes(a)&&(i[a]=n||function(o){return r[a](r,o)})}),i},nQ=function(e,n,r){return function(i){return e(n,r,i),null}},_y=function(e,n,r){if(!uf(e)||JT(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];yA.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=nQ(o,n,r))}),i},rQ=["children"],iQ=["children"];function lP(t,e){if(t==null)return{};var n=aQ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function e2(t){"@babel/helpers - typeof";return e2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e2(t)}var uP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},bo=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},cP=null,MS=null,vA=function t(e){if(e===cP&&Array.isArray(MS))return MS;var n=[];return Z.Children.forEach(e,function(r){dt(r)||(qZ.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),MS=n,cP=e,n};function Li(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return bo(i)}):r=[bo(e)],vA(t).forEach(function(i){var a=Pi(i,"type.displayName")||Pi(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function ci(t,e){var n=Li(t,e);return n&&n[0]}var fP=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!_e(r)||r<=0||!_e(i)||i<=0)},oQ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],sQ=function(e){return e&&e.type&&Il(e.type)&&oQ.indexOf(e.type)>=0},rU=function(e){return e&&e2(e)==="object"&&"clipDot"in e},lQ=function(e,n,r,i){var a,o=(a=DS==null?void 0:DS[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!nt(e)&&(i&&o.includes(n)||tQ.includes(n))||r&&yA.includes(n)},at=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(Z.isValidElement(e)&&(i=e.props),!uf(i))return null;var a={};return Object.keys(i).forEach(function(o){var s;lQ((s=i)===null||s===void 0?void 0:s[o],o,n,r)&&(a[o]=i[o])}),a},t2=function t(e,n){if(e===n)return!0;var r=Z.Children.count(e);if(r!==Z.Children.count(n))return!1;if(r===0)return!0;if(r===1)return hP(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!hP(a,o))return!1}return!0},hP=function(e,n){if(dt(e)&&dt(n))return!0;if(!dt(e)&&!dt(n)){var r=e.props||{},i=r.children,a=lP(r,rQ),o=n.props||{},s=o.children,l=lP(o,iQ);return i&&s?lc(a,l)&&t2(i,s):!i&&!s?lc(a,l):!1}return!1},dP=function(e,n){var r=[],i={};return vA(e).forEach(function(a,o){if(sQ(a))r.push(a);else if(a){var s=bo(a.type),l=n[s]||{},c=l.handler,h=l.once;if(c&&(!h||!i[s])){var d=c(a,s,o);r.push(d),i[s]=!0}}}),r},uQ=function(e){var n=e&&e.type;return n&&uP[n]?uP[n]:null},cQ=function(e,n){return vA(n).indexOf(e)},fQ=["children","width","height","viewBox","className","style","title","desc"];function n2(){return n2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n2.apply(this,arguments)}function hQ(t,e){if(t==null)return{};var n=dQ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function r2(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,o=t.style,s=t.title,l=t.desc,c=hQ(t,fQ),h=i||{width:n,height:r,x:0,y:0},d=wt("recharts-surface",a);return Q.createElement("svg",n2({},at(c,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),Q.createElement("title",null,s),Q.createElement("desc",null,l),e)}var pQ=["children","className"];function i2(){return i2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i2.apply(this,arguments)}function mQ(t,e){if(t==null)return{};var n=gQ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Yt=Q.forwardRef(function(t,e){var n=t.children,r=t.className,i=mQ(t,pQ),a=wt("recharts-layer",r);return Q.createElement("g",i2({className:a},at(i,!0),{ref:e}),n)}),xo=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},PS,pP;function yQ(){if(pP)return PS;pP=1;function t(e,n,r){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var o=Array(a);++i<a;)o[i]=e[i+n];return o}return PS=t,PS}var LS,mP;function vQ(){if(mP)return LS;mP=1;var t=yQ();function e(n,r,i){var a=n.length;return i=i===void 0?a:i,!r&&i>=a?n:t(n,r,i)}return LS=e,LS}var FS,gP;function iU(){if(gP)return FS;gP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+t+i+a+"]");function l(c){return s.test(c)}return FS=l,FS}var BS,yP;function bQ(){if(yP)return BS;yP=1;function t(e){return e.split("")}return BS=t,BS}var zS,vP;function xQ(){if(vP)return zS;vP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="["+t+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+l+")",h="[^"+t+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",y=c+"?",x="["+a+"]?",b="(?:"+g+"(?:"+[h,d,p].join("|")+")"+x+y+")*",w=x+y+b,S="(?:"+[h+s+"?",s,d,p,o].join("|")+")",$=RegExp(l+"(?="+l+")|"+S+w,"g");function T(k){return k.match($)||[]}return zS=T,zS}var jS,bP;function wQ(){if(bP)return jS;bP=1;var t=bQ(),e=iU(),n=xQ();function r(i){return e(i)?n(i):t(i)}return jS=r,jS}var US,xP;function SQ(){if(xP)return US;xP=1;var t=vQ(),e=iU(),n=wQ(),r=Jj();function i(a){return function(o){o=r(o);var s=e(o)?n(o):void 0,l=s?s[0]:o.charAt(0),c=s?t(s,1).join(""):o.slice(1);return l[a]()+c}}return US=i,US}var VS,wP;function CQ(){if(wP)return VS;wP=1;var t=SQ(),e=t("toUpperCase");return VS=e,VS}var $Q=CQ();const ub=Pt($Q);function Kt(t){return function(){return t}}const aU=Math.cos,Ry=Math.sin,ma=Math.sqrt,Dy=Math.PI,cb=2*Dy,a2=Math.PI,o2=2*a2,fl=1e-6,TQ=o2-fl;function oU(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function kQ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return oU;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class AQ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?oU:kQ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,c=i-n,h=o-e,d=s-n,p=h*h+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>fl)if(!(Math.abs(d*l-c*h)>fl)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,y=i-s,x=l*l+c*c,b=g*g+y*y,w=Math.sqrt(x),S=Math.sqrt(p),$=a*Math.tan((a2-Math.acos((x+p-b)/(2*w*S)))/2),T=$/S,k=$/w;Math.abs(T-1)>fl&&this._append`L${e+T*h},${n+T*d}`,this._append`A${a},${a},0,0,${+(d*g>h*y)},${this._x1=e+k*l},${this._y1=n+k*c}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,h=n+l,d=1^o,p=o?i-a:a-i;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>fl||Math.abs(this._y1-h)>fl)&&this._append`L${c},${h}`,r&&(p<0&&(p=p%o2+o2),p>TQ?this._append`A${r},${r},0,1,${d},${e-s},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=h}`:p>fl&&this._append`A${r},${r},0,${+(p>=a2)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function bA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new AQ(e)}function xA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function sU(t){this._context=t}sU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function fb(t){return new sU(t)}function lU(t){return t[0]}function uU(t){return t[1]}function cU(t,e){var n=Kt(!0),r=null,i=fb,a=null,o=bA(s);t=typeof t=="function"?t:t===void 0?lU:Kt(t),e=typeof e=="function"?e:e===void 0?uU:Kt(e);function s(l){var c,h=(l=xA(l)).length,d,p=!1,g;for(r==null&&(a=i(g=o())),c=0;c<=h;++c)!(c<h&&n(d=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(d,c,l),+e(d,c,l));if(g)return a=null,g+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Kt(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Kt(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function qg(t,e,n){var r=null,i=Kt(!0),a=null,o=fb,s=null,l=bA(c);t=typeof t=="function"?t:t===void 0?lU:Kt(+t),e=typeof e=="function"?e:Kt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?uU:Kt(+n);function c(d){var p,g,y,x=(d=xA(d)).length,b,w=!1,S,$=new Array(x),T=new Array(x);for(a==null&&(s=o(S=l())),p=0;p<=x;++p){if(!(p<x&&i(b=d[p],p,d))===w)if(w=!w)g=p,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=p-1;y>=g;--y)s.point($[y],T[y]);s.lineEnd(),s.areaEnd()}w&&($[p]=+t(b,p,d),T[p]=+e(b,p,d),s.point(r?+r(b,p,d):$[p],n?+n(b,p,d):T[p]))}if(S)return s=null,S+""||null}function h(){return cU().defined(i).curve(o).context(a)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Kt(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Kt(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Kt(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Kt(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Kt(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Kt(+d),c):n},c.lineX0=c.lineY0=function(){return h().x(t).y(e)},c.lineY1=function(){return h().x(t).y(n)},c.lineX1=function(){return h().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Kt(!!d),c):i},c.curve=function(d){return arguments.length?(o=d,a!=null&&(s=o(a)),c):o},c.context=function(d){return arguments.length?(d==null?a=s=null:s=o(a=d),c):a},c}class fU{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function EQ(t){return new fU(t,!0)}function IQ(t){return new fU(t,!1)}const wA={draw(t,e){const n=ma(e/Dy);t.moveTo(n,0),t.arc(0,0,n,0,cb)}},OQ={draw(t,e){const n=ma(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},hU=ma(1/3),NQ=hU*2,_Q={draw(t,e){const n=ma(e/NQ),r=n*hU;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},RQ={draw(t,e){const n=ma(e),r=-n/2;t.rect(r,r,n,n)}},DQ=.8908130915292852,dU=Ry(Dy/10)/Ry(7*Dy/10),MQ=Ry(cb/10)*dU,PQ=-aU(cb/10)*dU,LQ={draw(t,e){const n=ma(e*DQ),r=MQ*n,i=PQ*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=cb*a/5,s=aU(o),l=Ry(o);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},WS=ma(3),FQ={draw(t,e){const n=-ma(e/(WS*3));t.moveTo(0,n*2),t.lineTo(-WS*n,-n),t.lineTo(WS*n,-n),t.closePath()}},Ai=-.5,Ei=ma(3)/2,s2=1/ma(12),BQ=(s2/2+1)*3,zQ={draw(t,e){const n=ma(e/BQ),r=n/2,i=n*s2,a=r,o=n*s2+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(Ai*r-Ei*i,Ei*r+Ai*i),t.lineTo(Ai*a-Ei*o,Ei*a+Ai*o),t.lineTo(Ai*s-Ei*l,Ei*s+Ai*l),t.lineTo(Ai*r+Ei*i,Ai*i-Ei*r),t.lineTo(Ai*a+Ei*o,Ai*o-Ei*a),t.lineTo(Ai*s+Ei*l,Ai*l-Ei*s),t.closePath()}};function jQ(t,e){let n=null,r=bA(i);t=typeof t=="function"?t:Kt(t||wA),e=typeof e=="function"?e:Kt(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Kt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Kt(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function My(){}function Py(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function pU(t){this._context=t}pU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Py(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Py(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function UQ(t){return new pU(t)}function mU(t){this._context=t}mU.prototype={areaStart:My,areaEnd:My,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Py(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function VQ(t){return new mU(t)}function gU(t){this._context=t}gU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Py(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function WQ(t){return new gU(t)}function yU(t){this._context=t}yU.prototype={areaStart:My,areaEnd:My,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function GQ(t){return new yU(t)}function SP(t){return t<0?-1:1}function CP(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(SP(a)+SP(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function $P(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function GS(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function Ly(t){this._context=t}Ly.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:GS(this,this._t0,$P(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,GS(this,$P(this,n=CP(this,t,e)),n);break;default:GS(this,this._t0,n=CP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function vU(t){this._context=new bU(t)}(vU.prototype=Object.create(Ly.prototype)).point=function(t,e){Ly.prototype.point.call(this,e,t)};function bU(t){this._context=t}bU.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function qQ(t){return new Ly(t)}function HQ(t){return new vU(t)}function xU(t){this._context=t}xU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=TP(t),i=TP(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function TP(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function XQ(t){return new xU(t)}function hb(t,e){this._context=t,this._t=e}hb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function KQ(t){return new hb(t,.5)}function YQ(t){return new hb(t,0)}function ZQ(t){return new hb(t,1)}function bc(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,s=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function l2(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function QQ(t,e){return t[e]}function JQ(t){const e=[];return e.key=t,e}function eJ(){var t=Kt([]),e=l2,n=bc,r=QQ;function i(a){var o=Array.from(t.apply(this,arguments),JQ),s,l=o.length,c=-1,h;for(const d of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(d,o[s].key,c,a)]).data=d;for(s=0,h=xA(e(o));s<l;++s)o[h[s]].index=s;return n(o,h),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Kt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Kt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?l2:typeof a=="function"?a:Kt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??bc,i):n},i}function tJ(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}bc(t,e)}}function nJ(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=t[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}bc(t,e)}}function rJ(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,c=0;s<o;++s){for(var h=t[e[s]],d=h[r][1]||0,p=h[r-1][1]||0,g=(d-p)/2,y=0;y<s;++y){var x=t[e[y]],b=x[r][1]||0,w=x[r-1][1]||0;g+=b-w}l+=d,c+=g*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,bc(t,e)}}function hd(t){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(t)}var iJ=["type","size","sizeType"];function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u2.apply(this,arguments)}function kP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kP(Object(n),!0).forEach(function(r){aJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aJ(t,e,n){return e=oJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oJ(t){var e=sJ(t,"string");return hd(e)=="symbol"?e:e+""}function sJ(t,e){if(hd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lJ(t,e){if(t==null)return{};var n=uJ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uJ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var wU={symbolCircle:wA,symbolCross:OQ,symbolDiamond:_Q,symbolSquare:RQ,symbolStar:LQ,symbolTriangle:FQ,symbolWye:zQ},cJ=Math.PI/180,fJ=function(e){var n="symbol".concat(ub(e));return wU[n]||wA},hJ=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*cJ;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},dJ=function(e,n){wU["symbol".concat(ub(e))]=n},SA=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,o=e.sizeType,s=o===void 0?"area":o,l=lJ(e,iJ),c=AP(AP({},l),{},{type:r,size:a,sizeType:s}),h=function(){var b=fJ(r),w=jQ().type(b).size(hJ(a,s,r));return w()},d=c.className,p=c.cx,g=c.cy,y=at(c,!0);return p===+p&&g===+g&&a===+a?Q.createElement("path",u2({},y,{className:wt("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(g,")"),d:h()})):null};SA.registerSymbol=dJ;function xc(t){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(t)}function c2(){return c2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c2.apply(this,arguments)}function EP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EP(Object(n),!0).forEach(function(r){dd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CU(r.key),r)}}function yJ(t,e,n){return e&&gJ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vJ(t,e,n){return e=Fy(e),bJ(t,SU()?Reflect.construct(e,n||[],Fy(t).constructor):e.apply(t,n))}function bJ(t,e){if(e&&(xc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xJ(t)}function xJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SU=function(){return!!t})()}function Fy(t){return Fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fy(t)}function wJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f2(t,e)}function f2(t,e){return f2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f2(t,e)}function dd(t,e,n){return e=CU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CU(t){var e=SJ(t,"string");return xc(e)=="symbol"?e:e+""}function SJ(t,e){if(xc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xi=32,CA=function(t){function e(){return mJ(this,e),vJ(this,e,arguments)}return wJ(e,t),yJ(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Xi/2,o=Xi/6,s=Xi/3,l=r.inactive?i:r.color;if(r.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Xi,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(a,`
            H`).concat(Xi,"M").concat(2*s,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return Q.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Xi/8,"h").concat(Xi,"v").concat(Xi*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(r.legendIcon)){var c=pJ({},r);return delete c.legendIcon,Q.cloneElement(r.legendIcon,c)}return Q.createElement(SA,{fill:l,cx:a,cy:a,size:Xi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,h={x:0,y:0,width:Xi,height:Xi},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(g,y){var x=g.formatter||l,b=wt(dd(dd({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",g.inactive));if(g.type==="none")return null;var w=nt(g.value)?null:g.value;xo(!nt(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=g.inactive?c:g.color;return Q.createElement("li",c2({className:b,style:d,key:"legend-item-".concat(y)},_y(r.props,g,y)),Q.createElement(r2,{width:o,height:o,viewBox:h,style:p},r.renderIcon(g)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},x?x(w,g,y):w))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(Z.PureComponent);dd(CA,"displayName","Legend");dd(CA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var qS,IP;function CJ(){if(IP)return qS;IP=1;var t=ob();function e(){this.__data__=new t,this.size=0}return qS=e,qS}var HS,OP;function $J(){if(OP)return HS;OP=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return HS=t,HS}var XS,NP;function TJ(){if(NP)return XS;NP=1;function t(e){return this.__data__.get(e)}return XS=t,XS}var KS,_P;function kJ(){if(_P)return KS;_P=1;function t(e){return this.__data__.has(e)}return KS=t,KS}var YS,RP;function AJ(){if(RP)return YS;RP=1;var t=ob(),e=dA(),n=pA(),r=200;function i(a,o){var s=this.__data__;if(s instanceof t){var l=s.__data__;if(!e||l.length<r-1)return l.push([a,o]),this.size=++s.size,this;s=this.__data__=new n(l)}return s.set(a,o),this.size=s.size,this}return YS=i,YS}var ZS,DP;function $U(){if(DP)return ZS;DP=1;var t=ob(),e=CJ(),n=$J(),r=TJ(),i=kJ(),a=AJ();function o(s){var l=this.__data__=new t(s);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,ZS=o,ZS}var QS,MP;function EJ(){if(MP)return QS;MP=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return QS=e,QS}var JS,PP;function IJ(){if(PP)return JS;PP=1;function t(e){return this.__data__.has(e)}return JS=t,JS}var eC,LP;function TU(){if(LP)return eC;LP=1;var t=pA(),e=EJ(),n=IJ();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new t;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,eC=r,eC}var tC,FP;function kU(){if(FP)return tC;FP=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return tC=t,tC}var nC,BP;function AU(){if(BP)return nC;BP=1;function t(e,n){return e.has(n)}return nC=t,nC}var rC,zP;function EU(){if(zP)return rC;zP=1;var t=TU(),e=kU(),n=AU(),r=1,i=2;function a(o,s,l,c,h,d){var p=l&r,g=o.length,y=s.length;if(g!=y&&!(p&&y>g))return!1;var x=d.get(o),b=d.get(s);if(x&&b)return x==s&&b==o;var w=-1,S=!0,$=l&i?new t:void 0;for(d.set(o,s),d.set(s,o);++w<g;){var T=o[w],k=s[w];if(c)var E=p?c(k,T,w,s,o,d):c(T,k,w,o,s,d);if(E!==void 0){if(E)continue;S=!1;break}if($){if(!e(s,function(I,_){if(!n($,_)&&(T===I||h(T,I,l,c,d)))return $.push(_)})){S=!1;break}}else if(!(T===k||h(T,k,l,c,d))){S=!1;break}}return d.delete(o),d.delete(s),S}return rC=a,rC}var iC,jP;function OJ(){if(jP)return iC;jP=1;var t=Ga(),e=t.Uint8Array;return iC=e,iC}var aC,UP;function NJ(){if(UP)return aC;UP=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return aC=t,aC}var oC,VP;function $A(){if(VP)return oC;VP=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return oC=t,oC}var sC,WP;function _J(){if(WP)return sC;WP=1;var t=sp(),e=OJ(),n=hA(),r=EU(),i=NJ(),a=$A(),o=1,s=2,l="[object Boolean]",c="[object Date]",h="[object Error]",d="[object Map]",p="[object Number]",g="[object RegExp]",y="[object Set]",x="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",S="[object DataView]",$=t?t.prototype:void 0,T=$?$.valueOf:void 0;function k(E,I,_,N,R,O,P){switch(_){case S:if(E.byteLength!=I.byteLength||E.byteOffset!=I.byteOffset)return!1;E=E.buffer,I=I.buffer;case w:return!(E.byteLength!=I.byteLength||!O(new e(E),new e(I)));case l:case c:case p:return n(+E,+I);case h:return E.name==I.name&&E.message==I.message;case g:case x:return E==I+"";case d:var B=i;case y:var U=N&o;if(B||(B=a),E.size!=I.size&&!U)return!1;var z=P.get(E);if(z)return z==I;N|=s,P.set(E,I);var M=r(B(E),B(I),N,R,O,P);return P.delete(E),M;case b:if(T)return T.call(E)==T.call(I)}return!1}return sC=k,sC}var lC,GP;function IU(){if(GP)return lC;GP=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return lC=t,lC}var uC,qP;function RJ(){if(qP)return uC;qP=1;var t=IU(),e=ei();function n(r,i,a){var o=i(r);return e(r)?o:t(o,a(r))}return uC=n,uC}var cC,HP;function DJ(){if(HP)return cC;HP=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var s=e[r];n(s,r,e)&&(o[a++]=s)}return o}return cC=t,cC}var fC,XP;function MJ(){if(XP)return fC;XP=1;function t(){return[]}return fC=t,fC}var hC,KP;function PJ(){if(KP)return hC;KP=1;var t=DJ(),e=MJ(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(s){return r.call(o,s)}))}:e;return hC=a,hC}var dC,YP;function LJ(){if(YP)return dC;YP=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return dC=t,dC}var pC,ZP;function FJ(){if(ZP)return pC;ZP=1;var t=_o(),e=Ro(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return pC=r,pC}var mC,QP;function TA(){if(QP)return mC;QP=1;var t=FJ(),e=Ro(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return mC=a,mC}var Kh={exports:{}},gC,JP;function BJ(){if(JP)return gC;JP=1;function t(){return!1}return gC=t,gC}Kh.exports;var e3;function OU(){return e3||(e3=1,function(t,e){var n=Ga(),r=BJ(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;t.exports=c}(Kh,Kh.exports)),Kh.exports}var yC,t3;function kA(){if(t3)return yC;t3=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return yC=n,yC}var vC,n3;function AA(){if(n3)return vC;n3=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return vC=e,vC}var bC,r3;function zJ(){if(r3)return bC;r3=1;var t=_o(),e=AA(),n=Ro(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",l="[object Function]",c="[object Map]",h="[object Number]",d="[object Object]",p="[object RegExp]",g="[object Set]",y="[object String]",x="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",S="[object Float32Array]",$="[object Float64Array]",T="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",_="[object Uint8ClampedArray]",N="[object Uint16Array]",R="[object Uint32Array]",O={};O[S]=O[$]=O[T]=O[k]=O[E]=O[I]=O[_]=O[N]=O[R]=!0,O[r]=O[i]=O[b]=O[a]=O[w]=O[o]=O[s]=O[l]=O[c]=O[h]=O[d]=O[p]=O[g]=O[y]=O[x]=!1;function P(B){return n(B)&&e(B.length)&&!!O[t(B)]}return bC=P,bC}var xC,i3;function NU(){if(i3)return xC;i3=1;function t(e){return function(n){return e(n)}}return xC=t,xC}var Yh={exports:{}};Yh.exports;var a3;function jJ(){return a3||(a3=1,function(t,e){var n=Yj(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s}(Yh,Yh.exports)),Yh.exports}var wC,o3;function _U(){if(o3)return wC;o3=1;var t=zJ(),e=NU(),n=jJ(),r=n&&n.isTypedArray,i=r?e(r):t;return wC=i,wC}var SC,s3;function UJ(){if(s3)return SC;s3=1;var t=LJ(),e=TA(),n=ei(),r=OU(),i=kA(),a=_U(),o=Object.prototype,s=o.hasOwnProperty;function l(c,h){var d=n(c),p=!d&&e(c),g=!d&&!p&&r(c),y=!d&&!p&&!g&&a(c),x=d||p||g||y,b=x?t(c.length,String):[],w=b.length;for(var S in c)(h||s.call(c,S))&&!(x&&(S=="length"||g&&(S=="offset"||S=="parent")||y&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||i(S,w)))&&b.push(S);return b}return SC=l,SC}var CC,l3;function VJ(){if(l3)return CC;l3=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return CC=e,CC}var $C,u3;function RU(){if(u3)return $C;u3=1;function t(e,n){return function(r){return e(n(r))}}return $C=t,$C}var TC,c3;function WJ(){if(c3)return TC;c3=1;var t=RU(),e=t(Object.keys,Object);return TC=e,TC}var kC,f3;function GJ(){if(f3)return kC;f3=1;var t=VJ(),e=WJ(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var o=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&o.push(s);return o}return kC=i,kC}var AC,h3;function lp(){if(h3)return AC;h3=1;var t=fA(),e=AA();function n(r){return r!=null&&e(r.length)&&!t(r)}return AC=n,AC}var EC,d3;function db(){if(d3)return EC;d3=1;var t=UJ(),e=GJ(),n=lp();function r(i){return n(i)?t(i):e(i)}return EC=r,EC}var IC,p3;function qJ(){if(p3)return IC;p3=1;var t=RJ(),e=PJ(),n=db();function r(i){return t(i,n,e)}return IC=r,IC}var OC,m3;function HJ(){if(m3)return OC;m3=1;var t=qJ(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,o,s,l,c,h){var d=s&e,p=t(a),g=p.length,y=t(o),x=y.length;if(g!=x&&!d)return!1;for(var b=g;b--;){var w=p[b];if(!(d?w in o:r.call(o,w)))return!1}var S=h.get(a),$=h.get(o);if(S&&$)return S==o&&$==a;var T=!0;h.set(a,o),h.set(o,a);for(var k=d;++b<g;){w=p[b];var E=a[w],I=o[w];if(l)var _=d?l(I,E,w,o,a,h):l(E,I,w,a,o,h);if(!(_===void 0?E===I||c(E,I,s,l,h):_)){T=!1;break}k||(k=w=="constructor")}if(T&&!k){var N=a.constructor,R=o.constructor;N!=R&&"constructor"in a&&"constructor"in o&&!(typeof N=="function"&&N instanceof N&&typeof R=="function"&&R instanceof R)&&(T=!1)}return h.delete(a),h.delete(o),T}return OC=i,OC}var NC,g3;function XJ(){if(g3)return NC;g3=1;var t=Xl(),e=Ga(),n=t(e,"DataView");return NC=n,NC}var _C,y3;function KJ(){if(y3)return _C;y3=1;var t=Xl(),e=Ga(),n=t(e,"Promise");return _C=n,_C}var RC,v3;function DU(){if(v3)return RC;v3=1;var t=Xl(),e=Ga(),n=t(e,"Set");return RC=n,RC}var DC,b3;function YJ(){if(b3)return DC;b3=1;var t=Xl(),e=Ga(),n=t(e,"WeakMap");return DC=n,DC}var MC,x3;function ZJ(){if(x3)return MC;x3=1;var t=XJ(),e=dA(),n=KJ(),r=DU(),i=YJ(),a=_o(),o=Zj(),s="[object Map]",l="[object Object]",c="[object Promise]",h="[object Set]",d="[object WeakMap]",p="[object DataView]",g=o(t),y=o(e),x=o(n),b=o(r),w=o(i),S=a;return(t&&S(new t(new ArrayBuffer(1)))!=p||e&&S(new e)!=s||n&&S(n.resolve())!=c||r&&S(new r)!=h||i&&S(new i)!=d)&&(S=function($){var T=a($),k=T==l?$.constructor:void 0,E=k?o(k):"";if(E)switch(E){case g:return p;case y:return s;case x:return c;case b:return h;case w:return d}return T}),MC=S,MC}var PC,w3;function QJ(){if(w3)return PC;w3=1;var t=$U(),e=EU(),n=_J(),r=HJ(),i=ZJ(),a=ei(),o=OU(),s=_U(),l=1,c="[object Arguments]",h="[object Array]",d="[object Object]",p=Object.prototype,g=p.hasOwnProperty;function y(x,b,w,S,$,T){var k=a(x),E=a(b),I=k?h:i(x),_=E?h:i(b);I=I==c?d:I,_=_==c?d:_;var N=I==d,R=_==d,O=I==_;if(O&&o(x)){if(!o(b))return!1;k=!0,N=!1}if(O&&!N)return T||(T=new t),k||s(x)?e(x,b,w,S,$,T):n(x,b,I,w,S,$,T);if(!(w&l)){var P=N&&g.call(x,"__wrapped__"),B=R&&g.call(b,"__wrapped__");if(P||B){var U=P?x.value():x,z=B?b.value():b;return T||(T=new t),$(U,z,w,S,T)}}return O?(T||(T=new t),r(x,b,w,S,$,T)):!1}return PC=y,PC}var LC,S3;function EA(){if(S3)return LC;S3=1;var t=QJ(),e=Ro();function n(r,i,a,o,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,o,n,s)}return LC=n,LC}var FC,C3;function JJ(){if(C3)return FC;C3=1;var t=$U(),e=EA(),n=1,r=2;function i(a,o,s,l){var c=s.length,h=c,d=!l;if(a==null)return!h;for(a=Object(a);c--;){var p=s[c];if(d&&p[2]?p[1]!==a[p[0]]:!(p[0]in a))return!1}for(;++c<h;){p=s[c];var g=p[0],y=a[g],x=p[1];if(d&&p[2]){if(y===void 0&&!(g in a))return!1}else{var b=new t;if(l)var w=l(y,x,g,a,o,b);if(!(w===void 0?e(x,y,n|r,l,b):w))return!1}}return!0}return FC=i,FC}var BC,$3;function MU(){if($3)return BC;$3=1;var t=Is();function e(n){return n===n&&!t(n)}return BC=e,BC}var zC,T3;function eee(){if(T3)return zC;T3=1;var t=MU(),e=db();function n(r){for(var i=e(r),a=i.length;a--;){var o=i[a],s=r[o];i[a]=[o,s,t(s)]}return i}return zC=n,zC}var jC,k3;function PU(){if(k3)return jC;k3=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return jC=t,jC}var UC,A3;function tee(){if(A3)return UC;A3=1;var t=JJ(),e=eee(),n=PU();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(o){return o===i||t(o,i,a)}}return UC=r,UC}var VC,E3;function nee(){if(E3)return VC;E3=1;function t(e,n){return e!=null&&n in Object(e)}return VC=t,VC}var WC,I3;function ree(){if(I3)return WC;I3=1;var t=eU(),e=TA(),n=ei(),r=kA(),i=AA(),a=lb();function o(s,l,c){l=t(l,s);for(var h=-1,d=l.length,p=!1;++h<d;){var g=a(l[h]);if(!(p=s!=null&&c(s,g)))break;s=s[g]}return p||++h!=d?p:(d=s==null?0:s.length,!!d&&i(d)&&r(g,d)&&(n(s)||e(s)))}return WC=o,WC}var GC,O3;function iee(){if(O3)return GC;O3=1;var t=nee(),e=ree();function n(r,i){return r!=null&&e(r,i,t)}return GC=n,GC}var qC,N3;function aee(){if(N3)return qC;N3=1;var t=EA(),e=tU(),n=iee(),r=cA(),i=MU(),a=PU(),o=lb(),s=1,l=2;function c(h,d){return r(h)&&i(d)?a(o(h),d):function(p){var g=e(p,h);return g===void 0&&g===d?n(p,h):t(d,g,s|l)}}return qC=c,qC}var HC,_3;function hf(){if(_3)return HC;_3=1;function t(e){return e}return HC=t,HC}var XC,R3;function oee(){if(R3)return XC;R3=1;function t(e){return function(n){return n==null?void 0:n[e]}}return XC=t,XC}var KC,D3;function see(){if(D3)return KC;D3=1;var t=gA();function e(n){return function(r){return t(r,n)}}return KC=e,KC}var YC,M3;function lee(){if(M3)return YC;M3=1;var t=oee(),e=see(),n=cA(),r=lb();function i(a){return n(a)?t(r(a)):e(a)}return YC=i,YC}var ZC,P3;function Os(){if(P3)return ZC;P3=1;var t=tee(),e=aee(),n=hf(),r=ei(),i=lee();function a(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?e(o[0],o[1]):t(o):i(o)}return ZC=a,ZC}var QC,L3;function LU(){if(L3)return QC;L3=1;function t(e,n,r,i){for(var a=e.length,o=r+(i?1:-1);i?o--:++o<a;)if(n(e[o],o,e))return o;return-1}return QC=t,QC}var JC,F3;function uee(){if(F3)return JC;F3=1;function t(e){return e!==e}return JC=t,JC}var e$,B3;function cee(){if(B3)return e$;B3=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return e$=t,e$}var t$,z3;function fee(){if(z3)return t$;z3=1;var t=LU(),e=uee(),n=cee();function r(i,a,o){return a===a?n(i,a,o):t(i,e,o)}return t$=r,t$}var n$,j3;function hee(){if(j3)return n$;j3=1;var t=fee();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return n$=e,n$}var r$,U3;function dee(){if(U3)return r$;U3=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return r$=t,r$}var i$,V3;function pee(){if(V3)return i$;V3=1;function t(){}return i$=t,i$}var a$,W3;function mee(){if(W3)return a$;W3=1;var t=DU(),e=pee(),n=$A(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return a$=i,a$}var o$,G3;function gee(){if(G3)return o$;G3=1;var t=TU(),e=hee(),n=dee(),r=AU(),i=mee(),a=$A(),o=200;function s(l,c,h){var d=-1,p=e,g=l.length,y=!0,x=[],b=x;if(h)y=!1,p=n;else if(g>=o){var w=c?null:i(l);if(w)return a(w);y=!1,p=r,b=new t}else b=c?[]:x;e:for(;++d<g;){var S=l[d],$=c?c(S):S;if(S=h||S!==0?S:0,y&&$===$){for(var T=b.length;T--;)if(b[T]===$)continue e;c&&b.push($),x.push(S)}else p(b,$,h)||(b!==x&&b.push($),x.push(S))}return x}return o$=s,o$}var s$,q3;function yee(){if(q3)return s$;q3=1;var t=Os(),e=gee();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return s$=n,s$}var vee=yee();const H3=Pt(vee);function FU(t,e,n){return e===!0?H3(t,n):nt(e)?H3(t,e):t}function wc(t){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wc(t)}var bee=["ref"];function X3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function co(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X3(Object(n),!0).forEach(function(r){pb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zU(r.key),r)}}function wee(t,e,n){return e&&K3(t.prototype,e),n&&K3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function See(t,e,n){return e=By(e),Cee(t,BU()?Reflect.construct(e,n||[],By(t).constructor):e.apply(t,n))}function Cee(t,e){if(e&&(wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ee(t)}function $ee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BU=function(){return!!t})()}function By(t){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},By(t)}function Tee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h2(t,e)}function h2(t,e){return h2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},h2(t,e)}function pb(t,e,n){return e=zU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zU(t){var e=kee(t,"string");return wc(e)=="symbol"?e:e+""}function kee(t,e){if(wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Aee(t,e){if(t==null)return{};var n=Eee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Eee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Iee(t){return t.value}function Oee(t,e){if(Q.isValidElement(t))return Q.cloneElement(t,e);if(typeof t=="function")return Q.createElement(t,e);e.ref;var n=Aee(e,bee);return Q.createElement(CA,n)}var Y3=1,uc=function(t){function e(){var n;xee(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=See(this,e,[].concat(i)),pb(n,"lastBoundingBox",{width:-1,height:-1}),n}return Tee(e,t),wee(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Y3||Math.abs(i.height-this.lastBoundingBox.height)>Y3)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?co({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,h=i.chartHeight,d,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var g=this.getBBoxSnapshot();d={left:((c||0)-g.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var y=this.getBBoxSnapshot();p={top:((h||0)-y.height)/2}}else p=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return co(co({},d),p)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,h=i.payload,d=co(co({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return Q.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(g){r.wrapperNode=g}},Oee(a,co(co({},this.props),{},{payload:FU(h,c,Iee)})))}}],[{key:"getWithHeight",value:function(r,i){var a=co(co({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&_e(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(Z.PureComponent);pb(uc,"displayName","Legend");pb(uc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var l$,Z3;function Nee(){if(Z3)return l$;Z3=1;var t=sp(),e=TA(),n=ei(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return l$=i,l$}var u$,Q3;function jU(){if(Q3)return u$;Q3=1;var t=IU(),e=Nee();function n(r,i,a,o,s){var l=-1,c=r.length;for(a||(a=e),s||(s=[]);++l<c;){var h=r[l];i>0&&a(h)?i>1?n(h,i-1,a,o,s):t(s,h):o||(s[s.length]=h)}return s}return u$=n,u$}var c$,J3;function _ee(){if(J3)return c$;J3=1;function t(e){return function(n,r,i){for(var a=-1,o=Object(n),s=i(n),l=s.length;l--;){var c=s[e?l:++a];if(r(o[c],c,o)===!1)break}return n}}return c$=t,c$}var f$,eL;function Ree(){if(eL)return f$;eL=1;var t=_ee(),e=t();return f$=e,f$}var h$,tL;function UU(){if(tL)return h$;tL=1;var t=Ree(),e=db();function n(r,i){return r&&t(r,i,e)}return h$=n,h$}var d$,nL;function Dee(){if(nL)return d$;nL=1;var t=lp();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var o=i.length,s=r?o:-1,l=Object(i);(r?s--:++s<o)&&a(l[s],s,l)!==!1;);return i}}return d$=e,d$}var p$,rL;function IA(){if(rL)return p$;rL=1;var t=UU(),e=Dee(),n=e(t);return p$=n,p$}var m$,iL;function VU(){if(iL)return m$;iL=1;var t=IA(),e=lp();function n(r,i){var a=-1,o=e(r)?Array(r.length):[];return t(r,function(s,l,c){o[++a]=i(s,l,c)}),o}return m$=n,m$}var g$,aL;function Mee(){if(aL)return g$;aL=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return g$=t,g$}var y$,oL;function Pee(){if(oL)return y$;oL=1;var t=lf();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,o=n===n,s=t(n),l=r!==void 0,c=r===null,h=r===r,d=t(r);if(!c&&!d&&!s&&n>r||s&&l&&h&&!c&&!d||a&&l&&h||!i&&h||!o)return 1;if(!a&&!s&&!d&&n<r||d&&i&&o&&!a&&!s||c&&i&&o||!l&&o||!h)return-1}return 0}return y$=e,y$}var v$,sL;function Lee(){if(sL)return v$;sL=1;var t=Pee();function e(n,r,i){for(var a=-1,o=n.criteria,s=r.criteria,l=o.length,c=i.length;++a<l;){var h=t(o[a],s[a]);if(h){if(a>=c)return h;var d=i[a];return h*(d=="desc"?-1:1)}}return n.index-r.index}return v$=e,v$}var b$,lL;function Fee(){if(lL)return b$;lL=1;var t=mA(),e=gA(),n=Os(),r=VU(),i=Mee(),a=NU(),o=Lee(),s=hf(),l=ei();function c(h,d,p){d.length?d=t(d,function(x){return l(x)?function(b){return e(b,x.length===1?x[0]:x)}:x}):d=[s];var g=-1;d=t(d,a(n));var y=r(h,function(x,b,w){var S=t(d,function($){return $(x)});return{criteria:S,index:++g,value:x}});return i(y,function(x,b){return o(x,b,p)})}return b$=c,b$}var x$,uL;function Bee(){if(uL)return x$;uL=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return x$=t,x$}var w$,cL;function zee(){if(cL)return w$;cL=1;var t=Bee(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,s=-1,l=e(o.length-i,0),c=Array(l);++s<l;)c[s]=o[i+s];s=-1;for(var h=Array(i+1);++s<i;)h[s]=o[s];return h[i]=a(c),t(r,this,h)}}return w$=n,w$}var S$,fL;function jee(){if(fL)return S$;fL=1;function t(e){return function(){return e}}return S$=t,S$}var C$,hL;function WU(){if(hL)return C$;hL=1;var t=Xl(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return C$=e,C$}var $$,dL;function Uee(){if(dL)return $$;dL=1;var t=jee(),e=WU(),n=hf(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return $$=r,$$}var T$,pL;function Vee(){if(pL)return T$;pL=1;var t=800,e=16,n=Date.now;function r(i){var a=0,o=0;return function(){var s=n(),l=e-(s-o);if(o=s,l>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return T$=r,T$}var k$,mL;function Wee(){if(mL)return k$;mL=1;var t=Uee(),e=Vee(),n=e(t);return k$=n,k$}var A$,gL;function Gee(){if(gL)return A$;gL=1;var t=hf(),e=zee(),n=Wee();function r(i,a){return n(e(i,a,t),i+"")}return A$=r,A$}var E$,yL;function mb(){if(yL)return E$;yL=1;var t=hA(),e=lp(),n=kA(),r=Is();function i(a,o,s){if(!r(s))return!1;var l=typeof o;return(l=="number"?e(s)&&n(o,s.length):l=="string"&&o in s)?t(s[o],a):!1}return E$=i,E$}var I$,vL;function qee(){if(vL)return I$;vL=1;var t=jU(),e=Fee(),n=Gee(),r=mb(),i=n(function(a,o){if(a==null)return[];var s=o.length;return s>1&&r(a,o[0],o[1])?o=[]:s>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(a,t(o,1),[])});return I$=i,I$}var Hee=qee();const OA=Pt(Hee);function pd(t){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pd(t)}function d2(){return d2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d2.apply(this,arguments)}function Xee(t,e){return Qee(t)||Zee(t,e)||Yee(t,e)||Kee()}function Kee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yee(t,e){if(t){if(typeof t=="string")return bL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bL(t,e)}}function bL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zee(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Qee(t){if(Array.isArray(t))return t}function xL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xL(Object(n),!0).forEach(function(r){Jee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jee(t,e,n){return e=ete(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ete(t){var e=tte(t,"string");return pd(e)=="symbol"?e:e+""}function tte(t,e){if(pd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nte(t){return Array.isArray(t)&&jn(t[0])&&jn(t[1])?t.join(" ~ "):t}var rte=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,s=o===void 0?{}:o,l=e.labelStyle,c=l===void 0?{}:l,h=e.payload,d=e.formatter,p=e.itemSorter,g=e.wrapperClassName,y=e.labelClassName,x=e.label,b=e.labelFormatter,w=e.accessibilityLayer,S=w===void 0?!1:w,$=function(){if(h&&h.length){var P={padding:0,margin:0},B=(p?OA(h,p):h).map(function(U,z){if(U.type==="none")return null;var M=O$({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},s),V=U.formatter||d||nte,W=U.value,H=U.name,L=W,G=H;if(V&&L!=null&&G!=null){var q=V(W,H,U,z,h);if(Array.isArray(q)){var K=Xee(q,2);L=K[0],G=K[1]}else L=q}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:M},jn(G)?Q.createElement("span",{className:"recharts-tooltip-item-name"},G):null,jn(G)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},L),Q.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:P},B)}return null},T=O$({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),k=O$({margin:0},c),E=!dt(x),I=E?x:"",_=wt("recharts-default-tooltip",g),N=wt("recharts-tooltip-label",y);E&&b&&h!==void 0&&h!==null&&(I=b(x,h));var R=S?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",d2({className:_,style:T},R),Q.createElement("p",{className:N,style:k},Q.isValidElement(I)?I:"".concat(I)),$())};function md(t){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},md(t)}function Hg(t,e,n){return e=ite(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ite(t){var e=ate(t,"string");return md(e)=="symbol"?e:e+""}function ate(t,e){if(md(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ph="recharts-tooltip-wrapper",ote={visibility:"hidden"};function ste(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return wt(Ph,Hg(Hg(Hg(Hg({},"".concat(Ph,"-right"),_e(n)&&e&&_e(e.x)&&n>=e.x),"".concat(Ph,"-left"),_e(n)&&e&&_e(e.x)&&n<e.x),"".concat(Ph,"-bottom"),_e(r)&&e&&_e(e.y)&&r>=e.y),"".concat(Ph,"-top"),_e(r)&&e&&_e(e.y)&&r<e.y))}function wL(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,o=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(a&&_e(a[r]))return a[r];var h=n[r]-s-i,d=n[r]+i;if(e[r])return o[r]?h:d;if(o[r]){var p=h,g=l[r];return p<g?Math.max(d,l[r]):Math.max(h,l[r])}var y=d+s,x=l[r]+c;return y>x?Math.max(h,l[r]):Math.max(d,l[r])}function lte(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function ute(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,o=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,c,h,d;return o.height>0&&o.width>0&&n?(h=wL({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=wL({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=lte({translateX:h,translateY:d,useTranslate3d:s})):c=ote,{cssProperties:c,cssClasses:ste({translateX:h,translateY:d,coordinate:n})}}function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(t)}function SL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SL(Object(n),!0).forEach(function(r){m2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fte(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qU(r.key),r)}}function hte(t,e,n){return e&&fte(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dte(t,e,n){return e=zy(e),pte(t,GU()?Reflect.construct(e,n||[],zy(t).constructor):e.apply(t,n))}function pte(t,e){if(e&&(Sc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mte(t)}function mte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GU=function(){return!!t})()}function zy(t){return zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zy(t)}function gte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p2(t,e)}function p2(t,e){return p2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},p2(t,e)}function m2(t,e,n){return e=qU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qU(t){var e=yte(t,"string");return Sc(e)=="symbol"?e:e+""}function yte(t,e){if(Sc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $L=1,vte=function(t){function e(){var n;cte(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=dte(this,e,[].concat(i)),m2(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),m2(n,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,c,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&c!==void 0?c:0}})}}),n}return gte(e,t),hte(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>$L||Math.abs(r.height-this.state.lastBoundingBox.height)>$L)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,h=i.coordinate,d=i.hasPayload,p=i.isAnimationActive,g=i.offset,y=i.position,x=i.reverseDirection,b=i.useTranslate3d,w=i.viewBox,S=i.wrapperStyle,$=ute({allowEscapeViewBox:o,coordinate:h,offsetTopLeft:g,position:y,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:w}),T=$.cssClasses,k=$.cssProperties,E=CL(CL({transition:p&&a?"transform ".concat(s,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},S);return Q.createElement("div",{tabIndex:-1,className:T,style:E,ref:function(_){r.wrapperNode=_}},c)}}])}(Z.PureComponent),bte=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Kl={isSsr:bte()};function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(t)}function TL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TL(Object(n),!0).forEach(function(r){NA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wte(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XU(r.key),r)}}function Ste(t,e,n){return e&&wte(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cte(t,e,n){return e=jy(e),$te(t,HU()?Reflect.construct(e,n||[],jy(t).constructor):e.apply(t,n))}function $te(t,e){if(e&&(Cc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tte(t)}function Tte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HU=function(){return!!t})()}function jy(t){return jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jy(t)}function kte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g2(t,e)}function g2(t,e){return g2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},g2(t,e)}function NA(t,e,n){return e=XU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XU(t){var e=Ate(t,"string");return Cc(e)=="symbol"?e:e+""}function Ate(t,e){if(Cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ete(t){return t.dataKey}function Ite(t,e){return Q.isValidElement(t)?Q.cloneElement(t,e):typeof t=="function"?Q.createElement(t,e):Q.createElement(rte,e)}var Qi=function(t){function e(){return xte(this,e),Cte(this,e,arguments)}return kte(e,t),Ste(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,h=i.coordinate,d=i.filterNull,p=i.isAnimationActive,g=i.offset,y=i.payload,x=i.payloadUniqBy,b=i.position,w=i.reverseDirection,S=i.useTranslate3d,$=i.viewBox,T=i.wrapperStyle,k=y??[];d&&k.length&&(k=FU(y.filter(function(I){return I.value!=null&&(I.hide!==!0||r.props.includeHidden)}),x,Ete));var E=k.length>0;return Q.createElement(vte,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:p,active:a,coordinate:h,hasPayload:E,offset:g,position:b,reverseDirection:w,useTranslate3d:S,viewBox:$,wrapperStyle:T},Ite(c,kL(kL({},this.props),{},{payload:k})))}}])}(Z.PureComponent);NA(Qi,"displayName","Tooltip");NA(Qi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Kl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var N$,AL;function Ote(){if(AL)return N$;AL=1;var t=Ga(),e=function(){return t.Date.now()};return N$=e,N$}var _$,EL;function Nte(){if(EL)return _$;EL=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return _$=e,_$}var R$,IL;function _te(){if(IL)return R$;IL=1;var t=Nte(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return R$=n,R$}var D$,OL;function KU(){if(OL)return D$;OL=1;var t=_te(),e=Is(),n=lf(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(c){if(typeof c=="number")return c;if(n(c))return r;if(e(c)){var h=typeof c.valueOf=="function"?c.valueOf():c;c=e(h)?h+"":h}if(typeof c!="string")return c===0?c:+c;c=t(c);var d=a.test(c);return d||o.test(c)?s(c.slice(2),d?2:8):i.test(c)?r:+c}return D$=l,D$}var M$,NL;function Rte(){if(NL)return M$;NL=1;var t=Is(),e=Ote(),n=KU(),r="Expected a function",i=Math.max,a=Math.min;function o(s,l,c){var h,d,p,g,y,x,b=0,w=!1,S=!1,$=!0;if(typeof s!="function")throw new TypeError(r);l=n(l)||0,t(c)&&(w=!!c.leading,S="maxWait"in c,p=S?i(n(c.maxWait)||0,l):p,$="trailing"in c?!!c.trailing:$);function T(B){var U=h,z=d;return h=d=void 0,b=B,g=s.apply(z,U),g}function k(B){return b=B,y=setTimeout(_,l),w?T(B):g}function E(B){var U=B-x,z=B-b,M=l-U;return S?a(M,p-z):M}function I(B){var U=B-x,z=B-b;return x===void 0||U>=l||U<0||S&&z>=p}function _(){var B=e();if(I(B))return N(B);y=setTimeout(_,E(B))}function N(B){return y=void 0,$&&h?T(B):(h=d=void 0,g)}function R(){y!==void 0&&clearTimeout(y),b=0,h=x=d=y=void 0}function O(){return y===void 0?g:N(e())}function P(){var B=e(),U=I(B);if(h=arguments,d=this,x=B,U){if(y===void 0)return k(x);if(S)return clearTimeout(y),y=setTimeout(_,l),T(x)}return y===void 0&&(y=setTimeout(_,l)),g}return P.cancel=R,P.flush=O,P}return M$=o,M$}var P$,_L;function Dte(){if(_L)return P$;_L=1;var t=Rte(),e=Is(),n="Expected a function";function r(i,a,o){var s=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(s="leading"in o?!!o.leading:s,l="trailing"in o?!!o.trailing:l),t(i,a,{leading:s,maxWait:a,trailing:l})}return P$=r,P$}var Mte=Dte();const YU=Pt(Mte);function gd(t){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(t)}function RL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RL(Object(n),!0).forEach(function(r){Pte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pte(t,e,n){return e=Lte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lte(t){var e=Fte(t,"string");return gd(e)=="symbol"?e:e+""}function Fte(t,e){if(gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bte(t,e){return Vte(t)||Ute(t,e)||jte(t,e)||zte()}function zte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jte(t,e){if(t){if(typeof t=="string")return DL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DL(t,e)}}function DL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ute(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Vte(t){if(Array.isArray(t))return t}var ML=Z.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,o=a===void 0?"100%":a,s=t.height,l=s===void 0?"100%":s,c=t.minWidth,h=c===void 0?0:c,d=t.minHeight,p=t.maxHeight,g=t.children,y=t.debounce,x=y===void 0?0:y,b=t.id,w=t.className,S=t.onResize,$=t.style,T=$===void 0?{}:$,k=Z.useRef(null),E=Z.useRef();E.current=S,Z.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var I=Z.useState({containerWidth:i.width,containerHeight:i.height}),_=Bte(I,2),N=_[0],R=_[1],O=Z.useCallback(function(B,U){R(function(z){var M=Math.round(B),V=Math.round(U);return z.containerWidth===M&&z.containerHeight===V?z:{containerWidth:M,containerHeight:V}})},[]);Z.useEffect(function(){var B=function(H){var L,G=H[0].contentRect,q=G.width,K=G.height;O(q,K),(L=E.current)===null||L===void 0||L.call(E,q,K)};x>0&&(B=YU(B,x,{trailing:!0,leading:!1}));var U=new ResizeObserver(B),z=k.current.getBoundingClientRect(),M=z.width,V=z.height;return O(M,V),U.observe(k.current),function(){U.disconnect()}},[O,x]);var P=Z.useMemo(function(){var B=N.containerWidth,U=N.containerHeight;if(B<0||U<0)return null;xo(yl(o)||yl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),xo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var z=yl(o)?B:o,M=yl(l)?U:l;n&&n>0&&(z?M=z/n:M&&(z=M*n),p&&M>p&&(M=p)),xo(z>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,M,o,l,h,d,n);var V=!Array.isArray(g)&&bo(g.type).endsWith("Chart");return Q.Children.map(g,function(W){return Q.isValidElement(W)?Z.cloneElement(W,Xg({width:z,height:M},V?{style:Xg({height:"100%",width:"100%",maxHeight:M,maxWidth:z},W.props.style)}:{})):W})},[n,g,l,p,d,h,N,o]);return Q.createElement("div",{id:b?"".concat(b):void 0,className:wt("recharts-responsive-container",w),style:Xg(Xg({},T),{},{width:o,height:l,minWidth:h,minHeight:d,maxHeight:p}),ref:k},P)}),ZU=function(e){return null};ZU.displayName="Cell";function yd(t){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yd(t)}function PL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function y2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PL(Object(n),!0).forEach(function(r){Wte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wte(t,e,n){return e=Gte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gte(t){var e=qte(t,"string");return yd(e)=="symbol"?e:e+""}function qte(t,e){if(yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ku={widthCache:{},cacheCount:0},Hte=2e3,Xte={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},LL="recharts_measurement_span";function Kte(t){var e=y2({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var id=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Kl.isSsr)return{width:0,height:0};var r=Kte(n),i=JSON.stringify({text:e,copyStyle:r});if(Ku.widthCache[i])return Ku.widthCache[i];try{var a=document.getElementById(LL);a||(a=document.createElement("span"),a.setAttribute("id",LL),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=y2(y2({},Xte),r);Object.assign(a.style,o),a.textContent="".concat(e);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return Ku.widthCache[i]=l,++Ku.cacheCount>Hte&&(Ku.cacheCount=0,Ku.widthCache={}),l}catch{return{width:0,height:0}}},Yte=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function vd(t){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(t)}function Uy(t,e){return ene(t)||Jte(t,e)||Qte(t,e)||Zte()}function Zte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qte(t,e){if(t){if(typeof t=="string")return FL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FL(t,e)}}function FL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jte(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function ene(t){if(Array.isArray(t))return t}function tne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rne(r.key),r)}}function nne(t,e,n){return e&&BL(t.prototype,e),n&&BL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rne(t){var e=ine(t,"string");return vd(e)=="symbol"?e:e+""}function ine(t,e){if(vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ane=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,one=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,QU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sne=Object.keys(QU),ac="NaN";function lne(t,e){return t*QU[e]}var Kg=function(){function t(e,n){tne(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!ane.test(n)&&(this.num=NaN,this.unit=""),sne.includes(n)&&(this.num=lne(e,n),this.unit="px")}return nne(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=one.exec(n))!==null&&r!==void 0?r:[],a=Uy(i,3),o=a[1],s=a[2];return new t(parseFloat(o),s??"")}}])}();function JU(t){if(t.includes(ac))return ac;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=zL.exec(e))!==null&&n!==void 0?n:[],i=Uy(r,4),a=i[1],o=i[2],s=i[3],l=Kg.parse(a??""),c=Kg.parse(s??""),h=o==="*"?l.multiply(c):l.divide(c);if(h.isNaN())return ac;e=e.replace(zL,h.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,p=(d=jL.exec(e))!==null&&d!==void 0?d:[],g=Uy(p,4),y=g[1],x=g[2],b=g[3],w=Kg.parse(y??""),S=Kg.parse(b??""),$=x==="+"?w.add(S):w.subtract(S);if($.isNaN())return ac;e=e.replace(jL,$.toString())}return e}var UL=/\(([^()]*)\)/;function une(t){for(var e=t;e.includes("(");){var n=UL.exec(e),r=Uy(n,2),i=r[1];e=e.replace(UL,JU(i))}return e}function cne(t){var e=t.replace(/\s+/g,"");return e=une(e),e=JU(e),e}function fne(t){try{return cne(t)}catch{return ac}}function L$(t){var e=fne(t.slice(5,-1));return e===ac?"":e}var hne=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],dne=["dx","dy","angle","className","breakAll"];function v2(){return v2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v2.apply(this,arguments)}function VL(t,e){if(t==null)return{};var n=pne(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function WL(t,e){return vne(t)||yne(t,e)||gne(t,e)||mne()}function mne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gne(t,e){if(t){if(typeof t=="string")return GL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GL(t,e)}}function GL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yne(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function vne(t){if(Array.isArray(t))return t}var eV=/[ \f\n\r\t\v\u2028\u2029]+/,tV=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];dt(n)||(r?a=n.toString().split(""):a=n.toString().split(eV));var o=a.map(function(l){return{word:l,width:id(l,i).width}}),s=r?0:id(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},bne=function(e,n,r,i,a){var o=e.maxLines,s=e.children,l=e.style,c=e.breakAll,h=_e(o),d=s,p=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(M,V){var W=V.word,H=V.width,L=M[M.length-1];if(L&&(i==null||a||L.width+H+r<Number(i)))L.words.push(W),L.width+=H+r;else{var G={words:[W],width:H};M.push(G)}return M},[])},g=p(n),y=function(z){return z.reduce(function(M,V){return M.width>V.width?M:V})};if(!h)return g;for(var x="…",b=function(z){var M=d.slice(0,z),V=tV({breakAll:c,style:l,children:M+x}).wordsWithComputedWidth,W=p(V),H=W.length>o||y(W).width>Number(i);return[H,W]},w=0,S=d.length-1,$=0,T;w<=S&&$<=d.length-1;){var k=Math.floor((w+S)/2),E=k-1,I=b(E),_=WL(I,2),N=_[0],R=_[1],O=b(k),P=WL(O,1),B=P[0];if(!N&&!B&&(w=k+1),N&&B&&(S=k-1),!N&&B){T=R;break}$++}return T||g},qL=function(e){var n=dt(e)?[]:e.toString().split(eV);return[{words:n}]},xne=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,s=e.maxLines;if((n||r)&&!Kl.isSsr){var l,c,h=tV({breakAll:o,children:i,style:a});if(h){var d=h.wordsWithComputedWidth,p=h.spaceWidth;l=d,c=p}else return qL(i);return bne({breakAll:o,children:i,maxLines:s,style:a},l,c,n,r)}return qL(i)},HL="#808080",Vy=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.lineHeight,s=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,h=e.scaleToFit,d=h===void 0?!1:h,p=e.textAnchor,g=p===void 0?"start":p,y=e.verticalAnchor,x=y===void 0?"end":y,b=e.fill,w=b===void 0?HL:b,S=VL(e,hne),$=Z.useMemo(function(){return xne({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:d,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,d,S.style,S.width]),T=S.dx,k=S.dy,E=S.angle,I=S.className,_=S.breakAll,N=VL(S,dne);if(!jn(r)||!jn(a))return null;var R=r+(_e(T)?T:0),O=a+(_e(k)?k:0),P;switch(x){case"start":P=L$("calc(".concat(c,")"));break;case"middle":P=L$("calc(".concat(($.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:P=L$("calc(".concat($.length-1," * -").concat(s,")"));break}var B=[];if(d){var U=$[0].width,z=S.width;B.push("scale(".concat((_e(z)?z/U:1)/U,")"))}return E&&B.push("rotate(".concat(E,", ").concat(R,", ").concat(O,")")),B.length&&(N.transform=B.join(" ")),Q.createElement("text",v2({},at(N,!0),{x:R,y:O,className:wt("recharts-text",I),textAnchor:g,fill:w.includes("url")?HL:w}),$.map(function(M,V){var W=M.words.join(_?"":" ");return Q.createElement("tspan",{x:R,dy:V===0?P:s,key:"".concat(W,"-").concat(V)},W)}))};function ys(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wne(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _A(t){let e,n,r;t.length!==2?(e=ys,n=(s,l)=>ys(t(s),l),r=(s,l)=>t(s)-l):(e=t===ys||t===wne?t:Sne,n=t,r=t);function i(s,l,c=0,h=s.length){if(c<h){if(e(l,l)!==0)return h;do{const d=c+h>>>1;n(s[d],l)<0?c=d+1:h=d}while(c<h)}return c}function a(s,l,c=0,h=s.length){if(c<h){if(e(l,l)!==0)return h;do{const d=c+h>>>1;n(s[d],l)<=0?c=d+1:h=d}while(c<h)}return c}function o(s,l,c=0,h=s.length){const d=i(s,l,c,h-1);return d>c&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:o,right:a}}function Sne(){return 0}function nV(t){return t===null?NaN:+t}function*Cne(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const $ne=_A(ys),up=$ne.right;_A(nV).center;class XL extends Map{constructor(e,n=Ane){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(KL(this,e))}has(e){return super.has(KL(this,e))}set(e,n){return super.set(Tne(this,e),n)}delete(e){return super.delete(kne(this,e))}}function KL({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Tne({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function kne({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ane(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ene(t=ys){if(t===ys)return rV;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function rV(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Ine=Math.sqrt(50),One=Math.sqrt(10),Nne=Math.sqrt(2);function Wy(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Ine?10:a>=One?5:a>=Nne?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?Wy(t,e,n*2):[s,l,c]}function b2(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?Wy(e,t,n):Wy(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function x2(t,e,n){return e=+e,t=+t,n=+n,Wy(t,e,n)[2]}function w2(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?x2(e,t,n):x2(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function YL(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function ZL(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function iV(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?rV:Ene(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,h=Math.log(l),d=.5*Math.exp(2*h/3),p=.5*Math.sqrt(h*d*(l-d)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*d/l+p)),y=Math.min(r,Math.floor(e+(l-c)*d/l+p));iV(t,e,g,y,i)}const a=t[e];let o=n,s=r;for(Lh(t,n,e),i(t[r],a)>0&&Lh(t,n,r);o<s;){for(Lh(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?Lh(t,n,s):(++s,Lh(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Lh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function _ne(t,e,n){if(t=Float64Array.from(Cne(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return ZL(t);if(e>=1)return YL(t);var r,i=(r-1)*e,a=Math.floor(i),o=YL(iV(t,a).subarray(0,a+1)),s=ZL(t.subarray(a+1));return o+(s-o)*(i-a)}}function Rne(t,e,n=nV){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function Dne(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function ji(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Do(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const S2=Symbol("implicit");function RA(){var t=new XL,e=[],n=[],r=S2;function i(a){let o=t.get(a);if(o===void 0){if(r!==S2)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new XL;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return RA(e,n).unknown(r)},ji.apply(i,arguments),i}function bd(){var t=RA().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,c=0,h=.5;delete t.unknown;function d(){var p=e().length,g=i<r,y=g?i:r,x=g?r:i;a=(x-y)/Math.max(1,p-l+c*2),s&&(a=Math.floor(a)),y+=(x-y-a*(p-l))*h,o=a*(1-l),s&&(y=Math.round(y),o=Math.round(o));var b=Dne(p).map(function(w){return y+a*w});return n(g?b.reverse():b)}return t.domain=function(p){return arguments.length?(e(p),d()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,s=!0,d()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(p){return arguments.length?(s=!!p,d()):s},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),d()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,d()):c},t.align=function(p){return arguments.length?(h=Math.max(0,Math.min(1,p)),d()):h},t.copy=function(){return bd(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(h)},ji.apply(d(),arguments)}function aV(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return aV(e())},t}function ad(){return aV(bd.apply(null,arguments).paddingInner(1))}function DA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function oV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function cp(){}var xd=.7,Gy=1/xd,cc="\\s*([+-]?\\d+)\\s*",wd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mne=/^#([0-9a-f]{3,8})$/,Pne=new RegExp(`^rgb\\(${cc},${cc},${cc}\\)$`),Lne=new RegExp(`^rgb\\(${Oa},${Oa},${Oa}\\)$`),Fne=new RegExp(`^rgba\\(${cc},${cc},${cc},${wd}\\)$`),Bne=new RegExp(`^rgba\\(${Oa},${Oa},${Oa},${wd}\\)$`),zne=new RegExp(`^hsl\\(${wd},${Oa},${Oa}\\)$`),jne=new RegExp(`^hsla\\(${wd},${Oa},${Oa},${wd}\\)$`),QL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};DA(cp,Sd,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:JL,formatHex:JL,formatHex8:Une,formatHsl:Vne,formatRgb:eF,toString:eF});function JL(){return this.rgb().formatHex()}function Une(){return this.rgb().formatHex8()}function Vne(){return sV(this).formatHsl()}function eF(){return this.rgb().formatRgb()}function Sd(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Mne.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?tF(e):n===3?new Kr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Yg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Yg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Pne.exec(t))?new Kr(e[1],e[2],e[3],1):(e=Lne.exec(t))?new Kr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Fne.exec(t))?Yg(e[1],e[2],e[3],e[4]):(e=Bne.exec(t))?Yg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=zne.exec(t))?iF(e[1],e[2]/100,e[3]/100,1):(e=jne.exec(t))?iF(e[1],e[2]/100,e[3]/100,e[4]):QL.hasOwnProperty(t)?tF(QL[t]):t==="transparent"?new Kr(NaN,NaN,NaN,0):null}function tF(t){return new Kr(t>>16&255,t>>8&255,t&255,1)}function Yg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Kr(t,e,n,r)}function Wne(t){return t instanceof cp||(t=Sd(t)),t?(t=t.rgb(),new Kr(t.r,t.g,t.b,t.opacity)):new Kr}function C2(t,e,n,r){return arguments.length===1?Wne(t):new Kr(t,e,n,r??1)}function Kr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}DA(Kr,C2,oV(cp,{brighter(t){return t=t==null?Gy:Math.pow(Gy,t),new Kr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?xd:Math.pow(xd,t),new Kr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Kr($l(this.r),$l(this.g),$l(this.b),qy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nF,formatHex:nF,formatHex8:Gne,formatRgb:rF,toString:rF}));function nF(){return`#${vl(this.r)}${vl(this.g)}${vl(this.b)}`}function Gne(){return`#${vl(this.r)}${vl(this.g)}${vl(this.b)}${vl((isNaN(this.opacity)?1:this.opacity)*255)}`}function rF(){const t=qy(this.opacity);return`${t===1?"rgb(":"rgba("}${$l(this.r)}, ${$l(this.g)}, ${$l(this.b)}${t===1?")":`, ${t})`}`}function qy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $l(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vl(t){return t=$l(t),(t<16?"0":"")+t.toString(16)}function iF(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ra(t,e,n,r)}function sV(t){if(t instanceof ra)return new ra(t.h,t.s,t.l,t.opacity);if(t instanceof cp||(t=Sd(t)),!t)return new ra;if(t instanceof ra)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new ra(o,s,l,t.opacity)}function qne(t,e,n,r){return arguments.length===1?sV(t):new ra(t,e,n,r??1)}function ra(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}DA(ra,qne,oV(cp,{brighter(t){return t=t==null?Gy:Math.pow(Gy,t),new ra(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?xd:Math.pow(xd,t),new ra(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Kr(F$(t>=240?t-240:t+120,i,r),F$(t,i,r),F$(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ra(aF(this.h),Zg(this.s),Zg(this.l),qy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qy(this.opacity);return`${t===1?"hsl(":"hsla("}${aF(this.h)}, ${Zg(this.s)*100}%, ${Zg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function aF(t){return t=(t||0)%360,t<0?t+360:t}function Zg(t){return Math.max(0,Math.min(1,t||0))}function F$(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const MA=t=>()=>t;function Hne(t,e){return function(n){return t+n*e}}function Xne(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Kne(t){return(t=+t)==1?lV:function(e,n){return n-e?Xne(e,n,t):MA(isNaN(e)?n:e)}}function lV(t,e){var n=e-t;return n?Hne(t,n):MA(isNaN(t)?e:t)}const oF=function t(e){var n=Kne(e);function r(i,a){var o=n((i=C2(i)).r,(a=C2(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),c=lV(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=s(h),i.b=l(h),i.opacity=c(h),i+""}}return r.gamma=t,r}(1);function Yne(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Zne(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Qne(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=df(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Jne(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Hy(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ere(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=df(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var $2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,B$=new RegExp($2.source,"g");function tre(t){return function(){return t}}function nre(t){return function(e){return t(e)+""}}function rre(t,e){var n=$2.lastIndex=B$.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=$2.exec(t))&&(i=B$.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Hy(r,i)})),n=B$.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?nre(l[0].x):tre(e):(e=l.length,function(c){for(var h=0,d;h<e;++h)s[(d=l[h]).i]=d.x(c);return s.join("")})}function df(t,e){var n=typeof e,r;return e==null||n==="boolean"?MA(e):(n==="number"?Hy:n==="string"?(r=Sd(e))?(e=r,oF):rre:e instanceof Sd?oF:e instanceof Date?Jne:Zne(e)?Yne:Array.isArray(e)?Qne:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ere:Hy)(t,e)}function PA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function ire(t,e){e===void 0&&(e=t,t=df);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function are(t){return function(){return t}}function Xy(t){return+t}var sF=[0,1];function Dr(t){return t}function T2(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:are(isNaN(e)?NaN:.5)}function ore(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function sre(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=T2(i,r),a=n(o,a)):(r=T2(r,i),a=n(a,o)),function(s){return a(r(s))}}function lre(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=T2(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=up(t,s,1,r)-1;return a[l](i[l](s))}}function fp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gb(){var t=sF,e=sF,n=df,r,i,a,o=Dr,s,l,c;function h(){var p=Math.min(t.length,e.length);return o!==Dr&&(o=ore(t[0],t[p-1])),s=p>2?lre:sre,l=c=null,d}function d(p){return p==null||isNaN(p=+p)?a:(l||(l=s(t.map(r),e,n)))(r(o(p)))}return d.invert=function(p){return o(i((c||(c=s(e,t.map(r),Hy)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,Xy),h()):t.slice()},d.range=function(p){return arguments.length?(e=Array.from(p),h()):e.slice()},d.rangeRound=function(p){return e=Array.from(p),n=PA,h()},d.clamp=function(p){return arguments.length?(o=p?!0:Dr,h()):o!==Dr},d.interpolate=function(p){return arguments.length?(n=p,h()):n},d.unknown=function(p){return arguments.length?(a=p,d):a},function(p,g){return r=p,i=g,h()}}function LA(){return gb()(Dr,Dr)}function ure(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ky(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function $c(t){return t=Ky(Math.abs(t)),t?t[1]:NaN}function cre(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function fre(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var hre=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cd(t){if(!(e=hre.exec(t)))throw new Error("invalid format: "+t);var e;return new FA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Cd.prototype=FA.prototype;function FA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}FA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dre(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var uV;function pre(t,e){var n=Ky(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(uV=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ky(t,Math.max(0,e+a-1))[0]}function lF(t,e){var n=Ky(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const uF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ure,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>lF(t*100,e),r:lF,s:pre,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function cF(t){return t}var fF=Array.prototype.map,hF=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function mre(t){var e=t.grouping===void 0||t.thousands===void 0?cF:cre(fF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?cF:fre(fF.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Cd(d);var p=d.fill,g=d.align,y=d.sign,x=d.symbol,b=d.zero,w=d.width,S=d.comma,$=d.precision,T=d.trim,k=d.type;k==="n"?(S=!0,k="g"):uF[k]||($===void 0&&($=12),T=!0,k="g"),(b||p==="0"&&g==="=")&&(b=!0,p="0",g="=");var E=x==="$"?n:x==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",I=x==="$"?r:/[%p]/.test(k)?o:"",_=uF[k],N=/[defgprs%]/.test(k);$=$===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function R(O){var P=E,B=I,U,z,M;if(k==="c")B=_(O)+B,O="";else{O=+O;var V=O<0||1/O<0;if(O=isNaN(O)?l:_(Math.abs(O),$),T&&(O=dre(O)),V&&+O==0&&y!=="+"&&(V=!1),P=(V?y==="("?y:s:y==="-"||y==="("?"":y)+P,B=(k==="s"?hF[8+uV/3]:"")+B+(V&&y==="("?")":""),N){for(U=-1,z=O.length;++U<z;)if(M=O.charCodeAt(U),48>M||M>57){B=(M===46?i+O.slice(U+1):O.slice(U))+B,O=O.slice(0,U);break}}}S&&!b&&(O=e(O,1/0));var W=P.length+O.length+B.length,H=W<w?new Array(w-W+1).join(p):"";switch(S&&b&&(O=e(H+O,H.length?w-B.length:1/0),H=""),g){case"<":O=P+O+B+H;break;case"=":O=P+H+O+B;break;case"^":O=H.slice(0,W=H.length>>1)+P+O+B+H.slice(W);break;default:O=H+P+O+B;break}return a(O)}return R.toString=function(){return d+""},R}function h(d,p){var g=c((d=Cd(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor($c(p)/3)))*3,x=Math.pow(10,-y),b=hF[8+y/3];return function(w){return g(x*w)+b}}return{format:c,formatPrefix:h}}var Qg,BA,cV;gre({thousands:",",grouping:[3],currency:["$",""]});function gre(t){return Qg=mre(t),BA=Qg.format,cV=Qg.formatPrefix,Qg}function yre(t){return Math.max(0,-$c(Math.abs(t)))}function vre(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($c(e)/3)))*3-$c(Math.abs(t)))}function bre(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$c(e)-$c(t))+1}function fV(t,e,n,r){var i=w2(t,e,n),a;switch(r=Cd(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=vre(i,o))&&(r.precision=a),cV(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=bre(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=yre(i))&&(r.precision=a-(r.type==="%")*2);break}}return BA(r)}function Ns(t){var e=t.domain;return t.ticks=function(n){var r=e();return b2(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return fV(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,c,h=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);h-- >0;){if(c=x2(o,s,n),c===l)return r[i]=o,r[a]=s,e(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function Yy(){var t=LA();return t.copy=function(){return fp(t,Yy())},ji.apply(t,arguments),Ns(t)}function hV(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Xy),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return hV(t).unknown(e)},t=arguments.length?Array.from(t,Xy):[0,1],Ns(n)}function dV(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function dF(t){return Math.log(t)}function pF(t){return Math.exp(t)}function xre(t){return-Math.log(-t)}function wre(t){return-Math.exp(-t)}function Sre(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Cre(t){return t===10?Sre:t===Math.E?Math.exp:e=>Math.pow(t,e)}function $re(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function mF(t){return(e,n)=>-t(-e,n)}function zA(t){const e=t(dF,pF),n=e.domain;let r=10,i,a;function o(){return i=$re(r),a=Cre(r),n()[0]<0?(i=mF(i),a=mF(a),t(xre,wre)):t(dF,pF),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const l=n();let c=l[0],h=l[l.length-1];const d=h<c;d&&([c,h]=[h,c]);let p=i(c),g=i(h),y,x;const b=s==null?10:+s;let w=[];if(!(r%1)&&g-p<b){if(p=Math.floor(p),g=Math.ceil(g),c>0){for(;p<=g;++p)for(y=1;y<r;++y)if(x=p<0?y/a(-p):y*a(p),!(x<c)){if(x>h)break;w.push(x)}}else for(;p<=g;++p)for(y=r-1;y>=1;--y)if(x=p>0?y/a(-p):y*a(p),!(x<c)){if(x>h)break;w.push(x)}w.length*2<b&&(w=b2(c,h,b))}else w=b2(p,g,Math.min(g-p,b)).map(a);return d?w.reverse():w},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Cd(l)).precision==null&&(l.trim=!0),l=BA(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return h=>{let d=h/a(Math.round(i(h)));return d*r<r-.5&&(d*=r),d<=c?l(h):""}},e.nice=()=>n(dV(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function pV(){const t=zA(gb()).domain([1,10]);return t.copy=()=>fp(t,pV()).base(t.base()),ji.apply(t,arguments),t}function gF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function yF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function jA(t){var e=1,n=t(gF(e),yF(e));return n.constant=function(r){return arguments.length?t(gF(e=+r),yF(e)):e},Ns(n)}function mV(){var t=jA(gb());return t.copy=function(){return fp(t,mV()).constant(t.constant())},ji.apply(t,arguments)}function vF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Tre(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function kre(t){return t<0?-t*t:t*t}function UA(t){var e=t(Dr,Dr),n=1;function r(){return n===1?t(Dr,Dr):n===.5?t(Tre,kre):t(vF(n),vF(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ns(e)}function VA(){var t=UA(gb());return t.copy=function(){return fp(t,VA()).exponent(t.exponent())},ji.apply(t,arguments),t}function Are(){return VA.apply(null,arguments).exponent(.5)}function bF(t){return Math.sign(t)*t*t}function Ere(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function gV(){var t=LA(),e=[0,1],n=!1,r;function i(a){var o=Ere(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(bF(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Xy)).map(bF)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return gV(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ji.apply(i,arguments),Ns(i)}function yV(){var t=[],e=[],n=[],r;function i(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=Rne(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[up(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ys),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return yV().domain(t).range(e).unknown(r)},ji.apply(a,arguments)}function vV(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[up(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return vV().domain([t,e]).range(i).unknown(a)},ji.apply(Ns(o),arguments)}function bV(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[up(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return bV().domain(t).range(e).unknown(n)},ji.apply(i,arguments)}const z$=new Date,j$=new Date;function Vn(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),e(a,s),t(a);while(c<a&&a<o);return l},i.filter=a=>Vn(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(z$.setTime(+a),j$.setTime(+o),t(z$),t(j$),Math.floor(n(z$,j$))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Zy=Vn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Zy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Vn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Zy);Zy.range;const po=1e3,Ri=po*60,mo=Ri*60,To=mo*24,WA=To*7,xF=To*30,U$=To*365,bl=Vn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*po)},(t,e)=>(e-t)/po,t=>t.getUTCSeconds());bl.range;const GA=Vn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*po)},(t,e)=>{t.setTime(+t+e*Ri)},(t,e)=>(e-t)/Ri,t=>t.getMinutes());GA.range;const qA=Vn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ri)},(t,e)=>(e-t)/Ri,t=>t.getUTCMinutes());qA.range;const HA=Vn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*po-t.getMinutes()*Ri)},(t,e)=>{t.setTime(+t+e*mo)},(t,e)=>(e-t)/mo,t=>t.getHours());HA.range;const XA=Vn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*mo)},(t,e)=>(e-t)/mo,t=>t.getUTCHours());XA.range;const hp=Vn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ri)/To,t=>t.getDate()-1);hp.range;const yb=Vn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/To,t=>t.getUTCDate()-1);yb.range;const xV=Vn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/To,t=>Math.floor(t/To));xV.range;function Yl(t){return Vn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ri)/WA)}const vb=Yl(0),Qy=Yl(1),Ire=Yl(2),Ore=Yl(3),Tc=Yl(4),Nre=Yl(5),_re=Yl(6);vb.range;Qy.range;Ire.range;Ore.range;Tc.range;Nre.range;_re.range;function Zl(t){return Vn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/WA)}const bb=Zl(0),Jy=Zl(1),Rre=Zl(2),Dre=Zl(3),kc=Zl(4),Mre=Zl(5),Pre=Zl(6);bb.range;Jy.range;Rre.range;Dre.range;kc.range;Mre.range;Pre.range;const KA=Vn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());KA.range;const YA=Vn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());YA.range;const ko=Vn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ko.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ko.range;const Ao=Vn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ao.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ao.range;function wV(t,e,n,r,i,a){const o=[[bl,1,po],[bl,5,5*po],[bl,15,15*po],[bl,30,30*po],[a,1,Ri],[a,5,5*Ri],[a,15,15*Ri],[a,30,30*Ri],[i,1,mo],[i,3,3*mo],[i,6,6*mo],[i,12,12*mo],[r,1,To],[r,2,2*To],[n,1,WA],[e,1,xF],[e,3,3*xF],[t,1,U$]];function s(c,h,d){const p=h<c;p&&([c,h]=[h,c]);const g=d&&typeof d.range=="function"?d:l(c,h,d),y=g?g.range(c,+h+1):[];return p?y.reverse():y}function l(c,h,d){const p=Math.abs(h-c)/d,g=_A(([,,b])=>b).right(o,p);if(g===o.length)return t.every(w2(c/U$,h/U$,d));if(g===0)return Zy.every(Math.max(w2(c,h,d),1));const[y,x]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return y.every(x)}return[s,l]}const[Lre,Fre]=wV(Ao,YA,bb,xV,XA,qA),[Bre,zre]=wV(ko,KA,vb,hp,HA,GA);function V$(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function W$(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Fh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function jre(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=Bh(i),h=zh(i),d=Bh(a),p=zh(a),g=Bh(o),y=zh(o),x=Bh(s),b=zh(s),w=Bh(l),S=zh(l),$={a:V,A:W,b:H,B:L,c:null,d:kF,e:kF,f:cie,g:xie,G:Sie,H:sie,I:lie,j:uie,L:SV,m:fie,M:hie,p:G,q,Q:IF,s:OF,S:die,u:pie,U:mie,V:gie,w:yie,W:vie,x:null,X:null,y:bie,Y:wie,Z:Cie,"%":EF},T={a:K,A:oe,b:pe,B:ge,c:null,d:AF,e:AF,f:Aie,g:Lie,G:Bie,H:$ie,I:Tie,j:kie,L:$V,m:Eie,M:Iie,p:Re,q:Ee,Q:IF,s:OF,S:Oie,u:Nie,U:_ie,V:Rie,w:Die,W:Mie,x:null,X:null,y:Pie,Y:Fie,Z:zie,"%":EF},k={a:R,A:O,b:P,B,c:U,d:$F,e:$F,f:rie,g:CF,G:SF,H:TF,I:TF,j:Jre,L:nie,m:Qre,M:eie,p:N,q:Zre,Q:aie,s:oie,S:tie,u:qre,U:Hre,V:Xre,w:Gre,W:Kre,x:z,X:M,y:CF,Y:SF,Z:Yre,"%":iie};$.x=E(n,$),$.X=E(r,$),$.c=E(e,$),T.x=E(n,T),T.X=E(r,T),T.c=E(e,T);function E(ye,Ie){return function(Oe){var be=[],Ge=-1,Ue=0,xe=ye.length,ke,Ne,Le;for(Oe instanceof Date||(Oe=new Date(+Oe));++Ge<xe;)ye.charCodeAt(Ge)===37&&(be.push(ye.slice(Ue,Ge)),(Ne=wF[ke=ye.charAt(++Ge)])!=null?ke=ye.charAt(++Ge):Ne=ke==="e"?" ":"0",(Le=Ie[ke])&&(ke=Le(Oe,Ne)),be.push(ke),Ue=Ge+1);return be.push(ye.slice(Ue,Ge)),be.join("")}}function I(ye,Ie){return function(Oe){var be=Fh(1900,void 0,1),Ge=_(be,ye,Oe+="",0),Ue,xe;if(Ge!=Oe.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(Ie&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(Ue=W$(Fh(be.y,0,1)),xe=Ue.getUTCDay(),Ue=xe>4||xe===0?Jy.ceil(Ue):Jy(Ue),Ue=yb.offset(Ue,(be.V-1)*7),be.y=Ue.getUTCFullYear(),be.m=Ue.getUTCMonth(),be.d=Ue.getUTCDate()+(be.w+6)%7):(Ue=V$(Fh(be.y,0,1)),xe=Ue.getDay(),Ue=xe>4||xe===0?Qy.ceil(Ue):Qy(Ue),Ue=hp.offset(Ue,(be.V-1)*7),be.y=Ue.getFullYear(),be.m=Ue.getMonth(),be.d=Ue.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),xe="Z"in be?W$(Fh(be.y,0,1)).getUTCDay():V$(Fh(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(xe+5)%7:be.w+be.U*7-(xe+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,W$(be)):V$(be)}}function _(ye,Ie,Oe,be){for(var Ge=0,Ue=Ie.length,xe=Oe.length,ke,Ne;Ge<Ue;){if(be>=xe)return-1;if(ke=Ie.charCodeAt(Ge++),ke===37){if(ke=Ie.charAt(Ge++),Ne=k[ke in wF?Ie.charAt(Ge++):ke],!Ne||(be=Ne(ye,Oe,be))<0)return-1}else if(ke!=Oe.charCodeAt(be++))return-1}return be}function N(ye,Ie,Oe){var be=c.exec(Ie.slice(Oe));return be?(ye.p=h.get(be[0].toLowerCase()),Oe+be[0].length):-1}function R(ye,Ie,Oe){var be=g.exec(Ie.slice(Oe));return be?(ye.w=y.get(be[0].toLowerCase()),Oe+be[0].length):-1}function O(ye,Ie,Oe){var be=d.exec(Ie.slice(Oe));return be?(ye.w=p.get(be[0].toLowerCase()),Oe+be[0].length):-1}function P(ye,Ie,Oe){var be=w.exec(Ie.slice(Oe));return be?(ye.m=S.get(be[0].toLowerCase()),Oe+be[0].length):-1}function B(ye,Ie,Oe){var be=x.exec(Ie.slice(Oe));return be?(ye.m=b.get(be[0].toLowerCase()),Oe+be[0].length):-1}function U(ye,Ie,Oe){return _(ye,e,Ie,Oe)}function z(ye,Ie,Oe){return _(ye,n,Ie,Oe)}function M(ye,Ie,Oe){return _(ye,r,Ie,Oe)}function V(ye){return o[ye.getDay()]}function W(ye){return a[ye.getDay()]}function H(ye){return l[ye.getMonth()]}function L(ye){return s[ye.getMonth()]}function G(ye){return i[+(ye.getHours()>=12)]}function q(ye){return 1+~~(ye.getMonth()/3)}function K(ye){return o[ye.getUTCDay()]}function oe(ye){return a[ye.getUTCDay()]}function pe(ye){return l[ye.getUTCMonth()]}function ge(ye){return s[ye.getUTCMonth()]}function Re(ye){return i[+(ye.getUTCHours()>=12)]}function Ee(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var Ie=E(ye+="",$);return Ie.toString=function(){return ye},Ie},parse:function(ye){var Ie=I(ye+="",!1);return Ie.toString=function(){return ye},Ie},utcFormat:function(ye){var Ie=E(ye+="",T);return Ie.toString=function(){return ye},Ie},utcParse:function(ye){var Ie=I(ye+="",!0);return Ie.toString=function(){return ye},Ie}}}var wF={"-":"",_:" ",0:"0"},Jn=/^\s*\d+/,Ure=/^%/,Vre=/[\\^$*+?|[\]().{}]/g;function kt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Wre(t){return t.replace(Vre,"\\$&")}function Bh(t){return new RegExp("^(?:"+t.map(Wre).join("|")+")","i")}function zh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Gre(t,e,n){var r=Jn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function qre(t,e,n){var r=Jn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Hre(t,e,n){var r=Jn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Xre(t,e,n){var r=Jn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Kre(t,e,n){var r=Jn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function SF(t,e,n){var r=Jn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function CF(t,e,n){var r=Jn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Yre(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Zre(t,e,n){var r=Jn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Qre(t,e,n){var r=Jn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function $F(t,e,n){var r=Jn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Jre(t,e,n){var r=Jn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function TF(t,e,n){var r=Jn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function eie(t,e,n){var r=Jn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function tie(t,e,n){var r=Jn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function nie(t,e,n){var r=Jn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function rie(t,e,n){var r=Jn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function iie(t,e,n){var r=Ure.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function aie(t,e,n){var r=Jn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function oie(t,e,n){var r=Jn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function kF(t,e){return kt(t.getDate(),e,2)}function sie(t,e){return kt(t.getHours(),e,2)}function lie(t,e){return kt(t.getHours()%12||12,e,2)}function uie(t,e){return kt(1+hp.count(ko(t),t),e,3)}function SV(t,e){return kt(t.getMilliseconds(),e,3)}function cie(t,e){return SV(t,e)+"000"}function fie(t,e){return kt(t.getMonth()+1,e,2)}function hie(t,e){return kt(t.getMinutes(),e,2)}function die(t,e){return kt(t.getSeconds(),e,2)}function pie(t){var e=t.getDay();return e===0?7:e}function mie(t,e){return kt(vb.count(ko(t)-1,t),e,2)}function CV(t){var e=t.getDay();return e>=4||e===0?Tc(t):Tc.ceil(t)}function gie(t,e){return t=CV(t),kt(Tc.count(ko(t),t)+(ko(t).getDay()===4),e,2)}function yie(t){return t.getDay()}function vie(t,e){return kt(Qy.count(ko(t)-1,t),e,2)}function bie(t,e){return kt(t.getFullYear()%100,e,2)}function xie(t,e){return t=CV(t),kt(t.getFullYear()%100,e,2)}function wie(t,e){return kt(t.getFullYear()%1e4,e,4)}function Sie(t,e){var n=t.getDay();return t=n>=4||n===0?Tc(t):Tc.ceil(t),kt(t.getFullYear()%1e4,e,4)}function Cie(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+kt(e/60|0,"0",2)+kt(e%60,"0",2)}function AF(t,e){return kt(t.getUTCDate(),e,2)}function $ie(t,e){return kt(t.getUTCHours(),e,2)}function Tie(t,e){return kt(t.getUTCHours()%12||12,e,2)}function kie(t,e){return kt(1+yb.count(Ao(t),t),e,3)}function $V(t,e){return kt(t.getUTCMilliseconds(),e,3)}function Aie(t,e){return $V(t,e)+"000"}function Eie(t,e){return kt(t.getUTCMonth()+1,e,2)}function Iie(t,e){return kt(t.getUTCMinutes(),e,2)}function Oie(t,e){return kt(t.getUTCSeconds(),e,2)}function Nie(t){var e=t.getUTCDay();return e===0?7:e}function _ie(t,e){return kt(bb.count(Ao(t)-1,t),e,2)}function TV(t){var e=t.getUTCDay();return e>=4||e===0?kc(t):kc.ceil(t)}function Rie(t,e){return t=TV(t),kt(kc.count(Ao(t),t)+(Ao(t).getUTCDay()===4),e,2)}function Die(t){return t.getUTCDay()}function Mie(t,e){return kt(Jy.count(Ao(t)-1,t),e,2)}function Pie(t,e){return kt(t.getUTCFullYear()%100,e,2)}function Lie(t,e){return t=TV(t),kt(t.getUTCFullYear()%100,e,2)}function Fie(t,e){return kt(t.getUTCFullYear()%1e4,e,4)}function Bie(t,e){var n=t.getUTCDay();return t=n>=4||n===0?kc(t):kc.ceil(t),kt(t.getUTCFullYear()%1e4,e,4)}function zie(){return"+0000"}function EF(){return"%"}function IF(t){return+t}function OF(t){return Math.floor(+t/1e3)}var Yu,kV,AV;jie({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jie(t){return Yu=jre(t),kV=Yu.format,Yu.parse,AV=Yu.utcFormat,Yu.utcParse,Yu}function Uie(t){return new Date(t)}function Vie(t){return t instanceof Date?+t:+new Date(+t)}function ZA(t,e,n,r,i,a,o,s,l,c){var h=LA(),d=h.invert,p=h.domain,g=c(".%L"),y=c(":%S"),x=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),S=c("%b %d"),$=c("%B"),T=c("%Y");function k(E){return(l(E)<E?g:s(E)<E?y:o(E)<E?x:a(E)<E?b:r(E)<E?i(E)<E?w:S:n(E)<E?$:T)(E)}return h.invert=function(E){return new Date(d(E))},h.domain=function(E){return arguments.length?p(Array.from(E,Vie)):p().map(Uie)},h.ticks=function(E){var I=p();return t(I[0],I[I.length-1],E??10)},h.tickFormat=function(E,I){return I==null?k:c(I)},h.nice=function(E){var I=p();return(!E||typeof E.range!="function")&&(E=e(I[0],I[I.length-1],E??10)),E?p(dV(I,E)):h},h.copy=function(){return fp(h,ZA(t,e,n,r,i,a,o,s,l,c))},h}function Wie(){return ji.apply(ZA(Bre,zre,ko,KA,vb,hp,HA,GA,bl,kV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Gie(){return ji.apply(ZA(Lre,Fre,Ao,YA,bb,yb,XA,qA,bl,AV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xb(){var t=0,e=1,n,r,i,a,o=Dr,s=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(a(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(s=!!d,c):s},c.interpolator=function(d){return arguments.length?(o=d,c):o};function h(d){return function(p){var g,y;return arguments.length?([g,y]=p,o=d(g,y),c):[o(0),o(1)]}}return c.range=h(df),c.rangeRound=h(PA),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return a=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function _s(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function EV(){var t=Ns(xb()(Dr));return t.copy=function(){return _s(t,EV())},Do.apply(t,arguments)}function IV(){var t=zA(xb()).domain([1,10]);return t.copy=function(){return _s(t,IV()).base(t.base())},Do.apply(t,arguments)}function OV(){var t=jA(xb());return t.copy=function(){return _s(t,OV()).constant(t.constant())},Do.apply(t,arguments)}function QA(){var t=UA(xb());return t.copy=function(){return _s(t,QA()).exponent(t.exponent())},Do.apply(t,arguments)}function qie(){return QA.apply(null,arguments).exponent(.5)}function NV(){var t=[],e=Dr;function n(r){if(r!=null&&!isNaN(r=+r))return e((up(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ys),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>_ne(t,a/r))},n.copy=function(){return NV(e).domain(t)},Do.apply(n,arguments)}function wb(){var t=0,e=.5,n=1,r=1,i,a,o,s,l,c=Dr,h,d=!1,p;function g(x){return isNaN(x=+x)?p:(x=.5+((x=+h(x))-a)*(r*x<r*a?s:l),c(d?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([t,e,n]=x,i=h(t=+t),a=h(e=+e),o=h(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,g):[t,e,n]},g.clamp=function(x){return arguments.length?(d=!!x,g):d},g.interpolator=function(x){return arguments.length?(c=x,g):c};function y(x){return function(b){var w,S,$;return arguments.length?([w,S,$]=b,c=ire(x,[w,S,$]),g):[c(0),c(.5),c(1)]}}return g.range=y(df),g.rangeRound=y(PA),g.unknown=function(x){return arguments.length?(p=x,g):p},function(x){return h=x,i=x(t),a=x(e),o=x(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,g}}function _V(){var t=Ns(wb()(Dr));return t.copy=function(){return _s(t,_V())},Do.apply(t,arguments)}function RV(){var t=zA(wb()).domain([.1,1,10]);return t.copy=function(){return _s(t,RV()).base(t.base())},Do.apply(t,arguments)}function DV(){var t=jA(wb());return t.copy=function(){return _s(t,DV()).constant(t.constant())},Do.apply(t,arguments)}function JA(){var t=UA(wb());return t.copy=function(){return _s(t,JA()).exponent(t.exponent())},Do.apply(t,arguments)}function Hie(){return JA.apply(null,arguments).exponent(.5)}const NF=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bd,scaleDiverging:_V,scaleDivergingLog:RV,scaleDivergingPow:JA,scaleDivergingSqrt:Hie,scaleDivergingSymlog:DV,scaleIdentity:hV,scaleImplicit:S2,scaleLinear:Yy,scaleLog:pV,scaleOrdinal:RA,scalePoint:ad,scalePow:VA,scaleQuantile:yV,scaleQuantize:vV,scaleRadial:gV,scaleSequential:EV,scaleSequentialLog:IV,scaleSequentialPow:QA,scaleSequentialQuantile:NV,scaleSequentialSqrt:qie,scaleSequentialSymlog:OV,scaleSqrt:Are,scaleSymlog:mV,scaleThreshold:bV,scaleTime:Wie,scaleUtc:Gie,tickFormat:fV},Symbol.toStringTag,{value:"Module"}));var G$,_F;function MV(){if(_F)return G$;_F=1;var t=lf();function e(n,r,i){for(var a=-1,o=n.length;++a<o;){var s=n[a],l=r(s);if(l!=null&&(c===void 0?l===l&&!t(l):i(l,c)))var c=l,h=s}return h}return G$=e,G$}var q$,RF;function Xie(){if(RF)return q$;RF=1;function t(e,n){return e>n}return q$=t,q$}var H$,DF;function Kie(){if(DF)return H$;DF=1;var t=MV(),e=Xie(),n=hf();function r(i){return i&&i.length?t(i,n,e):void 0}return H$=r,H$}var Yie=Kie();const hs=Pt(Yie);var X$,MF;function Zie(){if(MF)return X$;MF=1;function t(e,n){return e<n}return X$=t,X$}var K$,PF;function Qie(){if(PF)return K$;PF=1;var t=MV(),e=Zie(),n=hf();function r(i){return i&&i.length?t(i,n,e):void 0}return K$=r,K$}var Jie=Qie();const Sb=Pt(Jie);var Y$,LF;function eae(){if(LF)return Y$;LF=1;var t=mA(),e=Os(),n=VU(),r=ei();function i(a,o){var s=r(a)?t:n;return s(a,e(o,3))}return Y$=i,Y$}var Z$,FF;function tae(){if(FF)return Z$;FF=1;var t=jU(),e=eae();function n(r,i){return t(e(r,i),1)}return Z$=n,Z$}var nae=tae();const rae=Pt(nae);var Q$,BF;function iae(){if(BF)return Q$;BF=1;var t=EA();function e(n,r){return t(n,r)}return Q$=e,Q$}var aae=iae();const Ac=Pt(aae);var pf=1e9,oae={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},tE,nn=!0,Fi="[DecimalError] ",Tl=Fi+"Invalid argument: ",eE=Fi+"Exponent out of range: ",mf=Math.floor,hl=Math.pow,sae=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fi,Yn=1e7,Qt=7,PV=9007199254740991,ev=mf(PV/Qt),Fe={};Fe.absoluteValue=Fe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Fe.comparedTo=Fe.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Fe.decimalPlaces=Fe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Qt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Fe.dividedBy=Fe.div=function(t){return wo(this,new this.constructor(t))};Fe.dividedToIntegerBy=Fe.idiv=function(t){var e=this,n=e.constructor;return qt(wo(e,new n(t),0,1),n.precision)};Fe.equals=Fe.eq=function(t){return!this.cmp(t)};Fe.exponent=function(){return In(this)};Fe.greaterThan=Fe.gt=function(t){return this.cmp(t)>0};Fe.greaterThanOrEqualTo=Fe.gte=function(t){return this.cmp(t)>=0};Fe.isInteger=Fe.isint=function(){return this.e>this.d.length-2};Fe.isNegative=Fe.isneg=function(){return this.s<0};Fe.isPositive=Fe.ispos=function(){return this.s>0};Fe.isZero=function(){return this.s===0};Fe.lessThan=Fe.lt=function(t){return this.cmp(t)<0};Fe.lessThanOrEqualTo=Fe.lte=function(t){return this.cmp(t)<1};Fe.logarithm=Fe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(fi))throw Error(Fi+"NaN");if(n.s<1)throw Error(Fi+(n.s?"NaN":"-Infinity"));return n.eq(fi)?new r(0):(nn=!1,e=wo($d(n,a),$d(t,a),a),nn=!0,qt(e,i))};Fe.minus=Fe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?BV(e,t):LV(e,(t.s=-t.s,t))};Fe.modulo=Fe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Fi+"NaN");return n.s?(nn=!1,e=wo(n,t,0,1).times(t),nn=!0,n.minus(e)):qt(new r(n),i)};Fe.naturalExponential=Fe.exp=function(){return FV(this)};Fe.naturalLogarithm=Fe.ln=function(){return $d(this)};Fe.negated=Fe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Fe.plus=Fe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LV(e,t):BV(e,(t.s=-t.s,t))};Fe.precision=Fe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Tl+t);if(e=In(i)+1,r=i.d.length-1,n=r*Qt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Fe.squareRoot=Fe.sqrt=function(){var t,e,n,r,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Fi+"NaN")}for(t=In(s),nn=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=Aa(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=mf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(a=r,r=a.plus(wo(s,a,o+2)).times(.5),Aa(a.d).slice(0,o)===(e=Aa(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(qt(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(e!="9999")break;o+=4}return nn=!0,qt(r,n)};Fe.times=Fe.mul=function(t){var e,n,r,i,a,o,s,l,c,h=this,d=h.constructor,p=h.d,g=(t=new d(t)).d;if(!h.s||!t.s)return new d(0);for(t.s*=h.s,n=h.e+t.e,l=p.length,c=g.length,l<c&&(a=p,p=g,g=a,o=l,l=c,c=o),a=[],o=l+c,r=o;r--;)a.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=a[i]+g[r]*p[i-r-1]+e,a[i--]=s%Yn|0,e=s/Yn|0;a[i]=(a[i]+e)%Yn|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,nn?qt(t,d.precision):t};Fe.toDecimalPlaces=Fe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(La(t,0,pf),e===void 0?e=r.rounding:La(e,0,8),qt(n,t+In(n)+1,e))};Fe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Nl(r,!0):(La(t,0,pf),e===void 0?e=i.rounding:La(e,0,8),r=qt(new i(r),t+1,e),n=Nl(r,!0,t+1)),n};Fe.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Nl(i):(La(t,0,pf),e===void 0?e=a.rounding:La(e,0,8),r=qt(new a(i),t+In(i)+1,e),n=Nl(r.abs(),!1,t+In(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Fe.toInteger=Fe.toint=function(){var t=this,e=t.constructor;return qt(new e(t),In(t)+1,e.rounding)};Fe.toNumber=function(){return+this};Fe.toPower=Fe.pow=function(t){var e,n,r,i,a,o,s=this,l=s.constructor,c=12,h=+(t=new l(t));if(!t.s)return new l(fi);if(s=new l(s),!s.s){if(t.s<1)throw Error(Fi+"Infinity");return s}if(s.eq(fi))return s;if(r=l.precision,t.eq(fi))return qt(s,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=s.s,o){if((n=h<0?-h:h)<=PV){for(i=new l(fi),e=Math.ceil(r/Qt+4),nn=!1;n%2&&(i=i.times(s),jF(i.d,e)),n=mf(n/2),n!==0;)s=s.times(s),jF(s.d,e);return nn=!0,t.s<0?new l(fi).div(i):qt(i,r)}}else if(a<0)throw Error(Fi+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,nn=!1,i=t.times($d(s,r+c)),nn=!0,i=FV(i),i.s=a,i};Fe.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=In(i),r=Nl(i,n<=a.toExpNeg||n>=a.toExpPos)):(La(t,1,pf),e===void 0?e=a.rounding:La(e,0,8),i=qt(new a(i),t,e),n=In(i),r=Nl(i,t<=n||n<=a.toExpNeg,t)),r};Fe.toSignificantDigits=Fe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(La(t,1,pf),e===void 0?e=r.rounding:La(e,0,8)),qt(new r(n),t,e)};Fe.toString=Fe.valueOf=Fe.val=Fe.toJSON=Fe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=In(t),n=t.constructor;return Nl(t,e<=n.toExpNeg||e>=n.toExpPos)};function LV(t,e){var n,r,i,a,o,s,l,c,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),nn?qt(e,d):e;if(l=t.d,c=e.d,o=t.e,i=e.e,l=l.slice(),a=o-i,a){for(a<0?(r=l,a=-a,s=c.length):(r=c,i=o,s=l.length),o=Math.ceil(d/Qt),s=o>s?o+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=l.length,a=c.length,s-a<0&&(a=s,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/Yn|0,l[a]%=Yn;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,nn?qt(e,d):e}function La(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Tl+t)}function Aa(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=Qt-r.length,n&&(a+=us(n)),a+=r;o=t[e],r=o+"",n=Qt-r.length,n&&(a+=us(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var wo=function(){function t(r,i){var a,o=0,s=r.length;for(r=r.slice();s--;)a=r[s]*i+o,r[s]=a%Yn|0,o=a/Yn|0;return o&&r.unshift(o),r}function e(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Yn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var s,l,c,h,d,p,g,y,x,b,w,S,$,T,k,E,I,_,N=r.constructor,R=r.s==i.s?1:-1,O=r.d,P=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(Fi+"Division by zero");for(l=r.e-i.e,I=P.length,k=O.length,g=new N(R),y=g.d=[],c=0;P[c]==(O[c]||0);)++c;if(P[c]>(O[c]||0)&&--l,a==null?S=a=N.precision:o?S=a+(In(r)-In(i))+1:S=a,S<0)return new N(0);if(S=S/Qt+2|0,c=0,I==1)for(h=0,P=P[0],S++;(c<k||h)&&S--;c++)$=h*Yn+(O[c]||0),y[c]=$/P|0,h=$%P|0;else{for(h=Yn/(P[0]+1)|0,h>1&&(P=t(P,h),O=t(O,h),I=P.length,k=O.length),T=I,x=O.slice(0,I),b=x.length;b<I;)x[b++]=0;_=P.slice(),_.unshift(0),E=P[0],P[1]>=Yn/2&&++E;do h=0,s=e(P,x,I,b),s<0?(w=x[0],I!=b&&(w=w*Yn+(x[1]||0)),h=w/E|0,h>1?(h>=Yn&&(h=Yn-1),d=t(P,h),p=d.length,b=x.length,s=e(d,x,p,b),s==1&&(h--,n(d,I<p?_:P,p))):(h==0&&(s=h=1),d=P.slice()),p=d.length,p<b&&d.unshift(0),n(x,d,b),s==-1&&(b=x.length,s=e(P,x,I,b),s<1&&(h++,n(x,I<b?_:P,b))),b=x.length):s===0&&(h++,x=[0]),y[c++]=h,s&&x[0]?x[b++]=O[T]||0:(x=[O[T]],b=1);while((T++<k||x[0]!==void 0)&&S--)}return y[0]||y.shift(),g.e=l,qt(g,o?a+In(g)+1:a)}}();function FV(t,e){var n,r,i,a,o,s,l=0,c=0,h=t.constructor,d=h.precision;if(In(t)>16)throw Error(eE+In(t));if(!t.s)return new h(fi);for(nn=!1,s=d,o=new h(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(hl(2,c))/Math.LN10*2+5|0,s+=r,n=i=a=new h(fi),h.precision=s;;){if(i=qt(i.times(t),s),n=n.times(++l),o=a.plus(wo(i,n,s)),Aa(o.d).slice(0,s)===Aa(a.d).slice(0,s)){for(;c--;)a=qt(a.times(a),s);return h.precision=d,e==null?(nn=!0,qt(a,d)):a}a=o}}function In(t){for(var e=t.e*Qt,n=t.d[0];n>=10;n/=10)e++;return e}function J$(t,e,n){if(e>t.LN10.sd())throw nn=!0,n&&(t.precision=n),Error(Fi+"LN10 precision limit exceeded");return qt(new t(t.LN10),e)}function us(t){for(var e="";t--;)e+="0";return e}function $d(t,e){var n,r,i,a,o,s,l,c,h,d=1,p=10,g=t,y=g.d,x=g.constructor,b=x.precision;if(g.s<1)throw Error(Fi+(g.s?"NaN":"-Infinity"));if(g.eq(fi))return new x(0);if(e==null?(nn=!1,c=b):c=e,g.eq(10))return e==null&&(nn=!0),J$(x,c);if(c+=p,x.precision=c,n=Aa(y),r=n.charAt(0),a=In(g),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=Aa(g.d),r=n.charAt(0),d++;a=In(g),r>1?(g=new x("0."+n),a++):g=new x(r+"."+n.slice(1))}else return l=J$(x,c+2,b).times(a+""),g=$d(new x(r+"."+n.slice(1)),c-p).plus(l),x.precision=b,e==null?(nn=!0,qt(g,b)):g;for(s=o=g=wo(g.minus(fi),g.plus(fi),c),h=qt(g.times(g),c),i=3;;){if(o=qt(o.times(h),c),l=s.plus(wo(o,new x(i),c)),Aa(l.d).slice(0,c)===Aa(s.d).slice(0,c))return s=s.times(2),a!==0&&(s=s.plus(J$(x,c+2,b).times(a+""))),s=wo(s,new x(d),c),x.precision=b,e==null?(nn=!0,qt(s,b)):s;s=l,i+=2}}function zF(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=mf(n/Qt),t.d=[],r=(n+1)%Qt,n<0&&(r+=Qt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Qt;r<i;)t.d.push(+e.slice(r,r+=Qt));e=e.slice(r),r=Qt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),nn&&(t.e>ev||t.e<-ev))throw Error(eE+n)}else t.s=0,t.e=0,t.d=[0];return t}function qt(t,e,n){var r,i,a,o,s,l,c,h,d=t.d;for(o=1,a=d[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=Qt,i=e,c=d[h=0];else{if(h=Math.ceil((r+1)/Qt),a=d.length,h>=a)return t;for(c=a=d[h],o=1;a>=10;a/=10)o++;r%=Qt,i=r-Qt+o}if(n!==void 0&&(a=hl(10,o-i-1),s=c/a%10|0,l=e<0||d[h+1]!==void 0||c%a,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?c/hl(10,o-i):0:d[h-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(a=In(t),d.length=1,e=e-a-1,d[0]=hl(10,(Qt-e%Qt)%Qt),t.e=mf(-e/Qt)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=h,a=1,h--):(d.length=h+1,a=hl(10,Qt-r),d[h]=i>0?(c/hl(10,o-i)%hl(10,i)|0)*a:0),l)for(;;)if(h==0){(d[0]+=a)==Yn&&(d[0]=1,++t.e);break}else{if(d[h]+=a,d[h]!=Yn)break;d[h--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(nn&&(t.e>ev||t.e<-ev))throw Error(eE+In(t));return t}function BV(t,e){var n,r,i,a,o,s,l,c,h,d,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),nn?qt(e,g):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(h=o<0,h?(n=l,o=-o,s=d.length):(n=d,r=c,s=l.length),i=Math.max(Math.ceil(g/Qt),s)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=d.length,h=i<s,h&&(s=i),i=0;i<s;i++)if(l[i]!=d[i]){h=l[i]<d[i];break}o=0}for(h&&(n=l,l=d,d=n,e.s=-e.s),s=l.length,i=d.length-s;i>0;--i)l[s++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(a=i;a&&l[--a]===0;)l[a]=Yn-1;--l[a],l[i]+=Yn}l[i]-=d[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,nn?qt(e,g):e):new p(0)}function Nl(t,e,n){var r,i=In(t),a=Aa(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+us(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+us(-i-1)+a,n&&(r=n-o)>0&&(a+=us(r))):i>=o?(a+=us(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+us(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=us(r))),t.s<0?"-"+a:a}function jF(t,e){if(t.length>e)return t.length=e,!0}function zV(t){var e,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Tl+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return zF(o,a.toString())}else if(typeof a!="string")throw Error(Tl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,sae.test(a))zF(o,a);else throw Error(Tl+a)}if(i.prototype=Fe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=zV,i.config=i.set=lae,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function lae(t){if(!t||typeof t!="object")throw Error(Fi+"Object expected");var e,n,r,i=["precision",1,pf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(mf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Tl+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Tl+n+": "+r);return this}var tE=zV(oae);fi=new tE(1);const jt=tE;function uae(t){return dae(t)||hae(t)||fae(t)||cae()}function cae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fae(t,e){if(t){if(typeof t=="string")return k2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k2(t,e)}}function hae(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function dae(t){if(Array.isArray(t))return k2(t)}function k2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var pae=function(e){return e},jV={},UV=function(e){return e===jV},UF=function(e){return function n(){return arguments.length===0||arguments.length===1&&UV(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},mae=function t(e,n){return e===1?n:UF(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(s){return s!==jV}).length;return o>=e?n.apply(void 0,i):t(e-o,UF(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var h=i.map(function(d){return UV(d)?l.shift():d});return n.apply(void 0,uae(h).concat(l))}))})},Cb=function(e){return mae(e.length,e)},A2=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},gae=Cb(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),yae=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return pae;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(s,l){return l(s)},a.apply(void 0,arguments))}},E2=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},VV=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(s,l){return s===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function vae(t){var e;return t===0?e=1:e=Math.floor(new jt(t).abs().log(10).toNumber())+1,e}function bae(t,e,n){for(var r=new jt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var xae=Cb(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),wae=Cb(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Sae=Cb(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const $b={rangeStep:bae,getDigitCount:vae,interpolateNumber:xae,uninterpolateNumber:wae,uninterpolateTruncation:Sae};function I2(t){return Tae(t)||$ae(t)||WV(t)||Cae()}function Cae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ae(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Tae(t){if(Array.isArray(t))return O2(t)}function Td(t,e){return Eae(t)||Aae(t,e)||WV(t,e)||kae()}function kae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WV(t,e){if(t){if(typeof t=="string")return O2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O2(t,e)}}function O2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Aae(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function Eae(t){if(Array.isArray(t))return t}function GV(t){var e=Td(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function qV(t,e,n){if(t.lte(0))return new jt(0);var r=$b.getDigitCount(t.toNumber()),i=new jt(10).pow(r),a=t.div(i),o=r!==1?.05:.1,s=new jt(Math.ceil(a.div(o).toNumber())).add(n).mul(o),l=s.mul(i);return e?l:new jt(Math.ceil(l))}function Iae(t,e,n){var r=1,i=new jt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new jt(10).pow($b.getDigitCount(t)-1),i=new jt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new jt(Math.floor(t)))}else t===0?i=new jt(Math.floor((e-1)/2)):n||(i=new jt(Math.floor(t)));var o=Math.floor((e-1)/2),s=yae(gae(function(l){return i.add(new jt(l-o).mul(r)).toNumber()}),A2);return s(0,e)}function HV(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new jt(0),tickMin:new jt(0),tickMax:new jt(0)};var a=qV(new jt(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new jt(0):(o=new jt(t).add(e).div(2),o=o.sub(new jt(o).mod(a)));var s=Math.ceil(o.sub(t).div(a).toNumber()),l=Math.ceil(new jt(e).sub(o).div(a).toNumber()),c=s+l+1;return c>n?HV(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,s=e>0?s:s+(n-c)),{step:a,tickMin:o.sub(new jt(s).mul(a)),tickMax:o.add(new jt(l).mul(a))})}function Oae(t){var e=Td(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),s=GV([n,r]),l=Td(s,2),c=l[0],h=l[1];if(c===-1/0||h===1/0){var d=h===1/0?[c].concat(I2(A2(0,i-1).map(function(){return 1/0}))):[].concat(I2(A2(0,i-1).map(function(){return-1/0})),[h]);return n>r?E2(d):d}if(c===h)return Iae(c,i,a);var p=HV(c,h,o,a),g=p.step,y=p.tickMin,x=p.tickMax,b=$b.rangeStep(y,x.add(new jt(.1).mul(g)),g);return n>r?E2(b):b}function Nae(t,e){var n=Td(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=GV([r,i]),s=Td(o,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var h=Math.max(e,2),d=qV(new jt(c).sub(l).div(h-1),a,0),p=[].concat(I2($b.rangeStep(new jt(l),new jt(c).sub(new jt(.99).mul(d)),d)),[c]);return r>i?E2(p):p}var _ae=VV(Oae),Rae=VV(Nae),Dae="Invariant failed";function _l(t,e){throw new Error(Dae)}var Mae=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}function tv(){return tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tv.apply(this,arguments)}function Pae(t,e){return zae(t)||Bae(t,e)||Fae(t,e)||Lae()}function Lae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fae(t,e){if(t){if(typeof t=="string")return VF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VF(t,e)}}function VF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function zae(t){if(Array.isArray(t))return t}function jae(t,e){if(t==null)return{};var n=Uae(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Vae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YV(r.key),r)}}function Gae(t,e,n){return e&&Wae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qae(t,e,n){return e=nv(e),Hae(t,XV()?Reflect.construct(e,n||[],nv(t).constructor):e.apply(t,n))}function Hae(t,e){if(e&&(Ec(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xae(t)}function Xae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XV=function(){return!!t})()}function nv(t){return nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nv(t)}function Kae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N2(t,e)}function N2(t,e){return N2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},N2(t,e)}function KV(t,e,n){return e=YV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YV(t){var e=Yae(t,"string");return Ec(e)=="symbol"?e:e+""}function Yae(t,e){if(Ec(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dp=function(t){function e(){return Vae(this,e),qae(this,e,arguments)}return Kae(e,t),Gae(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,h=r.xAxis,d=r.yAxis,p=jae(r,Mae),g=at(p,!1);this.props.direction==="x"&&h.type!=="number"&&_l();var y=l.map(function(x){var b=c(x,s),w=b.x,S=b.y,$=b.value,T=b.errorVal;if(!T)return null;var k=[],E,I;if(Array.isArray(T)){var _=Pae(T,2);E=_[0],I=_[1]}else E=I=T;if(a==="vertical"){var N=h.scale,R=S+i,O=R+o,P=R-o,B=N($-E),U=N($+I);k.push({x1:U,y1:O,x2:U,y2:P}),k.push({x1:B,y1:R,x2:U,y2:R}),k.push({x1:B,y1:O,x2:B,y2:P})}else if(a==="horizontal"){var z=d.scale,M=w+i,V=M-o,W=M+o,H=z($-E),L=z($+I);k.push({x1:V,y1:L,x2:W,y2:L}),k.push({x1:M,y1:H,x2:M,y2:L}),k.push({x1:V,y1:H,x2:W,y2:H})}return Q.createElement(Yt,tv({className:"recharts-errorBar",key:"bar-".concat(k.map(function(G){return"".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))},g),k.map(function(G){return Q.createElement("line",tv({},G,{key:"line-".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))}))});return Q.createElement(Yt,{className:"recharts-errorBars"},y)}}])}(Q.Component);KV(dp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});KV(dp,"displayName","ErrorBar");function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(t)}function WF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ll(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WF(Object(n),!0).forEach(function(r){Zae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zae(t,e,n){return e=Qae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qae(t){var e=Jae(t,"string");return kd(e)=="symbol"?e:e+""}function Jae(t,e){if(kd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZV=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=ci(n,uc);if(!o)return null;var s=uc.defaultProps,l=s!==void 0?ll(ll({},s),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:a==="children"?c=(r||[]).reduce(function(h,d){var p=d.item,g=d.props,y=g.sectors||g.data||[];return h.concat(y.map(function(x){return{type:o.props.iconType||p.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):c=(r||[]).map(function(h){var d=h.item,p=d.type.defaultProps,g=p!==void 0?ll(ll({},p),d.props):{},y=g.dataKey,x=g.name,b=g.legendType,w=g.hide;return{inactive:w,dataKey:y,type:l.iconType||b||"square",color:nE(d),value:x||y,payload:g}}),ll(ll(ll({},l),uc.getWithHeight(o,i)),{},{payload:c,item:o})};function Ad(t){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(t)}function GF(t){return roe(t)||noe(t)||toe(t)||eoe()}function eoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function toe(t,e){if(t){if(typeof t=="string")return _2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _2(t,e)}}function noe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function roe(t){if(Array.isArray(t))return _2(t)}function _2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qF(Object(n),!0).forEach(function(r){fc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fc(t,e,n){return e=ioe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ioe(t){var e=aoe(t,"string");return Ad(e)=="symbol"?e:e+""}function aoe(t,e){if(Ad(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ad(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pr(t,e,n){return dt(t)||dt(e)?n:jn(e)?Pi(t,e,n):nt(e)?e(t):n}function od(t,e,n,r){var i=rae(t,function(s){return Pr(s,e)});if(n==="number"){var a=i.filter(function(s){return _e(s)||parseFloat(s)});return a.length?[Sb(a),hs(a)]:[1/0,-1/0]}var o=r?i.filter(function(s){return!dt(s)}):i;return o.map(function(s){return jn(s)||s instanceof Date?s:""})}var ooe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<s;c++){var h=c>0?i[c-1].coordinate:i[s-1].coordinate,d=i[c].coordinate,p=c>=s-1?i[0].coordinate:i[c+1].coordinate,g=void 0;if(ia(d-h)!==ia(p-d)){var y=[];if(ia(p-d)===ia(l[1]-l[0])){g=p;var x=d+l[1]-l[0];y[0]=Math.min(x,(x+h)/2),y[1]=Math.max(x,(x+h)/2)}else{g=h;var b=p+l[1]-l[0];y[0]=Math.min(d,(b+d)/2),y[1]=Math.max(d,(b+d)/2)}var w=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(e>w[0]&&e<=w[1]||e>=y[0]&&e<=y[1]){o=i[c].index;break}}else{var S=Math.min(h,p),$=Math.max(h,p);if(e>(S+d)/2&&e<=($+d)/2){o=i[c].index;break}}}else for(var T=0;T<s;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<s-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===s-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){o=r[T].index;break}return o},nE=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?fn(fn({},e.type.defaultProps),e.props):e.props,o=a.stroke,s=a.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},soe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},s=Object.keys(a),l=0,c=s.length;l<c;l++)for(var h=a[s[l]].stackGroups,d=Object.keys(h),p=0,g=d.length;p<g;p++){var y=h[d[p]],x=y.items,b=y.cateAxisId,w=x.filter(function(I){return bo(I.type).indexOf("Bar")>=0});if(w&&w.length){var S=w[0].type.defaultProps,$=S!==void 0?fn(fn({},S),w[0].props):w[0].props,T=$.barSize,k=$[b];o[k]||(o[k]=[]);var E=dt(T)?n:T;o[k].push({item:w[0],stackList:w.slice(1),barSize:dt(E)?void 0:Ol(E,r,0)})}}return o},loe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,s=e.maxBarSize,l=o.length;if(l<1)return null;var c=Ol(n,i,0,!0),h,d=[];if(o[0].barSize===+o[0].barSize){var p=!1,g=i/l,y=o.reduce(function(T,k){return T+k.barSize||0},0);y+=(l-1)*c,y>=i&&(y-=(l-1)*c,c=0),y>=i&&g>0&&(p=!0,g*=.9,y=l*g);var x=(i-y)/2>>0,b={offset:x-c,size:0};h=o.reduce(function(T,k){var E={item:k.item,position:{offset:b.offset+b.size+c,size:p?g:k.barSize}},I=[].concat(GF(T),[E]);return b=I[I.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(_){I.push({item:_,position:b})}),I},d)}else{var w=Ol(r,i,0,!0);i-2*w-(l-1)*c<=0&&(c=0);var S=(i-2*w-(l-1)*c)/l;S>1&&(S>>=0);var $=s===+s?Math.min(S,s):S;h=o.reduce(function(T,k,E){var I=[].concat(GF(T),[{item:k.item,position:{offset:w+(S+c)*E+(S-$)/2,size:$}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(_){I.push({item:_,position:I[I.length-1].position})}),I},d)}return h},uoe=function(e,n,r,i){var a=r.children,o=r.width,s=r.margin,l=o-(s.left||0)-(s.right||0),c=ZV({children:a,legendWidth:l});if(c){var h=i||{},d=h.width,p=h.height,g=c.align,y=c.verticalAlign,x=c.layout;if((x==="vertical"||x==="horizontal"&&y==="middle")&&g!=="center"&&_e(e[g]))return fn(fn({},e),{},fc({},g,e[g]+(d||0)));if((x==="horizontal"||x==="vertical"&&g==="center")&&y!=="middle"&&_e(e[y]))return fn(fn({},e),{},fc({},y,e[y]+(p||0)))}return e},coe=function(e,n,r){return dt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},QV=function(e,n,r,i,a){var o=n.props.children,s=Li(o,dp).filter(function(c){return coe(i,a,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,h){var d=Pr(h,r);if(dt(d))return c;var p=Array.isArray(d)?[Sb(d),hs(d)]:[d,d],g=l.reduce(function(y,x){var b=Pr(h,x,0),w=p[0]-Math.abs(Array.isArray(b)?b[0]:b),S=p[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(w,y[0]),Math.max(S,y[1])]},[1/0,-1/0]);return[Math.min(g[0],c[0]),Math.max(g[1],c[1])]},[1/0,-1/0])}return null},foe=function(e,n,r,i,a){var o=n.map(function(s){return QV(e,s,r,a,i)}).filter(function(s){return!dt(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},JV=function(e,n,r,i,a){var o=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&QV(e,l,c,i)||od(e,c,r,a)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,c){for(var h=0,d=c.length;h<d;h++)s[c[h]]||(s[c[h]]=!0,l.push(c[h]));return l},[])},eW=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},tW=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,o,s=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(o=!0),l.coordinate});return a||s.push(n),o||s.push(r),s},go=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?ia(s[0]-s[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var h=(e.ticks||e.niceTicks).map(function(d){var p=a?a.indexOf(d):d;return{coordinate:i(p)+c,value:d,offset:c}});return h.filter(function(d){return!cf(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,p){return{coordinate:i(d)+c,value:d,index:p,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,p){return{coordinate:i(d)+c,value:a?a[d]:d,index:p,offset:c}})},eT=new WeakMap,Jg=function(e,n){if(typeof n!="function")return e;eT.has(e)||eT.set(e,new WeakMap);var r=eT.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},hoe=function(e,n,r){var i=e.scale,a=e.type,o=e.layout,s=e.axisType;if(i==="auto")return o==="radial"&&s==="radiusAxis"?{scale:bd(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:Yy(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:ad(),realScaleType:"point"}:a==="category"?{scale:bd(),realScaleType:"band"}:{scale:Yy(),realScaleType:"linear"};if(Il(i)){var l="scale".concat(ub(i));return{scale:(NF[l]||ad)(),realScaleType:NF[l]?l:"point"}}return nt(i)?{scale:i}:{scale:ad(),realScaleType:"point"}},HF=1e-4,doe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-HF,o=Math.max(i[0],i[1])+HF,s=e(n[0]),l=e(n[r-1]);(s<a||s>o||l<a||l>o)&&e.domain([n[0],n[r-1]])}},poe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},moe=function(e,n){if(!n||n.length!==2||!_e(n[0])||!_e(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!_e(e[0])||e[0]<r)&&(a[0]=r),(!_e(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},goe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0,s=0;s<n;++s){var l=cf(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1]):(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1])}},yoe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0;o<n;++o){var s=cf(e[o][r][1])?e[o][r][0]:e[o][r][1];s>=0?(e[o][r][0]=a,e[o][r][1]=a+s,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},voe={sign:goe,expand:tJ,none:bc,silhouette:nJ,wiggle:rJ,positive:yoe},boe=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),a=voe[r],o=eJ().keys(i).value(function(s,l){return+Pr(s,l,0)}).order(l2).offset(a);return o(e)},xoe=function(e,n,r,i,a,o){if(!e)return null;var s=o?n.reverse():n,l={},c=s.reduce(function(d,p){var g,y=(g=p.type)!==null&&g!==void 0&&g.defaultProps?fn(fn({},p.type.defaultProps),p.props):p.props,x=y.stackId,b=y.hide;if(b)return d;var w=y[r],S=d[w]||{hasStack:!1,stackGroups:{}};if(jn(x)){var $=S.stackGroups[x]||{numericAxisId:r,cateAxisId:i,items:[]};$.items.push(p),S.hasStack=!0,S.stackGroups[x]=$}else S.stackGroups[ff("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return fn(fn({},d),{},fc({},w,S))},l),h={};return Object.keys(c).reduce(function(d,p){var g=c[p];if(g.hasStack){var y={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(x,b){var w=g.stackGroups[b];return fn(fn({},x),{},fc({},b,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:boe(e,w.items,a)}))},y)}return fn(fn({},d),{},fc({},p,g))},h)},woe=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=e.domain();if(!c.length)return null;var h=_ae(c,a,s);return e.domain([Sb(h),hs(h)]),{niceTicks:h}}if(a&&i==="number"){var d=e.domain(),p=Rae(d,a,s);return{niceTicks:p}}return null};function rv(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!dt(i[e.dataKey])){var s=Oy(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=Pr(i,dt(o)?e.dataKey:o);return dt(l)?null:e.scale(l)}var XF=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=Pr(o,n.dataKey,n.domain[s]);return dt(l)?null:n.scale(l)-a/2+i},Soe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Coe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?fn(fn({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(jn(a)){var o=n[a];if(o){var s=o.items.indexOf(e);return s>=0?o.stackedData[s]:null}}return null},$oe=function(e){return e.reduce(function(n,r){return[Sb(r.concat([n[0]]).filter(_e)),hs(r.concat([n[1]]).filter(_e))]},[1/0,-1/0])},nW=function(e,n,r){return Object.keys(e).reduce(function(i,a){var o=e[a],s=o.stackedData,l=s.reduce(function(c,h){var d=$oe(h.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},KF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,R2=function(e,n,r){if(nt(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(_e(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(KF.test(e[0])){var a=+KF.exec(e[0])[1];i[0]=n[0]-a}else nt(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(_e(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(YF.test(e[1])){var o=+YF.exec(e[1])[1];i[1]=n[1]+o}else nt(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},iv=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=OA(n,function(d){return d.coordinate}),o=1/0,s=1,l=a.length;s<l;s++){var c=a[s],h=a[s-1];o=Math.min((c.coordinate||0)-(h.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},ZF=function(e,n,r){return!e||!e.length||Ac(e,Pi(r,"type.defaultProps.domain"))?n:e},rW=function(e,n){var r=e.type.defaultProps?fn(fn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,o=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,h=r.hide;return fn(fn({},at(e,!1)),{},{dataKey:i,unit:o,formatter:s,name:a||i,color:nE(e),value:Pr(n,i),type:l,payload:n,chartType:c,hide:h})};function Ed(t){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(t)}function QF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QF(Object(n),!0).forEach(function(r){Toe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Toe(t,e,n){return e=koe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function koe(t){var e=Aoe(t,"string");return Ed(e)=="symbol"?e:e+""}function Aoe(t,e){if(Ed(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var av=Math.PI/180,Eoe=function(e){return e*180/Math.PI},ur=function(e,n,r,i){return{x:e+Math.cos(-av*i)*r,y:n+Math.sin(-av*i)*r}},Ioe=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},Ooe=function(e,n){var r=e.x,i=e.y,a=n.cx,o=n.cy,s=Ioe({x:r,y:i},{x:a,y:o});if(s<=0)return{radius:s};var l=(r-a)/s,c=Math.acos(l);return i>o&&(c=2*Math.PI-c),{radius:s,angle:Eoe(c),angleInRadian:c}},Noe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:r-o*360}},_oe=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),s=Math.min(a,o);return e+s*360},eB=function(e,n){var r=e.x,i=e.y,a=Ooe({x:r,y:i},n),o=a.radius,s=a.angle,l=n.innerRadius,c=n.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var h=Noe(n),d=h.startAngle,p=h.endAngle,g=s,y;if(d<=p){for(;g>p;)g-=360;for(;g<d;)g+=360;y=g>=d&&g<=p}else{for(;g>d;)g-=360;for(;g<p;)g+=360;y=g>=p&&g<=d}return y?JF(JF({},n),{},{radius:o,angle:_oe(g,n)}):null};function Id(t){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Id(t)}var Roe=["offset"];function Doe(t){return Foe(t)||Loe(t)||Poe(t)||Moe()}function Moe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Poe(t,e){if(t){if(typeof t=="string")return D2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D2(t,e)}}function Loe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Foe(t){if(Array.isArray(t))return D2(t)}function D2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Boe(t,e){if(t==null)return{};var n=zoe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zoe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function tB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tB(Object(n),!0).forEach(function(r){joe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function joe(t,e,n){return e=Uoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uoe(t){var e=Voe(t,"string");return Id(e)=="symbol"?e:e+""}function Voe(t,e){if(Id(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Od.apply(this,arguments)}var Woe=function(e){var n=e.value,r=e.formatter,i=dt(e.children)?n:e.children;return nt(r)?r(i):i},Goe=function(e,n){var r=ia(n-e),i=Math.min(Math.abs(n-e),360);return r*i},qoe=function(e,n,r){var i=e.position,a=e.viewBox,o=e.offset,s=e.className,l=a,c=l.cx,h=l.cy,d=l.innerRadius,p=l.outerRadius,g=l.startAngle,y=l.endAngle,x=l.clockWise,b=(d+p)/2,w=Goe(g,y),S=w>=0?1:-1,$,T;i==="insideStart"?($=g+S*o,T=x):i==="insideEnd"?($=y-S*o,T=!x):i==="end"&&($=y+S*o,T=x),T=w<=0?T:!T;var k=ur(c,h,b,$),E=ur(c,h,b,$+(T?1:-1)*359),I="M".concat(k.x,",").concat(k.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(E.x,",").concat(E.y),_=dt(e.id)?ff("recharts-radial-line-"):e.id;return Q.createElement("text",Od({},r,{dominantBaseline:"central",className:wt("recharts-radial-bar-label",s)}),Q.createElement("defs",null,Q.createElement("path",{id:_,d:I})),Q.createElement("textPath",{xlinkHref:"#".concat(_)},n))},Hoe=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,o=a.cx,s=a.cy,l=a.innerRadius,c=a.outerRadius,h=a.startAngle,d=a.endAngle,p=(h+d)/2;if(i==="outside"){var g=ur(o,s,c+r,p),y=g.x,x=g.y;return{x:y,y:x,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var b=(l+c)/2,w=ur(o,s,b,p),S=w.x,$=w.y;return{x:S,y:$,textAnchor:"middle",verticalAnchor:"middle"}},Xoe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,o=n,s=o.x,l=o.y,c=o.width,h=o.height,d=h>=0?1:-1,p=d*i,g=d>0?"end":"start",y=d>0?"start":"end",x=c>=0?1:-1,b=x*i,w=x>0?"end":"start",S=x>0?"start":"end";if(a==="top"){var $={x:s+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:g};return Fn(Fn({},$),r?{height:Math.max(l-r.y,0),width:c}:{})}if(a==="bottom"){var T={x:s+c/2,y:l+h+p,textAnchor:"middle",verticalAnchor:y};return Fn(Fn({},T),r?{height:Math.max(r.y+r.height-(l+h),0),width:c}:{})}if(a==="left"){var k={x:s-b,y:l+h/2,textAnchor:w,verticalAnchor:"middle"};return Fn(Fn({},k),r?{width:Math.max(k.x-r.x,0),height:h}:{})}if(a==="right"){var E={x:s+c+b,y:l+h/2,textAnchor:S,verticalAnchor:"middle"};return Fn(Fn({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:h}:{})}var I=r?{width:c,height:h}:{};return a==="insideLeft"?Fn({x:s+b,y:l+h/2,textAnchor:S,verticalAnchor:"middle"},I):a==="insideRight"?Fn({x:s+c-b,y:l+h/2,textAnchor:w,verticalAnchor:"middle"},I):a==="insideTop"?Fn({x:s+c/2,y:l+p,textAnchor:"middle",verticalAnchor:y},I):a==="insideBottom"?Fn({x:s+c/2,y:l+h-p,textAnchor:"middle",verticalAnchor:g},I):a==="insideTopLeft"?Fn({x:s+b,y:l+p,textAnchor:S,verticalAnchor:y},I):a==="insideTopRight"?Fn({x:s+c-b,y:l+p,textAnchor:w,verticalAnchor:y},I):a==="insideBottomLeft"?Fn({x:s+b,y:l+h-p,textAnchor:S,verticalAnchor:g},I):a==="insideBottomRight"?Fn({x:s+c-b,y:l+h-p,textAnchor:w,verticalAnchor:g},I):uf(a)&&(_e(a.x)||yl(a.x))&&(_e(a.y)||yl(a.y))?Fn({x:s+Ol(a.x,c),y:l+Ol(a.y,h),textAnchor:"end",verticalAnchor:"end"},I):Fn({x:s+c/2,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},I)},Koe=function(e){return"cx"in e&&_e(e.cx)};function Sr(t){var e=t.offset,n=e===void 0?5:e,r=Boe(t,Roe),i=Fn({offset:n},r),a=i.viewBox,o=i.position,s=i.value,l=i.children,c=i.content,h=i.className,d=h===void 0?"":h,p=i.textBreakAll;if(!a||dt(s)&&dt(l)&&!Z.isValidElement(c)&&!nt(c))return null;if(Z.isValidElement(c))return Z.cloneElement(c,i);var g;if(nt(c)){if(g=Z.createElement(c,i),Z.isValidElement(g))return g}else g=Woe(i);var y=Koe(a),x=at(i,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return qoe(i,g,x);var b=y?Hoe(i):Xoe(i);return Q.createElement(Vy,Od({className:wt("recharts-label",d)},x,b,{breakAll:p}),g)}Sr.displayName="Label";var iW=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,h=e.outerRadius,d=e.x,p=e.y,g=e.top,y=e.left,x=e.width,b=e.height,w=e.clockWise,S=e.labelViewBox;if(S)return S;if(_e(x)&&_e(b)){if(_e(d)&&_e(p))return{x:d,y:p,width:x,height:b};if(_e(g)&&_e(y))return{x:g,y,width:x,height:b}}return _e(d)&&_e(p)?{x:d,y:p,width:0,height:0}:_e(n)&&_e(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:c||0,outerRadius:h||l||s||0,clockWise:w}:e.viewBox?e.viewBox:{}},Yoe=function(e,n){return e?e===!0?Q.createElement(Sr,{key:"label-implicit",viewBox:n}):jn(e)?Q.createElement(Sr,{key:"label-implicit",viewBox:n,value:e}):Z.isValidElement(e)?e.type===Sr?Z.cloneElement(e,{key:"label-implicit",viewBox:n}):Q.createElement(Sr,{key:"label-implicit",content:e,viewBox:n}):nt(e)?Q.createElement(Sr,{key:"label-implicit",content:e,viewBox:n}):uf(e)?Q.createElement(Sr,Od({viewBox:n},e,{key:"label-implicit"})):null:null},Zoe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=iW(e),o=Li(i,Sr).map(function(l,c){return Z.cloneElement(l,{viewBox:n||a,key:"label-".concat(c)})});if(!r)return o;var s=Yoe(e.label,n||a);return[s].concat(Doe(o))};Sr.parseViewBox=iW;Sr.renderCallByParent=Zoe;var tT,nB;function Qoe(){if(nB)return tT;nB=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return tT=t,tT}var Joe=Qoe();const ese=Pt(Joe);function Nd(t){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(t)}var tse=["valueAccessor"],nse=["data","dataKey","clockWise","id","textBreakAll"];function rse(t){return sse(t)||ose(t)||ase(t)||ise()}function ise(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ase(t,e){if(t){if(typeof t=="string")return M2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M2(t,e)}}function ose(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sse(t){if(Array.isArray(t))return M2(t)}function M2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ov(){return ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ov.apply(this,arguments)}function rB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(n),!0).forEach(function(r){lse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lse(t,e,n){return e=use(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function use(t){var e=cse(t,"string");return Nd(e)=="symbol"?e:e+""}function cse(t,e){if(Nd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aB(t,e){if(t==null)return{};var n=fse(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var hse=function(e){return Array.isArray(e.value)?ese(e.value):e.value};function So(t){var e=t.valueAccessor,n=e===void 0?hse:e,r=aB(t,tse),i=r.data,a=r.dataKey,o=r.clockWise,s=r.id,l=r.textBreakAll,c=aB(r,nse);return!i||!i.length?null:Q.createElement(Yt,{className:"recharts-label-list"},i.map(function(h,d){var p=dt(a)?n(h,d):Pr(h&&h.payload,a),g=dt(s)?{}:{id:"".concat(s,"-").concat(d)};return Q.createElement(Sr,ov({},at(h,!0),c,g,{parentViewBox:h.parentViewBox,value:p,textBreakAll:l,viewBox:Sr.parseViewBox(dt(o)?h:iB(iB({},h),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}So.displayName="LabelList";function dse(t,e){return t?t===!0?Q.createElement(So,{key:"labelList-implicit",data:e}):Q.isValidElement(t)||nt(t)?Q.createElement(So,{key:"labelList-implicit",data:e,content:t}):uf(t)?Q.createElement(So,ov({data:e},t,{key:"labelList-implicit"})):null:null}function pse(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Li(r,So).map(function(o,s){return Z.cloneElement(o,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var a=dse(t.label,e);return[a].concat(rse(i))}So.renderCallByParent=pse;function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(t)}function P2(){return P2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P2.apply(this,arguments)}function oB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oB(Object(n),!0).forEach(function(r){mse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mse(t,e,n){return e=gse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gse(t){var e=yse(t,"string");return _d(e)=="symbol"?e:e+""}function yse(t,e){if(_d(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vse=function(e,n){var r=ia(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},ey=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,o=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,h=l*(s?1:-1)+i,d=Math.asin(l/h)/av,p=c?a:a+o*d,g=ur(n,r,h,p),y=ur(n,r,i,p),x=c?a-o*d:a,b=ur(n,r,h*Math.cos(d*av),x);return{center:g,circleTangency:y,lineTangency:b,theta:d}},aW=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,s=e.endAngle,l=vse(o,s),c=o+l,h=ur(n,r,a,o),d=ur(n,r,a,c),p="M ".concat(h.x,",").concat(h.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var g=ur(n,r,i,o),y=ur(n,r,i,c);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},bse=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,h=e.endAngle,d=ia(h-c),p=ey({cx:n,cy:r,radius:a,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),g=p.circleTangency,y=p.lineTangency,x=p.theta,b=ey({cx:n,cy:r,radius:a,angle:h,sign:-d,cornerRadius:o,cornerIsExternal:l}),w=b.circleTangency,S=b.lineTangency,$=b.theta,T=l?Math.abs(c-h):Math.abs(c-h)-x-$;if(T<0)return s?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):aW({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:h});var k="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
  `);if(i>0){var E=ey({cx:n,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),I=E.circleTangency,_=E.lineTangency,N=E.theta,R=ey({cx:n,cy:r,radius:i,angle:h,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),O=R.circleTangency,P=R.lineTangency,B=R.theta,U=l?Math.abs(c-h):Math.abs(c-h)-N-B;if(U<0&&o===0)return"".concat(k,"L").concat(n,",").concat(r,"Z");k+="L".concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(U>180),",").concat(+(d>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else k+="L".concat(n,",").concat(r,"Z");return k},xse={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},oW=function(e){var n=sB(sB({},xse),e),r=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,h=n.startAngle,d=n.endAngle,p=n.className;if(o<a||h===d)return null;var g=wt("recharts-sector",p),y=o-a,x=Ol(s,y,0,!0),b;return x>0&&Math.abs(h-d)<360?b=bse({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(x,y/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:h,endAngle:d}):b=aW({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:h,endAngle:d}),Q.createElement("path",P2({},at(n,!0),{className:g,d:b,role:"img"}))};function Rd(t){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rd(t)}function L2(){return L2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L2.apply(this,arguments)}function lB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lB(Object(n),!0).forEach(function(r){wse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wse(t,e,n){return e=Sse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sse(t){var e=Cse(t,"string");return Rd(e)=="symbol"?e:e+""}function Cse(t,e){if(Rd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cB={curveBasisClosed:VQ,curveBasisOpen:WQ,curveBasis:UQ,curveBumpX:EQ,curveBumpY:IQ,curveLinearClosed:GQ,curveLinear:fb,curveMonotoneX:qQ,curveMonotoneY:HQ,curveNatural:XQ,curveStep:KQ,curveStepAfter:ZQ,curveStepBefore:YQ},ty=function(e){return e.x===+e.x&&e.y===+e.y},jh=function(e){return e.x},Uh=function(e){return e.y},$se=function(e,n){if(nt(e))return e;var r="curve".concat(ub(e));return(r==="curveMonotone"||r==="curveBump")&&n?cB["".concat(r).concat(n==="vertical"?"Y":"X")]:cB[r]||fb},Tse=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,o=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,h=$se(r,s),d=c?a.filter(function(x){return ty(x)}):a,p;if(Array.isArray(o)){var g=c?o.filter(function(x){return ty(x)}):o,y=d.map(function(x,b){return uB(uB({},x),{},{base:g[b]})});return s==="vertical"?p=qg().y(Uh).x1(jh).x0(function(x){return x.base.x}):p=qg().x(jh).y1(Uh).y0(function(x){return x.base.y}),p.defined(ty).curve(h),p(y)}return s==="vertical"&&_e(o)?p=qg().y(Uh).x1(jh).x0(o):_e(o)?p=qg().x(jh).y1(Uh).y0(o):p=cU().x(jh).y(Uh),p.defined(ty).curve(h),p(d)},hc=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?Tse(e):i;return Q.createElement("path",L2({},at(e,!1),Ny(e),{className:wt("recharts-curve",n),d:o,ref:a}))},nT={exports:{}},rT,fB;function kse(){if(fB)return rT;fB=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return rT=t,rT}var iT,hB;function Ase(){if(hB)return iT;hB=1;var t=kse();function e(){}function n(){}return n.resetWarningCache=e,iT=function(){function r(o,s,l,c,h,d){if(d!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},iT}var dB;function Ese(){return dB||(dB=1,nT.exports=Ase()()),nT.exports}var Ise=Ese();const Ot=Pt(Ise);var Ose=Object.getOwnPropertyNames,Nse=Object.getOwnPropertySymbols,_se=Object.prototype.hasOwnProperty;function pB(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function ny(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,o=a.get(n),s=a.get(r);if(o&&s)return o===r&&s===n;a.set(n,r),a.set(r,n);var l=t(n,r,i);return a.delete(n),a.delete(r),l}}function mB(t){return Ose(t).concat(Nse(t))}var Rse=Object.hasOwn||function(t,e){return _se.call(t,e)};function Ql(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Dse="__v",Mse="__o",Pse="_owner",gB=Object.getOwnPropertyDescriptor,yB=Object.keys;function Lse(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function Fse(t,e){return Ql(t.getTime(),e.getTime())}function Bse(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function zse(t,e){return t===e}function vB(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),o,s,l=0;(o=a.next())&&!o.done;){for(var c=e.entries(),h=!1,d=0;(s=c.next())&&!s.done;){if(i[d]){d++;continue}var p=o.value,g=s.value;if(n.equals(p[0],g[0],l,d,t,e,n)&&n.equals(p[1],g[1],p[0],g[0],t,e,n)){h=i[d]=!0;break}d++}if(!h)return!1;l++}return!0}var jse=Ql;function Use(t,e,n){var r=yB(t),i=r.length;if(yB(e).length!==i)return!1;for(;i-- >0;)if(!sW(t,e,n,r[i]))return!1;return!0}function Vh(t,e,n){var r=mB(t),i=r.length;if(mB(e).length!==i)return!1;for(var a,o,s;i-- >0;)if(a=r[i],!sW(t,e,n,a)||(o=gB(t,a),s=gB(e,a),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function Vse(t,e){return Ql(t.valueOf(),e.valueOf())}function Wse(t,e){return t.source===e.source&&t.flags===e.flags}function bB(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),o,s;(o=a.next())&&!o.done;){for(var l=e.values(),c=!1,h=0;(s=l.next())&&!s.done;){if(!i[h]&&n.equals(o.value,s.value,o.value,s.value,t,e,n)){c=i[h]=!0;break}h++}if(!c)return!1}return!0}function Gse(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function qse(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function sW(t,e,n,r){return(r===Pse||r===Mse||r===Dse)&&(t.$$typeof||e.$$typeof)?!0:Rse(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Hse="[object Arguments]",Xse="[object Boolean]",Kse="[object Date]",Yse="[object Error]",Zse="[object Map]",Qse="[object Number]",Jse="[object Object]",ele="[object RegExp]",tle="[object Set]",nle="[object String]",rle="[object URL]",ile=Array.isArray,xB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,wB=Object.assign,ale=Object.prototype.toString.call.bind(Object.prototype.toString);function ole(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,s=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,h=t.areSetsEqual,d=t.areTypedArraysEqual,p=t.areUrlsEqual;return function(y,x,b){if(y===x)return!0;if(y==null||x==null)return!1;var w=typeof y;if(w!==typeof x)return!1;if(w!=="object")return w==="number"?o(y,x,b):w==="function"?i(y,x,b):!1;var S=y.constructor;if(S!==x.constructor)return!1;if(S===Object)return s(y,x,b);if(ile(y))return e(y,x,b);if(xB!=null&&xB(y))return d(y,x,b);if(S===Date)return n(y,x,b);if(S===RegExp)return c(y,x,b);if(S===Map)return a(y,x,b);if(S===Set)return h(y,x,b);var $=ale(y);return $===Kse?n(y,x,b):$===ele?c(y,x,b):$===Zse?a(y,x,b):$===tle?h(y,x,b):$===Jse?typeof y.then!="function"&&typeof x.then!="function"&&s(y,x,b):$===rle?p(y,x,b):$===Yse?r(y,x,b):$===Hse?s(y,x,b):$===Xse||$===Qse||$===nle?l(y,x,b):!1}}function sle(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Vh:Lse,areDatesEqual:Fse,areErrorsEqual:Bse,areFunctionsEqual:zse,areMapsEqual:r?pB(vB,Vh):vB,areNumbersEqual:jse,areObjectsEqual:r?Vh:Use,arePrimitiveWrappersEqual:Vse,areRegExpsEqual:Wse,areSetsEqual:r?pB(bB,Vh):bB,areTypedArraysEqual:r?Vh:Gse,areUrlsEqual:qse};if(n&&(i=wB({},i,n(i))),e){var a=ny(i.areArraysEqual),o=ny(i.areMapsEqual),s=ny(i.areObjectsEqual),l=ny(i.areSetsEqual);i=wB({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return i}function lle(t){return function(e,n,r,i,a,o,s){return t(e,n,s)}}function ule(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(l,c){var h=r(),d=h.cache,p=d===void 0?e?new WeakMap:void 0:d,g=h.meta;return n(l,c,{cache:p,equals:i,meta:g,strict:a})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,c){return n(l,c,o)}}var cle=Rs();Rs({strict:!0});Rs({circular:!0});Rs({circular:!0,strict:!0});Rs({createInternalComparator:function(){return Ql}});Rs({strict:!0,createInternalComparator:function(){return Ql}});Rs({circular:!0,createInternalComparator:function(){return Ql}});Rs({circular:!0,createInternalComparator:function(){return Ql},strict:!0});function Rs(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,o=a===void 0?!1:a,s=sle(t),l=ole(s),c=r?r(l):lle(l);return ule({circular:n,comparator:l,createState:i,equals:c,strict:o})}function fle(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function SB(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):fle(i)};requestAnimationFrame(r)}function F2(t){"@babel/helpers - typeof";return F2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F2(t)}function hle(t){return gle(t)||mle(t)||ple(t)||dle()}function dle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ple(t,e){if(t){if(typeof t=="string")return CB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CB(t,e)}}function CB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gle(t){if(Array.isArray(t))return t}function yle(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,s=hle(o),l=s[0],c=s.slice(1);if(typeof l=="number"){SB(i.bind(null,c),l);return}i(l),SB(i.bind(null,c));return}F2(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Dd(t){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dd(t)}function $B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$B(Object(n),!0).forEach(function(r){lW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$B(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lW(t,e,n){return e=vle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vle(t){var e=ble(t,"string");return Dd(e)==="symbol"?e:String(e)}function ble(t,e){if(Dd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xle=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},wle=function(e){return e},Sle=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},sd=function(e,n){return Object.keys(n).reduce(function(r,i){return TB(TB({},r),{},lW({},i,e(i,n[i])))},{})},kB=function(e,n,r){return e.map(function(i){return"".concat(Sle(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Cle(t,e){return kle(t)||Tle(t,e)||uW(t,e)||$le()}function $le(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function kle(t){if(Array.isArray(t))return t}function Ale(t){return Ole(t)||Ile(t)||uW(t)||Ele()}function Ele(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uW(t,e){if(t){if(typeof t=="string")return B2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B2(t,e)}}function Ile(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ole(t){if(Array.isArray(t))return B2(t)}function B2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sv=1e-4,cW=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},fW=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},AB=function(e,n){return function(r){var i=cW(e,n);return fW(i,r)}},Nle=function(e,n){return function(r){var i=cW(e,n),a=[].concat(Ale(i.map(function(o,s){return o*s}).slice(1)),[0]);return fW(a,r)}},EB=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,s=1;break;case"ease":i=.25,a=.1,o=.25,s=1;break;case"ease-in":i=.42,a=0,o=1,s=1;break;case"ease-out":i=.42,a=0,o=.58,s=1;break;case"ease-in-out":i=0,a=0,o=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),h=Cle(c,4);i=h[0],a=h[1],o=h[2],s=h[3]}}}var d=AB(i,o),p=AB(a,s),g=Nle(i,o),y=function(w){return w>1?1:w<0?0:w},x=function(w){for(var S=w>1?1:w,$=S,T=0;T<8;++T){var k=d($)-S,E=g($);if(Math.abs(k-S)<sv||E<sv)return p($);$=y($-k/E)}return p($)};return x.isStepper=!1,x},_le=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,o=e.dt,s=o===void 0?17:o,l=function(h,d,p){var g=-(h-d)*r,y=p*a,x=p+(g-y)*s/1e3,b=p*s/1e3+h;return Math.abs(b-d)<sv&&Math.abs(x)<sv?[d,0]:[b,x]};return l.isStepper=!0,l.dt=s,l},Rle=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return EB(i);case"spring":return _le();default:if(i.split("(")[0]==="cubic-bezier")return EB(i)}return typeof i=="function"?i:null};function Md(t){"@babel/helpers - typeof";return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Md(t)}function IB(t){return Ple(t)||Mle(t)||hW(t)||Dle()}function Dle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ple(t){if(Array.isArray(t))return j2(t)}function OB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OB(Object(n),!0).forEach(function(r){z2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z2(t,e,n){return e=Lle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lle(t){var e=Fle(t,"string");return Md(e)==="symbol"?e:String(e)}function Fle(t,e){if(Md(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Md(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ble(t,e){return Ule(t)||jle(t,e)||hW(t,e)||zle()}function zle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hW(t,e){if(t){if(typeof t=="string")return j2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j2(t,e)}}function j2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Ule(t){if(Array.isArray(t))return t}var lv=function(e,n,r){return e+(n-e)*r},U2=function(e){var n=e.from,r=e.to;return n!==r},Vle=function t(e,n,r){var i=sd(function(a,o){if(U2(o)){var s=e(o.from,o.to,o.velocity),l=Ble(s,2),c=l[0],h=l[1];return sr(sr({},o),{},{from:c,velocity:h})}return o},n);return r<1?sd(function(a,o){return U2(o)?sr(sr({},o),{},{velocity:lv(o.velocity,i[a].velocity,r),from:lv(o.from,i[a].from,r)}):o},n):t(e,i,r-1)};const Wle=function(t,e,n,r,i){var a=xle(t,e),o=a.reduce(function(b,w){return sr(sr({},b),{},z2({},w,[t[w],e[w]]))},{}),s=a.reduce(function(b,w){return sr(sr({},b),{},z2({},w,{from:t[w],velocity:0,to:e[w]}))},{}),l=-1,c,h,d=function(){return null},p=function(){return sd(function(w,S){return S.from},s)},g=function(){return!Object.values(s).filter(U2).length},y=function(w){c||(c=w);var S=w-c,$=S/n.dt;s=Vle(n,s,$),i(sr(sr(sr({},t),e),p())),c=w,g()||(l=requestAnimationFrame(d))},x=function(w){h||(h=w);var S=(w-h)/r,$=sd(function(k,E){return lv.apply(void 0,IB(E).concat([n(S)]))},o);if(i(sr(sr(sr({},t),e),$)),S<1)l=requestAnimationFrame(d);else{var T=sd(function(k,E){return lv.apply(void 0,IB(E).concat([n(1)]))},o);i(sr(sr(sr({},t),e),T))}};return d=n.isStepper?y:x,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Ic(t){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(t)}var Gle=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function qle(t,e){if(t==null)return{};var n=Hle(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hle(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function aT(t){return Zle(t)||Yle(t)||Kle(t)||Xle()}function Xle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kle(t,e){if(t){if(typeof t=="string")return V2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V2(t,e)}}function Yle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zle(t){if(Array.isArray(t))return V2(t)}function V2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function NB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NB(Object(n),!0).forEach(function(r){Zh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zh(t,e,n){return e=dW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jle(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dW(r.key),r)}}function eue(t,e,n){return e&&Jle(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dW(t){var e=tue(t,"string");return Ic(e)==="symbol"?e:String(e)}function tue(t,e){if(Ic(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ic(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W2(t,e)}function W2(t,e){return W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},W2(t,e)}function rue(t){var e=iue();return function(){var r=uv(t),i;if(e){var a=uv(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return G2(this,i)}}function G2(t,e){if(e&&(Ic(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q2(t)}function q2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uv(t){return uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uv(t)}var Fa=function(t){nue(n,t);var e=rue(n);function n(r,i){var a;Qle(this,n),a=e.call(this,r,i);var o=a.props,s=o.isActive,l=o.attributeName,c=o.from,h=o.to,d=o.steps,p=o.children,g=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(q2(a)),a.changeStyle=a.changeStyle.bind(q2(a)),!s||g<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:h}),G2(a);if(d&&d.length)a.state={style:d[0].style};else if(c){if(typeof p=="function")return a.state={style:c},G2(a);a.state={style:l?Zh({},l,c):c}}else a.state={style:{}};return a}return eue(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,s=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,h=a.to,d=a.from,p=this.state.style;if(s){if(!o){var g={style:l?Zh({},l,h):h};this.state&&p&&(l&&p[l]!==h||!l&&p!==h)&&this.setState(g);return}if(!(cle(i.to,h)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=y||c?d:i.to;if(this.state&&p){var b={style:l?Zh({},l,x):x};(l&&p[l]!==x||!l&&p!==x)&&this.setState(b)}this.runAnimation(Ki(Ki({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,s=i.to,l=i.duration,c=i.easing,h=i.begin,d=i.onAnimationEnd,p=i.onAnimationStart,g=Wle(o,s,Rle(c),l,this.changeStyle),y=function(){a.stopJSAnimation=g()};this.manager.start([p,h,y,l,d])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,s=i.begin,l=i.onAnimationStart,c=o[0],h=c.style,d=c.duration,p=d===void 0?0:d,g=function(x,b,w){if(w===0)return x;var S=b.duration,$=b.easing,T=$===void 0?"ease":$,k=b.style,E=b.properties,I=b.onAnimationEnd,_=w>0?o[w-1]:b,N=E||Object.keys(k);if(typeof T=="function"||T==="spring")return[].concat(aT(x),[a.runJSAnimation.bind(a,{from:_.style,to:k,duration:S,easing:T}),S]);var R=kB(N,S,T),O=Ki(Ki(Ki({},_.style),k),{},{transition:R});return[].concat(aT(x),[O,S,I]).filter(wle)};return this.manager.start([l].concat(aT(o.reduce(g,[h,Math.max(p,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=yle());var a=i.begin,o=i.duration,s=i.attributeName,l=i.to,c=i.easing,h=i.onAnimationStart,d=i.onAnimationEnd,p=i.steps,g=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof c=="function"||typeof g=="function"||c==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var x=s?Zh({},s,l):l,b=kB(Object.keys(x),o,c);y.start([h,a,Ki(Ki({},x),{},{transition:b}),o,d])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=qle(i,Gle),c=Z.Children.count(a),h=this.state.style;if(typeof a=="function")return a(h);if(!s||c===0||o<=0)return a;var d=function(g){var y=g.props,x=y.style,b=x===void 0?{}:x,w=y.className,S=Z.cloneElement(g,Ki(Ki({},l),{},{style:Ki(Ki({},b),h),className:w}));return S};return c===1?d(Z.Children.only(a)):Q.createElement("div",null,Z.Children.map(a,function(p){return d(p)}))}}]),n}(Z.PureComponent);Fa.displayName="Animate";Fa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Fa.propTypes={from:Ot.oneOfType([Ot.object,Ot.string]),to:Ot.oneOfType([Ot.object,Ot.string]),attributeName:Ot.string,duration:Ot.number,begin:Ot.number,easing:Ot.oneOfType([Ot.string,Ot.func]),steps:Ot.arrayOf(Ot.shape({duration:Ot.number.isRequired,style:Ot.object.isRequired,easing:Ot.oneOfType([Ot.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ot.func]),properties:Ot.arrayOf("string"),onAnimationEnd:Ot.func})),children:Ot.oneOfType([Ot.node,Ot.func]),isActive:Ot.bool,canBegin:Ot.bool,onAnimationEnd:Ot.func,shouldReAnimate:Ot.bool,onAnimationStart:Ot.func,onAnimationReStart:Ot.func};function Pd(t){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pd(t)}function cv(){return cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cv.apply(this,arguments)}function aue(t,e){return uue(t)||lue(t,e)||sue(t,e)||oue()}function oue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sue(t,e){if(t){if(typeof t=="string")return _B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _B(t,e)}}function _B(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lue(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function uue(t){if(Array.isArray(t))return t}function RB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RB(Object(n),!0).forEach(function(r){cue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cue(t,e,n){return e=fue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fue(t){var e=hue(t,"string");return Pd(e)=="symbol"?e:e+""}function hue(t,e){if(Pd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MB=function(e,n,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,h;if(o>0&&a instanceof Array){for(var d=[0,0,0,0],p=0,g=4;p<g;p++)d[p]=a[p]>o?o:a[p];h="M".concat(e,",").concat(n+s*d[0]),d[0]>0&&(h+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(n)),h+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(h+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+s*d[1])),h+="L ".concat(e+r,",").concat(n+i-s*d[2]),d[2]>0&&(h+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),h+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(h+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-s*d[3])),h+="Z"}else if(o>0&&a===+a&&a>0){var y=Math.min(o,a);h="M ".concat(e,",").concat(n+s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+l*y,",").concat(n,`
            L `).concat(e+r-l*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r,",").concat(n+s*y,`
            L `).concat(e+r,",").concat(n+i-s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e+r-l*y,",").concat(n+i,`
            L `).concat(e+l*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(e,",").concat(n+i-s*y," Z")}else h="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return h},due=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,o=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(a,a+s),h=Math.max(a,a+s),d=Math.min(o,o+l),p=Math.max(o,o+l);return r>=c&&r<=h&&i>=d&&i<=p}return!1},pue={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rE=function(e){var n=DB(DB({},pue),e),r=Z.useRef(),i=Z.useState(-1),a=aue(i,2),o=a[0],s=a[1];Z.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&s(T)}catch{}},[]);var l=n.x,c=n.y,h=n.width,d=n.height,p=n.radius,g=n.className,y=n.animationEasing,x=n.animationDuration,b=n.animationBegin,w=n.isAnimationActive,S=n.isUpdateAnimationActive;if(l!==+l||c!==+c||h!==+h||d!==+d||h===0||d===0)return null;var $=wt("recharts-rectangle",g);return S?Q.createElement(Fa,{canBegin:o>0,from:{width:h,height:d,x:l,y:c},to:{width:h,height:d,x:l,y:c},duration:x,animationEasing:y,isActive:S},function(T){var k=T.width,E=T.height,I=T.x,_=T.y;return Q.createElement(Fa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,isActive:w,easing:y},Q.createElement("path",cv({},at(n,!0),{className:$,d:MB(I,_,k,E,p),ref:r})))}):Q.createElement("path",cv({},at(n,!0),{className:$,d:MB(l,c,h,d,p)}))};function H2(){return H2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H2.apply(this,arguments)}var Tb=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,o=wt("recharts-dot",a);return n===+n&&r===+r&&i===+i?Q.createElement("circle",H2({},at(e,!1),Ny(e),{className:o,cx:n,cy:r,r:i})):null};function Ld(t){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ld(t)}var mue=["x","y","top","left","width","height","className"];function X2(){return X2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X2.apply(this,arguments)}function PB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PB(Object(n),!0).forEach(function(r){yue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yue(t,e,n){return e=vue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vue(t){var e=bue(t,"string");return Ld(e)=="symbol"?e:e+""}function bue(t,e){if(Ld(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xue(t,e){if(t==null)return{};var n=wue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Sue=function(e,n,r,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},Cue=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.top,s=o===void 0?0:o,l=e.left,c=l===void 0?0:l,h=e.width,d=h===void 0?0:h,p=e.height,g=p===void 0?0:p,y=e.className,x=xue(e,mue),b=gue({x:r,y:a,top:s,left:c,width:d,height:g},x);return!_e(r)||!_e(a)||!_e(d)||!_e(g)||!_e(s)||!_e(c)?null:Q.createElement("path",X2({},at(b,!0),{className:wt("recharts-cross",y),d:Sue(r,a,d,g,s,c)}))},oT,LB;function $ue(){if(LB)return oT;LB=1;var t=RU(),e=t(Object.getPrototypeOf,Object);return oT=e,oT}var sT,FB;function Tue(){if(FB)return sT;FB=1;var t=_o(),e=$ue(),n=Ro(),r="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,l=o.call(Object);function c(h){if(!n(h)||t(h)!=r)return!1;var d=e(h);if(d===null)return!0;var p=s.call(d,"constructor")&&d.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==l}return sT=c,sT}var kue=Tue();const Aue=Pt(kue);var lT,BB;function Eue(){if(BB)return lT;BB=1;var t=_o(),e=Ro(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return lT=r,lT}var Iue=Eue();const Oue=Pt(Iue);function Fd(t){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fd(t)}function fv(){return fv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fv.apply(this,arguments)}function Nue(t,e){return Mue(t)||Due(t,e)||Rue(t,e)||_ue()}function _ue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rue(t,e){if(t){if(typeof t=="string")return zB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zB(t,e)}}function zB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Due(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Mue(t){if(Array.isArray(t))return t}function jB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jB(Object(n),!0).forEach(function(r){Pue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pue(t,e,n){return e=Lue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lue(t){var e=Fue(t,"string");return Fd(e)=="symbol"?e:e+""}function Fue(t,e){if(Fd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VB=function(e,n,r,i,a){var o=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-o/2,",").concat(n+a),s+="L ".concat(e+r-o/2-i,",").concat(n+a),s+="L ".concat(e,",").concat(n," Z"),s},Bue={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zue=function(e){var n=UB(UB({},Bue),e),r=Z.useRef(),i=Z.useState(-1),a=Nue(i,2),o=a[0],s=a[1];Z.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var $=r.current.getTotalLength();$&&s($)}catch{}},[]);var l=n.x,c=n.y,h=n.upperWidth,d=n.lowerWidth,p=n.height,g=n.className,y=n.animationEasing,x=n.animationDuration,b=n.animationBegin,w=n.isUpdateAnimationActive;if(l!==+l||c!==+c||h!==+h||d!==+d||p!==+p||h===0&&d===0||p===0)return null;var S=wt("recharts-trapezoid",g);return w?Q.createElement(Fa,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:c},to:{upperWidth:h,lowerWidth:d,height:p,x:l,y:c},duration:x,animationEasing:y,isActive:w},function($){var T=$.upperWidth,k=$.lowerWidth,E=$.height,I=$.x,_=$.y;return Q.createElement(Fa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,easing:y},Q.createElement("path",fv({},at(n,!0),{className:S,d:VB(I,_,T,k,E),ref:r})))}):Q.createElement("g",null,Q.createElement("path",fv({},at(n,!0),{className:S,d:VB(l,c,h,d,p)})))},jue=["option","shapeType","propTransformer","activeClassName","isActive"];function Bd(t){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bd(t)}function Uue(t,e){if(t==null)return{};var n=Vue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function WB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WB(Object(n),!0).forEach(function(r){Wue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wue(t,e,n){return e=Gue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gue(t){var e=que(t,"string");return Bd(e)=="symbol"?e:e+""}function que(t,e){if(Bd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hue(t,e){return hv(hv({},e),t)}function Xue(t,e){return t==="symbols"}function GB(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Q.createElement(rE,n);case"trapezoid":return Q.createElement(zue,n);case"sector":return Q.createElement(oW,n);case"symbols":if(Xue(e))return Q.createElement(SA,n);break;default:return null}}function Kue(t){return Z.isValidElement(t)?t.props:t}function Yue(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?Hue:r,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,s=t.isActive,l=Uue(t,jue),c;if(Z.isValidElement(e))c=Z.cloneElement(e,hv(hv({},l),Kue(e)));else if(nt(e))c=e(l);else if(Aue(e)&&!Oue(e)){var h=i(e,l);c=Q.createElement(GB,{shapeType:n,elementProps:h})}else{var d=l;c=Q.createElement(GB,{shapeType:n,elementProps:d})}return s?Q.createElement(Yt,{className:o},c):c}function kb(t,e){return e!=null&&"trapezoids"in t.props}function Ab(t,e){return e!=null&&"sectors"in t.props}function zd(t,e){return e!=null&&"points"in t.props}function Zue(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function Que(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Jue(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function ece(t,e){var n;return kb(t,e)?n=Zue:Ab(t,e)?n=Que:zd(t,e)&&(n=Jue),n}function tce(t,e){var n;return kb(t,e)?n="trapezoids":Ab(t,e)?n="sectors":zd(t,e)&&(n="points"),n}function nce(t,e){if(kb(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Ab(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return zd(t,e)?e.payload:{}}function rce(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=tce(n,e),a=nce(n,e),o=r.filter(function(l,c){var h=Ac(a,l),d=n.props[i].filter(function(y){var x=ece(n,e);return x(y,e)}),p=n.props[i].indexOf(d[d.length-1]),g=c===p;return h&&g}),s=r.indexOf(o[o.length-1]);return s}var uT,qB;function ice(){if(qB)return uT;qB=1;var t=Math.ceil,e=Math.max;function n(r,i,a,o){for(var s=-1,l=e(t((i-r)/(a||1)),0),c=Array(l);l--;)c[o?l:++s]=r,r+=a;return c}return uT=n,uT}var cT,HB;function pW(){if(HB)return cT;HB=1;var t=KU(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-1/0){var a=i<0?-1:1;return a*n}return i===i?i:0}return cT=r,cT}var fT,XB;function ace(){if(XB)return fT;XB=1;var t=ice(),e=mb(),n=pW();function r(i){return function(a,o,s){return s&&typeof s!="number"&&e(a,o,s)&&(o=s=void 0),a=n(a),o===void 0?(o=a,a=0):o=n(o),s=s===void 0?a<o?1:-1:n(s),t(a,o,s,i)}}return fT=r,fT}var hT,KB;function oce(){if(KB)return hT;KB=1;var t=ace(),e=t();return hT=e,hT}var sce=oce();const dv=Pt(sce);function jd(t){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(t)}function YB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(n),!0).forEach(function(r){mW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mW(t,e,n){return e=lce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lce(t){var e=uce(t,"string");return jd(e)=="symbol"?e:e+""}function uce(t,e){if(jd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cce=["Webkit","Moz","O","ms"],fce=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=cce.reduce(function(a,o){return ZB(ZB({},a),{},mW({},o+r,n))},{});return i[e]=n,i};function Oc(t){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(t)}function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pv.apply(this,arguments)}function QB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QB(Object(n),!0).forEach(function(r){ui(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yW(r.key),r)}}function dce(t,e,n){return e&&JB(t.prototype,e),n&&JB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pce(t,e,n){return e=mv(e),mce(t,gW()?Reflect.construct(e,n||[],mv(t).constructor):e.apply(t,n))}function mce(t,e){if(e&&(Oc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gce(t)}function gce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gW=function(){return!!t})()}function mv(t){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mv(t)}function yce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K2(t,e)}function K2(t,e){return K2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},K2(t,e)}function ui(t,e,n){return e=yW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yW(t){var e=vce(t,"string");return Oc(e)=="symbol"?e:e+""}function vce(t,e){if(Oc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bce=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,o=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=ad().domain(dv(0,l)).range([a,a+o-s]),h=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:h}},ez=function(e){return e.changedTouches&&!!e.changedTouches.length},Nc=function(t){function e(n){var r;return hce(this,e),r=pce(this,e,[n]),ui(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ui(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ui(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,s=i.startIndex;o==null||o({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),ui(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ui(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ui(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ui(r,"handleSlideDragStart",function(i){var a=ez(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return yce(e,t),dce(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,h=c.length-1,d=Math.min(i,a),p=Math.max(i,a),g=e.getIndexInRange(o,d),y=e.getIndexInRange(o,p);return{startIndex:g-g%l,endIndex:y===h?h:y-y%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,s=i.dataKey,l=Pr(a[r],s,r);return nt(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,s=i.endX,l=this.props,c=l.x,h=l.width,d=l.travellerWidth,p=l.startIndex,g=l.endIndex,y=l.onChange,x=r.pageX-a;x>0?x=Math.min(x,c+h-d-s,c+h-d-o):x<0&&(x=Math.max(x,c-o,c-s));var b=this.getIndex({startX:o+x,endX:s+x});(b.startIndex!==p||b.endIndex!==g)&&y&&y(b),this.setState({startX:o+x,endX:s+x,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=ez(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[o],h=this.props,d=h.x,p=h.width,g=h.travellerWidth,y=h.onChange,x=h.gap,b=h.data,w={startX:this.state.startX,endX:this.state.endX},S=r.pageX-a;S>0?S=Math.min(S,d+p-g-c):S<0&&(S=Math.max(S,d-c)),w[o]=c+S;var $=this.getIndex(w),T=$.startIndex,k=$.endIndex,E=function(){var _=b.length-1;return o==="startX"&&(s>l?T%x===0:k%x===0)||s<l&&k===_||o==="endX"&&(s>l?k%x===0:T%x===0)||s>l&&k===_};this.setState(ui(ui({},o,c+S),"brushMoveStartX",r.pageX),function(){y&&E()&&y($)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,s=o.scaleValues,l=o.startX,c=o.endX,h=this.state[i],d=s.indexOf(h);if(d!==-1){var p=d+r;if(!(p===-1||p>=s.length)){var g=s[p];i==="startX"&&g>=c||i==="endX"&&g<=l||this.setState(ui({},i,g),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.fill,c=r.stroke;return Q.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:o,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.data,c=r.children,h=r.padding,d=Z.Children.only(c);return d?Q.cloneElement(d,{x:i,y:a,width:o,height:s,margin:h,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,s=this,l=this.props,c=l.y,h=l.travellerWidth,d=l.height,p=l.traveller,g=l.ariaLabel,y=l.data,x=l.startIndex,b=l.endIndex,w=Math.max(r,this.props.x),S=dT(dT({},at(this.props,!1)),{},{x:w,y:c,width:h,height:d}),$=g||"Min value: ".concat((a=y[x])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=y[b])===null||o===void 0?void 0:o.name);return Q.createElement(Yt,{tabIndex:0,role:"slider","aria-label":$,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),s.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,S))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,s=a.height,l=a.stroke,c=a.travellerWidth,h=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:h,y:o,width:d,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,h=this.state,d=h.startX,p=h.endX,g=5,y={pointerEvents:"none",fill:c};return Q.createElement(Yt,{className:"recharts-brush-texts"},Q.createElement(Vy,pv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,p)-g,y:o+s/2},y),this.getTextOfTick(i)),Q.createElement(Vy,pv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,p)+l+g,y:o+s/2},y),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,s=r.x,l=r.y,c=r.width,h=r.height,d=r.alwaysShowText,p=this.state,g=p.startX,y=p.endX,x=p.isTextActive,b=p.isSlideMoving,w=p.isTravellerMoving,S=p.isTravellerFocused;if(!i||!i.length||!_e(s)||!_e(l)||!_e(c)||!_e(h)||c<=0||h<=0)return null;var $=wt("recharts-brush",a),T=Q.Children.count(o)===1,k=fce("userSelect","none");return Q.createElement(Yt,{className:$,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(g,y),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(y,"endX"),(x||b||w||S||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,s=r.height,l=r.stroke,c=Math.floor(a+s/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:i,y:a,width:o,height:s,fill:l,stroke:"none"}),Q.createElement("line",{x1:i+1,y1:c,x2:i+o-1,y2:c,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:i+1,y1:c+2,x2:i+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return Q.isValidElement(r)?a=Q.cloneElement(r,i):nt(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,h=r.startIndex,d=r.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return dT({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o},a&&a.length?bce({data:a,width:o,x:s,travellerWidth:l,startIndex:h,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+o-l]);var p=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,s=a-1;s-o>1;){var l=Math.floor((o+s)/2);r[l]>i?s=l:o=l}return i>=r[s]?s:o}}])}(Z.PureComponent);ui(Nc,"displayName","Brush");ui(Nc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var pT,tz;function xce(){if(tz)return pT;tz=1;var t=IA();function e(n,r){var i;return t(n,function(a,o,s){return i=r(a,o,s),!i}),!!i}return pT=e,pT}var mT,nz;function wce(){if(nz)return mT;nz=1;var t=kU(),e=Os(),n=xce(),r=ei(),i=mb();function a(o,s,l){var c=r(o)?t:n;return l&&i(o,s,l)&&(s=void 0),c(o,e(s,3))}return mT=a,mT}var Sce=wce();const Cce=Pt(Sce);var Na=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},gT,rz;function $ce(){if(rz)return gT;rz=1;var t=WU();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return gT=e,gT}var yT,iz;function Tce(){if(iz)return yT;iz=1;var t=$ce(),e=UU(),n=Os();function r(i,a){var o={};return a=n(a,3),e(i,function(s,l,c){t(o,l,a(s,l,c))}),o}return yT=r,yT}var kce=Tce();const Ace=Pt(kce);var vT,az;function Ece(){if(az)return vT;az=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return vT=t,vT}var bT,oz;function Ice(){if(oz)return bT;oz=1;var t=IA();function e(n,r){var i=!0;return t(n,function(a,o,s){return i=!!r(a,o,s),i}),i}return bT=e,bT}var xT,sz;function Oce(){if(sz)return xT;sz=1;var t=Ece(),e=Ice(),n=Os(),r=ei(),i=mb();function a(o,s,l){var c=r(o)?t:e;return l&&i(o,s,l)&&(s=void 0),c(o,n(s,3))}return xT=a,xT}var Nce=Oce();const vW=Pt(Nce);var _ce=["x","y"];function Ud(t){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(t)}function Y2(){return Y2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y2.apply(this,arguments)}function lz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(n),!0).forEach(function(r){Rce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rce(t,e,n){return e=Dce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dce(t){var e=Mce(t,"string");return Ud(e)=="symbol"?e:e+""}function Mce(t,e){if(Ud(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pce(t,e){if(t==null)return{};var n=Lce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Fce(t,e){var n=t.x,r=t.y,i=Pce(t,_ce),a="".concat(n),o=parseInt(a,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),h=parseInt(c,10),d="".concat(e.width||i.width),p=parseInt(d,10);return Wh(Wh(Wh(Wh(Wh({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:h,width:p,name:e.name,radius:e.radius})}function uz(t){return Q.createElement(Yue,Y2({shapeType:"rectangle",propTransformer:Fce,activeClassName:"recharts-active-bar"},t))}var Bce=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,i):(a||_l(),n)}},zce=["value","background"],bW;function _c(t){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(t)}function jce(t,e){if(t==null)return{};var n=Uce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gv(){return gv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gv.apply(this,arguments)}function cz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cz(Object(n),!0).forEach(function(r){ds(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wW(r.key),r)}}function Wce(t,e,n){return e&&fz(t.prototype,e),n&&fz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gce(t,e,n){return e=yv(e),qce(t,xW()?Reflect.construct(e,n||[],yv(t).constructor):e.apply(t,n))}function qce(t,e){if(e&&(_c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hce(t)}function Hce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xW=function(){return!!t})()}function yv(t){return yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yv(t)}function Xce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z2(t,e)}function Z2(t,e){return Z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Z2(t,e)}function ds(t,e,n){return e=wW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wW(t){var e=Kce(t,"string");return _c(e)=="symbol"?e:e+""}function Kce(t,e){if(_c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pp=function(t){function e(){var n;Vce(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Gce(this,e,[].concat(i)),ds(n,"state",{isAnimationFinished:!1}),ds(n,"id",ff("recharts-bar-")),ds(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),ds(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return Xce(e,t),Wce(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,s=a.dataKey,l=a.activeIndex,c=a.activeBar,h=at(this.props,!1);return r&&r.map(function(d,p){var g=p===l,y=g?c:o,x=Tn(Tn(Tn({},h),d),{},{isActive:g,option:y,index:p,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Q.createElement(Yt,gv({className:"recharts-bar-rectangle"},_y(i.props,d,p),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(p)}),Q.createElement(uz,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,h=i.animationEasing,d=i.animationId,p=this.state.prevData;return Q.createElement(Fa,{begin:l,duration:c,isActive:s,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var y=g.t,x=a.map(function(b,w){var S=p&&p[w];if(S){var $=lr(S.x,b.x),T=lr(S.y,b.y),k=lr(S.width,b.width),E=lr(S.height,b.height);return Tn(Tn({},b),{},{x:$(y),y:T(y),width:k(y),height:E(y)})}if(o==="horizontal"){var I=lr(0,b.height),_=I(y);return Tn(Tn({},b),{},{y:b.y+b.height-_,height:_})}var N=lr(0,b.width),R=N(y);return Tn(Tn({},b),{},{width:R})});return Q.createElement(Yt,null,r.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!Ac(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,s=i.activeIndex,l=at(this.props.background,!1);return a.map(function(c,h){c.value;var d=c.background,p=jce(c,zce);if(!d)return null;var g=Tn(Tn(Tn(Tn(Tn({},p),{},{fill:"#eee"},d),l),_y(r.props,c,h)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:h,className:"recharts-bar-background-rectangle"});return Q.createElement(uz,gv({key:"background-bar-".concat(h),option:r.props.background,isActive:h===s},g))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,s=a.xAxis,l=a.yAxis,c=a.layout,h=a.children,d=Li(h,dp);if(!d)return null;var p=c==="vertical"?o[0].height/2:o[0].width/2,g=function(b,w){var S=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:S,errorVal:Pr(b,w)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Q.createElement(Yt,y,d.map(function(x){return Q.cloneElement(x,{key:"error-bar-".concat(i,"-").concat(x.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,offset:p,dataPointFormatter:g})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,s=r.xAxis,l=r.yAxis,c=r.left,h=r.top,d=r.width,p=r.height,g=r.isAnimationActive,y=r.background,x=r.id;if(i||!a||!a.length)return null;var b=this.state.isAnimationFinished,w=wt("recharts-bar",o),S=s&&s.allowDataOverflow,$=l&&l.allowDataOverflow,T=S||$,k=dt(x)?this.id:x;return Q.createElement(Yt,{className:w},S||$?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(k)},Q.createElement("rect",{x:S?c:c-d/2,y:$?h:h-p/2,width:S?d:d*2,height:$?p:p*2}))):null,Q.createElement(Yt,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(k,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,k),(!g||b)&&So.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(Z.PureComponent);bW=pp;ds(pp,"displayName","Bar");ds(pp,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Kl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ds(pp,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,o=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,h=t.dataStartIndex,d=t.displayedData,p=t.offset,g=poe(r,n);if(!g)return null;var y=e.layout,x=n.type.defaultProps,b=x!==void 0?Tn(Tn({},x),n.props):n.props,w=b.dataKey,S=b.children,$=b.minPointSize,T=y==="horizontal"?o:a,k=c?T.scale.domain():null,E=Soe({numericAxis:T}),I=Li(S,ZU),_=d.map(function(N,R){var O,P,B,U,z,M;c?O=moe(c[h+R],k):(O=Pr(N,w),Array.isArray(O)||(O=[E,O]));var V=Bce($,bW.defaultProps.minPointSize)(O[1],R);if(y==="horizontal"){var W,H=[o.scale(O[0]),o.scale(O[1])],L=H[0],G=H[1];P=XF({axis:a,ticks:s,bandSize:i,offset:g.offset,entry:N,index:R}),B=(W=G??L)!==null&&W!==void 0?W:void 0,U=g.size;var q=L-G;if(z=Number.isNaN(q)?0:q,M={x:P,y:o.y,width:U,height:o.height},Math.abs(V)>0&&Math.abs(z)<Math.abs(V)){var K=ia(z||V)*(Math.abs(V)-Math.abs(z));B-=K,z+=K}}else{var oe=[a.scale(O[0]),a.scale(O[1])],pe=oe[0],ge=oe[1];if(P=pe,B=XF({axis:o,ticks:l,bandSize:i,offset:g.offset,entry:N,index:R}),U=ge-pe,z=g.size,M={x:a.x,y:B,width:a.width,height:z},Math.abs(V)>0&&Math.abs(U)<Math.abs(V)){var Re=ia(U||V)*(Math.abs(V)-Math.abs(U));U+=Re}}return Tn(Tn(Tn({},N),{},{x:P,y:B,width:U,height:z,value:c?O:O[1],payload:N,background:M},I&&I[R]&&I[R].props),{},{tooltipPayload:[rW(n,N)],tooltipPosition:{x:P+U/2,y:B+z/2}})});return Tn({data:_,layout:y},p)});function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(t)}function Yce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SW(r.key),r)}}function Zce(t,e,n){return e&&hz(t.prototype,e),n&&hz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ji(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dz(Object(n),!0).forEach(function(r){Eb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eb(t,e,n){return e=SW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SW(t){var e=Qce(t,"string");return Vd(e)=="symbol"?e:e+""}function Qce(t,e){if(Vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CW=function(e,n,r,i,a){var o=e.width,s=e.height,l=e.layout,c=e.children,h=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},p=!!ci(c,pp);return h.reduce(function(g,y){var x=n[y],b=x.orientation,w=x.domain,S=x.padding,$=S===void 0?{}:S,T=x.mirror,k=x.reversed,E="".concat(b).concat(T?"Mirror":""),I,_,N,R,O;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var P=w[1]-w[0],B=1/0,U=x.categoricalDomain.sort(JZ);if(U.forEach(function(oe,pe){pe>0&&(B=Math.min((oe||0)-(U[pe-1]||0),B))}),Number.isFinite(B)){var z=B/P,M=x.layout==="vertical"?r.height:r.width;if(x.padding==="gap"&&(I=z*M/2),x.padding==="no-gap"){var V=Ol(e.barCategoryGap,z*M),W=z*M/2;I=W-V-(W-V)/M*V}}}i==="xAxis"?_=[r.left+($.left||0)+(I||0),r.left+r.width-($.right||0)-(I||0)]:i==="yAxis"?_=l==="horizontal"?[r.top+r.height-($.bottom||0),r.top+($.top||0)]:[r.top+($.top||0)+(I||0),r.top+r.height-($.bottom||0)-(I||0)]:_=x.range,k&&(_=[_[1],_[0]]);var H=hoe(x,a,p),L=H.scale,G=H.realScaleType;L.domain(w).range(_),doe(L);var q=woe(L,Ji(Ji({},x),{},{realScaleType:G}));i==="xAxis"?(O=b==="top"&&!T||b==="bottom"&&T,N=r.left,R=d[E]-O*x.height):i==="yAxis"&&(O=b==="left"&&!T||b==="right"&&T,N=d[E]-O*x.width,R=r.top);var K=Ji(Ji(Ji({},x),q),{},{realScaleType:G,x:N,y:R,scale:L,width:i==="xAxis"?r.width:x.width,height:i==="yAxis"?r.height:x.height});return K.bandSize=iv(K,q),!x.hide&&i==="xAxis"?d[E]+=(O?-1:1)*K.height:x.hide||(d[E]+=(O?-1:1)*K.width),Ji(Ji({},g),{},Eb({},y,K))},{})},$W=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},Jce=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return $W({x:n,y:r},{x:i,y:a})},TW=function(){function t(e){Yce(this,t),this.scale=e}return Zce(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Eb(TW,"EPS",1e-4);var iE=function(e){var n=Object.keys(e).reduce(function(r,i){return Ji(Ji({},r),{},Eb({},i,TW.create(e[i])))},{});return Ji(Ji({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,s=a.position;return Ace(i,function(l,c){return n[c].apply(l,{bandAware:o,position:s})})},isInRange:function(i){return vW(i,function(a,o){return n[o].isInRange(a)})}})};function efe(t){return(t%180+180)%180}var tfe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=efe(i),o=a*Math.PI/180,s=Math.atan(r/n),l=o>s&&o<Math.PI-s?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},wT,pz;function nfe(){if(pz)return wT;pz=1;var t=Os(),e=lp(),n=db();function r(i){return function(a,o,s){var l=Object(a);if(!e(a)){var c=t(o,3);a=n(a),o=function(d){return c(l[d],d,l)}}var h=i(a,o,s);return h>-1?l[c?a[h]:h]:void 0}}return wT=r,wT}var ST,mz;function rfe(){if(mz)return ST;mz=1;var t=pW();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return ST=e,ST}var CT,gz;function ife(){if(gz)return CT;gz=1;var t=LU(),e=Os(),n=rfe(),r=Math.max;function i(a,o,s){var l=a==null?0:a.length;if(!l)return-1;var c=s==null?0:n(s);return c<0&&(c=r(l+c,0)),t(a,e(o,3),c)}return CT=i,CT}var $T,yz;function afe(){if(yz)return $T;yz=1;var t=nfe(),e=ife(),n=t(e);return $T=n,$T}var ofe=afe();const sfe=Pt(ofe);var lfe=Qj();const ufe=Pt(lfe);var cfe=ufe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),aE=Z.createContext(void 0),oE=Z.createContext(void 0),kW=Z.createContext(void 0),AW=Z.createContext({}),EW=Z.createContext(void 0),IW=Z.createContext(0),OW=Z.createContext(0),vz=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=e.clipPathId,s=e.children,l=e.width,c=e.height,h=cfe(a);return Q.createElement(aE.Provider,{value:r},Q.createElement(oE.Provider,{value:i},Q.createElement(AW.Provider,{value:a},Q.createElement(kW.Provider,{value:h},Q.createElement(EW.Provider,{value:o},Q.createElement(IW.Provider,{value:c},Q.createElement(OW.Provider,{value:l},s)))))))},ffe=function(){return Z.useContext(EW)},NW=function(e){var n=Z.useContext(aE);n==null&&_l();var r=n[e];return r==null&&_l(),r},hfe=function(){var e=Z.useContext(aE);return fs(e)},dfe=function(){var e=Z.useContext(oE),n=sfe(e,function(r){return vW(r.domain,Number.isFinite)});return n||fs(e)},_W=function(e){var n=Z.useContext(oE);n==null&&_l();var r=n[e];return r==null&&_l(),r},pfe=function(){var e=Z.useContext(kW);return e},mfe=function(){return Z.useContext(AW)},sE=function(){return Z.useContext(OW)},lE=function(){return Z.useContext(IW)};function Rc(t){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(t)}function gfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yfe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DW(r.key),r)}}function vfe(t,e,n){return e&&yfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bfe(t,e,n){return e=vv(e),xfe(t,RW()?Reflect.construct(e,n||[],vv(t).constructor):e.apply(t,n))}function xfe(t,e){if(e&&(Rc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wfe(t)}function wfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RW=function(){return!!t})()}function vv(t){return vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vv(t)}function Sfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q2(t,e)}function Q2(t,e){return Q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Q2(t,e)}function bz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bz(Object(n),!0).forEach(function(r){uE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uE(t,e,n){return e=DW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DW(t){var e=Cfe(t,"string");return Rc(e)=="symbol"?e:e+""}function Cfe(t,e){if(Rc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $fe(t,e){return Efe(t)||Afe(t,e)||kfe(t,e)||Tfe()}function Tfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kfe(t,e){if(t){if(typeof t=="string")return wz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wz(t,e)}}function wz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Afe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Efe(t){if(Array.isArray(t))return t}function J2(){return J2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J2.apply(this,arguments)}var Ife=function(e,n){var r;return Q.isValidElement(e)?r=Q.cloneElement(e,n):nt(e)?r=e(n):r=Q.createElement("line",J2({},n,{className:"recharts-reference-line-line"})),r},Ofe=function(e,n,r,i,a,o,s,l,c){var h=a.x,d=a.y,p=a.width,g=a.height;if(r){var y=c.y,x=e.y.apply(y,{position:o});if(Na(c,"discard")&&!e.y.isInRange(x))return null;var b=[{x:h+p,y:x},{x:h,y:x}];return l==="left"?b.reverse():b}if(n){var w=c.x,S=e.x.apply(w,{position:o});if(Na(c,"discard")&&!e.x.isInRange(S))return null;var $=[{x:S,y:d+g},{x:S,y:d}];return s==="top"?$.reverse():$}if(i){var T=c.segment,k=T.map(function(E){return e.apply(E,{position:o})});return Na(c,"discard")&&Cce(k,function(E){return!e.isInRange(E)})?null:k}return null};function Nfe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,o=t.shape,s=t.className,l=t.alwaysShow,c=ffe(),h=NW(i),d=_W(a),p=pfe();if(!c||!p)return null;xo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=iE({x:h.scale,y:d.scale}),y=jn(e),x=jn(n),b=r&&r.length===2,w=Ofe(g,y,x,b,p,t.position,h.orientation,d.orientation,t);if(!w)return null;var S=$fe(w,2),$=S[0],T=$.x,k=$.y,E=S[1],I=E.x,_=E.y,N=Na(t,"hidden")?"url(#".concat(c,")"):void 0,R=xz(xz({clipPath:N},at(t,!0)),{},{x1:T,y1:k,x2:I,y2:_});return Q.createElement(Yt,{className:wt("recharts-reference-line",s)},Ife(o,R),Sr.renderCallByParent(t,Jce({x1:T,y1:k,x2:I,y2:_})))}var cE=function(t){function e(){return gfe(this,e),bfe(this,e,arguments)}return Sfe(e,t),vfe(e,[{key:"render",value:function(){return Q.createElement(Nfe,this.props)}}])}(Q.Component);uE(cE,"displayName","ReferenceLine");uE(cE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ek(){return ek=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ek.apply(this,arguments)}function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(t)}function Sz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sz(Object(n),!0).forEach(function(r){Ib(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rfe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PW(r.key),r)}}function Dfe(t,e,n){return e&&Rfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mfe(t,e,n){return e=bv(e),Pfe(t,MW()?Reflect.construct(e,n||[],bv(t).constructor):e.apply(t,n))}function Pfe(t,e){if(e&&(Dc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lfe(t)}function Lfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MW=function(){return!!t})()}function bv(t){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bv(t)}function Ffe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tk(t,e)}function tk(t,e){return tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tk(t,e)}function Ib(t,e,n){return e=PW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PW(t){var e=Bfe(t,"string");return Dc(e)=="symbol"?e:e+""}function Bfe(t,e){if(Dc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zfe=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,o=iE({x:i.scale,y:a.scale}),s=o.apply({x:n,y:r},{bandAware:!0});return Na(e,"discard")&&!o.isInRange(s)?null:s},Ob=function(t){function e(){return _fe(this,e),Mfe(this,e,arguments)}return Ffe(e,t),Dfe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,s=r.alwaysShow,l=r.clipPathId,c=jn(i),h=jn(a);if(xo(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!h)return null;var d=zfe(this.props);if(!d)return null;var p=d.x,g=d.y,y=this.props,x=y.shape,b=y.className,w=Na(this.props,"hidden")?"url(#".concat(l,")"):void 0,S=Cz(Cz({clipPath:w},at(this.props,!0)),{},{cx:p,cy:g});return Q.createElement(Yt,{className:wt("recharts-reference-dot",b)},e.renderDot(x,S),Sr.renderCallByParent(this.props,{x:p-o,y:g-o,width:2*o,height:2*o}))}}])}(Q.Component);Ib(Ob,"displayName","ReferenceDot");Ib(Ob,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ib(Ob,"renderDot",function(t,e){var n;return Q.isValidElement(t)?n=Q.cloneElement(t,e):nt(t)?n=t(e):n=Q.createElement(Tb,ek({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function nk(){return nk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nk.apply(this,arguments)}function Mc(t){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(t)}function $z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$z(Object(n),!0).forEach(function(r){Nb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$z(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ufe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FW(r.key),r)}}function Vfe(t,e,n){return e&&Ufe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wfe(t,e,n){return e=xv(e),Gfe(t,LW()?Reflect.construct(e,n||[],xv(t).constructor):e.apply(t,n))}function Gfe(t,e){if(e&&(Mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qfe(t)}function qfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LW=function(){return!!t})()}function xv(t){return xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xv(t)}function Hfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rk(t,e)}function rk(t,e){return rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rk(t,e)}function Nb(t,e,n){return e=FW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FW(t){var e=Xfe(t,"string");return Mc(e)=="symbol"?e:e+""}function Xfe(t,e){if(Mc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kfe=function(e,n,r,i,a){var o=a.x1,s=a.x2,l=a.y1,c=a.y2,h=a.xAxis,d=a.yAxis;if(!h||!d)return null;var p=iE({x:h.scale,y:d.scale}),g={x:e?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(l,{position:"start"}):p.y.rangeMin},y={x:n?p.x.apply(s,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(c,{position:"end"}):p.y.rangeMax};return Na(a,"discard")&&(!p.isInRange(g)||!p.isInRange(y))?null:$W(g,y)},_b=function(t){function e(){return jfe(this,e),Wfe(this,e,arguments)}return Hfe(e,t),Vfe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,h=r.clipPathId;xo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=jn(i),p=jn(a),g=jn(o),y=jn(s),x=this.props.shape;if(!d&&!p&&!g&&!y&&!x)return null;var b=Kfe(d,p,g,y,this.props);if(!b&&!x)return null;var w=Na(this.props,"hidden")?"url(#".concat(h,")"):void 0;return Q.createElement(Yt,{className:wt("recharts-reference-area",l)},e.renderRect(x,Tz(Tz({clipPath:w},at(this.props,!0)),b)),Sr.renderCallByParent(this.props,b))}}])}(Q.Component);Nb(_b,"displayName","ReferenceArea");Nb(_b,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Nb(_b,"renderRect",function(t,e){var n;return Q.isValidElement(t)?n=Q.cloneElement(t,e):nt(t)?n=t(e):n=Q.createElement(rE,nk({},e,{className:"recharts-reference-area-rect"})),n});function BW(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Yfe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return tfe(r,n)}function Zfe(t,e,n){var r=n==="width",i=t.x,a=t.y,o=t.width,s=t.height;return e===1?{start:r?i:a,end:r?i+o:a+s}:{start:r?i+o:a+s,end:r?i:a}}function wv(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Qfe(t,e){return BW(t,e+1)}function Jfe(t,e,n,r,i){for(var a=(r||[]).slice(),o=e.start,s=e.end,l=0,c=1,h=o,d=function(){var y=r==null?void 0:r[l];if(y===void 0)return{v:BW(r,c)};var x=l,b,w=function(){return b===void 0&&(b=n(y,x)),b},S=y.coordinate,$=l===0||wv(t,S,w,h,s);$||(l=0,h=o,c+=1),$&&(h=S+t*(w()/2+i),l+=c)},p;c<=a.length;)if(p=d(),p)return p.v;return[]}function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(t)}function kz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kz(Object(n),!0).forEach(function(r){ehe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ehe(t,e,n){return e=the(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function the(t){var e=nhe(t,"string");return Wd(e)=="symbol"?e:e+""}function nhe(t,e){if(Wd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rhe(t,e,n,r,i){for(var a=(r||[]).slice(),o=a.length,s=e.start,l=e.end,c=function(p){var g=a[p],y,x=function(){return y===void 0&&(y=n(g,p)),y};if(p===o-1){var b=t*(g.coordinate+t*x()/2-l);a[p]=g=br(br({},g),{},{tickCoord:b>0?g.coordinate-b*t:g.coordinate})}else a[p]=g=br(br({},g),{},{tickCoord:g.coordinate});var w=wv(t,g.tickCoord,x,s,l);w&&(l=g.tickCoord-t*(x()/2+i),a[p]=br(br({},g),{},{isShow:!0}))},h=o-1;h>=0;h--)c(h);return a}function ihe(t,e,n,r,i,a){var o=(r||[]).slice(),s=o.length,l=e.start,c=e.end;if(a){var h=r[s-1],d=n(h,s-1),p=t*(h.coordinate+t*d/2-c);o[s-1]=h=br(br({},h),{},{tickCoord:p>0?h.coordinate-p*t:h.coordinate});var g=wv(t,h.tickCoord,function(){return d},l,c);g&&(c=h.tickCoord-t*(d/2+i),o[s-1]=br(br({},h),{},{isShow:!0}))}for(var y=a?s-1:s,x=function(S){var $=o[S],T,k=function(){return T===void 0&&(T=n($,S)),T};if(S===0){var E=t*($.coordinate-t*k()/2-l);o[S]=$=br(br({},$),{},{tickCoord:E<0?$.coordinate-E*t:$.coordinate})}else o[S]=$=br(br({},$),{},{tickCoord:$.coordinate});var I=wv(t,$.tickCoord,k,l,c);I&&(l=$.tickCoord+t*(k()/2+i),o[S]=br(br({},$),{},{isShow:!0}))},b=0;b<y;b++)x(b);return o}function fE(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,o=t.minTickGap,s=t.orientation,l=t.interval,c=t.tickFormatter,h=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(_e(l)||Kl.isSsr)return Qfe(i,typeof l=="number"&&_e(l)?l:0);var p=[],g=s==="top"||s==="bottom"?"width":"height",y=h&&g==="width"?id(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},x=function($,T){var k=nt(c)?c($.value,T):$.value;return g==="width"?Yfe(id(k,{fontSize:e,letterSpacing:n}),y,d):id(k,{fontSize:e,letterSpacing:n})[g]},b=i.length>=2?ia(i[1].coordinate-i[0].coordinate):1,w=Zfe(a,b,g);return l==="equidistantPreserveStart"?Jfe(b,w,x,i,o):(l==="preserveStart"||l==="preserveStartEnd"?p=ihe(b,w,x,i,o,l==="preserveStartEnd"):p=rhe(b,w,x,i,o),p.filter(function(S){return S.isShow}))}var ahe=["viewBox"],ohe=["viewBox"],she=["ticks"];function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(t)}function oc(){return oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oc.apply(this,arguments)}function Az(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(n),!0).forEach(function(r){hE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Az(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TT(t,e){if(t==null)return{};var n=lhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ez(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jW(r.key),r)}}function che(t,e,n){return e&&Ez(t.prototype,e),n&&Ez(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fhe(t,e,n){return e=Sv(e),hhe(t,zW()?Reflect.construct(e,n||[],Sv(t).constructor):e.apply(t,n))}function hhe(t,e){if(e&&(Pc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dhe(t)}function dhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zW=function(){return!!t})()}function Sv(t){return Sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sv(t)}function phe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ik(t,e)}function ik(t,e){return ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ik(t,e)}function hE(t,e,n){return e=jW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jW(t){var e=mhe(t,"string");return Pc(e)=="symbol"?e:e+""}function mhe(t,e){if(Pc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gf=function(t){function e(n){var r;return uhe(this,e),r=fhe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return phe(e,t),che(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=TT(r,ahe),s=this.props,l=s.viewBox,c=TT(s,ohe);return!lc(a,l)||!lc(o,c)||!lc(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,s=i.width,l=i.height,c=i.orientation,h=i.tickSize,d=i.mirror,p=i.tickMargin,g,y,x,b,w,S,$=d?-1:1,T=r.tickSize||h,k=_e(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":g=y=r.coordinate,b=o+ +!d*l,x=b-$*T,S=x-$*p,w=k;break;case"left":x=b=r.coordinate,y=a+ +!d*s,g=y-$*T,w=g-$*p,S=k;break;case"right":x=b=r.coordinate,y=a+ +d*s,g=y+$*T,w=g+$*p,S=k;break;default:g=y=r.coordinate,b=o+ +d*l,x=b+$*T,S=x+$*p,w=k;break}return{line:{x1:g,y1:x,x2:y,y2:b},tick:{x:w,y:S}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.orientation,c=r.mirror,h=r.axisLine,d=Or(Or(Or({},at(this.props,!1)),at(h,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!c||l==="bottom"&&c);d=Or(Or({},d),{},{x1:i,y1:a+p*s,x2:i+o,y2:a+p*s})}else{var g=+(l==="left"&&!c||l==="right"&&c);d=Or(Or({},d),{},{x1:i+g*o,y1:a,x2:i+g*o,y2:a+s})}return Q.createElement("line",oc({},d,{className:wt("recharts-cartesian-axis-line",Pi(h,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,s=this.props,l=s.tickLine,c=s.stroke,h=s.tick,d=s.tickFormatter,p=s.unit,g=fE(Or(Or({},this.props),{},{ticks:r}),i,a),y=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),b=at(this.props,!1),w=at(h,!1),S=Or(Or({},b),{},{fill:"none"},at(l,!1)),$=g.map(function(T,k){var E=o.getTickLineCoord(T),I=E.line,_=E.tick,N=Or(Or(Or(Or({textAnchor:y,verticalAnchor:x},b),{},{stroke:"none",fill:c},w),_),{},{index:k,payload:T,visibleTicksCount:g.length,tickFormatter:d});return Q.createElement(Yt,oc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},_y(o.props,T,k)),l&&Q.createElement("line",oc({},S,I,{className:wt("recharts-cartesian-axis-tick-line",Pi(l,"className"))})),h&&e.renderTickItem(h,N,"".concat(nt(d)?d(T.value,k):T.value).concat(p||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},$)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,s=i.height,l=i.ticksGenerator,c=i.className,h=i.hide;if(h)return null;var d=this.props,p=d.ticks,g=TT(d,she),y=p;return nt(l)&&(y=p&&p.length>0?l(this.props):l(g)),o<=0||s<=0||!y||!y.length?null:Q.createElement(Yt,{className:wt("recharts-cartesian-axis",c),ref:function(b){r.layerReference=b}},a&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Sr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return Q.isValidElement(r)?o=Q.cloneElement(r,i):nt(r)?o=r(i):o=Q.createElement(Vy,oc({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(Z.Component);hE(gf,"displayName","CartesianAxis");hE(gf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ghe=["x1","y1","x2","y2","key"],yhe=["offset"];function Rl(t){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(t)}function Iz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Iz(Object(n),!0).forEach(function(r){vhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Iz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vhe(t,e,n){return e=bhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bhe(t){var e=xhe(t,"string");return Rl(e)=="symbol"?e:e+""}function xhe(t,e){if(Rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xl.apply(this,arguments)}function Oz(t,e){if(t==null)return{};var n=whe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function whe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var She=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.ry;return Q.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function UW(t,e){var n;if(Q.isValidElement(t))n=Q.cloneElement(t,e);else if(nt(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.key,l=Oz(e,ghe),c=at(l,!1);c.offset;var h=Oz(c,yhe);n=Q.createElement("line",xl({},h,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:s}))}return n}function Che(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=Cr(Cr({},t),{},{x1:e,y1:s,x2:e+n,y2:s,key:"line-".concat(l),index:l});return UW(i,c)});return Q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function $he(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=Cr(Cr({},t),{},{x1:s,y1:e,x2:s,y2:e+n,key:"line-".concat(l),index:l});return UW(i,c)});return Q.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function The(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,o=t.height,s=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var h=s.map(function(p){return Math.round(p+i-i)}).sort(function(p,g){return p-g});i!==h[0]&&h.unshift(0);var d=h.map(function(p,g){var y=!h[g+1],x=y?i+o-p:h[g+1]-p;if(x<=0)return null;var b=g%e.length;return Q.createElement("rect",{key:"react-".concat(g),y:p,x:r,height:x,width:a,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function khe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,o=t.y,s=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var h=c.map(function(p){return Math.round(p+a-a)}).sort(function(p,g){return p-g});a!==h[0]&&h.unshift(0);var d=h.map(function(p,g){var y=!h[g+1],x=y?a+s-p:h[g+1]-p;if(x<=0)return null;var b=g%r.length;return Q.createElement("rect",{key:"react-".concat(g),x:p,y:o,width:x,height:l,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Ahe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,o=e.offset;return tW(fE(Cr(Cr(Cr({},gf.defaultProps),r),{},{ticks:go(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},Ehe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,o=e.offset;return tW(fE(Cr(Cr(Cr({},gf.defaultProps),r),{},{ticks:go(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},Zu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ak(t){var e,n,r,i,a,o,s=sE(),l=lE(),c=mfe(),h=Cr(Cr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Zu.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Zu.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Zu.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Zu.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Zu.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Zu.verticalFill,x:_e(t.x)?t.x:c.left,y:_e(t.y)?t.y:c.top,width:_e(t.width)?t.width:c.width,height:_e(t.height)?t.height:c.height}),d=h.x,p=h.y,g=h.width,y=h.height,x=h.syncWithTicks,b=h.horizontalValues,w=h.verticalValues,S=hfe(),$=dfe();if(!_e(g)||g<=0||!_e(y)||y<=0||!_e(d)||d!==+d||!_e(p)||p!==+p)return null;var T=h.verticalCoordinatesGenerator||Ahe,k=h.horizontalCoordinatesGenerator||Ehe,E=h.horizontalPoints,I=h.verticalPoints;if((!E||!E.length)&&nt(k)){var _=b&&b.length,N=k({yAxis:$?Cr(Cr({},$),{},{ticks:_?b:$.ticks}):void 0,width:s,height:l,offset:c},_?!0:x);xo(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Rl(N),"]")),Array.isArray(N)&&(E=N)}if((!I||!I.length)&&nt(T)){var R=w&&w.length,O=T({xAxis:S?Cr(Cr({},S),{},{ticks:R?w:S.ticks}):void 0,width:s,height:l,offset:c},R?!0:x);xo(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Rl(O),"]")),Array.isArray(O)&&(I=O)}return Q.createElement("g",{className:"recharts-cartesian-grid"},Q.createElement(She,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),Q.createElement(Che,xl({},h,{offset:c,horizontalPoints:E,xAxis:S,yAxis:$})),Q.createElement($he,xl({},h,{offset:c,verticalPoints:I,xAxis:S,yAxis:$})),Q.createElement(The,xl({},h,{horizontalPoints:E})),Q.createElement(khe,xl({},h,{verticalPoints:I})))}ak.displayName="CartesianGrid";var Ihe=["type","layout","connectNulls","ref"],Ohe=["key"];function Lc(t){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(t)}function Nz(t,e){if(t==null)return{};var n=Nhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Nhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ld(){return ld=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ld.apply(this,arguments)}function _z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function li(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_z(Object(n),!0).forEach(function(r){ea(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_z(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qu(t){return Mhe(t)||Dhe(t)||Rhe(t)||_he()}function _he(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rhe(t,e){if(t){if(typeof t=="string")return ok(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ok(t,e)}}function Dhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mhe(t){if(Array.isArray(t))return ok(t)}function ok(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Phe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WW(r.key),r)}}function Lhe(t,e,n){return e&&Rz(t.prototype,e),n&&Rz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fhe(t,e,n){return e=Cv(e),Bhe(t,VW()?Reflect.construct(e,n||[],Cv(t).constructor):e.apply(t,n))}function Bhe(t,e){if(e&&(Lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zhe(t)}function zhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VW=function(){return!!t})()}function Cv(t){return Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cv(t)}function jhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sk(t,e)}function sk(t,e){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sk(t,e)}function ea(t,e,n){return e=WW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WW(t){var e=Uhe(t,"string");return Lc(e)=="symbol"?e:e+""}function Uhe(t,e){if(Lc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fc=function(t){function e(){var n;Phe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Fhe(this,e,[].concat(i)),ea(n,"state",{isAnimationFinished:!0,totalLength:0}),ea(n,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),ea(n,"getStrokeDasharray",function(o,s,l){var c=l.reduce(function(w,S){return w+S});if(!c)return n.generateSimpleStrokeDasharray(s,o);for(var h=Math.floor(o/c),d=o%c,p=s-o,g=[],y=0,x=0;y<l.length;x+=l[y],++y)if(x+l[y]>d){g=[].concat(Qu(l.slice(0,y)),[d-x]);break}var b=g.length%2===0?[0,p]:[p];return[].concat(Qu(e.repeat(l,h)),Qu(g),b).map(function(w){return"".concat(w,"px")}).join(", ")}),ea(n,"id",ff("recharts-line-")),ea(n,"pathRef",function(o){n.mainCurve=o}),ea(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ea(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return jhe(e,t),Lhe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,s=a.xAxis,l=a.yAxis,c=a.layout,h=a.children,d=Li(h,dp);if(!d)return null;var p=function(x,b){return{x:x.x,y:x.y,value:x.value,errorVal:Pr(x.payload,b)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Q.createElement(Yt,g,d.map(function(y){return Q.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,c=s.points,h=s.dataKey,d=at(this.props,!1),p=at(l,!0),g=c.map(function(x,b){var w=li(li(li({key:"dot-".concat(b),r:3},d),p),{},{index:b,cx:x.x,cy:x.y,value:x.value,dataKey:h,payload:x.payload,points:c});return e.renderDotItem(l,w)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Q.createElement(Yt,ld({className:"recharts-line-dots",key:"dots"},y),g)}},{key:"renderCurveStatically",value:function(r,i,a,o){var s=this.props,l=s.type,c=s.layout,h=s.connectNulls;s.ref;var d=Nz(s,Ihe),p=li(li(li({},at(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},o),{},{type:l,layout:c,connectNulls:h});return Q.createElement(hc,ld({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,o=this.props,s=o.points,l=o.strokeDasharray,c=o.isAnimationActive,h=o.animationBegin,d=o.animationDuration,p=o.animationEasing,g=o.animationId,y=o.animateNewValues,x=o.width,b=o.height,w=this.state,S=w.prevPoints,$=w.totalLength;return Q.createElement(Fa,{begin:h,duration:d,isActive:c,easing:p,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var k=T.t;if(S){var E=S.length/s.length,I=s.map(function(P,B){var U=Math.floor(B*E);if(S[U]){var z=S[U],M=lr(z.x,P.x),V=lr(z.y,P.y);return li(li({},P),{},{x:M(k),y:V(k)})}if(y){var W=lr(x*2,P.x),H=lr(b/2,P.y);return li(li({},P),{},{x:W(k),y:H(k)})}return li(li({},P),{},{x:P.x,y:P.y})});return a.renderCurveStatically(I,r,i)}var _=lr(0,$),N=_(k),R;if(l){var O="".concat(l).split(/[,\s]+/gim).map(function(P){return parseFloat(P)});R=a.getStrokeDasharray(N,$,O)}else R=a.generateSimpleStrokeDasharray($,N);return a.renderCurveStatically(s,r,i,{strokeDasharray:R})})}},{key:"renderCurve",value:function(r,i){var a=this.props,o=a.points,s=a.isAnimationActive,l=this.state,c=l.prevPoints,h=l.totalLength;return s&&o&&o.length&&(!c&&h>0||!Ac(c,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,s=i.points,l=i.className,c=i.xAxis,h=i.yAxis,d=i.top,p=i.left,g=i.width,y=i.height,x=i.isAnimationActive,b=i.id;if(a||!s||!s.length)return null;var w=this.state.isAnimationFinished,S=s.length===1,$=wt("recharts-line",l),T=c&&c.allowDataOverflow,k=h&&h.allowDataOverflow,E=T||k,I=dt(b)?this.id:b,_=(r=at(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},N=_.r,R=N===void 0?3:N,O=_.strokeWidth,P=O===void 0?2:O,B=rU(o)?o:{},U=B.clipDot,z=U===void 0?!0:U,M=R*2+P;return Q.createElement(Yt,{className:$},T||k?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(I)},Q.createElement("rect",{x:T?p:p-g/2,y:k?d:d-y/2,width:T?g:g*2,height:k?y:y*2})),!z&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Q.createElement("rect",{x:p-M/2,y:d-M/2,width:g+M,height:y+M}))):null,!S&&this.renderCurve(E,I),this.renderErrorBar(E,I),(S||o)&&this.renderDots(E,z,I),(!x||w)&&So.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Qu(r),[0]):r,o=[],s=0;s<i;++s)o=[].concat(Qu(o),Qu(a));return o}},{key:"renderDotItem",value:function(r,i){var a;if(Q.isValidElement(r))a=Q.cloneElement(r,i);else if(nt(r))a=r(i);else{var o=i.key,s=Nz(i,Ohe),l=wt("recharts-line-dot",typeof r!="boolean"?r.className:"");a=Q.createElement(Tb,ld({key:o},s,{className:l}))}return a}}])}(Z.PureComponent);ea(Fc,"displayName","Line");ea(Fc,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Kl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ea(Fc,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,o=t.dataKey,s=t.bandSize,l=t.displayedData,c=t.offset,h=e.layout,d=l.map(function(p,g){var y=Pr(p,o);return h==="horizontal"?{x:rv({axis:n,ticks:i,bandSize:s,entry:p,index:g}),y:dt(y)?null:r.scale(y),value:y,payload:p}:{x:dt(y)?null:n.scale(y),y:rv({axis:r,ticks:a,bandSize:s,entry:p,index:g}),value:y,payload:p}});return li({points:d,layout:h},c)});var Vhe=["layout","type","stroke","connectNulls","isRange","ref"],Whe=["key"],GW;function Bc(t){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(t)}function qW(t,e){if(t==null)return{};var n=Ghe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ghe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wl(){return wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wl.apply(this,arguments)}function Dz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ls(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dz(Object(n),!0).forEach(function(r){Ea(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XW(r.key),r)}}function Hhe(t,e,n){return e&&Mz(t.prototype,e),n&&Mz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xhe(t,e,n){return e=$v(e),Khe(t,HW()?Reflect.construct(e,n||[],$v(t).constructor):e.apply(t,n))}function Khe(t,e){if(e&&(Bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yhe(t)}function Yhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HW=function(){return!!t})()}function $v(t){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$v(t)}function Zhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lk(t,e)}function lk(t,e){return lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lk(t,e)}function Ea(t,e,n){return e=XW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XW(t){var e=Qhe(t,"string");return Bc(e)=="symbol"?e:e+""}function Qhe(t,e){if(Bc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ds=function(t){function e(){var n;qhe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Xhe(this,e,[].concat(i)),Ea(n,"state",{isAnimationFinished:!0}),Ea(n,"id",ff("recharts-area-")),Ea(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),nt(o)&&o()}),Ea(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),nt(o)&&o()}),n}return Zhe(e,t),Hhe(e,[{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,c=l.dot,h=l.points,d=l.dataKey,p=at(this.props,!1),g=at(c,!0),y=h.map(function(b,w){var S=ls(ls(ls({key:"dot-".concat(w),r:3},p),g),{},{index:w,cx:b.x,cy:b.y,dataKey:d,value:b.value,payload:b.payload,points:h});return e.renderDotItem(c,S)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Q.createElement(Yt,wl({className:"recharts-area-dots"},x),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,s=i.strokeWidth,l=o[0].x,c=o[o.length-1].x,h=r*Math.abs(l-c),d=hs(o.map(function(p){return p.y||0}));return _e(a)&&typeof a=="number"?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(hs(a.map(function(p){return p.y||0})),d)),_e(d)?Q.createElement("rect",{x:l<c?l:l-h,y:0,width:h,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,s=i.strokeWidth,l=o[0].y,c=o[o.length-1].y,h=r*Math.abs(l-c),d=hs(o.map(function(p){return p.x||0}));return _e(a)&&typeof a=="number"?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(hs(a.map(function(p){return p.x||0})),d)),_e(d)?Q.createElement("rect",{x:0,y:l<c?l:l-h,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,o){var s=this.props,l=s.layout,c=s.type,h=s.stroke,d=s.connectNulls,p=s.isRange;s.ref;var g=qW(s,Vhe);return Q.createElement(Yt,{clipPath:a?"url(#clipPath-".concat(o,")"):null},Q.createElement(hc,wl({},at(g,!0),{points:r,connectNulls:d,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),h!=="none"&&Q.createElement(hc,wl({},at(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),h!=="none"&&p&&Q.createElement(hc,wl({},at(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,o=this.props,s=o.points,l=o.baseLine,c=o.isAnimationActive,h=o.animationBegin,d=o.animationDuration,p=o.animationEasing,g=o.animationId,y=this.state,x=y.prevPoints,b=y.prevBaseLine;return Q.createElement(Fa,{begin:h,duration:d,isActive:c,easing:p,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var S=w.t;if(x){var $=x.length/s.length,T=s.map(function(_,N){var R=Math.floor(N*$);if(x[R]){var O=x[R],P=lr(O.x,_.x),B=lr(O.y,_.y);return ls(ls({},_),{},{x:P(S),y:B(S)})}return _}),k;if(_e(l)&&typeof l=="number"){var E=lr(b,l);k=E(S)}else if(dt(l)||cf(l)){var I=lr(b,0);k=I(S)}else k=l.map(function(_,N){var R=Math.floor(N*$);if(b[R]){var O=b[R],P=lr(O.x,_.x),B=lr(O.y,_.y);return ls(ls({},_),{},{x:P(S),y:B(S)})}return _});return a.renderAreaStatically(T,k,r,i)}return Q.createElement(Yt,null,Q.createElement("defs",null,Q.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(S))),Q.createElement(Yt,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(s,l,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,o=a.points,s=a.baseLine,l=a.isAnimationActive,c=this.state,h=c.prevPoints,d=c.prevBaseLine,p=c.totalLength;return l&&o&&o.length&&(!h&&p>0||!Ac(h,o)||!Ac(d,s))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(o,s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,s=i.points,l=i.className,c=i.top,h=i.left,d=i.xAxis,p=i.yAxis,g=i.width,y=i.height,x=i.isAnimationActive,b=i.id;if(a||!s||!s.length)return null;var w=this.state.isAnimationFinished,S=s.length===1,$=wt("recharts-area",l),T=d&&d.allowDataOverflow,k=p&&p.allowDataOverflow,E=T||k,I=dt(b)?this.id:b,_=(r=at(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},N=_.r,R=N===void 0?3:N,O=_.strokeWidth,P=O===void 0?2:O,B=rU(o)?o:{},U=B.clipDot,z=U===void 0?!0:U,M=R*2+P;return Q.createElement(Yt,{className:$},T||k?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(I)},Q.createElement("rect",{x:T?h:h-g/2,y:k?c:c-y/2,width:T?g:g*2,height:k?y:y*2})),!z&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(I)},Q.createElement("rect",{x:h-M/2,y:c-M/2,width:g+M,height:y+M}))):null,S?null:this.renderArea(E,I),(o||S)&&this.renderDots(E,z,I),(!x||w)&&So.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(Z.PureComponent);GW=Ds;Ea(Ds,"displayName","Area");Ea(Ds,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Kl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ea(Ds,"getBaseValue",function(t,e,n,r){var i=t.layout,a=t.baseValue,o=e.props.baseValue,s=o??a;if(_e(s)&&typeof s=="number")return s;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var h=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return s==="dataMin"?d:s==="dataMax"||h<0?h:Math.max(Math.min(c[0],c[1]),0)}return s==="dataMin"?c[0]:s==="dataMax"?c[1]:c[0]});Ea(Ds,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,s=t.bandSize,l=t.dataKey,c=t.stackedData,h=t.dataStartIndex,d=t.displayedData,p=t.offset,g=e.layout,y=c&&c.length,x=GW.getBaseValue(e,n,r,i),b=g==="horizontal",w=!1,S=d.map(function(T,k){var E;y?E=c[h+k]:(E=Pr(T,l),Array.isArray(E)?w=!0:E=[x,E]);var I=E[1]==null||y&&Pr(T,l)==null;return b?{x:rv({axis:r,ticks:a,bandSize:s,entry:T,index:k}),y:I?null:i.scale(E[1]),value:E,payload:T}:{x:I?null:r.scale(E[1]),y:rv({axis:i,ticks:o,bandSize:s,entry:T,index:k}),value:E,payload:T}}),$;return y||w?$=S.map(function(T){var k=Array.isArray(T.value)?T.value[0]:null;return b?{x:T.x,y:k!=null&&T.y!=null?i.scale(k):null}:{x:k!=null?r.scale(k):null,y:T.y}}):$=b?i.scale(x):r.scale(x),ls({points:S,baseLine:$,layout:g,isRange:w},p)});Ea(Ds,"renderDotItem",function(t,e){var n;if(Q.isValidElement(t))n=Q.cloneElement(t,e);else if(nt(t))n=t(e);else{var r=wt("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=qW(e,Whe);n=Q.createElement(Tb,wl({},a,{key:i,className:r}))}return n});function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}function Jhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ede(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZW(r.key),r)}}function tde(t,e,n){return e&&ede(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nde(t,e,n){return e=Tv(e),rde(t,KW()?Reflect.construct(e,n||[],Tv(t).constructor):e.apply(t,n))}function rde(t,e){if(e&&(zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ide(t)}function ide(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KW=function(){return!!t})()}function Tv(t){return Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tv(t)}function ade(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uk(t,e)}function uk(t,e){return uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uk(t,e)}function YW(t,e,n){return e=ZW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZW(t){var e=ode(t,"string");return zc(e)=="symbol"?e:e+""}function ode(t,e){if(zc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ck(){return ck=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ck.apply(this,arguments)}function sde(t){var e=t.xAxisId,n=sE(),r=lE(),i=NW(e);return i==null?null:Q.createElement(gf,ck({},i,{className:wt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return go(o,!0)}}))}var jc=function(t){function e(){return Jhe(this,e),nde(this,e,arguments)}return ade(e,t),tde(e,[{key:"render",value:function(){return Q.createElement(sde,this.props)}}])}(Q.Component);YW(jc,"displayName","XAxis");YW(jc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function lde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ude(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eG(r.key),r)}}function cde(t,e,n){return e&&ude(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fde(t,e,n){return e=kv(e),hde(t,QW()?Reflect.construct(e,n||[],kv(t).constructor):e.apply(t,n))}function hde(t,e){if(e&&(Uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dde(t)}function dde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QW=function(){return!!t})()}function kv(t){return kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kv(t)}function pde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fk(t,e)}function fk(t,e){return fk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fk(t,e)}function JW(t,e,n){return e=eG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eG(t){var e=mde(t,"string");return Uc(e)=="symbol"?e:e+""}function mde(t,e){if(Uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function hk(){return hk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hk.apply(this,arguments)}var gde=function(e){var n=e.yAxisId,r=sE(),i=lE(),a=_W(n);return a==null?null:Q.createElement(gf,hk({},a,{className:wt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return go(s,!0)}}))},Vc=function(t){function e(){return lde(this,e),fde(this,e,arguments)}return pde(e,t),cde(e,[{key:"render",value:function(){return Q.createElement(gde,this.props)}}])}(Q.Component);JW(Vc,"displayName","YAxis");JW(Vc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Pz(t){return xde(t)||bde(t)||vde(t)||yde()}function yde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vde(t,e){if(t){if(typeof t=="string")return dk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dk(t,e)}}function bde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xde(t){if(Array.isArray(t))return dk(t)}function dk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var pk=function(e,n,r,i,a){var o=Li(e,cE),s=Li(e,Ob),l=[].concat(Pz(o),Pz(s)),c=Li(e,_b),h="".concat(i,"Id"),d=i[0],p=n;if(l.length&&(p=l.reduce(function(x,b){if(b.props[h]===r&&Na(b.props,"extendDomain")&&_e(b.props[d])){var w=b.props[d];return[Math.min(x[0],w),Math.max(x[1],w)]}return x},p)),c.length){var g="".concat(d,"1"),y="".concat(d,"2");p=c.reduce(function(x,b){if(b.props[h]===r&&Na(b.props,"extendDomain")&&_e(b.props[g])&&_e(b.props[y])){var w=b.props[g],S=b.props[y];return[Math.min(x[0],w,S),Math.max(x[1],w,S)]}return x},p)}return a&&a.length&&(p=a.reduce(function(x,b){return _e(b)?[Math.min(x[0],b),Math.max(x[1],b)]:x},p)),p},kT={exports:{}},Lz;function wde(){return Lz||(Lz=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function a(l,c,h,d,p){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new i(h,d||l,p),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],h,d;if(this._eventsCount===0)return c;for(d in h=this._events)e.call(h,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},s.prototype.listeners=function(c){var h=n?n+c:c,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,g=d.length,y=new Array(g);p<g;p++)y[p]=d[p].fn;return y},s.prototype.listenerCount=function(c){var h=n?n+c:c,d=this._events[h];return d?d.fn?1:d.length:0},s.prototype.emit=function(c,h,d,p,g,y){var x=n?n+c:c;if(!this._events[x])return!1;var b=this._events[x],w=arguments.length,S,$;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,d),!0;case 4:return b.fn.call(b.context,h,d,p),!0;case 5:return b.fn.call(b.context,h,d,p,g),!0;case 6:return b.fn.call(b.context,h,d,p,g,y),!0}for($=1,S=new Array(w-1);$<w;$++)S[$-1]=arguments[$];b.fn.apply(b.context,S)}else{var T=b.length,k;for($=0;$<T;$++)switch(b[$].once&&this.removeListener(c,b[$].fn,void 0,!0),w){case 1:b[$].fn.call(b[$].context);break;case 2:b[$].fn.call(b[$].context,h);break;case 3:b[$].fn.call(b[$].context,h,d);break;case 4:b[$].fn.call(b[$].context,h,d,p);break;default:if(!S)for(k=1,S=new Array(w-1);k<w;k++)S[k-1]=arguments[k];b[$].fn.apply(b[$].context,S)}}return!0},s.prototype.on=function(c,h,d){return a(this,c,h,d,!1)},s.prototype.once=function(c,h,d){return a(this,c,h,d,!0)},s.prototype.removeListener=function(c,h,d,p){var g=n?n+c:c;if(!this._events[g])return this;if(!h)return o(this,g),this;var y=this._events[g];if(y.fn)y.fn===h&&(!p||y.once)&&(!d||y.context===d)&&o(this,g);else{for(var x=0,b=[],w=y.length;x<w;x++)(y[x].fn!==h||p&&!y[x].once||d&&y[x].context!==d)&&b.push(y[x]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},s.prototype.removeAllListeners=function(c){var h;return c?(h=n?n+c:c,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s}(kT)),kT.exports}var Sde=wde();const Cde=Pt(Sde);var AT=new Cde,ET="recharts.syncMouseEvents";function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function $de(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tG(r.key),r)}}function kde(t,e,n){return e&&Tde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IT(t,e,n){return e=tG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tG(t){var e=Ade(t,"string");return Gd(e)=="symbol"?e:e+""}function Ade(t,e){if(Gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ede=function(){function t(){$de(this,t),IT(this,"activeIndex",0),IT(this,"coordinateList",[]),IT(this,"layout","horizontal")}return kde(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,o=n.container,s=o===void 0?null:o,l=n.layout,c=l===void 0?null:l,h=n.offset,d=h===void 0?null:h,p=n.mouseHandlerCallback,g=p===void 0?null:p;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=a+l+c,p=o+this.offset.top+s/2+h;this.mouseHandlerCallback({pageX:d,pageY:p})}}}])}();function Ide(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&_e(r)&&_e(i))return!0}return!1}function Ode(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function nG(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,o=ur(e,n,r,i),s=ur(e,n,r,a);return{points:[o,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function Nde(t,e,n){var r,i,a,o;if(t==="horizontal")r=e.x,a=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,h=e.outerRadius,d=e.angle,p=ur(s,l,c,d),g=ur(s,l,h,d);r=p.x,i=p.y,a=g.x,o=g.y}else return nG(e);return[{x:r,y:i},{x:a,y:o}]}function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function Fz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ry(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fz(Object(n),!0).forEach(function(r){_de(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _de(t,e,n){return e=Rde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rde(t){var e=Dde(t,"string");return qd(e)=="symbol"?e:e+""}function Dde(t,e){if(qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mde(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,s=t.activePayload,l=t.offset,c=t.activeTooltipIndex,h=t.tooltipAxisBandSize,d=t.layout,p=t.chartName,g=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!g||!a||!o||p!=="ScatterChart"&&i!=="axis")return null;var y,x=hc;if(p==="ScatterChart")y=o,x=Cue;else if(p==="BarChart")y=Ode(d,o,l,h),x=rE;else if(d==="radial"){var b=nG(o),w=b.cx,S=b.cy,$=b.radius,T=b.startAngle,k=b.endAngle;y={cx:w,cy:S,startAngle:T,endAngle:k,innerRadius:$,outerRadius:$},x=oW}else y={points:Nde(d,o,l)},x=hc;var E=ry(ry(ry(ry({stroke:"#ccc",pointerEvents:"none"},l),y),at(g,!1)),{},{payload:s,payloadIndex:c,className:wt("recharts-tooltip-cursor",g.className)});return Z.isValidElement(g)?Z.cloneElement(g,E):Z.createElement(x,E)}var Pde=["item"],Lde=["children","className","width","height","style","compact","title","desc"];function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function sc(){return sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sc.apply(this,arguments)}function Bz(t,e){return zde(t)||Bde(t,e)||iG(t,e)||Fde()}function Fde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function zde(t){if(Array.isArray(t))return t}function zz(t,e){if(t==null)return{};var n=jde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ude(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aG(r.key),r)}}function Wde(t,e,n){return e&&Vde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gde(t,e,n){return e=Av(e),qde(t,rG()?Reflect.construct(e,n||[],Av(t).constructor):e.apply(t,n))}function qde(t,e){if(e&&(Wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hde(t)}function Hde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rG=function(){return!!t})()}function Av(t){return Av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Av(t)}function Xde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mk(t,e)}function mk(t,e){return mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mk(t,e)}function Gc(t){return Zde(t)||Yde(t)||iG(t)||Kde()}function Kde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iG(t,e){if(t){if(typeof t=="string")return gk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gk(t,e)}}function Yde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zde(t){if(Array.isArray(t))return gk(t)}function gk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jz(Object(n),!0).forEach(function(r){Ze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ze(t,e,n){return e=aG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aG(t){var e=Qde(t,"string");return Wc(e)=="symbol"?e:e+""}function Qde(t,e){if(Wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jde={xAxis:["bottom","top"],yAxis:["left","right"]},epe={width:"100%",height:"100%"},oG={x:0,y:0};function iy(t){return t}var tpe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},npe=function(e,n,r,i){var a=n.find(function(h){return h&&h.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,s=i.radius;return we(we(we({},i),ur(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,c=i.angle;return we(we(we({},i),ur(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return oG},Rb=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(Gc(s),Gc(c)):s},[]);return o.length>0?o:e&&e.length&&_e(i)&&_e(a)?e.slice(i,a+1):[]};function sG(t){return t==="number"?[0,"auto"]:void 0}var yk=function(e,n,r,i){var a=e.graphicalItems,o=e.tooltipAxis,s=Rb(n,e);return r<0||!a||!a.length||r>=s.length?null:a.reduce(function(l,c){var h,d=(h=c.props.data)!==null&&h!==void 0?h:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var g=d===void 0?s:d;p=Oy(g,o.dataKey,i)}else p=d&&d[r]||s[r];return p?[].concat(Gc(l),[rW(c,p)]):l},[])},Uz=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},o=tpe(a,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,h=ooe(o,s,c,l);if(h>=0&&c){var d=c[h]&&c[h].value,p=yk(e,n,h,d),g=npe(r,s,h,a);return{activeTooltipIndex:h,activeLabel:d,activePayload:p,activeCoordinate:g}}return null},rpe=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=e.layout,d=e.children,p=e.stackOffset,g=eW(h,a);return r.reduce(function(y,x){var b,w=x.type.defaultProps!==void 0?we(we({},x.type.defaultProps),x.props):x.props,S=w.type,$=w.dataKey,T=w.allowDataOverflow,k=w.allowDuplicatedCategory,E=w.scale,I=w.ticks,_=w.includeHidden,N=w[o];if(y[N])return y;var R=Rb(e.data,{graphicalItems:i.filter(function(q){var K,oe=o in q.props?q.props[o]:(K=q.type.defaultProps)===null||K===void 0?void 0:K[o];return oe===N}),dataStartIndex:l,dataEndIndex:c}),O=R.length,P,B,U;Ide(w.domain,T,S)&&(P=R2(w.domain,null,T),g&&(S==="number"||E!=="auto")&&(U=od(R,$,"category")));var z=sG(S);if(!P||P.length===0){var M,V=(M=w.domain)!==null&&M!==void 0?M:z;if($){if(P=od(R,$,S),S==="category"&&g){var W=QZ(P);k&&W?(B=P,P=dv(0,O)):k||(P=ZF(V,P,x).reduce(function(q,K){return q.indexOf(K)>=0?q:[].concat(Gc(q),[K])},[]))}else if(S==="category")k?P=P.filter(function(q){return q!==""&&!dt(q)}):P=ZF(V,P,x).reduce(function(q,K){return q.indexOf(K)>=0||K===""||dt(K)?q:[].concat(Gc(q),[K])},[]);else if(S==="number"){var H=foe(R,i.filter(function(q){var K,oe,pe=o in q.props?q.props[o]:(K=q.type.defaultProps)===null||K===void 0?void 0:K[o],ge="hide"in q.props?q.props.hide:(oe=q.type.defaultProps)===null||oe===void 0?void 0:oe.hide;return pe===N&&(_||!ge)}),$,a,h);H&&(P=H)}g&&(S==="number"||E!=="auto")&&(U=od(R,$,"category"))}else g?P=dv(0,O):s&&s[N]&&s[N].hasStack&&S==="number"?P=p==="expand"?[0,1]:nW(s[N].stackGroups,l,c):P=JV(R,i.filter(function(q){var K=o in q.props?q.props[o]:q.type.defaultProps[o],oe="hide"in q.props?q.props.hide:q.type.defaultProps.hide;return K===N&&(_||!oe)}),S,h,!0);if(S==="number")P=pk(d,P,N,a,I),V&&(P=R2(V,P,T));else if(S==="category"&&V){var L=V,G=P.every(function(q){return L.indexOf(q)>=0});G&&(P=L)}}return we(we({},y),{},Ze({},N,we(we({},w),{},{axisType:a,domain:P,categoricalDomain:U,duplicateDomain:B,originalDomain:(b=w.domain)!==null&&b!==void 0?b:z,isCategorical:g,layout:h})))},{})},ipe=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=e.layout,d=e.children,p=Rb(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),g=p.length,y=eW(h,a),x=-1;return r.reduce(function(b,w){var S=w.type.defaultProps!==void 0?we(we({},w.type.defaultProps),w.props):w.props,$=S[o],T=sG("number");if(!b[$]){x++;var k;return y?k=dv(0,g):s&&s[$]&&s[$].hasStack?(k=nW(s[$].stackGroups,l,c),k=pk(d,k,$,a)):(k=R2(T,JV(p,r.filter(function(E){var I,_,N=o in E.props?E.props[o]:(I=E.type.defaultProps)===null||I===void 0?void 0:I[o],R="hide"in E.props?E.props.hide:(_=E.type.defaultProps)===null||_===void 0?void 0:_.hide;return N===$&&!R}),"number",h),i.defaultProps.allowDataOverflow),k=pk(d,k,$,a)),we(we({},b),{},Ze({},$,we(we({axisType:a},i.defaultProps),{},{hide:!0,orientation:Pi(Jde,"".concat(a,".").concat(x%2),null),domain:k,originalDomain:T,isCategorical:y,layout:h})))}return b},{})},ape=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=e.children,d="".concat(i,"Id"),p=Li(h,a),g={};return p&&p.length?g=rpe(e,{axes:p,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(g=ipe(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),g},ope=function(e){var n=fs(e),r=go(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:OA(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:iv(n,r)}},Vz=function(e){var n=e.children,r=e.defaultShowTooltip,i=ci(n,Nc),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},spe=function(e){return!e||!e.length?!1:e.some(function(n){var r=bo(n&&n.type);return r&&r.indexOf("Bar")>=0})},Wz=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},lpe=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,s=e.yAxisMap,l=s===void 0?{}:s,c=r.width,h=r.height,d=r.children,p=r.margin||{},g=ci(d,Nc),y=ci(d,uc),x=Object.keys(l).reduce(function(k,E){var I=l[E],_=I.orientation;return!I.mirror&&!I.hide?we(we({},k),{},Ze({},_,k[_]+I.width)):k},{left:p.left||0,right:p.right||0}),b=Object.keys(o).reduce(function(k,E){var I=o[E],_=I.orientation;return!I.mirror&&!I.hide?we(we({},k),{},Ze({},_,Pi(k,"".concat(_))+I.height)):k},{top:p.top||0,bottom:p.bottom||0}),w=we(we({},b),x),S=w.bottom;g&&(w.bottom+=g.props.height||Nc.defaultProps.height),y&&n&&(w=uoe(w,i,r,n));var $=c-w.left-w.right,T=h-w.top-w.bottom;return we(we({brushBottom:S},w),{},{width:Math.max($,0),height:Math.max(T,0)})},upe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},lG=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=e.axisComponents,c=e.legendContent,h=e.formatAxisMap,d=e.defaultProps,p=function(w,S){var $=S.graphicalItems,T=S.stackGroups,k=S.offset,E=S.updateId,I=S.dataStartIndex,_=S.dataEndIndex,N=w.barSize,R=w.layout,O=w.barGap,P=w.barCategoryGap,B=w.maxBarSize,U=Wz(R),z=U.numericAxisName,M=U.cateAxisName,V=spe($),W=[];return $.forEach(function(H,L){var G=Rb(w.data,{graphicalItems:[H],dataStartIndex:I,dataEndIndex:_}),q=H.type.defaultProps!==void 0?we(we({},H.type.defaultProps),H.props):H.props,K=q.dataKey,oe=q.maxBarSize,pe=q["".concat(z,"Id")],ge=q["".concat(M,"Id")],Re={},Ee=l.reduce(function(tt,Lt){var vn=S["".concat(Lt.axisType,"Map")],Gn=q["".concat(Lt.axisType,"Id")];vn&&vn[Gn]||Lt.axisType==="zAxis"||_l();var zr=vn[Gn];return we(we({},tt),{},Ze(Ze({},Lt.axisType,zr),"".concat(Lt.axisType,"Ticks"),go(zr)))},Re),ye=Ee[M],Ie=Ee["".concat(M,"Ticks")],Oe=T&&T[pe]&&T[pe].hasStack&&Coe(H,T[pe].stackGroups),be=bo(H.type).indexOf("Bar")>=0,Ge=iv(ye,Ie),Ue=[],xe=V&&soe({barSize:N,stackGroups:T,totalSize:upe(Ee,M)});if(be){var ke,Ne,Le=dt(oe)?B:oe,st=(ke=(Ne=iv(ye,Ie,!0))!==null&&Ne!==void 0?Ne:Le)!==null&&ke!==void 0?ke:0;Ue=loe({barGap:O,barCategoryGap:P,bandSize:st!==Ge?st:Ge,sizeList:xe[ge],maxBarSize:Le}),st!==Ge&&(Ue=Ue.map(function(tt){return we(we({},tt),{},{position:we(we({},tt.position),{},{offset:tt.position.offset-st/2})})}))}var gt=H&&H.type&&H.type.getComposedData;gt&&W.push({props:we(we({},gt(we(we({},Ee),{},{displayedData:G,props:w,dataKey:K,item:H,bandSize:Ge,barPosition:Ue,offset:k,stackedData:Oe,layout:R,dataStartIndex:I,dataEndIndex:_}))),{},Ze(Ze(Ze({key:H.key||"item-".concat(L)},z,Ee[z]),M,Ee[M]),"animationId",E)),childIndex:cQ(H,w.children),item:H})}),W},g=function(w,S){var $=w.props,T=w.dataStartIndex,k=w.dataEndIndex,E=w.updateId;if(!fP({props:$}))return null;var I=$.children,_=$.layout,N=$.stackOffset,R=$.data,O=$.reverseStackOrder,P=Wz(_),B=P.numericAxisName,U=P.cateAxisName,z=Li(I,r),M=xoe(R,z,"".concat(B,"Id"),"".concat(U,"Id"),N,O),V=l.reduce(function(q,K){var oe="".concat(K.axisType,"Map");return we(we({},q),{},Ze({},oe,ape($,we(we({},K),{},{graphicalItems:z,stackGroups:K.axisType===B&&M,dataStartIndex:T,dataEndIndex:k}))))},{}),W=lpe(we(we({},V),{},{props:$,graphicalItems:z}),S==null?void 0:S.legendBBox);Object.keys(V).forEach(function(q){V[q]=h($,V[q],W,q.replace("Map",""),n)});var H=V["".concat(U,"Map")],L=ope(H),G=p($,we(we({},V),{},{dataStartIndex:T,dataEndIndex:k,updateId:E,graphicalItems:z,stackGroups:M,offset:W}));return we(we({formattedGraphicalItems:G,graphicalItems:z,offset:W,stackGroups:M},L),V)},y=function(b){function w(S){var $,T,k;return Ude(this,w),k=Gde(this,w,[S]),Ze(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ze(k,"accessibilityManager",new Ede),Ze(k,"handleLegendBBoxUpdate",function(E){if(E){var I=k.state,_=I.dataStartIndex,N=I.dataEndIndex,R=I.updateId;k.setState(we({legendBBox:E},g({props:k.props,dataStartIndex:_,dataEndIndex:N,updateId:R},we(we({},k.state),{},{legendBBox:E}))))}}),Ze(k,"handleReceiveSyncEvent",function(E,I,_){if(k.props.syncId===E){if(_===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(I)}}),Ze(k,"handleBrushChange",function(E){var I=E.startIndex,_=E.endIndex;if(I!==k.state.dataStartIndex||_!==k.state.dataEndIndex){var N=k.state.updateId;k.setState(function(){return we({dataStartIndex:I,dataEndIndex:_},g({props:k.props,dataStartIndex:I,dataEndIndex:_,updateId:N},k.state))}),k.triggerSyncEvent({dataStartIndex:I,dataEndIndex:_})}}),Ze(k,"handleMouseEnter",function(E){var I=k.getMouseInfo(E);if(I){var _=we(we({},I),{},{isTooltipActive:!0});k.setState(_),k.triggerSyncEvent(_);var N=k.props.onMouseEnter;nt(N)&&N(_,E)}}),Ze(k,"triggeredAfterMouseMove",function(E){var I=k.getMouseInfo(E),_=I?we(we({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(_),k.triggerSyncEvent(_);var N=k.props.onMouseMove;nt(N)&&N(_,E)}),Ze(k,"handleItemMouseEnter",function(E){k.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),Ze(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Ze(k,"handleMouseMove",function(E){E.persist(),k.throttleTriggeredAfterMouseMove(E)}),Ze(k,"handleMouseLeave",function(E){k.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};k.setState(I),k.triggerSyncEvent(I);var _=k.props.onMouseLeave;nt(_)&&_(I,E)}),Ze(k,"handleOuterEvent",function(E){var I=uQ(E),_=Pi(k.props,"".concat(I));if(I&&nt(_)){var N,R;/.*touch.*/i.test(I)?R=k.getMouseInfo(E.changedTouches[0]):R=k.getMouseInfo(E),_((N=R)!==null&&N!==void 0?N:{},E)}}),Ze(k,"handleClick",function(E){var I=k.getMouseInfo(E);if(I){var _=we(we({},I),{},{isTooltipActive:!0});k.setState(_),k.triggerSyncEvent(_);var N=k.props.onClick;nt(N)&&N(_,E)}}),Ze(k,"handleMouseDown",function(E){var I=k.props.onMouseDown;if(nt(I)){var _=k.getMouseInfo(E);I(_,E)}}),Ze(k,"handleMouseUp",function(E){var I=k.props.onMouseUp;if(nt(I)){var _=k.getMouseInfo(E);I(_,E)}}),Ze(k,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),Ze(k,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.handleMouseDown(E.changedTouches[0])}),Ze(k,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&k.handleMouseUp(E.changedTouches[0])}),Ze(k,"handleDoubleClick",function(E){var I=k.props.onDoubleClick;if(nt(I)){var _=k.getMouseInfo(E);I(_,E)}}),Ze(k,"handleContextMenu",function(E){var I=k.props.onContextMenu;if(nt(I)){var _=k.getMouseInfo(E);I(_,E)}}),Ze(k,"triggerSyncEvent",function(E){k.props.syncId!==void 0&&AT.emit(ET,k.props.syncId,E,k.eventEmitterSymbol)}),Ze(k,"applySyncEvent",function(E){var I=k.props,_=I.layout,N=I.syncMethod,R=k.state.updateId,O=E.dataStartIndex,P=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)k.setState(we({dataStartIndex:O,dataEndIndex:P},g({props:k.props,dataStartIndex:O,dataEndIndex:P,updateId:R},k.state)));else if(E.activeTooltipIndex!==void 0){var B=E.chartX,U=E.chartY,z=E.activeTooltipIndex,M=k.state,V=M.offset,W=M.tooltipTicks;if(!V)return;if(typeof N=="function")z=N(W,E);else if(N==="value"){z=-1;for(var H=0;H<W.length;H++)if(W[H].value===E.activeLabel){z=H;break}}var L=we(we({},V),{},{x:V.left,y:V.top}),G=Math.min(B,L.x+L.width),q=Math.min(U,L.y+L.height),K=W[z]&&W[z].value,oe=yk(k.state,k.props.data,z),pe=W[z]?{x:_==="horizontal"?W[z].coordinate:G,y:_==="horizontal"?q:W[z].coordinate}:oG;k.setState(we(we({},E),{},{activeLabel:K,activeCoordinate:pe,activePayload:oe,activeTooltipIndex:z}))}else k.setState(E)}),Ze(k,"renderCursor",function(E){var I,_=k.state,N=_.isTooltipActive,R=_.activeCoordinate,O=_.activePayload,P=_.offset,B=_.activeTooltipIndex,U=_.tooltipAxisBandSize,z=k.getTooltipEventType(),M=(I=E.props.active)!==null&&I!==void 0?I:N,V=k.props.layout,W=E.key||"_recharts-cursor";return Q.createElement(Mde,{key:W,activeCoordinate:R,activePayload:O,activeTooltipIndex:B,chartName:n,element:E,isActive:M,layout:V,offset:P,tooltipAxisBandSize:U,tooltipEventType:z})}),Ze(k,"renderPolarAxis",function(E,I,_){var N=Pi(E,"type.axisType"),R=Pi(k.state,"".concat(N,"Map")),O=E.type.defaultProps,P=O!==void 0?we(we({},O),E.props):E.props,B=R&&R[P["".concat(N,"Id")]];return Z.cloneElement(E,we(we({},B),{},{className:wt(N,B.className),key:E.key||"".concat(I,"-").concat(_),ticks:go(B,!0)}))}),Ze(k,"renderPolarGrid",function(E){var I=E.props,_=I.radialLines,N=I.polarAngles,R=I.polarRadius,O=k.state,P=O.radiusAxisMap,B=O.angleAxisMap,U=fs(P),z=fs(B),M=z.cx,V=z.cy,W=z.innerRadius,H=z.outerRadius;return Z.cloneElement(E,{polarAngles:Array.isArray(N)?N:go(z,!0).map(function(L){return L.coordinate}),polarRadius:Array.isArray(R)?R:go(U,!0).map(function(L){return L.coordinate}),cx:M,cy:V,innerRadius:W,outerRadius:H,key:E.key||"polar-grid",radialLines:_})}),Ze(k,"renderLegend",function(){var E=k.state.formattedGraphicalItems,I=k.props,_=I.children,N=I.width,R=I.height,O=k.props.margin||{},P=N-(O.left||0)-(O.right||0),B=ZV({children:_,formattedGraphicalItems:E,legendWidth:P,legendContent:c});if(!B)return null;var U=B.item,z=zz(B,Pde);return Z.cloneElement(U,we(we({},z),{},{chartWidth:N,chartHeight:R,margin:O,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Ze(k,"renderTooltip",function(){var E,I=k.props,_=I.children,N=I.accessibilityLayer,R=ci(_,Qi);if(!R)return null;var O=k.state,P=O.isTooltipActive,B=O.activeCoordinate,U=O.activePayload,z=O.activeLabel,M=O.offset,V=(E=R.props.active)!==null&&E!==void 0?E:P;return Z.cloneElement(R,{viewBox:we(we({},M),{},{x:M.left,y:M.top}),active:V,label:z,payload:V?U:[],coordinate:B,accessibilityLayer:N})}),Ze(k,"renderBrush",function(E){var I=k.props,_=I.margin,N=I.data,R=k.state,O=R.offset,P=R.dataStartIndex,B=R.dataEndIndex,U=R.updateId;return Z.cloneElement(E,{key:E.key||"_recharts-brush",onChange:Jg(k.handleBrushChange,E.props.onChange),data:N,x:_e(E.props.x)?E.props.x:O.left,y:_e(E.props.y)?E.props.y:O.top+O.height+O.brushBottom-(_.bottom||0),width:_e(E.props.width)?E.props.width:O.width,startIndex:P,endIndex:B,updateId:"brush-".concat(U)})}),Ze(k,"renderReferenceElement",function(E,I,_){if(!E)return null;var N=k,R=N.clipPathId,O=k.state,P=O.xAxisMap,B=O.yAxisMap,U=O.offset,z=E.type.defaultProps||{},M=E.props,V=M.xAxisId,W=V===void 0?z.xAxisId:V,H=M.yAxisId,L=H===void 0?z.yAxisId:H;return Z.cloneElement(E,{key:E.key||"".concat(I,"-").concat(_),xAxis:P[W],yAxis:B[L],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:R})}),Ze(k,"renderActivePoints",function(E){var I=E.item,_=E.activePoint,N=E.basePoint,R=E.childIndex,O=E.isRange,P=[],B=I.props.key,U=I.item.type.defaultProps!==void 0?we(we({},I.item.type.defaultProps),I.item.props):I.item.props,z=U.activeDot,M=U.dataKey,V=we(we({index:R,dataKey:M,cx:_.x,cy:_.y,r:4,fill:nE(I.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},at(z,!1)),Ny(z));return P.push(w.renderActiveDot(z,V,"".concat(B,"-activePoint-").concat(R))),N?P.push(w.renderActiveDot(z,we(we({},V),{},{cx:N.x,cy:N.y}),"".concat(B,"-basePoint-").concat(R))):O&&P.push(null),P}),Ze(k,"renderGraphicChild",function(E,I,_){var N=k.filterFormatItem(E,I,_);if(!N)return null;var R=k.getTooltipEventType(),O=k.state,P=O.isTooltipActive,B=O.tooltipAxis,U=O.activeTooltipIndex,z=O.activeLabel,M=k.props.children,V=ci(M,Qi),W=N.props,H=W.points,L=W.isRange,G=W.baseLine,q=N.item.type.defaultProps!==void 0?we(we({},N.item.type.defaultProps),N.item.props):N.item.props,K=q.activeDot,oe=q.hide,pe=q.activeBar,ge=q.activeShape,Re=!!(!oe&&P&&V&&(K||pe||ge)),Ee={};R!=="axis"&&V&&V.props.trigger==="click"?Ee={onClick:Jg(k.handleItemMouseEnter,E.props.onClick)}:R!=="axis"&&(Ee={onMouseLeave:Jg(k.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:Jg(k.handleItemMouseEnter,E.props.onMouseEnter)});var ye=Z.cloneElement(E,we(we({},N.props),Ee));function Ie(Lt){return typeof B.dataKey=="function"?B.dataKey(Lt.payload):null}if(Re)if(U>=0){var Oe,be;if(B.dataKey&&!B.allowDuplicatedCategory){var Ge=typeof B.dataKey=="function"?Ie:"payload.".concat(B.dataKey.toString());Oe=Oy(H,Ge,z),be=L&&G&&Oy(G,Ge,z)}else Oe=H==null?void 0:H[U],be=L&&G&&G[U];if(ge||pe){var Ue=E.props.activeIndex!==void 0?E.props.activeIndex:U;return[Z.cloneElement(E,we(we(we({},N.props),Ee),{},{activeIndex:Ue})),null,null]}if(!dt(Oe))return[ye].concat(Gc(k.renderActivePoints({item:N,activePoint:Oe,basePoint:be,childIndex:U,isRange:L})))}else{var xe,ke=(xe=k.getItemByXY(k.state.activeCoordinate))!==null&&xe!==void 0?xe:{graphicalItem:ye},Ne=ke.graphicalItem,Le=Ne.item,st=Le===void 0?E:Le,gt=Ne.childIndex,tt=we(we(we({},N.props),Ee),{},{activeIndex:gt});return[Z.cloneElement(st,tt),null,null]}return L?[ye,null,null]:[ye,null]}),Ze(k,"renderCustomized",function(E,I,_){return Z.cloneElement(E,we(we({key:"recharts-customized-".concat(_)},k.props),k.state))}),Ze(k,"renderMap",{CartesianGrid:{handler:iy,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:iy},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:iy},YAxis:{handler:iy},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat(($=S.id)!==null&&$!==void 0?$:ff("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=YU(k.triggeredAfterMouseMove,(T=S.throttleDelay)!==null&&T!==void 0?T:1e3/60),k.state={},k}return Xde(w,b),Wde(w,[{key:"componentDidMount",value:function(){var $,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:($=this.props.margin.left)!==null&&$!==void 0?$:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var $=this.props,T=$.children,k=$.data,E=$.height,I=$.layout,_=ci(T,Qi);if(_){var N=_.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,O=yk(this.state,k,N,R),P=this.state.tooltipTicks[N].coordinate,B=(this.state.offset.top+E)/2,U=I==="horizontal",z=U?{x:P,y:B}:{y:P,x:B},M=this.state.formattedGraphicalItems.find(function(W){var H=W.item;return H.type.name==="Scatter"});M&&(z=we(we({},z),M.props.points[N].tooltipPosition),O=M.props.points[N].tooltipPayload);var V={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:R,activePayload:O,activeCoordinate:z};this.setState(V),this.renderCursor(_),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function($,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==$.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==$.margin){var k,E;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function($){t2([ci($.children,Qi)],[ci(this.props.children,Qi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var $=ci(this.props.children,Qi);if($&&typeof $.props.shared=="boolean"){var T=$.props.shared?"axis":"item";return s.indexOf(T)>=0?T:a}return a}},{key:"getMouseInfo",value:function($){if(!this.container)return null;var T=this.container,k=T.getBoundingClientRect(),E=Yte(k),I={chartX:Math.round($.pageX-E.left),chartY:Math.round($.pageY-E.top)},_=k.width/T.offsetWidth||1,N=this.inRange(I.chartX,I.chartY,_);if(!N)return null;var R=this.state,O=R.xAxisMap,P=R.yAxisMap,B=this.getTooltipEventType(),U=Uz(this.state,this.props.data,this.props.layout,N);if(B!=="axis"&&O&&P){var z=fs(O).scale,M=fs(P).scale,V=z&&z.invert?z.invert(I.chartX):null,W=M&&M.invert?M.invert(I.chartY):null;return we(we({},I),{},{xValue:V,yValue:W},U)}return U?we(we({},I),U):null}},{key:"inRange",value:function($,T){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,I=$/k,_=T/k;if(E==="horizontal"||E==="vertical"){var N=this.state.offset,R=I>=N.left&&I<=N.left+N.width&&_>=N.top&&_<=N.top+N.height;return R?{x:I,y:_}:null}var O=this.state,P=O.angleAxisMap,B=O.radiusAxisMap;if(P&&B){var U=fs(P);return eB({x:I,y:_},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var $=this.props.children,T=this.getTooltipEventType(),k=ci($,Qi),E={};k&&T==="axis"&&(k.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Ny(this.props,this.handleOuterEvent);return we(we({},I),E)}},{key:"addListener",value:function(){AT.on(ET,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){AT.removeListener(ET,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function($,T,k){for(var E=this.state.formattedGraphicalItems,I=0,_=E.length;I<_;I++){var N=E[I];if(N.item===$||N.props.key===$.key||T===bo(N.item.type)&&k===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var $=this.clipPathId,T=this.state.offset,k=T.left,E=T.top,I=T.height,_=T.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:$},Q.createElement("rect",{x:k,y:E,height:I,width:_})))}},{key:"getXScales",value:function(){var $=this.state.xAxisMap;return $?Object.entries($).reduce(function(T,k){var E=Bz(k,2),I=E[0],_=E[1];return we(we({},T),{},Ze({},I,_.scale))},{}):null}},{key:"getYScales",value:function(){var $=this.state.yAxisMap;return $?Object.entries($).reduce(function(T,k){var E=Bz(k,2),I=E[0],_=E[1];return we(we({},T),{},Ze({},I,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function($){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[$])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function($){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[$])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function($){var T=this.state,k=T.formattedGraphicalItems,E=T.activeItem;if(k&&k.length)for(var I=0,_=k.length;I<_;I++){var N=k[I],R=N.props,O=N.item,P=O.type.defaultProps!==void 0?we(we({},O.type.defaultProps),O.props):O.props,B=bo(O.type);if(B==="Bar"){var U=(R.data||[]).find(function(W){return due($,W)});if(U)return{graphicalItem:N,payload:U}}else if(B==="RadialBar"){var z=(R.data||[]).find(function(W){return eB($,W)});if(z)return{graphicalItem:N,payload:z}}else if(kb(N,E)||Ab(N,E)||zd(N,E)){var M=rce({graphicalItem:N,activeTooltipItem:E,itemData:P.data}),V=P.activeIndex===void 0?M:P.activeIndex;return{graphicalItem:we(we({},N),{},{childIndex:V}),payload:zd(N,E)?P.data[M]:N.props.data[M]}}}return null}},{key:"render",value:function(){var $=this;if(!fP(this))return null;var T=this.props,k=T.children,E=T.className,I=T.width,_=T.height,N=T.style,R=T.compact,O=T.title,P=T.desc,B=zz(T,Lde),U=at(B,!1);if(R)return Q.createElement(vz,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(r2,sc({},U,{width:I,height:_,title:O,desc:P}),this.renderClipPath(),dP(k,this.renderMap)));if(this.props.accessibilityLayer){var z,M;U.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,U.role=(M=this.props.role)!==null&&M!==void 0?M:"application",U.onKeyDown=function(W){$.accessibilityManager.keyboardEvent(W)},U.onFocus=function(){$.accessibilityManager.focus()}}var V=this.parseEventsOfWrapper();return Q.createElement(vz,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",sc({className:wt("recharts-wrapper",E),style:we({position:"relative",cursor:"default",width:I,height:_},N)},V,{ref:function(H){$.container=H}}),Q.createElement(r2,sc({},U,{width:I,height:_,title:O,desc:P,style:epe}),this.renderClipPath(),dP(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(Z.Component);Ze(y,"displayName",n),Ze(y,"defaultProps",we({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Ze(y,"getDerivedStateFromProps",function(b,w){var S=b.dataKey,$=b.data,T=b.children,k=b.width,E=b.height,I=b.layout,_=b.stackOffset,N=b.margin,R=w.dataStartIndex,O=w.dataEndIndex;if(w.updateId===void 0){var P=Vz(b);return we(we(we({},P),{},{updateId:0},g(we(we({props:b},P),{},{updateId:0}),w)),{},{prevDataKey:S,prevData:$,prevWidth:k,prevHeight:E,prevLayout:I,prevStackOffset:_,prevMargin:N,prevChildren:T})}if(S!==w.prevDataKey||$!==w.prevData||k!==w.prevWidth||E!==w.prevHeight||I!==w.prevLayout||_!==w.prevStackOffset||!lc(N,w.prevMargin)){var B=Vz(b),U={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},z=we(we({},Uz(w,$,I)),{},{updateId:w.updateId+1}),M=we(we(we({},B),U),z);return we(we(we({},M),g(we({props:b},M),w)),{},{prevDataKey:S,prevData:$,prevWidth:k,prevHeight:E,prevLayout:I,prevStackOffset:_,prevMargin:N,prevChildren:T})}if(!t2(T,w.prevChildren)){var V,W,H,L,G=ci(T,Nc),q=G&&(V=(W=G.props)===null||W===void 0?void 0:W.startIndex)!==null&&V!==void 0?V:R,K=G&&(H=(L=G.props)===null||L===void 0?void 0:L.endIndex)!==null&&H!==void 0?H:O,oe=q!==R||K!==O,pe=!dt($),ge=pe&&!oe?w.updateId:w.updateId+1;return we(we({updateId:ge},g(we(we({props:b},w),{},{updateId:ge,dataStartIndex:q,dataEndIndex:K}),w)),{},{prevChildren:T,dataStartIndex:q,dataEndIndex:K})}return null}),Ze(y,"renderActiveDot",function(b,w,S){var $;return Z.isValidElement(b)?$=Z.cloneElement(b,w):nt(b)?$=b(w):$=Q.createElement(Tb,w),Q.createElement(Yt,{className:"recharts-active-dot",key:S},$)});var x=Z.forwardRef(function(w,S){return Q.createElement(y,sc({},w,{ref:S}))});return x.displayName=y.displayName,x},cpe=lG({chartName:"LineChart",GraphicalChild:Fc,axisComponents:[{axisType:"xAxis",AxisComp:jc},{axisType:"yAxis",AxisComp:Vc}],formatAxisMap:CW}),fpe=lG({chartName:"AreaChart",GraphicalChild:Ds,axisComponents:[{axisType:"xAxis",AxisComp:jc},{axisType:"yAxis",AxisComp:Vc}],formatAxisMap:CW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hpe=1e-7,dpe=1e-4;class uG{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class dE{refCount(e){return Hr("refCount")}incRef(e){return Hr("incRef")}timerAvailable(){return!0}time(e){return Hr("time")}read(e){return Hr("read")}readSync(e){return Hr("readSync")}readToGPU(e,n){return Hr("readToGPU")}numDataIds(){return Hr("numDataIds")}disposeData(e,n){return Hr("disposeData")}write(e,n,r){return Hr("write")}move(e,n,r,i,a){return Hr("move")}createTensorFromGPUData(e,n,r){return Hr("createTensorFromGPUData")}memory(){return Hr("memory")}floatPrecision(){return Hr("floatPrecision")}epsilon(){return this.floatPrecision()===32?hpe:dpe}dispose(){return Hr("dispose")}}function Hr(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ppe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,nc(t,e,n)}function Dl(t,e,n){return Math.max(t,Math.min(e,n))}function pE(t){return t%2===0?t:t+1}function nc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function mpe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function j(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function mE(t,e,n=""){j(At(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function cG(t){j(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ve(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function At(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function qc(t){return t%1===0}function vk(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function dc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function Gz(t,e=i=>0,n,r){return new Promise((i,a)=>{let o=0;const s=()=>{if(t()){i();return}o++;const l=e(o);if(n!=null&&o>=n){a();return}r!=null?r(s,l):setTimeout(s,l)};s()})}function fG(t,e){let n=1,r=-1;for(let a=0;a<t.length;++a)if(t[a]>=0)n*=t[a];else if(t[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(t[a]<0)throw Error(`Shapes can not be < 0. Found ${t[a]} at dim ${a}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function ut(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),j(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),j(t.every(r=>qc(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Ms(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:ut(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(a!=null){if(a[o]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(a[o]==null||a[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),a[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function cr(t,e){return hn(t,e)}function hn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function gpe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function ype(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function hG(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Ev(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function vpe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function mp(t){return typeof t=="string"||t instanceof String}function bpe(t){return typeof t=="boolean"}function bk(t){return typeof t=="number"}function yf(t){return Array.isArray(t)?yf(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":bk(t)?"float32":mp(t)?"string":bpe(t)?"bool":"float32"}function xk(t){return!!(t&&t.constructor&&t.call&&t.apply)}function wk(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ve(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function dG(t,e,n,r=!1){const i=new Array;if(e.length===1){const a=e[0]*(r?2:1);for(let o=0;o<a;o++)i[o]=n[t+o]}else{const a=e[0],o=e.slice(1),s=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<a;l++)i[l]=dG(t+l*s,o,n,r)}return i}function oa(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,a)=>i*a)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return dG(0,t,e,n)}function xpe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function gE(t,e){const n=fr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function fr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function pG(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return oa(t,new Float32Array(n));if(e==="int32")return oa(t,new Int32Array(n));if(e==="bool")return oa(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Mo(t){t.forEach(e=>{j(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function _a(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function vf(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function yE(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qz="tfjsflags";class wpe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Spe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(he().getBool("IS_TEST")||he().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];he().getBool("IS_TEST")||he().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(yE(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);qz in e&&e[qz].split(",").forEach(r=>{const[i,a]=r.split(":");this.urlFlags[i]=$pe(i,a)})}}function Spe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Cpe(e,r[0],r[1]),r.join("="))),e}function Cpe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function $pe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function he(){return mG}let mG=null;function Tpe(t){mG=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let OT;function gG(){if(OT==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");OT=t}return OT}function kpe(){const t=gG();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function vE(t,e){const n=kpe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Db="Abs",gp="Acos",yp="Acosh",bf="Add",bE="AddN",xE="All",wE="Any",Mb="ArgMax",Pb="ArgMin",vp="Asin",bp="Asinh",xp="Atan",wp="Atanh",Sp="Atan2",Lb="AvgPool",SE="AvgPoolGrad",Fb="AvgPool3D",CE="AvgPool3DGrad",Bb="BatchMatMul",zb="BatchToSpaceND",$E="Bincount",TE="BitwiseAnd",Ape="BroadcastTo",yG="BroadcastArgs",Cp="Cast",$p="Ceil",Tp="ClipByValue",kE="Complex",jb="ComplexAbs",Ub="Concat",Vb="Conv2D",AE="Conv2DBackpropFilter",Wb="Conv2DBackpropInput",Gb="Conv3D",EE="Conv3DBackpropFilterV2",IE="Conv3DBackpropInputV2",kp="Cos",Ap="Cosh",OE="Cumprod",qb="Cumsum",NE="CropAndResize",_E="DenseBincount",RE="DepthToSpace",Hb="DepthwiseConv2dNative",DE="DepthwiseConv2dNativeBackpropFilter",ME="DepthwiseConv2dNativeBackpropInput",vG="Diag",Xb="Dilation2D",Sk="Dilation2DBackpropInput",Ck="Dilation2DBackpropFilter",Epe="Draw",Ep="RealDiv",PE="Einsum",Ip="Elu",LE="EluGrad",Op="Erf",Kb="Equal",Np="Exp",Yb="ExpandDims",_p="Expm1",FE="FFT",BE="Fill",zE="FlipLeftRight",Rp="Floor",Dp="FloorDiv",Zb="FusedBatchNorm",Qb="GatherV2",bG="GatherNd",Jb="Greater",Mp="GreaterEqual",Pp="Identity",jE="IFFT",UE="Imag",Lp="IsFinite",Fp="IsInf",Bp="IsNan",e0="LeakyRelu",t0="Less",n0="LessEqual",xG="LinSpace",zp="Log",jp="Log1p",r0="LogicalAnd",i0="LogicalNot",a0="LogicalOr",Ipe="LogSoftmax",o0="LRN",VE="LRNGrad",s0="Max",Up="Maximum",l0="MaxPool",WE="MaxPoolGrad",u0="MaxPool3D",GE="MaxPool3DGrad",wG="MaxPoolWithArgmax",c0="Mean",f0="Min",Vp="Minimum",h0="MirrorPad",Wp="Mod",SG="Multinomial",Gp="Multiply",d0="Neg",p0="NotEqual",qE="NonMaxSuppressionV3",HE="NonMaxSuppressionV4",XE="NonMaxSuppressionV5",m0="OnesLike",g0="OneHot",y0="Pack",v0="PadV2",qp="Pow",b0="Prelu",x0="Prod",CG="RaggedGather",$G="RaggedRange",TG="RaggedTensorToTensor",KE="Range",YE="Real",Hp="Reciprocal",Xp="Relu",w0="Reshape",S0="ResizeNearestNeighbor",ZE="ResizeNearestNeighborGrad",C0="ResizeBilinear",QE="ResizeBilinearGrad",Kp="Relu6",$0="Reverse",Yp="Round",Zp="Rsqrt",kG="ScatterNd",AG="TensorScatterUpdate",EG="SearchSorted",T0="Select",Qp="Selu",k0="Slice",Jp="Sin",em="Sinh",tm="Sign",nm="Sigmoid",rm="Softplus",im="Sqrt",A0="Sum",E0="SpaceToBatchND",I0="SplitV",O0="Softmax",IG="SparseFillEmptyRows",OG="SparseReshape",NG="SparseSegmentMean",_G="SparseSegmentSum",RG="SparseToDense",am="SquaredDifference",JE="Square",eI="StaticRegexReplace",tI="StridedSlice",DG="StringNGrams",MG="StringSplit",PG="StringToHashBucketFast",om="Sub",sm="Tan",lm="Tanh",um="Tile",nI="TopK",rI="Transform",pc="Transpose",iI="Unique",N0="Unpack",_0="UnsortedSegmentSum",R0="ZerosLike",cm="Step",Ope="FromPixels",aI="RotateWithOffset",Iv="_FusedMatMul",Ov="FusedConv2D",LG="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hi(...t){he().getBool("IS_TEST")||he().getBool("PROD")||console.warn(...t)}function Npe(...t){he().getBool("IS_TEST")||he().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nv=vE("kernelRegistry",()=>new Map),$k=vE("gradRegistry",()=>new Map);function Hz(t,e){const n=BG(t,e);return Nv.get(n)}function Xz(t){return $k.get(t)}function Kz(t){const e=Nv.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[a,o]=i,[s]=a.split("_");s===t&&n.push(o)}return n}function FG(t){const{kernelName:e,backendName:n}=t,r=BG(e,n);Nv.has(r)&&hi(`The kernel '${e}' for backend '${n}' is already registered`),Nv.set(r,t)}function _pe(t){const{kernelName:e}=t;$k.has(e)&&he().getBool("DEBUG")&&hi(`Overriding the gradient for '${e}'`),$k.set(e,t)}function BG(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zG(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var NT,Yz;function Rpe(){if(Yz)return NT;Yz=1,NT=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(R,O,P){this.low=R|0,this.high=O|0,this.unsigned=!!P}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(R){return(R&&R.__isLong__)===!0}e.isLong=n;var r={},i={};function a(R,O){var P,B,U;return O?(R>>>=0,(U=0<=R&&R<256)&&(B=i[R],B)?B:(P=s(R,(R|0)<0?-1:0,!0),U&&(i[R]=P),P)):(R|=0,(U=-128<=R&&R<128)&&(B=r[R],B)?B:(P=s(R,R<0?-1:0,!1),U&&(r[R]=P),P))}e.fromInt=a;function o(R,O){if(isNaN(R))return O?S:w;if(O){if(R<0)return S;if(R>=y)return I}else{if(R<=-9223372036854776e3)return _;if(R+1>=x)return E}return R<0?o(-R,O).neg():s(R%g|0,R/g|0,O)}e.fromNumber=o;function s(R,O,P){return new e(R,O,P)}e.fromBits=s;var l=Math.pow;function c(R,O,P){if(R.length===0)throw Error("empty string");if(R==="NaN"||R==="Infinity"||R==="+Infinity"||R==="-Infinity")return w;if(typeof O=="number"?(P=O,O=!1):O=!!O,P=P||10,P<2||36<P)throw RangeError("radix");var B;if((B=R.indexOf("-"))>0)throw Error("interior hyphen");if(B===0)return c(R.substring(1),O,P).neg();for(var U=o(l(P,8)),z=w,M=0;M<R.length;M+=8){var V=Math.min(8,R.length-M),W=parseInt(R.substring(M,M+V),P);if(V<8){var H=o(l(P,V));z=z.mul(H).add(o(W))}else z=z.mul(U),z=z.add(o(W))}return z.unsigned=O,z}e.fromString=c;function h(R,O){return typeof R=="number"?o(R,O):typeof R=="string"?c(R,O):s(R.low,R.high,typeof O=="boolean"?O:R.unsigned)}e.fromValue=h;var d=65536,p=1<<24,g=d*d,y=g*g,x=y/2,b=a(p),w=a(0);e.ZERO=w;var S=a(0,!0);e.UZERO=S;var $=a(1);e.ONE=$;var T=a(1,!0);e.UONE=T;var k=a(-1);e.NEG_ONE=k;var E=s(-1,2147483647,!1);e.MAX_VALUE=E;var I=s(-1,-1,!0);e.MAX_UNSIGNED_VALUE=I;var _=s(0,-2147483648,!1);e.MIN_VALUE=_;var N=e.prototype;return N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},N.toString=function(O){if(O=O||10,O<2||36<O)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(_)){var P=o(O),B=this.div(P),U=B.mul(P).sub(this);return B.toString(O)+U.toInt().toString(O)}else return"-"+this.neg().toString(O);for(var z=o(l(O,6),this.unsigned),M=this,V="";;){var W=M.div(z),H=M.sub(W.mul(z)).toInt()>>>0,L=H.toString(O);if(M=W,M.isZero())return L+V;for(;L.length<6;)L="0"+L;V=""+L+V}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var O=this.high!=0?this.high:this.low,P=31;P>0&&(O&1<<P)==0;P--);return this.high!=0?P+33:P+1},N.isZero=function(){return this.high===0&&this.low===0},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||this.high>=0},N.isOdd=function(){return(this.low&1)===1},N.isEven=function(){return(this.low&1)===0},N.equals=function(O){return n(O)||(O=h(O)),this.unsigned!==O.unsigned&&this.high>>>31===1&&O.high>>>31===1?!1:this.high===O.high&&this.low===O.low},N.eq=N.equals,N.notEquals=function(O){return!this.eq(O)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(O){return this.comp(O)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(O){return this.comp(O)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(O){return this.comp(O)>0},N.gt=N.greaterThan,N.greaterThanOrEqual=function(O){return this.comp(O)>=0},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(O){if(n(O)||(O=h(O)),this.eq(O))return 0;var P=this.isNegative(),B=O.isNegative();return P&&!B?-1:!P&&B?1:this.unsigned?O.high>>>0>this.high>>>0||O.high===this.high&&O.low>>>0>this.low>>>0?-1:1:this.sub(O).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add($)},N.neg=N.negate,N.add=function(O){n(O)||(O=h(O));var P=this.high>>>16,B=this.high&65535,U=this.low>>>16,z=this.low&65535,M=O.high>>>16,V=O.high&65535,W=O.low>>>16,H=O.low&65535,L=0,G=0,q=0,K=0;return K+=z+H,q+=K>>>16,K&=65535,q+=U+W,G+=q>>>16,q&=65535,G+=B+V,L+=G>>>16,G&=65535,L+=P+M,L&=65535,s(q<<16|K,L<<16|G,this.unsigned)},N.subtract=function(O){return n(O)||(O=h(O)),this.add(O.neg())},N.sub=N.subtract,N.multiply=function(O){if(this.isZero())return w;if(n(O)||(O=h(O)),t){var P=t.mul(this.low,this.high,O.low,O.high);return s(P,t.get_high(),this.unsigned)}if(O.isZero())return w;if(this.eq(_))return O.isOdd()?_:w;if(O.eq(_))return this.isOdd()?_:w;if(this.isNegative())return O.isNegative()?this.neg().mul(O.neg()):this.neg().mul(O).neg();if(O.isNegative())return this.mul(O.neg()).neg();if(this.lt(b)&&O.lt(b))return o(this.toNumber()*O.toNumber(),this.unsigned);var B=this.high>>>16,U=this.high&65535,z=this.low>>>16,M=this.low&65535,V=O.high>>>16,W=O.high&65535,H=O.low>>>16,L=O.low&65535,G=0,q=0,K=0,oe=0;return oe+=M*L,K+=oe>>>16,oe&=65535,K+=z*L,q+=K>>>16,K&=65535,K+=M*H,q+=K>>>16,K&=65535,q+=U*L,G+=q>>>16,q&=65535,q+=z*H,G+=q>>>16,q&=65535,q+=M*W,G+=q>>>16,q&=65535,G+=B*L+U*H+z*W+M*V,G&=65535,s(K<<16|oe,G<<16|q,this.unsigned)},N.mul=N.multiply,N.divide=function(O){if(n(O)||(O=h(O)),O.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&O.low===-1&&O.high===-1)return this;var P=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,O.low,O.high);return s(P,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?S:w;var B,U,z;if(this.unsigned){if(O.unsigned||(O=O.toUnsigned()),O.gt(this))return S;if(O.gt(this.shru(1)))return T;z=S}else{if(this.eq(_)){if(O.eq($)||O.eq(k))return _;if(O.eq(_))return $;var M=this.shr(1);return B=M.div(O).shl(1),B.eq(w)?O.isNegative()?$:k:(U=this.sub(O.mul(B)),z=B.add(U.div(O)),z)}else if(O.eq(_))return this.unsigned?S:w;if(this.isNegative())return O.isNegative()?this.neg().div(O.neg()):this.neg().div(O).neg();if(O.isNegative())return this.div(O.neg()).neg();z=w}for(U=this;U.gte(O);){B=Math.max(1,Math.floor(U.toNumber()/O.toNumber()));for(var V=Math.ceil(Math.log(B)/Math.LN2),W=V<=48?1:l(2,V-48),H=o(B),L=H.mul(O);L.isNegative()||L.gt(U);)B-=W,H=o(B,this.unsigned),L=H.mul(O);H.isZero()&&(H=$),z=z.add(H),U=U.sub(L)}return z},N.div=N.divide,N.modulo=function(O){if(n(O)||(O=h(O)),t){var P=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,O.low,O.high);return s(P,t.get_high(),this.unsigned)}return this.sub(this.div(O).mul(O))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return s(~this.low,~this.high,this.unsigned)},N.and=function(O){return n(O)||(O=h(O)),s(this.low&O.low,this.high&O.high,this.unsigned)},N.or=function(O){return n(O)||(O=h(O)),s(this.low|O.low,this.high|O.high,this.unsigned)},N.xor=function(O){return n(O)||(O=h(O)),s(this.low^O.low,this.high^O.high,this.unsigned)},N.shiftLeft=function(O){return n(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?s(this.low<<O,this.high<<O|this.low>>>32-O,this.unsigned):s(0,this.low<<O-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(O){return n(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?s(this.low>>>O|this.high<<32-O,this.high>>O,this.unsigned):s(this.high>>O-32,this.high>=0?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(O){if(n(O)&&(O=O.toInt()),O&=63,O===0)return this;var P=this.high;if(O<32){var B=this.low;return s(B>>>O|P<<32-O,P>>>O,this.unsigned)}else return O===32?s(P,0,this.unsigned):s(P>>>O-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},N.toBytes=function(O){return O?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var O=this.high,P=this.low;return[P&255,P>>>8&255,P>>>16&255,P>>>24,O&255,O>>>8&255,O>>>16&255,O>>>24]},N.toBytesBE=function(){var O=this.high,P=this.low;return[O>>>24,O>>>16&255,O>>>8&255,O&255,P>>>24,P>>>16&255,P>>>8&255,P&255]},e.fromBytes=function(O,P,B){return B?e.fromBytesLE(O,P):e.fromBytesBE(O,P)},e.fromBytesLE=function(O,P){return new e(O[0]|O[1]<<8|O[2]<<16|O[3]<<24,O[4]|O[5]<<8|O[6]<<16|O[7]<<24,P)},e.fromBytesBE=function(O,P){return new e(O[4]<<24|O[5]<<16|O[6]<<8|O[7],O[0]<<24|O[1]<<16|O[2]<<8|O[3],P)},NT}var jG=Rpe();const UG=Pt(jG),Dpe=r9({__proto__:null,default:UG},[jG]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pl=UG||Dpe;function D0(t){return pl.fromString(t,!0,16)}const VG=D0("c3a5c85c97cb3127"),dl=D0("b492b66fbe98f273"),$r=D0("9ae16a3b2f90404f");function Tk(t){return t.xor(t.shru(47))}function WG(t,e,n){const r=t.slice(e,e+n);return pl.fromBytes(Array.from(r),!0,!0)}function Wt(t,e){return WG(t,e,8)}function Zz(t,e){return WG(t,e,4)}function Bn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function vs(t,e,n=D0("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function Mpe(t,e,n,r,i,a){i=i.add(t),a=Bn(a.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(n),a=a.add(Bn(i,44)),[i.add(r),a.add(o)]}function ay(t,e,n,r){return Mpe(Wt(t,e),Wt(t,e+8),Wt(t,e+16),Wt(t,e+24),n,r)}function Ppe(t,e=t.length){if(e>=8){const n=$r.add(e*2),r=Wt(t,0).add($r),i=Wt(t,e-8),a=Bn(i,37).mul(n).add(r),o=Bn(r,25).add(i).mul(n);return vs(a,o,n)}if(e>=4){const n=$r.add(e*2),r=Zz(t,0);return vs(r.shl(3).add(e),Zz(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],a=n+(r<<8),o=e+(i<<2);return Tk($r.mul(a).xor(VG.mul(o))).mul($r)}return $r}function Lpe(t,e=t.length){const n=$r.add(e*2),r=Wt(t,0).mul(dl),i=Wt(t,8),a=Wt(t,e-8).mul(n),o=Wt(t,e-16).mul($r);return vs(Bn(r.add(i),43).add(Bn(a,30)).add(o),r.add(Bn(i.add($r),18)).add(a),n)}function Fpe(t,e=t.length){const n=$r.add(e*2),r=Wt(t,0).mul($r),i=Wt(t,8),a=Wt(t,e-8).mul(n),o=Wt(t,e-16).mul($r),s=Bn(r.add(i),43).add(Bn(a,30)).add(o),l=vs(s,r.add(Bn(i.add($r),18)).add(a),n),c=Wt(t,16).mul(n),h=Wt(t,24),d=s.add(Wt(t,e-32)).mul(n),p=l.add(Wt(t,e-24)).mul(n);return vs(Bn(c.add(h),43).add(Bn(d,30)).add(p),c.add(Bn(h.add(r),18)).add(d),n)}function Bpe(t,e=t.length){const n=pl.fromNumber(81,!0);if(e<=32)return e<=16?Ppe(t,e):Lpe(t,e);if(e<=64)return Fpe(t,e);let r=n,i=n.mul(dl).add(113),a=Tk(i.mul($r).add(113)).mul($r),o=[pl.UZERO,pl.UZERO],s=[pl.UZERO,pl.UZERO];r=r.mul($r).add(Wt(t,0));let l=0;const c=(e-1>>6)*64,h=c+(e-1&63)-63;do r=Bn(r.add(i).add(o[0]).add(Wt(t,l+8)),37).mul(dl),i=Bn(i.add(o[1]).add(Wt(t,l+48)),42).mul(dl),r=r.xor(s[1]),i=i.add(o[0]).add(Wt(t,l+40)),a=Bn(a.add(s[0]),33).mul(dl),o=ay(t,l,o[1].mul(dl),r.add(s[0])),s=ay(t,l+32,a.add(s[1]),i.add(Wt(t,l+16))),[a,r]=[r,a],l+=64;while(l!==c);const d=dl.add(a.and(255).shl(1));return l=h,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Bn(r.add(i).add(o[0]).add(Wt(t,l+8)),37).mul(d),i=Bn(i.add(o[1]).add(Wt(t,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),i=i.add(o[0].mul(9).add(Wt(t,l+40))),a=Bn(a.add(s[0]),33).mul(d),o=ay(t,l,o[1].mul(d),r.add(s[0])),s=ay(t,l+32,a.add(s[1]),i.add(Wt(t,l+16))),[a,r]=[r,a],vs(vs(o[0],s[0],d).add(Tk(i).mul(VG)).add(a),vs(o[1],s[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ps(t,e){return e==="string"?bs(t):Jl([t],e)}function zpe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Jl(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Ml(t)),he().getBool("DEBUG")&&gpe(t,e),zpe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Nr(){return he().platform.now()}function bs(t,e="utf-8"){return e=e||"utf-8",he().platform.encode(t,e)}function Ss(t,e="utf-8"){return e=e||"utf-8",he().platform.decode(t,e)}function Bi(t){return he().platform.isTypedArray!=null?he().platform.isTypedArray(t):zG(t)}function Ml(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||yE(t)||t==null||Bi(t)&&n)e.push(t);else if(Array.isArray(t)||Bi(t))for(let r=0;r<t.length;++r)Ml(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)Ml(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jpe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Vpe)}profileKernel(e,n,r){let i;const a=()=>{i=r()};let o;const s=Nr();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(a);else{a();for(const c of i)c.dataSync();o=Promise.resolve({kernelMs:Nr()-s})}if(he().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const h=i[c];h.data().then(d=>{Upe(d,h.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:a,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),i,o]).then(l=>{this.logger.logKernelProfile(n,s,l[0],l[1],a,l[2])})})}}function Upe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class Vpe{logKernelProfile(e,n,r,i,a,o){const s=typeof i=="number"?dc(`${i}ms`,9):i.error,l=dc(e,25),c=n.rank,h=n.size,d=dc(n.shape.toString(),14);let p="";for(const g in a){const y=a[g];if(y!=null){const x=y.shape||n.shape,b=x.length;p+=`${g}: ${b}D ${b>0?x:""} `}}console.log(`%c${l}	%c${s}	%c${c}D ${d}	%c${h}	%c${p}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wpe(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],h=c.inputs;for(const d in h){const p=h[d];let g=!1;for(let y=0;y<e.length;y++)if(r[p.id]){c.outputs.forEach(x=>r[x.id]=!0),g=!0,i[c.id]=!0;break}if(g)break}}const a={};a[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],h=c.inputs;for(let d=0;d<c.outputs.length;d++)if(a[c.outputs[d].id]){for(const p in h)a[h[p].id]=!0,o[c.id]=!0;break}}const s=[];for(let l=0;l<t.length;l++){const c=t[l];if(i[c.id]&&o[c.id]){const h={};for(const p in c.inputs){const g=c.inputs[p];r[g.id]&&(h[p]=g)}const d=Object.assign({},c);d.inputs=h,d.outputs=c.outputs,s.push(d)}}return s}function Gpe(t,e,n,r){for(let i=e.length-1;i>=0;i--){const a=e[i],o=[];if(a.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(o);for(const l in a.inputs){if(!(l in s))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(s)}.`);const c=n(()=>s[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const h=a.inputs[l];if(!At(c.shape,h.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${h.shape}'`);if(t[h.id]==null)t[h.id]=c;else{const d=t[h.id];t[h.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qz=20,Gh=3,_T=7;function qpe(t,e,n,r){const i=Ve(e),a=Hpe(t,e,n,i),o=e.length,s=xy(t,e,n,i,a),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(s.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Hpe(t,e,n,r){const i=ve(e),a=r[r.length-1],o=new Array(a).fill(0),s=e.length,l=n==="complex64"?Jh(t):t;if(s>1)for(let c=0;c<i/a;c++){const h=c*a;for(let d=0;d<a;d++)o[d]=Math.max(o[d],Qh(l[h+d],0,n).length)}return o}function Qh(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(_T))} + ${parseFloat(t[1].toFixed(_T))}j`:mp(t)?r=`'${t}'`:n==="bool"?r=GG(t):r=parseFloat(t.toFixed(_T)).toString(),dc(r,e)}function GG(t){return t===0?"false":"true"}function xy(t,e,n,r,i,a=!0){const o=n==="complex64"?2:1,s=e[0],l=e.length;if(l===0){if(n==="complex64"){const x=Jh(t);return[Qh(x[0],0,n)]}return n==="bool"?[GG(t[0])]:[t[0].toString()]}if(l===1){if(s>Qz){const b=Gh*o;let w=Array.from(t.slice(0,b)),S=Array.from(t.slice((s-Gh)*o,s*o));return n==="complex64"&&(w=Jh(w),S=Jh(S)),["["+w.map(($,T)=>Qh($,i[T],n)).join(", ")+", ..., "+S.map(($,T)=>Qh($,i[s-Gh+T],n)).join(", ")+"]"]}return["["+(n==="complex64"?Jh(t):Array.from(t)).map((b,w)=>Qh(b,i[w],n)).join(", ")+"]"]}const c=e.slice(1),h=r.slice(1),d=r[0]*o,p=[];if(s>Qz){for(let x=0;x<Gh;x++){const b=x*d,w=b+d;p.push(...xy(t.slice(b,w),c,n,h,i,!1))}p.push("...");for(let x=s-Gh;x<s;x++){const b=x*d,w=b+d;p.push(...xy(t.slice(b,w),c,n,h,i,x===s-1))}}else for(let x=0;x<s;x++){const b=x*d,w=b+d;p.push(...xy(t.slice(b,w),c,n,h,i,x===s-1))}const g=l===2?",":"";p[0]="["+(s>0?p[0]+g:"");for(let x=1;x<p.length-1;x++)p[x]=" "+p[x]+g;let y=`,
`;for(let x=2;x<l;x++)y+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(a?"":y),p}function Jh(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qn{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ve(e),r!=null){const i=r.length;j(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||hn(n,this.size),this.strides=Ve(e)}set(e,...n){n.length===0&&(n=[0]),j(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return ta().makeTensor(this.values,this.shape,this.dtype)}}let ta=null,rc=null;function Xpe(t){ta=t}function Kpe(t){rc=t}class kn{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ve(e),this.strides=Ve(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return rc.buffer(this.shape,this.dtype,e)}bufferSync(){return rc.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return oa(this.shape,e,this.dtype==="complex64")}arraySync(){return oa(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ta().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Ss(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ta().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ta().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Ss(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ta().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ta().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return rc.print(this,e)}clone(){return this.throwIfDisposed(),rc.clone(this)}toString(e=!1){const n=this.dataSync();return qpe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),rc.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),ta().makeVariable(this,e,n,r)}}Object.defineProperty(kn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function me(){return vE("Tensor",()=>kn)}me();class _v extends kn{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!At(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ta().disposeTensor(this),this.dataId=e.dataId,ta().incRef(this,null)}dispose(){ta().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(_v,Symbol.hasInstance,{value:t=>t instanceof kn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Jz;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(Jz||(Jz={}));var kk;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(kk||(kk={}));var Ak;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(Ak||(Ak={}));var Ek;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(Ek||(Ek={}));var Ik;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(Ik||(Ik={}));const Ype={float32:Ek,int32:kk,bool:Ak,complex64:Ik};function Zr(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Ype[t][e]}function oI(t){return Zr(t,"int32")}function qG(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function HG(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Zr(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function XG(t){const e=[];return KG(t,e,new Set),e}function KG(t,e,n){if(t==null)return;if(t instanceof kn){e.push(t);return}if(!Zpe(t))return;const r=t;for(const i in r){const a=r[i];n.has(a)||(n.add(a),KG(a,e,n))}}function Zpe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RT(t){return t.kernelName!=null}class e4{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Hc{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new e4}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(hi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new jpe(this.backendInstance),!0}setupRegisteredKernels(){Kz(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Kz(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof dE)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,a=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,hi(`Initialization of backend ${e} failed`),hi(o.stack||o.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return hi(`Initialization of backend ${e} failed`),hi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:a}=this.initializeBackend(r);if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,a=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,a,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return Hc.nextTensorId++}nextVariableId(){return Hc.nextVariableId++}clone(e){const n=ne.runKernel(Pp,{x:e}),r={x:e},i=o=>({x:()=>{const s="float32",l={x:o},c={dtype:s};return ne.runKernel(Cp,l,c)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,a,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(Hz(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let a=0;r.forEach(l=>{a+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-n-a-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),a=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let l;const c=RT(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(RT(e)){const{kernelName:y,inputs:x,attrs:b}=e;this.backendName==null&&this.backend;const w=Hz(y,this.backendName);j(w!=null,()=>`Cannot find registered kernel '${y}' for backend '${this.backendName}'`),s=()=>{const S=this.backend.numDataIds();l=w.kernelFunc({inputs:x,attrs:b,backend:this.backend});const $=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(y,S,$);const T=$.map(k=>k.rank!=null?k:this.makeTensorFromTensorInfo(k));if(i){const k=this.getTensorsForGradient(y,x,T);r=this.saveTensorsForBackwardMode(k)}return T}}else{const{forwardFunc:y}=e,x=b=>{i&&(r=b.map(w=>this.keep(this.clone(w))))};s=()=>{const b=this.backend.numDataIds();l=this.tidy(()=>y(this.backend,x));const w=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,b,w),w}}const{inputs:h,attrs:d}=e,p=RT(e)?null:e.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(g=this.profiler.profileKernel(c,h,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),n=g.outputs)}),i&&this.addTapeNode(c,h,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map(y=>h[y]!=null?h[y].shape:null),outputShapes:n.map(y=>y.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=Xz(e);if(i!=null){const a=i.inputsToSave||[],o=i.outputsToSave||[];let s;i.saveAllInputs?(j(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(c=>n[c])):s=a.map(c=>n[c]);const l=r.filter((c,h)=>o[h]);return s.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let a=e;r==="string"&&mp(e[0])&&(a=e.map(l=>bs(l)));const o=i.write(a,n,r),s=new kn(n,r,o,this.nextTensorId());if(this.trackTensor(s,i),r==="string"){const l=this.state.tensorInfo.get(o),c=vpe(a);this.state.numBytes+=c-l.bytes,l.bytes=c}return s}makeTensorFromDataId(e,n,r,i){r=r||"float32";const a={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(a,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:a}=e,o=new kn(i,a,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const a=new _v(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Ev(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof _v||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Ev(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,a,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},l=Xz(e);l!=null&&(i=l.gradFunc),i!=null&&(s.gradient=c=>(c=c.map((h,d)=>{if(h==null){const p=r[d],g=fr(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return h}),i(c.length>1?c:c[0],a,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=XG(e),r=new Set(n.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const o=this.state.activeScope.track[a];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(a=>{!a.kept&&a.scopeId===i.id&&this.track(a)})}gradients(e,n,r,i=!1){if(j(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));j(a instanceof kn,()=>"The result y returned by f() must be a tensor.");const o=Wpe(this.state.activeTape,n,a);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[a.id]=r??Qpe(a.shape),Gpe(s,o,c=>this.tidy(c),Jpe);const l=n.map(c=>s[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const h of c.saved)h.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(e){return j(xk(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{j(n.every(s=>s instanceof kn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((s,l)=>{i[l]=s});const a=(s,l)=>(r=e(...n,l),j(r.value instanceof kn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),j(xk(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,l)=>{const c=r.gradFunc(s,l),h=Array.isArray(c)?c:[c];j(h.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),j(h.every(p=>p instanceof kn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return h.forEach((p,g)=>{d[g]=()=>p}),d};return this.runKernelFunc({forwardFunc:a,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Nr(),r=await this.backend.time(e);return r.wallMs=Nr()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new e4;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Hc.nextTensorId=0;Hc.nextVariableId=0;function Qpe(t){const e=gE(ve(t),"float32");return ne.makeTensor(e,t,"float32")}function YG(){const t=gG();if(t._tfengine==null){const e=new wpe(t);t._tfengine=new Hc(e)}return Tpe(t._tfengine.ENV),Xpe(()=>t._tfengine),t._tfengine}const ne=YG();function Jpe(t,e){const n={a:t,b:e};return ne.runKernel(bf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eme(){return typeof navigator<"u"&&navigator!=null}function ZG(t){if(t||eme()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function QG(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lr=he();Lr.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Lr.registerFlag("IS_BROWSER",()=>QG());Lr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Lr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Lr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Lr.registerFlag("PROD",()=>!1);Lr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Lr.getBool("DEBUG"));Lr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Lr.registerFlag("IS_TEST",()=>!1);Lr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Lr.getBool("DEBUG"));Lr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Lr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Lr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0(t,e){let n=t;if(Bi(t))return e==="string"?[]:[t.length];if(qG(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(HG(t))return[t.buffer.size/(e==null?4:Ev(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Bi(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&he().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&JG(t,r,[]),r}function JG(t,e,n){if(n=n||[],!Array.isArray(t)&&!Bi(t)){j(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}j(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),j(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)JG(t[i],r,n.concat(i))}function t4(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function X(t,e,n,r="numeric"){if(t instanceof me())return t4(r,t.dtype,e,n),t;let i=yf(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),t4(r,i,e,n),t==null||!Bi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const a=M0(t,i);!Bi(t)&&!Array.isArray(t)&&(t=[t]);const s=i!=="string"?Jl(t,i):Ml(t,[],!0);return ne.makeTensor(s,a,i)}function eq(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,o)=>X(a,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tme="__op";function ie(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+tme;const i=(...a)=>{ne.startScope(n);try{const o=r(...a);return yE(o)&&console.error("Cannot return a Promise inside of tidy."),ne.endScope(o),o}catch(o){throw ne.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nme(t,e){const n=X(t,"real","complex"),r=X(e,"imag","complex");mE(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return ne.runKernel(kE,i)}const Xc=ie({complex_:nme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0(t,e,n,r){if(r==null)r=yf(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(HG(t)||qG(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ne.backend.createTensorFromGPUData(t,e||n,r)}if(!Bi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Mo(e);const i=ve(e),a=ve(n);j(i===a,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${a}`);for(let o=0;o<n.length;++o){const s=n[o],l=o===n.length-1?s!==ve(e.slice(o)):!0;j(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Bi(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Jl(t,r):Ml(t,[],!0),ne.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tq(t,e,n){const r=M0(t,n);return P0(t,e,r,n)}class xf{static join(e){return new xf(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Bi(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=n+i.byteLength;this.shards.push({buffer:i,start:n,end:a}),n=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,a=new ArrayBuffer(i),o=new Uint8Array(a);let s=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+s-c.start,p=s,y=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,d,y-d);if(o.set(x,p),s+=x.length,n<c.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=rme(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function rme(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,a=e(t[i]);if(a===0)return i;a<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sa(){return ne}function n4(){return ne.memory()}function le(t,e){return ne.tidy(t,e)}function ot(t){XG(t).forEach(n=>n.dispose())}function Ra(t){return ne.keep(t)}function ime(t){return ne.setBackend(t)}function ame(){return ne.ready()}function nq(t,e,n=1){return ne.registerBackend(t,e,n)}function ome(){return ne.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r4=4;async function i4(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const s=i[o],l=Array.isArray(t)?t[o].tensor:t[s];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const c={name:s,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const h=new Promise(async d=>{const p=await l.bytes(),g=p.reduce((b,w)=>b+w.length,0)+r4*p.length,y=new Uint8Array(g);let x=0;for(let b=0;b<p.length;b++){const w=p[b],S=new Uint8Array(new Uint32Array([w.length]).buffer);y.set(S,x),x+=r4,y.set(w,x),x+=w.length}d(y)});r.push(h)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const a=await Promise.all(r);return{data:sme(a),specs:n}}function sme(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(a=>{if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(a=>{r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}const sI=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function a4(t){return sI?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function lme(t){if(sI)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function ume(t){if(sI){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function cme(t){return xf.join(t)}function rq(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:a4(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:a4(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new xf(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return xr.instance==null&&(xr.instance=new xr),xr.instance}static registerSaveRouter(e){xr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){xr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return xr.getHandlers(e,"save")}static getLoadHandlers(e,n){return xr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?xr.getInstance().loadRouters:xr.getInstance().saveRouters).forEach(o=>{const s=o(e,r);s!==null&&i.push(s)}),i}}const fme=t=>xr.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ok="tensorflowjs",Nk=1,Sl="models_store",ps="model_info_store";function iq(){if(!he().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function _k(t){const e=t.result;e.createObjectStore(Sl,{keyPath:"modelPath"}),e.createObjectStore(ps,{keyPath:"modelPath"})}class Pl{constructor(e){if(this.indexedDB=iq(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const a=this.indexedDB.open(Ok,Nk);a.onupgradeneeded=()=>_k(a),a.onsuccess=()=>{const o=a.result;if(n==null){const s=o.transaction(Sl,"readonly"),c=s.objectStore(Sl).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=h=>(o.close(),i(c.error)),s.oncomplete=()=>o.close()}else{n.weightData=xf.join(n.weightData);const s=rq(n),l=o.transaction(ps,"readwrite");let c=l.objectStore(ps),h;try{h=c.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(p){return i(p)}let d;h.onsuccess=()=>{d=o.transaction(Sl,"readwrite");const p=d.objectStore(Sl);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s})}catch(y){return i(y)}g.onsuccess=()=>r({modelArtifactsInfo:s}),g.onerror=y=>{c=l.objectStore(ps);const x=c.delete(this.modelPath);x.onsuccess=()=>(o.close(),i(g.error)),x.onerror=b=>(o.close(),i(g.error))}},h.onerror=p=>(o.close(),i(h.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},a.onerror=o=>i(a.error)})}}Pl.URL_SCHEME="indexeddb://";const aq=t=>he().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Pl.URL_SCHEME)?hme(t.slice(Pl.URL_SCHEME.length)):null;xr.registerSaveRouter(aq);xr.registerLoadRouter(aq);function hme(t){return new Pl(t)}function dme(t){return t.startsWith(Pl.URL_SCHEME)?t.slice(Pl.URL_SCHEME.length):t}class pme{constructor(){this.indexedDB=iq()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(Ok,Nk);r.onupgradeneeded=()=>_k(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(ps,"readonly"),s=a.objectStore(ps).getAll();s.onsuccess=()=>{const l={};for(const c of s.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},s.onerror=l=>(i.close(),n(s.error)),a.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=dme(e),new Promise((n,r)=>{const i=this.indexedDB.open(Ok,Nk);i.onupgradeneeded=()=>_k(i),i.onsuccess=()=>{const a=i.result,o=a.transaction(ps,"readwrite"),s=o.objectStore(ps),l=s.get(e);let c;l.onsuccess=()=>{if(l.result==null)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const h=s.delete(e),d=()=>{c=a.transaction(Sl,"readwrite");const g=c.objectStore(Sl).delete(e);g.onsuccess=()=>n(l.result.modelArtifactsInfo),g.onerror=y=>r(l.error)};h.onsuccess=d,h.onerror=p=>(d(),a.close(),r(l.error))}},l.onerror=h=>(a.close(),r(l.error)),o.oncomplete=()=>{c==null?a.close():c.oncomplete=()=>a.close()}},i.onerror=a=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ho="/",ic="tensorflowjs_models",oq="info",mme="model_topology",gme="weight_specs",yme="weight_data",vme="model_metadata";function sq(t){return{info:[ic,t,oq].join(ho),topology:[ic,t,mme].join(ho),weightSpecs:[ic,t,gme].join(ho),weightData:[ic,t,yme].join(ho),modelMetadata:[ic,t,vme].join(ho)}}function lq(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function bme(t){const e=t.split(ho);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(ho)}function xme(t){return t.startsWith(Ll.URL_SCHEME)?t.slice(Ll.URL_SCHEME.length):t}class Ll{constructor(e){if(!he().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=sq(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=rq(e),a=xf.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,lme(a));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw lq(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const s=JSON.parse(a);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(n.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=ume(o),n}}Ll.URL_SCHEME="localstorage://";const uq=t=>he().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ll.URL_SCHEME)?wme(t.slice(Ll.URL_SCHEME.length)):null;xr.registerSaveRouter(uq);xr.registerLoadRouter(uq);function wme(t){return new Ll(t)}class Sme{constructor(){j(he().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),j(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=ic+ho,r=ho+oq;for(let i=0;i<this.LS.length;++i){const a=this.LS.key(i);if(a.startsWith(n)&&a.endsWith(r)){const o=bme(a);e[o]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=xme(e);const n=sq(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return lq(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4="://";class Ca{constructor(){this.managers={}}static getInstance(){return Ca.instance==null&&(Ca.instance=new Ca),Ca.instance}static registerManager(e,n){j(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(o4)&&(e=e.slice(0,e.indexOf(o4))),j(e.length>0,()=>"scheme must not be an empty string.");const r=Ca.getInstance();j(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ca.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ca.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cme{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!he().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return zG(e)}}if(he().get("IS_BROWSER")){he().setPlatform("browser",new Cme);try{Ca.registerManager(Ll.URL_SCHEME,new Sme)}catch{}try{Ca.registerManager(Pl.URL_SCHEME,new pme)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $me={importFetch:()=>require("node-fetch")};let DT;class Tme{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return he().global.fetch!=null?he().global.fetch(e,n):(DT==null&&(DT=$me.importFetch()),DT(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}he().get("IS_NODE")&&!he().get("IS_BROWSER")&&he().setPlatform("node",new Tme);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lt(t,e="float32",n){return e=e||"float32",Mo(t),new Qn(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kme(t,e){const n=X(t,"x","cast");if(!ype(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return ne.runKernel(Cp,r,i)}const Pe=ie({cast_:kme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ame(t){const n={x:X(t,"x","clone","string_or_numeric")};return ne.runKernel(Pp,n)}const kl=ie({clone_:Ame});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eme(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */YG();const Ime={buffer:lt,cast:Pe,clone:kl,print:Eme};Kpe(Ime);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ome(t,e){let n=X(t,"a","add"),r=X(e,"b","add");[n,r]=pn(n,r);const i={a:n,b:r};return ne.runKernel(bf,i)}const Ae=ie({add_:Ome});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nme(t,e){let n=X(t,"a","floorDiv"),r=X(e,"b","floorDiv");[n,r]=pn(n,r);const i={a:n,b:r};return ne.runKernel(Dp,i)}const cq=ie({floorDiv_:Nme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _me(t,e){let n=X(t,"a","div"),r=X(e,"b","div");if([n,r]=pn(n,r),n.dtype==="int32"&&r.dtype==="int32")return cq(n,r);const i={a:n,b:r},a={};return ne.runKernel(Ep,i,a)}const He=ie({div_:_me});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rme(t,e){let n=X(t,"a","mul"),r=X(e,"b","mul");[n,r]=pn(n,r);const i={a:n,b:r};return ne.runKernel(Gp,i)}const te=ie({mul_:Rme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dme(t){const e=X(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ne.runKernel(jb,n)}else{const n={x:e};return ne.runKernel(Db,n)}}const wr=ie({abs_:Dme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mme(t){const n={x:X(t,"x","acos")};return ne.runKernel(gp,n)}const Pme=ie({acos_:Mme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lme(t){const n={x:X(t,"x","acosh")};return ne.runKernel(yp,n)}const Fme=ie({acosh_:Lme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bme(t,e=null,n=!1){const i={x:X(t,"x","all","bool")},a={axis:e,keepDims:n};return ne.runKernel(xE,i,a)}const fq=ie({all_:Bme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zme(t,e=null,n=!1){const i={x:X(t,"x","any","bool")},a={axis:e,keepDims:n};return ne.runKernel(wE,i,a)}const Rk=ie({any_:zme});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jme(t,e=0){const r={x:X(t,"x","argMax")},i={axis:e};return ne.runKernel(Mb,r,i)}const Hd=ie({argMax_:jme});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ume(t,e=0){const r={x:X(t,"x","argMin")},i={axis:e};return ne.runKernel(Pb,r,i)}const Vme=ie({argMin_:Ume});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wme(t){const n={x:X(t,"x","asin")};return ne.runKernel(vp,n)}const Gme=ie({asin_:Wme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qme(t){const n={x:X(t,"x","asinh")};return ne.runKernel(bp,n)}const Hme=ie({asinh_:qme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xme(t){const n={x:X(t,"x","atan")};return ne.runKernel(xp,n)}const Kme=ie({atan_:Xme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yme(t,e){let n=X(t,"a","atan2"),r=X(e,"b","atan2");[n,r]=pn(n,r);const i={a:n,b:r};return ne.runKernel(Sp,i)}const Zme=ie({atan2_:Yme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qme(t){const n={x:X(t,"x","atanh")};return ne.runKernel(wp,n)}const Jme=ie({atanh_:Qme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fm(t,e,n,r,i="NHWC",a){const o=t[3],s=[...e,o],l=Lo(i);return er(t,s,n,a,r,null,null,l)}function Ui(t,e,n,r,i,a,o="channelsLast"){const[s,l]=Xd(e);let c;if(o==="channelsLast")c=[s,l,t[3],t[3]];else if(o==="channelsFirst")c=[s,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return er(t,c,n,r,i,a,!1,o)}function Po(t,e,n,r,i,a,o="NDHWC"){const[s,l,c]=Dk(e);let h,d;if(o==="NDHWC")d="channelsLast",h=[s,l,c,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",h=[s,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Ls(t,h,n,r,i,!1,d,a)}function er(t,e,n,r,i,a,o=!1,s="channelsLast"){let[l,c,h,d]=[-1,-1,-1,-1];if(s==="channelsLast")[l,c,h,d]=t;else if(s==="channelsFirst")[l,d,c,h]=t;else throw new Error(`Unknown dataFormat ${s}`);const[p,g,,y]=e,[x,b]=Xd(n),[w,S]=Xd(r),$=mc(p,w),T=mc(g,S),{padInfo:k,outHeight:E,outWidth:I}=nge(i,c,h,x,b,$,T,a,s),_=o?y*d:y;let N;return s==="channelsFirst"?N=[l,_,E,I]:s==="channelsLast"&&(N=[l,E,I,_]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:h,inChannels:d,outHeight:E,outWidth:I,outChannels:_,padInfo:k,strideHeight:x,strideWidth:b,filterHeight:p,filterWidth:g,effectiveFilterHeight:$,effectiveFilterWidth:T,dilationHeight:w,dilationWidth:S,inShape:t,outShape:N,filterShape:e}}function Ls(t,e,n,r,i,a=!1,o="channelsLast",s){let[l,c,h,d,p]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,h,d,p]=t;else if(o==="channelsFirst")[l,p,c,h,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[g,y,x,,b]=e,[w,S,$]=Dk(n),[T,k,E]=Dk(r),I=mc(g,T),_=mc(y,k),N=mc(x,E),{padInfo:R,outDepth:O,outHeight:P,outWidth:B}=rge(i,c,h,d,w,S,$,I,_,N,s),U=a?b*p:b;let z;return o==="channelsFirst"?z=[l,U,O,P,B]:o==="channelsLast"&&(z=[l,O,P,B,U]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:h,inWidth:d,inChannels:p,outDepth:O,outHeight:P,outWidth:B,outChannels:U,padInfo:R,strideDepth:w,strideHeight:S,strideWidth:$,filterDepth:g,filterHeight:y,filterWidth:x,effectiveFilterDepth:I,effectiveFilterHeight:_,effectiveFilterWidth:N,dilationDepth:T,dilationHeight:k,dilationWidth:E,inShape:t,outShape:z,filterShape:e}}function ege(t,e,n,r,i){r==null&&(r=lI(t,e,n));const a=t[0],o=t[1],s=Kd((a-e+2*r)/n+1,i),l=Kd((o-e+2*r)/n+1,i);return[s,l]}function tge(t,e,n,r,i,a){i==null&&(i=lI(t,e[0],r[0]));const o=[0,0,0,n];for(let s=0;s<3;s++)t[s]+2*i>=e[s]&&(o[s]=Kd((t[s]-e[s]+2*i)/r[s]+1,a));return o}function lI(t,e,n,r=1){const i=mc(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function Xd(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Dk(t){return typeof t=="number"?[t,t,t]:t}function mc(t,e){return e<=1?t:t+(t-1)*(e-1)}function nge(t,e,n,r,i,a,o,s,l){let c,h,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const g=ege([e,n],a,r,t,s);h=g[0],d=g[1]}else if(t==="same"){h=Math.ceil(e/r),d=Math.ceil(n/i);const p=Math.max(0,(h-1)*r+a-e),g=Math.max(0,(d-1)*i+o-n),y=Math.floor(p/2),x=p-y,b=Math.floor(g/2),w=g-b;c={top:y,bottom:x,left:b,right:w,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((e-a+1)/r),d=Math.ceil((n-o+1)/i);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],g=l==="channelsLast"?t[1][1]:t[2][1],y=l==="channelsLast"?t[2][0]:t[3][0],x=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:g,left:y,right:x,type:p===0&&g===0&&y===0&&x===0?"VALID":"EXPLICIT"},h=Kd((e-a+p+g)/r+1,s),d=Kd((n-o+y+x)/i+1,s)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:h,outWidth:d}}function rge(t,e,n,r,i,a,o,s,l,c,h){let d,p,g,y;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const b=tge([e,n,r,1],[s,l,c],1,[i,a,o],t,h);p=b[0],g=b[1],y=b[2]}else if(t==="same"){p=Math.ceil(e/i),g=Math.ceil(n/a),y=Math.ceil(r/o);const x=(p-1)*i+s-e,b=(g-1)*a+l-n,w=(y-1)*o+c-r,S=Math.floor(x/2),$=x-S,T=Math.floor(b/2),k=b-T,E=Math.floor(w/2),I=w-E;d={top:T,bottom:k,left:E,right:I,front:S,back:$,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:g,outWidth:y}}function Kd(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Fl(t){const[e,n,r]=Xd(t);return e===1&&n===1&&r===1}function dr(t,e){return Fl(t)||Fl(e)}function Bl(t){return Xd(t).every(e=>e>0)}function Lo(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Br(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")j(qc(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{j(qc(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ige(t,e){const r={x:X(t,"x","reshape","string_or_numeric")},i={shape:e};return ne.runKernel(w0,r,i)}const re=ie({reshape_:ige});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function age(t,e,n,r,i){const a=X(t,"x","avgPool","float32"),o=1;j(dr(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=a,l=!1;a.rank===3&&(l=!0,s=re(a,[1,a.shape[0],a.shape[1],a.shape[2]])),j(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),Br("avgPool",r,i);const c={x:s},h={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let d=ne.runKernel(Lb,c,h);return d=Pe(d,a.dtype),l?re(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const uI=ie({avgPool_:age});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oge(t,e,n,r,i,a="NDHWC"){const o=X(t,"x","avgPool3d","float32");let s=o,l=!1;o.rank===4&&(l=!0,s=re(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),j(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),j(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),j(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Br("avgPool3d",r,i);const c={x:s},h={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:a};let d=ne.runKernel(Fb,c,h);return d=Pe(d,s.dtype),l?re(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const sge=ie({avgPool3d_:oge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lge(t,e=0){j(t.length>=1,()=>"Pass at least one tensor to concat");const n=eq(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),n.length===1)return kl(n[0]);const r=n,i={axis:e};return ne.runKernel(Ub,r,i)}const Mr=ie({concat_:lge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uge(t,e,n=!1,r=!1){let i=X(t,"a","matMul"),a=X(e,"b","matMul");[i,a]=pn(i,a);const o={a:i,b:a},s={transposeA:n,transposeB:r};return ne.runKernel(Bb,o,s)}const $t=ie({matMul_:uge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cge(t){const n={x:X(t,"x","sigmoid","float32")};return ne.runKernel(nm,n)}const wf=ie({sigmoid_:cge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fge(t,e,n){const r=X(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},a={begin:e,size:n};return ne.runKernel(k0,i,a)}const Gt=ie({slice_:fge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hge(t){const n={x:X(t,"x","tanh","float32")};return ne.runKernel(lm,n)}const L0=ie({tanh_:hge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dge(t,e,n){const r=X(t,"x","batchToSpaceND"),i=e.reduce((s,l)=>s*l);j(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),j(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),j(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const a={x:r},o={blockShape:e,crops:n};return ne.runKernel(zb,a,o)}const cI=ie({batchToSpaceND_:dge});function pge(t){let e;return t.rank===0||t.rank===1?e=re(t,[1,1,1,t.size]):t.rank===2?e=re(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=re(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mge(t,e,n,r,i,a){a==null&&(a=.001);const o=X(t,"x","batchNorm"),s=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let h;r!=null&&(h=X(r,"offset","batchNorm")),j(s.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(h==null||s.rank===h.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:pge(o),scale:c,offset:h,mean:s,variance:l},g={varianceEpsilon:a},y=ne.runKernel(Zb,p,g);return re(y,o.shape)}const F0=ie({batchNorm_:mge});function gge(t,e,n,r,i,a){const o=X(t,"x","batchNorm"),s=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let h;return r!=null&&(h=X(r,"offset","batchNorm")),j(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),j(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),j(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&j(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),h!=null&&j(h.rank===2||h.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${h.rank}.`),F0(o,s,l,h,c,a)}const yge=ie({batchNorm2d_:gge});function vge(t,e,n,r,i,a){const o=X(t,"x","batchNorm"),s=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let h;return r!=null&&(h=X(r,"offset","batchNorm")),j(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),j(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),j(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&j(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),h!=null&&j(h.rank===3||h.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${h.rank}.`),F0(o,s,l,h,c,a)}const bge=ie({batchNorm3d_:vge});function xge(t,e,n,r,i,a){const o=X(t,"x","batchNorm"),s=X(e,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let h;return r!=null&&(h=X(r,"offset","batchNorm")),j(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),j(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),j(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&j(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),h!=null&&j(h.rank===4||h.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${h.rank}.`),F0(o,s,l,h,c,a)}const wge=ie({batchNorm4d_:xge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sge(t,e,n){const r=X(t,"x","bincount"),i=X(e,"weights","bincount");j(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),j(n>=0,()=>`size must be non-negative, but got ${n}.`),j(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const a={x:r,weights:i},o={size:n};return ne.runKernel($E,a,o)}const Cge=ie({bincount_:Sge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ge(t,e){let n=X(t,"broadcastTo","x");const r=n.shape;if(Mo(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=re(n,c)}const i=n.shape,a=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])a[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(a.map((c,h)=>c>1?h:-1).filter(c=>c>=0).length===0)return kl(n);const s={x:n},l={reps:a};return ne.runKernel(um,s,l)}const ud=ie({broadcastTo_:$ge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tge(t){const n={x:X(t,"x","ceil","float32")};return ne.runKernel($p,n)}const kge=ie({ceil_:Tge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B0(t,e,n){Mo(t),n=n||yf(e);const r={shape:t,value:e,dtype:n};return ne.runKernel(BE,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Age(t,e,n){const r=X(t,"x","clipByValue");if(j(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return B0(r.shape,e,r.dtype);const i={x:r},a={clipValueMin:e,clipValueMax:n};return ne.runKernel(Tp,i,a)}const mi=ie({clipByValue_:Age});function Ege(t){return Mr(t,0)}const Ige=ie({concat1d_:Ege});function Oge(t,e){return Mr(t,e)}const Nge=ie({concat2d_:Oge});function _ge(t,e){return Mr(t,e)}const Rge=ie({concat3d_:_ge});function Dge(t,e){return Mr(t,e)}const Mge=ie({concat4d_:Dge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pge(t,e,n,r,i="NHWC",a=[1,1],o){const s=X(t,"x","conv2d","float32"),l=X(e,"filter","conv2d","float32");let c=s,h=!1;s.rank===3&&(h=!0,c=re(s,[1,s.shape[0],s.shape[1],s.shape[2]])),j(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),j(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Br("conv2d",r,o);const d=i==="NHWC"?c.shape[3]:c.shape[1];j(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),j(dr(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),j(Bl(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),j(Bl(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},y=ne.runKernel(Vb,p,g);return h?re(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const zl=ie({conv2d_:Pge});function Lge(t,e,n,r,i="NWC",a=1,o){const s=X(t,"x","conv1d"),l=X(e,"filter","conv1d");let c=s,h=!1;s.rank===2&&(h=!0,c=re(s,[1,s.shape[0],s.shape[1]])),j(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),j(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Br("conv1d",r,o),j(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),j(dr(n,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`),j(Bl(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),j(Bl(n),()=>"Error in conv1D: Stride should be larger than 0."),j(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=re(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=re(c,[c.shape[0],1,c.shape[1],c.shape[2]]),b=zl(p,d,[1,n],r,"NHWC",[1,a],o);return h?re(b,[b.shape[2],b.shape[3]]):re(b,[b.shape[0],b.shape[2],b.shape[3]])}const hq=ie({conv1d_:Lge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fge(t,e,n,r,i,a="NHWC",o){j(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,l=e,c=!1;e.rank===3&&(c=!0,l=re(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),j(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),j(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),j(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const h=a==="NHWC"?s[3]:s[1],d=a==="NHWC"?l.shape[3]:l.shape[1];j(h===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[2]}.`),j(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Br("conv2dDerInput",i,o);const p={dy:l,filter:n},g={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,inputShape:s},y=ne.runKernel(Wb,p,g);return c?re(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const fI=ie({conv2DBackpropInput_:Fge});function Bge(t,e,n,r,i,a){const o=X(t,"x","conv2dTranspose"),s=X(e,"filter","conv2dTranspose");return fI(n,o,s,r,i,"NHWC",a)}const dq=ie({conv2dTranspose_:Bge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zge(t,e,n,r,i="NDHWC",a=[1,1,1]){const o=X(t,"x","conv3d"),s=X(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=re(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),j(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),j(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),j(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),j(dr(n,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),j(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),j(Bl(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),j(Bl(n),()=>"Error in conv3D: Strides should be larger than 0.");const h={x:l,filter:s},d={strides:n,pad:r,dataFormat:i,dilations:a},p=ne.runKernel(Gb,h,d);return c?re(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const jge=ie({conv3d_:zge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uge(t,e,n,r,i){j(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,o=e,s=!1;e.rank===4&&(s=!0,o=re(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,t[0],t[1],t[2],t[3]]);const l=a[4],c=o.shape[4];j(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),j(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),j(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),j(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),j(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const h={dy:o,filter:n},d={pad:i,strides:r,inputShape:a},p=ne.runKernel(IE,h,d);return s?re(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const pq=ie({conv3DBackpropInput_:Uge});function Vge(t,e,n,r,i){const a=X(t,"x","conv3dTranspose"),o=X(e,"filter","conv3dTranspose");return pq(n,a,o,r,i)}const Wge=ie({conv3dTranspose_:Vge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gge(t){const n={x:X(t,"x","cos","float32")};return ne.runKernel(kp,n)}const hI=ie({cos_:Gge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qge(t){const n={x:X(t,"x","cosh","float32")};return ne.runKernel(Ap,n)}const mq=ie({cosh_:qge});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hge(t,e=0,n=!1,r=!1){const a={x:X(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return ne.runKernel(OE,a,o)}const Mk=ie({cumprod_:Hge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xge(t,e=0,n=!1,r=!1){const a={x:X(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return ne.runKernel(qb,a,o)}const gq=ie({cumsum_:Xge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kge(t,e,n,r=!1){const i=X(t,"x","denseBincount"),a=X(e,"weights","denseBincount");j(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),j(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),j(n>=0,()=>`size must be non-negative, but got ${n}.`),j(a.size===i.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`);const o={x:i,weights:a},s={size:n,binaryOutput:r};return ne.runKernel(_E,o,s)}const s4=ie({denseBincount_:Kge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yge(t,e,n="NHWC"){const r=X(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];j(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),j(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),j(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${r.shape}`),j(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},l={blockSize:e,dataFormat:n};return ne.runKernel(RE,s,l)}const Zge=ie({depthToSpace_:Yge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qge(t,e,n,r,i="NHWC",a=[1,1],o){const s=X(t,"x","depthwiseConv2d","float32"),l=X(e,"filter","depthwiseConv2d","float32");let c=s,h=!1;s.rank===3&&(h=!0,c=re(s,[1,s.shape[0],s.shape[1],s.shape[2]])),j(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),j(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];j(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Br("depthwiseConv2d",r,o);const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},y=ne.runKernel(Hb,p,g);return h?re(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const dI=ie({depthwiseConv2d_:Qge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jge(t,e,n,r,i=[1,1],a="NHWC"){const o=X(t,"x","dilation2d"),s=X(e,"filter","dilation2d");j(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),j(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),j(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=o,c=!1;o.rank===3&&(l=re(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),j(l.shape[3]===s.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${s.shape[2]}`);const h={x:l,filter:s},d={strides:n,pad:r,dilations:i},p=ne.runKernel(Xb,h,d);return c?re(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const eye=ie({dilation2d_:Jge});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kc(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const a=n-1-i,o=t[a]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function _n(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],a=e.length-r-1,o=e[a];(i==null||i===1&&o>1)&&n.unshift(a)}return n}function et(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let a=t[t.length-i-1];a==null&&(a=1);let o=e[e.length-i-1];if(o==null&&(o=1),a===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=a;else if(a!==o){const s=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(s)}else r[n-i-1]=a}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tye(t,e){let n=X(t,"a","equal","string_or_numeric"),r=X(e,"b","equal","string_or_numeric");[n,r]=pn(n,r),et(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(Kb,i)}const Ba=ie({equal_:tye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nye(t,e,n){const r=X(e,"a","where"),i=X(n,"b","where"),a=X(t,"condition","where","bool"),o=et(et(a.shape,r.shape),i.shape),s=ud(a,o),l=ud(r,o),c=ud(i,o),h={condition:s,t:l,e:c};return ne.runKernel(T0,h)}const kr=ie({where_:nye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rye(t){const n={x:X(t,"x","zerosLike")};return ne.runKernel(R0,n)}const vt=ie({zerosLike_:rye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iye(t,e){let n=X(t,"a","div"),r=X(e,"b","div");[n,r]=pn(n,r);const i=He(n,r),a=vt(i),o=Ba(r,a);return kr(o,a,i)}const aye=ie({divNoNan_:iye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oye(t,e){const n=X(t,"t1","dot"),r=X(e,"t2","dot");j((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];if(j(i===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${a}.`),n.rank===1&&r.rank===1){const o=re(n,[1,-1]),s=re(r,[-1,1]),l=$t(o,s);return re(l,[])}else if(n.rank===1&&r.rank===2){const o=re(n,[1,-1]),s=re(r,[r.shape[0],r.shape[1]]),l=$t(o,s);return re(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=re(r,[-1,1]),s=$t(n,o);return re(s,[s.size])}else{const o=re(r,[r.shape[0],r.shape[1]]);return $t(n,o)}}const sye=ie({dot_:oye});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lye(t,...e){const n=e.map((i,a)=>X(i,`tensors${a}`,"einsum")),r={equation:t};return ne.runKernel(PE,n,r)}const qh=ie({einsum_:lye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uye(t){const n={x:X(t,"x","elu","float32")};return ne.runKernel(Ip,n)}const z0=ie({elu_:uye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cye(t){let e=X(t,"x","erf");j(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Pe(e,"float32"));const n={x:e};return ne.runKernel(Op,n)}const yq=ie({erf_:cye});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pI(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function vq(t,e,n){const r=t.length+e.length,i=[];let a=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?i.push(t[a++]):i.push(e[o++]);return i}function Wn(t,e){const n=[],r=t.length;for(let a=0;a<r;a++)e.indexOf(a)===-1&&n.push(t[a]);const i=e.map(a=>t[a]);return[n,i]}function Sn(t,e){const n=e.map(r=>1);return vq(t,n,e)}function tr(t,e,n){j(pI(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function on(t,e){if(pI(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Fs(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function mn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fye(t,e=null,n=!1){const i={x:X(t,"x","max")},a={reductionIndices:e,keepDims:n};return ne.runKernel(s0,i,a)}const sa=ie({max_:fye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hye(t,e=null,n=!1){const i={x:X(t,"x","min")},a={axis:e,keepDims:n};return ne.runKernel(f0,i,a)}const Rv=ie({min_:hye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dye(t,e){let n=X(t,"base","pow"),r=X(e,"exp","pow");[n,r]=pn(n,r);const i={a:n,b:r};return ne.runKernel(qp,i)}const jl=ie({pow_:dye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tt(t,e){if((Bi(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Bi(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return P0(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(t){const n={x:X(t,"x","sqrt","float32")};return ne.runKernel(im,n)}const hr=ie({sqrt_:pye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mye(t){const e=X(t,"x","square"),n={};return ne.runKernel("Square",{x:e},n)}const Zt=ie({square_:mye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gye(t,e=null,n=!1){let r=X(t,"x","sum");r.dtype==="bool"&&(r=Pe(r,"int32"));const i={x:r},a={axis:e,keepDims:n};return ne.runKernel(A0,i,a)}const qe=ie({sum_:gye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yye(t,e="euclidean",n=null,r=!1){t=X(t,"x","norm");const i=bq(t,e,n);let a=i.shape;if(r){const o=ut(n,t.shape);a=Sn(i.shape,o)}return re(i,a)}function bq(t,e,n=null){if(t.rank===0)return wr(t);if(t.rank!==1&&n===null)return bq(re(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return qe(wr(t),n);if(e===1/0)return sa(wr(t),n);if(e===-1/0)return Rv(wr(t),n);if(e==="euclidean"||e===2)return hr(qe(jl(wr(t),Tt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return sa(qe(wr(t),n[0]),n[1]-1);if(e===1/0)return sa(qe(wr(t),n[1]),n[0]);if(e===-1/0)return Rv(qe(wr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return hr(qe(Zt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const j0=ie({norm_:yye});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vye(t,e=null,n=!1){return j0(t,"euclidean",e,n)}const bye=ie({euclideanNorm_:vye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xye(t){const n={x:X(t,"x","exp")};return ne.runKernel(Np,n)}const za=ie({exp_:xye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wye(t,e=0){const n=X(t,"x","expandDims","string_or_numeric");j(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return ne.runKernel(Yb,r,i)}const _r=ie({expandDims_:wye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(t){const n={x:X(t,"x","expm1")};return ne.runKernel(_p,n)}const Cye=ie({expm1_:Sye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ye(t,e){const n=X(t,"x","tile","string_or_numeric");j(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return ne.runKernel(um,r,i)}const aa=ie({tile_:$ye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tye(t,e,n,r="float32"){e==null&&(e=t);const i=lt([t,e],r),a=t<=e?t:e;for(let s=0;s<a;++s)i.set(1,s,s);const o=re(i.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return aa(_r(o,0),[n[0],1,1]);if(n.length===2)return aa(_r(_r(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return aa(_r(_r(_r(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const xq=ie({eye_:Tye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kye(t){const n={x:X(t,"x","floor","float32")};return ne.runKernel(Rp,n)}const U0=ie({floor_:kye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aye(t,e,n=0,r=0){const i=X(t,"x","gather"),a=X(e,"indices","gather","int32"),o={x:i,indices:a},s={axis:n,batchDims:r};return ne.runKernel(Qb,o,s)}const mI=ie({gather_:Aye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eye(t,e){let n=X(t,"a","greater","string_or_numeric"),r=X(e,"b","greater","string_or_numeric");[n,r]=pn(n,r),et(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(Jb,i)}const gi=ie({greater_:Eye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iye(t,e){let n=X(t,"a","greaterEqual","string_or_numeric"),r=X(e,"b","greaterEqual","string_or_numeric");[n,r]=pn(n,r),et(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(Mp,i)}const eu=ie({greaterEqual_:Iye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oye(t){const n={input:X(t,"input","imag")};return ne.runKernel(UE,n)}const gI=ie({imag_:Oye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nye(t){const n={x:X(t,"x","isFinite")};return ne.runKernel(Lp,n)}const _ye=ie({isFinite_:Nye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rye(t){const n={x:X(t,"x","isInf")};return ne.runKernel(Fp,n)}const Dye=ie({isInf_:Rye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mye(t){const n={x:X(t,"x","isNaN")};return ne.runKernel(Bp,n)}const Pye=ie({isNaN_:Mye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lye(t,e=.2){const r={x:X(t,"x","leakyRelu")},i={alpha:e};return ne.runKernel(e0,r,i)}const yI=ie({leakyRelu_:Lye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(t,e){let n=X(t,"a","less","string_or_numeric"),r=X(e,"b","less","string_or_numeric");[n,r]=pn(n,r),et(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(t0,i)}const Dv=ie({less_:Fye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bye(t,e){let n=X(t,"a","lessEqual","string_or_numeric"),r=X(e,"b","lessEqual","string_or_numeric");[n,r]=pn(n,r),et(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(n0,i)}const Sf=ie({lessEqual_:Bye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zye(t,e=5,n=1,r=1,i=.5){const a=X(t,"x","localResponseNormalization");j(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),j(qc(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=a,s=!1;a.rank===3&&(s=!0,o=re(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:i},h=ne.runKernel(o0,l,c);return s?re(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const jye=ie({localResponseNormalization_:zye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uye(t){const n={x:X(t,"x","log","float32")};return ne.runKernel(zp,n)}const ja=ie({log_:Uye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vye(t){const n={x:X(t,"x","log1p")};return ne.runKernel(jp,n)}const wq=ie({log1p_:Vye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wye(t,e){j(xk(t),()=>"The f passed in variableGrads(f) must be a function"),j(e==null||Array.isArray(e)&&e.every(c=>c instanceof _v),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in ne.registeredVariables)e.push(ne.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),j(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const a=!0,{value:o,grads:s}=ne.gradients(t,e,null,a);j(s.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),j(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,h)=>{s[h]!=null&&(l[c.name]=s[h])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function Yc(t){return ne.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gye(t){const n={x:X(t,"x","neg")};return ne.runKernel(d0,n)}const dn=ie({neg_:Gye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qye(t){const n={x:X(t,"x","softplus")};return ne.runKernel(rm,n)}const hm=ie({softplus_:qye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hye(t){const e=X(t,"x","logSigmoid");return Yc(r=>({value:dn(hm(dn(r))),gradFunc:o=>te(o,wf(dn(r)))}))(e)}const Xye=ie({logSigmoid_:Hye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kye(t,e){let n=X(t,"a","sub"),r=X(e,"b","sub");[n,r]=pn(n,r);const i={a:n,b:r};return ne.runKernel(om,i)}const Ke=ie({sub_:Kye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yye(t,e=-1){const n=X(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Yc((i,a)=>{const s=sa(i,e,!0),l=Ke(i,s),c=Ke(Pe(l,"float32"),ja(qe(za(l),e,!0)));return a([c]),{value:c,gradFunc:(d,p)=>{const[g]=p,y=!0,x=za(g);return Ke(d,te(qe(d,e,y),x))}}})(n)}const Sq=ie({logSoftmax_:Yye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zye(t,e=null,n=!1){const r=X(t,"x","logSumExp"),i=ut(e,r.shape),a=sa(r,i,!0),o=Ke(r,a),s=za(o),l=qe(s,i),c=ja(l),h=Ae(re(a,c.shape),c);if(n){const d=Sn(h.shape,i);return re(h,d)}return h}const Cq=ie({logSumExp_:Zye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qye(t,e){const n=X(t,"a","logicalAnd","bool"),r=X(e,"b","logicalAnd","bool");et(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(r0,i)}const Eo=ie({logicalAnd_:Qye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jye(t){const n={x:X(t,"x","logicalNot","bool")};return ne.runKernel(i0,n)}const vI=ie({logicalNot_:Jye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eve(t,e){const n=X(t,"a","logicalOr","bool"),r=X(e,"b","logicalOr","bool");et(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(a0,i)}const $q=ie({logicalOr_:eve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tve(t,e){const n=X(t,"a","logicalXor","bool"),r=X(e,"b","logicalXor","bool");return et(n.shape,r.shape),Eo($q(t,e),vI(Eo(t,e)))}const nve=ie({logicalXor_:tve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rve(t,e,n,r,i){const a=X(t,"x","maxPool"),o=1;let s=a,l=!1;a.rank===3&&(l=!0,s=re(a,[1,a.shape[0],a.shape[1],a.shape[2]])),j(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),j(dr(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Br("maxPool",r,i);const c={x:s},h={filterSize:e,strides:n,pad:r,dimRoundingMode:i},d=ne.runKernel(l0,c,h);return l?re(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const bI=ie({maxPool_:rve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ive(t,e=[1,1,1],n,r,i,a="NDHWC"){const o=X(t,"x","maxPool3d");let s=o,l=!1;o.rank===4&&(l=!0,s=re(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),j(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),j(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Br("maxPool3d",r,i);const c={x:s},h={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:a},d=ne.runKernel(u0,c,h);return l?re(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const ave=ie({maxPool3d_:ive});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ove(t,e){let n=X(t,"a","maximum"),r=X(e,"b","maximum");[n,r]=pn(n,r),n.dtype==="bool"&&(n=Pe(n,"int32"),r=Pe(r,"int32")),et(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(Up,i)}const Bs=ie({maximum_:ove});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(t,e=null,n=!1){const i={x:X(t,"x","mean")},a={axis:e,keepDims:n};return ne.runKernel(c0,i,a)}const wn=ie({mean_:sve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zn(t,e="float32"){if(Mo(t),e==="complex64"){const r=zn(t,"float32"),i=zn(t,"float32");return Xc(r,i)}const n=fr(ve(t),e);return ne.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zs(t,e="float32"){if(Mo(t),e==="complex64"){const r=zs(t,"float32"),i=zn(t,"float32");return Xc(r,i)}const n=gE(ve(t),e);return ne.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lve(t,e){let n=X(t,"a","minimum"),r=X(e,"b","minimum");[n,r]=pn(n,r),n.dtype==="bool"&&(n=Pe(n,"int32"),r=Pe(r,"int32")),et(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(Vp,i)}const Yd=ie({minimum_:lve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uve(t,e,n){j(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=X(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");j(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)j(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),j(e[s][0]>=0&&e[s][0]<=r.shape[s]-i&&e[s][1]>=0&&e[s][1]<=r.shape[s]-i,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-i} or less than 0 for input of shape ${r.shape}`);const a={paddings:e,mode:n},o={x:r};return ne.runKernel(h0,o,a)}const cve=ie({mirrorPad_:uve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fve(t,e){let n=X(t,"a","mod"),r=X(e,"b","mod");[n,r]=pn(n,r);const i={a:n,b:r};return ne.runKernel(Wp,i)}const hve=ie({mod_:fve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dve(t,e=null,n=!1){t=X(t,"x","moments");const r=ut(e,t.shape),i=wn(t,r,n);let a=i.shape;n||(a=Sn(i.shape,r));const o=Zt(Ke(Pe(t,"float32"),re(i,a))),s=wn(o,r,n);return{mean:i,variance:s}}const xI=ie({moments_:dve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pve(t,e){let n=X(t,"a","notEqual","string_or_numeric"),r=X(e,"b","notEqual","string_or_numeric");[n,r]=pn(n,r),et(n.shape,r.shape);const i={a:n,b:r};return ne.runKernel(p0,i)}const Mv=ie({notEqual_:pve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mve(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:X(t,"indices","oneHot","int32")},s={dtype:i,depth:e,onValue:n,offValue:r};return ne.runKernel(g0,o,s)}const Tq=ie({oneHot_:mve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gve(t){const n={x:X(t,"x","onesLike")};return ne.runKernel(m0,n)}const zi=ie({onesLike_:gve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yve(t,e,n=0){const r=X(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},a={x:r};return ne.runKernel(v0,a,i)}const wI=ie({pad_:yve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vve(t,e,n){const r=X(t,"x","spaceToBatchND");j(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),j(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),j(r.shape.reduce((o,s,l)=>l>0&&l<=e.length?o&&(s+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},a={blockShape:e,paddings:n};return ne.runKernel(E0,i,a)}const SI=ie({spaceToBatchND_:vve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bve(t,e,n,r,i,a,o){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");const s=X(t,"x","maxPool");let l=s,c=!1;s.rank===3&&(c=!0,l=re(s,[1,s.shape[0],s.shape[1],s.shape[2]])),j(dr(a,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${i}'`);const h=Ui(l.shape,e,a,i,r),d=[h.dilationHeight,h.dilationWidth];let p;r==="same"?p=wve([h.filterHeight,h.filterWidth],d):p=[[0,0],[0,0]];const g=d[0]===1&&d[1]===1,[y,x]=xve([h.inHeight,h.inWidth],d,p),b=g?r:"valid",w=g?l:SI(l,d,y),$=(n==="avg"?()=>uI(w,e,a,b,o):()=>bI(w,e,a,b,o))(),T=g?$:cI($,d,x);return c?re(T,[T.shape[1],T.shape[2],T.shape[3]]):T}function xve(t,e,n){const r=n.map(h=>h[0]),i=n.map(h=>h[1]),a=t.concat(r,i),o=e.map((h,d)=>(h-a[d]%h)%h),s=i.map((h,d)=>h+o[d]),l=e.map((h,d)=>[r[d],s[d]]),c=e.map((h,d)=>[0,o[d]]);return[l,c]}function wve(t,e){const r=t.map((o,s)=>o+(o-1)*(e[s]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),a=r.map((o,s)=>o-i[s]);return r.map((o,s)=>[i[s],a[s]])}const Sve=ie({pool_:bve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cve(t,e){const n=X(t,"x","prelu"),r=X(e,"alpha","prelu"),i={x:n,alpha:r};return ne.runKernel(b0,i)}const CI=ie({prelu_:Cve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ve(t,e=null,n=!1){let r=X(t,"x","prod");r.dtype==="bool"&&(r=Pe(r,"int32"));const i={x:r},a={axis:e,keepDims:n};return ne.runKernel(x0,i,a)}const Tve=ie({prod_:$ve});var wy={exports:{}},kve=wy.exports,l4;function Ave(){return l4||(l4=1,function(t){(function(e,n,r){function i(l){var c=this,h=s();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=h(" "),c.s1=h(" "),c.s2=h(" "),c.s0-=h(l),c.s0<0&&(c.s0+=1),c.s1-=h(l),c.s1<0&&(c.s1+=1),c.s2-=h(l),c.s2<0&&(c.s2+=1),h=null}function a(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var h=new i(l),d=c&&c.state,p=h.next;return p.int32=function(){return h.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&a(d,h),p.state=function(){return a(h,{})}),p}function s(){var l=4022871197,c=function(h){h=String(h);for(var d=0;d<h.length;d++){l+=h.charCodeAt(d);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:this.alea=o})(kve,t)}(wy)),wy.exports}var Sy={exports:{}},Eve=Sy.exports,u4;function Ive(){return u4||(u4=1,function(t){(function(e,n,r){function i(s){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(s|0)?l.x=s:c+=s;for(var h=0;h<c.length+64;h++)l.x^=c.charCodeAt(h)|0,l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var c=new i(s),h=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,h&&(typeof h=="object"&&a(h,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=o:this.xor128=o})(Eve,t)}(Sy)),Sy.exports}var Cy={exports:{}},Ove=Cy.exports,c4;function Nve(){return c4||(c4=1,function(t){(function(e,n,r){function i(s){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:c+=s;for(var h=0;h<c.length+64;h++)l.x^=c.charCodeAt(h)|0,h==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var c=new i(s),h=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,h&&(typeof h=="object"&&a(h,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=o:this.xorwow=o})(Ove,t)}(Cy)),Cy.exports}var $y={exports:{}},_ve=$y.exports,f4;function Rve(){return f4||(f4=1,function(t){(function(e,n,r){function i(s){var l=this;l.next=function(){var h=l.x,d=l.i,p,g;return p=h[d],p^=p>>>7,g=p^p<<24,p=h[d+1&7],g^=p^p>>>10,p=h[d+3&7],g^=p^p>>>3,p=h[d+4&7],g^=p^p<<7,p=h[d+7&7],p=p^p<<13,g^=p^p<<9,h[d]=g,l.i=d+1&7,g};function c(h,d){var p,g=[];if(d===(d|0))g[0]=d;else for(d=""+d,p=0;p<d.length;++p)g[p&7]=g[p&7]<<15^d.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],h.x=g,h.i=0,p=256;p>0;--p)h.next()}c(l,s)}function a(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var c=new i(s),h=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,h&&(h.x&&a(h,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=o:this.xorshift7=o})(_ve,t)}($y)),$y.exports}var Ty={exports:{}},Dve=Ty.exports,h4;function Mve(){return h4||(h4=1,function(t){(function(e,n,r){function i(s){var l=this;l.next=function(){var h=l.w,d=l.X,p=l.i,g,y;return l.w=h=h+1640531527|0,y=d[p+34&127],g=d[p=p+1&127],y^=y<<13,g^=g<<17,y^=y>>>15,g^=g>>>12,y=d[p]=y^g,l.i=p,y+(h^h>>>16)|0};function c(h,d){var p,g,y,x,b,w=[],S=128;for(d===(d|0)?(g=d,d=null):(d=d+"\0",g=0,S=Math.max(S,d.length)),y=0,x=-32;x<S;++x)d&&(g^=d.charCodeAt((x+32)%d.length)),x===0&&(b=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,x>=0&&(b=b+1640531527|0,p=w[x&127]^=g+b,y=p==0?y+1:0);for(y>=128&&(w[(d&&d.length||0)&127]=-1),y=127,x=4*128;x>0;--x)g=w[y+34&127],p=w[y=y+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,w[y]=g^p;h.w=b,h.X=w,h.i=y}c(l,s)}function a(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var c=new i(s),h=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,h&&(h.X&&a(h,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=o:this.xor4096=o})(Dve,t)}(Ty)),Ty.exports}var ky={exports:{}},Pve=ky.exports,d4;function Lve(){return d4||(d4=1,function(t){(function(e,n,r){function i(s){var l=this,c="";l.next=function(){var d=l.b,p=l.c,g=l.d,y=l.a;return d=d<<25^d>>>7^p,p=p-g|0,g=g<<24^g>>>8^y,y=y-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^y,l.a=y-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):c+=s;for(var h=0;h<c.length+20;h++)l.b^=c.charCodeAt(h)|0,l.next()}function a(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var c=new i(s),h=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,h&&(typeof h=="object"&&a(h,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=o:this.tychei=o})(Pve,t)}(ky)),ky.exports}var Ay={exports:{}};const Fve={},Bve=Object.freeze(Object.defineProperty({__proto__:null,default:Fve},Symbol.toStringTag,{value:"Module"})),zve=i9(Bve);var jve=Ay.exports,p4;function Uve(){return p4||(p4=1,function(t){(function(e,n,r){var i=256,a=6,o=52,s="random",l=r.pow(i,a),c=r.pow(2,o),h=c*2,d=i-1,p;function g(T,k,E){var I=[];k=k==!0?{entropy:!0}:k||{};var _=w(b(k.entropy?[T,$(n)]:T??S(),3),I),N=new y(I),R=function(){for(var O=N.g(a),P=l,B=0;O<c;)O=(O+B)*i,P*=i,B=N.g(1);for(;O>=h;)O/=2,P/=2,B>>>=1;return(O+B)/P};return R.int32=function(){return N.g(4)|0},R.quick=function(){return N.g(4)/4294967296},R.double=R,w($(N.S),n),(k.pass||E||function(O,P,B,U){return U&&(U.S&&x(U,N),O.state=function(){return x(N,{})}),B?(r[s]=O,P):O})(R,_,"global"in k?k.global:this==r,k.state)}function y(T){var k,E=T.length,I=this,_=0,N=I.i=I.j=0,R=I.S=[];for(E||(T=[E++]);_<i;)R[_]=_++;for(_=0;_<i;_++)R[_]=R[N=d&N+T[_%E]+(k=R[_])],R[N]=k;(I.g=function(O){for(var P,B=0,U=I.i,z=I.j,M=I.S;O--;)P=M[U=d&U+1],B=B*i+M[d&(M[U]=M[z=d&z+P])+(M[z]=P)];return I.i=U,I.j=z,B})(i)}function x(T,k){return k.i=T.i,k.j=T.j,k.S=T.S.slice(),k}function b(T,k){var E=[],I=typeof T,_;if(k&&I=="object")for(_ in T)try{E.push(b(T[_],k-1))}catch{}return E.length?E:I=="string"?T:T+"\0"}function w(T,k){for(var E=T+"",I,_=0;_<E.length;)k[d&_]=d&(I^=k[d&_]*19)+E.charCodeAt(_++);return $(k)}function S(){try{var T;return p&&(T=p.randomBytes)?T=T(i):(T=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(T)),$(T)}catch{var k=e.navigator,E=k&&k.plugins;return[+new Date,e,E,e.screen,$(n)]}}function $(T){return String.fromCharCode.apply(0,T)}if(w(r.random(),n),t.exports){t.exports=g;try{p=zve}catch{}}else r["seed"+s]=g})(typeof self<"u"?self:jve,[],Math)}(Ay)),Ay.exports}var MT,m4;function Vve(){if(m4)return MT;m4=1;var t=Ave(),e=Ive(),n=Nve(),r=Rve(),i=Mve(),a=Lve(),o=Uve();return o.alea=t,o.xor128=e,o.xorwow=n,o.xorshift7=r,o.xor4096=i,o.tychei=a,MT=o,MT}var $I=Vve();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kq{constructor(e,n,r,i,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=a||Math.random();this.random=$I.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,a,o;do i=2*this.random()-1,a=2*this.random()-1,o=i*i+a*a;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*a*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Wve{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=$I.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gve(t,e=0,n=1,r,i){if(Mo(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new kq(e,n,r,!1,i),o=lt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const qve=ie({randomNormal_:Gve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hve(t,e=0,n=1,r="float32",i){Mo(t);const a=lt(t,r),o=new Wve(e,n,null,i);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const dm=ie({randomUniform_:Hve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zd(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return ne.runKernel(KE,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xve(t){const n={input:X(t,"input","real")};return ne.runKernel(YE,n)}const Pv=ie({real_:Xve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kve(t){const n={x:X(t,"x","reciprocal")};return ne.runKernel(Hp,n)}const Yve=ie({reciprocal_:Kve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zve(t){const n={x:X(t,"x","relu")};return ne.runKernel(Xp,n)}const tu=ie({relu_:Zve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qve(t){const n={x:X(t,"x","relu6")};return ne.runKernel(Kp,n)}const Aq=ie({relu6_:Qve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jve(t,e){const r={x:X(t,"x","reverse")},i={dims:e};return ne.runKernel($0,r,i)}const Ul=ie({reverse_:Jve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ebe(t){const n={x:X(t,"x","round")};return ne.runKernel(Yp,n)}const Eq=ie({round_:ebe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tbe(t){const n={x:X(t,"x","rsqrt","float32")};return ne.runKernel(Zp,n)}const Iq=ie({rsqrt_:tbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nbe(t){const n={x:X(t,"x","selu")};return ne.runKernel(Qp,n)}const Oq=ie({selu_:nbe});function rbe(t,e,n,r,i,a=[1,1],o="NHWC"){const s=X(t,"x","separableConv2d"),l=X(e,"depthwiseFilter","separableConv2d"),c=X(n,"pointwiseFilter","separableConv2d");let h=s,d=!1;if(s.rank===3&&(d=!0,h=re(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");j(h.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${h.rank}.`),j(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),j(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),j(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),j(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const p=l.shape[2],g=l.shape[3];j(c.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${c.shape[2]}.`);const y=dI(h,l,r,i,o,a),b=zl(y,c,1,"valid",o);return d?re(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const Nq=ie({separableConv2d_:rbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ibe(t){const n={x:X(t,"x","sign")};return ne.runKernel(tm,n)}const abe=ie({sign_:ibe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function obe(t){const n={x:X(t,"x","sin","float32")};return ne.runKernel(Jp,n)}const _q=ie({sin_:obe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sbe(t){const n={x:X(t,"x","sinh")};return ne.runKernel(em,n)}const Rq=ie({sinh_:sbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(t,e,n){const r=X(t,"x","slice1d");return j(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Gt(r,[e],[n])}const TI=ie({slice1d_:lbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ube(t,e,n){const r=X(t,"x","slice2d");return j(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const Dq=ie({slice2d_:ube});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbe(t,e,n){const r=X(t,"x","slice3d");return j(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const kI=ie({slice3d_:cbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fbe(t,e,n){const r=X(t,"x","slice4d");return j(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Gt(r,e,n)}const Lv=ie({slice4d_:fbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hbe(t,e=-1){const n=X(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return ne.runKernel(O0,r,i)}const AI=ie({softmax_:hbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dbe(t){j(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ne.runKernel(FE,e)}const Mq=ie({fft_:dbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pbe(t){j(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ne.runKernel(jE,e)}const Pk=ie({ifft_:pbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mbe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=re(t,[n,e]);r=Pk(i)}else{const i=[n,2*(e-1)],a=re(Pv(t),[n,e]),o=re(gI(t),[n,e]),s=Ul(Gt(a,[0,1],[n,e-2]),1),l=te(Ul(Gt(o,[0,1],[n,e-2]),1),Tt(-1)),c=Mr([a,s],1),h=Mr([o,l],1),d=re(Xc(c,h),[i[0],i[1]]);r=Pk(d)}if(r=Pv(r),t.rank===3&&t.shape[0]!==0){const i=r,a=t.shape[0];r=re(r,[a,r.shape[0]/a,r.shape[1]]),i.dispose()}return r}const gbe=ie({irfft_:mbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ybe(t,e,n=0){const i={x:X(t,"x","split")},a={numOrSizeSplits:e,axis:n};return ne.runKernel(I0,i,a)}const pi=ie({split_:ybe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vbe(t,e){j(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const y=t.shape.map(b=>0),x=t.shape.map(b=>b);x[t.shape.length-1]=e,i=Gt(t,y,x),n=e}else if(e!=null&&e>n){const y=t.shape.map(x=>x);y[t.shape.length-1]=e-n,i=Mr([t,zn(y)],t.shape.length-1),n=e}else i=t;const a=vt(i),o=re(Xc(i,a),[r,n]),s=Mq(o),l=Math.floor(n/2)+1,c=Pv(s),h=gI(s),d=pi(c,[l,n-l],c.shape.length-1),p=pi(h,[l,n-l],h.shape.length-1),g=i.shape.slice();return g[i.shape.length-1]=l,re(Xc(d[0],p[0]),g)}const bbe=ie({rfft_:vbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xbe(t,e){let n=X(t,"a","squaredDifference"),r=X(e,"b","squaredDifference");[n,r]=pn(n,r),et(n.shape,r.shape);const i={a:n,b:r},a={};return ne.runKernel(am,i,a)}const wbe=ie({squaredDifference_:xbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sbe(t,e){const n=X(t,"x","squeeze","string_or_numeric");return re(n,Ms(n.shape,e).newShape)}const pm=ie({squeeze_:Sbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cbe(t,e=0){const n=eq(t,"tensors","stack","string_or_numeric");j(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&j(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return ne.runKernel(y0,r,i)}const Io=ie({stack_:Cbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(t,e=0){const r={x:X(t,"x","step")},i={alpha:e};return ne.runKernel(cm,r,i)}const mm=ie({step_:$be});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tbe(t,e,n,r,i=0,a=0,o=0,s=0,l=0){const h={x:X(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return ne.runKernel(tI,h,d)}const kbe=ie({stridedSlice_:Tbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Abe(t){const n={x:X(t,"x","tan","float32")};return ne.runKernel(sm,n)}const Ebe=ie({tan_:Abe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yr(t,e){cG(t);const n=M0(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return P0(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gc(t,e,n){if(cG(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=M0(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return P0(t,e,r,n)}function Pq(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(a+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(a+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(a+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(a+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(a+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function Ibe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}Pq(n,e,t)}function nu(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,a=n.length;let o=1;for(let d=i;d<a;++d)o*=n[d];const s=i<1?1:i,l=ve(e.shape)/s,c=[...Ve(n.slice(0,i)),1],h=ve(n);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:c,outputSize:h}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(t,e=1,n=!0){const r=X(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const a={x:r},o={k:e,sorted:n},[s,l]=ne.runKernel(nI,a,o);return{values:s,indices:l}}const Nbe=ie({topk_:Obe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _be(t,e=0,n=1,r,i){if(Mo(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new kq(e,n,r,!0,i),o=lt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const Lq=ie({truncatedNormal_:_be});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe(t,e=0){const n=X(t,"x","unique","string_or_numeric");j(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[a,o]=ne.runKernel(iI,r,i);return{values:a,indices:o}}const Dbe=ie({unique_:Rbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(t,e,n){const r=X(t,"x","unsortedSegmentSum"),i=X(e,"segmentIds","unsortedSegmentSum","int32");j(qc(n),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:i},o={numSegments:n};return ne.runKernel(_0,a,o)}const Fq=ie({unsortedSegmentSum_:Mbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pbe(t,e=0){const n=X(t,"x","unstack","string_or_numeric");j(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return ne.runKernel(N0,r,i)}const Vl=ie({unstack_:Pbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lbe(t,e=!0,n,r){return ne.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bq(t,e){const n=[];for(let a=0;a<e.length;a++)e[a]&&n.push(a);const r=lt(t,"int32"),i=lt([n.length,t.length],"int32");for(let a=0;a<n.length;a++){const o=r.indexToLoc(n[a]),s=a*t.length;i.values.set(o,s)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(t,e,n){const r=X(t,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),j(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{j(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},a={perm:e};return r.dtype==="complex64"?le(()=>{let o=Pv(r),s=gI(r);return o=ne.runKernel(pc,{x:o},a),s=ne.runKernel(pc,{x:s},a),n&&(s=dn(s)),Xc(o,s)}):ne.runKernel(pc,i,a)}const yt=ie({transpose_:Fbe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t,e){if(e==null)return t.shape.slice();if(At(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(t,e,n,r){const i=X(t,"x","dropout");if(j(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),j(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof kn?i.clone():i;const a=Bbe(i,n),o=1-e,s=He(U0(Ae(dm(a,0,1,"float32",r),o)),o);return te(i,s)}const jbe=ie({dropout_:zbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(t,e,n,r,i,a="NHWC",o){let s=t;t.rank===3&&(s=re(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=re(e,[1,e.shape[0],e.shape[1],e.shape[2]])),j(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),j(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),j(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=a==="NHWC"?s.shape[3]:s.shape[1],h=a==="NHWC"?l.shape[3]:l.shape[1];j(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),j(h===n[3],()=>`Error in conv2dDerFilter: depth of dy (${h}) must match output depth for filter (${n[3]}).`),Br("conv2dDerFilter",i,o);const d={x:s,dy:l},p={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,filterShape:n};return ne.runKernel(AE,d,p)}const EI=ie({conv2DBackpropFilter_:Ube});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function II(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return te(t,mm(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function OI(t,e){let n=e;const r=_n(t.shape,e.shape);return r.length>0&&(n=qe(n,r)),re(n,t.shape)}function NI(t,e,n,r){if(e==="linear")return t;if(e==="relu")return tu(t);if(e==="elu")return z0(t);if(e==="relu6")return Aq(t);if(e==="prelu")return CI(t,n);if(e==="leakyrelu")return yI(t,r);if(e==="sigmoid")return wf(t);throw new Error(`Unknown fused activation ${e}.`)}const _I=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:h}){if(l=l||"linear",_I(ne.state.gradientDepth,l)===!1){j(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=zl(t,e,n,r,i,a,o);return s!=null&&(E=Ae(E,s)),NI(E,l,c,h)}const d=X(t,"x","conv2d","float32"),p=X(e,"filter","conv2d","float32");let g=d,y=!1;d.rank===3&&(y=!0,g=re(d,[1,d.shape[0],d.shape[1],d.shape[2]])),j(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),j(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Br("fused conv2d",r,o);const x=i==="NHWC"?g.shape[3]:g.shape[1];j(p.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${p.shape[2]}.`),j(dr(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);const b=er(g.shape,p.shape,n,a,r,o);let w;s!=null&&(w=X(s,"bias","fused conv2d"),[w]=pn(w,d),i==="NHWC"?et(b.outShape,w.shape):(j(w.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${w.shape.length}.`),j(w.shape.length===0||w.shape[0]===b.outChannels||w.shape[0]===1,()=>`Error in fused conv2d: bias shape (${w.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let S;if(c!=null){const E=c.shape;if(j(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)j(E[0]===1||E[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${b.outChannels}).`);else if(E.length===3)try{et(E,b.outShape)}catch{const _=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(_)}S=X(c,"prelu weights","fused conv2d")}const $=(E,I)=>{j(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[_,N,R,O]=I,P=II(E,R,l);j(Fl(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const B=fI(N.shape,P,_,n,r),U=EI(N,P,_.shape,n,r),z=[B,U];if(O!=null){const M=OI(O,P);z.push(M)}return z},T={x:g,filter:p,bias:w,preluActivationWeights:S},k={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:l,leakyreluAlpha:h};return s==null?Yc((I,_,N)=>{let R=ne.runKernel(Ov,T,k);return N([_,I,R]),y&&(R=re(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:$}})(g,p):Yc((I,_,N,R)=>{let O=ne.runKernel(Ov,T,k);return R([_,I,O,N]),y&&(O=re(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:$}})(g,p,w)}const Wbe=ie({fusedConv2d_:Vbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(t,e,n,r,i,a=[1,1],o){let s=t;t.rank===3&&(s=re(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=re(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:s,dy:l},h={strides:r,pad:i,dimRoundingMode:o,dilations:a,filterShape:n};return ne.runKernel(DE,c,h)}const qbe=ie({depthwiseConv2dNativeBackpropFilter_:Gbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t,e,n,r,i,a=[1,1],o){let s=e,l=!1;e.rank===3&&(l=!0,s=re(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:s,filter:n},h={strides:r,pad:i,dimRoundingMode:o,dilations:a,inputShape:t},d=ne.runKernel(ME,c,h);return l?re(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Xbe=ie({depthwiseConv2dNativeBackpropInput_:Hbe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(_I(ne.state.gradientDepth,a)===!1){let O=$t(t,e,n,r);return i!=null&&(O=Ae(O,i)),NI(O,a,o,s)}let l=X(t,"a","fused matMul"),c=X(e,"b","fused matMul");[l,c]=pn(l,c);const h=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],g=r?c.shape[c.rank-2]:c.shape[c.rank-1],y=l.shape.slice(0,-2),x=c.shape.slice(0,-2),b=ve(y),w=ve(x);j(h===d,()=>`Error in fused matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const $=et(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,g]),T=n?re(l,[b,h,p]):re(l,[b,p,h]),k=r?re(c,[w,g,d]):re(c,[w,d,g]);let E;i!=null&&(E=X(i,"bias","fused matMul"),[E]=pn(E,l),et($,E.shape));let I;o!=null&&(I=X(o,"prelu weights","fused matMul"));const _=(O,P)=>{const[B,U,z,M]=P,V=II(re(O,z.shape),z,a);let W,H;if(!n&&!r?(W=$t(V,U,!1,!0),H=$t(B,V,!0,!1)):!n&&r?(W=$t(V,U,!1,!1),H=$t(V,B,!0,!1)):n&&!r?(W=$t(U,V,!1,!0),H=$t(B,V,!1,!1)):(W=$t(U,V,!0,!0),H=$t(V,B,!0,!0)),i!=null){const L=OI(M,V);return[W,H,L]}else return[W,H]},N={a:T,b:k,bias:E,preluActivationWeights:I},R={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:s};return i==null?Yc((P,B,U)=>{const z=ne.runKernel(Iv,N,R);return U([P,B,z]),{value:re(z,$),gradFunc:_}})(T,k):Yc((P,B,U,z)=>{const M=ne.runKernel(Iv,N,R);return z([P,B,M,U]),{value:re(M,$),gradFunc:_}})(T,k,E)}const g4=ie({fusedMatMul_:Kbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(t,e,n,r,i="bilinear",a=0){const o=X(t,"image","cropAndResize"),s=X(e,"boxes","cropAndResize","float32"),l=X(n,"boxInd","cropAndResize","int32"),c=s.shape[0];j(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),j(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${s.shape}.`),j(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${s.shape}.`),j(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),j(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),j(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const h={image:o,boxes:s,boxInd:l},d={method:i,extrapolationValue:a,cropSize:r};return ne.runKernel(NE,h,d)}const Zbe=ie({cropAndResize_:Ybe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(t){const e=X(t,"image","flipLeftRight","float32");j(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ne.runKernel(zE,n,{})}const Jbe=ie({flipLeftRight_:Qbe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e0e(t){const e=X(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];j(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),j(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,aa(e,i)}const t0e=ie({grayscaleToRGB_:e0e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n0e(t){const e=X(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];j(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),j(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,a=Pe(e,"float32"),o=Yr([.2989,.587,.114]);let s;switch(e.rank){case 2:s=qh("ij,j->i",a,o);break;case 3:s=qh("ijk,k->ij",a,o);break;case 4:s=qh("ijkl,l->ijk",a,o);break;case 5:s=qh("ijklm,m->ijkl",a,o);break;case 6:s=qh("ijklmn,n->ijklm",a,o);break;default:throw new Error("Not a valid tensor rank.")}return s=_r(s,-1),Pe(s,i)}const r0e=ie({rgbToGrayscale_:n0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0e(t,e,n=0,r=.5){const i=X(t,"image","rotateWithOffset","float32");j(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const a={image:i},o={radians:e,fillValue:n,center:r};return ne.runKernel(aI,a,o)}const a0e=ie({rotateWithOffset_:i0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cf(t,e,n,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);const o=t.shape[0];return n=Math.min(n,o),j(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),j(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),j(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),j(e.rank===1,()=>"scores must be a 1D tensor"),j(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),j(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o0e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=X(t,"boxes","nonMaxSuppression","float32"),o=X(e,"scores","nonMaxSuppression","float32"),s=Cf(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return ne.runKernel(qE,{boxes:a,scores:o},l)}const s0e=ie({nonMaxSuppression_:o0e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l0e(t,e,n){const r=u0e(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function u0e(t,e,n){return f0e(t,e,n||c0e)}function c0e(t,e){return t>e?1:t<e?-1:0}function f0e(t,e,n){let r=0,i=t.length,a=0,o=!1;for(;r<i;){a=r+(i-r>>>1);const s=n(e,t[a]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RI(t,e,n,r,i){return PI(t,e,n,r,i,0)}function DI(t,e,n,r,i,a){return PI(t,e,n,r,i,0,!1,a,!0)}function MI(t,e,n,r,i,a){return PI(t,e,n,r,i,a,!0)}function PI(t,e,n,r,i,a,o=!1,s=!1,l=!1){const c=[];for(let b=0;b<e.length;b++)e[b]>i&&c.push({score:e[b],boxIndex:b,suppressBeginIndex:0});c.sort(y4);const h=a>0?-.5/a:0,d=[],p=[];for(;d.length<n&&c.length>0;){const b=c.pop(),{score:w,boxIndex:S,suppressBeginIndex:$}=b;if(w<i)break;let T=!1;for(let k=d.length-1;k>=$;--k){const E=h0e(t,S,d[k]);if(E>=r){T=!0;break}if(b.score=b.score*d0e(r,h,E),b.score<=i)break}b.suppressBeginIndex=d.length,T||(b.score===w?(d.push(S),p.push(b.score)):b.score>i&&l0e(c,b,y4))}const g=d.length,y=n-g;s&&y>0&&(d.push(...new Array(y).fill(0)),p.push(...new Array(y).fill(0)));const x={selectedIndices:d};return o&&(x.selectedScores=p),l&&(x.validOutputs=g),x}function h0e(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),h=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),g=(s-a)*(l-o),y=(d-c)*(p-h);if(g<=0||y<=0)return 0;const x=Math.max(a,c),b=Math.max(o,h),w=Math.min(s,d),S=Math.min(l,p),$=Math.max(w-x,0)*Math.max(S-b,0);return $/(g+y-$)}function d0e(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function y4(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function p0e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=X(t,"boxes","nonMaxSuppressionAsync"),o=X(e,"scores","nonMaxSuppressionAsync"),s=Cf(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l=await Promise.all([a.data(),o.data()]),c=l[0],h=l[1],{selectedIndices:d}=RI(c,h,n,r,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),Yr(d,"int32")}const m0e=p0e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=X(t,"boxes","nonMaxSuppression"),s=X(e,"scores","nonMaxSuppression"),l=Cf(o,s,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;const c={boxes:o,scores:s},h={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a},d=ne.runKernel(XE,c,h);return{selectedIndices:d[0],selectedScores:d[1]}}const y0e=ie({nonMaxSuppressionWithScore_:g0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function v0e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=X(t,"boxes","nonMaxSuppressionAsync"),s=X(e,"scores","nonMaxSuppressionAsync"),l=Cf(o,s,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;const c=await Promise.all([o.data(),s.data()]),h=c[0],d=c[1],{selectedIndices:p,selectedScores:g}=MI(h,d,n,r,i,a);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:Yr(p,"int32"),selectedScores:Yr(g)}}const b0e=v0e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=X(t,"boxes","nonMaxSuppression"),s=X(e,"scores","nonMaxSuppression"),l=Cf(o,s,n,r,i,null),c=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,p={boxes:o,scores:s},g={maxOutputSize:c,iouThreshold:h,scoreThreshold:d,padToMaxOutputSize:a},y=ne.runKernel(HE,p,g);return{selectedIndices:y[0],validOutputs:y[1]}}const w0e=ie({nonMaxSuppressionPadded_:x0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function S0e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=X(t,"boxes","nonMaxSuppressionAsync"),s=X(e,"scores","nonMaxSuppressionAsync"),l=Cf(o,s,n,r,i,null),c=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,[p,g]=await Promise.all([o.data(),s.data()]),{selectedIndices:y,validOutputs:x}=DI(p,g,c,h,d,a);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:Yr(y,"int32"),validOutputs:Tt(x,"int32")}}const C0e=S0e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $0e(t,e,n=!1,r=!1){const i=X(t,"images","resizeBilinear");j(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),j(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),j(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=re(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},l={alignCorners:n,halfPixelCenters:r,size:e},c=ne.runKernel(C0,s,l);return o?re(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const zq=ie({resizeBilinear_:$0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0e(t,e,n=!1,r=!1){const i=X(t,"images","resizeNearestNeighbor");j(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),j(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),j(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),j(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=re(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},l={alignCorners:n,halfPixelCenters:r,size:e},c=ne.runKernel(S0,s,l);return o?re(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const jq=ie({resizeNearestNeighbor_:T0e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k0e(t,e="binary",n=!1,r=.5){const i=X(t,"image","threshold"),a=.2989,o=.587,s=.114,l=i.shape[0]*i.shape[1];let c=te(Yr([r]),255),h,d,p,g;if(j(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),j(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),j(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),j(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[h,d,p]=pi(i,[1,1,1],-1);const b=te(h,a),w=te(d,o),S=te(p,s);g=Ae(Ae(b,w),S)}else g=t;if(e==="otsu"){const b=Cge(Pe(Eq(g),"int32"),tq([]),256);c=A0e(b,l)}const y=n?Sf(g,c):gi(g,c);return Pe(te(y,255),"int32")}function A0e(t,e){let n=Yr([-1]),r=Yr([0]),i=Yr([0]),a,o,s,l,c,h;for(let d=0;d<t.size-1;d++){a=Gt(t,0,d+1),o=Gt(t,d+1),c=He(qe(a),e),h=He(qe(o),e);const p=qe(te(a,Zd(0,a.size)));s=He(p,qe(a));const g=B0(o.shape,a.size),y=Ae(Zd(0,o.size),g),x=te(o,y);l=He(qe(x),qe(o));const b=Ke(s,l),w=Ke(s,l),S=te(c,h);i=te(te(S,b),w);const $=gi(i,r);r=kr($,i,r),n=kr($,Yr([d]),n)}return n}const E0e=ie({threshold_:k0e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I0e(t,e,n="nearest",r="constant",i=0,a){const o=X(t,"image","transform","float32"),s=X(e,"transforms","transform","float32");j(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),j(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),j(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const l={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:i,outputShape:a};return ne.runKernel(rI,l,c)}const O0e=ie({transform_:I0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N0e(t,e,n){const r=X(t,"a","bandPart");j(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[a,o]=r.shape.slice(-2);let s,l;typeof e=="number"?(j(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),j(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),s=X(e<0?a:e,"numLower","bandPart")):(j(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),s=kr(Dv(e,0),a,Yd(e,a))),typeof n=="number"?(j(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),j(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=X(n<0?o:n,"numUpper","bandPart")):(j(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=kr(Dv(n,0),o,Yd(n,o)));const c=re(Zd(0,a,1,"int32"),[-1,1]),h=Zd(0,o,1,"int32"),d=Ke(c,h),p=Eo(Sf(d,s),eu(d,dn(l))),g=zn([a,o],r.dtype);return re(Io(Vl(re(r,[-1,a,o])).map(y=>kr(p,y,g))),i)}const _0e=ie({bandPart_:N0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R0e(t){let e;if(Array.isArray(t)){e=!1,j(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let a=1;a<t.length;++a)j(t[a].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[a].shape[0]} vs. ${i})`)}else e=!0,t=pi(t,t.shape[0],0).map(i=>pm(i,[0]));j(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(ne.tidy(()=>{let a=r[i];if(i>0)for(let o=0;o<i;++o){const s=te(qe(te(n[o],a)),n[o]);a=Ke(a,s)}return He(a,j0(a,"euclidean"))}));return e?Io(n,0):n}const D0e=ie({gramSchmidt_:R0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0e(t,e=!1){if(j(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return v4(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Vl(re(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],a=[];r.forEach(l=>{const[c,h]=v4(l,e);i.push(c),a.push(h)});const o=re(Io(i,0),t.shape),s=re(Io(a,0),t.shape);return[o,s]}}function v4(t,e=!1){return ne.tidy(()=>{j(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=xq(n),a=kl(t);const o=gc([[1]],[1,1]);let s=kl(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const h=a,d=s,p=i;[s,a,i]=ne.tidy(()=>{const g=Gt(a,[c,c],[n-c,1]),y=j0(g),x=Gt(a,[c,c],[1,1]),b=kr(gi(x,0),gc([[-1]]),gc([[1]])),w=Ke(x,te(b,y)),S=He(g,w);S.shape[0]===1?s=kl(o):s=Mr([o,Gt(S,[1,0],[S.shape[0]-1,S.shape[1]])],0);const $=dn(He($t(b,w),y)),T=Gt(a,[c,0],[n-c,r]),k=te($,s),E=yt(s);if(c===0)a=Ke(T,$t(k,$t(E,T)));else{const N=Ke(T,$t(k,$t(E,T)));a=Mr([Gt(a,[0,0],[c,r]),N],0)}const I=yt(k),_=Gt(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=Ke(_,$t($t(_,s),I));else{const N=Ke(_,$t($t(_,s),I));i=Mr([Gt(i,[0,0],[n,c]),N],1)}return[s,a,i]}),ot([h,d,p])}return!e&&n>r&&(i=Gt(i,[0,0],[n,r]),a=Gt(a,[0,0],[r,r])),[i,a]})}const P0e=ie({qr_:M0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yo={flipLeftRight:Jbe,grayscaleToRGB:t0e,resizeNearestNeighbor:jq,resizeBilinear:zq,rgbToGrayscale:r0e,rotateWithOffset:a0e,cropAndResize:Zbe,nonMaxSuppression:s0e,nonMaxSuppressionAsync:m0e,nonMaxSuppressionWithScore:y0e,nonMaxSuppressionWithScoreAsync:b0e,nonMaxSuppressionPadded:w0e,nonMaxSuppressionPaddedAsync:C0e,threshold:E0e,transform:O0e},L0e={bandPart:_0e,gramSchmidt:D0e,qr:P0e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F0e=new Map,B0e=new Map;class $f{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class _i{constructor(){this.classNameMap={}}static getMap(){return _i.instance==null&&(_i.instance=new _i),_i.instance}static register(e){_i.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Te(t,e,n){j(t.className!=null,()=>"Class being registered does not have the static className property defined."),j(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),j(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return _i.register(t),F0e.set(i,t),B0e.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class js extends $f{minimize(e,n=!1,r){const{value:i,grads:a}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:a[s.name]}));this.applyGradients(o)}else this.applyGradients(a);return ot(a),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return Wye(e,n)}dispose(){this.iterations_!=null&&ot(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Tt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(js,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uq extends js{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ne.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:le(()=>vt(a).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:le(()=>vt(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;le(()=>{const h=Ae(te(l,this.rho),te(Zt(s),1-this.rho)),d=te(He(hr(Ae(c,this.epsilon)),hr(Ae(l,this.epsilon))),s),p=Ae(te(c,this.rho),te(Zt(d),1-this.rho));l.assign(h),c.assign(p);const g=Ae(te(d,-this.learningRate),a);a.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(ot(this.accumulatedGrads.map(e=>e.variable)),ot(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vq extends js{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ne.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:le(()=>B0(a.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const s=this.accumulatedGrads[i].variable;le(()=>{const l=Ae(s,Zt(o));s.assign(l);const c=Ae(te(He(o,hr(Ae(l,ne.backend.epsilon()))),-this.learningRate),a);a.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&ot(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wq extends js{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],le(()=>{this.accBeta1=Tt(n).variable(),this.accBeta2=Tt(r).variable()}),i==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);le(()=>{const r=Ke(1,this.accBeta1),i=Ke(1,this.accBeta2);n.forEach((a,o)=>{const s=ne.registeredVariables[a],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:le(()=>vt(s).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${a}/v`,variable:le(()=>vt(s).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[a];if(c==null)return;const h=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,p=Ae(te(h,this.beta1),te(c,1-this.beta1)),g=Ae(te(d,this.beta2),te(Zt(c),1-this.beta2)),y=He(p,r),x=He(g,i);h.assign(p),d.assign(g);const b=Ae(te(He(y,Ae(hr(x),this.epsilon)),-this.learningRate),s);s.assign(b)}),this.accBeta1.assign(te(this.accBeta1,this.beta1)),this.accBeta2.assign(te(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ot(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&ot(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),le(()=>{this.accBeta1.assign(jl(this.beta1,this.iterations_+1)),this.accBeta2.assign(jl(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gq extends js{static get className(){return"Adamax"}constructor(e,n,r,i=null,a=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],le(()=>{this.iteration=Tt(0).variable(),this.accBeta1=Tt(n).variable()}),i==null&&(this.epsilon=ne.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);le(()=>{const r=Ke(1,this.accBeta1),i=He(-this.learningRate,Ae(te(this.iteration,this.decay),1));n.forEach((a,o)=>{const s=ne.registeredVariables[a],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:vt(s).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${a}/v`,variable:vt(s).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[a];if(c==null)return;const h=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,p=Ae(te(h,this.beta1),te(c,1-this.beta1)),g=te(d,this.beta2),y=wr(c),x=Bs(g,y);h.assign(p),d.assign(x);const b=Ae(te(He(i,r),He(p,Ae(x,this.epsilon))),s);s.assign(b)}),this.iteration.assign(Ae(this.iteration,1)),this.accBeta1.assign(te(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ot(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&ot(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LI extends js{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=ne.registeredVariables[r];le(()=>{const s=Ae(te(this.c,a),o);o.assign(s)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Ra(Tt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qq extends LI{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Tt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ne.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:le(()=>vt(a).variable(!1))});const o=this.accumulations[i].variable,s=Array.isArray(e)?e[i].tensor:e[r];s!=null&&le(()=>{let l;const c=Ae(te(this.m,o),s);this.useNesterov?l=Ae(te(this.c,Ae(s,te(c,this.m))),a):l=Ae(te(this.c,c),a),o.assign(c),a.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&ot(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hq extends js{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,a=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,i==null&&(this.epsilon=ne.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=ne.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:le(()=>vt(a).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:le(()=>vt(a).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:le(()=>vt(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;le(()=>{const h=Ae(te(l,this.decay),te(Zt(s),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,p=Ae(te(d,this.decay),te(s,1-this.decay)),g=He(te(s,this.learningRate),hr(Ke(h,Ae(Zt(p),this.epsilon)))),y=Ae(te(c,this.momentum),g);l.assign(h),d.assign(p),c.assign(y);const x=Ke(a,y);a.assign(x)}else{const d=Ae(te(l,this.decay),te(Zt(s),1-this.decay)),p=Ae(te(c,this.momentum),He(te(s,this.learningRate),hr(Ae(d,this.epsilon))));l.assign(d),c.assign(p);const g=Ke(a,p);a.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&ot(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&ot(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&ot(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z0e=[Uq,Vq,Wq,Gq,qq,Hq,LI];function j0e(){for(const t of z0e)Te(t)}function FI(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ve(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,a=i[i.length-1];let o=1;for(let d=0;d<i.length-1;++d)o*=i[d];const s=t.shape,l=i.slice();l.pop();let c=1;for(let d=a;d<n;++d)c*=s[d],l.push(s[d]);const h=[...Ve(t.shape).map(d=>d/c),1].slice(0,a);return[l,o,c,h]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lk=-2,U0e=-1;function BI(t,e,n){const r=t.shape.length;j(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),j(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)j(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function V0e(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function zI(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function Xq(t,e,n,r){const i=[...t];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<n;a++)a===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function Kq(t,e,n){return n<=t?n:n-(e-1)}function Yq(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function W0e(t,e,n,r,i,a,o,s,l){const c=t.length;let h=new Array(c),d=new Array(c),p=new Array(c);if(e.length&&n>0){const g=e[0],y=n+1;h=Zq(o,g,y,r,t),d=Qq(s,g,y,i,t),p=Xq(a,g,y,t)}else for(let g=0;g<c;g++)h[g]=eH(o,r,a,t,g,l),d[g]=tH(s,i,a,t,g,l),p[g]=Jq(a,g,l);return{begin:h,end:d,strides:p}}function Zq(t,e,n,r,i){const a=[...i],o=Yq(n,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=0;else{const l=Kq(e,n,s);let c=r[l];t&1<<l&&(c=0),a[s]=c}return a}function Qq(t,e,n,r,i){const a=[...i],o=Yq(n,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=Number.MAX_SAFE_INTEGER;else{const l=Kq(e,n,s);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),a[s]=c}for(let s=0;s<a.length;s++){const l=i[s];a[s]<0&&(a[s]+=l),a[s]=Dl(0,a[s],i[s])}return a}function Jq(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function eH(t,e,n,r,i,a){let o=e[i];const s=n[i]||1;(t&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=Dl(0,o,l-1),o}function tH(t,e,n,r,i,a){let o=e[i];const s=n[i]||1;(t&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),s>0?o=Dl(0,o,l):o=Dl(-1,o,l-1),o}function jI(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function UI(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function V0(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{j(o!==-1,()=>"slice() does not support negative begin indexing.")});let a;return n==null?a=new Array(i).fill(-1):typeof n=="number"?a=[n,...new Array(i-1).fill(-1)]:n.length<i?a=n.concat(new Array(i-n.length).fill(-1)):a=n,a=a.map((o,s)=>o>=0?o:(j(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),t.shape[s]-r[s])),[r,a]}function VI(t,e,n,r,i,a,o,s,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&(o&o-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let h=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let $=0;$<d.dims;$++)h&&(1<<$&s)!==0&&d.numAddAxisAfterEllipsis++,1<<$&o&&(h=!0);h||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};G0e(d,p);let g=!0,y=!0,x=!0;const b=[],w=[];for(let $=0;$<t.length;++$){if(p.strides[$]===0)throw Error(`strides[${$}] must be non-zero`);const T=!!(p.shrinkAxisMask&1<<$),k=t[$];if(k===-1){b.push(T?1:-1);continue}const E=[p.beginMask&1<<$,p.endMask&1<<$],I=[p.strides[$]>0?0:-1,p.strides[$]>0?k:k-1];if(T&&p.strides[$]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&p.strides[$]===1;const _=!!(p.beginMask&1<<$&&p.endMask&1<<$);if(p.beginValid&&p.endValid){if(T){const P=p.begin[$]<0?k+p.begin[$]:p.begin[$];if(p.begin[$]=P,p.end[$]=p.begin[$]+1,P<0||P>=k)throw Error(`slice index ${p.begin[$]} of dimension ${$} out of bounds.`)}else p.begin[$]=b4(p.begin[$],0,p.strides[$],k,E,I),p.end[$]=b4(p.end[$],1,p.strides[$],k,E,I);const O=p.strides[$]===1&&p.begin[$]===0&&p.end[$]===k;g=g&&O,y=y&&($===0&&p.strides[$]===1||O)}else g=g&&p.strides[$]===1&&_,y=y&&($===0&&p.strides[$]===1||_);let N,R=!1;if(p.beginValid&&p.endValid?(N=p.end[$]-p.begin[$],R=!0):T?(N=1,R=!0):_&&k>=0&&(p.strides[$]<0?N=-k:N=k,R=!0),R){let O;N===0||N<0!=p.strides[$]<0?O=0:O=Math.trunc(N/p.strides[$])+(N%p.strides[$]!==0?1:0),b.push(O)}else b.push(-1)}for(let $=0;$<p.finalShapeGatherIndices.length;++$){const T=p.finalShapeGatherIndices[$];T>=0?w.push(b[T]):T===Lk&&w.push(1)}return{finalShapeSparse:w.filter(($,T)=>p.finalShapeGatherIndices[T]!==Lk),finalShape:w,isIdentity:g,sliceDim0:y,isSimpleSlice:x,begin:p.begin,end:p.end,strides:p.strides}}function G0e(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(Lk),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(U0e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function b4(t,e,n,r,i,a){if(i[e])return n>0?a[e]:a[e+1&1];{const o=t<0?r+t:t;return o<a[0]?a[0]:o>a[1]?a[1]:o}}const q0e=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:BI,computeFlatOffset:UI,computeOutShape:zI,getNormalizedAxes:W0e,isSliceContinous:jI,maskToAxes:V0e,parseSliceParams:V0,sliceInfo:VI,startForAxis:eH,startIndicesWithElidedDims:Zq,stopForAxis:tH,stopIndicesWithElidedDims:Qq,stridesForAxis:Jq,stridesWithElidedDims:Xq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H0e{static sgd(e){return new LI(e)}static momentum(e,n,r=!1){return new qq(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,a=!1){return new Hq(e,n,r,i,a)}static adam(e=.001,n=.9,r=.999,i=null){return new Wq(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new Uq(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,a=0){return new Gq(e,n,r,i,a)}static adagrad(e,n=.1){return new Vq(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ju=H0e;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X0e=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function nH(){return new Promise(t=>X0e(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WI(t,e){const n=t[0].length;t.forEach((i,a)=>{j(i.length===n,()=>`Error in concat${n}D: rank of tensors[${a}] must be the same as the rank of the rest (${n})`)}),j(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,a)=>{for(let o=0;o<n;o++)j(o===e||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${a}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function Da(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var na;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(na||(na={}));function rH(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const a=n[i],o=r[r.length-n.length+i],s=r[o];if(a>=0)if(s>=0){if(s!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${a} but shape[${i+t}] = ${s}`)}else r[o]=a}return r}function iH(t){const e={FIRST_DIM_SIZE:na.FIRST_DIM_SIZE,VALUE_ROWIDS:na.VALUE_ROWIDS,ROW_LENGTHS:na.ROW_LENGTHS,ROW_SPLITS:na.ROW_SPLITS,ROW_LIMITS:na.ROW_LIMITS,ROW_STARTS:na.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function aH(t){return t.length===0?0:t[0]===na.FIRST_DIM_SIZE?t.length-1:t.length}function oH(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const a=t[i],o=e[i+1];if(a>=0&&o>=0&&a!==1&&a!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${a} but ragged tensor input.flatValues.shape[${i-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GI=30;function W0(t){return t<=GI?t:wk(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qI(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gm(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const a=e.length;for(let o=0;o<a;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(a+1))}return i}function ym(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],a=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?a.push(o):i.push(o);r.push(...i),r.push(0),r.push(...a)}return r}function vm(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let a=1;a<t.length;++a)a<=e.length?r?i.push(e[a-1]*t[a]):i.push(t[a]/e[a-1]):i.push(t[a]);return i}function HI(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function XI(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G0=1.7580993408473768,q0=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KI=.3275911,YI=.254829592,ZI=-.284496736,QI=1.421413741,JI=-1.453152027,eO=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oo(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function sH(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function lH(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function uH(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function tO(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function cH(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function fH(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const a=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}function hH(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),a=Math.sin(r);return{real:i,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PT="->",K0e=/->/g,x4=",",w4="...";function nO(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(K0e,"").length)/PT.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${PT}").`);const[r,i]=t.split(PT);j(r.indexOf(w4)===-1,()=>`The ellipsis notation ("${w4}") is not supported yet.`);const a=r.split(x4),o=a.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let p=0;p<i.length;++p){const g=i[p];if(!a.some(y=>y.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);s.indexOf(g)===-1&&s.push(g)}for(let p=0;p<r.length;++p){const g=r[p];s.indexOf(g)===-1&&g!==x4&&s.push(g)}const l=new Array(a.length);for(let p=0;p<o;++p){if(new Set(a[p].split("")).size!==a[p].length)throw new Error(`Found duplicate axes in input component ${a[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let g=0;g<a[p].length;++g)l[p].push(s.indexOf(a[p][g]))}const c=s.length,h=i.length,d=[];for(let p=h;p<c;++p)d.push(p);return{allDims:s,summedDims:d,idDims:l}}function rO(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function iO(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const a=n[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=a[o]:j(r[e[i][o]]===a[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(a)}, but got dimension ${a[o]}`)}}function aO(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let o=0;o<i;++o)r.push([]);const a=[];for(let o=0;o<n.length;++o){const s=n[o],l=Y0e(e,s);for(const c of l)a.indexOf(c)===-1&&(r[o].push(c),a.push(c))}return{path:n,steps:r}}function oO(t){return t.every((e,n)=>e===n)}function Y0e(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function sO(t,e,n=0){let r=[];if(typeof e=="number")j(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);j(i<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const o=e.reduce((s,l)=>l>0?s+l:s);e[a]=t.shape[n]-o}j(t.shape[n]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dH(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function pH(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function mH(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gH(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function yH(t,e){return`size ${t} must be non-negative, not ${e}`}function vH(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function bH(t,e){const n=ve(t),r=ve(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function xH(t,e){const n=ve(t),r=ve(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fk(){return"segment ids must be >= 0"}function wH(){return"segment ids are not increasing"}function SH(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function CH(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $H(t,e){let n=!1,r;for(t<=GI?(r=t,n=!0):r=wk(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=wk(t,r+1);return r}function TH(t,e,n){const r=[],i=t.length;for(let a=0;a<i;a++)a!==e?r.push(t[a]):r.push(n);return r}function lO(t,e,n,r){const i=e.shape.length,a=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],s=[];let l=1,c=1,h=1;for(let d=0;d<r;++d)s.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)s.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<i;d++)s.push(e.shape[d]);for(let d=n+1;d<a;d++)s.push(t.shape[d]),h*=t.shape[d];return{batchSize:l,sliceSize:h,outerSize:c,dimSize:o,outputShape:s}}const Z0e=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:lO,computeOutShape:TH,segOpComputeOptimalWindowSize:$H},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function No(t){try{return t.map(e=>Ss(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function kH(t){return t.map(e=>bs(e))}const Q0e=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:YI,ERF_A2:ZI,ERF_A3:QI,ERF_A4:JI,ERF_A5:eO,ERF_P:KI,PARALLELIZE_THRESHOLD:GI,get RowPartitionType(){return na},SELU_SCALE:q0,SELU_SCALEALPHA:G0,applyActivation:NI,assertAndGetBroadcastShape:et,assertAxesAreInnerMostDims:tr,assertParamsConsistent:WI,assignToTypedArray:cH,axesAreInnerMostDims:pI,calculateShapes:nu,checkEinsumDimSizes:iO,checkPadOnDimRoundingMode:Br,combineLocations:vq,combineRaggedTensorToTensorShapes:rH,complexWithEvenIndex:lH,complexWithOddIndex:uH,computeConv2DInfo:er,computeConv3DInfo:Ls,computeDefaultPad:lI,computeDilation2DInfo:fm,computeOptimalWindowSize:W0,computeOutAndReduceShapes:Wn,computeOutShape:Da,computePool2DInfo:Ui,computePool3DInfo:Po,convertConv2DDataFormat:Lo,decodeEinsumEquation:nO,eitherStridesOrDilationsAreOne:dr,expandShapeToKeepDim:Sn,exponent:hH,exponents:fH,fromStringArrayToUint8:kH,fromUint8ToStringArray:No,getAxesPermutation:on,getBroadcastDims:Kc,getComplexWithIndex:tO,getEinsumComputePath:aO,getEinsumPermutation:rO,getFusedBiasGradient:OI,getFusedDyActivation:II,getImageCenter:qI,getInnerMostAxes:mn,getPermuted:ym,getRaggedRank:aH,getReductionAxes:_n,getReshaped:gm,getReshapedPermuted:vm,getRowPartitionTypesHelper:iH,getSliceBeginCoords:HI,getSliceSize:XI,getSparseFillEmptyRowsIndicesDenseShapeMismatch:dH,getSparseFillEmptyRowsNegativeIndexErrorMessage:pH,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:mH,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:vH,getSparseReshapeInputOutputMismatchErrorMessage:xH,getSparseReshapeInputOutputMultipleErrorMessage:bH,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:gH,getSparseReshapeNegativeOutputDimErrorMessage:yH,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:CH,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Fk,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:wH,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:SH,getUndoAxesPermutation:Fs,isIdentityPermutation:oO,log:Npe,mergeRealAndImagArrays:Oo,prepareAndValidate:FI,prepareSplitSize:sO,segment_util:Z0e,shouldFuse:_I,slice_util:q0e,splitRealAndImagArrays:sH,stridesOrDilationsArePositive:Bl,tupleValuesAreOne:Fl,upcastType:Zr,validateDefaultValueShape:oH,validateInput:Ibe,validateUpdateShape:Pq,warn:hi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */j0e();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AH={kernelName:Db,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,mm(Pe(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J0e={kernelName:gp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Zt(Pe(n,"float32")),i=hr(Ke(Tt(1),r));return dn(He(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const exe={kernelName:yp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=hr(Ke(Zt(Pe(n,"float32")),1));return He(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const txe={kernelName:bf,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=et(n.shape,r.shape);return{a:()=>{let s=t;const l=_n(n.shape,i);return l.length>0&&(s=qe(s,l)),re(s,n.shape)},b:()=>{let s=t;const l=_n(r.shape,i);return l.length>0&&(s=qe(s,l)),re(s,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nxe={kernelName:bE,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rxe={kernelName:Mb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ixe={kernelName:Pb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const axe={kernelName:vp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>He(t,hr(Ke(Tt(1),Zt(Pe(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oxe={kernelName:bp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=hr(Ae(Tt(1),Zt(Pe(n,"float32"))));return He(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sxe={kernelName:Sp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=et(n.shape,r.shape);return{a:()=>{const s=Ae(Zt(n),Zt(r));let l=te(t,He(r,s));const c=_n(n.shape,i);return c.length>0&&(l=qe(l,c)),re(l,n.shape)},b:()=>{const s=Ae(Zt(n),Zt(r));let l=dn(te(t,He(n,s)));const c=_n(r.shape,i);return c.length>0&&(l=qe(l,c)),re(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lxe={kernelName:xp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>He(t,Ae(Zt(Pe(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uxe={kernelName:wp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>He(t,Ke(Tt(1),Zt(Pe(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(t,e,n,r,i,a){const o=X(t,"dy","avgPool3dGrad"),s=X(e,"input","avgPool3dGrad");let l=o,c=s,h=!1;s.rank===4&&(h=!0,l=re(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=re(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),j(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),j(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Br("avgPool3dGrad",i,a);const d={dy:l,input:c},p={filterSize:n,strides:r,pad:i,dimRoundingMode:a},g=ne.runKernel(CE,d,p);return h?re(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const fxe=ie({avgPool3dGrad_:cxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hxe={kernelName:Fb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:s}=n;return{x:()=>fxe(t,r,i,a,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(t,e,n,r,i){const a=X(t,"dy","avgPoolGrad"),o=X(e,"input","avgPoolGrad");j(o.rank===a.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${a.rank})`);let s=o,l=a,c=!1;o.rank===3&&(c=!0,s=re(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=re(a,[1,a.shape[0],a.shape[1],a.shape[2]])),j(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),j(s.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`);const h={dy:l,input:s},d={filterSize:n,strides:r,pad:i},p=ne.runKernel(SE,h,d);return c?re(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const pxe=ie({avgPoolGrad_:dxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mxe={kernelName:Lb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:o}=n;return{x:()=>pxe(t,r,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gxe={kernelName:Bb,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:a,transposeB:o}=n;return!a&&!o?{a:()=>$t(t,i,!1,!0),b:()=>$t(r,t,!0,!1)}:!a&&o?{a:()=>$t(t,i,!1,!1),b:()=>$t(t,r,!0,!1)}:a&&!o?{a:()=>$t(i,t,!1,!0),b:()=>$t(r,t,!1,!1)}:{a:()=>$t(i,t,!0,!0),b:()=>$t(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yxe={kernelName:zb,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>SI(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vxe={kernelName:Ape,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,a=r.shape,o=Array.from(a);for(let l=i.length-1;l>=0;l--)if(i[l]===a[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${a}].`);const s=[];for(let l=0;l<o.length;l++)o[l]>1&&s.push(l);return{x:()=>qe(t,s,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bxe={kernelName:Cp,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xxe={kernelName:$p,gradFunc:t=>({x:()=>vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wxe={kernelName:Tp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:a}=n;return{x:()=>kr(Eo(eu(r,i),Sf(r,a)),t,vt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sxe={kernelName:jb,inputsToSave:["x"],gradFunc:AH.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cxe={kernelName:Ub,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,a=ut(i,e[0].shape)[0],o=r.map(l=>l[a]);return pi(t,o,a).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $xe={kernelName:Vb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:a,strides:o,pad:s,dataFormat:l}=n;return j(Fl(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>fI(r.shape,t,i,o,s,l),filter:()=>EI(r,t,i.shape,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Txe={kernelName:Wb,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:a,pad:o,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>zl(t,i,a,o,s,1,l),filter:()=>EI(t,r,i.shape,a,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxe(t,e,n,r,i){let a=t;t.rank===4&&(a=re(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=re(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),j(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),j(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),j(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),j(a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),j(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const s={x:a,dy:o},l={strides:r,pad:i,filterShape:n};return ne.runKernel(EE,s,l)}const Axe=ie({conv3DBackpropFilter_:kxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Exe={kernelName:Gb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a}=n;j(Fl(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,s]=e;return{x:()=>pq(o.shape,t,s,i,a),filter:()=>Axe(o,t,s.shape,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ixe={kernelName:kp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(dn(_q(Pe(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oxe={kernelName:Ap,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(Rq(Pe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nxe={kernelName:qb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:a,reverse:o}=n;return{x:()=>{const s=on([i],r.rank);let l=gq(t,i,a,!o);return s!=null&&(l=yt(l,s)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _xe={kernelName:Hb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a,dimRoundingMode:o}=n,s=r??[1,1];j(Fl(s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[l,c]=e;return j(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),j(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),j(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),j(dr(i,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`),Br("depthwiseConv2d",a,o),{x:()=>Xbe(l.shape,t,c,i,a,s,o),filter:()=>qbe(l,t,c.shape,i,a,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rxe={kernelName:Xb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,a={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>ne.runKernel(Sk,a,n),filter:()=>ne.runKernel(Ck,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dxe={kernelName:Ip,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ne.runKernel(LE,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mxe={kernelName:Op,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=te(za(dn(Zt(n))),2/Math.sqrt(Math.PI));return{x:()=>te(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pxe={kernelName:Np,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lxe={kernelName:Yb,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>re(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fxe={kernelName:_p,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,za(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bxe={kernelName:Rp,gradFunc:t=>({x:()=>vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zxe={kernelName:Dp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=et(n.shape,r.shape);return{a:()=>{const s=He(t,Pe(r,"float32")),l=_n(n.shape,i);return l.length>0?re(qe(s,l),n.shape):s},b:()=>{let s=te(t,Pe(n,"float32"));const l=_n(r.shape,i);l.length>0&&(s=re(qe(s,l),r.shape));const c=Zt(r);return dn(He(s,Pe(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jxe={kernelName:Zb,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,a,o,s]=e,l=s??Tt(1),c=_n(a.shape,i.shape),h=[];if(a.rank===1){for(let T=0;T<i.shape.length-1;++T)h.push(i.shape[T]);h.push(1)}const d=Ke(i,a),p=te(t,l),g=Iq(Ae(o,Tt(r))),y=te(te(te(g,g),g),Tt(-.5));return{x:()=>a.rank===1?re(te(te(t,aa(re(g,[1,1,1,a.shape[0]]),h)),l),i.shape):re(te(te(t,g),l),i.shape),mean:()=>{let T=te(te(g,Tt(-1)),p);return a.rank===1&&(T=qe(T,c)),re(T,a.shape)},variance:()=>{let T=te(te(y,d),p);return a.rank===1&&(T=qe(T,c)),re(T,a.shape)},scale:()=>{const T=te(d,g);let k=te(t,T);return a.rank===1&&(k=qe(k,c)),re(k,a.shape)},offset:()=>{let T=t;return a.rank===1&&(T=qe(T,c)),re(T,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uxe={kernelName:Qb,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:a,batchDims:o}=n,s=ut(a,r.shape)[0],l=(c,h,d)=>()=>{const p=c.shape,g=h.size,y=p.slice(0,s),x=y.length,b=p.slice(a,p.length).slice(1),w=b.length,S=S4(0,x),$=S4(x+1,x+1+w),T=C4([y,[g],b]),k=re(d,T),E=re(h,[g]),I=C4([[x],S,$]),_=yt(k,I);let N=Fq(_,E,c.shape[s]);const R=Fs(I);return N=yt(N,R),N};if(o===1){const c=r.shape[0],h=r.split(c,0);return{x:()=>Io(h.map((g,y)=>l(g,i.slice(y,1),t.slice(y,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function S4(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function C4(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vxe={kernelName:Mp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>vt(n),b:()=>vt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wxe={kernelName:Pp,gradFunc:t=>({x:()=>Pe(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gxe={kernelName:Lp,gradFunc:t=>({x:()=>vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qxe={kernelName:Fp,gradFunc:t=>({x:()=>vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hxe={kernelName:Bp,gradFunc:t=>({x:()=>vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xxe={kernelName:e0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,a=gi(r,0);return{x:()=>kr(a,t,te(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kxe={kernelName:jp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>He(t,Ae(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yxe={kernelName:zp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>He(t,Pe(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zxe={kernelName:Ipe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const o=za(r);return Ke(t,te(qe(t,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxe(t,e,n,r=5,i=1,a=1,o=.5){const s={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:a,beta:o};return ne.runKernel(VE,s,l)}const Jxe=ie({localResponseNormalizationBackprop_:Qxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e1e={kernelName:o0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:a,bias:o,alpha:s,beta:l}=n;return{x:()=>Jxe(r,i,t,a,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EH(t,e,n,r){return e.rank<n.rank&&(e=re(e,Sn(e.shape,r))),t.rank<n.rank&&(t=re(t,Sn(t.shape,r))),{x:()=>te(t,Pe(Ba(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4={kernelName:s0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,a=e[0],o=e[1],s=ut(i,a.shape),l=EH(t,o,a,s);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t1e={kernelName:Up,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>te(t,Pe(eu(n,r),"float32")),b:()=>te(t,Pe(Dv(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1e(t,e,n,r,i,a,o){const s=X(t,"dy","maxPool3dGrad"),l=X(e,"input","maxPool3dGrad"),c=X(n,"output","maxPool3dGrad");let h=s,d=l,p=c,g=!1;l.rank===4&&(g=!0,h=re(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=re(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=re(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),j(h.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${h.rank}.`),j(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),j(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),Br("maxPool3dGrad",a,o);const y={dy:h,input:d,output:p},x={filterSize:r,strides:i,pad:a,dimRoundingMode:o},b=ne.runKernel(GE,y,x);return g?re(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const r1e=ie({maxPool3dGrad_:n1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i1e={kernelName:u0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=n;return{x:()=>r1e(t,r,i,a,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1e(t,e,n,r,i,a,o){const s=X(t,"dy","maxPoolGrad"),l=X(e,"input","maxPoolGrad"),c=X(n,"output","maxPoolGrad");j(l.rank===s.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${s.rank})`),j(s.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`),j(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Br("maxPoolGrad",a,o);const h={dy:s,input:l,output:c},d={filterSize:r,strides:i,pad:a,dimRoundingMode:o};return ne.runKernel(WE,h,d)}const o1e=ie({maxPoolGrad_:a1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s1e={kernelName:l0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:o,pad:s}=n;return{x:()=>o1e(t,r,i,a,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l1e={kernelName:c0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,a=ut(i,r.shape),s=Wn(r.shape,a)[1],l=ve(s);return{x:()=>{const h=r.shape.slice();a.forEach(g=>{h[g]=1});const d=re(t,h);return He(te(d,zs(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u1e={kernelName:f0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[a,o]=e,s=ut(i,a.shape),l=EH(t,o,a,s);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c1e={kernelName:Vp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>te(t,Pe(Sf(n,r),"float32")),b:()=>te(t,Pe(gi(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f1e={kernelName:h0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(o=>o[0]);return{x:()=>Gt(t,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h1e={kernelName:Wp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=et(n.shape,r.shape);return{a:()=>{const s=_n(n.shape,i);return s.length>0?re(qe(t,s),n.shape):t},b:()=>{const s=te(t,dn(U0(He(n,r)))),l=_n(r.shape,i);return l.length>0?re(qe(s,l),r.shape):s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d1e={kernelName:Gp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=et(n.shape,r.shape);return{a:()=>{const s=te(t,Pe(r,"float32")),l=_n(n.shape,i);return l.length>0?re(qe(s,l),n.shape):s},b:()=>{const s=te(t,Pe(n,"float32")),l=_n(r.shape,i);return l.length>0?re(qe(s,l),r.shape):s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p1e={kernelName:d0,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m1e={kernelName:g0,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>zn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g1e={kernelName:m0,gradFunc:t=>({x:()=>vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y1e={kernelName:y0,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Vl(t,r).map(a=>()=>a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4={kernelName:v0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(o=>o[0]);return{x:()=>Gt(t,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v1e={kernelName:qp,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,a=n,o=r,s=et(a.shape,o.shape);return{a:()=>{const h=Pe(o,"float32");let d=te(t,te(h,jl(a,Ke(h,Tt(1)))));const p=_n(a.shape,s);return p.length>0&&(d=qe(d,p)),re(d,a.shape)},b:()=>{const h=gi(a,0),d=kr(h,ja(a),vt(a));let p=te(t,te(i,d));const g=_n(o.shape,s);return g.length>0&&(p=qe(p,g)),re(p,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b1e={kernelName:b0,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=gi(n,0);return{x:()=>kr(i,t,te(t,r)),alpha:()=>{let a=kr(i,vt(t),te(t,n));const o=_n(r.shape,t.shape);return o.length>0&&(a=qe(a,o)),re(a,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x1e(t,e,n){const r=t.shape.slice();r[n]=1;const i=re(e,r),a=Mk(t,n,!0,!1),o=Mk(t,n,!0,!0),s=te(a,o);return te(i,s)}function w1e(t,e,n){const r=t.shape.length,i=r-n.length,a=on(n,r);let o=t;a!=null&&(o=yt(t,a));const s=o.shape.slice(),c=s.splice(r-n.length,n.length).reduce((p,g)=>p*g,1);s.push(c);const h=o.reshape(s);let d=x1e(h,e,i);if(d=d.reshape(o.shape),a!=null){const p=Fs(a);d=yt(d,p)}return d}const S1e={kernelName:x0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let a=[];return i==null?a=r.shape.map((o,s)=>s):typeof i=="number"?a=[i]:a=i,{x:()=>w1e(r,t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C1e={kernelName:Ep,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=et(n.shape,r.shape);return{a:()=>{const s=He(t,Pe(r,"float32")),l=_n(n.shape,i);return l.length>0?re(qe(s,l),n.shape):s},b:()=>{let s=te(t,Pe(n,"float32"));const l=_n(r.shape,i);l.length>0&&(s=re(qe(s,l),r.shape));const c=Zt(r);return dn(He(s,Pe(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $1e={kernelName:Hp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>He(t,dn(Zt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T1e={kernelName:Kp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=te(Sf(n,6),mm(n));return{x:()=>te(t,Pe(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k1e={kernelName:Xp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,Pe(mm(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A1e={kernelName:w0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E1e={kernelName:C0,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>ne.runKernel(QE,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I1e={kernelName:S0,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>ne.runKernel(ZE,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O1e={kernelName:$0,gradFunc:(t,e,n)=>{const{dims:r}=n,i=ut(r,t.shape);return{x:()=>Ul(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N1e={kernelName:Yp,gradFunc:t=>({x:()=>vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _1e={kernelName:Zp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dn(He(t,te(jl(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R1e={kernelName:T0,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Pe(vt(n),"float32"),t:()=>te(t,Pe(n,t.dtype)),e:()=>te(t,Pe(vI(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D1e={kernelName:Qp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=gi(n,Tt(0)),i=Tt(G0),a=Tt(q0),o=te(t,a),s=te(te(t,i),za(Pe(n,"float32")));return kr(r,o,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M1e={kernelName:nm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,te(n,Ke(Tt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P1e={kernelName:tm,gradFunc:t=>({x:()=>vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L1e={kernelName:Jp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(hI(Pe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F1e={kernelName:em,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(mq(Pe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B1e={kernelName:k0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:a}=n,o=r.shape,[s,l]=V0(r,i,a),c=[];for(let h=0;h<t.rank;h++)c.push([s[h],o[h]-s[h]-l[h]]);return{x:()=>wI(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z1e={kernelName:O0,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,a=!0,o=te(t,r);return{logits:()=>Ke(o,te(qe(o,[i],a),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j1e={kernelName:rm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,wf(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k4={kernelName:E0,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>cI(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4={kernelName:I0,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Mr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U1e={kernelName:im,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>He(t,te(hr(Pe(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V1e={kernelName:JE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,te(Pe(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W1e={kernelName:am,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Tt(2);return{a:()=>te(t,te(i,Ke(n,r))),b:()=>te(t,te(i,Ke(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G1e={kernelName:cm,gradFunc:t=>({x:()=>vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q1e={kernelName:om,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=et(n.shape,r.shape);return{a:()=>{let s=t;const l=_n(n.shape,i);return l.length>0&&(s=qe(s,l)),re(s,n.shape)},b:()=>{let s=t;const l=_n(r.shape,i);return l.length>0&&(s=qe(s,l)),re(dn(s),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H1e={kernelName:A0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:a}=n;ut(a,r.shape).forEach(c=>{i[c]=1});const s=re(t,i),l=te(s,zs(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X1e={kernelName:sm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>He(t,Zt(hI(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K1e={kernelName:lm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(Ke(Tt(1),Zt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y1e={kernelName:um,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let o=vt(r);if(r.rank===1)for(let s=0;s<i[0];++s)o=Ae(o,Gt(t,[s*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let s=0;s<i[0];++s)for(let l=0;l<i[1];++l)o=Ae(o,Gt(t,[s*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let s=0;s<i[0];++s)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)o=Ae(o,Gt(t,[s*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let s=0;s<i[0];++s)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let h=0;h<i[3];++h)o=Ae(o,Gt(t,[s*r.shape[0],l*r.shape[1],c*r.shape[2],h*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z1e={kernelName:pc,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,a=Fs(i);return{x:()=>yt(t,a)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q1e={kernelName:N0,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>Io(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J1e={kernelName:_0,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ewe(t,n)}}};function ewe(t,e){const n=Bs(e,vt(e)),r=mI(t,n);let i=eu(e,Tt(0,"int32"));const a=r.rank-i.rank;for(let s=0;s<a;++s)i=_r(i,s+1);i=Eo(i,zs(r.shape,"bool"));const o=vt(r);return kr(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const twe={kernelName:R0,gradFunc:t=>({x:()=>vt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nwe=[AH,J0e,exe,txe,nxe,rxe,ixe,axe,oxe,sxe,lxe,uxe,hxe,mxe,gxe,yxe,vxe,bxe,xxe,wxe,Sxe,Cxe,Txe,$xe,Exe,Ixe,Oxe,Nxe,_xe,Rxe,C1e,Dxe,Mxe,Pxe,Lxe,Fxe,zxe,Bxe,jxe,Uxe,Vxe,Wxe,Gxe,qxe,Hxe,Xxe,Kxe,Yxe,Zxe,e1e,$4,$4,t1e,i1e,s1e,l1e,u1e,c1e,f1e,h1e,d1e,p1e,m1e,g1e,y1e,T4,T4,v1e,b1e,S1e,$1e,T1e,k1e,A1e,E1e,I1e,O1e,N1e,_1e,R1e,D1e,M1e,P1e,L1e,F1e,B1e,z1e,j1e,k4,k4,A4,A4,U1e,W1e,V1e,G1e,q1e,H1e,X1e,K1e,Y1e,Z1e,Q1e,J1e,twe];for(const t of nwe)_pe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.abs=function(){return this.throwIfDisposed(),wr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.acos=function(){return this.throwIfDisposed(),Pme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.acosh=function(){return this.throwIfDisposed(),Fme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.add=function(t){return this.throwIfDisposed(),Ae(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.all=function(t,e){return this.throwIfDisposed(),fq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.any=function(t,e){return this.throwIfDisposed(),Rk(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.argMax=function(t){return this.throwIfDisposed(),Hd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.argMin=function(t){return this.throwIfDisposed(),Vme(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.asScalar=function(){return this.throwIfDisposed(),j(this.size===1,()=>"The array must have only 1 element."),re(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.asType=function(t){return this.throwIfDisposed(),Pe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.as1D=function(){return this.throwIfDisposed(),re(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.as2D=function(t,e){return this.throwIfDisposed(),re(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),re(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),re(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),re(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.asin=function(){return this.throwIfDisposed(),Gme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.asinh=function(){return this.throwIfDisposed(),Hme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.atan=function(){return this.throwIfDisposed(),Kme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.atan2=function(t){return this.throwIfDisposed(),Zme(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.atanh=function(){return this.throwIfDisposed(),Jme(this)};me().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),uI(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),cI(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),F0(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.broadcastTo=function(t){return this.throwIfDisposed(),ud(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.cast=function(t){return this.throwIfDisposed(),Pe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.ceil=function(){return this.throwIfDisposed(),kge(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),mi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof kn&&(t=[t]),Mr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.conv1d=function(t,e,n,r,i,a){return this.throwIfDisposed(),hq(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),dq(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.conv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),zl(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.cos=function(){return this.throwIfDisposed(),hI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.cosh=function(){return this.throwIfDisposed(),mq(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Mk(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),gq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Zge(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.depthwiseConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),dI(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),eye(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.divNoNan=function(t){return this.throwIfDisposed(),aye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.div=function(t){return this.throwIfDisposed(),He(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.dot=function(t){return this.throwIfDisposed(),sye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.elu=function(){return this.throwIfDisposed(),z0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.equal=function(t){return this.throwIfDisposed(),Ba(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.erf=function(){return this.throwIfDisposed(),yq(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),bye(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.exp=function(){return this.throwIfDisposed(),za(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.expandDims=function(t){return this.throwIfDisposed(),_r(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.expm1=function(){return this.throwIfDisposed(),Cye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.fft=function(){return this.throwIfDisposed(),Mq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.flatten=function(){return this.throwIfDisposed(),re(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.floor=function(){return this.throwIfDisposed(),U0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.floorDiv=function(t){return this.throwIfDisposed(),cq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.gather=function(t,e,n){return this.throwIfDisposed(),mI(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.greaterEqual=function(t){return this.throwIfDisposed(),eu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.greater=function(t){return this.throwIfDisposed(),gi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.ifft=function(){return this.throwIfDisposed(),Pk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.irfft=function(){return this.throwIfDisposed(),gbe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.isFinite=function(){return this.throwIfDisposed(),_ye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.isInf=function(){return this.throwIfDisposed(),Dye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.isNaN=function(){return this.throwIfDisposed(),Pye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.leakyRelu=function(t){return this.throwIfDisposed(),yI(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.lessEqual=function(t){return this.throwIfDisposed(),Sf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.less=function(t){return this.throwIfDisposed(),Dv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),jye(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logSigmoid=function(){return this.throwIfDisposed(),Xye(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logSoftmax=function(t){return this.throwIfDisposed(),Sq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Cq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.log=function(){return this.throwIfDisposed(),ja(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.log1p=function(){return this.throwIfDisposed(),wq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Eo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logicalNot=function(){return this.throwIfDisposed(),vI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logicalOr=function(t){return this.throwIfDisposed(),$q(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.logicalXor=function(t){return this.throwIfDisposed(),nve(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),$t(this,t,e,n)};me().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),bI(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.max=function(t,e){return this.throwIfDisposed(),sa(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.maximum=function(t){return this.throwIfDisposed(),Bs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.mean=function(t,e){return this.throwIfDisposed(),wn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.min=function(t,e){return this.throwIfDisposed(),Rv(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.minimum=function(t){return this.throwIfDisposed(),Yd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),cve(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.mod=function(t){return this.throwIfDisposed(),hve(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.mul=function(t){return this.throwIfDisposed(),te(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.neg=function(){return this.throwIfDisposed(),dn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.norm=function(t,e,n){return this.throwIfDisposed(),j0(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.notEqual=function(t){return this.throwIfDisposed(),Mv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),Tq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.onesLike=function(){return this.throwIfDisposed(),zi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.pad=function(t,e){return this.throwIfDisposed(),wI(this,t,e)};me().prototype.pool=function(t,e,n,r,i,a){return this.throwIfDisposed(),Sve(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.pow=function(t){return this.throwIfDisposed(),jl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.prelu=function(t){return this.throwIfDisposed(),CI(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.prod=function(t,e){return this.throwIfDisposed(),Tve(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.reciprocal=function(){return this.throwIfDisposed(),Yve(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.relu=function(){return this.throwIfDisposed(),tu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.relu6=function(){return this.throwIfDisposed(),Aq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.reshapeAs=function(t){return this.throwIfDisposed(),re(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.reshape=function(t){return this.throwIfDisposed(),re(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),zq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),jq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.reverse=function(t){return this.throwIfDisposed(),Ul(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.rfft=function(){return this.throwIfDisposed(),bbe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.round=function(){return this.throwIfDisposed(),Eq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.rsqrt=function(){return this.throwIfDisposed(),Iq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.selu=function(){return this.throwIfDisposed(),Oq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.separableConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Nq(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sigmoid=function(){return this.throwIfDisposed(),wf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sign=function(){return this.throwIfDisposed(),abe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sin=function(){return this.throwIfDisposed(),_q(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sinh=function(){return this.throwIfDisposed(),Rq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.slice=function(t,e){return this.throwIfDisposed(),Gt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.softmax=function(t){return this.throwIfDisposed(),AI(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.softplus=function(){return this.throwIfDisposed(),hm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),SI(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.split=function(t,e){return this.throwIfDisposed(),pi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sqrt=function(){return this.throwIfDisposed(),hr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.square=function(){return this.throwIfDisposed(),Zt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.squaredDifference=function(t){return this.throwIfDisposed(),wbe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.squeeze=function(t){return this.throwIfDisposed(),pm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof kn?[this,t]:[this,...t];return Io(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.step=function(t){return this.throwIfDisposed(),mm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.stridedSlice=function(t,e,n,r,i,a,o,s){return this.throwIfDisposed(),kbe(this,t,e,n,r,i,a,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sub=function(t){return this.throwIfDisposed(),Ke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.sum=function(t,e){return this.throwIfDisposed(),qe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.tan=function(){return this.throwIfDisposed(),Ebe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.tanh=function(){return this.throwIfDisposed(),L0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.tile=function(t){return this.throwIfDisposed(),aa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.toBool=function(){return this.throwIfDisposed(),Pe(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.toFloat=function(){return this.throwIfDisposed(),Pe(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.toInt=function(){return this.throwIfDisposed(),Pe(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.topk=function(t,e){return this.throwIfDisposed(),Nbe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.transpose=function(t){return this.throwIfDisposed(),yt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.unique=function(t){return this.throwIfDisposed(),Dbe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Fq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.unstack=function(t){return this.throwIfDisposed(),Vl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.where=function(t,e){return this.throwIfDisposed(),kr(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */me().prototype.zerosLike=function(){return this.throwIfDisposed(),vt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $a extends Error{constructor(e){super(e),Object.setPrototypeOf(this,$a.prototype)}}class Di extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Di.prototype)}}class J extends Error{constructor(e){super(e),Object.setPrototypeOf(this,J.prototype)}}class rt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,rt.prototype)}}class uO extends Error{constructor(e){super(e),Object.setPrototypeOf(this,uO.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IH{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Wl(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Ta(t,e){if(!t)throw new uO(e)}function E4(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Rr(t){return t.length===1?t[0]:t}function Nt(t){return Array.isArray(t)?t:[t]}function fo(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function ml(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Ii={};function cO(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function Bk(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>Bk(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:Bk(r))}}}function bm(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const a=t;let o;if(a in n)o=n[a];else if(a in Ii)o=Ii[a];else if(o=e[a],o==null)throw new J(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const a=t;if(a.className==null||a.config==null)throw new J(`${r}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);const o=a.className;let s,l;if(o in n?[s,l]=n[o]:o in Ii?[s,l]=Ii.className:o in e&&([s,l]=e[o]),s==null)throw new J(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const g of Object.keys(Ii))c[g]=Ii[g];for(const g of Object.keys(n))c[g]=n[g];const h=a.config;h.customObjects=c;const d=Object.assign({},Ii);for(const g of Object.keys(n))Ii[g]=n[g];Bk(a.config);const p=l(s,a.config,n,i);return Ii=Object.assign({},d),p}else{const c=Object.assign({},Ii);for(const d of Object.keys(n))Ii[d]=n[d];const h=new s(a.config);return Ii=Object.assign({},c),h}}}function rwe(t,e){return t<e?-1:t>e?1:0}function oy(t,e){return-1*rwe(t,e)}function xs(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function iwe(t){if(t==null)throw new J(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function ru(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new J(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function fO(t,e,n=0,r=1/0){return Ta(n>=0),Ta(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function Un(t,e){Array.isArray(t)?(j(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Un(n,`element ${r+1} of ${e}`))):j(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${OH(t)}.`)}function OH(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>OH(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function awe(t,e,n){let r=n!=null?n():Nr(),i;return(...o)=>{const s=n!=null?n():Nr();return s-r<e||(r=s,i=t(...o)),i}}function NH(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let owe=0;function _H(){return owe++}const sy={};function H0(t=""){return t in sy||(sy[t]=0),sy[t]+=1,t+sy[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const swe=["channelsFirst","channelsLast"],lwe=["nearest","bilinear"],uwe=["valid","same","causal"],cwe=["max","avg"],fwe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ec=new Map;function gn(t){ru(swe,"DataFormat",t)}function hwe(t){ru(lwe,"InterpolationFormat",t)}function yi(t){ru(uwe,"PaddingMode",t)}function RH(t){ru(cwe,"PoolMode",t)}const cd=[],I4="/";function Al(t,e){cd.push(t);try{const n=e();return cd.pop(),n}catch(n){throw cd.pop(),n}}function dwe(){return cd.length===0?"":cd.join(I4)+I4}function DH(t){if(!PH(t))throw new Error("Not a valid tensor name: '"+t+"'");return dwe()+t}function MH(t){if(!PH(t))throw new Error("Not a valid tensor name: '"+t+"'");ec.has(t)||ec.set(t,0);const e=ec.get(t);if(ec.set(t,ec.get(t)+1),e>0){const n=`${t}_${e}`;return ec.set(n,1),n}else return t}const pwe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function PH(t){return!!t.match(pwe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mwe(t){return t===parseInt(t.toString(),10)}function ws(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function Zc(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Cs(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function ca(t,e){if(e<t)throw new J(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let LT;function An(){return LT==null&&(LT=ome().epsilon()),LT}function fa(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ma(t,e){return Pe(t,e)}function xm(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),re(t,n)}function gwe(t,e){return le(()=>{if(t.shape.length!==2)throw new J(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=xm(t,1);return zk(n,[1,e,1])})}function ywe(t){const e=[ws(t.shape)];return re(t,e)}function vwe(t){if(t.rank<=1)throw new J(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],ws(t.shape,1)];return re(t,e)}function El(t,e,n){return le(()=>{switch(t.rank){case 1:return TI(t,e,n);case 2:return Dq(t,[e,0],[n,t.shape[1]]);case 3:return kI(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Lv(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Gt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Gt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new J(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function FT(t,e,n){return le(()=>{switch(t.rank){case 1:return TI(t,e,n);case 2:return Dq(t,[0,e],[t.shape[0],n]);case 3:return kI(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Lv(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new J(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function ly(t,e,n,r){return le(()=>{switch(t.rank){case 1:return TI(t,e,n);case 2:switch(r){case 1:return El(t,e,n);case 2:return FT(t,e,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return El(t,e,n);case 2:return kI(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return FT(t,e,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return El(t,e,n);case 2:return Lv(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Lv(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return FT(t,e,n);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}default:throw new J(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function hO(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Mr(t,e)}function O4(t,e){switch(t.rank){case 1:return Ige([t,e]);case 2:return Nge([t,e],0);case 3:return Rge([t,e],0);case 4:return Mge([t,e],0);default:throw new J(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function zk(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new J(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return aa(t,e)}function X0(t,e=0,n=1,r,i){return qve(t,e,n,r,i)}function Pa(t,e,n,r){if(t.rank<2||e.rank<2)throw new rt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],a=e.shape.slice(-2)[0];if(i!==a)throw new rt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return g4({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?jk(t.rank,r,fa()):null,activation:n});{const i=t.shape.slice(),a=i.pop();t=re(t,[-1,a]);const o=e.shape.slice(),s=o.pop(),l=o.pop(),c=[...o,s],h=Array.from({length:e.rank},(y,x)=>x===0?e.rank-2:x<=e.rank-2?x-1:x);e=re(yt(e,h),[l,-1]);const d=[...i,...c];return re(g4({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?jk(t.rank,r,fa()):null,activation:n}),d)}}function LH(t,e,n){return le(()=>(Array.isArray(e)?e=Yr(e,"int32"):e=Pe(e,"int32"),mI(t,e,n)))}function wm(t){return te(t,t)}function jk(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new J(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?re(e,[1,r[0],1,1,1]):re(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?re(e,[1,1,1,1,r[0]]):re(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?re(e,[1,r[0],1,1]):re(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?re(e,[1,1,1,r[0]]):re(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?re(e,[1,r[0],1]):re(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?re(e,[1,1,r[0]]):re(e,[1].concat(r))}else if(t<3)return e;throw new J(`Unsupported input rank by biasAdd: ${e.rank}`)}function ga(t,e,n){return le(()=>(n==null&&(n=fa()),gn(n),Ae(t,jk(t.rank,e,n))))}function bwe(t,e=1){if(e!==1)throw new rt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return z0(t)}function xwe(t){return le(()=>He(t,Ae(wr(t),1)))}function FH(t,e,n,r){return le(()=>jbe(t,e,n,r))}function wwe(t){return le(()=>{const e=Ae(.5,te(.2,t));return mi(e,0,1)})}function Sm(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Swe=["fanIn","fanOut","fanAvg"],Cwe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $we(t){ru(Swe,"FanMode",t)}function Twe(t){ru(Cwe,"Distribution",t)}class Vi extends $f{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class BH extends Vi{apply(e,n){return zn(e,n)}}BH.className="Zeros";Te(BH);class dO extends Vi{apply(e,n){return zs(e,n)}}dO.className="Ones";Te(dO);class zH extends Vi{constructor(e){if(super(),typeof e!="object")throw new J(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new J(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return le(()=>te(Tt(this.value),zs(e,n)))}getConfig(){return{value:this.value}}}zH.className="Constant";Te(zH);class jH extends Vi{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return dm(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}jH.className="RandomUniform";Te(jH);class UH extends Vi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new rt(`randomNormal does not support dType ${n}.`);return X0(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}UH.className="RandomNormal";Te(UH);class VH extends Vi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new rt(`truncatedNormal does not support dType ${n}.`);return Lq(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}VH.className="TruncatedNormal";Te(VH);class WH extends Vi{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return le(()=>{if(e.length!==2||e[0]!==e[1])throw new J("Identity matrix initializer can only be used for 2D square matrices.");return te(this.gain,xq(e[0]))})}getConfig(){return{gain:this.gain}}}WH.className="Identity";Te(WH);function kwe(t,e="channelsLast"){let n,r;if(gn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=ws(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=ws(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=ws(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class Qr extends Vi{constructor(e){if(super(),e.scale<0)throw new J(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,$we(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Twe(this.distribution),this.seed=e.seed}apply(e,n){const r=kwe(e),i=r[0],a=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,a):o/=Math.max(1,(i+a)/2),this.distribution==="normal"){const s=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new rt(`${this.getClassName()} does not support dType ${n}.`);return Lq(e,0,s,n,this.seed)}else{const s=Math.sqrt(3*o);return dm(e,-s,s,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Qr.className="VarianceScaling";Te(Qr);class pO extends Qr{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}pO.className="GlorotUniform";Te(pO);class mO extends Qr{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}mO.className="GlorotNormal";Te(mO);class gO extends Qr{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}gO.className="HeNormal";Te(gO);class yO extends Qr{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}yO.className="HeUniform";Te(yO);class vO extends Qr{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}vO.className="LeCunNormal";Te(vO);class bO extends Qr{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}bO.className="LeCunUniform";Te(bO);class GH extends Vi{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return le(()=>{if(e.length<2)throw new rt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ve(e.slice(0,-1)),i=e[e.length-1],a=r*i;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],s=X0(o,0,1,n,this.seed),l=L0e.qr(s,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=te(c,d.sign()),r<i&&(c=c.transpose()),te(Tt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}GH.className="Orthogonal";Te(GH);const N4={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function _4(t,e={}){return bm(t,_i.getMap().classNameMap,e,"initializer")}function rn(t){return cO(t)}function Jt(t){if(typeof t=="string"){const e=t in N4?N4[t]:t;if(e==="GlorotNormal")return new mO;if(e==="GlorotUniform")return new pO;if(e==="HeNormal")return new gO;if(e==="HeUniform")return new yO;if(e==="LeCunNormal")return new vO;if(e==="LeCunUniform")return new bO;{const n={};return n.className=e,n.config={},_4(n)}}else return t instanceof Vi?t:_4(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Uk(t){return Array.isArray(t)&&Array.isArray(t[0])}function Fv(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Qe(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new J(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function St(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new J(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bv(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const R4="Variable";class Awe{constructor(e,n="float32",r=R4,i=!0,a=null){this.dtype=n??"float32",this.shape=e.shape,this.id=_H(),r=r??R4,this.originalName=DH(r),this.name=MH(this.originalName),this.trainable_=i,this.constraint=a,this.val=Lbe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Ewe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Ewe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function Vk(t){return t.map(e=>e.read())}function xO(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class En{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Ua{constructor(e,n,r,i,a,o,s){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=a,this.outputTensorIndex=s,this.id=_H(),o!=null&&(this.originalName=DH(o),this.name=MH(this.originalName)),this.rank=n.length}}let Iwe=0;class K0{constructor(e,n){this.callArgs=n,this.id=Iwe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Owe=0;class ct extends $f{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Owe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=fo(r)+"_"+H0(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),r=[a].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Di(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new J(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Rr(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Rr(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new $a(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new $a(`Layer ${this.name} is not connected, no input to return.`);return Rr(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new $a(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new $a(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Rr(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Nt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Nt(this.inputSpec);if(n.length!==r.length)throw new J(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const a=n[i],o=r[i];if(o==null)continue;const s=a.rank;if(o.ndim!=null&&s!==o.ndim)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${s}`);if(o.maxNDim!=null&&s>o.maxNDim)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${s}`);if(o.minNDim!=null&&s<o.minNDim)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${s}.`);if(o.dtype!=null&&a.dtype!==o.dtype)throw new J(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${a.dtype}.`);if(o.axes){const l=a.shape;for(const c in o.axes){const h=Number(c),d=o.axes[c],p=h>=0?l[h]:l[l.length+h];if(d!=null&&[d,null].indexOf(p)===-1)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected axis ${h} of input shape to have value ${d} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],h=a.shape[l];if(c!=null&&h!=null&&c!==h)throw new J(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${a.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Nt(e),i=Rwe(e),a=Dwe(e);if(i===a)throw new J("Arguments to apply() must be all SymbolicTensors or all Tensors");return Al(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const s of Nt(e))o.push(s.shape);this.build(Rr(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const s=Nt(o),l=[];for(let c of s)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=Rr(l),this.activityRegularizer!=null)throw new rt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=Nwe(e),s=this.computeOutputShape(o);let l;const c=_we(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),s!=null&&s.length>0&&Array.isArray(s[0])?l=s.map((h,d)=>new Ua(c,h,this,Nt(e),n,this.name,d)):l=new Ua(c,s,this,Nt(e),n,this.name),this.addInboundNode(e,l,null,null,o,s,n),this._refCount++,this.activityRegularizer!=null)throw new rt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new $a(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new $a(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Di(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Bv(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Vk(e?this.trainableWeights:this.weights)}setWeights(e){le(()=>{const n=this.weights;if(n.length!==e.length)throw new J(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=Vk(n);for(let a=0;a<i.length;++a){const o=i[a],s=n[a],l=e[a];if(!At(o.shape,l.shape))throw new J(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([s,l])}xO(r)})}addWeight(e,n,r,i,a,o,s,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new J(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():Jt("zeros"));const c=i.apply(n,r),h=new Awe(c,r,e,o,s);return c.dispose(),a!=null&&this.addLoss(()=>a.apply(h.read())),o==null&&(o=!0),o?this._trainableWeights.push(h):this._nonTrainableWeights.push(h),h}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Nt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),a=Nt(n),o=Nt(i);if(a.length!==o.length)throw new Error(`${this.name} outputs ${a.length} tensors but ${a.length} masks for those tensors`);for(let s=0;s<a.length;s++)a[s].kerasMask=o[s]}addInboundNode(e,n,r,i,a,o,s=null){const l=Nt(e);n=Nt(n),r=Nt(r),i=Nt(i),a=Fv(a),o=Fv(o);const c=[],h=[],d=[];for(const p of l)c.push(p.sourceLayer),h.push(p.nodeIndex),d.push(p.tensorIndex);new K0({outboundLayer:this,inboundLayers:c,nodeIndices:h,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:a,outputShapes:o},s);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Nwe(t){t=Nt(t);const e=[];for(const n of t)e.push(n.shape);return Rr(e)}function _we(t){return"float32"}function qH(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let a=0;a<r.inboundLayers.length;a++){const o=r.inputTensors[a],s=r.inboundLayers[a],l=r.nodeIndices[a],c=qH(o,s,l);for(const h of c)i.indexOf(h)===-1&&i.push(h)}return i}}}function Rwe(t){let e=!0;for(const n of Nt(t))if(!(n instanceof Ua)){e=!1;break}return e}function Dwe(t){let e=!0;for(const n of Nt(t))if(n instanceof Ua){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Cm extends ct{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:H0("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new J("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new J("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new J("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new Ua(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new K0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new J(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Cm.className="InputLayer";Te(Cm);function Mwe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new J("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Cm({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pwe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Pe(e,t.dtype)}catch{throw new J(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class ms{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof ms)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=Pwe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new J(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Ua){if(this.id2Value[e.id]==null)throw new J(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new J(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Ua){if(this.id2Value[e.id]==null)throw new J(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new J(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&ot(this.id2Mask)}}const zv=new IH,jv=new IH;function Lwe(t){zv!=null&&zv.setMaxEntries(t),jv!=null&&jv.setMaxEntries(t)}function ed(t,e,n,r){const i=n==null?!1:n.training,a=Array.isArray(t),o=a?t:[t],s=o.map(y=>y.name),l=[],c=e.names();for(const y of s)c.indexOf(y)!==-1?l.push(e.getValue(y)):l.push(null);const h=s.join(",")+"|"+e.names().sort().join(",");let d=zv.get(h),p;if(d==null){const y=Fwe(o,e);d=y.sorted,p=y.recipientCounts,zv.put(h,d),jv.put(h,p)}p={},i||Object.assign(p,jv.get(h));const g=new ms(e);for(let y=0;y<d.length;++y){const x=d[y],b=x.sourceLayer;if(b instanceof Cm)continue;const w=[],S=[],$=[];let T=!1;for(const N of x.inputs){const R=g.getValue(N),O=g.getMask(N);w.push(R),S.push(O),O!=null&&(T=!0),i||(p[N.name]--,p[N.name]===0&&!e.hasKey(N)&&s.indexOf(N.name)===-1&&!R.isDisposed&&N.sourceLayer.stateful!==!0&&$.push(R))}T&&(n=n||{},n.mask=S[0]);const k=Nt(b.apply(w,n));let E=null;b.supportsMasking&&(E=b.computeMask(w,S));const I=zwe(x),_=Array.isArray(I)?I:[I];for(let N=0;N<_.length;++N){g.hasKey(_[N])||g.add(_[N],k[N],Array.isArray(E)?E[0]:E);const R=s.indexOf(_[N].name);R!==-1&&(l[R]=k[N])}i||ot($)}return g.disposeMasks(),a?l:l[0]}function Fwe(t,e){j(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=D4(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const a of t){const{sorted:o,recipientMap:s}=D4(a,e);for(const l of o)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in s)r[l]==null&&(r[l]=new Set),s[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:Bwe(r)}}function Bwe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function D4(t,e){const n=new Set,r=[],i={};for(const s of e.names())n.add(s);const a=[],o=[];for(a.push(t);a.length>0;){const s=a[a.length-1];if(n.has(s.name)){a.pop();continue}const l=o[o.length-1]===a.length-1;if(s.inputs.length===0||l)a.pop(),r.push(s),n.add(s.name),l&&o.pop();else{o.push(a.length-1);for(const c of s.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(s.name),!n.has(c.name)&&a.push(c)}}return{sorted:r,recipientMap:i}}function zwe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jwe=he();jwe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Lwe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wO(t,e){return le(()=>hr(qe(te(t,t),e,!0)))}class $m extends $f{getConfig(){return{}}}class HH extends $m{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>{const n=wO(e,this.axis),r=mi(n,0,this.maxValue);return te(e,He(r,Ae(An(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}HH.className="MaxNorm";Te(HH);class XH extends $m{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>He(e,Ae(An(),wO(e,this.axis))))}getConfig(){return{axis:this.axis}}}XH.className="UnitNorm";Te(XH);class KH extends $m{apply(e){return tu(e)}}KH.className="NonNeg";Te(KH);class YH extends $m{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>{const n=wO(e,this.axis),r=Ae(te(this.rate,mi(n,this.minValue,this.maxValue)),te(1-this.rate,n));return te(e,He(r,Ae(An(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}YH.className="MinMaxNorm";Te(YH);const M4={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function On(t){return cO(t)}function P4(t,e={}){return bm(t,_i.getMap().classNameMap,e,"constraint")}function Nn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in M4?M4[t]:t,config:{}};return P4(n)}else return t instanceof $m?t:P4(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ul(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const a=t[i];if(typeof a!="number"){const o=a;e.push(o.data()),n.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let a=0;a<i.length;++a)t[n[a]]=i[a][0];ot(r)}}function ZH(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var L4;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(L4||(L4={}));const Uwe=125;class Qd{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class Vwe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class Wwe extends Qd{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const a=n[i];if(typeof a=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+a*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const s=le(()=>Ae(this.totals[i],te(a,r)));this.totals[i]=s,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:le(()=>{const i=te(He(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Ra(n[r])}))}}class Gwe extends Qd{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const a in this.history){const o=this.history[a];for(let s=0;s<o.length;++s)if(typeof o[s]!="number"){const l=o[s];e.push(l.data()),n.push(a),r.push(s)}}const i=await Promise.all(e);for(let a=0;a<i.length;++a)this.history[n[a]][r[a]].dispose(),this.history[n[a]][r[a]]=i[a][0]}}class qwe extends Qd{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||nH,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Uwe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");bk(this.yieldEvery)&&(this.maybeWait=awe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await ul(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await ul(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await ul(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await ul(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await ul(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):bk(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await ul(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await ul(e),await this.trainEnd(e))}}function QH(t,e){return t==null&&(t={}),t instanceof Qd?[t]:Array.isArray(t)&&t[0]instanceof Qd?t:Nt(t).map(r=>new qwe(r,e))}class Ni{constructor(){}static registerCallbackConstructor(e,n){j(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Ni.checkForDuplicate(n),Ni.constructors[e]==null&&(Ni.constructors[e]=[]),Ni.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Ni.constructors)Ni.constructors[+n].forEach(i=>{if(i===e)throw new J("Duplicate callback constructor.")})}static clear(){Ni.constructors={}}static createCallbacks(e){const n=[];for(const r in Ni.constructors){const i=+r;e>=i&&n.push(...Ni.constructors[i])}return n.map(r=>new r)}}Ni.constructors={};function JH(t,e,n,r,i,a,o,s,l){const c=new Gwe,h=[new Wwe,...Ni.createCallbacks(e)];t!=null&&h.push(...t),h.push(c);const d=new Vwe(h);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:o,verbose:e,doValidation:s,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Co(t,e={},n=!1){return bm(t,_i.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Uv(t,e){return le(()=>{t.dtype!=="float32"&&(t=Pe(t,"float32"));const n=qe(wm(t),e,!0),r=B0(n.shape,An()),i=hr(Bs(n,r));return He(t,i)})}function Y0(t,e){return le(()=>wn(wm(Ke(e,t)),-1))}function SO(t,e){return le(()=>wn(wr(Ke(e,t)),-1))}function CO(t,e){return le(()=>{const n=Ke(t,e),r=mi(wr(t),An(),Number.MAX_VALUE),i=wr(He(n,r));return te(100,wn(i,-1))})}function Hwe(t,e){return le(()=>{const n=mi(e,An(),Number.MAX_VALUE),r=ja(Ae(1,n)),i=mi(t,An(),Number.MAX_VALUE),a=ja(Ae(1,i));return wn(wm(Ke(r,a)),-1)})}function Xwe(t,e){return le(()=>{const n=Bs(0,Ke(1,te(t,e)));return wn(wm(n),-1)})}function Kwe(t,e){return le(()=>{const n=Bs(0,Ke(1,te(t,e)));return wn(n,-1)})}function Ywe(t,e){return le(()=>{const n=qe(te(t,e),-1),r=sa(te(Ke(1,t),e),-1);return Bs(0,Ae(1,Ke(r,n)))})}function Zwe(t,e){return le(()=>{const n=Math.log(2),r=Ke(e,t),i=Ke(Ae(r,hm(te(-2,r))),n);return wn(i,-1)})}function Jd(t,e,n=!1){return le(()=>{if(n)e=AI(e);else{const r=qe(e,e.shape.length-1,!0);e=He(e,r)}return e=mi(e,An(),1-An()),dn(qe(te(Pe(t,"float32"),ja(e)),e.shape.length-1))})}function Vv(t,e,n=!1){return le(()=>{const r=Pe(U0(ywe(t)),"int32");e=mi(e,An(),1-An());const i=e.shape,a=re(Tq(r,i[i.length-1]),i);return Jd(a,e,n)})}function Qwe(t,e){if(!At(t.shape,e.shape))throw new J(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return le(()=>{const n=tu(e),r=dn(wr(e));return Ae(Ke(n,te(e,t)),wq(za(r)))})}function Z0(t,e){return le(()=>{let n;return n=mi(e,An(),1-An()),n=ja(He(n,Ke(1,n))),wn(Qwe(t,n),-1)})}function Jwe(t,e){return le(()=>{const n=mi(t,An(),1),r=mi(e,An(),1);return qe(te(t,ja(He(n,r))),-1)})}function eSe(t,e){return le(()=>{const n=ja(Ae(An(),e));return wn(Ke(e,te(t,n)),-1)})}function e6(t,e){return le(()=>{const n=Uv(t,-1),r=Uv(e,-1),i=te(n,r);return dn(qe(i,-1))})}const Wv={meanSquaredError:Y0,meanAbsoluteError:SO,meanAbsolutePercentageError:CO,meanSquaredLogarithmicError:Hwe,squaredHinge:Xwe,hinge:Kwe,categoricalHinge:Ywe,logcosh:Zwe,categoricalCrossentropy:Jd,sparseCategoricalCrossentropy:Vv,binaryCrossentropy:Z0,kullbackLeiblerDivergence:Jwe,poisson:eSe,cosineProximity:e6};function BT(t){if(typeof t=="string"){if(t in Wv)return Wv[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new J(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t6(t,e){return le(()=>{const n=te(.5,zi(e)),r=Ma(gi(e,n),t.dtype);return wn(Ba(t,r),-1)})}function n6(t,e){return le(()=>Ma(Ba(Hd(t,-1),Hd(e,-1)),"float32"))}function tSe(t,e){return le(()=>Pe(qe(Eo(Ba(t,1),Ba(e,1))),"float32"))}function nSe(t,e){return le(()=>Pe(qe(Eo(Ba(t,0),Ba(e,1))),"float32"))}function rSe(t,e){return le(()=>{const n=tSe(t,e),r=nSe(t,e),i=Ae(n,r);return Pe(kr(gi(i,0),He(n,i),0),"float32")})}function iSe(t,e){return Z0(t,e)}function aSe(t,e){return t.rank===e.rank&&(t=pm(t,[t.rank-1])),e=Hd(e,-1),e.dtype!==t.dtype&&(e=Pe(e,t.dtype)),Pe(Ba(t,e),"float32")}const oSe=Y0,sSe=Y0,lSe=SO,uSe=SO,cSe=CO,fSe=CO,r6=Jd,hSe=e6,i6=Vv,Gv={binaryAccuracy:t6,categoricalAccuracy:n6,precision:rSe,categoricalCrossentropy:r6,sparseCategoricalCrossentropy:i6,mse:oSe,MSE:sSe,mae:lSe,MAE:uSe,mape:cSe,MAPE:fSe,cosine:hSe};function dSe(t){if(typeof t=="string"&&t in Gv)return Gv[t];if(typeof t!="string"&&t!=null)return t;throw new J(`Unknown metric ${t}`)}function uy(t){if(Ta(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Wv))if(Wv[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Gv))if(Gv[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pSe(t){const e={Adagrad:()=>Ju.adagrad(.01),Adadelta:()=>Ju.adadelta(1,.95,An()),Adam:()=>Ju.adam(.001,.9,.999,An()),Adamax:()=>Ju.adamax(.002,.9,.999,An(),0),RMSProp:()=>Ju.rmsprop(.001,.9,0,An()),SGD:()=>Ju.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new J(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const F4=1*1024*1024;function B4(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!Wk(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>F4&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${F4}.`)}}function Wk(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!Wk(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!Wk(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mSe(t,e,n,r=console.log){const i=ySe(t),a=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(h=>Math.floor(e*h)));let o;if(!i){a.push("Receives inputs"),o=[];for(const h in t.nodesByDepth)o.push(...t.nodesByDepth[h])}r("_".repeat(e)),qv(a,n,r),r("=".repeat(e));const s=t.layers;for(let h=0;h<s.length;++h)i?vSe(s[h],n,r):bSe(s[h],n,o,r),r((h===s.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=gSe(t),c=Bv(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function gSe(t){let e;return t.collectedTrainableWeights!=null?e=Bv(t.collectedTrainableWeights):e=Bv(t.trainableWeights),e}function ySe(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let a=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(a){e=!1;break}else a=!0;if(!e)break}return e}function qv(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function vSe(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const a=t.name,o=t.getClassName(),s=[`${a} (${o})`,i,r,t.countParams().toString()];qv(s,e,n)}function bSe(t,e,n,r){let i,a;try{a=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{a="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const o=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){const g=d.inboundLayers[p].name,y=d.nodeIndices[p],x=d.tensorIndices[p];o.push(`${g}[${y}][${x}]`)}const s=t.name,l=t.getClassName(),c=o.length===0?"":o[0],h=[`${s} (${l})`,a,i,t.countParams().toString(),c];qv(h,e,r);for(let d=1;d<o.length;++d)qv(["","","","",o[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a6(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function Gk(t,e){if(t===null)return null;if(typeof t=="string")return ml(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const a=t[i];a6(e,i,a)?n.push(a):n.push(Gk(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const a=ml(r);n[a]=Gk(i,a)}}return n}}function qk(t,e){if(t==null)return null;if(typeof t=="string")return fo(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const a=t[i];a6(e,i,a)?n.push(a):n.push(qk(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],a=fo(r);(r==="name"||r==="className")&&typeof i=="string"?n[a]=i:n[a]=qk(i,r)}return n}}/** @license See the LICENSE file. */const o6="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const xSe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Zi extends ct{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const S=this.getClassName().toLowerCase();this.name=H0(S)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],xs(this.inputs).length!==this.inputs.length)throw new J(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(S=>S.name)}`);xs(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(S=>S.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const S of this.outputs){const $=S.sourceLayer,T=S.nodeIndex,k=S.tensorIndex;this.outputLayers.push($),this.outputLayersNodeIndices.push(T),this.outputLayersTensorIndices.push(k)}for(const S of this.inputs){const $=S.sourceLayer,T=S.nodeIndex,k=S.tensorIndex;Ta(T===0,"input layer has >1 nodes"),Ta(k===0,"input layer has >1 tensors"),this.inputLayers.push($),this.inputLayersNodeIndices.push(T),this.inputLayersTensorIndices.push(k)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let S=0;S<this.inputLayers.length;S++){const $=this.inputLayers[S];if(!($ instanceof Cm))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${S} (0-based) originates from layer type ${$.getClassName()}.`);this.inputNames.push($.name),this.feedInputShapes.push($.batchInputShape),this.feedInputNames.push($.name)}for(const S of this.outputLayers)this.outputNames.push(S.name);this.internalInputShapes=this.inputs.map(S=>S.shape),this.internalOutputShapes=this.outputs.map(S=>S.shape);const n={},r={},i={},a={},o={},s=[],l=(S,$,T,k,E,I)=>{(k==null||E==null||I==null)&&(k=S.sourceLayer,E=S.nodeIndex,I=S.tensorIndex);const _=k.inboundNodes[E];if(T.indexOf(_)!==-1)throw new Di(`The tensor ${S.name} at layer "${k.name}" is part of a cycle.`);if($.indexOf(_)!==-1)return;this.containerNodes.add(Zi.nodeKey(k,E)),k.id in o||(o[k.id]=Object.keys(o).length),T.indexOf(_)===-1&&T.push(_);const N=_.inboundLayers.length;for(let R=0;R<N;R++){const O=_.inputTensors[R],P=_.inboundLayers[R],B=_.nodeIndices[R],U=_.tensorIndices[R];l(O,$,T,P,B,U)}for($.push(_);T.indexOf(_)>=0;)T.splice(T.indexOf(_),1);s.push(_)},c=[],h=[];for(const S of this.outputs)l(S,c,h);const d=s.slice().reverse();for(const S of d){r[S.id]=S,S.id in n||(n[S.id]=0);let $=n[S.id];const T=i[S.outboundLayer.id]==null?0:i[S.outboundLayer.id];$=Math.max($,T),i[S.outboundLayer.id]=$,a[S.outboundLayer.id]=S.outboundLayer,n[S.id]=$;for(let k=0;k<S.inboundLayers.length;k++){const E=S.inboundLayers[k],I=S.nodeIndices[k],_=E.inboundNodes[I],N=n[_.id]==null?0:n[_.id];n[_.id]=Math.max($+1,N),r[_.id]=_}}const p={};for(const S in n){const $=n[S];$ in p||(p[$]=[]),p[$].push(r[S])}const g={};for(const S in i){const $=i[S];$ in g||(g[$]=[]),g[$].push(a[S])}let y=Object.keys(g).map(S=>parseInt(S,10)).sort(oy);this.layers=[];for(const S of y){const $=g[S];$.sort((T,k)=>{const E=o[T.id],I=o[k.id];return E<I?-1:E>I?1:0});for(const T of $)T instanceof Zi&&this.internalContainerRefs.push(T),this.layers.push(T)}this.layersByDepth=g,y=Object.keys(p).map(S=>parseInt(S,10)).sort(oy);const x=this.inputs.slice(),b=[];for(const S of y)for(const $ of p[S]){const T=$.outboundLayer;if(T!=null){for(const k of $.inputTensors)if(x.indexOf(k)===-1)throw new Di(`Graph disconnected: cannot obtain value for tensor ${k} at layer "${T.name}". The following previous layers were accessed without issue: ${b}`);for(const k of $.outputTensors)x.push(k);b.push(T.name)}}this.nodesByDepth=p;const w=this.layers.map(S=>S.name);for(const S of w){const $=w.filter(T=>T===S).length;if($!==1)throw new Di(`The name "${S}" is used ${$} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(w))}this.outboundNodes=[],this.inboundNodes=[],new K0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(S=>null),outputMasks:this.outputs.map(S=>null),inputShapes:this.inputs.map(S=>S.shape),outputShapes:this.outputs.map(S=>S.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new J("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const a=xSe(e);a&&this.parseWeights(e);for(const s of this.layers)for(const[l,c]of s.weights.entries()){const h=a?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[h]!=null)throw new J(`Duplicate weight name: ${h}`);r[h]=c,i++}const o=[];for(const s in e){let l=s;if(r[s]==null){const c=s.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[s]]);else if(n)throw new J(`Provided weight data has no target variable: ${s}`);delete r[l]}if(n){const s=[];for(const l in r)s.push(l);if(s.length>0)throw new J(`${s.length} of ${i} weights are not set: ${s}`)}xO(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],a=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");a!==n&&(e[a]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${o6}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=qk(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return le(()=>{e=Nt(e);const r=new ms;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return ed(this.outputs,r,n)})}computeMask(e,n){return le(()=>{e=Nt(e);let r;return n==null?r=Wl(null,e.length):r=Nt(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Fv(e);if(n.length!==this.inputLayers.length)throw new J(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let s=0;s<n.length;s++){const l=this.inputLayers[s],c=n[s],h=l.name+"_0_0";r[h]=c}const i=Object.keys(this.nodesByDepth).map(s=>parseInt(s,10)).sort(oy);if(i.length>1)for(const s of i){const l=this.nodesByDepth[s];for(const c of l){const h=c.outboundLayer;if(this.inputLayers.map(x=>x.id).indexOf(h.id)!==-1)continue;const d=[];for(let x=0;x<c.inboundLayers.length;x++){const b=c.inboundLayers[x],w=c.nodeIndices[x],S=c.tensorIndices[x],$=`${b.name}_${w}_${S}`,T=r[$];d.push(T)}const p=h.computeOutputShape(Rr(d)),g=Fv(p),y=h.inboundNodes.indexOf(c);for(let x=0;x<g.length;x++){const b=`${h.name}_${y}_${x}`;r[b]=g[x]}}}const a=[],o=[];for(let s=0;s<this.outputLayers.length;s++){const l=this.outputLayers[s],c=this.outputLayersNodeIndices[s],h=this.outputLayersTensorIndices[s],d=`${l.name}_${c}_${h}`;o.push(d)}for(let s=0;s<o.length;s++){const l=o[s];Ta(l in r),a.push(r[l])}return Rr(a)}runInternalGraph(e,n){n==null&&(n=Wl(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],h=e[l],d=n[l];r[c.id]=[h,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(oy);for(const l of i){const c=this.nodesByDepth[l];for(const h of c){const d=h.outboundLayer,p=h.inputTensors,g=h.outputTensors,y=new Array;for(const x of p)x.id in r&&y.push(r[x.id]);if(y.length===p.length){let x={},b,w,S,$;if(h.callArgs!=null&&(x=h.callArgs),y.length===1){const[T,k]=y[0];x.mask==null&&(x.mask=k),S=Nt(d.call(T,x)),$=Nt(d.computeMask(T,k)),b=[T],w=[k]}else b=y.map(T=>T[0]),w=y.map(T=>T[1]),x.mask==null&&(x.mask=w),S=Nt(d.call(b,x)),$=Nt(d.computeMask(b,w));if(d.activityRegularizer)throw new rt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let T=0;T<g.length;++T){const k=g[T],E=S[T],I=$[T];r[k.id]=[E,I]}}}}const a=[],o=[],s=[];for(const l of this.outputs){Ta(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,h]=r[l.id];s.push(c.shape),a.push(c),o.push(h)}return[a,o,s]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof Zi?1:0;for(let a=0;a<i.inboundNodes.length;a++){const o=Zi.nodeKey(i,a);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new J("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new J(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new J(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return le(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=Zi.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const s=o.getClassName(),l=o.getConfig(),c=[];for(let d=0;d<o.inboundNodes.length;d++){const p=o.inboundNodes[d],g=Zi.nodeKey(o,d);let y={};if(this.containerNodes.has(g)){if(p.callArgs)try{JSON.stringify(p.callArgs),y=p.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),y={}}if(p.inboundLayers.length>0){const x=[];for(let b=0;b<p.inboundLayers.length;b++){const w=p.inboundLayers[b],S=p.nodeIndices[b],$=p.tensorIndices[b],T=Zi.nodeKey(w,S);let k=n[T];k==null&&(k=0),x.push([w.name,k,$,y])}c.push(x)}}}const h={};h.name=o.name,h.className=s,h.config=l,h.inboundNodes=c,r.push(h)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const s=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=Zi.nodeKey(s,l);if(!this.containerNodes.has(c))continue;let h=n[c];h==null&&(h=0);const d=this.inputLayersTensorIndices[o];i.push([s.name,h,d])}e.inputLayers=i;const a=[];for(let o=0;o<this.outputLayers.length;o++){const s=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=Zi.nodeKey(s,l);if(!this.containerNodes.has(c))continue;let h=n[c];h==null&&(h=0);const d=this.outputLayersTensorIndices[o];a.push([s.name,h,d])}return e.outputLayers=a,e}static fromConfig(e,n,r={},i=!1){const a={},o={};function s(b,w){b.name in o?o[b.name].push(w):o[b.name]=[w]}function l(b,w){const S=[];let $;for(const T of w){const k=T[0],E=T[1],I=T[2];if($=T[3]==null?{}:T[3],!(k in a)){s(b,w);return}const _=a[k];if(_.inboundNodes.length<=E){s(b,w);return}const N=_.inboundNodes[E];S.push(N.outputTensors[I])}S.length>0&&b.apply(Rr(S),$)}function c(b){const w=b.name,S=Co(b,n.customObjects!=null?n.customObjects:{});S.setFastWeightInitDuringBuild(i),a[w]=S,b.inboundNodes.forEach(T=>{if(!(T instanceof Array))throw new J(`Corrupted configuration, expected array for nodeData: ${T}`);s(S,T)})}const h=n.name,d=n.layers;for(const b of d)c(b);for(;!iwe(o);)for(const b of d){const w=a[b.name];if(w.name in o){const S=o[w.name];delete o[w.name];for(const $ of S)l(w,$)}}const p=[],g=[],y=n.inputLayers;for(const b of y){const w=b[0],S=b[1],$=b[2];Ta(w in a);const k=a[w].inboundNodes[S].outputTensors;p.push(k[$])}const x=n.outputLayers;for(const b of x){const w=b[0],S=b[1],$=b[2];Ta(w in a);const k=a[w].inboundNodes[S].outputTensors;g.push(k[$])}return new e({inputs:p,outputs:g,name:h})}get stateful(){if(this._stateful)throw new J("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){le(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wSe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(a=>{a in t?i.push(t[a]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function s6(t,e){return wSe(t,e,"classWeight")}async function l6(t,e,n,r){if(n!=null){const i=le(()=>{if(t.shape.length===1)return kl(t);if(t.shape.length===2){if(t.shape[1]>1)return Hd(t,1);if(t.shape[1]===1)return re(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await i.data());ot(i);const o=[];return a.forEach(s=>{if(n[s]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${s} exists in the data but not in classWeight`);o.push(n[s])}),Yr(o,"float32")}else return null}function SSe(t,e){return te(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const CSe=32;function u6(t,e){let n,r;const i=e;n=i.xs,r=i.ys,j(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const a=z4("input",t.inputNames,n),o=z4("output",t.outputNames,r),s=a[0].shape[0];j(a.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),j(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<a.length;l++)j(a[l].shape[0]===s,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${a[l].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)j(o[l].shape[0]===s,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);return{xs:a,ys:o}}function z4(t,e,n){if(n instanceof kn)return[n];if(Array.isArray(n))return j(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new J(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function $Se(t){if(t.length===3)throw new rt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function TSe(t,e,n){const r=n.batchesPerEpoch!=null;if(j(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),j(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),j(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),j(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),j(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let a,o;if(i)if(j4(n.validationData))j(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const b=$Se(n.validationData);a=b.xs,o=b.ys}const s=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(b=>"val_"+b)):c=l.slice();const h=QH(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:p,history:g}=JH(h,d,n.epochs,null,null,kSe(e,n),null,i,c);p.setModel(t),t.history=g,await p.onTrainBegin(),t.stopTraining_=!1;let y=n.initialEpoch==null?0:n.initialEpoch,x=await e.iterator();for(;y<n.epochs;){const b={};await p.onEpochBegin(y);let w=0,S=0;for(r||(x=await e.iterator());!r||w<n.batchesPerEpoch;){const $=await x.next();if(r&&$.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${w} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if($.value!=null){const{xs:T,ys:k}=u6(t,$.value),E={};E.batch=S,E.size=T[0].shape[0],await p.onBatchBegin(S,E);const I=[];if(n.classWeight!=null){const R=s6(n.classWeight,t.outputNames);for(let O=0;O<R.length;++O)I.push(await l6(k[O],null,R[O]))}const _=T.concat(k).concat(I),N=s(_);ot(_);for(let R=0;R<l.length;++R){const O=l[R],P=N[R];E[O]=P,Ra(P)}await p.onBatchEnd(S,E),ZH(E),S++,w++}if(r?w>=n.batchesPerEpoch:$.done){if(i){let T;j4(n.validationData)?T=Nt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):T=Nt(t.evaluate(a,o,{batchSize:n.validationBatchSize==null?CSe:n.validationBatchSize,verbose:0}));for(let k=0;k<t.metricsNames.length;++k)b[`val_${t.metricsNames[k]}`]=T[k]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(y,b),y++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function kSe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function j4(t){return typeof t.iterator=="function"}function ASe(t){return typeof t.next=="function"}async function ESe(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let a=[];if(n.verbose>0)throw new rt("Verbose mode is not implemented yet.");j(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=ASe(e)?e:await e.iterator();let s=0,l=0;for(;!r||l<n.batches;){const c=await o.next();if(a=le(()=>{if(c.value){const{xs:h,ys:d}=u6(t,c.value),p=h.concat(d),g=le(()=>i(p));if(ot(p),l===0)for(let x=0;x<g.length;++x)a.push(Tt(0));const y=p[0].shape[0];for(let x=0;x<g.length;++x){const b=g[x],w=a[x];a[x]=le(()=>Ae(a[x],te(y,b))),l>0&&ot(w)}ot(g),s+=y,++l}return a}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<a.length;++c){const h=a[c];a[c]=He(a[c],s),ot(h)}return Rr(a)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zT(t){j(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Hh(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>El(r,e,n-e)):El(t,e,n-e)}function Hk(t,e){return le(()=>t==null?null:Array.isArray(t)?t.map(n=>Hk(n,e)):LH(t,e.dtype==="int32"?e:Pe(e,"int32")))}function jT(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function c6(t){const e=[];t instanceof kn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(xm(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Yi(t,e){if(t==null)return;const n=[];if(e instanceof kn)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const a=e[i];n.push(a.id)}const r=[];if(t instanceof kn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const a=t[i];n.indexOf(a.id)===-1&&r.push(a)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ISe(t){return t instanceof kn}function Xk(t){return Array.isArray(t)}function U4(t){return!ISe(t)&&!Xk(t)}function V4(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(Xk(t)&&t.length>0)o=!0;else if(U4(t)){for(const s in t)if(t.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new J(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let a;if(U4(t)){t=t,a=[];for(const o of e){if(t[o]==null)throw new J(`No data provided for "${o}". Need data for each key in: ${e}`);a.push(t[o])}}else if(Xk(t)){if(t=t,t.length!==e.length)throw new J(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);a=t}else{if(t=t,e.length>1)throw new J(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);a=[t]}if(a=c6(a),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const s=a[o];if(s.shape.length!==n[o].length)throw new J(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${s.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=s.shape[l],h=n[o][l];if(h!=null&&h>=0&&c!==h)throw new J(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${s.shape[0]} examples, each with shape [${s.shape.slice(1,s.shape.length)}] (tensor shape [${s.shape}])`)}}return a}function OSe(t,e,n){const r=xs(t.map(a=>a.shape[0]));r.sort();const i=xs(e.map(a=>a.shape[0]));if(i.sort(),r.length>1)throw new J(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(a=>a.shape))}`);if(i.length>1)throw new J(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(r.length>0&&i.length>0&&!At(r,i))throw new J(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function NSe(t,e,n){const r=[Y0,Z0,Jd];for(let i=0;i<t.length;++i){const a=t[i],o=e[i],s=n[i];if(o!=null){if(o===Jd&&a.shape[a.shape.length-1]===1)throw new J(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=a.shape.slice(1),c=s.slice(1);for(let h=0;h<l.length;++h){const d=l[h],p=c[h];if(p!=null&&d!==p)throw new J(`A target Tensor with shape ${a.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function W4(t,e,n,r=!0,i=""){let a;if(Array.isArray(t)){if(t.length!==e.length)throw new J(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);a=t}else{if(e.length>1)throw new J(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);a=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const s=a[o];if(s.shape.length!==n[o].length)throw new J(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(s.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=s.shape[l],h=n[o][l];if(h!=null&&h!==c)throw new J(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(s.shape)}.`)}}}function _Se(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let a=n.hasOwnProperty(i)?n[i]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}const RSe="layers-model";class yc extends Zi{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new J("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");mSe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=pSe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof js))throw new J("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new J(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(BT(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new J(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(s=>BT(s))}else{const o=BT(e.loss);this.outputs.forEach(s=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const s=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Al("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const s=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([s,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=_Se(e.metrics,this.outputNames),a=(o,s,l)=>{this.outputNames.length>1&&(s=this.outputNames[o]+"_"+s),this.metricsNames.push(s),this.metricsTensors.push([l,o])};Al("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const s=i[o];(c=>{const h="";let d,p,g;for(const y of c){if(typeof y=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(y)!==-1){const b=this.internalOutputShapes[o];b[b.length-1]===1||this.lossFunctions[o]===Z0?["accuracy","acc"].indexOf(y)!==-1?p=t6:["crossentropy","ce"].indexOf(y)!==-1&&(p=iSe):this.lossFunctions[o]===Vv?["accuracy","acc"].indexOf(y)!==-1?p=aSe:["crossentropy","ce"].indexOf(y)!==-1&&(p=i6):["accuracy","acc"].indexOf(y)!==-1?p=n6:["crossentropy","ce"].indexOf(y)!==-1&&(p=r6);let w;["accuracy","acc"].indexOf(y)!==-1?w="acc":["crossentropy","ce"].indexOf(y)!==-1&&(w="ce"),g=p,d=h+w}else g=dSe(y),d=h+uy(y);let x;Al(d,()=>{x=g}),a(o,d,x)}})(s)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;zT(i);const o=this.standardizeUserDataXY(e,n,!0,i);try{const s=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,s,i,r.verbose,r.steps);return Rr(c)}finally{Yi(o[0],e),Yi(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),ESe(this,e,n)}checkNumSamples(e,n,r,i="steps"){let a;if(r!=null){if(a=null,n!=null)throw new J(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new J(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return a}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new J("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],a=this.retrieveSymbolicTensors(i),o=new ms;if(e instanceof kn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new J(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new J(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const s=ed(a,o);return r?s:s[0]}retrieveSymbolicTensors(e){const n=Wl(null,e.length);let r=e.length;for(const i of this.layers){const a=Array.isArray(i.output)?i.output:[i.output],o=a.map(s=>s.name);for(let s=0;s<e.length;++s){const l=o.indexOf(e[s]);if(l!==-1&&(n[s]=a[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((a,o)=>{a==null&&i.push(e[o])}),new J(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return le(()=>{const i=this.checkNumSamples(e);if(r)throw new rt("Verbose predictLoop() is not implemented yet.");const a=jT(i,n),o=this.outputs.map(s=>[]);for(let s=0;s<a.length;++s)le(()=>{const c=a[s][0],h=a[s][1],d=Hh(e,c,h),p=[];if(Array.isArray(d))for(let y=0;y<d.length;++y)p.push({key:this.inputs[y],value:d[y]});else p.push({key:this.inputs[0],value:d});const g=new ms(p);return ed(this.outputs,g)}).forEach((c,h)=>o[h].push(c));return Rr(o.map(s=>Mr(s,0)))})}predict(e,n={}){const r=c6(e);W4(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return zT(i),this.predictLoop(r,i)}finally{Yi(r,e)}}predictOnBatch(e){W4(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new Di("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let o=0;o<this.feedOutputShapes.length;++o){const s=this.feedOutputShapes[o];this.feedLossFns[o]===Vv?a.push(s.slice(0,s.length-1).concat([1])):a.push(s)}if(e=V4(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=V4(n,this.feedOutputNames,a,!1,"target"),OSe(e,n),NSe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new J(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,a=!0,o){const[s,l]=this.standardizeUserDataXY(e,n,a,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const h=s6(i,this.outputNames);c=[];for(let d=0;d<h.length;++d)c.push(await l6(l[d],null,h[d]))}return[s,l,c]}testLoop(e,n,r,i=0,a){return le(()=>{const o=this.checkNumSamples(n,r,a,"steps"),s=[];if(i>0)throw new rt("Verbose mode is not implemented yet.");if(a!=null)throw new rt("steps mode in testLoop() is not implemented yet");{const l=jT(o,r),c=Yr(ca(0,o));for(let h=0;h<l.length;++h){const d=l[h][0],p=l[h][1],g=El(c,d,p-d),y=Hk(n,g),x=e(y);if(h===0)for(let b=0;b<x.length;++b)s.push(Tt(0));for(let b=0;b<x.length;++b){const w=x[b];s[b]=Ae(s[b],te(p-d,w))}}for(let h=0;h<s.length;++h)s[h]=He(s[h],o)}return s})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let a=i;if(E4(e,i)>1){const o=E4(e.slice(0,r),i);a+=`_${o}`}n.push(a)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],s=()=>{const d=[];for(let x=0;x<this.inputs.length;++x)d.push({key:this.inputs[x],value:r[x]});const p=new ms(d),g=ed(this.outputs,p,{training:!0});let y;for(let x=0;x<this.lossFunctions.length;++x){const b=this.lossFunctions[x];let w=b(i[x],g[x]);a[x]!=null&&(w=SSe(w,a[x]));const S=wn(w);n.push(S),x===0?y=w:y=Ae(y,w)}for(let x=0;x<this.metricsTensors.length;++x){let b;if(this.outputs.length>1&&x<this.outputs.length)b=n[x];else{const w=this.metricsTensors[x][0],S=this.metricsTensors[x][1];b=wn(w(i[S],g[S]))}Ra(b),o.push(b)}return y=wn(y),this.calculateLosses().forEach(x=>{y=Ae(y,x)}),y},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(s,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>le(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:i[c]});const s=new ms(o),l=ed(this.outputs,s);for(let c=0;c<this.lossFunctions.length;++c){const h=this.lossFunctions[c],d=wn(h(a[c],l[c]));c===0?r=d:r=Ae(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const h=this.metricsTensors[c][0],d=this.metricsTensors[c][1],p=wn(h(a[d],l[d]));n.push(p)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,a,o,s,l,c,h,d,p;try{const g=r.batchSize==null?32:r.batchSize;zT(g);const x=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,g);i=x[0],a=x[1],p=x[2];let b=!1,w;if(r.validationData!=null&&r.validationData.length>0){if(b=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new rt("validationData including sample weights is not supported yet."):new J(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const R=await this.standardizeUserData(l,c,null,null,!0,g);h=R[0],d=R[1],w=h.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){b=!0;const N=Math.floor(i[0].shape[0]*(1-r.validationSplit)),R=i[0].shape[0];h=Hh(i,N,R),o=i,i=Hh(i,0,N),d=Hh(a,N,R),s=a,a=Hh(a,0,N),w=h.concat(d)}else r.validationSteps!=null&&(b=!0);const S=i.concat(a).concat(p);this.checkTrainableWeightsConsistency();const $=this.makeTrainFunction(),T=this.getDedupedMetricsNames();let k,E;b?(this.makeTestFunction(),k=this.testFunction,E=T.slice().concat(T.map(N=>"val_"+N))):(k=null,w=[],E=T.slice());const I=QH(r.callbacks,r.yieldEvery);return await this.fitLoop($,S,T,g,r.epochs,r.verbose,I,k,w,r.shuffle,E,r.initialEpoch,null,null)}finally{this.isTraining=!1,Yi(i,e),Yi(a,n),Yi(o,e),Yi(s,n),Yi(h,l),Yi(d,c),p!=null&&ot(p)}}async fitLoop(e,n,r,i,a,o,s,l,c,h,d,p,g,y){i==null&&(i=32),a==null&&(a=1),h==null&&(h=!0),p==null&&(p=0);let x=!1;if(l!=null&&c!=null&&(x=!0),y!=null&&(x=!0,g==null))throw new J("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=this.checkNumSamples(n,i,g,"steps_per_epoch");let w;b!=null&&(w=ca(0,b)),o==null&&(o=1);const{callbackList:S,history:$}=JH(s,o,a,p,b,g,i,x,d);S.setModel(this),this.history=$,await S.onTrainBegin(),this.stopTraining_=!1;for(let T=p;T<a;++T){await S.onEpochBegin(T);const k={};if(g!=null)throw new rt("stepsPerEpoch mode is not implemented yet.");{if(h==="batch")throw new rt("batch shuffling is not implemneted yet");h&&ppe(w);const E=Yr(w),I=jT(b,i);for(let _=0;_<I.length;++_){const N={};if(await S.onBatchBegin(_,N),le(()=>{const R=I[_][0],O=I[_][1],P=El(E,R,O-R);N.batch=_,N.size=O-R;const B=Hk(n,P),U=e(B);for(let z=0;z<r.length;++z){const M=r[z],V=U[z];N[M]=V,Ra(V)}if(_===I.length-1&&x){const z=this.testLoop(l,c,i);for(let M=0;M<r.length;++M){const V=r[M],W=z[M];Ra(W),k["val_"+V]=W}}}),await S.onBatchEnd(_,N),ZH(N),this.stopTraining_)break}E.dispose()}if(await S.onEpochEnd(T,k),this.stopTraining_)break}return await S.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return TSe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],a=r[1],s=this.makeTrainFunction()(i.concat(a)),l=[];for(const c of s){const h=await c.data();l.push(h[0])}return ot(s),Yi(r[0],e),Yi(r[1],n),Rr(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,a=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:a[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=n4().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-n4().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=fo(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>fo(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=fo(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[fo(uy(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>fo(uy(e)));{const e={};for(const n in this.metrics)e[n]=fo(uy(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=Gk(e.optimizer_config),r=Co(n);let i;if(typeof e.loss=="string")i=ml(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>ml(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=ml(e.loss[o])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(o=>ml(o));else if(e.metrics!=null){a={};for(const o in e.metrics)a[o]=ml(e.metrics[o])}this.compile({loss:i,metrics:a,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=fme(e);if(c.length===0)throw new J(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new J(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new J("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await i4(this.getNamedWeights(n)),s={modelTopology:this.toJSON(null,!1),format:RSe,generatedBy:`TensorFlow.js tfjs-layers v${o6}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){s.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:h,specs:d}=await i4(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=cme([r.data,h])}return this.userDefinedMetadata!=null&&(B4(this.userDefinedMetadata,this.name,!0),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=r.data,s.weightSpecs=r.specs,e.save(s)}setUserDefinedMetadata(e){B4(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}yc.className="Model";Te(yc);class f6 extends yc{}f6.className="Functional";Te(f6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Qc extends yc{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:H0("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new J(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Qc||e instanceof yc;let r;if(n){if(r=e,r.outputs.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new J("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new J("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=Mwe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new J(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=qH(this.outputs[0])}this.inboundNodes=[],new K0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Wl(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(St(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new yc({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Di("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Di("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Di("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Di("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let a,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new J("Legacy serialization format not supported yet.");a=n}else j(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=n.layers,delete n.layers,o=n;const s=new e(o);if(!(s instanceof Qc))throw new rt(`Sequential.fromConfig called on non-Sequential input: ${s}`);for(const l of a){const h=Co(l,void 0,i);i&&h.setFastWeightInitDuringBuild(!0),s.add(h)}return s}set stopTraining(e){if(this.model==null)throw new J("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new J("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Qc.className="Sequential";Te(Qc);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DSe(t){return new Qc(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let pr=class extends $f{getConfig(){return{}}};class h6 extends pr{apply(e,n=1){return bwe(e,n)}}h6.className="elu";Te(h6);class d6 extends pr{apply(e){return Oq(e)}}d6.className="selu";Te(d6);class p6 extends pr{apply(e){return tu(e)}}p6.className="relu";Te(p6);class m6 extends pr{apply(e){return le(()=>Yd(6,tu(e)))}}m6.className="relu6";Te(m6);class g6 extends pr{apply(e){return e}}g6.className="linear";Te(g6);class y6 extends pr{apply(e){return wf(e)}}y6.className="sigmoid";Te(y6);class v6 extends pr{apply(e){return wwe(e)}}v6.className="hardSigmoid";Te(v6);class b6 extends pr{apply(e){return hm(e)}}b6.className="softplus";Te(b6);class x6 extends pr{apply(e){return xwe(e)}}x6.className="softsign";Te(x6);class w6 extends pr{apply(e){return L0(e)}}w6.className="tanh";Te(w6);let $O=class extends pr{apply(e,n=-1){return AI(e,n)}};$O.className="softmax";Te($O);class S6 extends pr{apply(e,n=-1){return Sq(e,n)}}S6.className="logSoftmax";Te(S6);class C6 extends pr{apply(e){return le(()=>le(()=>{const n=Math.sqrt(2),r=te(.5,Ae(1,yq(He(e,n))));return te(e,r)}))}}C6.className="gelu";Te(C6);class $6 extends pr{apply(e){return le(()=>te(.5,te(e,Ae(1,L0(te(hr(He(2,Math.PI)),Ae(e,te(.044715,jl(e,3)))))))))}}$6.className="gelu_new";Te($6);class T6 extends pr{apply(e){return le(()=>te(e,L0(hm(e))))}}T6.className="mish";Te(T6);class k6 extends pr{apply(e,n=1){return le(()=>te(wf(te(e,n)),e))}}k6.className="swish";Te(k6);function $s(t){return t.getClassName()}function UT(t,e={}){return bm(t,_i.getMap().classNameMap,e,"activation")}function Ts(t){if(t==null){const e={};return e.className="linear",e.config={},UT(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},UT(e)}else return t instanceof pr?t:UT(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function MSe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class A6 extends $f{}class E6 extends A6{constructor(e){super(),MSe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return le(()=>{let n=zn([1]);return this.hasL1&&(n=Ae(n,qe(te(this.l1,wr(e))))),this.hasL2&&(n=Ae(n,qe(te(this.l2,wm(e))))),re(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}E6.className="L1L2";Te(E6);const G4={l1l2:"L1L2"};function Ut(t){return cO(t)}function q4(t,e={}){return bm(t,_i.getMap().classNameMap,e,"regularizer")}function en(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in G4?G4[t]:t,config:{}};return q4(n)}else return t instanceof A6?t:q4(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class I6 extends ct{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Qe(e);let r=tu(e);return this.maxValue!=null&&(r=mi(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}I6.className="ReLU";Te(I6);class O6 extends ct{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Qe(e);return yI(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}O6.className="LeakyReLU";Te(O6);class N6 extends ct{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Jt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=en(e.alphaRegularizer),this.alphaConstraint=Nn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new J(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=St(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new En({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Qe(e),CI(e,this.alpha.read())}getConfig(){const e={alphaInitializer:rn(this.alphaInitializer),alphaRegularizer:Ut(this.alphaRegularizer),alphaConstraint:On(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}N6.className="PReLU";Te(N6);let _6=class extends ct{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new rt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Qe(e);return z0(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};_6.className="ELU";Te(_6);class R6 extends ct{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Qe(e);return te(r,Pe(gi(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}R6.className="ThresholdedReLU";Te(R6);class D6 extends ct{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new $O().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return le(()=>{let r=Qe(e);const i=n.mask;if(i!=null){const a=te(Ke(zs(r.shape),Pe(i,r.dtype)),Tt(-1e9));r=Ae(r,a)}return this.axis instanceof Array?this.axis.length>1?za(Ke(r,Cq(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}D6.className="Softmax";Te(D6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vc(t,e,n){if(typeof t=="number")return Wl(t,e);if(t.length!==e)throw new J(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!mwe(i))throw new J(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function la(t,e,n,r,i=1){if(t==null)return t;const a=e+(e-1)*(i-1);let o;return n==="same"?o=t:o=t-a+1,Math.floor((o+r-1)/r)}function ka(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Cs([n-e,0]);else if(r==="same")t=t*e;else throw new J(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TO(t,e){return le(()=>(gn(e),e==="channelsFirst"?yt(t,[0,2,3,1]):t))}function M6(t,e){return le(()=>(gn(e),e==="channelsFirst"?yt(t,[0,2,3,4,1]):t))}function PSe(t,e,n,r=1,i="valid",a,o=1){return le(()=>{if(a==null&&(a=fa()),gn(a),t.shape.length!==3)throw new J(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new J(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new J(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(a==="channelsFirst"&&(t=yt(t,[0,2,1])),i==="causal")throw new rt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=hq(t,e,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(s=ga(s,n)),s})}function H4(t,e,n,r=[1,1],i="valid",a,o,s=null){return le(()=>{if(a==null&&(a=fa()),gn(a),t.rank!==3&&t.rank!==4)throw new J(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new J(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=TO(t,a);if(i==="causal")throw new rt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Wbe({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),a==="channelsFirst"&&(l=yt(l,[0,3,1,2])),l})}function LSe(t,e,n,r=[1,1,1],i="valid",a,o){return le(()=>{if(a==null&&(a=fa()),gn(a),t.rank!==4&&t.rank!==5)throw new J(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new J(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let s=M6(t,a);if(i==="causal")throw new rt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=jge(s,e,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(s=ga(s,n)),a==="channelsFirst"&&(s=yt(s,[0,4,1,2,3])),s})}class Q0 extends ct{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Q0.verifyArgs(n),this.rank=e,Un(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new rt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=vc(n.kernelSize,e,"kernelSize"),this.strides=vc(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,yi(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,gn(this.dataFormat),this.activation=Ts(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Jt(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Nn(n.biasConstraint),this.biasRegularizer=en(n.biasRegularizer),this.activityRegularizer=en(n.activityRegularizer),this.dilationRate=vc(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new J(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new J(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new J(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Ta("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!fO(e.kernelSize,"number",1,3))throw new J(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:$s(this.activation),useBias:this.useBias,biasInitializer:rn(this.biasInitializer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),biasConstraint:On(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Tf extends Q0{constructor(e,n){super(e,n),this.kernel=null,Tf.verifyArgs(n),this.filters=n.filters,Un(this.filters,"filters"),this.kernelInitializer=Jt(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Nn(n.kernelConstraint),this.kernelRegularizer=en(n.kernelRegularizer)}build(e){e=St(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new J(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return le(()=>{e=Qe(e);let r;const i=this.bias==null?null:this.bias.read(),a=NH(this.activation.getClassName());if(a!=null&&this.rank===2)r=H4(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)r=PSe(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=H4(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=LSe(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new rt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=St(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<r.length;++a){const o=la(r[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);n.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:rn(this.kernelInitializer),kernelRegularizer:Ut(this.kernelRegularizer),kernelConstraint:On(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new J(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Tm extends Tf{constructor(e){super(2,e),Tm.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!fO(e.kernelSize,"number",1,2))throw new J(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Tm.className="Conv2D";Te(Tm);class km extends Tf{constructor(e){super(3,e),km.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new J(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}km.className="Conv3D";Te(km);class P6 extends Tm{constructor(e){if(super(e),this.inputSpec=[new En({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new J(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=St(e),e.length!==4)throw new J("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new En({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{let r=Qe(e);if(r.shape.length!==4)throw new J(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,a=i[0];let o,s;this.dataFormat==="channelsFirst"?(o=2,s=3):(o=1,s=2);const l=i[o],c=i[s],h=this.kernelSize[0],d=this.kernelSize[1],p=this.strides[0],g=this.strides[1],y=ka(l,p,h,this.padding),x=ka(c,g,d,this.padding),b=[a,y,x,this.filters];this.dataFormat!=="channelsLast"&&(r=yt(r,[0,2,3,1]));let w=dq(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=yt(w,[0,3,1,2])),this.bias!=null&&(w=ga(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=St(e);const n=e.slice();let r,i,a;this.dataFormat==="channelsFirst"?(r=1,i=2,a=3):(r=3,i=1,a=2);const o=this.kernelSize[0],s=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[i]=ka(n[i],l,o,this.padding),n[a]=ka(n[a],c,s,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}P6.className="Conv2DTranspose";Te(P6);class L6 extends km{constructor(e){if(super(e),this.inputSpec=[new En({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new J(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=St(e),e.length!==5)throw new J("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new En({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{let r=Qe(e);if(r.shape.length!==5)throw new J(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,a=i[0];let o,s,l;this.dataFormat==="channelsFirst"?(l=2,o=3,s=4):(l=1,o=2,s=3);const c=i[l],h=i[o],d=i[s],p=this.kernelSize[0],g=this.kernelSize[1],y=this.kernelSize[2],x=this.strides[0],b=this.strides[1],w=this.strides[2],S=ka(c,x,p,this.padding),$=ka(h,b,g,this.padding),T=ka(d,w,y,this.padding),k=[a,S,$,T,this.filters];this.dataFormat!=="channelsLast"&&(r=yt(r,[0,2,3,4,1]));let E=Wge(r,this.kernel.read(),k,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(E=yt(E,[0,4,1,2,3])),this.bias!==null&&(E=ga(E,this.bias.read(),this.dataFormat)),this.activation!==null&&(E=this.activation.apply(E)),E})}computeOutputShape(e){e=St(e);const n=e.slice();let r,i,a,o;this.dataFormat==="channelsFirst"?(r=1,i=2,a=3,o=4):(r=4,i=1,a=2,o=3);const s=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],h=this.strides[0],d=this.strides[1],p=this.strides[2];return n[r]=this.filters,n[i]=ka(n[i],h,s,this.padding),n[a]=ka(n[a],d,l,this.padding),n[o]=ka(n[o],p,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}L6.className="Conv3DTranspose";Te(L6);class F6 extends Tf{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new J("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new J("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new J(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Jt(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=en(n.depthwiseRegularizer),this.depthwiseConstraint=Nn(n.depthwiseConstraint),this.pointwiseInitializer=Jt(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=en(n.pointwiseRegularizer),this.pointwiseConstraint=Nn(n.pointwiseConstraint)}build(e){if(e=St(e),e.length<this.rank+2)throw new J(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new J(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),a=[];for(let s=0;s<this.rank;++s)a.push(1);a.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new En({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{e=Qe(e);let r;if(this.rank===1)throw new rt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=yt(e,[0,2,3,1])),r=Nq(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=ga(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=yt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=rn(this.depthwiseInitializer),e.pointwiseInitializer=rn(this.pointwiseInitializer),e.depthwiseRegularizer=Ut(this.depthwiseRegularizer),e.pointwiseRegularizer=Ut(this.pointwiseRegularizer),e.depthwiseConstraint=On(this.depthwiseConstraint),e.pointwiseConstraint=On(this.pointwiseConstraint),e}}F6.className="SeparableConv";class B6 extends F6{constructor(e){super(2,e)}}B6.className="SeparableConv2D";Te(B6);class J0 extends Tf{constructor(e){super(1,e),J0.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!fO(e.kernelSize,"number",1,1))throw new J(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}J0.className="Conv1D";Te(J0);class z6 extends ct{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return le(()=>{if(e=Qe(e),this.dataFormat==="channelsLast"){const r=ly(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return ly(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=ly(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return ly(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}z6.className="Cropping2D";Te(z6);class j6 extends ct{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,hwe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return le(()=>{let r=Qe(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=yt(r,[0,2,3,1]);const a=this.size[0]*i[2],o=this.size[1]*i[3],s=this.interpolation==="nearest"?yo.resizeNearestNeighbor(r,[a,o]):yo.resizeBilinear(r,[a,o]);return yt(s,[0,3,1,2])}else{const a=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?yo.resizeNearestNeighbor(r,[a,o]):yo.resizeBilinear(r,[a,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}j6.className="UpSampling2D";Te(j6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function FSe(t,e,n=[1,1],r="valid",i,a){return le(()=>{i==null&&(i=fa()),gn(i);let o=TO(t,i);if(t.rank!==4)throw new J(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new J(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=dI(o,e,n,r==="same"?"same":"valid","NHWC",a),i==="channelsFirst"&&(o=yt(o,[0,3,1,2])),o})}class U6 extends Q0{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Jt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Nn(e.depthwiseConstraint),this.depthwiseRegularizer=en(e.depthwiseRegularizer)}build(e){if(e=St(e),e.length<4)throw new J(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new J(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{e=Qe(e);let r=FSe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=ga(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=St(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=la(n,this.kernelSize[0],this.padding,this.strides[0]),o=la(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,a,o]:[e[0],a,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=rn(this.depthwiseInitializer),e.depthwiseRegularizer=Ut(this.depthwiseRegularizer),e.depthwiseConstraint=On(this.depthwiseRegularizer),e}}U6.className="DepthwiseConv2D";Te(U6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function V6(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new J("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(a){return a==null||Array.isArray(a)?a:[a]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function W6(t,e,n,r=!1,i,a,o=!1,s=!1){return le(()=>{const l=e.shape.length;if(l<3)throw new J(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(ca(2,l));e=yt(e,c),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Pe(Pe(i,"bool"),"float32"),i.rank===l-1&&(i=_r(i,-1)),i=yt(i,c)),r&&(e=Ul(e,0),i!=null&&(i=Ul(i,0)));const h=[];let d,p=n;const g=e.shape[0],y=Vl(e);let x;i!=null&&(x=Vl(i));for(let w=0;w<g;++w){const S=y[w],$=le(()=>t(S,p));if(i==null)d=$[0],p=$[1];else{const T=le(()=>{const k=x[w],E=Ke(zi(k),k),I=Ae(te($[0],k),te(p[0],E)),_=p.map((N,R)=>Ae(te($[1][R],k),te(N,E)));return{output:I,newStates:_}});d=T.output,p=T.newStates}s&&h.push(d)}let b;return s&&(b=Io(h,1)),[d,b,p]})}class Us extends ct{constructor(e){super(e);let n;if(e.cell==null)throw new J("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new EO({cells:e.cell}):n=e.cell,n.stateSize==null)throw new J("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new En({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ca(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Uk(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const a=[];for(const o of n)a.push([e[0],o]);return[i].concat(a)}else return i}computeMask(e,n){return le(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(a=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new rt("Constants support is not implemented in RNN yet.");Uk(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new En({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!At(this.stateSpec.map(o=>o.shape[o.shape.length-1]),a))throw new J(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(o=>new En({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){le(()=>{if(!this.stateful)throw new $a("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>zn([r,i])):this.states_=[zn([r,this.cell.stateSize])];else if(e==null)ot(this.states_),this.keptStates!=null&&(ot(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>zn([r,i])):this.states_[0]=zn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new J(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):ot(this.states_);for(let i=0;i<this.states_.length;++i){const a=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,s=[r,o];if(!At(a.shape,s))throw new J(`State ${i} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${a.shape}`);this.states_[i]=a}}this.states_=this.states_.map(i=>Ra(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const a=V6(e,r,i,this.numConstants);e=a.inputs,r=a.initialState,i=a.constants;let o=[],s=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new En({shape:c.shape}));s=s.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof Ua){const c=[e].concat(o),h=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=h;const p=super.apply(c,n);return this.inputSpec=d,p}else return super.apply(e,n)}call(e,n){return le(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let a=n==null?null:n.initialState;e=Qe(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==o)throw new J(`RNN Layer has ${o} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const s={training:i},c=W6((y,x)=>{const b=this.cell.call([y].concat(x),s);return[b[0],b.slice(1)]},e,a,this.goBackwards,r,null,this.unroll,this.returnSequences),h=c[0],d=c[1],p=c[2];this.stateful&&this.resetStates(p,i);const g=this.returnSequences?d:h;return this.returnState?[g].concat(p):g})}getInitialState(e){return le(()=>{let n=zn(e.shape);return n=qe(n,[1,2]),n=xm(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?zk(n,[1,r]):n):this.cell.stateSize>1?[zk(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Us.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,a=Co(i,r);return new e(Object.assign(n,{cell:a}))}}Us.className="RNN";Te(Us);class ex extends ct{}class kO extends ex{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Un(this.units,"units"),this.activation=Ts(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Jt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=en(e.kernelRegularizer),this.recurrentRegularizer=en(e.recurrentRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.kernelConstraint=Nn(e.kernelConstraint),this.recurrentConstraint=Nn(e.recurrentConstraint),this.biasConstraint=Nn(e.biasConstraint),this.dropout=Zc([1,Cs([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Zc([1,Cs([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=St(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{if(e=e,e.length!==2)throw new J(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ks({ones:()=>zi(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ks({ones:()=>zi(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let a;const o=this.dropoutMask,s=this.recurrentDropoutMask;o!=null?a=Pa(te(e,o),this.kernel.read()):a=Pa(e,this.kernel.read()),this.bias!=null&&(a=ga(a,this.bias.read())),s!=null&&(r=te(r,s));let l=Ae(a,Pa(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:$s(this.activation),useBias:this.useBias,kernelInitializer:rn(this.kernelInitializer),recurrentInitializer:rn(this.recurrentInitializer),biasInitializer:rn(this.biasInitializer),kernelRegularizer:Ut(this.kernelRegularizer),recurrentRegularizer:Ut(this.recurrentRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:On(this.kernelConstraint),recurrentConstraint:On(this.recurrentConstraint),biasConstraint:On(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}kO.className="SimpleRNNCell";Te(kO);class G6 extends Us{constructor(e){e.cell=new kO(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(ot(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ot(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return new e(n)}}G6.className="SimpleRNN";Te(G6);class AO extends ex{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new J("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Un(this.units,"units"),this.activation=Ts(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Ts(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Jt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=en(e.kernelRegularizer),this.recurrentRegularizer=en(e.recurrentRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.kernelConstraint=Nn(e.kernelConstraint),this.recurrentConstraint=Nn(e.recurrentConstraint),this.biasConstraint=Nn(e.biasConstraint),this.dropout=Zc([1,Cs([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Zc([1,Cs([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=St(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{if(e=e,e.length!==2)throw new J(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ks({ones:()=>zi(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ks({ones:()=>zi(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let s,l,c;0<this.dropout&&this.dropout<1&&(e=te(e,a[0]));let h=Pa(e,this.kernel.read());this.useBias&&(h=ga(h,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=te(i,o[0]));const d=this.recurrentKernel.read(),[p,g]=pi(d,[2*this.units,this.units],d.rank-1),y=Pa(i,p),[x,b,w]=pi(h,3,h.rank-1),[S,$]=pi(y,2,y.rank-1);s=this.recurrentActivation.apply(Ae(x,S)),l=this.recurrentActivation.apply(Ae(b,$));const T=Pa(te(l,i),g);c=this.activation.apply(Ae(w,T));const k=Ae(te(s,i),te(Ae(1,dn(s)),c));return[k,k]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:$s(this.activation),recurrentActivation:$s(this.recurrentActivation),useBias:this.useBias,kernelInitializer:rn(this.kernelInitializer),recurrentInitializer:rn(this.recurrentInitializer),biasInitializer:rn(this.biasInitializer),kernelRegularizer:Ut(this.kernelRegularizer),recurrentRegularizer:Ut(this.recurrentRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:On(this.kernelConstraint),recurrentConstraint:On(this.recurrentConstraint),biasConstraint:On(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}AO.className="GRUCell";Te(AO);class q6 extends Us{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new AO(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(ot(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ot(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}q6.className="GRU";Te(q6);class tx extends ex{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Un(this.units,"units"),this.activation=Ts(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Ts(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Jt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=en(e.kernelRegularizer),this.recurrentRegularizer=en(e.recurrentRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.kernelConstraint=Nn(e.kernelConstraint),this.recurrentConstraint=Nn(e.recurrentConstraint),this.biasConstraint=Nn(e.biasConstraint),this.dropout=Zc([1,Cs([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Zc([1,Cs([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=St(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const a=this.biasInitializer,o=this.units;i=new(n=class extends Vi{apply(l,c){const h=a.apply([o]),d=new dO().apply([o]),p=a.apply([o*2]);return O4(O4(h,d),p)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return le(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new J(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ks({ones:()=>zi(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ks({ones:()=>zi(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;let l,c,h,d;0<this.dropout&&this.dropout<1&&(e=te(e,o[0]));let p=Pa(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=te(i,s[0])),p=Ae(p,Pa(i,this.recurrentKernel.read())),this.useBias&&(p=ga(p,this.bias.read()));const[g,y,x,b]=pi(p,4,p.rank-1);l=this.recurrentActivation.apply(g),c=this.recurrentActivation.apply(y),h=Ae(te(c,a),te(l,this.activation.apply(x))),d=this.recurrentActivation.apply(b);const w=te(d,this.activation.apply(h));return[w,w,h]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:$s(this.activation),recurrentActivation:$s(this.recurrentActivation),useBias:this.useBias,kernelInitializer:rn(this.kernelInitializer),recurrentInitializer:rn(this.recurrentInitializer),biasInitializer:rn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ut(this.kernelRegularizer),recurrentRegularizer:Ut(this.recurrentRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:On(this.kernelConstraint),recurrentConstraint:On(this.recurrentConstraint),biasConstraint:On(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}tx.className="LSTMCell";Te(tx);class H6 extends Us{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new tx(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(ot(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ot(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}H6.className="LSTM";Te(H6);class EO extends ex{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return le(()=>{e=e;let r=e.slice(1);const i=[];for(const s of this.cells.slice().reverse())Array.isArray(s.stateSize)?i.push(r.splice(0,s.stateSize.length)):i.push(r.splice(0,1));i.reverse();const a=[];let o;for(let s=0;s<this.cells.length;++s){const l=this.cells[s];r=i[s],s===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),a.push(o.slice(1))}r=[];for(const s of a.slice().reverse())r.push(...s);return[o[0]].concat(r)})}build(e){Uk(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{Al(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=a=>({className:a.getClassName(),config:a.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const a of n.cells)i.push(Co(a,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return Vk(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,a=e.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],a[o]])}xO(n)}}EO.className="StackedRNNCells";Te(EO);function ks(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:a}=t,o=()=>a!=null?a(e(),n):FH(e(),n),s=()=>Sm(o,e,r);return!i||i<=1?Ra(s().clone()):Array(i).fill(void 0).map(s).map(c=>Ra(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var BSe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class X6 extends Us{constructor(e){if(e.unroll)throw new rt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new rt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new En({ndim:5})]}call(e,n){return le(()=>{if(this.cell.dropoutMask!=null&&(ot(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ot(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new J("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return le(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),a=[i[0],...i.slice(2)],o=zn(a);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){le(()=>{if(!this.stateful)throw new $a("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),a=[i[0],...i.slice(2)];if(r[0]==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zn(a)):this.states_=[zn(a)];else if(e==null)ot(this.states_),this.keptStates!=null&&(ot(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zn(a)):this.states_[0]=zn(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new J(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):ot(this.states_);for(let s=0;s<this.states_.length;++s){const l=e[s],c=a;if(!At(l.shape,c))throw new J(`State ${s} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[s]=l}}this.states_=this.states_.map(s=>Ra(s.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:a,strides:o,dilationRate:s}=this.cell,l=n==="channelsFirst",c=e[l?3:2],h=e[l?4:3],d=la(c,i[0],a,o[0],s[0]),p=la(h,i[1],a,o[1],s[1]);return[...e.slice(0,2),...l?[r,d,p]:[d,p,r]]}}X6.className="ConvRNN2D";class IO extends tx{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:a,dataFormat:o,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Un(this.filters,"filters"),this.kernelSize=vc(r,2,"kernelSize"),this.kernelSize.forEach(l=>Un(l,"kernelSize")),this.strides=vc(i||1,2,"strides"),this.strides.forEach(l=>Un(l,"strides")),this.padding=a||"valid",yi(this.padding),this.dataFormat=o||"channelsLast",gn(this.dataFormat),this.dilationRate=vc(s||1,2,"dilationRate"),this.dilationRate.forEach(l=>Un(l,"dilationRate"))}build(e){var n;e=St(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new J(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],a=4,o=this.kernelSize.concat([i,this.filters*a]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const s=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,h=this.filters;l=new(n=class extends Vi{apply(p,g){const y=c.apply([h]),x=zs([h]),b=c.apply([h*2]);return hO([y,x,b])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return le(()=>{if(e.length!==3)throw new J(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],a=e[1],o=e[2],s=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ks({ones:()=>zi(i),rate:this.dropout,training:r,count:s,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(L,G,q)=>!G||!G[q]?L:te(G[q],L);let h=c(i,l,0),d=c(i,l,1),p=c(i,l,2),g=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ks({ones:()=>zi(a),rate:this.recurrentDropout,training:r,count:s,dropoutFunc:this.dropoutFunc}));const y=this.recurrentDropoutMask;let x=c(a,y,0),b=c(a,y,1),w=c(a,y,2),S=c(a,y,3);const $=3,[T,k,E,I]=pi(this.kernel.read(),s,$),[_,N,R,O]=this.useBias?pi(this.bias.read(),s):[null,null,null,null];h=this.inputConv(h,T,_,this.padding),d=this.inputConv(d,k,N,this.padding),p=this.inputConv(p,E,R,this.padding),g=this.inputConv(g,I,O,this.padding);const[P,B,U,z]=pi(this.recurrentKernel.read(),s,$);x=this.recurrentConv(x,P),b=this.recurrentConv(b,B),w=this.recurrentConv(w,U),S=this.recurrentConv(S,z);const M=this.recurrentActivation.apply(Ae(h,x)),V=this.recurrentActivation.apply(Ae(d,b)),W=Ae(te(V,o),te(M,this.activation.apply(Ae(p,w)))),H=te(this.recurrentActivation.apply(Ae(g,S)),this.activation.apply(W));return[H,H,W]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=BSe(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),i)}inputConv(e,n,r,i){const a=zl(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?ga(a,r,this.dataFormat):a}recurrentConv(e,n){return zl(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}IO.className="ConvLSTM2DCell";Te(IO);class K6 extends X6{constructor(e){const n=new IO(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}K6.className="ConvLSTM2D";Te(K6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nx extends ct{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Qe(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,a=this.getNoiseShape(r);return Sm(()=>FH(r,this.rate,a,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}nx.className="Dropout";Te(nx);class Y6 extends nx{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}Y6.className="SpatialDropout1D";Te(Y6);class OO extends ct{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Un(this.units,"units"),this.activation=Ts(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Jt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Jt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Nn(e.kernelConstraint),this.biasConstraint=Nn(e.biasConstraint),this.kernelRegularizer=en(e.kernelRegularizer),this.biasRegularizer=en(e.biasRegularizer),this.activityRegularizer=en(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=St(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=St(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Qe(e),i=NH(this.activation.getClassName());let a;return i!=null?a=Pa(r,this.kernel.read(),i,this.bias?this.bias.read():null):(a=Pa(r,this.kernel.read()),this.bias!=null&&(a=ga(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:$s(this.activation),useBias:this.useBias,kernelInitializer:rn(this.kernelInitializer),biasInitializer:rn(this.biasInitializer),kernelRegularizer:Ut(this.kernelRegularizer),biasRegularizer:Ut(this.biasRegularizer),activityRegularizer:Ut(this.activityRegularizer),kernelConstraint:On(this.kernelConstraint),biasConstraint:On(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}OO.className="Dense";Te(OO);class Z6 extends ct{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=St(e);for(const n of e.slice(1))if(n==null)throw new J(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],ws(e,1)]}call(e,n){return le(()=>{this.invokeCallHook(e,n);let r=Qe(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let a=2;a<r.rank;++a)i.push(a);i.push(1),r=yt(r,i)}return vwe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}Z6.className="Flatten";Te(Z6);class Q6 extends ct{constructor(e){super(e),this.supportsMasking=!0,this.activation=Ts(e.activation)}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Qe(e);return this.activation.apply(r)})}getConfig(){const e={activation:$s(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}Q6.className="Activation";Te(Q6);class J6 extends ct{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return le(()=>(e=Qe(e),gwe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}J6.className="RepeatVector";Te(J6);class e5 extends ct{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let a=1,o=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(o===null)o=l;else throw new J("Can only specifiy one unknown dimension.");else a*=c}const s=ws(e);if(o!==null){if(a===0||s%a!==0)throw new J(r);i[o]=s/a}else if(s!==a)throw new J(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Qe(e),i=r.shape,a=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return re(r,a)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}e5.className="Reshape";Te(e5);class t5 extends ct{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=ca(1,e.dims.length+1);if(!At(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new En({ndim:this.dims.length+1})]}computeOutputShape(e){e=St(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return yt(Qe(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}t5.className="Permute";Te(t5);class n5 extends ct{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Qe(e);return Rk(Mv(r,this.maskValue),-1)}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Qe(e),o=Rk(Mv(r,this.maskValue),-1,!0);return te(r,Pe(o,r.dtype))})}}n5.className="Masking";Te(n5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class r5 extends ct{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Nt(e.inputLength))}this.inputDim=e.inputDim,Un(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Un(this.outputDim,"outputDim"),this.embeddingsInitializer=Jt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=en(e.embeddingsRegularizer),this.activityRegularizer=en(e.activityRegularizer),this.embeddingsConstraint=Nn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return le(()=>this.maskZero?(e=Qe(e),Mv(e,vt(e))):null)}computeOutputShape(e){if(e=St(e),this.inputLength==null)return[...e,this.outputDim];const n=Nt(this.inputLength);if(n.length!==e.length-1)throw new J(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const a=n[i],o=e[i+1];if(a!=null&&o!=null&&a!==o)throw new J(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);a==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return le(()=>{this.invokeCallHook(e,n);let r=Qe(e);r.dtype!=="int32"&&(r=Ma(r,"int32"));const i=LH(this.embeddings.read(),re(r,[r.size]));return re(i,St(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:rn(this.embeddingsInitializer),embeddingsRegularizer:Ut(this.embeddingsRegularizer),activityRegularizer:Ut(this.activityRegularizer),embeddingsConstraint:On(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}r5.className="Embedding";Te(r5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class iu extends ct{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new rt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const a=e[e.length-n.length+i],o=n[i];if(a==null||o==null||a<0||o<0)r.push(null);else if(a===1)r.push(o);else if(o===1)r.push(a);else{if(a!==o)throw new J("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(a)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[St(e)]),e=e,e.length<2)throw new J(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const a of e)a!=null&&a[0]!==null&&n.push(a[0]);if(n=xs(n),n.length>1)throw new J(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){const o=e[a]==null?null:e[a].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(a=>a.length);e.indexOf(null)===-1&&xs(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return le(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(a=>a.rank);if(i.indexOf(null)===-1){const a=Cs(i);for(let o of e){const s=o.rank;for(let l=0;l<a-s;++l)o=xm(o,1);r.push(o)}return this.mergeFunction(r)}else{let a=!1;for(const l of e){const c=l.rank;if(c==null){const h=l.shape,d=h[0],p=h.slice(1).concat([d]);let g=re(l,[d].concat(ws(h.slice(1))));g=yt(g,[1,0]),g=re(g,p),r.push(g),a=!0}else if(c>1){const h=ca(1,c).concat([0]);r.push(yt(l,h)),a=!0}else r.push(l)}let o=this.mergeFunction(r);const s=o.rank;if(a){if(s==null){const l=o.shape,c=l.length,h=l[c-1],d=[h].concat(l.slice(0,l.length-1));o=re(yt(re(o,[-1,h]),[1,0]),d)}else if(s>1){const l=[s-1].concat(ca(0,s-1));o=yt(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const a=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,a)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=xs(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return le(()=>{if(n==null)return null;if(!Array.isArray(n))throw new J("`mask` should be an Array");if(!Array.isArray(e))throw new J("`inputs` should be an Array");if(n.length!==e.length)throw new J(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:_r(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=Eo(r,n[i]);return r})}}class i5 extends iu{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ae(n,e[r]);return n})}}i5.className="Add";Te(i5);class a5 extends iu{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=te(n,e[r]);return n})}}a5.className="Multiply";Te(a5);class o5 extends iu{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ae(n,e[r]);return te(1/e.length,n)})}}o5.className="Average";Te(o5);class s5 extends iu{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Bs(n,e[r]);return n})}}s5.className="Maximum";Te(s5);class l5 extends iu{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Yd(n,e[r]);return n})}}l5.className="Minimum";Te(l5);class u5 extends iu{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new J("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const a=e[i].slice();a.splice(this.axis,1);let o=!1;for(const s of r)if(At(s,a)){o=!0;break}o||r.push(a)}if(r.length>1)throw new J("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return le(()=>hO(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new J("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const a of n.slice(1)){if(r[i]==null||a[i]==null){r[i]=null;break}r[i]+=a[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new J("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new J("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new J(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return le(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)n[o]==null?i.push(Pe(zi(e[o]),"bool")):n[o].rank<e[o].rank?i.push(_r(n[o],-1)):i.push(n[o]);const a=Mr(i,this.axis);return fq(a,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}u5.className="Concatenate";Te(u5);function Xh(t,e){for(;t<0;)t+=e;return t}function zSe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new rt("batchDot is not implemented for tensors of 4D or higher rank yet");if(j(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),j(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new rt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const a=n;return le(()=>{let o;if(r>i){o=r-i;const l=[];for(let c=0;c<o;++c)l.push(1);e=re(e,e.shape.concat(l))}else if(i>r){o=i-r;const l=[];for(let c=0;c<o;++c)l.push(1);t=re(t,t.shape.concat(l))}else o=0;let s;if(t.shape.length===2&&e.shape.length===2)a[0]===a[1]?s=qe(te(t,e),a[0]):s=qe(te(yt(t,[1,0]),e),a[1]);else{const l=a[0]!==t.shape.length-1,c=a[1]===e.shape.length-1;s=$t(t,e,l,c)}if(o>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let h=l;h<l+o;++h)c.push(h);s=pm(s,c)}return s.shape.length===1&&(s=_r(s,1)),s})}class c5 extends iu{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){j(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new rt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new J(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new J(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((a,o)=>Xh(a,e[o].shape.length)):i=[Xh(this.axes,n.shape.length),Xh(this.axes,r.shape.length)],this.normalize&&(n=Uv(n,i[0]),r=Uv(r,i[1])),zSe(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Xh(this.axes,e.length),Xh(this.axes,n.length)],r}computeOutputShape(e){j(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new rt("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const a=n.concat(r);return a.length===1&&a.push(1),a}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}c5.className="Dot";Te(c5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class f5 extends ct{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Qe(e);return Sm(()=>Ae(X0(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}f5.className="GaussianNoise";Te(f5);class h5 extends ct{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=Qe(e);return this.rate>0&&this.rate<1?Sm(()=>{const a=Math.sqrt(this.rate/(1-this.rate));return te(r,X0(r.shape,1,a))},()=>r,n.training||!1):r})}}h5.className="GaussianDropout";Te(h5);class d5 extends ct{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Qe(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return le(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Sm(()=>{const a=Qe(e),s=-1.6732632423543772*1.0507009873554805;let l=eu(dm(r),this.rate);l=Ma(l,"float32");const c=((1-this.rate)*(1+this.rate*s**2))**-.5,h=-c*s*this.rate,d=Ae(te(a,l),te(Ae(l,-1),s));return Ae(te(d,c),h)},()=>Qe(e),n.training||!1)}return e})}}d5.className="AlphaDropout";Te(d5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ep(t,e,n,r,i,a=.001){let o;if(t.rank===2)o=yge(t,e,n,r,i,a);else if(t.rank===3)o=bge(t,e,n,r,i,a);else if(t.rank===4)o=wge(t,e,n,r,i,a);else throw new rt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function jSe(t,e,n,r,i=.001){return le(()=>{const a=xI(t,r),o=a.mean,s=a.variance;return[ep(t,o,s,n,e,i),o,s]})}function USe(t,e,n,r,i=.001){return le(()=>{const a=xI(t,r),o=a.mean,s=a.variance,l=[];for(const y of ca(0,t.rank))r.indexOf(y)!==-1?l.push(1):l.push(t.shape[y]);const c=re(o,l),h=re(s,l),d=e==null?null:re(e,l),p=n==null?null:re(n,l);return[ep(t,c,h,p,d,i),o,s]})}function VSe(t,e,n,r,i=.001){return At(r.slice().sort(),ca(0,t.rank-1))?jSe(t,e,n,r,i):USe(t,e,n,r,i)}class p5 extends ct{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Jt(e.betaInitializer||"zeros"),this.gammaInitializer=Jt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Jt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Jt(e.movingVarianceInitializer||"ones"),this.betaConstraint=Nn(e.betaConstraint),this.gammaConstraint=Nn(e.gammaConstraint),this.betaRegularizer=en(e.betaRegularizer),this.gammaRegularizer=en(e.gammaRegularizer)}build(e){e=St(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new J(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new En({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return le(()=>{const r=n.training==null?!1:n.training,i=Qe(e),a=i.shape,o=a.length,s=ca(0,o),l=this.axis>=0?this.axis:this.axis+o;s.splice(l,1);const c=Wl(1,o);c[l]=a[l];const h=s.slice();h.sort();const d=!At(h,ca(0,o).slice(0,o-1)),p=()=>{if(d){const S=re(this.movingMean.read(),c),$=re(this.movingVariance.read(),c),T=this.center?re(this.beta.read(),c):null,k=this.scale?re(this.gamma.read(),c):null;return ep(i,S,$,T,k,this.epsilon)}else return ep(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return p();const[g,y,x]=VSe(i,this.gamma.read(),this.beta.read(),s,this.epsilon),b=(S,$,T)=>{le(()=>{const k=1-T,E=S.read(),I=te(Ke(E,$),k);S.write(Ke(E,I))})};return(()=>{b(this.movingMean,y,this.momentum),b(this.movingVariance,x,this.momentum)})(),g})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:rn(this.betaInitializer),gammaInitializer:rn(this.gammaInitializer),movingMeanInitializer:rn(this.movingMeanInitializer),movingVarianceInitializer:rn(this.movingVarianceInitializer),betaRegularizer:Ut(this.betaRegularizer),gammaRegularizer:Ut(this.gammaRegularizer),betaConstraint:On(this.betaConstraint),gammaConstraint:On(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}p5.className="BatchNormalization";Te(p5);class m5 extends ct{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Jt(e.betaInitializer||"zeros"),this.gammaInitializer=Jt(e.gammaInitializer||"ones"),this.betaRegularizer=en(e.betaRegularizer),this.gammaRegularizer=en(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=St(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=n);for(const a of this.axis)if(a<0||a>=n)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==xs(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(a=>e[a]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=Qe(e),i=r.shape,a=i.length;return le(()=>{let{mean:s,variance:l}=xI(r,this.axis,!0);const c=Wl(1,a);for(const x of this.axis)c[x]=i[x];const h=x=>x!=null&&x.shape.length!==a?re(x,c):x;let d=this.scale?h(this.gamma.read()):null,p=this.center?h(this.beta.read()):null;const g=[],y=[];for(let x=0;x<a;++x)this.axis.indexOf(x)!==-1?(g.push(i[x]),y.push(1)):(g.push(1),y.push(i[x]));return s=aa(s,g),l=aa(l,g),d!=null&&(d=aa(d,y)),p!=null&&(p=aa(p,y)),ep(r,s,l,p,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:rn(this.betaInitializer),gammaInitializer:rn(this.gammaInitializer),betaRegularizer:Ut(this.betaRegularizer),gammaRegularizer:Ut(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}m5.className="LayerNormalization";Te(m5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WSe(t,e,n){return le(()=>{if(t.rank!==4)throw new J(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new J("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=fa()),n!=="channelsLast"&&n!=="channelsFirst")throw new J(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],wI(t,r)})}class g5 extends ct{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?fa():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new J(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new J(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new J(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new En({ndim:4})]}computeOutputShape(e){e=St(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return le(()=>WSe(Qe(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}g5.className="ZeroPadding2D";Te(g5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rx(t,e,n,r,i,a){return le(()=>{gn(i),RH(a),yi(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=fa()),a==null&&(a="max"),t=TO(t,i);let o;const s=r==="same"?"same":"valid";return a==="max"?o=bI(t,e,n,s):o=uI(t,e,n,s),i==="channelsFirst"&&(o=yt(o,[0,3,1,2])),o})}function y5(t,e,n,r,i,a){return le(()=>{gn(i),RH(a),yi(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=fa()),a==null&&(a="max"),t=M6(t,i);let o;const s=r==="same"?"same":"valid";return a==="max"?o=ave(t,e,n,s):o=sge(t,e,n,s),i==="channelsFirst"&&(o=yt(o,[0,4,1,2,3])),o})}class v5 extends ct{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new J(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Un(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new J(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Un(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,yi(this.padding),this.inputSpec=[new En({ndim:3})]}computeOutputShape(e){e=St(e);const n=la(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return le(()=>{this.invokeCallHook(e,n),e=xm(Qe(e),2);const r=this.poolingFunction(Qe(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return pm(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class b5 extends v5{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return gn(a),yi(i),rx(e,n,r,i,a,"max")}}b5.className="MaxPooling1D";Te(b5);class x5 extends v5{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return gn(a),yi(i),rx(e,n,r,i,a,"avg")}}x5.className="AveragePooling1D";Te(x5);class w5 extends ct{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new J(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Un(this.poolSize,"poolSize"),Un(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gn(this.dataFormat),yi(this.padding),this.inputSpec=[new En({ndim:4})]}computeOutputShape(e){e=St(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=la(n,this.poolSize[0],this.padding,this.strides[0]),r=la(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return le(()=>(this.invokeCallHook(e,n),this.poolingFunction(Qe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class S5 extends w5{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return gn(a),yi(i),rx(e,n,r,i,a,"max")}}S5.className="MaxPooling2D";Te(S5);class C5 extends w5{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return gn(a),yi(i),rx(e,n,r,i,a,"avg")}}C5.className="AveragePooling2D";Te(C5);class $5 extends ct{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new J(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Un(this.poolSize,"poolSize"),Un(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gn(this.dataFormat),yi(this.padding),this.inputSpec=[new En({ndim:5})]}computeOutputShape(e){e=St(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=la(n,this.poolSize[0],this.padding,this.strides[0]),r=la(r,this.poolSize[1],this.padding,this.strides[1]),i=la(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return le(()=>(this.invokeCallHook(e,n),this.poolingFunction(Qe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class T5 extends $5{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return gn(a),yi(i),y5(e,n,r,i,a,"max")}}T5.className="MaxPooling3D";Te(T5);class k5 extends $5{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return gn(a),yi(i),y5(e,n,r,i,a,"avg")}}k5.className="AveragePooling3D";Te(k5);class A5 extends ct{constructor(e){super(e),this.inputSpec=[new En({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new rt}}class E5 extends A5{constructor(e){super(e||{})}call(e,n){return le(()=>{const r=Qe(e);return wn(r,1)})}}E5.className="GlobalAveragePooling1D";Te(E5);class I5 extends A5{constructor(e){super(e||{})}call(e,n){return le(()=>{const r=Qe(e);return sa(r,1)})}}I5.className="GlobalMaxPooling1D";Te(I5);class O5 extends ct{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,gn(this.dataFormat),this.inputSpec=[new En({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new rt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class N5 extends O5{call(e,n){return le(()=>{const r=Qe(e);return this.dataFormat==="channelsLast"?wn(r,[1,2]):wn(r,[2,3])})}}N5.className="GlobalAveragePooling2D";Te(N5);class _5 extends O5{call(e,n){return le(()=>{const r=Qe(e);return this.dataFormat==="channelsLast"?sa(r,[1,2]):sa(r,[2,3])})}}_5.className="GlobalMaxPooling2D";Te(_5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class R5 extends ct{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,a=Co(i,r);delete n.layer;const o={layer:a};return Object.assign(o,n),new e(o)}}class D5 extends R5{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=St(e),e.length<3)throw new J(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=St(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return le(()=>(e=Qe(e),W6((o,s)=>[Qe(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}D5.className="TimeDistributed";Te(D5);function GSe(t){ru(fwe,"BidirectionalMergeMode",t)}const qSe="concat";class M5 extends R5{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Co(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=Co(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?qSe:e.mergeMode,GSe(this.mergeMode),e.weights)throw new rt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,a;return this.returnState&&(a=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(a).concat(a.slice()):[r].concat(a).concat(a.slice()):Rr(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const a=V6(e,r,i,this.numConstants);if(e=a.inputs,r=a.initialState,i=a.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const o=[],s=[];if(r!=null){const c=r.length;if(c%2>0)throw new J("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const h=r.map(d=>new En({shape:d.shape}));this.forwardLayer.stateSpec=h.slice(0,c/2),this.backwardLayer.stateSpec=h.slice(c/2),s.push(...h)}if(i!=null)throw new rt("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof Ua;for(const c of o)if(c instanceof Ua!==l)throw new J("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),h=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=h;const p=super.apply(c,n);return this.inputSpec=d,p}else return super.apply(e,n)}call(e,n){return le(()=>{const r=n.initialState;let i,a;if(r==null)i=this.forwardLayer.call(e,n),a=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),a=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(a.slice(1))),i=i[0],a=a[0]),this.returnSequences&&(a=Ul(a,1));let s;return this.mergeMode==="concat"?s=hO([i,a]):this.mergeMode==="sum"?s=Ae(i,a):this.mergeMode==="ave"?s=te(.5,Ae(i,a)):this.mergeMode==="mul"?s=te(i,a):this.mergeMode==null&&(s=[i,a]),this.returnState?this.mergeMode==null?s.concat(o):[s].concat(o):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Al(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Al(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const a=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(a).concat(a):[r].concat(a).concat(a)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Co(n.layer);if(delete n.layer,n.numConstants!=null)throw new rt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}M5.className="Bidirectional";Te(M5);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class P5 extends ct{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return le(()=>(e=Qe(e),e.dtype!=="float32"&&(e=Ma(e,"float32")),Ae(te(e,this.scale),this.offset)))}}P5.className="Rescaling";Te(P5);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:HSe,cropAndResize:XSe}=yo;class L5 extends ct{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,a,o,s,l){return le(()=>{let c,h=!1;const d=n/o,p=r/s,g=(i+n)/o,y=(a+r)/s,x=[d,p,g,y],b=[];e.rank===3?(h=!0,c=Io([e])):c=e;for(let k=0;k<c.shape[0];k++)b.push(x);const w=tq(b,[b.length,4]),S=Zd(0,b.length,1,"int32"),T=XSe(c,w,S,[i,a],"nearest");return Ma(h?Qe(Vl(T)):T,l)})}upsize(e,n,r,i){return le(()=>{const a=HSe(e,[n,r]);return Ma(a,i)})}call(e,n){return le(()=>{const r=Qe(e),i=r.dtype,a=r.shape,o=a[a.length-3],s=a[a.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return s!==this.width&&(c=Math.floor((s-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,s,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=St(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}L5.className="CenterCrop";Te(L5);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function KSe(t,e,n,r){let i=Qe(t);if(i.dtype!=="int32"&&(i=Ma(i,"int32")),e==="int")return i;const a=i.shape;if(i.rank===0&&(i=_r(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=_r(i,-1)),i.rank>2)throw new J(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${a} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),s=i;let l;if(typeof r<"u"&&e==="count"?l=s4(s,r,n,o):l=s4(s,[],n,o),e!=="tfIdf")return l;if(r)return te(l,r);throw new J("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class F5 extends ct{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=St(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return le(()=>{e=Qe(e),e.dtype!=="int32"&&(e=Ma(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new J(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Qe(n.countWeights)}const i=sa(e),a=Rv(e),o=gi(this.numTokens,i).bufferSync().get(0),s=eu(a,0).bufferSync().get(0);if(!(o&&s))throw new J(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return KSe(e,this.outputMode,this.numTokens,r)})}}F5.className="CategoryEncoding";Te(F5);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const YSe=["bilinear","nearest"],X4=new Set(YSe);class B5 extends ct{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(X4.has(e.interpolation))this.interpolation=e.interpolation;else throw new J(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=St(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return le(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return yo.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return yo.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...X4]} are supported`)})}}B5.className="Resizing";Te(B5);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class z5{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}z5.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class j5 extends ct{constructor(e){super(e),this.randomGenerator=new z5(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}j5.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ZSe=["bilinear","nearest"],K4=new Set(ZSe);class U5 extends j5{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new J(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new J(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new J(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(K4.has(r))this.interpolation=r;else throw new J(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=St(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return le(()=>{const r=Qe(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=dm([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*i;a=Math.round(a);const o=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return yo.resizeBilinear(e,o);case"nearest":return yo.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...K4]} are supported`)}})}}U5.className="RandomWidth";Te(U5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VT(t){return new OO(t)}function QSe(t){return new nx(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JSe=he();JSe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Y4;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Y4||(Y4={}));var Z4;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(Z4||(Z4={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Q4;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(Q4||(Q4={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Be(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&j(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eCe=Bq;class ix extends dE{nextDataId(){return ix.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new uG(this,Sa())}write(e,n,r){this.firstUse&&(this.firstUse=!1,he().get("IS_NODE")&&hi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&mp(r[0])){const a=r.map(o=>bs(o));i=this.write(a,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,a){this.data.set(e,{values:n,dtype:i,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return Oo(i,a)}return xpe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Ss(i));return lt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return lt(e.shape,e.dtype,n)}makeOutput(e,n,r){return Sa().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Nr();return e(),{kernelMs:Nr()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Be([e],"where");const n=this.readSync(e.dataId);return eCe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}ix.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V5(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const tCe=t=>{const{x:e}=t.inputs,n=t.backend;Be(e,"abs");let r=new Float32Array(ve(e.shape));const i=n.data.get(e.dataId).values;return r=V5(i),n.makeOutput(r,e.shape,e.dtype)},nCe={kernelName:Db,backendName:"cpu",kernelFunc:tCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yn(t){return(e,n,r,i,a)=>{const o=et(e,n),s=o.length,l=Ve(o),c=ve(o),h=cr(a,c),d=e.length,p=n.length,g=Ve(e),y=Ve(n),x=Kc(e,o),b=Kc(n,o);if(x.length+b.length===0)for(let w=0;w<h.length;++w)h[w]=t(r[w%r.length],i[w%i.length]);else for(let w=0;w<h.length;++w){const S=vf(w,s,l),$=S.slice(-d);x.forEach(I=>$[I]=0);const T=_a($,d,g),k=S.slice(-p);b.forEach(I=>k[I]=0);const E=_a(k,p,y);h[w]=t(r[T],i[E])}return[h,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xr(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(s.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(i.shape,"float32",o)},s}const rCe={kernelName:kE,backendName:"cpu",kernelFunc:Xr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hv(t,e,n="float32"){if(n==="complex64"){const i=Hv(t,e,"float32"),a=Hv(t,e,"float32");return Xr({inputs:{real:i,imag:a},backend:t})}const r=fr(ve(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Va(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const iCe={kernelName:Pp,backendName:"cpu",kernelFunc:Va};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gl(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const aCe={kernelName:YE,backendName:"cpu",kernelFunc:Gl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W5(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=Jl([0],n),[a,o]=yn((s,l)=>s!==l?1:0)(e,[],t,i,"bool");return[o,"bool",a]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function As(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return Va({inputs:{x:i},backend:n});const h=Hv(n,i.shape,i.dtype),d=As({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),p=Xr({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}if(i.dtype==="complex64"){const h=Gl({inputs:{input:i},backend:n}),d=As({inputs:{x:h},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(h),d}if(!hG(i.dtype,a)){const h=Va({inputs:{x:i},backend:n});return{dataId:h.dataId,shape:h.shape,dtype:a}}const o=n.data.get(i.dataId).values,[s,l,c]=W5(o,i.shape,i.dtype,a);return n.makeTensorInfo(s,l,c)}const oCe={kernelName:Cp,backendName:"cpu",kernelFunc:As};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rn(t,e,n,r){return n==null?({inputs:i,backend:a})=>{const{a:o,b:s}=i,l=a;Be([o,s],t);const c=l.data.get(o.dataId).values,h=l.data.get(s.dataId).values,d=o.dtype==="string"?No(c):c,p=o.dtype==="string"?No(h):h,g=r||o.dtype,[y,x]=e(o.shape,s.shape,d,p,g);return l.makeTensorInfo(x,g,y)}:({inputs:i,backend:a})=>{const{a:o,b:s}=i,l=a;if(o.dtype==="complex64"||s.dtype==="complex64"){const c=As({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(c.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,g=l.data.get(d.dataId).values,y=l.data.get(p.dataId).values,x=As({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(x.dataId),w=b.complexTensorInfos.real,S=b.complexTensorInfos.imag,$=l.data.get(w.dataId).values,T=l.data.get(S.dataId).values,[k,E,I]=n(o.shape,s.shape,g,y,$,T),_=l.makeTensorInfo(I,"float32",k),N=l.makeTensorInfo(I,"float32",E),R=Xr({inputs:{real:_,imag:N},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(x),l.disposeIntermediateTensorInfo(_),l.disposeIntermediateTensorInfo(N),R}else{const c=l.data.get(o.dataId).values,h=l.data.get(s.dataId).values,d=r||o.dtype,[p,g]=e(o.shape,s.shape,c,h,d);return l.makeTensorInfo(g,d,p)}}}function NO(t){return(e,n,r,i,a,o)=>{const s=et(e,n),l=ve(s),c=s.length,h=Ve(s),d=cr("float32",l),p=cr("float32",l),g=Kc(e,s),y=Kc(n,s),x=Oo(r,i),b=Oo(a,o),w=e.length,S=Ve(e),$=n.length,T=Ve(n);if(g.length+y.length===0)for(let k=0;k<d.length;k++){const E=k%x.length,I=k%b.length,_=t(x[E*2],x[E*2+1],b[I*2],b[I*2+1]);d[k]=_.real,p[k]=_.imag}else for(let k=0;k<d.length;k++){const E=vf(k,c,h),I=E.slice(-w);g.forEach(P=>I[P]=0);const _=_a(I,w,S),N=E.slice(-$);y.forEach(P=>N[P]=0);const R=_a(N,$,T),O=t(x[_*2],x[_*2+1],b[R*2],b[R*2+1]);d[k]=O.real,p[k]=O.imag}return[d,p,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5=yn((t,e)=>t+e),sCe=NO((t,e,n,r)=>({real:t+n,imag:e+r})),Jc=Rn(bf,G5,sCe),lCe={kernelName:bf,backendName:"cpu",kernelFunc:Jc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _O(t,e,n,r,i){const a=ve(r),o=fr(i,n);for(let s=0;s<t.length;s++){const l=t[s];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(a>0?o[l]+=e[s]:o[l]+=1)}return o}function q5(t,e,n,r=!1){const i=t.shape[0],a=t.shape[1],o=lt([i,n],e.dtype);for(let s=0;s<i;s++)for(let l=0;l<a;l++){const c=t.get(s,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):e.size>0?o.set(o.get(s,c)+e.get(s,l),s,c):o.set(o.get(s,c)+1,s,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5=yn((t,e)=>t&e),uCe=Rn(TE,H5),cCe={kernelName:TE,backendName:"cpu",kernelFunc:uCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qa(t){return(e,n,r)=>{const i=hn(n,e.length);for(let a=0;a<e.length;++a)i[a]=t(e[a],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _t(t,e,n){const r=qa(e);return Vs(t,r,n)}function Vs(t,e,n){return({inputs:r,attrs:i,backend:a})=>{const{x:o}=r;Be(o,t);const s=a,l=s.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=No(l)}else c=l;const h=n||o.dtype,d=e(c,h,i);return s.makeTensorInfo(o.shape,h,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5=qa(t=>Math.ceil(t)),fCe=Vs($p,X5),hCe={kernelName:$p,backendName:"cpu",kernelFunc:fCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5(t,e,n,r){const i=hn(n,ve(e));if(r&&n!=="string"){let a=0;t.forEach(o=>{const s=ve(o.shape);i.set(o.vals,a),a+=s})}else{let a=0;t.forEach(o=>{const s=n==="string"?No(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const h=c*e[1]+a;for(let d=0;d<o.shape[1];++d)i[h+d]=s[l++]}a+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y5=yn((t,e)=>t===e?1:0),Z5=Rn(Kb,Y5,null,"bool"),dCe={kernelName:Kb,backendName:"cpu",kernelFunc:Z5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5=qa(t=>Math.exp(t)),J5=Vs(Np,Q5,"float32"),pCe={kernelName:Np,backendName:"cpu",kernelFunc:J5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e8=qa(t=>Math.expm1(t)),mCe=Vs(_p,e8),gCe={kernelName:_p,backendName:"cpu",kernelFunc:mCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t8=qa(t=>Math.floor(t)),yCe=Vs(Rp,t8),vCe={kernelName:Rp,backendName:"cpu",kernelFunc:yCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n8=yn((t,e)=>Math.floor(t/e)),bCe=Rn(Dp,n8,null,"int32"),xCe={kernelName:Dp,backendName:"cpu",kernelFunc:bCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r8(t,e,n,r,i,a,o,s,l){const c=lt([r,a],n);for(let h=0;h<r;h++){const d=[];let p=0;for(let g=0;g<i;g++){const y=t[h*i+g];p+=y*o[g],d.push(y)}if(p<0||p>=l/a)throw new Error(`Invalid indices: ${d} does not index into ${s}`);for(let g=0;g<a;g++)c.values[h*a+g]=e.get(...e.indexToLoc(p*a+g))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8(t,e,n){const r=lt(n,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),s=o[0],l=o[2],c=e.locToIndex([s,l]);o[2]=e.values[c];const h=t.locToIndex(o);0<=h&&h<t.values.length&&(r.values[i]=t.values[h])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a8=yn((t,e)=>t>e?1:0),wCe=Rn(Jb,a8,null,"bool"),SCe={kernelName:Jb,backendName:"cpu",kernelFunc:wCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o8=yn((t,e)=>t>=e?1:0),CCe=Rn(Mp,o8,null,"bool"),$Ce={kernelName:Mp,backendName:"cpu",kernelFunc:CCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s8=yn((t,e)=>t<e?1:0),TCe=Rn(t0,s8,null,"bool"),kCe={kernelName:t0,backendName:"cpu",kernelFunc:TCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l8=yn((t,e)=>t<=e?1:0),ACe=Rn(n0,l8,null,"bool"),ECe={kernelName:n0,backendName:"cpu",kernelFunc:ACe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8(t,e,n){const r=(e-t)/(n-1),i=fr(n,"float32");i[0]=t;for(let a=1;a<i.length;a++)i[a]=i[a-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c8=qa(t=>Math.log(t)),ICe=Vs(zp,c8),OCe={kernelName:zp,backendName:"cpu",kernelFunc:ICe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8(t,e,n,r){const i=cr(r,ve(n));for(let a=0;a<i.length;++a){const o=a*e;let s=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>s)&&(s=c)}i[a]=s}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h8=yn((t,e)=>Math.max(t,e)),NCe=Rn(Up,h8),_Ce={kernelName:Up,backendName:"cpu",kernelFunc:NCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8=yn((t,e)=>Math.min(t,e)),RCe=Rn(Vp,d8),DCe={kernelName:Vp,backendName:"cpu",kernelFunc:RCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RO=yn((t,e)=>t*e),MCe=NO((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),ax=Rn(Gp,RO,MCe),PCe={kernelName:Gp,backendName:"cpu",kernelFunc:ax};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8(t,e,n){const r=Ps(-1,n);return RO([],e,r,t,n)}function LCe(t){const{inputs:e,backend:n}=t,{x:r}=e;Be(r,"neg");const i=n.data.get(r.dataId).values,[a,o]=p8(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}const FCe={kernelName:d0,backendName:"cpu",kernelFunc:LCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m8=yn((t,e)=>t!==e?1:0),BCe=Rn(p0,m8,null,"bool"),zCe={kernelName:p0,backendName:"cpu",kernelFunc:BCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DO(t,e,n,r,i){const a=e.length,o=ve(e),s=Ve(e),l=Ve(i),c=cr(n,ve(i));for(let h=0;h<o;++h){const d=vf(h,a,s),p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[r[y]];const g=_a(p,a,l);c[g]=t[h]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fr(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:a}=n;Be(i,"transpose");const o=i.shape.length,s=new Array(o);for(let d=0;d<s.length;d++)s[d]=i.shape[a[d]];const l=r.data.get(i.dataId).values,c=DO(l,i.shape,i.dtype,a,s);return{dataId:r.write(c,s,i.dtype),shape:s,dtype:i.dtype}}const jCe={kernelName:pc,backendName:"cpu",kernelFunc:Fr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8(t,e,n,r){const[i,a]=Wn(t,r),o=Zr(e,"int32"),s=fr(ve(i),o),l=ve(a);for(let c=0;c<s.length;++c){const h=c*l;let d=1;for(let p=0;p<l;++p)d*=n[h+p];s[c]=d}return{outVals:s,outShape:i,outDtype:o}}function UCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Be(i,"prod");const s=i.shape.length,l=ut(a,i.shape),c=on(l,s);let h=l,d=i;const p=[];c!=null&&(d=Fr({inputs:{x:i},backend:n,attrs:{perm:c}}),p.push(d),h=mn(h.length,s));const g=n.data.get(d.dataId).values,{outVals:y,outShape:x,outDtype:b}=g8(d.shape,d.dtype,g,h);let w=x;return o&&(w=Sn(x,l)),p.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.makeTensorInfo(w,b,y)}const VCe={kernelName:x0,backendName:"cpu",kernelFunc:UCe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WCe(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const a=vf(i,e.length,Ve(e)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${n})`)}})}function GCe(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function qCe(t,e,n,r){const i=[];let a=0;const o=e.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);GCe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const h=e[c+1];for(let d=1;d<l+1;++d)s[c].push(d*h)}for(let c=0;c<t.length;++c){let h=t[c],d=t[c]+1;for(let p=0;p<n.length;++p){const g=n[p],y=p+e.length-1;if(y>=0){const x=s[y],b=x[x.length-1]-g[h];for(let w=h;w<d;++w)s[y].push(g[w+1]+b)}h=g[h],d=g[d]}d!==h&&(i.push([h,d]),a+=d-h)}return{outSplits:s,valueSlices:i,numValues:a}}function HCe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=hn("int32",r);e.push(i),t[n].forEach((a,o)=>i[o]=a)}return e}function J4(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function XCe(t,e,n,r,i,a){const o=J4(e,2)[1],s=J4(a,2)[1];let l=0;for(const c of n)for(let h=c[0];h<c[1];++h){for(let d=0;d<r;++d)i[l*s+d]=t[h*o+d];++l}}function KCe(t,e,n,r,i){const a=e.slice();a[0]=i;const o=hn(n,ve(a)),s=t.length,l=s===0?0:s/e[0];return XCe(t,e,r,l,o,a),[o,a]}function y8(t,e,n,r,i,a,o,s){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(WCe(a,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:h,valueSlices:d,numValues:p}=qCe(a,o,t,c),g=HCe(h),y=KCe(n,r,i,d,p);return[g,y[0],y[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ej=2147483647;function v8(t,e,n,r,i,a,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const s=e.length===0,l=i.length===0,c=o.length===0,h=[];s||h.push(e[0]),l||h.push(i[0]),c||h.push(o[0]);for(let b=1;b<h.length;++b)if(h[b]!==h[b-1])throw new Error("starts, limits, and deltas must have the same shape");const d=h.length===0?1:h[0],p=hn("int32",d+1);p[0]=0;for(let b=0;b<d;++b){const w=s?t[0]:t[b],S=l?r[0]:r[b],$=c?a[0]:a[b];if($===0)throw new Error("Requires delta != 0");let T;if($>0&&S<w||$<0&&S>w)T=0;else if(T=Math.ceil(Math.abs((S-w)/$)),T>ej)throw new Error(`Requires ((limit - start) / delta) <= ${ej}`);p[b+1]=p[b]+T}const g=p[d],y=hn(n,g);let x=0;for(let b=0;b<d;++b){const w=p[b+1]-p[b];let S=s?t[0]:t[b];const $=c?a[0]:a[b];for(let T=0;T<w;++T)y[x++]=S,S+=$}return[p,y]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Oi=na;class Xv{constructor(e,n,r,i,a,o,s,l,c,h){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=a,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=iH(h),this.raggedRank=aH(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Oi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Oi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Oi.VALUE_ROWIDS:return Xv.getMaxWidthValueRowID(n);case Oi.ROW_SPLITS:return Xv.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Oi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const a=e[i+1]-e[i];a>r&&(r=a)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],a=0;for(let o=1;o<n;++o){const s=e[o];s!==i&&(i=s,a=Math.max(o-r,a),r=o)}return Math.max(n-r,a)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return nj(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;oH(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=rH(this.raggedRank,i,n);o[0]<0&&(o[0]=e);for(let s=1;s<=this.raggedRank;++s)o[s]<0&&(o[s]=this.getMaxWidth(s));return o}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),a=[];let o=0;for(let s=0;s<i;++s,o+=n)a.push(o);for(let s=i;s<e;++s)a.push(-1);return j(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,n,r,i){const a=e.length,o=[];for(let s=0;s<a-1;++s){const l=e[s+1]-e[s];let c=Math.min(i,l),h=n[s];h===-1&&(c=0);for(let d=0;d<c;++d)o.push(h),h+=r;for(let d=0;d<l-c;++d)o.push(-1)}if(a>0&&o.length!==e[a-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,i){const a=e.length,o=[];if(a===0)return[];let s=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let h=1;h<a;++h){const d=e[h];if(d===l)c>=0&&(++s,s<i?c+=r:c=-1);else{if(s=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,i){const a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Oi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,n,r,i);case Oi.ROW_SPLITS:if(a.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(a,n,r,i);default:throw new Error(`Unsupported partition type: ${Oi[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Oi.FIRST_DIM_SIZE:return e[0];case Oi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Oi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Oi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const a=nj(r,!1),o=hn(this.valuesDType,ve(a));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,o,a)}return[a,o]}setOutput(e,n,r,i){if(r.length===0)return;const a=this.values,o=r;let s=i.slice();s=s.slice(e+1);const l=ve(s),c=n.length;let h=this.defaultValue;if(h.length!==l&&h.length!==1){const y=this.defaultValueShape;le(()=>{const x=re(h,y);h=ud(x,s).dataSync()})}let d=0,p=0,g=0;for(let y=0;y<=c;++y){let x=y<c?n[y]:-1;if(x===g){++g;continue}if(p<g){const b=a.subarray(d*l),w=o.subarray(p*l),S=(g-p)*l;tj(w,b,S)}if(y>=c){const b=r.length;x=Math.floor(b/l)}if(x>g)if(this.defaultValue.length===1)o.subarray(g*l,x*l).fill(this.defaultValue[0]),g=x;else for(;x>g;){const b=o.slice(g*l);tj(b,h,l),++g}x<0?(d=y+1,p=g):(d=y,p=g,g=p+1)}}}function tj(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function nj(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function b8(t,e,n,r,i,a,o,s,l,c){return new Xv(t,e,n,r,i,a,o,s,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8(t,e,n,r){const i=t===e,a=t<e&&n<0,o=e<t&&n>1;if(i||a||o)return fr(0,r);const s=Math.abs(Math.ceil((e-t)/n)),l=fr(s,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w8=qa(t=>1/Math.sqrt(t)),YCe=Vs(Zp,w8),ZCe={kernelName:Zp,backendName:"cpu",kernelFunc:YCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cl(t,e,n,r,i,a,o,s,l,c){const h=[r/i,i],d=t.values,p=e.values;if(r===0)return lt(n,e.dtype);const g=l instanceof Qn?l:lt(h,e.dtype);typeof l=="string"||typeof l=="number"?g.values.fill(l):typeof l=="boolean"&&g.values.fill(+l);for(let y=0;y<a;y++){const x=[];let b=0;for(let w=0;w<o;w++){const S=d[y*o+w];x.push(S),b+=S*s[w]}if(b<0||b>=r/i)throw new Error(`Invalid indices: ${x} does not index into ${n}`);for(let w=0;w<i;w++)c?g.values[b*i+w]+=p[y*i+w]:g.values[b*i+w]=e.rank===0?p[0]:p[y*i+w]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QCe=qa(t=>1/(1+Math.exp(-t))),S8=_t(nm,t=>1/(1+Math.exp(-t))),JCe={kernelName:nm,backendName:"cpu",kernelFunc:S8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8(t,e,n,r,i){const a=jI(r,e,n),o=ve(n),s=Ve(r);if(a){const d=UI(e,s);return i==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=i==="string"?No(t):t,c=lt(r,i,l),h=lt(n,i);for(let d=0;d<h.size;++d){const p=h.indexToLoc(d),g=p.map((y,x)=>y+e[x]);h.set(c.get(...g),...p)}return i==="string"?kH(h.values):h.values}function ql(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:o}=r;Be(i,"slice");const[s,l]=V0(i,a,o);BI(i,s,l);const c=n.data.get(i.dataId).values,h=C8(c,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,h)}const e$e={kernelName:k0,backendName:"cpu",kernelFunc:ql};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8(t,e,n,r,i,a,o){const s=e[0],l=a[0],c=new Array(l),h=new Array(s),d=e[1];if(l===0){if(s!==0)throw new Error(dH(s));const b=hn(n,0),w=hn(i,0);return[b,[0,d],w,c,h]}let p=!0,g=0;const y=new Array(l).fill(0);for(let b=0;b<s;++b){const w=t[b*d];if(w<0)throw new Error(pH(b,w));if(w>=l)throw new Error(mH(b,w,l));++y[w],p=p&&w>=g,g=w}let x=!0;for(let b=0;b<l;++b){const w=y[b]===0;c[b]=w,x=x&&!w,y[b]=Math.max(y[b],1),b>0&&(y[b]+=y[b-1])}if(x&&p){const b=t,w=r;for(let S=0;S<s;++S)h[S]=S;return[b,[s,d],w,c,h]}else{const b=y[l-1],w=hn(n,b*d),S=hn(i,b),$=new Array(l).fill(0);for(let T=0;T<s;++T){const k=t[T*d],E=$[k],I=(k===0?0:y[k-1])+E;$[k]++;for(let _=0;_<d;++_)w[I*d+_]=t[T*d+_];S[I]=r[T],h[T]=I}for(let T=0;T<l;++T)if($[T]===0){const E=T===0?0:y[T-1];w[E*d+0]=T;for(let I=1;I<d;++I)w[E*d+I]=0;S[E]=o}return[w,[b,d],S,c,h]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8(t,e,n,r,i){const a=ve(r),o=e[0],s=i.length,l=[];let c=1,h=-1;for(let b=0;b<s;++b){const w=i[b];if(w===-1){if(h!==-1)throw new Error(gH(h,b));h=b,l.push(1)}else{if(w<0)throw new Error(yH(b,w));c*=w,l.push(w)}}if(h!==-1){if(c<=0)throw new Error(vH());const b=Math.trunc(a/c);if(c*b!==a)throw new Error(bH(r,l));l[h]=b}if(ve(l)!==a)throw new Error(xH(r,l));const p=r.length,g=[];if(p>0){g[p-1]=1;for(let b=p-2;b>=0;--b)g[b]=g[b+1]*r[b+1]}const y=[];if(s>0){y[s-1]=1;for(let b=s-2;b>=0;--b)y[b]=y[b+1]*l[b+1]}const x=hn(n,o*s);for(let b=0;b<o;++b){let w=0;for(let S=0;S<p;++S)w+=t[b*p+S]*g[S];for(let S=0;S<s;++S)x[b*s+S]=Math.trunc(w/y[S]),w%=y[S]}return[x,[o,s],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MO(t,e,n,r,i,a=!1,o=0){const s=r.length,l=[e[0],t.length/e[0]],c=l[1],d=s>0?i[s-1]+1:0;if(d<0)throw new Error(Fk());const p=e.slice();p[0]=d;const g=p.reduce(($,T)=>$*T,1),y=hn(n,g);if(s===0)return d>0&&y.fill(o),[y,p];if(d<=0)throw new Error(Fk());let x=0,b=1,w=0,S=i[x];for(;;){let $=0;if(b<s){if($=i[b],S===$){++b;continue}if(S>=$)throw new Error(wH())}if(S<0||S>=d)throw new Error(SH(S,d));S>w&&y.fill(o,w*c,S*c);for(let T=x;T<b;++T){const k=r[T];if(k<0||k>=l[0])throw new Error(CH(T,r[T],l[0]));for(let E=0;E<c;E++)y[S*c+E]+=t[k*c+E]}if(a)for(let T=0;T<c;T++)y[S*c+T]/=b-x;if(x=b,++b,w=S+1,S=$,b>s)break}return w<d&&y.fill(o,w*c,d*c),[y,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t$e=qa(t=>Math.sqrt(t)),n$e=_t(im,t=>Math.sqrt(t)),r$e={kernelName:im,backendName:"cpu",kernelFunc:n$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k8=yn((t,e)=>{const n=t-e;return n*n}),i$e=Rn(am,k8),a$e={kernelName:am,backendName:"cpu",kernelFunc:i$e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A8=qa((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),o$e=Vs(eI,A8),s$e={kernelName:eI,backendName:"cpu",kernelFunc:o$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8(t,e,n,r){const i=lt(t,e.dtype);for(let a=0;a<i.size;a++){const o=i.indexToLoc(a),s=new Array(o.length);for(let l=0;l<s.length;l++)s[l]=o[l]*n[l]+r[l];i.set(e.get(...s),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l$e{constructor(e,n,r,i,a,o){this.separator=bs(e),this.nGramWidths=n,this.leftPad=bs(r),this.rightPad=bs(i),this.padWidth=a,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,a,o){for(let s=0;s<a;++s){const l=this.getPadWidth(o),c=Math.max(0,l-s),h=Math.max(0,l-(a-(s+1))),d=o-(c+h),p=n+(c>0?0:s-l);let g=0;g+=c*this.leftPad.length;for(let S=0;S<d;++S)g+=e[p+S].length;g+=h*this.rightPad.length;const y=c+h+d-1;g+=y*this.separator.length,r[i+s]=new Uint8Array(g);const x=r[i+s];let b=0;const w=S=>S.forEach($=>x[b++]=$);for(let S=0;S<c;++S)w(this.leftPad),w(this.separator);for(let S=0;S<d-1;++S)w(e[p+S]),w(this.separator);if(d>0){w(e[p+d-1]);for(let S=0;S<h;++S)w(this.separator),w(this.rightPad)}else{for(let S=0;S<h-1;++S)w(this.rightPad),w(this.separator);w(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let h=n[c]>=l;if(h=h&&n[c]<=r,!h)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const a=i-1,o=hn("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=a;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=a;++l){const c=n[l]-n[l-1];let h=0;this.nGramWidths.forEach(d=>{h+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&h===0&&(h=1),o[l]=o[l-1]+h}const s=new Array(o[a]);for(let l=0;l<a;++l){const c=n[l];let h=o[l];if(this.nGramWidths.forEach(d=>{const p=n[l+1]-n[l],g=this.getNumNGrams(p,d);this.createNGrams(e,c,s,h,g,d),h+=g}),this.preserveShort&&h===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const p=d+2*this.padWidth;this.createNGrams(e,c,s,h,1,p)}}return[s,o]}}function I8(t,e,n,r,i,a,o,s){return new l$e(n,r,i,a,o,s).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u$e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let a=0;a<t.length;++a)r.push(t.subarray(a,a+1));return}if(e.length===1){const a=e[0];let o=t.indexOf(a);for(;o!==-1;){const s=t.subarray(0,o);(!n||s.length!==0)&&r.push(s),t=t.subarray(o+1),o=t.indexOf(a)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let a=0;a<t.length+1;a++)if(a===t.length||e.indexOf(t[a])!==-1){const o=t.subarray(i,a);(!n||o.length!==0)&&r.push(o),i=a+1}}function O8(t,e,n){const r=t.length,i=[];let a=0,o=0;const s=new Array(r);for(let p=0;p<r;++p){const g=i.length;u$e(t[p],e,n,i);const y=i.length-g;s[p]=y,a+=y,o=Math.max(o,y)}const l=hn("int32",a*2),c=new Array(a),h=[r,o];let d=0;for(let p=0;p<r;++p)for(let g=0;g<s[p];++g)l[d*2]=p,l[d*2+1]=g,c[d]=i[d],++d;return[l,c,h]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8(t,e){const n=hn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=Bpe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _8=yn((t,e)=>t-e),c$e=NO((t,e,n,r)=>({real:t-n,imag:e-r})),PO=Rn(om,_8,c$e),f$e={kernelName:om,backendName:"cpu",kernelFunc:PO};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=lt(n,t.dtype);for(let i=0;i<r.values.length;++i){const a=r.indexToLoc(i),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=a[l]%t.shape[l];const s=t.locToIndex(o);r.values[i]=t.values[s]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const td=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function D8(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const s=r-n+1,l=e-n+1,c=Math.log(s),h=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*h*(s-h)/s)*Math.sign(l-s/2),p=Math.max(n,Math.floor(e-l*h/s+d)),g=Math.min(r,Math.floor(e+(s-l)*h/s+d));D8(t,e,p,g)}const i=t[e];let a=n,o=r;for(nc(t,n,e),td(t[r],i)>0&&nc(t,n,r);a<o;){for(nc(t,a,o),a++,o--;td(t[a],i)<0;)a=a+1;for(;td(t[o],i)>0;)o=o-1}td(t[n],i)===0?nc(t,n,o):(o=o+1,nc(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function M8(t,e,n,r,i){const a=e[e.length-1],[o,s]=[t.length/a,a],l=cr(n,o*r),c=cr("int32",o*r);for(let d=0;d<o;d++){const p=d*s,g=t.subarray(p,p+s);let y=new Array(g.length);g.forEach((S,$)=>y[$]={value:S,index:$}),r<y.length&&(D8(y,r),y=y.slice(0,r)),i&&y.sort(td);const x=d*r,b=l.subarray(x,x+r),w=c.subarray(x,x+r);for(let S=0;S<r;S++)b[S]=y[S].value,w[S]=y[S].index}const h=e.slice();return h[h.length-1]=r,[lt(h,n,l),lt(h,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8(t,e,n,r){const i=ut(e,n)[0],a=[1,n[0],1];for(let y=0;y<i;y++)a[0]*=n[y];a[1]=n[i];for(let y=i+1;y<n.length;y++)a[2]*=n[y];const o=new Map,s=new Int32Array(n[i]),l=new Qn(a,r,t),c=[],h=a[0]===1&&a[2]===1;for(let y=0;y<n[i];y++){let x;if(h)x=t[y].toString();else{const w=[];for(let S=0;S<a[0];S++)for(let $=0;$<a[2];$++)w.push(l.get(S,y,$));x=w.join(",")}const b=o.get(x);if(b!=null)s[y]=b;else{const w=o.size;o.set(x,w),s[y]=w,c.push(y)}}const d=a.slice();d[1]=o.size;const p=new Qn(d,r);c.forEach((y,x)=>{for(let b=0;b<a[0];b++)for(let w=0;w<a[2];w++)p.set(l.get(b,y,w),b,x,w)});const g=n.slice();return g[i]=d[1],{outputValues:p.values,outputShape:g,indices:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h$e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:G5,bincountImpl:_O,bincountReduceImpl:q5,bitwiseAndImpl:H5,castImpl:W5,ceilImpl:X5,concatImpl:K5,equalImpl:Y5,expImpl:Q5,expm1Impl:e8,floorDivImpl:n8,floorImpl:t8,gatherNdImpl:r8,gatherV2Impl:i8,greaterEqualImpl:o8,greaterImpl:a8,lessEqualImpl:l8,lessImpl:s8,linSpaceImpl:u8,logImpl:c8,maxImpl:f8,maximumImpl:h8,minimumImpl:d8,multiplyImpl:RO,negImpl:p8,notEqualImpl:m8,prodImpl:g8,raggedGatherImpl:y8,raggedRangeImpl:v8,raggedTensorToTensorImpl:b8,rangeImpl:x8,rsqrtImpl:w8,scatterImpl:Cl,sigmoidImpl:QCe,simpleAbsImpl:V5,sliceImpl:C8,sparseFillEmptyRowsImpl:$8,sparseReshapeImpl:T8,sparseSegmentReductionImpl:MO,sqrtImpl:t$e,squaredDifferenceImpl:k8,staticRegexReplaceImpl:A8,stridedSliceImpl:E8,stringNGramsImpl:I8,stringSplitImpl:O8,stringToHashBucketFastImpl:N8,subImpl:_8,tileImpl:R8,topKImpl:M8,transposeImpl:DO,uniqueImpl:P8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */nq("cpu",()=>new ix,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L8=_t(Ip,t=>t>=0?t:Math.exp(t)-1),d$e={kernelName:Ip,backendName:"cpu",kernelFunc:L8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:a}=r;Be([i],"leakyRelu");const o=ve(i.shape),s=n.data.get(i.dataId).values,l=cr("float32",o);for(let c=0;c<s.length;c++)l[c]=s[c]<0?a*s[c]:s[c];return n.makeTensorInfo(i.shape,"float32",l)}const p$e={kernelName:e0,backendName:"cpu",kernelFunc:F8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m$e=yn((t,e)=>t<0?e*t:t);function B8(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;Be([r,i],"prelu");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[s,l]=m$e(r.shape,i.shape,a,o,"float32");return n.makeTensorInfo(l,"float32",s)}const g$e={kernelName:b0,backendName:"cpu",kernelFunc:B8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z8=_t(Xp,t=>Math.max(0,t)),y$e={kernelName:Xp,backendName:"cpu",kernelFunc:z8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j8=_t(Kp,t=>Math.min(Math.max(0,t),6)),v$e={kernelName:Kp,backendName:"cpu",kernelFunc:j8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kv(t,e,n,r,i){if(n==="linear")return Va({inputs:{x:e},backend:t});if(n==="relu")return z8({inputs:{x:e},backend:t});if(n==="elu")return L8({inputs:{x:e},backend:t});if(n==="relu6")return j8({inputs:{x:e},backend:t});if(n==="prelu")return B8({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return F8({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return S8({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ht(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,o=ve(i.shape),s=fG(a,o),l=ve(s);j(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){const h=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;h.shape=s,d.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}const b$e={kernelName:w0,backendName:"cpu",kernelFunc:Ht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U8(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a}=e,{transposeA:o,transposeB:s}=r;Be([i,a],"matMul");const l=i.shape.length,c=a.shape.length,h=o?i.shape[l-2]:i.shape[l-1],d=s?a.shape[c-1]:a.shape[c-2],p=o?i.shape[l-1]:i.shape[l-2],g=s?a.shape[c-2]:a.shape[c-1],y=i.shape.slice(0,-2),x=a.shape.slice(0,-2),b=ve(y),w=ve(x),$=et(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([p,g]);j(h===d,()=>`Error in matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${o} and transposeB=${s} must match.`);const T=o?[b,h,p]:[b,p,h],k=s?[w,g,d]:[w,d,g],E=Ht({inputs:{x:i},backend:n,attrs:{shape:T}}),I=Ht({inputs:{x:a},backend:n,attrs:{shape:k}}),_=o?E.shape[1]:E.shape[2],N=o?E.shape[2]:E.shape[1],R=s?I.shape[1]:I.shape[2],O=Math.max(b,w),P=n.data.get(E.dataId).values,B=n.data.get(I.dataId).values,U=Ve(E.shape),z=Ve(I.shape),[M,V,W]=o?[U[0],1,U[1]]:[U[0],U[1],1],[H,L,G]=s?[1,z[1],z[0]]:[z[1],1,z[0]],q=N*R,K=lt([O,N,R],E.dtype),oe=K.values,pe=n.blockSize;for(let ge=0;ge<O;ge++){const Re=ge%b,Ee=ge%w;for(let ye=0;ye<N;ye+=pe){const Ie=Math.min(ye+pe,N);for(let Oe=0;Oe<R;Oe+=pe){const be=Math.min(Oe+pe,R);for(let Ge=0;Ge<_;Ge+=pe){const Ue=Math.min(Ge+pe,_);for(let xe=ye;xe<Ie;xe++)for(let ke=Oe;ke<be;ke++){let Ne=0;for(let Le=Ge;Le<Ue;Le++){const st=P[Re*M+xe*V+Le*W],gt=B[Le*H+ke*L+Ee*G];Ne+=st*gt}oe[ge*q+(xe*R+ke)]+=Ne}}}}}return n.disposeIntermediateTensorInfo(E),n.disposeIntermediateTensorInfo(I),n.makeTensorInfo($,K.dtype,K.values)}const x$e={kernelName:Bb,backendName:"cpu",kernelFunc:U8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$e(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:c,activation:h,leakyreluAlpha:d}=r;let p,g,y;const x=[];p=U8({inputs:{a:i,b:a},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(g=Jc({inputs:{a:p,b:o},backend:n}),x.push(p),p=g),h&&(y=Kv(n,p,h,s,d),x.push(p),p=y);for(const w of x)n.disposeIntermediateTensorInfo(w);return p}const S$e={kernelName:Iv,backendName:"cpu",kernelFunc:w$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C$e=_t(gp,t=>Math.acos(t)),$$e={kernelName:gp,backendName:"cpu",kernelFunc:C$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T$e=_t(yp,t=>Math.acosh(t)),k$e={kernelName:yp,backendName:"cpu",kernelFunc:T$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A$e(t){const{inputs:e,backend:n}=t,r=e;Be(e,"addN");const i=r.map(s=>n.data.get(s.dataId).values),a=lt(r[0].shape,r[0].dtype),o=a.values;for(let s=0;s<r.length;s++){const l=i[s];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}const E$e={kernelName:bE,backendName:"cpu",kernelFunc:A$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Be(i,"all");const s=ut(a,i.shape);let l=s;const c=on(l,i.shape.length);let h=i;c!=null&&(h=Fr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=mn(l.length,i.shape.length)),tr("all",l,h.shape.length);const[d,p]=Wn(h.shape,l),g=ve(p),y=fr(ve(d),h.dtype),x=n.data.get(h.dataId).values;for(let w=0;w<y.length;++w){const S=w*g;let $=x[S];for(let T=0;T<g;++T){const k=x[S+T];$=$&&k}y[w]=$}c!=null&&n.disposeIntermediateTensorInfo(h);const b=n.makeTensorInfo(d,h.dtype,y);if(o){const w=Sn(d,s),S=Ht({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const O$e={kernelName:xE,backendName:"cpu",kernelFunc:I$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Be(i,"any");const s=ut(a,i.shape);let l=s;const c=on(l,i.shape.length);let h=i;c!=null&&(h=Fr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=mn(l.length,i.shape.length)),tr("any",l,h.shape.length);const[d,p]=Wn(h.shape,l),g=ve(p),y=fr(ve(d),h.dtype),x=n.data.get(h.dataId).values;for(let w=0;w<y.length;++w){const S=w*g;let $=x[S];for(let T=0;T<g;++T){const k=x[S+T];$=$||k}y[w]=$}c!=null&&n.disposeIntermediateTensorInfo(h);const b=n.makeTensorInfo(d,h.dtype,y);if(o){const w=Sn(d,s),S=Ht({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const _$e={kernelName:wE,backendName:"cpu",kernelFunc:N$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;Be(i,"argMax");let o=ut(a,i.shape);const s=on(o,i.shape.length);let l=i;const c=[];s!=null&&(l=Fr({inputs:{x:i},backend:n,attrs:{perm:s}}),c.push(l),o=mn(o.length,l.shape.length)),o=[o[0]],tr("argMax",o,l.shape.length);const[h,d]=Wn(l.shape,o),p=ve(h),g=fr(p,"int32"),y=ve(d),x=n.data.get(l.dataId).values;for(let b=0;b<g.length;++b){const w=b*y;let S=x[w],$=0;for(let T=0;T<y;++T){const k=x[w+T];k>S&&(S=k,$=T)}g[b]=$}return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(h,"int32",g)}const D$e={kernelName:Mb,backendName:"cpu",kernelFunc:R$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;Be(i,"argMin");let o=ut(a,i.shape);const s=on(o,i.shape.length);let l=i;const c=[];s!=null&&(l=Fr({inputs:{x:i},backend:n,attrs:{perm:s}}),c.push(l),o=mn(o.length,l.shape.length)),o=[o[0]],tr("argMin",o,l.shape.length);const[h,d]=Wn(l.shape,o),p=ve(h),g=fr(p,"int32"),y=ve(d),x=n.data.get(l.dataId).values;for(let b=0;b<g.length;++b){const w=b*y;let S=x[w],$=0;for(let T=0;T<y;++T){const k=x[w+T];k<S&&(S=k,$=T)}g[b]=$}return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(h,"int32",g)}const P$e={kernelName:Pb,backendName:"cpu",kernelFunc:M$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L$e=_t(vp,t=>Math.asin(t)),F$e={kernelName:vp,backendName:"cpu",kernelFunc:L$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B$e=_t(bp,t=>Math.asinh(t)),z$e={kernelName:bp,backendName:"cpu",kernelFunc:B$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j$e=_t(xp,t=>Math.atan(t)),U$e={kernelName:xp,backendName:"cpu",kernelFunc:j$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V$e=yn((t,e)=>Math.atan2(t,e)),W$e=Rn(Sp,V$e),G$e={kernelName:Sp,backendName:"cpu",kernelFunc:W$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q$e=_t(wp,t=>Math.atanh(t)),H$e={kernelName:wp,backendName:"cpu",kernelFunc:q$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LO(t,e,n,r,i,a){const o=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,h=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,g=i.padInfo.left,y=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=lt(i.outShape,n),b=x.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3],S=i.outShape[2]*i.outShape[3],$=i.outShape[3];for(let T=0;T<i.batchSize;++T){const k=T*w,E=T*r[0];for(let I=0;I<i.inChannels;++I)for(let _=0;_<i.outHeight;++_){const N=_*o-p,R=Math.max(0,N),O=Math.min(i.inHeight,h+N),P=k+_*S;for(let B=0;B<i.outWidth;++B){const U=B*s-g,z=Math.max(0,U),M=Math.min(i.inWidth,d+U);let V=y,W=0,H=0;for(let G=R;G<O;G+=l){const q=E+G*r[1];for(let K=z;K<M;K+=c){const oe=q+K*r[2],pe=t[oe+I];a==="max"&&pe>V?V=pe:a==="avg"&&(W+=pe,H++)}if(isNaN(V))break}const L=P+B*$+I;b[L]=a==="avg"?W/H:V}}}return x}function V8(t,e,n,r,i=!1,a=!1){const o=lt(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,h=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=r.padInfo.top,y=r.padInfo.left,x=lt(e,n,t);for(let b=0;b<r.batchSize;++b)for(let w=0;w<r.inChannels;++w)for(let S=0;S<r.outHeight;++S){const $=S*s-g;let T=$;for(;T<0;)T+=c;const k=Math.min(r.inHeight,d+$);for(let E=0;E<r.outWidth;++E){const I=E*l-y;let _=I;for(;_<0;)_+=h;const N=Math.min(r.inWidth,p+I);let R=Number.NEGATIVE_INFINITY,O=-1;for(let P=T;P<k;P+=c){const B=P-$;for(let U=_;U<N;U+=h){const z=U-I,M=x.get(b,P,U,w);M>R&&(R=M,i?O=a?((b*r.inHeight+P)*r.inWidth+U)*r.inChannels+w:(P*r.inWidth+U)*r.inChannels+w:O=B*p+z)}}o.set(O,b,S,E,w)}}return o}function W8(t,e,n,r,i,a){const o=i.strideDepth,s=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,h=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,g=i.effectiveFilterHeight,y=i.effectiveFilterWidth,x=i.padInfo.front,b=i.padInfo.top,w=i.padInfo.left,S=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,$=lt(i.outShape,n),T=$.values,k=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],E=i.outShape[2]*i.outShape[3]*i.outShape[4],I=i.outShape[3]*i.outShape[4],_=i.outShape[4];for(let N=0;N<i.batchSize;++N){const R=N*k,O=N*r[0];for(let P=0;P<i.inChannels;++P)for(let B=0;B<i.outDepth;++B){const U=B*o-x;let z=U;for(;z<0;)z+=c;const M=Math.min(i.inDepth,p+U),V=R+B*E;for(let W=0;W<i.outHeight;++W){const H=W*s-b;let L=H;for(;L<0;)L+=h;const G=Math.min(i.inHeight,g+H),q=V+W*I;for(let K=0;K<i.outWidth;++K){const oe=K*l-w;let pe=oe;for(;pe<0;)pe+=d;const ge=Math.min(i.inWidth,y+oe),Re=q+K*_;let Ee=S,ye=0,Ie=0;for(let be=z;be<M;be+=c){const Ge=O+be*r[1];for(let Ue=L;Ue<G;Ue+=h){const xe=Ge+Ue*r[2];for(let ke=pe;ke<ge;ke+=d){const Ne=xe+ke*r[3],Le=t[Ne+P];if(a==="max"&&Le>Ee?Ee=Le:a==="avg"&&(ye+=Le,Ie++),isNaN(Ee))break}if(isNaN(Ee))break}if(isNaN(Ee))break}const Oe=Re+P;T[Oe]=a==="avg"?ye/Math.max(Ie,1):Ee}}}}return $}function X$e(t,e){const n=lt(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;for(let x=0;x<e.batchSize;++x)for(let b=0;b<e.inChannels;++b)for(let w=0;w<e.outDepth;++w){const S=w*r-p;let $=S;for(;$<0;)$+=o;const T=Math.min(e.inDepth,c+S);for(let k=0;k<e.outHeight;++k){const E=k*i-g;let I=E;for(;I<0;)I+=s;const _=Math.min(e.inHeight,h+E);for(let N=0;N<e.outWidth;++N){const R=N*a-y;let O=R;for(;O<0;)O+=l;const P=Math.min(e.inWidth,d+R);let B=Number.NEGATIVE_INFINITY,U=-1;for(let z=$;z<T;z+=o){const M=z-S;for(let V=I;V<_;V+=s){const W=V-E;for(let H=O;H<P;H+=l){const L=H-R,G=t.get(x,z,V,H,b);G>=B&&(B=G,U=M*h*d+W*h+L)}}}n.set(U,x,w,k,N,b)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Be(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,c=1;j(dr(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const h=Ui(i.shape,a,o,c,s,l);let d;if(h.filterWidth===1&&h.filterHeight===1&&At(h.inShape,h.outShape))d=Va({inputs:{x:i},backend:n});else{const p=n.data.get(i.dataId).values,g=Ve(i.shape),y=LO(p,i.shape,i.dtype,g,h,"avg");d=n.makeTensorInfo(h.outShape,i.dtype,y.values)}return d}const Y$e={kernelName:Lb,backendName:"cpu",kernelFunc:K$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:c}=r;Be(i,"avgPool3d");const h=Po(i.shape,a,o,1,s,l,c),d=n.data.get(i.dataId).values,p=W8(d,i.shape,i.dtype,Ve(i.shape),h,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const Q$e={kernelName:Fb,backendName:"cpu",kernelFunc:Z$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:c}=r;Be([i,a],"avgPool3DGrad");const h=Po(a.shape,o,s,1,l,c),d=h.strideDepth,p=h.strideHeight,g=h.strideWidth,y=h.filterDepth,x=h.filterHeight,b=h.filterWidth,w=h.dilationDepth,S=h.dilationHeight,$=h.dilationWidth,T=h.effectiveFilterDepth,k=h.effectiveFilterHeight,E=h.effectiveFilterWidth,I=T-1-h.padInfo.front,_=E-1-h.padInfo.left,N=k-1-h.padInfo.top,R=lt(a.shape,"float32"),O=1/(y*x*b),P=n.bufferSync(i);for(let B=0;B<h.batchSize;++B)for(let U=0;U<h.inChannels;++U)for(let z=0;z<h.inDepth;++z)for(let M=0;M<h.inHeight;++M)for(let V=0;V<h.inWidth;++V){const W=z-I,H=M-N,L=V-_;let G=0;for(let q=0;q<T;q+=w){const K=(W+q)/d;if(!(K<0||K>=h.outDepth||Math.floor(K)!==K))for(let oe=0;oe<k;oe+=S){const pe=(H+oe)/p;if(!(pe<0||pe>=h.outHeight||Math.floor(pe)!==pe))for(let ge=0;ge<E;ge+=$){const Re=(L+ge)/g;if(Re<0||Re>=h.outWidth||Math.floor(Re)!==Re)continue;const Ee=P.get(B,K,pe,Re,U);G+=Ee}}}R.set(G*O,B,z,M,V,U)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const eTe={kernelName:CE,backendName:"cpu",kernelFunc:J$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a;Be([i,a],"avgPoolGrad");const{filterSize:s,strides:l,pad:c}=r,h=Ui(o.shape,s,l,1,c),d=h.strideHeight,p=h.strideWidth,g=h.filterHeight,y=h.filterWidth,x=h.dilationHeight,b=h.dilationWidth,w=h.effectiveFilterHeight,S=h.effectiveFilterWidth,$=S-1-h.padInfo.left,T=w-1-h.padInfo.top,k=lt(o.shape,"float32"),E=1/(g*y),I=n.data.get(i.dataId).values,_=lt(i.shape,"float32",I);for(let N=0;N<h.batchSize;++N)for(let R=0;R<h.inChannels;++R)for(let O=0;O<h.inHeight;++O)for(let P=0;P<h.inWidth;++P){const B=O-T,U=P-$;let z=0;for(let M=0;M<w;M+=x){const V=(B+M)/d;if(!(V<0||V>=h.outHeight||Math.floor(V)!==V))for(let W=0;W<S;W+=b){const H=(U+W)/p;if(H<0||H>=h.outWidth||Math.floor(H)!==H)continue;const L=_.get(N,V,H,R);z+=L}}k.set(z*E,N,O,P,R)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const nTe={kernelName:SE,backendName:"cpu",kernelFunc:tTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:a,offset:o,mean:s,variance:l}=e;j(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Be([i,s,l,a,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const h=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(l.dataId).values,g=a?n.data.get(a.dataId).values:new Float32Array([1]),y=o?n.data.get(o.dataId).values:new Float32Array([0]),x=new Float32Array(h.length),b=y.length,w=g.length,S=p.length,$=d.length;let T=0,k=0,E=0,I=0;for(let _=0;_<h.length;++_)x[_]=y[T++]+(h[_]-d[k++])*g[E++]/Math.sqrt(p[I++]+c),T>=b&&(T=0),k>=$&&(k=0),E>=w&&(E=0),I>=S&&(I=0);return n.makeTensorInfo(i.shape,i.dtype,x)}const iTe={kernelName:Zb,backendName:"cpu",kernelFunc:rTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,crops:o}=r;Be([i],"batchToSpaceND");const s=a.reduce((w,S)=>w*S),l=gm(i.shape,a,s),c=ym(l.length,a.length),h=vm(i.shape,a,s),d=HI(o,a.length),p=XI(h,o,a.length),g=Ht({inputs:{x:i},backend:n,attrs:{shape:l}}),y=Fr({inputs:{x:g},backend:n,attrs:{perm:c}}),x=Ht({inputs:{x:y},backend:n,attrs:{shape:h}}),b=ql({inputs:{x},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),b}const oTe={kernelName:zb,backendName:"cpu",kernelFunc:aTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o}=r,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,c=_O(s,l,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,c)}const lTe={kernelName:$E,backendName:"cpu",kernelFunc:sTe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uTe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=et(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const cTe={kernelName:yG,backendName:"cpu",kernelFunc:uTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fTe=_t(Tp,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),hTe={kernelName:Tp,backendName:"cpu",kernelFunc:fTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dTe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ve(e.shape)),i=n.data.get(e.dataId),a=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,s=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<s.length;c++){const h=s[c],d=l[c];r[c]=Math.hypot(h,d)}return n.makeOutput(r,e.shape,"float32")},pTe={kernelName:jb,backendName:"cpu",kernelFunc:dTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ef(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const mTe={kernelName:UE,backendName:"cpu",kernelFunc:ef};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tf(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=ut(i,e[0].shape)[0],o=e.map(x=>x.shape);WI(o,a);let s=Da(e.map(x=>x.shape),a);if(ve(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(x=>ve(x.shape)>0);if(l.length===1)return Va({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const x=l.map(T=>Gl({inputs:{input:T},backend:n})),b=l.map(T=>ef({inputs:{input:T},backend:n})),w=tf({inputs:x,backend:n,attrs:{axis:a}}),S=tf({inputs:b,backend:n,attrs:{axis:a}}),$=Xr({inputs:{real:w,imag:S},backend:n});return x.forEach(T=>n.disposeIntermediateTensorInfo(T)),b.forEach(T=>n.disposeIntermediateTensorInfo(T)),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),$}const c=l.map(x=>{const w=[-1,ve(x.shape.slice(a))];return Ht({inputs:{x},backend:n,attrs:{shape:w}})}),h=c.map(x=>({vals:n.data.get(x.dataId).values,shape:x.shape}));s=Da(c.map(x=>x.shape),1);const d=c[0].shape[0]===1,p=K5(h,s,e[0].dtype,d),g=Da(l.map(x=>x.shape),a),y=n.makeTensorInfo(g,e[0].dtype,p);return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const gTe={kernelName:Ub,backendName:"cpu",kernelFunc:tf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dataFormat:l,dilations:c,dimRoundingMode:h}=r;Be([i,a],"conv2d");const d=Lo(l),p=er(i.shape,a.shape,o,c,s,h,!1,d),g=p.filterHeight,y=p.filterWidth,x=p.dilationHeight,b=p.dilationWidth,w=p.padInfo.left,S=p.padInfo.top,$=p.dataFormat==="channelsLast",T=new Qn(p.outShape,i.dtype),k=Ve(i.shape),E=Ve(a.shape),I=k[0],_=$?k[1]:k[2],N=$?k[2]:1,R=$?1:k[1],O=T.strides[0],P=$?T.strides[1]:T.strides[2],B=$?T.strides[2]:1,U=$?1:T.strides[1],z=n.data.get(i.dataId).values,M=n.data.get(a.dataId).values,V=T.values;for(let W=0;W<p.batchSize;++W){const H=W*I,L=W*O;for(let G=0;G<p.outHeight;++G){const q=L+G*P,K=G*p.strideHeight-S;for(let oe=0;oe<g;++oe){const pe=K+oe*x;if(pe<0||pe>=p.inHeight)continue;const ge=oe*E[0],Re=H+pe*_;for(let Ee=0;Ee<p.outWidth;++Ee){const ye=q+Ee*B,Ie=Ee*p.strideWidth-w;for(let Oe=0;Oe<y;++Oe){const be=Ie+Oe*b;if(be<0||be>=p.inWidth)continue;const Ge=ge+Oe*E[1],Ue=Re+be*N;let xe=Ge;for(let ke=0;ke<p.inChannels;++ke){const Ne=z[Ue+ke*R];for(let Le=0;Le<p.outChannels;++Le)V[ye+Le*U]+=Ne*M[xe+Le];xe+=p.outChannels}}}}}}return n.makeTensorInfo(T.shape,T.dtype,V)}const yTe={kernelName:Vb,backendName:"cpu",kernelFunc:G8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:c,filterShape:h}=r;Be([i,a],"conv2dBackpropFilter");const d=Lo(l),p=er(i.shape,h,o,1,s,c,!1,d),{strideHeight:g,strideWidth:y,filterHeight:x,filterWidth:b}=p,w=p.dataFormat==="channelsLast",S=new Qn(p.filterShape,"float32"),$=p.padInfo.left,T=p.padInfo.top,k=n.data.get(i.dataId).values,E=n.data.get(a.dataId).values,I=new Qn(i.shape,i.dtype,k),_=new Qn(a.shape,a.dtype,E);for(let N=0;N<x;++N){const R=Math.max(0,Math.ceil((T-N)/g)),O=Math.min(p.outHeight,(p.inHeight+T-N)/g);for(let P=0;P<b;++P){const B=Math.max(0,Math.ceil(($-P)/y)),U=Math.min(p.outWidth,(p.inWidth+$-P)/y);for(let z=0;z<p.inChannels;++z)for(let M=0;M<p.outChannels;++M){let V=0;for(let W=0;W<p.batchSize;++W)for(let H=R;H<O;++H){const L=N+H*g-T;for(let G=B;G<U;++G){const q=P+G*y-$;w?V+=I.get(W,L,q,z)*_.get(W,H,G,M):V+=I.get(W,z,L,q)*_.get(W,M,H,G)}}S.set(V,N,P,z,M)}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const bTe={kernelName:AE,backendName:"cpu",kernelFunc:vTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{inputShape:o,strides:s,pad:l,dataFormat:c,dimRoundingMode:h}=r;Be([i,a],"conv2dBackpropInput");const d=Ve(a.shape),p=Ve(i.shape);let g=Lo(c);const y=er(o,a.shape,s,1,l,h,!1,g),x=new Qn(y.inShape,"float32"),b=x.values,w=n.data.get(i.dataId).values,S=n.data.get(a.dataId).values,[$,T,k]=d,{batchSize:E,filterHeight:I,filterWidth:_,inChannels:N,inHeight:R,inWidth:O,outChannels:P,outHeight:B,outWidth:U,strideHeight:z,strideWidth:M}=y;g=y.dataFormat;const V=I-1-y.padInfo.top,W=_-1-y.padInfo.left,H=g==="channelsLast",L=x.strides[0],G=H?x.strides[1]:x.strides[2],q=H?x.strides[2]:1,K=H?1:x.strides[1],oe=p[0],pe=H?p[1]:p[2],ge=H?p[2]:1,Re=H?1:p[1];for(let Ee=0;Ee<E;++Ee)for(let ye=0;ye<N;++ye)for(let Ie=0;Ie<R;++Ie){const Oe=Ie-V,be=Math.max(0,Math.ceil(Oe/z)),Ge=Math.min(B,(I+Oe)/z);for(let Ue=0;Ue<O;++Ue){const xe=Ue-W,ke=Math.max(0,Math.ceil(xe/M)),Ne=Math.min(U,(_+xe)/M);let Le=0;for(let gt=be;gt<Ge;++gt){const tt=gt*z-Oe;for(let Lt=ke;Lt<Ne;++Lt){const vn=Lt*M-xe,Gn=oe*Ee+pe*gt+ge*Lt,zr=$*(I-1-tt)+T*(_-1-vn)+k*ye;for(let jr=0;jr<P;++jr){const ln=w[Gn+Re*jr],rr=S[zr+jr];Le+=ln*rr}}}const st=L*Ee+G*Ie+q*Ue+K*ye;b[st]=Le}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const wTe={kernelName:Wb,backendName:"cpu",kernelFunc:xTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function STe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l}=r;Be([i,a],"conv3d");const c=Ls(i.shape,a.shape,o,l,s),{filterDepth:h,filterHeight:d,filterWidth:p,dilationDepth:g,dilationHeight:y,dilationWidth:x,padInfo:b}=c,w=b.front,S=b.left,$=b.top,T=new Qn(c.outShape,i.dtype),k=n.data.get(i.dataId).values,E=n.data.get(a.dataId).values,I=T.values,_=Ve(i.shape),N=Ve(a.shape);for(let R=0;R<c.batchSize;++R){const O=R*_[0],P=R*T.strides[0];for(let B=0;B<c.outDepth;++B){const U=P+B*T.strides[1],z=B*c.strideDepth-w;for(let M=0;M<h;++M){const V=z+M*g;if(V<0||V>=c.inDepth)continue;const W=M*N[0],H=O+V*_[1];for(let L=0;L<c.outHeight;++L){const G=U+L*T.strides[2],q=L*c.strideHeight-$;for(let K=0;K<d;++K){const oe=q+K*y;if(oe<0||oe>=c.inHeight)continue;const pe=W+K*N[1],ge=H+oe*_[2];for(let Re=0;Re<c.outWidth;++Re){const Ee=G+Re*c.outChannels,ye=Re*c.strideWidth-S;for(let Ie=0;Ie<p;++Ie){const Oe=ye+Ie*x;if(Oe<0||Oe>=c.inWidth)continue;const be=pe+Ie*N[2],Ge=ge+Oe*c.inChannels;let Ue=be;for(let xe=0;xe<c.inChannels;++xe){const ke=k[Ge+xe];for(let Ne=0;Ne<c.outChannels;++Ne)I[Ee+Ne]+=ke*E[Ue+Ne];Ue+=c.outChannels}}}}}}}}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const CTe={kernelName:Gb,backendName:"cpu",kernelFunc:STe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Te(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,filterShape:l}=r;Be([i,a],"conv3dBackpropFilterV2");const c=Ve(i.shape),h=Ve(a.shape),d=Ls(i.shape,l,o,1,s),p=d.strideDepth,g=d.strideHeight,y=d.strideWidth,x=d.filterDepth,b=d.filterHeight,w=d.filterWidth,S=new Qn(d.filterShape,"float32"),$=S.values,[T,k,E,I]=S.strides,_=n.data.get(a.dataId).values,[N,R,O,P]=h,B=n.data.get(i.dataId).values,[U,z,M,V]=c,W=d.padInfo.front,H=d.padInfo.left,L=d.padInfo.top;for(let G=0;G<x;++G){const q=Math.max(0,Math.ceil((W-G)/p)),K=Math.min(d.outDepth,(d.inDepth+W-G)/p),oe=G*T;for(let pe=0;pe<b;++pe){const ge=Math.max(0,Math.ceil((L-pe)/g)),Re=Math.min(d.outHeight,(d.inHeight+L-pe)/g),Ee=pe*k+oe;for(let ye=0;ye<w;++ye){const Ie=Math.max(0,Math.ceil((H-ye)/y)),Oe=Math.min(d.outWidth,(d.inWidth+H-ye)/y),be=ye*E+Ee;for(let Ge=0;Ge<d.inChannels;++Ge){const Ue=Ge*I+be;for(let xe=0;xe<d.outChannels;++xe){let ke=0;for(let Ne=0;Ne<d.batchSize;++Ne){const Le=Ne*U,st=Ne*N;for(let gt=q;gt<K;++gt){const Lt=(G+gt*p-W)*z+Le,vn=gt*R+st;for(let Gn=ge;Gn<Re;++Gn){const jr=(pe+Gn*g-L)*M+Lt,ln=Gn*O+vn;for(let rr=Ie;rr<Oe;++rr){const Df=(ye+rr*y-H)*V+jr,Mf=rr*P+ln;ke+=B[Df+Ge]*_[Mf+xe]}}}}$[Ue+xe]=ke}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const TTe={kernelName:EE,backendName:"cpu",kernelFunc:$Te};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{pad:o,strides:s,inputShape:l}=r;Be([i],"conv3dBackpropInputV2");const c=Ve(i.shape),h=Ve(a.shape),d=Ls(l,a.shape,s,1,o),p=new Qn(d.inShape,"float32"),g=p.values,[y,x,b,w]=p.strides,S=n.data.get(i.dataId).values,[$,T,k,E]=c,I=n.data.get(a.dataId).values,[_,N,R,O]=h,{batchSize:P,filterDepth:B,filterHeight:U,filterWidth:z,inChannels:M,inDepth:V,inHeight:W,inWidth:H,outChannels:L,outDepth:G,outHeight:q,outWidth:K,strideDepth:oe,strideHeight:pe,strideWidth:ge}=d,Re=B-1-d.padInfo.front,Ee=U-1-d.padInfo.top,ye=z-1-d.padInfo.left;for(let Ie=0;Ie<P;++Ie)for(let Oe=0;Oe<M;++Oe)for(let be=0;be<V;++be){const Ge=be-Re,Ue=Math.max(0,Math.ceil(Ge/oe)),xe=Math.min(G,(B+Ge)/oe);for(let ke=0;ke<W;++ke){const Ne=ke-Ee,Le=Math.max(0,Math.ceil(Ne/pe)),st=Math.min(q,(U+Ne)/pe);for(let gt=0;gt<H;++gt){const tt=gt-ye,Lt=Math.max(0,Math.ceil(tt/ge)),vn=Math.min(K,(z+tt)/ge);let Gn=0;for(let zr=Ue;zr<xe;++zr){const jr=zr*oe-Ge;for(let ln=Le;ln<st;++ln){const rr=ln*pe-Ne;for(let Dn=Lt;Dn<vn;++Dn){const Df=Dn*ge-tt,Mf=$*Ie+T*zr+k*ln+E*Dn,fx=_*(B-1-jr)+N*(U-1-rr)+R*(z-1-Df)+O*Oe;for(let Ha=0;Ha<L;++Ha){const uu=S[Mf+Ha],Xa=I[fx+Ha];Gn+=uu*Xa}}}}g[y*Ie+x*be+b*ke+w*gt+Oe]=Gn}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const ATe={kernelName:IE,backendName:"cpu",kernelFunc:kTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ETe=_t(kp,t=>Math.cos(t)),ITe={kernelName:kp,backendName:"cpu",kernelFunc:ETe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OTe=_t(Ap,t=>Math.cosh(t)),NTe={kernelName:Ap,backendName:"cpu",kernelFunc:OTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Te(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:a,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:c}=r,[h,d,p,g]=i.shape,y=a.shape[0],[x,b]=s,w=lt([y,x,b,g],"float32"),S=n.data.get(a.dataId).values,$=n.data.get(o.dataId).values,T=n.data.get(i.dataId).values,k=Ve(i.shape),E=Ve(w.shape);for(let I=0;I<y;I++){const _=I*4,N=S[_],R=S[_+1],O=S[_+2],P=S[_+3],B=$[I];if(B>=h)continue;const U=x>1?(O-N)*(d-1)/(x-1):0,z=b>1?(P-R)*(p-1)/(b-1):0;for(let M=0;M<x;M++){const V=x>1?N*(d-1)+M*U:.5*(N+O)*(d-1);if(V<0||V>d-1){for(let W=0;W<b;W++)for(let H=0;H<g;H++){const L=H+W*E[2]+M*E[1]+I*E[0];w.values[L]=c}continue}if(l==="bilinear"){const W=Math.floor(V),H=Math.ceil(V),L=V-W;for(let G=0;G<b;G++){const q=b>1?R*(p-1)+G*z:.5*(R+P)*(p-1);if(q<0||q>p-1){for(let ge=0;ge<g;ge++){const Re=ge+G*E[2]+M*E[1]+I*E[0];w.values[Re]=c}continue}const K=Math.floor(q),oe=Math.ceil(q),pe=q-K;for(let ge=0;ge<g;ge++){let Re=ge+K*k[2]+W*k[1]+B*k[0];const Ee=T[Re];Re=ge+oe*k[2]+W*k[1]+B*k[0];const ye=T[Re];Re=ge+K*k[2]+H*k[1]+B*k[0];const Ie=T[Re];Re=ge+oe*k[2]+H*k[1]+B*k[0];const Oe=T[Re],be=Ee+(ye-Ee)*pe,Ge=Ie+(Oe-Ie)*pe;Re=ge+G*E[2]+M*E[1]+I*E[0],w.values[Re]=be+(Ge-be)*L}}}else for(let W=0;W<b;++W){const H=b>1?R*(p-1)+W*z:.5*(R+P)*(p-1);if(H<0||H>p-1){for(let q=0;q<g;q++){const K=q+W*E[2]+M*E[1]+I*E[0];w.values[K]=c}continue}const L=Math.round(H),G=Math.round(V);for(let q=0;q<g;q++){const K=q+L*k[2]+G*k[1]+B*k[0],oe=q+W*E[2]+M*E[1]+I*E[0];w.values[oe]=T[K]}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const RTe={kernelName:NE,backendName:"cpu",kernelFunc:_Te};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;Be(i,"cumprod");const l=on([a],i.shape.length);let c=i;l!=null&&(c=Fr({inputs:{x:i},backend:n,attrs:{perm:l}}));const h=mn(1,i.shape.length)[0];if(h!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${h}`);const d=Zr(c.dtype,"int32"),p=gE(ve(c.shape),d),g=n.data.get(c.dataId).values,y=c.shape[c.shape.length-1],x=s?(w,S)=>w+y-S-1:(w,S)=>w+S;for(let w=0;w<g.length;w+=y)for(let S=0;S<y;S++){const $=x(w,S);if(S===0)p[$]=o?1:g[$];else{const T=x(w,S-1);p[$]=o?g[T]*p[T]:g[$]*p[T]}}const b=n.makeTensorInfo(c.shape,d,p);if(l!=null){const w=Fs(l),S=Fr({inputs:{x:b},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),S}return b}const MTe={kernelName:OE,backendName:"cpu",kernelFunc:DTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;Be(i,"cumsum");const l=on([a],i.shape.length);let c=i;l!=null&&(c=Fr({inputs:{x:i},backend:n,attrs:{perm:l}}));const h=mn(1,i.shape.length)[0];if(h!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${h}`);const d=Zr(c.dtype,"int32"),p=fr(ve(c.shape),d),g=n.data.get(c.dataId).values,y=c.shape[c.shape.length-1],x=s?(w,S)=>w+y-S-1:(w,S)=>w+S;for(let w=0;w<g.length;w+=y)for(let S=0;S<y;S++){const $=x(w,S);if(S===0)p[$]=o?0:g[$];else{const T=x(w,S-1);p[$]=o?g[T]+p[T]:g[$]+p[T]}}const b=n.makeTensorInfo(c.shape,d,p);if(l!=null){const w=Fs(l),S=Fr({inputs:{x:b},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),S}return b}const LTe={kernelName:qb,backendName:"cpu",kernelFunc:PTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o,binaryOutput:s}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,h=_O(l,c,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,h)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(a),h=q5(l,c,o,s);return n.makeTensorInfo(h.shape,a.dtype,h.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const BTe={kernelName:_E,backendName:"cpu",kernelFunc:FTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:a,dataFormat:o}=r;j(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const s=i.shape[0],l=i.shape[1],c=i.shape[2],h=i.shape[3],d=l*a,p=c*a,g=h/(a*a),y=n.data.get(i.dataId).values,x=new Float32Array(s*d*p*g);let b=0;for(let w=0;w<s;++w)for(let S=0;S<d;++S){const $=Math.floor(S/a),T=S%a;for(let k=0;k<p;++k){const E=Math.floor(k/a),I=k%a,_=(T*a+I)*g;for(let N=0;N<g;++N){const O=N+_+h*(E+c*($+l*w));x[b++]=y[O]}}}return n.makeTensorInfo([s,d,p,g],i.dtype,x)}const jTe={kernelName:RE,backendName:"cpu",kernelFunc:zTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q8(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:c}=r;Be([i,a],"depthwiseConv2DNative");const h=Ve(i.shape),d=Ve(a.shape);let p=l;p==null&&(p=[1,1]),j(dr(o,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${p}'`);const g=er(i.shape,a.shape,o,p,s,c,!0),{filterHeight:y,filterWidth:x,dilationHeight:b,dilationWidth:w,padInfo:S}=g,$=S.left,T=S.top,k=g.outChannels/g.inChannels,E=new Qn(g.outShape,i.dtype),I=n.data.get(i.dataId).values,_=n.data.get(a.dataId).values,N=E.values;for(let R=0;R<g.batchSize;++R){const O=R*h[0],P=R*E.strides[0];for(let B=0;B<g.outHeight;++B){const U=P+B*E.strides[1],z=B*g.strideHeight-T;for(let M=0;M<y;++M){const V=z+M*b;if(V<0||V>=g.inHeight)continue;const W=M*d[0],H=O+V*h[1];for(let L=0;L<g.outWidth;++L){const G=U+L*E.strides[2],q=L*g.strideWidth-$;for(let K=0;K<x;++K){const oe=q+K*w;if(oe<0||oe>=g.inWidth)continue;const pe=W+K*d[1],ge=H+oe*g.inChannels;let Re=G,Ee=pe;for(let ye=0;ye<g.inChannels;++ye){const Ie=I[ge+ye];for(let Oe=0;Oe<k;++Oe)N[Re+Oe]+=Ie*_[Ee+Oe];Re+=k,Ee+=k}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const UTe={kernelName:Hb,backendName:"cpu",kernelFunc:q8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:c,filterShape:h}=r;Be([i,a],"depthwiseConv2dNativeBackpropFilter");const d=er(i.shape,h,o,s,l,c,!0),{strideHeight:p,strideWidth:g,filterHeight:y,filterWidth:x}=d,b=new Qn(d.filterShape,"float32"),w=d.padInfo.left,S=d.padInfo.top,$=d.outChannels/d.inChannels,T=n.data.get(i.dataId).values,k=new Qn(i.shape,i.dtype,T),E=n.data.get(a.dataId).values,I=new Qn(a.shape,a.dtype,E);for(let _=0;_<y;++_){const N=Math.max(0,Math.ceil((S-_)/p)),R=Math.min(d.outHeight,(d.inHeight+S-_)/p);for(let O=0;O<x;++O){const P=Math.max(0,Math.ceil((w-O)/g)),B=Math.min(d.outWidth,(d.inWidth+w-O)/g);for(let U=0;U<d.outChannels;++U){const z=Math.trunc(U/$),M=U%$;let V=0;for(let W=0;W<d.batchSize;++W)for(let H=N;H<R;++H){const L=_+H*p-S;for(let G=P;G<B;++G){const q=O+G*g-w;V+=k.get(W,L,q,z)*I.get(W,H,G,U)}}b.set(V,_,O,z,M)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const WTe={kernelName:DE,backendName:"cpu",kernelFunc:VTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:c,inputShape:h}=r;Be([i,a],"depthwiseConv2DNativeBackpropInput");const d=Ve(i.shape),p=Ve(a.shape),g=er(h,a.shape,o,s,l,c,!0),y=new Qn(g.inShape,"float32"),x=y.values,[b,w,S]=y.strides,$=n.data.get(i.dataId).values,[T,k,E]=d,I=n.data.get(a.dataId).values,[_,N,R]=p,{batchSize:O,filterHeight:P,filterWidth:B,inChannels:U,inHeight:z,inWidth:M,outChannels:V,outHeight:W,outWidth:H,strideHeight:L,strideWidth:G}=g,q=P-1-g.padInfo.top,K=B-1-g.padInfo.left,oe=V/U;for(let pe=0;pe<O;++pe)for(let ge=0;ge<U;++ge)for(let Re=0;Re<z;++Re){const Ee=Re-q,ye=Math.max(0,Math.ceil(Ee/L)),Ie=Math.min(W,(P+Ee)/L);for(let Oe=0;Oe<M;++Oe){const be=Oe-K,Ge=Math.max(0,Math.ceil(be/G)),Ue=Math.min(H,(B+be)/G);let xe=0;for(let ke=ye;ke<Ie;++ke){const Ne=ke*L-Ee;for(let Le=Ge;Le<Ue;++Le){const st=Le*G-be,gt=T*pe+k*ke+E*Le,tt=_*(P-1-Ne)+N*(B-1-st)+R*ge;for(let Lt=0;Lt<oe;++Lt){const vn=ge*oe+Lt,Gn=$[gt+vn],zr=I[tt+Lt];xe+=Gn*zr}}}x[b*pe+w*Re+S*Oe+ge]=xe}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const qTe={kernelName:ME,backendName:"cpu",kernelFunc:GTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HTe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=ve(r.shape),a=n.data.get(r.dataId).values,o=lt([i,i],r.dtype),s=o.values;for(let c=0;c<a.length;c++)s[c*i+c]=a[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const XTe={kernelName:vG,backendName:"cpu",kernelFunc:HTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KTe={kernelName:Xb,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:a,pad:o,dilations:s}=n,l=e,c=l.data.get(r.dataId).values,h=r.shape.length,d=l.data.get(i.dataId).values,p=i.shape.length,{batchSize:g,inHeight:y,inWidth:x,inChannels:b,outHeight:w,outWidth:S,padInfo:$,strideHeight:T,strideWidth:k,filterHeight:E,filterWidth:I,dilationHeight:_,dilationWidth:N,outShape:R}=fm(r.shape,i.shape,a,o,"NHWC",s),O=ve(R),P=R.length,B=hn(r.dtype,O);for(let z=0;z<g;++z)for(let M=0;M<w;++M){const V=M*T-$.top;for(let W=0;W<S;++W){const H=W*k-$.left;for(let L=0;L<b;++L){let G=Number.MIN_SAFE_INTEGER;for(let K=0;K<E;++K){const oe=V+K*_;if(oe>=0&&oe<y)for(let pe=0;pe<I;++pe){const ge=H+pe*N;if(ge>=0&&ge<x){const Re=_a([z,oe,ge,L],h,Ve(r.shape)),Ee=_a([K,pe,L],p,Ve(i.shape)),ye=c[Re]+d[Ee];ye>G&&(G=ye)}}}const q=_a([z,M,W,L],P,Ve(R));B[q]=G}}}return{dataId:l.write(Jl(B,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YTe={kernelName:Ck,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:o,pad:s,dilations:l}=n,c=e,h=oa(r.shape,c.data.get(r.dataId).values),d=oa(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:g,inWidth:y,inChannels:x,outHeight:b,outWidth:w,padInfo:S,strideHeight:$,strideWidth:T,filterHeight:k,filterWidth:E,dilationHeight:I,dilationWidth:_,outShape:N}=fm(r.shape,i.shape,o,s,"NHWC",l);j(a.rank===N.length,()=>`Error in ${Ck}, dy must have the same rank as output ${N.length}, but got ${a.rank}`);const R=oa(N,c.data.get(a.dataId).values),O=pG(i.shape,i.dtype);for(let B=0;B<p;++B)for(let U=0;U<b;++U){const z=U*$-S.top;for(let M=0;M<w;++M){const V=M*T-S.left;for(let W=0;W<x;++W){let H=Number.MIN_SAFE_INTEGER,L=0,G=0;for(let q=0;q<k;++q){const K=z+q*I;if(K>=0&&K<g)for(let oe=0;oe<E;++oe){const pe=V+oe*_;if(pe>=0&&pe<y){const ge=h[B][K][pe][W]+d[q][oe][W];ge>H&&(H=ge,L=q,G=oe)}}}O[L][G][W]+=R[B][U][M][W]}}}return{dataId:c.write(Jl(O,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZTe={kernelName:Sk,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:o,pad:s,dilations:l}=n,c=e,h=oa(r.shape,c.data.get(r.dataId).values),d=oa(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:g,inWidth:y,inChannels:x,outHeight:b,outWidth:w,padInfo:S,strideHeight:$,strideWidth:T,filterHeight:k,filterWidth:E,dilationHeight:I,dilationWidth:_,outShape:N}=fm(r.shape,i.shape,o,s,"NHWC",l);j(a.rank===N.length,()=>`Error in ${Sk}, dy must have the same rank as output ${N.length}, but got ${a.rank}`);const R=oa(N,c.data.get(a.dataId).values),O=pG(r.shape,r.dtype);for(let B=0;B<p;++B)for(let U=0;U<b;++U){const z=U*$-S.top;for(let M=0;M<w;++M){const V=M*T-S.left;for(let W=0;W<x;++W){let H=Number.MIN_SAFE_INTEGER,L=z<0?0:z,G=V<0?0:V;for(let q=0;q<k;++q){const K=z+q*I;if(K>=0&&K<g)for(let oe=0;oe<E;++oe){const pe=V+oe*_;if(pe>=0&&pe<y){const ge=h[B][K][pe][W]+d[q][oe][W];ge>H&&(H=ge,L=K,G=pe)}}}O[B][L][G][W]+=R[B][U][M][W]}}}return{dataId:c.write(Jl(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:a,options:o}=r,{contextOptions:s,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,h=(s==null?void 0:s.contextType)||"2d";if(h!=="2d")throw new Error(`Context type ${s.contextType} is not supported by the CPU backend.`);const d=a.getContext(h,(s==null?void 0:s.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${h} type.`);const[p,g]=i.shape.slice(0,2),y=i.shape.length===2?1:i.shape[2],x=n.data.get(i.dataId).values,b=i.dtype==="float32"?255:1,w=new Uint8ClampedArray(g*p*4);for(let $=0;$<p*g;++$){const T=[0,0,0,255*c];for(let E=0;E<y;E++){const I=x[$*y+E];if(i.dtype==="float32"){if(I<0||I>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${I}.`)}else if(i.dtype==="int32"&&(I<0||I>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${I}.`);y===1?(T[0]=I*b,T[1]=I*b,T[2]=I*b):T[E]=I*b}const k=$*4;w[k+0]=Math.round(T[0]),w[k+1]=Math.round(T[1]),w[k+2]=Math.round(T[2]),w[k+3]=Math.round(T[3])}a.width=g,a.height=p;const S=new ImageData(w,g,p);return d.putImageData(S,0,0),i}const JTe={kernelName:Epe,backendName:"cpu",kernelFunc:QTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Am(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Be(i,"sum");let s;i.dtype==="bool"?s=As({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):s=Va({inputs:{x:i},backend:n});const l=s.shape.length,c=ut(a,s.shape),h=on(c,l);let d=c,p=s;h!=null&&(p=Fr({inputs:{x:s},backend:n,attrs:{perm:h}}),d=mn(d.length,l)),tr("sum",d,p.shape.length);const[g,y]=Wn(p.shape,d),x=Zr(p.dtype,"int32");let b=Hv(n,g,x);const w=ve(y),S=n.data.get(b.dataId).values,$=n.data.get(p.dataId).values;for(let T=0;T<S.length;++T){const k=T*w;let E=0;for(let I=0;I<w;++I)E+=$[k+I];S[T]=E}if(o){const T=Sn(b.shape,c),k=b;b=Ht({inputs:{x:b},backend:n,attrs:{shape:T}}),n.disposeIntermediateTensorInfo(k)}return n.disposeIntermediateTensorInfo(s),h!=null&&n.disposeIntermediateTensorInfo(p),b}const e2e={kernelName:A0,backendName:"cpu",kernelFunc:Am};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,a=e,{allDims:o,summedDims:s,idDims:l}=nO(i,a.length);iO(o.length,l,a);const{path:c,steps:h}=aO(s,l),d=h.length;let p=null,g=o.length;const y=[];for(let x=0;x<d;++x){for(const b of h[x]){const{permutationIndices:w,expandDims:S}=rO(g,l[b]);let $;oO(w)?$=a[b]:($=Fr({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),y.push($));const T=$.shape.slice();for(let k=0;k<S.length;++k)T.splice(S[k],0,1);At($.shape,T)||($=Ht({inputs:{x:$},backend:n,attrs:{shape:T}}),y.push($)),p===null?p=$:(p=ax({inputs:{a:$,b:p},backend:n}),y.push(p))}x<d-1&&(c[x]>=0&&(p=Am({inputs:{x:p},backend:n,attrs:{axis:c[x]-(o.length-g),keepDims:!1}}),y.push(p)),g--)}for(const x of y)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const n2e={kernelName:PE,backendName:"cpu",kernelFunc:t2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2e(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;Be([r,i],"eluGrad");const a=new Float32Array(ve(i.shape)),o=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?a[l]=s[l]:a[l]=s[l]*(c+1)}return n.makeTensorInfo(i.shape,"float32",a)}const i2e={kernelName:LE,backendName:"cpu",kernelFunc:r2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a2e=KI,o2e=YI,s2e=ZI,l2e=QI,u2e=JI,c2e=eO,f2e=_t(Op,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+a2e*n);return e*(1-((((c2e*r+u2e)*r+l2e)*r+s2e)*r+o2e)*r*Math.exp(-n*n))}),h2e={kernelName:Op,backendName:"cpu",kernelFunc:f2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yv(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:a}=r,o=i.shape.length,s=i.shape.slice();let l=a;return a<0&&(j(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),s.splice(l,0,1),Ht({inputs:{x:i},backend:n,attrs:{shape:s}})}const d2e={kernelName:Yb,backendName:"cpu",kernelFunc:Yv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p2e=yn((t,e)=>t/e),FO=Rn(Ep,p2e),Kk={kernelName:Ep,backendName:"cpu",kernelFunc:FO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H8(t,e,n){const r=t.shape,i=r[0],a=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[i,a],h=ve(c),d=cr("float32",h),p=cr("float32",h);for(let b=0;b<i;b++){const w=ql({inputs:{x:s},backend:n,attrs:{begin:[b,0],size:[1,a]}}),S=ql({inputs:{x:l},backend:n,attrs:{begin:[b,0],size:[1,a]}}),$=Xr({inputs:{real:w,imag:S},backend:n}),{real:T,imag:k}=m2e($,e,n),E=Oo(T,k);for(let I=0;I<a;I++){const _=tO(E,I);d[b*a+I]=_.real,p[b*a+I]=_.imag}n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo($)}const g=n.makeTensorInfo(c,"float32",d),y=n.makeTensorInfo(c,"float32",p),x=Xr({inputs:{real:g,imag:y},backend:n});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}function m2e(t,e,n){const r=ve(t.shape),i=n.data.get(t.dataId),a=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(g2e(r)){const s=Yk(a,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",s.real),h=n.makeTensorInfo(l,"float32",s.imag),d=n.makeTensorInfo([],"float32",Ps(r,"float32")),p=Va({inputs:{x:d},backend:n}),g=Kk.kernelFunc({inputs:{a:c,b:d},backend:n}),y=Kk.kernelFunc({inputs:{a:h,b:p},backend:n}),x=n.data.get(g.dataId).values,b=n.data.get(y.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),{real:x,imag:b}}return s}else{const s=Oo(a,o),l=y2e(s,r,e);return sH(l)}}function g2e(t){return(t&t-1)===0}function Yk(t,e,n,r,i){if(n===1)return{real:t,imag:e};const a=Oo(t,e),o=n/2,s=lH(a),l=s.real,c=s.imag,h=[l.length],d=i.makeTensorInfo(h,"float32",l),p=i.makeTensorInfo(h,"float32",c),g=Xr({inputs:{real:d,imag:p},backend:i}),y=uH(a),x=y.real,b=y.imag,w=[x.length],S=i.makeTensorInfo(w,"float32",x),$=i.makeTensorInfo(w,"float32",b),T=Xr({inputs:{real:S,imag:$},backend:i}),k=Yk(l,c,o,r,i),E=k.real,I=k.imag,_=[E.length],N=i.makeTensorInfo(_,"float32",E),R=i.makeTensorInfo(_,"float32",I),O=Xr({inputs:{real:N,imag:R},backend:i}),P=Yk(x,b,o,r,i),B=P.real,U=P.imag,z=[B.length],M=i.makeTensorInfo(z,"float32",B),V=i.makeTensorInfo(z,"float32",U),W=Xr({inputs:{real:M,imag:V},backend:i}),H=fH(n,r),L=[H.real.length],G=i.makeTensorInfo(L,"float32",H.real),q=i.makeTensorInfo(L,"float32",H.imag),K=Xr({inputs:{real:G,imag:q},backend:i}),oe=ax({inputs:{a:K,b:W},backend:i}),pe=Jc({inputs:{a:O,b:oe},backend:i}),ge=PO({inputs:{a:O,b:oe},backend:i}),Re=Gl({inputs:{input:pe},backend:i}),Ee=Gl({inputs:{input:ge},backend:i}),ye=ef({inputs:{input:pe},backend:i}),Ie=ef({inputs:{input:ge},backend:i}),Oe=tf({inputs:[Re,Ee],backend:i,attrs:{axis:0}}),be=tf({inputs:[ye,Ie],backend:i,attrs:{axis:0}}),Ge=i.data.get(Oe.dataId).values,Ue=i.data.get(be.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(S),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(oe),i.disposeIntermediateTensorInfo(pe),i.disposeIntermediateTensorInfo(ge),i.disposeIntermediateTensorInfo(Re),i.disposeIntermediateTensorInfo(ye),i.disposeIntermediateTensorInfo(Ee),i.disposeIntermediateTensorInfo(Ie),i.disposeIntermediateTensorInfo(Oe),i.disposeIntermediateTensorInfo(be),{real:Ge,imag:Ue}}function y2e(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let a=0,o=0;for(let s=0;s<e;s++){const l=hH(i*s,e,n),c=tO(t,s);a+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(a/=e,o/=e),cH(r,a,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t){const{inputs:e,backend:n}=t,{input:r}=e,i=ve(r.shape),a=r.shape[r.shape.length-1],o=i/a,s=Ht({inputs:{x:r},backend:n,attrs:{shape:[o,a]}}),l=H8(s,!1,n),c=Ht({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}const b2e={kernelName:FE,backendName:"cpu",kernelFunc:v2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BO(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:a}=n,o=a||yf(i),s=hn(o,ve(r));return w2e(s,i,o),e.makeTensorInfo(r,o,s)}const x2e={kernelName:BE,backendName:"cpu",kernelFunc:BO};function w2e(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S2e={kernelName:zE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,a=cr(r.dtype,ve(r.shape)),[o,s,l,c]=r.shape,h=i.data.get(r.dataId).values;for(let p=0;p<o;p++){const g=p*l*s*c;for(let y=0;y<s;y++){const x=y*(l*c);for(let b=0;b<l;b++){const w=b*c;for(let S=0;S<c;S++){const $=Math.round(l-b-1),T=g+x+w+S;let k=h[T];if($>=0&&$<l){const E=$*c,I=g+x+E+S;k=h[I]}a[T]=k}}}}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r;let x=G8({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p}});if(o){const b=x;if(h==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const w=Ht({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});x=Jc({inputs:{a:x,b:w},backend:n}),n.disposeIntermediateTensorInfo(w)}else x=Jc({inputs:{a:x,b:o},backend:n});n.disposeIntermediateTensorInfo(b)}if(g){const b=x;if(h==="NCHW"&&g==="prelu"&&s.shape.length===1&&s.shape[0]!==1){const w=Ht({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});x=Kv(n,x,g,w,y),n.disposeIntermediateTensorInfo(w)}else x=Kv(n,x,g,s,y);n.disposeIntermediateTensorInfo(b)}return x}const $2e={kernelName:Ov,backendName:"cpu",kernelFunc:C2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r;let x=q8({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p}});if(o){const b=x;x=Jc({inputs:{a:x,b:o},backend:n}),n.disposeIntermediateTensorInfo(b)}if(g){const b=x;x=Kv(n,x,g,s,y),n.disposeIntermediateTensorInfo(b)}return x}const k2e={kernelName:LG,backendName:"cpu",kernelFunc:T2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,a=ve(r.shape),o=i.shape,s=o[o.length-1],[l,c,h,d]=FI(r,i);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(i.dataId).values,g=n.bufferSync(r),y=r8(p,g,r.dtype,c,s,h,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,y.values)}const E2e={kernelName:bG,backendName:"cpu",kernelFunc:A2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:a}=e,{axis:o,batchDims:s}=r;Be([i,a],"gatherV2");const l=ut(o,i.shape)[0],c=n.data.get(a.dataId).values,h=i.shape[l];for(let T=0;T<c.length;++T){const k=c[T];j(k<=h-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${h-1}]`)}let d=s;s==null&&(d=0);const p=ve(a.shape),g=lO(i,a,l,d),y=Ht({inputs:{x:i},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),x=Ht({inputs:{x:a},backend:n,attrs:{shape:[g.batchSize,p/g.batchSize]}}),b=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],w=n.bufferSync(x),S=n.bufferSync(y),$=i8(S,w,b);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(g.outputShape,$.dtype,$.values)}const O2e={kernelName:Qb,backendName:"cpu",kernelFunc:I2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t){const{inputs:e,backend:n}=t,{input:r}=e,i=ve(r.shape),a=r.shape[r.shape.length-1],o=i/a,s=Ht({inputs:{x:r},backend:n,attrs:{shape:[o,a]}}),l=H8(s,!0,n),c=Ht({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}const _2e={kernelName:jE,backendName:"cpu",kernelFunc:N2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R2e=_t(Lp,t=>Number.isFinite(t)?1:0,"bool"),D2e={kernelName:Lp,backendName:"cpu",kernelFunc:R2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e=_t(Fp,t=>Math.abs(t)===1/0?1:0,"bool"),P2e={kernelName:Fp,backendName:"cpu",kernelFunc:M2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L2e=_t(Bp,t=>Number.isNaN(t)?1:0,"bool"),F2e={kernelName:Bp,backendName:"cpu",kernelFunc:L2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2e(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:a}=n,o=u8(r,i,a);return e.makeTensorInfo([o.length],"float32",o)}const z2e={kernelName:xG,backendName:"cpu",kernelFunc:B2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j2e=_t(jp,t=>Math.log1p(t)),U2e={kernelName:jp,backendName:"cpu",kernelFunc:j2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V2e=yn((t,e)=>t&&e),W2e=Rn(r0,V2e,null,"bool"),G2e={kernelName:r0,backendName:"cpu",kernelFunc:W2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q2e=_t(i0,t=>t?0:1,"bool"),H2e={kernelName:i0,backendName:"cpu",kernelFunc:q2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X2e=yn((t,e)=>t||e),K2e=Rn(a0,X2e,null,"bool"),Y2e={kernelName:a0,backendName:"cpu",kernelFunc:K2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:a,bias:o,alpha:s,beta:l}=r;Be(i,"LRN");const c=i.shape[3],h=c-1,d=n.data.get(i.dataId).values,p=ve(i.shape),g=new Float32Array(p);function y(x){const b=x%c;let w=x-b+Math.max(0,b-a);const S=x-b+Math.min(b+a,h);let $=0;for(;w<=S;w++){const T=d[w];$+=T*T}return $}for(let x=0;x<p;x++){const b=y(x),w=d[x]*Math.pow(o+s*b,-l);g[x]=w}return n.makeTensorInfo(i.shape,i.dtype,g)}const Q2e={kernelName:o0,backendName:"cpu",kernelFunc:Z2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:a,dy:o}=e,{depthRadius:s,bias:l,alpha:c,beta:h}=r;Be(o,"LRNGrad");const d=ve(o.shape),p=o.shape[3],g=n.data.get(o.dataId).values,y=n.data.get(i.dataId).values,x=n.data.get(a.dataId).values,b=new Float32Array(d),w=d;for(let S=0;S<w;S++){const $=S%p,T=S-$+Math.max(0,$-s),k=S-$+Math.min(p,$+s+1);let E=0;for(let I=T;I<k;I++)E+=Math.pow(y[I],2);E=c*E+l;for(let I=T;I<k;I++){let _=-2*c*h*y[I]*x[S]/E;S===I&&(_+=Math.pow(E,-h)),_*=g[S],b[I]+=_}}return n.makeTensorInfo(o.shape,i.dtype,b)}const eke={kernelName:VE,backendName:"cpu",kernelFunc:J2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X8(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:a,keepDims:o}=r,s=n;let l=i.shape;const c=l.length,h=ut(a,l);let d=h;const p=on(d,c);let g=s.data.get(i.dataId).values;if(p!=null){const T=new Array(c);for(let k=0;k<T.length;k++)T[k]=l[p[k]];g=DO(g,l,i.dtype,p,T),d=mn(d.length,c),l=T}Be(i,"max"),tr("max",d,c);const[y,x]=Wn(l,d),b=ve(x),w=f8(g,b,y,i.dtype),S=s.write(w,y,i.dtype);let $=y;return o&&($=Sn(y,h)),{dataId:S,shape:$,dtype:i.dtype}}const tke={kernelName:s0,backendName:"cpu",kernelFunc:X8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Be(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,c=1;j(dr(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const h=Ui(i.shape,a,o,c,s,l);let d;if(h.filterWidth===1&&h.filterHeight===1&&At(h.inShape,h.outShape))d=Va({inputs:{x:i},backend:n});else{const p=n.data.get(i.dataId).values,g=Ve(i.shape),y=LO(p,i.shape,i.dtype,g,h,"max");d=n.makeTensorInfo(h.outShape,i.dtype,y.values)}return d}const rke={kernelName:l0,backendName:"cpu",kernelFunc:nke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ike(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:c}=r;Be(i,"maxPool3d");const h=Po(i.shape,a,o,1,s,l,c),d=n.data.get(i.dataId).values,p=W8(d,i.shape,i.dtype,Ve(i.shape),h,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const ake={kernelName:u0,backendName:"cpu",kernelFunc:ike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:c}=r;Be([i,a],"maxPool3DGrad");const h=Po(a.shape,o,s,1,l,c),d=n.bufferSync(a),p=X$e(d,h),g=h.strideDepth,y=h.strideHeight,x=h.strideWidth,b=h.dilationDepth,w=h.dilationHeight,S=h.dilationWidth,$=h.effectiveFilterDepth,T=h.effectiveFilterHeight,k=h.effectiveFilterWidth,E=$-1-h.padInfo.front,I=k-1-h.padInfo.left,_=T-1-h.padInfo.top,N=lt(a.shape,"float32"),R=n.bufferSync(i);for(let O=0;O<h.batchSize;++O)for(let P=0;P<h.inChannels;++P)for(let B=0;B<h.inDepth;++B)for(let U=0;U<h.inHeight;++U)for(let z=0;z<h.inWidth;++z){const M=B-E,V=U-_,W=z-I;let H=0;for(let L=0;L<$;L+=b){const G=(M+L)/g;if(!(G<0||G>=h.outDepth||Math.floor(G)!==G))for(let q=0;q<T;q+=w){const K=(V+q)/y;if(!(K<0||K>=h.outHeight||Math.floor(K)!==K))for(let oe=0;oe<k;oe+=S){const pe=(W+oe)/x;if(pe<0||pe>=h.outWidth||Math.floor(pe)!==pe)continue;const ge=$*T*k-1-p.get(O,G,K,pe,P),Re=L*T*k+q*k+oe,Ee=ge===Re?1:0;if(Ee===0)continue;const ye=R.get(O,G,K,pe,P);H+=ye*Ee}}}N.set(H,O,B,U,z,P)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const ske={kernelName:GE,backendName:"cpu",kernelFunc:oke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:o}=e,s=a;Be([a,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:h,dimRoundingMode:d}=r,p=Ui(s.shape,l,c,1,h,d),g=n.data.get(s.dataId).values,y=lt(p.outShape,s.dtype,V8(g,s.shape,s.dtype,p).values),x=p.strideHeight,b=p.strideWidth,w=p.dilationHeight,S=p.dilationWidth,$=p.effectiveFilterHeight,T=p.effectiveFilterWidth,k=T-1-p.padInfo.left,E=$-1-p.padInfo.top,I=lt(s.shape,"float32"),_=n.data.get(i.dataId).values,N=lt(i.shape,"float32",_);for(let R=0;R<p.batchSize;++R)for(let O=0;O<p.inChannels;++O)for(let P=0;P<p.inHeight;++P)for(let B=0;B<p.inWidth;++B){const U=P-E,z=B-k;let M=0;for(let V=0;V<$;V+=w){const W=(U+V)/x;if(!(W<0||W>=p.outHeight||Math.floor(W)!==W))for(let H=0;H<T;H+=S){const L=(z+H)/b;if(L<0||L>=p.outWidth||Math.floor(L)!==L)continue;const G=$*T-1-y.get(R,W,L,O),q=V*T+H,K=G===q?1:0;if(K===0)continue;const oe=N.get(R,W,L,O);M+=oe*K}}I.set(M,R,P,B,O)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const uke={kernelName:WE,backendName:"cpu",kernelFunc:lke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cke(t,e,n,r,i){const a=Ve(e),o=LO(t,e,n,a,i,"max"),s=V8(t,e,n,i,!0,r);return[o.values,s.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fke={kernelName:wG,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,l=n;Be(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,h=Ui(r.shape,i,a,[1,1],o),[d,p]=cke(c,r.shape,r.dtype,s,h),g=l.write(d,h.outShape,r.dtype),y=l.write(p,h.outShape,r.dtype);return[{dataId:g,shape:h.outShape,dtype:r.dtype},{dataId:y,shape:h.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=ut(a,i.shape),c=Wn(i.shape,s)[1],h=ve(c),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([h]));d.push(p);const g=As({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(g);const y=FO({inputs:{a:g,b:p},backend:n});d.push(y);const x=Am({inputs:{x:y},backend:n,attrs:{axis:a,keepDims:o}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const dke={kernelName:c0,backendName:"cpu",kernelFunc:hke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Be(i,"min");const s=ut(a,i.shape);let l=s;const c=on(l,i.shape.length);let h=i;c!=null&&(h=Fr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=mn(l.length,i.shape.length)),tr("min",l,h.shape.length);const[d,p]=Wn(h.shape,l),g=ve(p),y=fr(ve(d),h.dtype),x=n.data.get(h.dataId).values;for(let w=0;w<y.length;++w){const S=w*g;let $=x[S];for(let T=0;T<g;++T){const k=x[S+T];(Number.isNaN(k)||k<$)&&($=k)}y[w]=$}c!=null&&n.disposeIntermediateTensorInfo(h);const b=n.makeTensorInfo(d,h.dtype,y);if(o){const w=Sn(d,s),S=Ht({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const mke={kernelName:f0,backendName:"cpu",kernelFunc:pke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,mode:o}=r;Be(i,"mirrorPad");const s=a.map(($,T)=>$[0]+i.shape[T]+$[1]),l=a.map($=>$[0]),c=a.map(($,T)=>$[0]+i.shape[T]),h=o==="reflect"?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,g=Ve(i.shape),y=ve(s),x=s.length,b=Ve(s),w=cr(i.dtype,y);for(let $=0;$<y;$++){let T=vf($,x,b);for(let E=0;E<x;E++)T[E]<l[E]?T[E]=l[E]*2-T[E]-h:T[E]>=c[E]&&(T[E]=(c[E]-1)*2-T[E]+h);T=T.map((E,I)=>E-l[I]);const k=_a(T,p,g);w[$]=d[k]}return{dataId:n.write(w,s,i.dtype),shape:s,dtype:i.dtype}}const yke={kernelName:h0,backendName:"cpu",kernelFunc:gke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vke=yn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),bke=Rn(Wp,vke),xke={kernelName:Wp,backendName:"cpu",kernelFunc:bke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:a}=r,o=i.shape.length;let s=a;if(s===-1&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const l=ut([s],i.shape),c=X8({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),h=Sn(c.shape,l),d=Ht({inputs:{x:c},backend:n,attrs:{shape:h}}),p=PO({inputs:{a:i,b:d},backend:n}),g=J5({inputs:{x:p},backend:n}),y=Am({inputs:{x:g},backend:n,attrs:{axis:l,keepDims:!1}}),x=Ht({inputs:{x:y},backend:n,attrs:{shape:h}}),b=FO({inputs:{a:g,b:x},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),b}const wke={kernelName:O0,backendName:"cpu",kernelFunc:K8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ske(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:a,seed:o,normalized:s}=r;Be(i,"multinomial");const l=s?i:K8({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],h=l.shape[1],d=n.data.get(l.dataId).values,p=[c,a],g=fr(ve(p),"int32");for(let y=0;y<c;++y){const x=y*h,b=new Float32Array(h-1);b[0]=d[x];for(let $=1;$<b.length;++$)b[$]=b[$-1]+d[x+$];const w=$I.alea(o.toString()),S=y*a;for(let $=0;$<a;++$){const T=w();g[S+$]=b.length;for(let k=0;k<b.length;k++)if(T<b[k]){g[S+$]=k;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",g)}const Cke={kernelName:SG,backendName:"cpu",kernelFunc:Ske};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ke=RI;function Tke(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;Be(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,{selectedIndices:d}=$ke(c,h,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const kke={kernelName:qE,backendName:"cpu",kernelFunc:Tke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ake=DI;function Eke(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:c}=r;Be(i,"NonMaxSuppressionPadded");const h=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,{selectedIndices:p,validOutputs:g}=Ake(h,d,o,s,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const Ike={kernelName:HE,backendName:"cpu",kernelFunc:Eke};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oke=MI;function Nke(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=r;Be(i,"NonMaxSuppressionWithScore");const h=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,p=o,g=s,y=l,x=c,{selectedIndices:b,selectedScores:w}=Oke(h,d,p,g,y,x);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const _ke={kernelName:XE,backendName:"cpu",kernelFunc:Nke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:a,depth:o,onValue:s,offValue:l}=r;Be(i,"oneHot");const c=ve(i.shape),h=new Float32Array(c*o);h.fill(l);const d=n.data.get(i.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<o&&(h[p*o+d[p]]=s);return n.makeTensorInfo([...i.shape,o],a,h)}const Dke={kernelName:g0,backendName:"cpu",kernelFunc:Rke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zv(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Gl({inputs:{input:r},backend:n}),a=Zv({inputs:{x:i},backend:n}),o=ef({inputs:{input:r},backend:n}),s=Zv({inputs:{x:o},backend:n}),l=Xr({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return BO({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Mke={kernelName:R0,backendName:"cpu",kernelFunc:Zv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y8(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Gl({inputs:{input:r},backend:n}),a=Y8({inputs:{x:i},backend:n}),o=ef({inputs:{input:r},backend:n}),s=Zv({inputs:{x:o},backend:n}),l=Xr({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return BO({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Pke={kernelName:m0,backendName:"cpu",kernelFunc:Y8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z8(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return Yv({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const a=e[0].shape,o=e[0].dtype;e.forEach(h=>{mE(a,h.shape,"All tensors passed to stack must have matching shapes"),j(o===h.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(h=>{const d=Yv({inputs:{input:h},backend:n,attrs:{dim:i}});return s.push(d),d}),c=tf({inputs:l,backend:n,attrs:{axis:i}});return s.forEach(h=>n.disposeIntermediateTensorInfo(h)),c}const Lke={kernelName:y0,backendName:"cpu",kernelFunc:Z8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fke(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:o}=r;Be(i,"pad");const s=a.map((S,$)=>S[0]+i.shape[$]+S[1]),l=a.map(S=>S[0]),c=n.data.get(i.dataId).values,h=ve(i.shape),d=i.shape.length,p=Ve(i.shape),g=ve(s),y=s.length,x=Ve(s),b=cr(i.dtype,g);o!==0&&b.fill(o);for(let S=0;S<h;S++){const T=vf(S,d,p).map((E,I)=>E+l[I]),k=_a(T,y,x);b[k]=c[S]}return{dataId:n.write(b,s,i.dtype),shape:s,dtype:i.dtype}}const Q8={kernelName:v0,backendName:"cpu",kernelFunc:Fke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bke=yn((t,e)=>Math.pow(t,e)),zke=Rn(qp,Bke),jke={kernelName:qp,backendName:"cpu",kernelFunc:zke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=e,{outputRaggedRank:s}=r,l=i.map(w=>n.data.get(w.dataId).values),c=i.map(w=>w.shape),h=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,[p,g,y]=y8(l,c,h,a.shape,a.dtype,d,o.shape),x=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),b=n.makeTensorInfo(y,a.dtype,g);return x.concat([b])}const Vke={kernelName:CG,backendName:"cpu",kernelFunc:Uke};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:a}=e,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[c,h]=v8(o,r.shape,r.dtype,s,i.shape,l,a.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([h.length],r.dtype,h);return[d,p]}const Gke={kernelName:$G,backendName:"cpu",kernelFunc:Wke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qke(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,p=s.map(b=>n.data.get(b.dataId).values),g=s.map(b=>b.shape),[y,x]=b8(c,i.shape,h,a.shape,a.dtype,d,o.shape,p,g,l);return n.makeTensorInfo(y,a.dtype,x)}const Hke={kernelName:TG,backendName:"cpu",kernelFunc:qke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xke(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:a,step:o}=n,s=x8(r,i,o,a);return e.makeTensorInfo([s.length],a,s)}const Kke={kernelName:KE,backendName:"cpu",kernelFunc:Xke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yke=_t(Hp,t=>1/t),Zke={kernelName:Hp,backendName:"cpu",kernelFunc:Yke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qke(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r;Be(i,"resizeBilinear");const l=Ve(i.shape),[c,h]=s,[d,p,g,y]=i.shape,x=n.data.get(i.dataId).values,b=new Float32Array(ve([d,c,h,y])),w=[a&&c>1?p-1:p,a&&h>1?g-1:g],S=[a&&c>1?c-1:c,a&&h>1?h-1:h];let $=0;const T=w[0]/S[0],k=w[1]/S[1];for(let E=0;E<d;E++)for(let I=0;I<c;I++){let _;o?_=T*(I+.5)-.5:_=T*I;const N=Math.max(0,Math.floor(_)),R=_-N,O=Math.min(p-1,Math.ceil(_)),P=E*l[0]+N*l[1],B=E*l[0]+O*l[1];for(let U=0;U<h;U++){let z;o?z=k*(U+.5)-.5:z=k*U;const M=Math.max(0,Math.floor(z)),V=z-M,W=Math.min(g-1,Math.ceil(z)),H=P+M*l[2],L=B+M*l[2],G=P+W*l[2],q=B+W*l[2];for(let K=0;K<y;K++){const oe=x[H+K],pe=x[L+K],ge=x[G+K],Re=x[q+K],Ee=oe+(ge-oe)*V,ye=pe+(Re-pe)*V,Ie=Ee+(ye-Ee)*R;b[$++]=Ie}}}return n.makeTensorInfo([d,c,h,y],"float32",b)}const Jke={kernelName:C0,backendName:"cpu",kernelFunc:Qke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r;Be([a,i],"resizeBilinearGrad");const s=Ve(i.shape),[l,c,h,d]=i.shape,[,p,g]=a.shape,y=new Float32Array(l*c*h*d),x=[o&&p>1?c-1:c,o&&g>1?h-1:h],b=[o&&p>1?p-1:p,o&&g>1?g-1:g],w=x[0]/b[0],S=x[1]/b[1],$=n.data.get(a.dataId).values;let T=0;for(let k=0;k<l;k++){const E=k*s[0];for(let I=0;I<p;I++){const _=I*w,N=Math.floor(_),R=Math.min(Math.ceil(_),c-1),O=E+N*s[1],P=E+R*s[1],B=_-N,U=1-B;for(let z=0;z<g;z++){const M=z*S,V=Math.floor(M),W=Math.min(Math.ceil(M),h-1),H=M-V,L=1-H,G=O+V*s[2],q=O+W*s[2],K=P+V*s[2],oe=P+W*s[2],pe=U*L,ge=U*H,Re=B*L,Ee=B*H;for(let ye=0;ye<d;ye++){const Ie=$[T++];y[G+ye]+=Ie*pe,y[q+ye]+=Ie*ge,y[K+ye]+=Ie*Re,y[oe+ye]+=Ie*Ee}}}}return n.makeTensorInfo([l,h,c,d],"float32",y)}const tAe={kernelName:QE,backendName:"cpu",kernelFunc:eAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r;Be(i,"resizeNearestNeighbor");const l=Ve(i.shape),[c,h]=s,[d,p,g,y]=i.shape,x=n.data.get(i.dataId).values,b=new Float32Array(d*c*h*y),w=[a&&c>1?p-1:p,a&&h>1?g-1:g],S=[a&&c>1?c-1:c,a&&h>1?h-1:h],$=w[0]/S[0],T=w[1]/S[1];let k=0;for(let E=0;E<d;E++){const I=E*l[0];for(let _=0;_<c;_++){const N=o?$*(_+.5):$*_;let R=Math.min(p-1,a?Math.round(N):Math.floor(N));o&&(R=Math.max(0,R));const O=I+R*l[1];for(let P=0;P<h;P++){const B=o?T*(P+.5):T*P;let U=Math.min(g-1,a?Math.round(B):Math.floor(B));o&&(U=Math.max(0,U));const z=O+U*l[2];for(let M=0;M<y;M++){const V=x[z+M];b[k++]=V}}}}return n.makeTensorInfo([d,c,h,y],i.dtype,b)}const rAe={kernelName:S0,backendName:"cpu",kernelFunc:nAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r;Be([a,i],"resizeNearestNeighborGrad");const s=Ve(i.shape),l=Ve(a.shape),[c,h,d,p]=i.shape,[,g,y]=a.shape,x=new Float32Array(c*h*d*p),b=n.data.get(a.dataId).values,w=[o&&g>1?h-1:h,o&&y>1?d-1:d],S=[o&&g>1?g-1:g,o&&y>1?y-1:y],$=w[0]/S[0],T=w[1]/S[1],k=1/$,E=1/T,I=Math.ceil(k)*2+2,_=Math.ceil(E)*2+2;for(let N=0;N<c;N++){const R=N*s[0];for(let O=0;O<h;O++){const P=R+O*s[1],B=Math.floor(O*k),U=Math.floor(B-I/2);for(let z=0;z<d;z++){const M=P+z*s[2],V=Math.floor(z*E),W=Math.floor(V-_/2);for(let H=0;H<p;H++){let L=0;for(let G=0;G<I;G++){const q=G+U;if(q<0||q>=g)continue;const K=R+q*l[1],oe=q*$,pe=Math.min(h-1,o?Math.round(oe):Math.floor(oe));if(O===pe)for(let ge=0;ge<_;ge++){const Re=ge+W;if(Re<0||Re>=y)continue;const Ee=K+Re*l[2],ye=Re*T,Ie=Math.min(d-1,o?Math.round(ye):Math.floor(ye));z===Ie&&(L+=b[Ee+H])}}x[M+H]=L}}}}return n.makeTensorInfo(i.shape,i.dtype,x)}const aAe={kernelName:ZE,backendName:"cpu",kernelFunc:iAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:a}=r;Be(i,"reverse");const o=i.shape.length,s=ut(a,i.shape);if(o===0)return Va({inputs:{x:i},backend:n});const l=new Qn(i.shape,i.dtype),c=n.bufferSync(i);for(let h=0;h<l.size;h++){const d=l.indexToLoc(h),p=d.slice();s.forEach(g=>p[g]=i.shape[g]-1-p[g]),l.set(c.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const sAe={kernelName:$0,backendName:"cpu",kernelFunc:oAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lAe={kernelName:aI,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:o}=e,s=n,l=cr(r.dtype,ve(r.shape)),[c,h,d,p]=r.shape,[g,y]=qI(o,h,d),x=255,b=Math.sin(i),w=Math.cos(i),S=s.data.get(r.dataId).values;for(let T=0;T<c;T++){const k=T*d*h*p;for(let E=0;E<h;E++){const I=E*(d*p);for(let _=0;_<d;_++){const N=_*p;for(let R=0;R<p;R++){const O=[c,E,_,R],P=O[2],B=O[1];let U=(P-g)*w-(B-y)*b,z=(P-g)*b+(B-y)*w;U=Math.round(U+g),z=Math.round(z+y);let M=a;if(typeof a!="number"&&(R===3?M=x:M=a[R]),U>=0&&U<d&&z>=0&&z<h){const W=z*(d*p),H=U*p,L=k+W+H+R;M=S[L]}const V=k+I+N+R;l[V]=M}}}}return{dataId:s.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uAe=_t(Yp,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),cAe={kernelName:Yp,backendName:"cpu",kernelFunc:uAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fAe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:a}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:h,outputSize:d}=nu(a,i,o),p=!0,g=n.bufferSync(i),y=n.bufferSync(a),x=Cl(g,y,o,d,c,l,s,h,0,p);return n.makeTensorInfo(o,x.dtype,x.values)}const hAe={kernelName:kG,backendName:"cpu",kernelFunc:fAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dAe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function pAe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function mAe(t,e,n,r,i,a){const o=hn("int32",n*i);for(let s=0;s<n;++s){const l=t.slice(s*r,(s+1)*r),c=s*i;for(let h=0;h<i;++h)o[c+h]=a==="left"?dAe(l,e[h+c]):pAe(l,e[h+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gAe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:a}=e,{side:o}=r,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,c=mAe(s,l,i.shape[0],i.shape[1],a.shape[1],o);return n.makeTensorInfo(a.shape,"int32",c)}const yAe={kernelName:EG,backendName:"cpu",kernelFunc:gAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vAe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:a}=e;Be([r,i,a],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,h=Zr(i.dtype,a.dtype),d=fr(ve(i.shape),h);let p=0;const g=o===0||o>1||i.shape.length===1?1:ve(i.shape.slice(1));for(let y=0;y<s.length;y++)for(let x=0;x<g;x++)s[y]===1?d[p++]=l[y]:d[p++]=c[y];return n.makeTensorInfo(i.shape,h,d)}const bAe={kernelName:T0,backendName:"cpu",kernelFunc:vAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xAe=G0,wAe=q0,SAe=_t(Qp,t=>t>=0?wAe*t:xAe*(Math.exp(t)-1)),CAe={kernelName:Qp,backendName:"cpu",kernelFunc:SAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ae=_t(tm,t=>t<0?-1:t>0?1:0),TAe={kernelName:tm,backendName:"cpu",kernelFunc:$Ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAe=_t(Jp,t=>Math.sin(t)),AAe={kernelName:Jp,backendName:"cpu",kernelFunc:kAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EAe=_t(em,t=>Math.sinh(t)),IAe={kernelName:em,backendName:"cpu",kernelFunc:EAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OAe=11920928955078125e-23,rj=Math.log(OAe)+2,NAe=_t(rm,t=>{const e=t>-rj,n=t<rj,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),_Ae={kernelName:rm,backendName:"cpu",kernelFunc:NAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:o}=r;Be([i],"spaceToBatchND");const s=ve(a),l=[[0,0]];l.push(...o);for(let E=1+a.length;E<i.shape.length;++E)l.push([0,0]);const c=Q8.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),h=gm(c.shape,a,s,!1),d=ym(h.length,a.length,!1),p=vm(c.shape,a,s,!1),x=Ht({inputs:{x:c},backend:n,attrs:{shape:h}}),S=Fr({inputs:{x},backend:n,attrs:{perm:d}}),k=Ht({inputs:{x:S},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),k}const DAe={kernelName:E0,backendName:"cpu",kernelFunc:RAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,h=n.data.get(o.dataId).values[0],[d,p,g,y,x]=$8(s,r.shape,r.dtype,l,i.dtype,c,h);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(b=>Number(b)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const PAe={kernelName:IG,backendName:"cpu",kernelFunc:MAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LAe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(n.data.get(i.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[c,h,d]=T8(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(h,r.dtype,c),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}const FAe={kernelName:OG,backendName:"cpu",kernelFunc:LAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BAe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[c,h]=MO(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(h,r.dtype,c)}const zAe={kernelName:NG,backendName:"cpu",kernelFunc:BAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jAe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[c,h]=MO(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(h,r.dtype,c)}const UAe={kernelName:_G,backendName:"cpu",kernelFunc:jAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:a,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:c,sliceSize:h,strides:d,outputSize:p}=nu(a,i,s),g=!1,y=n.bufferSync(i);let x;switch(a.dtype){case"bool":{const b=n.bufferSync(a),w=!!n.data.get(o.dataId).values[0];x=Cl(y,b,s,p,h,c,l,d,w,g);break}case"float32":{const b=n.bufferSync(a),w=n.data.get(o.dataId).values[0];x=Cl(y,b,s,p,h,c,l,d,w,g);break}case"int32":{const b=n.bufferSync(a),w=n.data.get(o.dataId).values[0];x=Cl(y,b,s,p,h,c,l,d,w,g);break}case"string":{const b=n.bufferSync(a),w=Ss(n.data.get(o.dataId).values[0]);x=Cl(y,b,s,p,h,c,l,d,w,g);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(s,x.dtype,x.values)}const WAe={kernelName:RG,backendName:"cpu",kernelFunc:VAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:a,axis:o}=r,s=ut(o,i.shape)[0],l=sO(i,a,s),c=new Array(i.shape.length).fill(0),h=i.shape.slice();return l.map(d=>{const p=[...h];p[s]=d;const g=ql({inputs:{x:i},backend:n,attrs:{begin:c,size:p}});return c[s]+=d,g})}const qAe={kernelName:I0,backendName:"cpu",kernelFunc:GAe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe={kernelName:JE,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Be(n,"square");const i=r.data.get(n.dataId).values,a=new Float32Array(i.length);for(let s=0;s<i.length;++s){const l=i[s];a[s]=l*l}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XAe=_t(cm,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),KAe={kernelName:cm,backendName:"cpu",kernelFunc:XAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,end:o,strides:s,beginMask:l,endMask:c,ellipsisMask:h,newAxisMask:d,shrinkAxisMask:p}=r;Be(i,"stridedSlice");const{finalShapeSparse:g,finalShape:y,isIdentity:x,sliceDim0:b,isSimpleSlice:w,begin:S,end:$,strides:T}=VI(i.shape,a,o,s,l,c,h,d,p);let k;if(x)k=Ht({inputs:{x:i},backend:n,attrs:{shape:y}});else if(b||w){j(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const E=zI(S,$,T),I=ql({inputs:{x:i},backend:n,attrs:{begin:S,size:E}});k=Ht({inputs:{x:I},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(I)}else{const E=n.bufferSync(i),I=E8(g,E,T,S);k=n.makeTensorInfo(y,I.dtype,I.values)}return k}const ZAe={kernelName:tI,backendName:"cpu",kernelFunc:YAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QAe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:c}=r,{data:h,dataSplits:d}=e,p=n.data.get(h.dataId).values,g=n.data.get(d.dataId).values,[y,x]=I8(p,g,i,a,o,s,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(d.shape,"int32",x)]}const JAe={kernelName:DG,backendName:"cpu",kernelFunc:QAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values[0],[c,h,d]=O8(s,l,i),p=h.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const tEe={kernelName:MG,backendName:"cpu",kernelFunc:eEe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nEe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(a.dataId).values,s=N8(o,i);return n.makeTensorInfo(a.shape,"int32",s)}const rEe={kernelName:PG,backendName:"cpu",kernelFunc:nEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iEe=_t(sm,t=>Math.tan(t)),aEe={kernelName:sm,backendName:"cpu",kernelFunc:iEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oEe=_t(lm,t=>Math.tanh(t)),sEe={kernelName:lm,backendName:"cpu",kernelFunc:oEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:a}=e,{sliceRank:o,numUpdates:s,sliceSize:l,strides:c,outputSize:h}=nu(a,i,r.shape),d=!1,p=n.bufferSync(i),g=n.bufferSync(a),y=n.bufferSync(r),x=Cl(p,g,r.shape,h,l,s,o,c,y,d);return n.makeTensorInfo(r.shape,x.dtype,x.values)}const uEe={kernelName:AG,backendName:"cpu",kernelFunc:lEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:a}=r;Be(i,"tile");const o=R8(n.bufferSync(i),a);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const fEe={kernelName:um,backendName:"cpu",kernelFunc:cEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:a,sorted:o}=r;Be(i,"topk");const s=n.data.get(i.dataId).values,[l,c]=M8(s,i.shape,i.dtype,a,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const dEe={kernelName:nI,backendName:"cpu",kernelFunc:hEe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pEe(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:a}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:c}=n,[h,d,p,g]=i.shape,[y,x]=c??[d,p],b=[h,y,x,g],w=Ve(i.shape),S=w[0],$=w[1],T=w[2],k=Ve(b),E=k[0],I=k[1],_=k[2],N=cr(i.dtype,ve(b));N.fill(l);const R=r.data.get(i.dataId).values,O=r.data.get(a.dataId).values;for(let B=0;B<h;++B){const U=a.shape[0]===1?O:O.subarray(B*8,B*8+8);for(let z=0;z<y;++z)for(let M=0;M<x;++M)for(let V=0;V<g;++V){let W;const H=U[6]*M+U[7]*z+1;if(H===0)continue;const L=(U[0]*M+U[1]*z+U[2])/H,G=(U[3]*M+U[4]*z+U[5])/H,q=ij(L,p,s),K=ij(G,d,s);switch(o){case"nearest":W=xEe(R,d,p,S,$,T,B,K,q,V,l);break;case"bilinear":W=wEe(R,d,p,S,$,T,B,K,q,V,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const oe=B*E+z*I+M*_+V;N[oe]=W}return r.makeTensorInfo(b,i.dtype,N)}return{dataId:r.write(N,b,i.dtype),shape:i.shape,dtype:i.dtype}}const mEe={kernelName:rI,backendName:"cpu",kernelFunc:pEe};function ij(t,e,n){switch(n){case"reflect":return gEe(t,e);case"wrap":return yEe(t,e);case"nearest":return bEe(t,e);case"constant":default:return vEe(t)}}function gEe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Dl(0,n,e-1)}function yEe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Dl(0,n,e-1)}function vEe(t,e){return t}function bEe(t,e){return Dl(0,t,e-1)}function nd(t,e,n,r,i,a,o,s,l,c,h){const d=o*r+s*i+l*a+c;return 0<=s&&s<e&&0<=l&&l<n?t[d]:h}function xEe(t,e,n,r,i,a,o,s,l,c,h){const d=Math.round(s),p=Math.round(l);return nd(t,e,n,r,i,a,o,d,p,c,h)}function wEe(t,e,n,r,i,a,o,s,l,c,h){const d=Math.floor(s),p=Math.floor(l),g=d+1,y=p+1,x=(y-l)*nd(t,e,n,r,i,a,o,d,p,c,h)+(l-p)*nd(t,e,n,r,i,a,o,d,y,c,h),b=(y-l)*nd(t,e,n,r,i,a,o,g,p,c,h)+(l-p)*nd(t,e,n,r,i,a,o,g,y,c,h);return(g-s)*x+(s-d)*b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SEe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;Be(a,"unique");const o=r.data.get(a.dataId).values,{outputValues:s,outputShape:l,indices:c}=P8(o,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}const CEe={kernelName:iI,backendName:"cpu",kernelFunc:SEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ee(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i.shape.length,s=i.shape[a],l=new Array(o-1);let c=0;for(let g=0;g<o;g++)g!==a&&(l[c++]=i.shape[g]);const h=new Array(o).fill(0),d=i.shape.slice();d[a]=1;const p=new Array(s);for(let g=0;g<p.length;g++){h[a]=g;const y=ql({inputs:{x:i},backend:n,attrs:{begin:h,size:d}});p[g]=Ht({inputs:{x:y},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(y)}return p}const TEe={kernelName:N0,backendName:"cpu",kernelFunc:$Ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:a}=e,{numSegments:o}=r;Be(i,"unsortedSegmentSum");const s=i.shape.length,l=a.shape.length,c=[],h=[],d=s-l;let p=a;for(let y=0;y<d;++y){const x=Yv({inputs:{input:p},backend:n,attrs:{dim:y+1}});p=x,h.push(x)}for(let y=0;y<o;++y){const x=Ps(y,"int32"),b=n.makeTensorInfo([],"int32",x),w=Z5({inputs:{a:b,b:p},backend:n}),S=As({inputs:{x:w},backend:n,attrs:{dtype:"float32"}}),$=ax({inputs:{a:S,b:i},backend:n}),T=Am({inputs:{x:$},backend:n,attrs:{axis:0,keepDims:!1}});c.push(T),h.push(b),h.push(w),h.push(S),h.push($),h.push(T)}const g=Z8({inputs:c,backend:n,attrs:{axis:0}});return h.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const AEe={kernelName:_0,backendName:"cpu",kernelFunc:kEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EEe=[S$e,nCe,$$e,k$e,lCe,E$e,O$e,_$e,D$e,P$e,F$e,z$e,U$e,G$e,H$e,Y$e,Q$e,eTe,nTe,x$e,iTe,oTe,lTe,cCe,cTe,oCe,hCe,hTe,rCe,pTe,gTe,yTe,bTe,wTe,CTe,TTe,ATe,ITe,NTe,RTe,MTe,LTe,BTe,jTe,UTe,WTe,qTe,XTe,KTe,YTe,ZTe,JTe,n2e,d$e,i2e,dCe,h2e,pCe,d2e,gCe,b2e,x2e,S2e,vCe,xCe,$2e,k2e,E2e,O2e,SCe,$Ce,iCe,_2e,mTe,D2e,P2e,F2e,p$e,kCe,ECe,z2e,OCe,U2e,G2e,H2e,Y2e,Q2e,eke,tke,_Ce,rke,ake,ske,uke,fke,dke,mke,DCe,yke,xke,Cke,PCe,FCe,kke,Ike,_ke,zCe,Dke,Pke,Lke,Q8,jke,g$e,VCe,Vke,Gke,Hke,Kke,aCe,Kk,Zke,y$e,v$e,b$e,Jke,tAe,rAe,aAe,sAe,lAe,cAe,ZCe,hAe,yAe,bAe,CAe,JCe,TAe,AAe,IAe,e$e,wke,_Ae,DAe,PAe,FAe,zAe,UAe,WAe,qAe,r$e,HAe,a$e,s$e,KAe,ZAe,JAe,tEe,rEe,f$e,e2e,aEe,sEe,uEe,fEe,dEe,mEe,jCe,CEe,TEe,AEe,Mke];for(const t of EEe)FG(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gl={},cy={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function IEe(t,e){gl[t]=e}function ha(t,e){if(!(t in gl)||e!=null){const r=NEe(t,e);if(r!==null)gl[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=gl[t];return n==null||n.isContextLost()?(delete gl[t],ha(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),gl[t])}function OEe(t){if(!he().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function NEe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??OEe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete gl[t]},!1),he().getBool("SOFTWARE_WEBGL_ENABLED")&&(cy.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",cy)||n.getContext("experimental-webgl",cy):n.getContext("webgl2",cy)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var tp;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(tp||(tp={}));var di;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(di||(di={}));var Zn;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Zn||(Zn={}));function Em(t,e){return[e,t]}function _Ee(t,e){return t*e}function fy(t){const e=ve(t),n=Math.ceil(e/4);return vk(n)}function kf(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function REe(t,e){const[n,r]=kf(t,e);return n*r*4}function zO(t,e){const n=t;let r,i,a,o,s,l,c,h,d,p;return he().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,a=n.RGBA16F,o=n.RGBA32F,s=n.RED,c=4,h=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,a=t.RGBA,o=n.RGBA,s=t.RGBA,c=4,h=4,d=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:h,textureTypeHalfFloat:d,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Me(t,e){const n=e();return he().getBool("DEBUG")&&DEe(t),n}function DEe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+FEe(t,e))}const MEe=596e-10,PEe=65504;function LEe(t){return!!(he().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||MEe<Math.abs(t)&&Math.abs(t)<PEe)}function FEe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function hy(t,e){return Fo(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function BEe(t,e){const n=Fo(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Me(t,()=>t.shaderSource(n,e)),Me(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function zEe(t,e){const n=Fo(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Me(t,()=>t.shaderSource(n,e)),Me(t,()=>t.compileShader(n)),he().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw J8(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const jEe=/ERROR: [0-9]+:([0-9]+):/g;function J8(t,e){const n=jEe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),a=i.length.toString().length+2,o=i.map((d,p)=>dc((p+1).toString(),a)+d);let s=0;for(let d=0;d<o.length;d++)s=Math.max(o[d].length,s);const l=o.slice(0,r-1),c=o.slice(r-1,r),h=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${dc(c[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join(`
`))}function UEe(t){return Fo(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function VEe(t,e){if(Me(t,()=>t.linkProgram(e)),!he().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function WT(t,e){if(Me(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function WEe(t,e){const n=Fo(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Me(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Me(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function GEe(t,e){const n=Fo(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Me(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Me(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function qEe(t){return Fo(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function HEe(t,e){const n=he().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function XEe(t){return Fo(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function aj(t,e,n,r,i,a,o){const s=t.getAttribLocation(e,n);return s===-1?!1:(Me(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Me(t,()=>t.vertexAttribPointer(s,i,t.FLOAT,!1,a,o)),Me(t,()=>t.enableVertexAttribArray(s)),!0)}function KEe(t,e,n){eIe(t,n),Me(t,()=>t.activeTexture(t.TEXTURE0+n)),Me(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function YEe(t,e,n){return Fo(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function ZEe(t,e,n){return t.getUniformLocation(e,n)}function QEe(t,e,n,r){Me(t,()=>KEe(t,e,r)),Me(t,()=>t.uniform1i(n,r))}function GT(t,e,n){Me(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Me(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function oj(t,e){Me(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Me(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function dy(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+JEe(t,e))}function JEe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Fo(t,e,n){const r=Me(t,()=>e());if(r==null)throw new Error(n);return r}function eIe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function nf(t,e=2){return ve(t.slice(0,t.length-e))}function rf(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function py(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[nf(t),...rf(t)]),e}function tIe(t,e=!1){let n=he().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=he().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&he().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((s,l)=>l>=t.length-2?pE(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Ms(t).newShape);let i=ve(t),a=null;t.length<=1&&i<=n?a=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?a=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?a=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?a=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?a=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(a=[t[0],t[1]*t[2]*t[3]]);const o=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(a==null||o)if(e){const s=nf(t);let l=2,c=2;t.length&&([l,c]=rf(t)),i=s*(l/2)*(c/2),a=vk(i).map(h=>h*2)}else a=vk(i);return a}function my(t){return t%2===0}function Qv(t,e){if(t=t.slice(-2),e=e.slice(-2),At(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||my(n)&&my(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&my(t[0])&&my(e[0])}let qT,HT;function nIe(t){if(qT==null){const e=ha(t);qT=e.getParameter(e.MAX_TEXTURE_SIZE)}return qT}function rIe(t){if(HT==null){const e=ha(t);HT=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,HT)}function iIe(t){if(t===0)return 0;let e;const n=ha(t);return Mi(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Mi(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Mi(t,e){return t.getExtension(e)!=null}function sj(t){try{if(ha(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function aIe(t){if(t===0)return!1;const e=ha(t);if(t===1){if(!Mi(e,"OES_texture_float"))return!1}else if(!Mi(e,"EXT_color_buffer_float"))return!1;return Zk(e)}function oIe(t){if(t===0)return!1;const e=ha(t);if(t===1){if(!Mi(e,"OES_texture_float")||!Mi(e,"WEBGL_color_buffer_float"))return!1}else{if(Mi(e,"EXT_color_buffer_float"))return Zk(e);const r="EXT_color_buffer_half_float";if(Mi(e,r)){const i=e.getExtension(r);return sIe(e,i)}return!1}return Zk(e)}function Zk(t){const e=zO(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(a),o}function sIe(t,e){const n=zO(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function lIe(t){return t!==2?!1:ha(t).fenceSync!=null}function Im(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&j(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const je=he();je.registerFlag("HAS_WEBGL",()=>je.getNumber("WEBGL_VERSION")>0);je.registerFlag("WEBGL_VERSION",()=>sj(2)?2:sj(1)?1:0);je.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);je.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>je.get("WEBGL_VERSION")===2);je.registerFlag("WEBGL_CPU_FORWARD",()=>!0);je.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);je.registerFlag("WEBGL_PACK",()=>je.getBool("HAS_WEBGL"));je.registerFlag("WEBGL_PACK_NORMALIZATION",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_CLIP",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_REDUCE",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_LAZILY_UNPACK",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_CONV_IM2COL",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>je.getBool("WEBGL_PACK"));je.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>nIe(je.getNumber("WEBGL_VERSION")));je.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>rIe(je.getNumber("WEBGL_VERSION")));je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=je.getNumber("WEBGL_VERSION");return t===0?0:iIe(t)});je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>je.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!ZG());je.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>aIe(je.getNumber("WEBGL_VERSION")));je.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>je.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:je.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));je.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>oIe(je.getNumber("WEBGL_VERSION")));je.registerFlag("WEBGL_FENCE_API_ENABLED",()=>lIe(je.getNumber("WEBGL_VERSION")));je.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>je.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);je.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});je.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>ZG()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});je.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);je.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);je.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);je.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);je.registerFlag("WEBGL_EXP_CONV",()=>!1);je.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>je.getBool("IS_TEST"));je.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);je.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);je.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);je.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Er(){let t,e,n,r,i,a,o,s,l,c;return he().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=he().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function au(t,e,n="index"){const r=Ve(e);return r.map((i,a)=>{const o=`int ${t[a]} = ${n} / ${i}`,s=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i}`:`index -= ${t[a]} * ${i}`;return`${o}; ${s};`}).join("")}function ox(t,e,n="index"){const r=Ve(e);return r.map((i,a)=>{const o=`int ${t[a]} = ${n} / outShapeStrides[${a}]`,s=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * outShapeStrides[${a}]`:`index -= ${t[a]} * outShapeStrides[${a}]`;return`${o}; ${s};`}).join("")}function uIe(t,e){const n=t.length,r=t.map(a=>`${e}[${a}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let a=n-3;a>=0;--a)i[a]=`(${i[a+1]} * ${r[a+1]})`;return i}function cIe(t,e,n="index"){const r=t.map((a,o)=>o),i=uIe(r,e);return i.map((a,o)=>{const s=`int ${t[o]} = ${n} / ${i[o]}`,l=o===i.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`;return`${s}; ${l};`}).join("")}function jO(t){const e=Ve(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function UO(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const eX=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:tX}=Q0e;function fIe(t,e,n){const r=[];if(t.forEach(g=>{const y=ve(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?r.push(`uniform float ${g.name}${y>1?`[${y}]`:""};`):(r.push(`uniform sampler2D ${g.name};`),r.push(`uniform int offset${g.name};`)),n.enableShapeUniforms){const{uniformShape:x}=VO(n.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(x.length){case 1:r.push(`uniform int ${g.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${g.name}Shape;`);break}r.push(`uniform ivec2 ${g.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(g=>{r.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const i=r.join(`
`),a=t.map(g=>hIe(g,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,s=Er(),l=mIe(s);let c,h,d=vIe(s);return e.isPacked?(c=dIe(e.logicalShape,o,n.enableShapeUniforms),h=yIe(s)):(c=pIe(e.logicalShape,o,n.enableShapeUniforms),h=gIe(s)),n.packedInputs&&(d+=SIe),[d,l,h,i,c,a,n.userCode].join(`
`)}function Af(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return DIe(t,e);case 1:return PIe(t,e);case 2:return FIe(t,e);case 3:return zIe(t,e);case 4:return UIe(t,e);case 5:return VIe(t);case 6:return WIe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function nX(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return RIe(t);case 1:return MIe(t,e);case 2:return LIe(t,e);case 3:return BIe(t,e);default:return jIe(t,e)}}function hIe(t,e,n=!1,r){let i="";n?i+=nX(t,r):i+=Af(t,r);const a=t.shapeInfo.logicalShape,o=e.logicalShape;return a.length<=o.length&&(n?i+=GIe(t,e):i+=qIe(t,e)),i}function dIe(t,e,n){switch(t.length){case 0:return rX();case 1:return CIe(t,e,n);case 2:return NIe(t,e,n);case 3:return TIe(t,e,n);default:return AIe(t,e,n)}}function pIe(t,e,n){switch(t.length){case 0:return rX();case 1:return $Ie(t,e,n);case 2:return _Ie(t,e,n);case 3:return kIe(t,e,n);case 4:return EIe(t,e,n);case 5:return IIe(t,e);case 6:return OIe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function mIe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function gIe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function yIe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function vIe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${bIe}
    ${xIe}
    ${wIe}
  `}const bIe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,xIe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,wIe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SIe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function rX(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function CIe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function $Ie(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function TIe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),a=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function kIe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${ox(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=au(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function AIe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),a=i*Math.ceil(t[t.length-2]/2);let o=a,s="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],s=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+s,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function EIe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${ox(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=au(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function IIe(t,e){const n=au(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function OIe(t,e){const n=au(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function NIe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(At(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function _Ie(t,e,n){return At(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function ou(t){return`offset${t}`}function RIe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Er();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function DIe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,a]=t.shapeInfo.texShape;if(i===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=ou(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[s,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function MIe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,a=Er();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${a.texture2D}(${n}, uv);
    }
  `}function PIe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Ef(t)}
      }
    `;const i=t.shapeInfo.texShape,a=i[0],o=i[1];if(o===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=ou(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${a}.0);
        return sampleTexture(${n}, uv);
      }
    `:a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${o}, index + ${s});
      return sampleTexture(${n}, uv);
    }
  `}function LIe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=a[0],s=a[1],l=Er();if(a!=null&&At(n,a))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],h=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${h}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function FIe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape;if(a!=null&&At(n,a)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=a[0],g=a[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=Ms(n),l=o;if(l.length<n.length){const p=If(t,l),g=["row","col"];return`
      ${Af(p,e)}
      float ${i}(int row, int col) {
        return ${i}(${Of(g,s)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Ef(t)}
      }
    `;const c=a[0],h=a[1],d=ou(r);return h===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${h}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${h}, index);
    return sampleTexture(${r}, uv);
  }
`}function BIe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(n[0]===1){const p=n.slice(1),g=[1,2],y=If(t,p),x=["b","row","col"];return`
        ${nX(y,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${Of(x,g)});
        }
      `}const s=Er();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],h=Math.ceil(n[2]/2),d=h*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${h}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function zIe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],o=n[2],{newShape:s,keptDims:l}=Ms(n),c=s;if(c.length<n.length){const x=If(t,c),b=["row","col","depth"];return`
        ${Af(x,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${Of(b,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${o}, 1)));
        ${Ef(t)}
      }
    `;const h=t.shapeInfo.texShape,d=h[0],p=h[1],g=t.shapeInfo.flatOffset;if(p===a&&g==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===o&&g==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const y=ou(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${y};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${o} + depth + ${y};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function jIe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Er();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const a=t.shapeInfo.logicalShape,o=a.length,s=t.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=l[0],h=l[1],d=Math.ceil(a[o-1]/2);let p=d*Math.ceil(a[o-2]/2),g="int b, int row, int col",y=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let x=2;x<o-1;x++)g=`int b${x}, `+g,p*=a[o-x-1],y=`b${x} * ${p} + `+y;return`
    vec4 ${r}(${g}) {
      int index = ${y};
      int texR = index / ${h};
      int texC = index - texR * ${h};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function UIe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],o=n[2]*a,s=n[1]*o,{newShape:l,keptDims:c}=Ms(n);if(l.length<n.length){const S=If(t,l),$=["row","col","depth","depth2"];return`
      ${Af(S,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${Of($,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${a}, 1)));
        ${Ef(t)}
      }
    `;const h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],g=d[1],y=`int stride2 = ${r}Shape[3];`,x=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(g===s&&h==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${y}
        ${x}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(g===a&&h==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const w=ou(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${y}
      ${x}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${w});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${w});
      return sampleTexture(${r}, uv);
    }
  `}function VIe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],a=e[3]*i,o=e[2]*a,s=e[1]*o,{newShape:l,keptDims:c}=Ms(e);if(l.length<e.length){const x=If(t,l),b=["row","col","depth","depth2","depth3"];return`
      ${Af(x)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Of(b,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${a}, ${i})) +
          depth3;
        ${Ef(t)}
      }
    `;const h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],g=d[1];if(g===s&&h==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===i&&h==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=ou(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${a} +
          depth2 * ${i} + depth3 + ${y};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function WIe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:a}=Ms(e);if(i.length<e.length){const b=If(t,i),w=["row","col","depth","depth2","depth3","depth4"];return`
      ${Af(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Of(w,a)});
      }
    `}const o=e[5],s=e[4]*o,l=e[3]*s,c=e[2]*l,h=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${h}, ${c}, ${l}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Ef(t)}
      }
    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,g=p[0],y=p[1];if(y===h&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(y===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;const x=ou(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${h} + col * ${c} + depth * ${l} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${x};
      vec2 uv = uvFromFlat(${g}, ${y}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Ef(t){const e=t.name,n=ve(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function GIe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=tX(t.shapeInfo.logicalShape,e.logicalShape),l=Mt(o),c=o-a;let h;const d=["x","y","z","w","u","v"];a===0?h="":o<2&&s.length>=1?h="coords = 0;":h=s.map(S=>`coords.${d[S+c]} = 0;`).join(`
`);let p="";o<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((S,$)=>`coords.${d[$+c]}`).join(", ");let g="return outputValue;";const x=ve(t.shapeInfo.logicalShape)===1,w=ve(e.logicalShape)===1;if(a===1&&!x&&!w)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(x&&!w)o===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(s.length){const S=a-2,$=a-1;s.indexOf(S)>-1&&s.indexOf($)>-1?g="return vec4(outputValue.x);":s.indexOf(S)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf($)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${h}
      vec4 outputValue = get${r}(${p});
      ${g}
    }
  `}function qIe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===l&&t.shapeInfo.flatOffset==null&&At(o,a))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Mt(l),h=tX(t.shapeInfo.logicalShape,e.logicalShape),d=l-s;let p;const g=["x","y","z","w","u","v"];s===0?p="":l<2&&h.length>=1?p="coords = 0;":p=h.map(x=>`coords.${g[x+d]} = 0;`).join(`
`);let y="";return l<2&&s>0?y="coords":y=t.shapeInfo.logicalShape.map((x,b)=>`coords.${g[b+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${y});
    }
  `}function Mt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function VO(t,e,n){const{newShape:r,keptDims:i}=Ms(e),a=e.length,o=t&&a===3&&e[0]===1,s=o?e.slice(1):r,l=!t&&a>1&&!At(e,n)&&r.length<a||o;return{useSqueezeShape:l,uniformShape:l?s:e,keptDims:i}}function If(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Of(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HIe(t,e,n,r){const i=n.map((h,d)=>{const p={logicalShape:h.shape,texShape:h.isUniform?null:h.texData.texShape,isUniform:h.isUniform,isPacked:h.isUniform?!1:h.texData.isPacked,flatOffset:null};return h.texData!=null&&h.texData.slice!=null&&h.texData.slice.flatOffset>0&&(p.flatOffset=h.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:p}}),a=i.map(h=>h.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=fIe(i,o,e),l=zEe(t.gl,s),c=t.createProgram(l);return he().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:a,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:a,outShapeInfo:o},iX(t,e,c)))}function iX(t,e,n){const r=[],i=[];let a,o,s,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),he().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const h=!1;for(const d of e.variableNames){const p={name:d,uniform:t.getUniformLocation(n,d,h),offset:t.getUniformLocation(n,`offset${d}`,h)};e.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${d}Shape`,h),p.texShape=t.getUniformLocation(n,`${d}TexShape`,h)),r.push(p)}if(e.enableShapeUniforms&&(a=t.getUniformLocation(n,"outShape",h),s=t.getUniformLocation(n,"outShapeStrides",h),o=t.getUniformLocation(n,"outTexShape",h)),e.customUniforms)for(const d of e.customUniforms)i.push(t.getUniformLocation(n,d.name,h));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:a,outShapeStridesLocation:s,outTexShapeLocation:o}}function lj(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,a=e[r],o=a.shape;if(!At(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&a.isUniform)return;const s=n.texShape,l=a.isUniform?null:a.texData.texShape;if(!At(s,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${l} must match`)})}function XIe(t,e,n,r,i){e.program.enableShapeUniforms||(lj(e.inShapeInfos,n),lj([e.outShapeInfo],[r]));const a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a.texture,o[0],o[1]):t.setOutputMatrixTexture(a.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),he().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:h,offset:d,shape:p,texShape:g}=e.variablesLocations[l];if(p){const{uniformShape:y}=VO(e.program.packedInputs,c.shape,c.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(p,new Int32Array(y));break;case 2:t.gl.uniform2iv(p,new Int32Array(y));break;case 3:t.gl.uniform3iv(p,new Int32Array(y));break;case 4:t.gl.uniform4iv(p,new Int32Array(y));break}}if(g&&t.gl.uniform2i(g,c.texData.texShape[0],c.texData.texShape[1]),h!=null){if(c.isUniform){if(ve(c.shape)<2)t.gl.uniform1f(h,c.uniformValues[0]);else{let y=c.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(h,y)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,h,l)}}const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Ve(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],h=e.customUniformLocations[l],d=i[l];if(c.type==="float")t.gl.uniform1fv(h,d);else if(c.type==="vec2")t.gl.uniform2fv(h,d);else if(c.type==="vec3")t.gl.uniform3fv(h,d);else if(c.type==="vec4")t.gl.uniform4fv(h,d);else if(c.type==="int")t.gl.uniform1iv(h,d);else if(c.type==="ivec2")t.gl.uniform2iv(h,d);else if(c.type==="ivec3")t.gl.uniform3iv(h,d);else if(c.type==="ivec4")t.gl.uniform4iv(h,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function KIe(t,e,n){let r="";e.concat(n).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:h,keptDims:d}=VO(t.packedInputs,o.shape,l);let p="",g="",y="";if(h.length===1&&t.packedInputs){const k=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${k[0]>1}_${k[1]>1}`}else if(h.length===2&&!t.packedInputs)g=`${h[0]>1}_${h[1]>1}`;else if(h.length>2&&!t.packedInputs){const k=Ve(h);y=`${k[0]===l[1]}_${k[k.length-1]===l[1]}`}const x=o.shape.length,b=h.length===2&&At(o.shape,l),w=ve(o.shape)===1,S=Kc(o.shape,n.shape),$=!t.packedInputs&&x===n.shape.length&&At(l,n.texData.texShape),T=t.packedInputs||h.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${x}_${$}_${c?d:""}_${h.length}_${w}_${S}_${b}_${p}_${g}_${y}_${T}_${s}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${s}`}});const i=t.userCode;let a=t.constructor.name;return a+="_"+r+"_"+i+`${he().getNumber("WEBGL_VERSION")}`,a}function mr(t){return he().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YIe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=tp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Er();this.outputShape=e,this.enableShapeUniforms=mr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?ox(["r","c","d"],e):au(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZIe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=tp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Er();this.outputShape=e,this.enableShapeUniforms=mr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?ox(["r","c","d"],e):au(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QIe{constructor(e){this.variableNames=["A"],this.outTexUsage=di.DOWNLOAD;const n=Er();this.outputShape=e,this.userCode=`
      ${eX}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JIe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=di.DOWNLOAD;const n=Er();this.outputShape=e,this.userCode=`
      ${eX}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eOe={R:0,G:1,B:2,A:3};class uj{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Er();this.outputShape=e,this.enableShapeUniforms=mr(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)");let o="";for(let s=0;s<r.length;s++){const l=r[s];o+=`
          if(offset == ${s}) {
            result = values[${eOe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?UO():jO(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tOe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Er();this.outputShape=e,this.enableShapeUniforms=mr(this.outputShape.length);let i="",a="result";n&&(a="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const l=o*2+s;i+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?UO():jO(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${a};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nOe(t){const e=Er(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return BEe(t,n)}function rOe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return WEe(t,e)}function iOe(t){const e=new Uint16Array([0,1,2,2,1,3]);return GEe(t,e)}function Om(t,e,n,r,i,a){HEe(e,n);const o=qEe(t),s=t.TEXTURE_2D;return Me(t,()=>t.bindTexture(s,o)),Me(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Me(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Me(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),Me(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),he().getNumber("WEBGL_VERSION")===1?Me(t,()=>t.texImage2D(s,0,r,e,n,0,i,a,null)):Me(t,()=>t.texStorage2D(s,1,r,e,n)),Me(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function aX(t){return t.internalFormatFloat}function aOe(t,e,n,r){const[i,a]=Em(e,n);return Om(t,i,a,aX(r),r.textureFormatFloat,t.FLOAT)}function oX(t){return t.internalFormatHalfFloat}function oOe(t,e,n,r){const[i,a]=Em(e,n);return Om(t,i,a,oX(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function sX(t){return t.downloadTextureFormat}function sOe(t,e,n,r){const[i,a]=Em(e,n);return Om(t,i,a,sX(r),t.RGBA,t.UNSIGNED_BYTE)}function lX(t){return t.internalFormatPackedFloat}function lOe(t,e,n,r){const[i,a]=kf(e,n);return Om(t,i,a,lX(r),t.RGBA,t.FLOAT)}function uX(t){return t.internalFormatPackedHalfFloat}function uOe(t,e,n,r){const[i,a]=kf(e,n);return Om(t,i,a,uX(r),t.RGBA,r.textureTypeHalfFloat)}function cOe(t,e,n){return Me(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),aj(t,e,"clipSpacePos",n,3,20,0)&&aj(t,e,"uv",n,2,20,12)}function fOe(t,e,n,r,i,a){Me(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,s,l;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,l=a.internalFormatPackedFloat),o.set(i),he().getNumber("WEBGL_VERSION")===2?Me(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,o)):Me(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,s,o)),Me(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function hOe(t,e,n){Me(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?he().getNumber("WEBGL_VERSION")===2?Me(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Me(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):he().getNumber("WEBGL_VERSION")===2?Me(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Me(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Me(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function dOe(t,e,n,r){const i=t.createBuffer();Me(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const s=4*4*e*n;return Me(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)),Me(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Me(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function pOe(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function mOe(t,e,n,r){const[i,a]=Em(e,n),o=4,s=new Uint8Array(_Ee(e*n,o));return Me(t,()=>t.readPixels(0,0,i,a,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function gOe(t,e,n,r,i,a,o,s){const l=t,c=new Float32Array(REe(a,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function yOe(t,e,n){const r=new Float32Array(e*n*4);return Me(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XT{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=he().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,IEe(n,e)):this.gl=ha(n),e=this.gl,he().getNumber("WEBGL_VERSION")===2){const a=e;this.createVertexArray=()=>Me(a,()=>a.createVertexArray()),this.bindVertexArray=o=>Me(a,()=>a.bindVertexArray(o)),this.deleteVertexArray=o=>Me(a,()=>a.deleteVertexArray(o)),this.getVertexArray=()=>Me(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){const a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Me(e,()=>a.createVertexArrayOES()),this.bindVertexArray=o=>Me(e,()=>a.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Me(e,()=>a.deleteVertexArrayOES(o)),this.getVertexArray=()=>Me(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),he().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=hy(this.gl,a),Mi(this.gl,o))this.textureHalfFloatExtension=hy(this.gl,o);else if(he().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Mi(this.gl,i))this.colorBufferHalfFloatExtension=hy(this.gl,i);else if(he().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Mi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Mi(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=rOe(this.gl),this.indexBuffer=iOe(this.gl),this.framebuffer=XEe(this.gl),this.textureConfig=zO(this.gl,this.textureHalfFloatExtension)}get debug(){return he().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Me(e,()=>e.finish()),Me(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Me(e,()=>e.deleteFramebuffer(this.framebuffer)),Me(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Me(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Me(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),aOe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),oOe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),sOe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),hOe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),fOe(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),uOe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),lOe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(oj(this.gl,this.framebuffer),this.outputTexture=null),Me(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>mOe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,a,o){return gOe(this.gl,e,n,r,i,a,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return pOe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=dOe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(he().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(a,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=a}else he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>yOe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=nOe(n));const r=UEe(n);Me(n,()=>n.attachShader(r,this.vertexShader)),Me(n,()=>n.attachShader(r,e)),VEe(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&WT(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Me(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),cOe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Me(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&WT(this.gl,this.program),Me(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?YEe(this.gl,e,n):ZEe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Me(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),QEe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,a]=kf(n,r);this.setOutputMatrixTextureDriver(e,i,a)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&WT(this.gl,this.program),dy(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Me(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Me(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=hy(this.gl,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,a),a}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Gz(()=>this.disposed||this.isQueryAvailable(e,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=vOe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in he().platform&&(r=he().platform.setTimeoutCustom.bind(he().platform)),Gz(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),GT(this.gl,e,this.framebuffer),this.debug&&dy(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(GT(this.gl,this.outputTexture,this.framebuffer),this.debug&&dy(this.gl)):oj(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;GT(i,e,this.framebuffer),this.debug&&dy(i),this.outputTexture=e,Me(i,()=>i.viewport(0,0,n,r)),Me(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),Me(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function vOe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:bOe,bincountImpl:cX,bincountReduceImpl:xOe,bitwiseAndImpl:wOe,castImpl:SOe,ceilImpl:COe,concatImpl:$Oe,equalImpl:TOe,expImpl:kOe,expm1Impl:AOe,floorImpl:EOe,gatherNdImpl:IOe,gatherV2Impl:OOe,greaterImpl:NOe,greaterEqualImpl:_Oe,lessImpl:ROe,lessEqualImpl:DOe,linSpaceImpl:MOe,logImpl:POe,maxImpl:LOe,maximumImpl:FOe,minimumImpl:BOe,multiplyImpl:zOe,negImpl:jOe,notEqualImpl:UOe,prodImpl:VOe,raggedGatherImpl:WOe,raggedRangeImpl:GOe,raggedTensorToTensorImpl:qOe,rangeImpl:HOe,rsqrtImpl:XOe,scatterImpl:KOe,sigmoidImpl:YOe,simpleAbsImpl:fX,sliceImpl:ZOe,sparseFillEmptyRowsImpl:QOe,sparseReshapeImpl:JOe,sparseSegmentReductionImpl:hX,sqrtImpl:eNe,staticRegexReplaceImpl:tNe,stridedSliceImpl:nNe,stringNGramsImpl:rNe,stringSplitImpl:iNe,stringToHashBucketFastImpl:aNe,subImpl:oNe,tileImpl:sNe,topKImpl:lNe,transposeImpl:WO,uniqueImpl:uNe}=h$e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dX(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Tr(t,e){return e===1?[t]:dX(t,e)}function cNe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fNe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=mr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Tr("rc",this.rank),r=Mt(this.rank),i=this.getOutOfBoundsCondition(n),a=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let a=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)a=`${e[e.length-1-o]},`+a;n.push(a)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pX{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=mr(this.outputShape.length);let r="";for(let i=0;i<4;i++){let a="thisRC = rc;";i%2===1&&(a+="thisRC.z += 1;"),i>1&&(a+="thisRC.y += 1;"),r+=`
        ${a}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${hNe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?UO():jO(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function hNe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?cIe(["r","c","d"],"inputShape"):au(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dNe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=fj(n,r),a=hj(e,i,r);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const o=cj(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[a].pop();return this.usedTextures[a].push(l),l}let s;return i===Zn.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Zn.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Zn.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Zn.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Zn.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const a=fj(r,i),o=hj(n,a,i);o in this.freeTextures||(this.freeTextures[o]=[]);const s=cj(n,a,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=he().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const c=this.usedTextures[o],h=c&&c.indexOf(e);if(h==null||h<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[h]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function pNe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function cj(t,e,n,r,i){const a=mNe(e,r);let o;if(i){const[l,c]=kf(t[0],t[1]);o=l*c}else{const[l,c]=Em(t[0],t[1]);o=l*c}const s=pNe(n,a);return o*s}function mNe(t,e){switch(t){case Zn.PACKED_2X2_FLOAT32:return lX(e);case Zn.PACKED_2X2_FLOAT16:return uX(e);case Zn.UNPACKED_FLOAT32:return aX(e);case Zn.UNPACKED_FLOAT16:return oX(e);case Zn.PACKED_4X1_UNSIGNED_BYTE:return sX(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function gNe(t){return he().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Zn.PACKED_2X2_FLOAT32:Zn.UNPACKED_FLOAT32:t?Zn.PACKED_2X2_FLOAT16:Zn.UNPACKED_FLOAT16}function fj(t,e){if(t===di.UPLOAD)return Zn.PACKED_2X2_FLOAT32;if(t===di.RENDER||t==null)return gNe(e);if(t===di.DOWNLOAD||t===di.PIXELS)return Zn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function hj(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ia{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=mr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Wi="if (isnan(x)) return x;",yNe="return x;",dj="return abs(x);",vNe="return (x >= 0.0) ? x : (exp(x) - 1.0);",bNe=Wi+`
  return (x < 0.0) ? 0.0 : x;
`,xNe=Wi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,cs="return x;",wNe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SNe="return x;",CNe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,$Ne=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,TNe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,kNe="return 1.0 / (1.0 + exp(-1.0 * x));";class gs{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=mr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ANe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=mr(this.outputShape.length);const n=e.length,r=Tr("rc",n),i=Mt(n),a=cNe(n,r),o=r.slice(-2),s=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENe=Bq,INe=1e-7,ONe=1e-4,gy={};function NNe(t){return t in gy||(gy[t]={}),gy[t]}const _Ne=he().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),RNe=600;function DNe(){return he().global.screen==null?1024:he().global.screen.height*he().global.screen.width*window.devicePixelRatio*RNe/1024/1024}class sx extends dE{nextDataId(){return sx.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!he().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof XT)n=e;else{const r=ha(he().getNumber("WEBGL_VERSION"),e);n=new XT(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=ha(he().getNumber("WEBGL_VERSION"));n=new XT(r),this.binaryCache=NNe(he().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new dNe(this.gpgpu),this.numMBBeforeWarning=DNe(),this.texData=new uG(this,Sa())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,a,o){const s=this.makeTensorInfo(n,r),l=this.texData.get(s.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,a]},l.texShape=[i,a];const c=py(n),h=new uj(c,!1,o),d=this.runWebGLProgram(h,[s],r,[[i,a]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(s),d.dataId}write(e,n,r){if((he().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||he().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:di.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,a){if(he().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:di.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:a,slice:o,shape:s,isPacked:l}=n;if(o!=null){let p;l?p=new gs(s,cs):p=new Ia(s,cs);const g=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:i}],i),y=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let h;c&&(h=Nr());let d;if(i==="complex64"){const p=this.readSync(a.real.dataId),g=this.readSync(a.imag.dataId);d=Oo(p,g)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Nr()-h),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const y=this.pendingRead.get(e);return new Promise(x=>y.push(x))}const n=this.texData.get(e),{values:r,shape:i,slice:a,dtype:o,complexTensorInfos:s,isPacked:l}=n;if(a!=null){let y;l?y=new gs(i,cs):y=new Ia(i,cs);const x=this.runWebGLProgram(y,[{dataId:e,shape:i,dtype:o}],o),b=this.read(x.dataId);return this.disposeIntermediateTensorInfo(x),b}if(r!=null)return this.convertAndCacheOnCPU(e);if(he().getBool("DEBUG")&&!he().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&he().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,h;if(o!=="complex64"&&he().get("WEBGL_BUFFER_SUPPORTED")){h=this.decode(e);const y=this.texData.get(h.dataId);c=this.gpgpu.createBufferFromTexture(y.texture.texture,...fy(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const y=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),x=y[0],b=y[1];d=Oo(x,b)}else if(c==null)d=this.getValuesFromTexture(e);else{const y=ve(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,y)}if(h!=null&&this.disposeIntermediateTensorInfo(h),c!=null){const y=this.gpgpu.gl;Me(y,()=>y.deleteBuffer(c))}const p=this.convertAndCacheOnCPU(e,d),g=this.pendingRead.get(e);return this.pendingRead.delete(e),g.forEach(y=>y(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Sa().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:a,slice:o,dtype:s,isPacked:l,texture:c}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let g;l?g=new gs(a,cs):g=new Ia(a,cs);const y=this.runWebGLProgram(g,[{dataId:e,shape:a,dtype:s}],s),x=this.readToGPU(y,n);return this.disposeIntermediateTensorInfo(y),x}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const h=this.decode(e,n.customTexShape),d=Sa().makeTensorFromTensorInfo(h),p=this.texData.get(h.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Ss(i));return lt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return lt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!LEe(r))throw he().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),a=ve(n);if(he().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),g=this.texData.get(p.dataId),y=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...fy(n)).subarray(0,a);return this.disposeIntermediateTensorInfo(p),y}const o=he().getBool("WEBGL_PACK")&&i===!0,s=o?py(n):n,l=o?new JIe(s):new QIe(s),c=this.runWebGLProgram(l,[{shape:s,dtype:r,dataId:e}],"float32"),h=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=Ml(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=Ml(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(a);s.kernelMs=mpe(l),s.getExtraProfileInfo=()=>l.map((c,h)=>({name:o[h],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Nr(),endMs:null}}endTimer(e){return he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Nr(),e)}async getQueryTime(e){if(he().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:a,isPacked:o,slice:s}=this.texData.get(e),l=s&&s.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,a,o)));const h=this.texData.get(e);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=_Ne){return he().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ve(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){hi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return ENe(e.shape,n)}packedUnaryOp(e,n,r){const i=new gs(e.shape,n),a=this.compileAndRun(i,[e],r);return Sa().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=fX(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(he().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,dj,e.dtype);const n=new Ia(e.shape,dj),r=this.compileAndRun(n,[e]);return Sa().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&mp(r[0])){const a=r.map(o=>bs(o));i=this.write(a,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return Sa().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new ANe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new fNe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[nf(e.shape),...rf(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},a=[nf(n),...rf(n)],o=new pX(a,r),s=!0,l=[r],c=this.runWebGLProgram(o,[i],e.dtype,l,s);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:a,dtype:o}=r;if(n!=null){const p=ve(a),g=n[0]*n[1]*4;j(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=py(a);let l;i?l=new ZIe(s):l=new YIe(s);const c=!0,h=[n??fy(s)],d=this.runWebGLProgram(l,[{shape:s,dtype:o,dataId:e}],o,h,c,n);return{dtype:o,shape:a,dataId:d.dataId}}runWebGLProgram(e,n,r,i,a=!1,o){const s=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===tp.DENSE){const w=o??fy(e.outputShape);l.texShape=w.map(S=>S*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ve(s.shape)===0)return l.values=cr(s.dtype,0),s;const c=[],h=n.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let S=this.texData.get(w.dataId);if(S.texture==null){if(!e.packedInputs&&ve(w.shape)<=he().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:S.values};e.packedInputs&&(S.isPacked=!0,S.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!S.isPacked!=!!e.packedInputs)w=S.isPacked?this.unpackTensor(w):this.packTensor(w),c.push(w),S=this.texData.get(w.dataId);else if(S.isPacked&&!Qv(S.shape,w.shape)){const $=w,T=w.shape;w.shape=S.shape,w=this.packedReshape(w,T),c.push(w),S=this.texData.get(w.dataId),$.shape=T}return{shape:w.shape,texData:S,isUniform:!1}});this.uploadToGPU(s.dataId);const d={shape:s.shape,texData:l,isUniform:!1},p=KIe(e,h,d),g=this.getAndSaveBinary(p,()=>HIe(this.gpgpu,e,h,d)),y=this.activeTimers!=null;let x;y&&(x=this.startTimer()),he().get("ENGINE_COMPILE_ONLY")||XIe(this.gpgpu,g,h,d,i),c.forEach(w=>this.disposeIntermediateTensorInfo(w)),y&&(x=this.endTimer(x),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(x)}));const b=he().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const w=Nr();w-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!he().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){const w=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),w}return s}compileAndRun(e,n,r,i,a=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,a)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(he().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=le(()=>{if(!he().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=he().getBool("DEBUG");he().set("DEBUG",!1);const n=this.abs(Tt(1e-8)).dataSync()[0];if(he().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?INe:ONe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:a,texture:o,usage:s,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let h;c&&(h=Nr());let d=n.texShape;if(d==null&&(d=tIe(r,l),n.texShape=d),a!=null){const p=py(r);let g,y=d[1],x=d[0];const b=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(l||!b)&&([y,x]=kf(d[0],d[1])),l?g=new tOe(p,b):g=new uj(p,b);const w=b?[x,y]:d,S=this.makeTensorInfo(w,i),$=this.texData.get(S.dataId);b?$.usage=di.PIXELS:$.usage=di.UPLOAD,$.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(S.dataId),y,x,a);const T=[[x,y]],E=this.runWebGLProgram(g,[S],i,T,!0),I=this.texData.get(E.dataId);n.texShape=I.texShape,n.isPacked=I.isPacked,n.usage=I.usage,he().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=I.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(S),c&&(this.uploadWaitMs+=Nr()-h)}else{const p=this.acquireTexture(d,s,i,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=MNe(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*Ev(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(a){throw a}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await nH(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(J8(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:a,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:l}=iX(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=a,e.outShapeLocation=o,e.outShapeStridesLocation=s,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:a,width:o,channels:s}=e,l=Sa().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,n,r,a,o,s);return Sa().makeTensorFromDataId(c,n,r,l)}}sx.nextDataId=0;function MNe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */QG()&&nq("webgl",()=>new sx,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GO=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Hl{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=et(n,r),this.enableShapeUniforms=mr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const su=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Nf{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=et(n,r);const a=this.outputShape.length;this.enableShapeUniforms=mr(a);let o="";if(i)if(a===0||ve(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Mt(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Tr("coords",a);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jr(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const PNe={kernelName:Pp,backendName:"webgl",kernelFunc:Jr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ws(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(a.dataId),s=Jr({inputs:{x:r},backend:n}),l=Jr({inputs:{x:i},backend:n});return o.complexTensorInfos={real:s,imag:l},a}const LNe={kernelName:kE,backendName:"webgl",kernelFunc:Ws};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mX="return (a < 0.) ? b * a : a;",gX=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function FNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:a}=r,o=n.makeTensorInfo([],"float32",Ps(a,"float32")),s=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nf(gX,i.shape,o.shape):new Hl(mX,i.shape,o.shape),l=n.runWebGLProgram(s,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const BNe={kernelName:e0,backendName:"webgl",kernelFunc:FNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yX="return (a < 0.) ? b * a : a;",vX=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function zNe(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,a=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nf(vX,r.shape,i.shape):new Hl(yX,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],"float32")}const jNe={kernelName:b0,backendName:"webgl",kernelFunc:zNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _f="if (isnan(x)) return x;";function bt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:a})=>{const{x:o}=i,s=a,l=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&n!=null){const d=s.texData.get(o.dataId),p=n(d.values,l);return s.makeTensorInfo(o.shape,l,p)}const c=he().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let h;return c?h=new gs(o.shape,e):h=new Ia(o.shape,t),s.runWebGLProgram(h,[o],l)}}function nr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:o,backend:s})=>{const{a:l,b:c}=o,h=s;if(r&&l.dtype==="complex64"){const y=h.texData.get(l.dataId),x=h.texData.get(c.dataId),[b,w]=[[y.complexTensorInfos.real,x.complexTensorInfos.real],[y.complexTensorInfos.imag,x.complexTensorInfos.imag]].map($=>{const[T,k]=$,E={dataId:T.dataId,dtype:T.dtype,shape:l.shape},I={dataId:k.dataId,dtype:k.dtype,shape:c.shape},_=new Hl(t,l.shape,c.shape);return h.runWebGLProgram(_,[E,I],Zr(T.dtype,k.dtype))}),S=Ws({inputs:{real:b,imag:w},backend:h});return h.disposeIntermediateTensorInfo(b),h.disposeIntermediateTensorInfo(w),S}const d=a||Zr(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||h.shouldExecuteOnCPU([l,c]))&&i!=null){const y=h.texData.get(l.dataId).values,x=h.texData.get(c.dataId).values,b=l.dtype==="string"?No(y):y,w=l.dtype==="string"?No(x):x,[S,$]=i(l.shape,c.shape,b,w,d),T=h.makeTensorInfo($,d),k=h.texData.get(T.dataId);return k.values=S,T}const p=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let g;return p?g=new Nf(e,l.shape,c.shape,n):g=new Hl(t,l.shape,c.shape),h.runWebGLProgram(g,[l,c],d)}}function np(t,e=!1){if(t==="linear")return e?SNe:yNe;if(t==="relu")return e?$Ne:bNe;if(t==="elu")return e?CNe:vNe;if(t==="relu6")return e?TNe:xNe;if(t==="prelu")return e?vX:yX;if(t==="leakyrelu")return e?gX:mX;if(t==="sigmoid")return e?kNe:wNe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bX{constructor(e,n,r,i=!1,a=!1,o=!1,s=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=mr(this.outputShape.length);const h=i?e[1]:e[2],d=Math.ceil(h/2),p=i?"i * 2, rc.y":"rc.y, i * 2",g=a?"rc.z, i * 2":"i * 2, rc.z",y=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",w="";s&&(l?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:c?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:b=`vec4 activation(vec4 x) {
          ${s}
        }`,w="result = activation(result);");const S=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let $="rc.x",T="rc.x";e[0]<n[0]?$=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(T=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${$};
        int batchB = ${T};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${y[0]} * ${x[0]});
          result += (${y[1]} * ${x[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${S}

        ${w}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pj={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class mj{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=et(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gj="return a * b;";function qO(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,a=Zr(r.dtype,i.dtype);if(r.dtype==="complex64"){const s=n.texData.get(r.dataId),l=n.texData.get(i.dataId),c=new mj(pj.REAL,r.shape,i.shape),h=new mj(pj.IMAG,r.shape,i.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],p=n.runWebGLProgram(c,d,"float32"),g=n.runWebGLProgram(h,d,"float32"),y=Ws({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}if(n.shouldExecuteOnCPU([r,i])){const s=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[c,h]=zOe(r.shape,i.shape,s.values,l.values,a),d=n.makeTensorInfo(h,a),p=n.texData.get(d.dataId);return p.values=c,d}let o;return he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new Nf(gj,r.shape,i.shape):o=new Hl(gj,r.shape,i.shape),n.runWebGLProgram(o,[r,i],a)}const UNe={kernelName:Gp,backendName:"webgl",kernelFunc:qO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(t,e,n){const r=[nf(t.shape),...rf(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},a=[nf(e),...rf(e)],o=new pX(a,r),s=!0,l=[r],c=n.runWebGLProgram(o,[i],t.dtype,l,s);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function De(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,o=n,s=ve(i.shape),l=fG(a,s),c=ve(l);j(s===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const h=o.texData.get(i.dataId);return h.isPacked&&!Qv(i.shape,l)&&!(h.texture!==null&&Qv(h.shape,l))?VNe(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const WNe={kernelName:w0,backendName:"webgl",kernelFunc:De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yj{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:o}=e;this.outputShape=[i,o];const s=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${qc(d)?d.toPrecision(2):d}, ones);`}let h="";a%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${s};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GNe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:o}=e;this.outputShape=[i,o];let s="0.0",l="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",l="min"):n==="max"&&(s="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const h=Math.floor(r/4)*4,d=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";n==="all"?(s="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):n==="any"&&(s="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let y="";a%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${y}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${h}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${h};
        if (${d===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qNe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=W0(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function lu(t,e,n,r){const i=qNe(t.shape);let a=t;for(let o=0;o<i.length;o++){const{inSize:s,windowSize:l,outSize:c}=i[o];let h,d;n==="mean"?h=o===0?new yj({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:c},s):new yj({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:c}):h=new GNe({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:c},n),d=a,a=r.runWebGLProgram(h,[a],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HNe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const i=Mt(this.rank),a=XNe(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function XNe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KNe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let h=0;h<r.length;h++)r[h]=e[n[h]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Mt(this.rank),a=dX("rc",this.rank),o=new Array(this.rank);for(let h=0;h<n.length;h++)o[n[h]]=a[h];const s=`vec2(${o.slice(-2).join()})`,l=`++${a[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lx(t,e,n){const r=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KNe(t.shape,e):new HNe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(t,e,n,r){const i=e,a=t.shape.length,o=ut(i,t.shape);let s=o;const l=on(s,a),c=l!=null;let h=t;c&&(h=lx(t,l,r),s=mn(s.length,a)),tr("sum",s,a);const[d,p]=Wn(h.shape,s);let g=d;n&&(g=Sn(d,o));const y=ve(p),b=ve(t.shape)/y,w=De({inputs:{x:h},attrs:{shape:[b,y]},backend:r}),S=oI(t.dtype),$=lu(w,S,"sum",r),T=De({inputs:{x:$},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo($),c&&r.disposeIntermediateTensorInfo(h),T}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ux(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;return YNe(i,a,o,n)}const ZNe={kernelName:A0,backendName:"webgl",kernelFunc:ux};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ar(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:a}=r,o=n,s=i.shape.length,l=new Array(s);for(let h=0;h<l.length;h++)l[h]=i.shape[a[h]];let c;if(o.shouldExecuteOnCPU([i])){const d=o.texData.get(i.dataId).values,p=WO(d,i.shape,i.dtype,a,l);c=o.makeTensorInfo(l,i.dtype);const g=o.texData.get(c.dataId);g.values=p}else c=lx(i,a,o);return c}const QNe={kernelName:pc,backendName:"webgl",kernelFunc:Ar};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xX=1e3;function Jv({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}){const c=t.shape.length,h=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],p=r?e.shape[h-1]:e.shape[h-2],g=n?t.shape[c-1]:t.shape[c-2],y=r?e.shape[h-2]:e.shape[h-1],x=t.shape.slice(0,-2),b=e.shape.slice(0,-2),w=ve(x),S=ve(b),T=et(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([g,y]);j(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const k=n?[w,d,g]:[w,g,d],E=r?[S,y,p]:[S,p,y],I=De({inputs:{x:t},backend:i,attrs:{shape:k}}),_=De({inputs:{x:e},backend:i,attrs:{shape:E}}),N=[I,_],R=Math.max(w,S),O=n?I.shape[1]:I.shape[2],P=a!=null,B=o!=null,U=l==="leakyrelu",z=l!=null?np(l,!0):null,M=P||B||U||z!=null;let V;if((g===1||y===1)&&O>xX&&M===!1){let H=I,L=_;n&&(H=Ar({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),N.push(H)),r&&(L=Ar({inputs:{x:_},backend:i,attrs:{perm:[0,2,1]}}),N.push(L));const G=y!==1,q=y===1;let K=H;G&&(K=De({inputs:{x:H},backend:i,attrs:{shape:[R,O,1]}}),N.push(K));const oe=y===1?2:1;let pe=L;q&&(pe=De({inputs:{x:L},backend:i,attrs:{shape:[R,1,O]}}),N.push(pe));const ge=qO({inputs:{a:K,b:pe},backend:i});V=ux({inputs:{x:ge},backend:i,attrs:{axis:oe,keepDims:!0}}),N.push(ge)}else{const H=Zr(t.dtype,e.dtype),L=new bX(k,E,[R,g,y],n,r,P,z,B,U),G=[I,_];if(a!=null&&G.push(a),B&&G.push(o),U){const q=i.makeTensorInfo([],"float32",Ps(s,"float32"));G.push(q),N.push(q)}V=i.runWebGLProgram(L,G,H)}const W=De({inputs:{x:V},backend:i,attrs:{shape:T}});N.push(V);for(const H of N)i.disposeIntermediateTensorInfo(H);return W}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JNe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:c,activation:h,leakyreluAlpha:d}=r;return Jv({a:i,b:a,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:d,activation:h})}const e_e={kernelName:Iv,backendName:"webgl",kernelFunc:JNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vj="return abs(x);";function t_e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const a=n.texData.get(r.dataId),o=fX(a.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return he().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new gs(r.shape,vj):i=new Ia(r.shape,vj),n.runWebGLProgram(i,[r],r.dtype)}const n_e={kernelName:Db,backendName:"webgl",kernelFunc:t_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r_e=Wi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,i_e=bt({opSnippet:r_e}),a_e={kernelName:gp,backendName:"webgl",kernelFunc:i_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o_e=Wi+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,s_e=bt({opSnippet:o_e}),l_e={kernelName:yp,backendName:"webgl",kernelFunc:s_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bj="return a + b;",u_e=nr({opSnippet:bj,packedOpSnippet:bj,supportsComplex:!0,cpuKernelImpl:bOe}),c_e={kernelName:bf,backendName:"webgl",kernelFunc:u_e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f_e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`float v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h_e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`vec4 v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ey(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Jr({inputs:{x:r[0]},backend:n});if(r.length>he().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=Ey({inputs:r.slice(0,l),backend:n}),h=Ey({inputs:r.slice(l),backend:n});return Ey({inputs:[c,h],backend:n})}const i=r.map(l=>l.dtype).reduce((l,c)=>Zr(l,c)),a=r.map(l=>l.shape),s=he().getBool("WEBGL_PACK")?new h_e(r[0].shape,a):new f_e(r[0].shape,a);return n.runWebGLProgram(s,r,i)}const d_e={kernelName:bE,backendName:"webgl",kernelFunc:Ey};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=ut(a,i.shape);let c=l;const h=on(c,s);let d=i;h!=null&&(d=Ar({inputs:{x:i},backend:n,attrs:{perm:h}}),c=mn(c.length,s)),tr("all",c,s);const[p,g]=Wn(d.shape,c),y=ve(g),x=De({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),b=lu(x,x.dtype,"all",n);let w;if(o){const S=Sn(p,l);w=De({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=De({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),h!=null&&n.disposeIntermediateTensorInfo(d),w}const m_e={kernelName:xE,backendName:"webgl",kernelFunc:p_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=ut(a,i.shape);let c=l;const h=on(c,s);let d=i;h!=null&&(d=Ar({inputs:{x:i},backend:n,attrs:{perm:h}}),c=mn(c.length,s)),tr("any",c,s);const[p,g]=Wn(d.shape,c),y=ve(g),x=De({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),b=lu(x,x.dtype,"any",n);let w;if(o){const S=Sn(p,l);w=De({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=De({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),h!=null&&n.disposeIntermediateTensorInfo(d),w}const y_e={kernelName:wE,backendName:"webgl",kernelFunc:g_e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v_e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:a,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];const s=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b_e{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,j(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const a=e[e.length-1],o=Math.ceil(a/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const s=this.outputShape,l=s.length,c=Mt(l),h=Tr("coords",l);let d,p;if(o===1){p=l+1;const _=Mt(p);d=`
        ${_} sourceLocR = ${_}(${h.join()}, 0);
        ++${h[l-1]};
        ${_} sourceLocG = ${_}(${h.join()}, 0);
        ++${h[l-2]};
        ${_} sourceLocA = ${_}(${h.join()}, 0);
        --${h[l-1]};
        ${_} sourceLocB = ${_}(${h.join()}, 0);
        --${h[l-2]};`}else p=l,d=`
        ${c} sourceLocR = coords;
        ++${h[l-1]};
        ${c} sourceLocG = coords;
        ++${h[l-2]};
        ${c} sourceLocA = coords;
        --${h[l-1]};
        ${c} sourceLocB = coords;
        --${h[l-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),y="."+g[p-1],x=g.map(_=>"int "+_),b=Tr("sourceLocR",p-1).concat("inIdx.r"),w=Tr("sourceLocG",p-1).concat("inIdx.g"),S=Tr("sourceLocB",p-1).concat("inIdx.b"),$=Tr("sourceLocA",p-1).concat("inIdx.a"),T=r==="max"?"greaterThan":"lessThan",k=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${$.join()})));`,E=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${w.join()}) : 0.,
            hasNextRow ? getAChannel(${S.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${$.join()}) : 0.)`,I=i?"":`
      float getBestIndicesAChannel(${x.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${x.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${I}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${h[l-1]} < ${s[l-1]-1};
        bool hasNextRow = ${h[l-2]} < ${s[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${y}, sourceLocG${y},
          sourceLocB${y}, sourceLocA${y}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${k}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${T}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wX(t,e,n,r=null){let i=e.shape[0],a=e.shape[1];r!=null&&(i=r.shape[0],a=r.shape[1]);const o=W0(a),s={windowSize:o,inSize:a,batchSize:i,outSize:Math.ceil(a/o)},l=new v_e(s,n,r==null),c=[e];r!=null&&c.push(r);const h=t.runWebGLProgram(l,c,"int32");if(h.shape[1]===1)return h;const d=wX(t,e,n,h);return t.disposeIntermediateTensorInfo(h),d}function SX(t,e,n,r=null){const i=r!=null?r.shape:e.shape,a=i[i.length-1],o=W0(a),s=new b_e(i,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(s,l,"int32");if(c.shape.length===e.shape.length){const h=SX(t,e,n,c);return t.disposeIntermediateTensorInfo(c),h}return c}function CX(t,e,n,r){const i=[n];if(tr("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!he().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const a=[],o=t.texData.get(e.dataId),s=o!==null&&o.isPacked;let l=e;s&&(l=t.unpackTensor(e),a.push(l));const[c,h]=Wn(l.shape,i),d=ve(h),p=De({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});a.push(p);const g=wX(t,p,r);a.push(g);const y=De({inputs:{x:g},backend:t,attrs:{shape:c}});return a.forEach(x=>t.disposeIntermediateTensorInfo(x)),y}return SX(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;let o=ut(a,i.shape);const s=on(o,i.shape.length);let l=i;const c=[];s!=null&&(l=Ar({inputs:{x:i},backend:n,attrs:{perm:s}}),c.push(l),o=mn(o.length,l.shape.length)),tr("argMax",[o[0]],l.shape.length);const h=CX(n,l,o[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),h}const w_e={kernelName:Mb,backendName:"webgl",kernelFunc:x_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;let o=ut(a,i.shape);const s=on(o,i.shape.length);let l=i;const c=[];s!=null&&(l=Ar({inputs:{x:i},backend:n,attrs:{perm:s}}),c.push(l),o=mn(o.length,l.shape.length)),tr("argMin",[o[0]],l.shape.length);const h=CX(n,l,o[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),h}const C_e={kernelName:Pb,backendName:"webgl",kernelFunc:S_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $_e=Wi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,T_e=bt({opSnippet:$_e}),k_e={kernelName:vp,backendName:"webgl",kernelFunc:T_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_e=Wi+"return log(x + sqrt(x * x + 1.0));",E_e=bt({opSnippet:A_e}),I_e={kernelName:bp,backendName:"webgl",kernelFunc:E_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O_e=Wi+`
  return atan(x);
`,N_e=bt({opSnippet:O_e}),__e={kernelName:xp,backendName:"webgl",kernelFunc:N_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R_e=GO+`
  return atan(a, b);
`,D_e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+su+`
  return result;
`,M_e=nr({opSnippet:R_e,packedOpSnippet:D_e}),P_e={kernelName:Sp,backendName:"webgl",kernelFunc:M_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L_e=Wi+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,F_e=bt({opSnippet:L_e}),B_e={kernelName:wp,backendName:"webgl",kernelFunc:F_e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rp{constructor(e,n,r,i=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg",b=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,w=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let S="0.0";if(x||(S="-1.0 / 1e-20"),r){const _=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${l});
        const ivec2 pads = ivec2(${g}, ${y});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${h}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${_} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?a?b:w:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const $="max";let T=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(T="avgValue / max(count, 1.0)");const k=Math.floor(o/4)*4,E=o%4,I=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${$}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${l});
      const ivec2 pads = ivec2(${g}, ${y});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${k}; wC += 4) {
            int xC = xCCorner + wC * ${h};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              getValue(batch, xR, xC + 2 * ${h}, d),
              getValue(batch, xR, xC + 3 * ${h}, d)
            );

            ${I}
          }

          int xC = xCCorner + ${k};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${I}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              initializationValue,
              initializationValue
            );

            ${I}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              getValue(batch, xR, xC + 2 * ${h}, d),
              initializationValue
            );

            ${I}
          }
        }
        setOutput(${T});
      }
    `}}class HO{constructor(e,n,r,i=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,l=e.strideHeight,c=e.strideWidth,h=e.dilationDepth,d=e.dilationHeight,p=e.dilationWidth,g=e.effectiveFilterDepth,y=e.effectiveFilterHeight,x=e.effectiveFilterWidth,b=e.padInfo.front,w=e.padInfo.top,S=e.padInfo.left;this.outputShape=e.outShape;const $=n==="avg";let T="0.0";if($||(T="-1.0 / 1e-20"),r){const R=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${l}, ${c});
        const ivec3 pads = ivec3(${b}, ${w}, ${S});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${h}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${y};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${x};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${R} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${y} * ${x} +
                      wR * ${x} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const k="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / max(count, 1.0)");const I=Math.floor(o/4)*4,_=o%4,N=`
      if (${$}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${l}, ${c});
      const ivec3 pads = ivec3(${b}, ${w}, ${S});
      const float initializationValue = ${T};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${T});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${h}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${y};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${I}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${N}
            }

            int xC = xCCorner + ${I};
            if (${_===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${_===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${_===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${N}
            }
          }
        }
        setOutput(${E});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Im(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,c=1;j(dr(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const h=Ui(i.shape,a,o,c,s,l);if(h.filterWidth===1&&h.filterHeight===1&&At(h.inShape,h.outShape))return Jr({inputs:{x:i},backend:n});const d=new rp(h,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const j_e={kernelName:Lb,backendName:"webgl",kernelFunc:z_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:c}=r,h=[1,1,1],d=Po(i.shape,a,o,h,s,l,c),p=new HO(d,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}const V_e={kernelName:Fb,backendName:"webgl",kernelFunc:U_e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W_e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,h=l-1-e.padInfo.top,d=c-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${h}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class G_e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,y=d-1-e.padInfo.front,x=p-1-e.padInfo.top,b=g-1-e.padInfo.left,w=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${y}, ${x}, ${b});
      const float avgMultiplier = float(${w});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${h}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q_e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a,{filterSize:s,strides:l,pad:c,dimRoundingMode:h}=r,d=[1,1,1],p=Po(o.shape,s,l,d,c,h),g=new G_e(p);return n.runWebGLProgram(g,[i],o.dtype)}const H_e={kernelName:CE,backendName:"webgl",kernelFunc:q_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X_e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a;Im([i,a],"avgPoolGrad");const{filterSize:s,strides:l,pad:c}=r,h=Ui(o.shape,s,l,1,c),d=new W_e(h);return n.runWebGLProgram(d,[i],o.dtype)}const K_e={kernelName:SE,backendName:"webgl",kernelFunc:X_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y_e(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a}=e,{transposeA:o,transposeB:s}=r;return Jv({a:i,b:a,transposeA:o,transposeB:s,backend:n})}const Z_e={kernelName:Bb,backendName:"webgl",kernelFunc:Y_e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q_e{constructor(e,n,r,i,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],et(e,n),et(e,r);let s="0.0";i!=null&&(et(e,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="1.0";a!=null&&(et(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J_e{constructor(e,n,r,i,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],et(e,n),et(e,r);let s="vec4(0.0)";i!=null&&(et(e,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="vec4(1.0)";a!=null&&(et(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eRe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:a,offset:o,scale:s}=t;j(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(s==null||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,i,a];let h=null;o!=null&&(h=o.shape,c.push(o));let d=null;s!=null&&(d=s.shape,c.push(s));const p=he().getBool("WEBGL_PACK_NORMALIZATION")?new J_e(r.shape,i.shape,a.shape,h,d,l):new Q_e(r.shape,i.shape,a.shape,h,d,l);return e.runWebGLProgram(p,c,c[0].dtype)},tRe={kernelName:Zb,backendName:"webgl",kernelFunc:eRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nRe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Mt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=rRe(this.rank);let i;const a=e.map((o,s)=>`sourceLoc.${Qk[s]} = start[${s}] + coords.${Qk[s]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const Qk=["x","y","z","w","u","v"];function rRe(t){if(t===1)return"sourceLoc";if(t<=6)return Qk.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iRe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Mt(this.rank),r=Tr("coords",this.rank),i=Tr("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${a})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((h,d)=>`start[${d}]`).join()});`:e.map((h,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${s}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(t,e,n,r){const i=r.texData.get(t.dataId),a=r.makeTensorInfo(n,t.dtype),o=r.texData.get(a.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=t.dtype;let s=UI(e,Ve(t.shape));i.slice&&(s+=i.slice.flatOffset),o.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),a}function Rf(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:o}=r,[s,l]=V0(i,a,o);if(BI(i,s,l),ve(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=n.texData.get(i.dataId),p=ZOe(d.values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,p)}const{isPacked:c}=n.texData.get(i.dataId),h=jI(i.shape,s,l);if(c||!h){const d=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iRe(l):new nRe(l),p=[s];return n.runWebGLProgram(d,[i],i.dtype,p)}return n.uploadToGPU(i.dataId),aRe(i,s,l,n)}const oRe={kernelName:k0,backendName:"webgl",kernelFunc:Rf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sRe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,crops:o}=r;j(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=a.reduce((S,$)=>S*$),l=gm(i.shape,a,s),c=ym(l.length,a.length),h=vm(i.shape,a,s),d=HI(o,a.length),p=XI(h,o,a.length),g=[],y=De({inputs:{x:i},backend:n,attrs:{shape:l}}),x=Ar({inputs:{x:y},backend:n,attrs:{perm:c}}),b=De({inputs:{x},backend:n,attrs:{shape:h}}),w=Rf({inputs:{x:b},backend:n,attrs:{begin:d,size:p}});return g.push(y),g.push(x),g.push(b),g.forEach(S=>n.disposeIntermediateTensorInfo(S)),w},lRe={kernelName:zb,backendName:"webgl",kernelFunc:sRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o}=r,s=n.readSync(i.dataId),l=n.readSync(a.dataId),c=cX(s,l,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,c)}const cRe={kernelName:$E,backendName:"webgl",kernelFunc:uRe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fRe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,hRe=`
  return float(int(a.r) & int(b.r));
`;function dRe(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,a=he().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=he().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(i.dataId).values,[h,d]=wOe(r.shape,i.shape,l,c,r.dtype),p=n.makeTensorInfo(d,r.dtype),g=n.texData.get(p.dataId);return g.values=h,p}let s;return a?s=new Nf(fRe,r.shape,i.shape,!1):s=new Hl(hRe,r.shape,i.shape),n.runWebGLProgram(s,[r,i],r.dtype)}const pRe={kernelName:TE,backendName:"webgl",kernelFunc:dRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mRe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,a=n.readSync(r.dataId),o=n.readSync(i.dataId),s=et(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const gRe={kernelName:yG,backendName:"webgl",kernelFunc:mRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yRe="return float(a != b);",$X=nr({opSnippet:yRe,cpuKernelImpl:UOe,dtype:"bool"}),vRe={kernelName:p0,backendName:"webgl",kernelFunc:$X};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nm(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Jr({inputs:{x:i.complexTensorInfos.real},backend:n})}const bRe={kernelName:YE,backendName:"webgl",kernelFunc:Nm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xRe="return float(int(x));";function wRe(t,e){const n=new Ia(t.shape,xRe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jk(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return Jr({inputs:{x:i},backend:n});const o=zn(i.shape),s=Jk({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Ws({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),l}if(i.dtype==="complex64"){const o=Nm({inputs:{input:i},backend:n}),s=Jk({inputs:{x:o},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(o),s}if(!hG(i.dtype,a)){const o=Jr({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:a}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[s,l,c]=SOe(o,i.shape,i.dtype,a);return n.makeTensorInfo(s,l,c)}if(a==="int32")return wRe(i,n);if(a==="bool"){const o=n.makeTensorInfo([],"bool",cr("bool",1)),l=$X({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}const SRe={kernelName:Cp,backendName:"webgl",kernelFunc:Jk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xj="return ceil(x);",CRe=bt({opSnippet:xj,packedOpSnippet:xj,cpuKernelImpl:COe}),$Re={kernelName:$p,backendName:"webgl",kernelFunc:CRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TRe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kRe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ARe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:a,clipValueMax:o}=r;let s;he().getBool("WEBGL_PACK_CLIP")?s=new kRe(i.shape):s=new TRe(i.shape);const l=[[a],[o]];return n.runWebGLProgram(s,[i],i.dtype,l)}const ERe={kernelName:Tp,backendName:"webgl",kernelFunc:ARe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IRe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wj(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function ORe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),a=new IRe(r.shape),o=[wj(r,i.complexTensorInfos.real),wj(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(a,o,o[0].dtype)}const NRe={kernelName:jb,backendName:"webgl",kernelFunc:ORe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Re{constructor(e){this.outputShape=[],this.outputShape=Da(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const s=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const i=n.length,a=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RRe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Da(e,n);const r=this.outputShape,i=r.length,a=Mt(i),o=Tr("coords",i),s=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((x,b)=>`T${b}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let x=1;x<l.length;x++)l[x]=l[x-1]+e[x][n];const c=s[n],h=s.slice(-2),d=s.join();let p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${h.join()}));
        }`;for(let x=1;x<l.length;x++){const b=l[x-1];p+=`
        if (${c} < ${l[x]}  && ${c} >= ${l[x-1]}) {
          return getChannel(
            getT${x}(${yy(s,c,b)}),
            vec2(${yy(h,c,b)}));
        }`}const g=l.length,y=l[l.length-1];p+=`
        return getChannel(
          getT${g}(${yy(s,c,y)}),
          vec2(${yy(h,c,y)}));`,this.userCode=`
      float getValue(${s.map(x=>"int "+x)}) {
        ${p}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function yy(t,e,n){const r=t.indexOf(e);return t.map((a,o)=>o===r?`${a} - ${n}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cx(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Jr({inputs:{x:i.complexTensorInfos.imag},backend:n})}const DRe={kernelName:UE,backendName:"webgl",kernelFunc:cx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rd(t,e,n){const r=t[0].dtype;if(r==="complex64"){const g=t.map(S=>Nm({inputs:{input:S},backend:n})),y=t.map(S=>cx({inputs:{input:S},backend:n})),x=rd(g,e,n),b=rd(y,e,n),w=Ws({inputs:{real:x,imag:b},backend:n});return g.forEach(S=>n.disposeIntermediateTensorInfo(S)),y.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),w}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const g=t.map(T=>{const E=[-1,ve(T.shape.slice(e))];return De({inputs:{x:T},backend:n,attrs:{shape:E}})}),y=g.map(T=>({vals:n.readSync(T.dataId),shape:T.shape})),x=Da(g.map(T=>T.shape),1),b=g[0].shape[0]===1,w=$Oe(y,x,r,b),S=Da(t.map(T=>T.shape),e),$=n.makeTensorInfo(S,r,w);return g.forEach(T=>n.disposeIntermediateTensorInfo(T)),$}const a=t.filter(g=>ve(g.shape)>0),o=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const g=o?new Ia(t[0].shape,cs):new gs(t[0].shape,cs);return n.runWebGLProgram(g,t,r)}const s=he().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>s){const g=[];for(let x=0;x<a.length;x+=s){const b=a.slice(x,x+s);g.push(rd(b,e,n))}const y=rd(g,e,n);for(const x of g)n.disposeIntermediateTensorInfo(x);return y}if(o){const g=new RRe(a.map(y=>y.shape),e);return n.runWebGLProgram(g,a,r)}const{tensors2D:l,outShape:c}=MRe(a,e,n),h=new _Re(l.map(g=>g.shape)),d=n.runWebGLProgram(h,l,r);l.forEach(g=>n.disposeIntermediateTensorInfo(g));const p=De({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),p}function MRe(t,e,n){const r=Da(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>De({inputs:{x:a},attrs:{shape:[-1,ve(a.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TX(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=ut(i,e[0].shape)[0],o=e.map(c=>c.shape);WI(o,a);const s=Da(e.map(c=>c.shape),a);if(ve(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(c=>ve(c.shape)>0);return l.length===1?Jr({inputs:{x:l[0]},backend:n}):rd(l,a,n)}const PRe={kernelName:Ub,backendName:"webgl",kernelFunc:TX};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kX{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,h=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,g=e.filterWidth,y=Math.floor(e.inChannels/4)*4,x=e.inChannels%4,b=e.dataFormat==="channelsLast",w=b?1:2,S=b?2:3,$=b?3:1;let T="",k="";r&&(i?T=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?T=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:T=`
          float activation(float x) {
            ${r}
          }
        `,k="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${T}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${$}];

        ivec2 xRCCorner =
            ivec2(coords[${w}], coords[${S}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${h};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${y}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${x===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${y}) *
                    getW(wR, wC, ${y}, d2);
              } else {
                dotProd +=
                    getX(batch, ${y}, xR, xC) *
                    getW(wR, wC, ${y}, d2);
              }

            } else if (${x===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${x===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2),
                getW(wR, wC, ${y} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1),
                  getX(batch, xR, xC, ${y} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC),
                  getX(batch, ${y} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${k}
        setOutput(result);
      }
    `}}class LRe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,h=e.dilationWidth,d=e.filterDepth,p=e.filterHeight,g=e.filterWidth,y=Math.floor(e.inChannels/4)*4,x=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${o}, ${s});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${h};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${y}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${x===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${y}) *
                  getW(wF, wR, wC, ${y}, d2);
              } else if (${x===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${x===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1),
                  getX(batch, xF, xR, xC, ${y} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2),
                  getW(wF, wR, wC, ${y} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AX{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=mr(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,h=e.filterWidth,d=h;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<h;b++)p+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let b=0;b<h;b++)p+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(d+1)/2;b++){const w=b*2;if(p+=`
           xC = xCCorner + ${w*l};
           `,s===1){if(w<h&&(o%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }
               `,l===1&&w>0?p+=`
                 xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                   } else {
                     xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xC${w} = xTexelC${w};
                 `,w+1<h)){const S=o%2===0?pE(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${S};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                     xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${w+1}.zw = vec2(0.0);
                     }
                     xTexelC${w+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                     } else {
                      xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                     }
                     `:p+=`
                     xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                     `):S===1?p+=`
                     xC${w+1} = xTexelC${w};
                     `:p+=`
                     xCOffset = xC + ${S};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                       xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${w+1}.zw = vec2(0.0);
                       }
                       xTexelC${w+1}Ready = 1;
                     }

                     xC${w+1} = xTexelC${w+1};
                     `}}else w<h&&(o%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.0);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
               `,w+1<h&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(
                   xTexelC${w}.xy, xTexelC${w+1}.xy);
               `,w+1<h&&(p+=`
                   xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                 `)));w<h&&(p+=`
             wTexel = getW(r, ${w}, d1, d2);
             dotProd += xC${w}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${w}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,w+1<h&&(p+=`
               wTexel = getW(r, ${w+1}, d1, d2);
               dotProd += xC${w+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${w+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",y="";r&&(i?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:a?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:g=`vec4 activation(vec4 x) {
           ${r}
         }`,y="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${x}
         ${y}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FRe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=mr(this.outputShape.length);const{dataFormat:r}=n,i=Er(),a=r==="channelsLast",o=a?1:2,s=a?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let h=0;h<=1;h++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${h};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${h*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${h*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eb(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function EX({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const l=t.shape,c=r.texData.get(t.dataId),h=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,g=n.dataFormat==="channelsLast",y=!1,x=!1;let b;const w=[];if(a!=null){const T=eb(a.shape,g);T!=null&&(a=De({inputs:{x:a},backend:r,attrs:{shape:T}}),w.push(a))}if(i!=null){const T=eb(i.shape,g);T!=null&&(i=De({inputs:{x:i},backend:r,attrs:{shape:T}}),w.push(i))}if(!((d===1||p===1)&&h>xX)&&c.isPacked&&g&&c.texture!=null&&l[2]%2!==0&&At(c.shape.slice(-3),l.slice(-3))){const T=l[0]*l[1]*(l[2]+1),k={dataId:t.dataId,shape:[1,T,n.inChannels],dtype:t.dtype},E=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,j(Qv(c.shape,k.shape),()=>`packed reshape ${c.shape} to ${k.shape} isn't free`);const I=De({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});w.push(I);const _=Jv({a:k,b:I,backend:r,transposeA:y,transposeB:x,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o}),N=r.texData.get(_.dataId);j(N.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=E,N.shape=n.outShape,b=Jr({inputs:{x:_},backend:r}),b.shape=n.outShape,w.push(_)}else{const T=n.outHeight*n.outWidth,k=De({inputs:{x:t},backend:r,attrs:{shape:g?[n.batchSize,T,n.inChannels]:[n.batchSize,n.inChannels,T]}}),E=De({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),I=Jv({a:g?k:E,b:g?E:k,transposeA:!g,transposeB:x,backend:r,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o});b=De({inputs:{x:I},backend:r,attrs:{shape:n.outShape}}),w.push(k),w.push(E),w.push(I)}for(const T of w)r.disposeIntermediateTensorInfo(T);return b}function IX({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:l,filterHeight:c,inChannels:h,outWidth:d,outHeight:p,dataFormat:g}=n,y=g==="channelsLast",x=l*c*h,b=p*d,w=[n.batchSize,x,b],S=!0,$=!1,T=[];if(a!=null){const W=eb(a.shape,y);W!=null&&(a=De({inputs:{x:a},backend:r,attrs:{shape:W}}),T.push(a))}if(i!=null){const W=eb(i.shape,y);W!=null&&(i=De({inputs:{x:i},backend:r,attrs:{shape:W}}),T.push(i))}const k=De({inputs:{x:e},backend:r,attrs:{shape:[1,x,ve(e.shape)/x]}});T.push(k);const E=new FRe(w,n),I=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],_=r.runWebGLProgram(E,[t],"float32",I),N=De({inputs:{x:_},backend:r,attrs:{shape:w}});T.push(_),T.push(N);const R=i!=null,O=a!=null,P=s==="leakyrelu",B=s?np(s,!0):null,U=new bX(y?N.shape:k.shape,y?k.shape:N.shape,y?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],S,$,R,B,O,P),z=y?[N,k]:[k,N];if(i&&z.push(i),O&&z.push(a),P){const W=r.makeTensorInfo([],"float32",Ps(o,"float32"));z.push(W),T.push(W)}const M=r.runWebGLProgram(U,z,"float32"),V=De({inputs:{x:M},backend:r,attrs:{shape:n.outShape}});T.push(M);for(const W of T)r.disposeIntermediateTensorInfo(W);return V}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dataFormat:l,dilations:c,dimRoundingMode:h}=r,d=Lo(l),p=er(i.shape,a.shape,o,c,s,h,!1,d);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=EX({x:i,filter:a,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&he().getBool("WEBGL_EXP_CONV")){const x=new AX(p),b=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=n.runWebGLProgram(x,[i,a],"float32",b)}else if(he().getBool("WEBGL_CONV_IM2COL"))g=IX({x:i,filter:a,convInfo:p,backend:n});else{const x=new kX(p);g=n.runWebGLProgram(x,[i,a],"float32")}const y=De({inputs:{x:g},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(g),y}const zRe={kernelName:Vb,backendName:"webgl",kernelFunc:BRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jRe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,a=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class URe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dataFormat==="channelsLast",s=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,h=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${h}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class VRe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class WRe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,h=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:c,filterShape:h}=r,d=Lo(l),p=er(i.shape,h,o,1,s,c,!1,d),g=new jRe(p);return n.runWebGLProgram(g,[i,a],"float32")}const qRe={kernelName:AE,backendName:"webgl",kernelFunc:GRe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HRe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=mr(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{inputShape:o,strides:s,pad:l,dataFormat:c,dimRoundingMode:h}=r,d=Lo(c),p=er(o,a.shape,s,1,l,h,!1,d);if(he().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],y=new HRe(p);return n.runWebGLProgram(y,[i,a],"float32",g)}else{const g=new URe(p);return n.runWebGLProgram(g,[i,a],"float32")}}const KRe={kernelName:Wb,backendName:"webgl",kernelFunc:XRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l}=r,c=Ls(i.shape,a.shape,o,l,s),h=new LRe(c);return n.runWebGLProgram(h,[i,a],"float32")}const ZRe={kernelName:Gb,backendName:"webgl",kernelFunc:YRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,filterShape:l}=r,c=Ls(i.shape,l,o,1,s),h=new VRe(c);return n.runWebGLProgram(h,[i,a],"float32")}const JRe={kernelName:EE,backendName:"webgl",kernelFunc:QRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{pad:o,strides:s,inputShape:l}=r,c=Ls(l,a.shape,s,1,o),h=new WRe(c);return n.runWebGLProgram(h,[i,a],"float32")}const tDe={kernelName:IE,backendName:"webgl",kernelFunc:eDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nDe=_f+`
  return cos(x);
`,rDe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${su}
  return result;
`,iDe=bt({opSnippet:nDe,packedOpSnippet:rDe}),aDe={kernelName:kp,backendName:"webgl",kernelFunc:iDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oDe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,sDe=bt({opSnippet:oDe}),lDe={kernelName:Ap,backendName:"webgl",kernelFunc:sDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uDe{constructor(e,n,r,i,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,l,c]=e,[h]=n,[d,p]=r;this.outputShape=[h,d,p,c];const g=i==="bilinear"?1:0,[y,x]=[`${s-1}.0`,`${l-1}.0`],[b,w,S]=d>1?[`${(s-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${y} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${y}`],[$,T,k]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${x} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${x}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${$});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${w};
        float width_scale = ${T};

        float in_y = ${S};
        if( in_y < 0.0 || in_y > ${y} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${k};
        if( in_x < 0.0 || in_x > ${x} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cDe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:a,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:c}=r,h=new uDe(i.shape,a.shape,s,l,c);return n.runWebGLProgram(h,[i,a,o],"float32")},fDe={kernelName:NE,backendName:"webgl",kernelFunc:cDe};var ip;(function(t){t.Prod="*",t.Sum="+"})(ip||(ip={}));class Sj{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,o=this.op===ip.Prod?"1.0":"0.0",s=r?o:`getX(${Cj(a,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",h="";r?(c=i?`end != ${l-1}`:"end != 0",h=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",h=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Mt(a)} coords = getOutputCoords();
        int end = ${$j(a,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${h};
          ${$j(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${Cj(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function Cj(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function $j(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OX(t,e,n,r,i,a){const o=e.shape.length,s=on([r],o);let l=e;s!=null&&(l=Ar({inputs:{x:e},backend:n,attrs:{perm:s}}));const c=mn(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const h=l.shape[c];let d=Jr({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(h))-1;p++){const g=new Sj(t,l.shape,!1,a),y=[[p]],x=d;d=n.runWebGLProgram(g,[d],d.dtype,y),n.disposeIntermediateTensorInfo(x)}if(i){const p=new Sj(t,l.shape,i,a),g=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(g)}if(s!=null){const p=Fs(s),g=Ar({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),g}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;return OX(ip.Prod,i,n,a,o,s)}const dDe={kernelName:OE,backendName:"webgl",kernelFunc:hDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;return OX(ip.Sum,i,n,a,o,s)}const mDe={kernelName:qb,backendName:"webgl",kernelFunc:pDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o,binaryOutput:s}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),c=n.readSync(a.dataId),h=cX(l,c,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,h)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(a),h=xOe(l,c,o,s);return n.makeTensorInfo(h.shape,a.dtype,h.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const yDe={kernelName:_E,backendName:"webgl",kernelFunc:gDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vDe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:a,dataFormat:o}=r,s=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],c=o==="NHWC"?i.shape[2]:i.shape[3],h=o==="NHWC"?i.shape[3]:i.shape[1],d=l*a,p=c*a,g=h/(a*a),y=o==="NHWC"?[s,d,p,g]:[s,g,d,p],x=new vDe(y,a,o);return n.runWebGLProgram(x,[i],i.dtype)}const xDe={kernelName:RE,backendName:"webgl",kernelFunc:bDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NX{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=mr(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,l=e.outChannels/e.inChannels;let c="",h="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,h="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _X{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=mr(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=d;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<d;w++)g+=`
          vec4 xTexelC${w*2};
          int xTexelC${w*2}Ready;
          vec4 xTexelC${w*2+1};
          int xTexelC${w*2+1}Ready;
          vec4 xC${w};`;g+=`
    for (int r = 0; r < ${h}; r++) {
      `;for(let w=0;w<d;w++)g+=`
          xTexelC${w*2} = vec4(0.0);
          xTexelC${w*2}Ready = 0;
          xTexelC${w*2+1} = vec4(0.0);
          xTexelC${w*2+1}Ready = 0;
          xC${w} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let w=0;w<(p+1)/2;w++){const S=w*2;if(g+=`
          xC = xCCorner + ${S*c};
          `,l===1){if(S<d&&(s%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }
              `,c===1&&S>0?g+=`
                xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                  } else {
                    xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xC${S} = xTexelC${S};
                `,S+1<d)){const $=s%2===0?pE(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${$};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                    xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${S+1}.zw = vec2(0.0);
                    }
                    xTexelC${S+1}Ready = 1;
                  }
                  `,c>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                    } else {
                     xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                    }
                    `:g+=`
                    xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                    `):$===1?g+=`
                    xC${S+1} = xTexelC${S};
                    `:g+=`
                    xCOffset = xC + ${$};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                      xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${S+1}.zw = vec2(0.0);
                      }
                      xTexelC${S+1}Ready = 1;
                    }

                    xC${S+1} = xTexelC${S+1};
                    `}}else S<d&&(s%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.0);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
              `,S+1<d&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(
                  xTexelC${S}.xy, xTexelC${S+1}.xy);
              `,S+1<d&&(g+=`
                  xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                `)));S<d&&(g+=`
            wTexel = getW(r, ${S}, d1, q);
            dotProd += xC${S} * vec4(wTexel.xz, wTexel.xz);
          `,S+1<d&&(g+=`
              wTexel = getW(r, ${S+1}, d1, q);
              dotProd += xC${S+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let y="",x="";r&&(i?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`vec4 activation(vec4 x) {
          ${r}
        }`,x="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:c}=r;let h=l;h==null&&(h=[1,1]),j(dr(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const d=er(i.shape,a.shape,o,h,s,c,!0);let p;he().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new _X(d):p=new NX(d);const g=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,a],"float32",g)}const SDe={kernelName:Hb,backendName:"webgl",kernelFunc:wDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CDe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class $De{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:c,filterShape:h}=r,d=er(i.shape,h,o,s,l,c,!0),p=new CDe(d);return n.runWebGLProgram(p,[i,a],"float32")}const kDe={kernelName:DE,backendName:"webgl",kernelFunc:TDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:c,inputShape:h}=r,d=er(h,a.shape,o,s,l,c,!0),p=new $De(d);return n.runWebGLProgram(p,[i,a],"float32")}const EDe={kernelName:ME,backendName:"webgl",kernelFunc:ADe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IDe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],a=ve(r.shape),o=De({inputs:{x:r},backend:n,attrs:{shape:[a]}}),s=new IDe(a),l=n.runWebGLProgram(s,[o],o.dtype),c=De({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const NDe={kernelName:vG,backendName:"webgl",kernelFunc:ODe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _De{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:a,strideWidth:o,filterHeight:s,filterWidth:l,dilationHeight:c,dilationWidth:h}=e,{top:d,left:p}=i;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${o});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${h};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l}=r,c=fm(i.shape,a.shape,o,s,"NHWC",l);let h;const d=new _De(c);h=n.runWebGLProgram(d,[i,a],"float32");const p=De({inputs:{x:h},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(h),p}const DDe={kernelName:Xb,backendName:"webgl",kernelFunc:RDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,a=e,{allDims:o,summedDims:s,idDims:l}=nO(i,a.length);iO(o.length,l,a);const{path:c,steps:h}=aO(s,l),d=h.length;let p=null,g=o.length;const y=[];for(let x=0;x<d;++x){for(const b of h[x]){const{permutationIndices:w,expandDims:S}=rO(g,l[b]);let $;oO(w)?$=a[b]:($=Ar({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),y.push($));const T=$.shape.slice();for(let k=0;k<S.length;++k)T.splice(S[k],0,1);At($.shape,T)||($=De({inputs:{x:$},backend:n,attrs:{shape:T}}),y.push($)),p===null?p=$:(p=qO({inputs:{a:$,b:p},backend:n}),y.push(p))}x<d-1&&(c[x]>=0&&(p=ux({inputs:{x:p},backend:n,attrs:{axis:c[x]-(o.length-g),keepDims:!1}}),y.push(p)),g--)}for(const x of y)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const PDe={kernelName:PE,backendName:"webgl",kernelFunc:MDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LDe="return (x >= 0.0) ? x : (exp(x) - 1.0);",FDe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,BDe=bt({opSnippet:LDe,packedOpSnippet:FDe}),zDe={kernelName:Ip,backendName:"webgl",kernelFunc:BDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jDe="return (b >= 0.0) ? a : a * (b + 1.0);",UDe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,VDe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,a=he().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Nf(UDe,r.shape,i.shape):new Hl(jDe,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],r.dtype)},WDe={kernelName:LE,backendName:"webgl",kernelFunc:VDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDe=`
  return vec4(equal(a, b));
`,qDe="return float(a == b);",HDe=nr({opSnippet:qDe,packedOpSnippet:GDe,dtype:"bool",cpuKernelImpl:TOe}),XDe={kernelName:Kb,backendName:"webgl",kernelFunc:HDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KDe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${KI};
  float a1 = ${YI};
  float a2 = ${ZI};
  float a3 = ${QI};
  float a4 = ${JI};
  float a5 = ${eO};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,YDe=bt({opSnippet:KDe}),ZDe={kernelName:Op,backendName:"webgl",kernelFunc:YDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QDe=_f+`
  return exp(x);
`,JDe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RX=bt({opSnippet:QDe,packedOpSnippet:JDe,cpuKernelImpl:kOe,dtype:"float32"}),eMe={kernelName:Np,backendName:"webgl",kernelFunc:RX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eA(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:a}=e,o=a.shape.length,s=a.shape.slice();let l=i;return i<0&&(j(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),s.splice(l,0,1),De({inputs:{x:a},backend:r,attrs:{shape:s}})}const tMe={kernelName:Yb,backendName:"webgl",kernelFunc:eA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tj="return exp(x) - 1.0;",nMe=bt({opSnippet:Tj,packedOpSnippet:Tj,cpuKernelImpl:AOe}),rMe={kernelName:_p,backendName:"webgl",kernelFunc:nMe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kj{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const a=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DX(t,e,n){const r=n.texData.get(t.dataId),i=ve(t.shape),a=t.shape[t.shape.length-1],o=i/a,s=De({inputs:{x:t},backend:n,attrs:{shape:[o,a]}}),l=s.shape,c=new kj("real",l,e),h=new kj("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(c,d,"float32"),g=n.runWebGLProgram(h,d,"float32"),y=Ws({inputs:{real:p,imag:g},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g);const x=De({inputs:{x:y},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(y),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iMe(t){const{inputs:e,backend:n}=t,{input:r}=e;return DX(r,!1,n)}const aMe={kernelName:FE,backendName:"webgl",kernelFunc:iMe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oMe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _m(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:a}=n;if(a=a||yf(i),a==="string"){const o=hn(a,ve(r));return o.fill(i),e.makeTensorInfo(r,a,o)}else{const o=new oMe(r,i),s=[[i]];return e.runWebGLProgram(o,[],a,s)}}const sMe={kernelName:BE,backendName:"webgl",kernelFunc:_m};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lMe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uMe={kernelName:zE,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new lMe(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aj="return floor(x);",cMe=bt({opSnippet:Aj,packedOpSnippet:Aj,cpuKernelImpl:EOe}),fMe={kernelName:Rp,backendName:"webgl",kernelFunc:cMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hMe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,dMe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,pMe=nr({opSnippet:hMe,packedOpSnippet:dMe,dtype:"int32"}),mMe={kernelName:Dp,backendName:"webgl",kernelFunc:pMe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gMe{constructor(e){this.variableNames=["A"];const n=Er(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yMe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Er(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vMe={kernelName:Ope,backendName:"webgl",kernelFunc:bMe};let tc,KT=he().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function bMe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:a}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],h=[c,l],d=[c,l,a];if(s||o){const x=he().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(tc==null||x!==KT)&&(KT=x,tc=document.createElement("canvas").getContext("2d",{willReadFrequently:KT})),tc.canvas.width=l,tc.canvas.height=c,tc.drawImage(i,0,0,l,c),i=tc.canvas}const p=n.makeTensorInfo(h,"int32");n.texData.get(p.dataId).usage=di.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);const g=he().getBool("WEBGL_PACK")?new yMe(d):new gMe(d),y=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r,x=Lo(h),b=er(i.shape,a.shape,l,d,c,p,!1,x);let w;const S=[],$=o!=null,T=s!=null,k=g==="leakyrelu",E=()=>{const _=[i,a],N=(R,O)=>{if(O==="NCHW"&&R.shape.length===1&&R.shape[0]!==1){const P=De({inputs:{x:R},backend:n,attrs:{shape:[R.shape[0],1,1]}});return S.push(P),P}return R};if($&&_.push(N(o,h)),T&&_.push(N(s,h)),k){const R=n.makeTensorInfo([],"float32",Ps(y,"float32"));_.push(R),S.push(R)}return _};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))w=EX({x:i,filter:a,convInfo:b,backend:n,bias:o,activation:g,preluActivationWeights:s,leakyreluAlpha:y});else if(b.strideWidth<=2&&x==="channelsLast"&&he().getBool("WEBGL_EXP_CONV")){const _=g?np(g,!0):null,N=new AX(b,$,_,T,k),R=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],O=E();w=n.runWebGLProgram(N,O,"float32",R)}else if(he().getBool("WEBGL_CONV_IM2COL"))w=IX({x:i,filter:a,convInfo:b,backend:n,bias:o,activation:g,preluActivationWeights:s,leakyreluAlpha:y});else{const _=g?np(g,!1):null,N=new kX(b,$,_,T,k),R=E();w=n.runWebGLProgram(N,R,"float32")}const I=De({inputs:{x:w},backend:n,attrs:{shape:b.outShape}});return S.push(w),S.forEach(_=>n.disposeIntermediateTensorInfo(_)),I}const wMe={kernelName:Ov,backendName:"webgl",kernelFunc:xMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:g}=r,y=[];let x=h;x==null&&(x=[1,1]),j(dr(l,x),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${x}'`);const b=er(i.shape,a.shape,l,x,c,d,!0),w=he().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,S=p?np(p,w):null,$=[i,a],T=o!=null,k=s!=null,E=p==="leakyrelu";if(T&&$.push(o),k&&$.push(s),E){const R=n.makeTensorInfo([],"float32",Ps(g,"float32"));$.push(R),y.push(R)}let I;w?I=new _X(b,T,S,k,E):I=new NX(b,T,S,k,E);const _=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],N=n.runWebGLProgram(I,$,"float32",_);return y.forEach(R=>n.disposeIntermediateTensorInfo(R)),N}const CMe={kernelName:LG,backendName:"webgl",kernelFunc:SMe};class $Me{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const a=Mt(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,a=i.shape,o=a[a.length-1],s=ve(r.shape),[l,c,h,d]=FI(r,i),p=De({inputs:{x:i},backend:n,attrs:{shape:[c,o]}}),g=De({inputs:{x:r},backend:n,attrs:{shape:[ve(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const w=n.readSync(i.dataId),S=n.bufferSync(r),$=IOe(w,S,r.dtype,c,o,h,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,$.values)}const y=new $Me(o,d,[c,h],r.shape),x=n.runWebGLProgram(y,[g,p],g.dtype),b=De({inputs:{x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),b}const kMe={kernelName:bG,backendName:"webgl",kernelFunc:TMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AMe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Mt(this.rank),i=EMe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function EMe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MX(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:a}=e,{axis:o,batchDims:s}=r,l=ut(o,i.shape)[0];if(he().get("DEBUG")){const S=n.readSync(a.dataId),$=i.shape[l];for(let T=0;T<S.length;++T){const k=S[T];j(k<=$-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${$-1}]`)}}const c=lO(i,a,l,s),h=ve(a.shape),d=[],p=De({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),g=De({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,h/c.batchSize]}});d.push(p),d.push(g);const y=[c.batchSize,c.outerSize,h/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,a])||i.dtype==="string"){const S=n.bufferSync(g),$=n.bufferSync(p),T=OOe($,S,y);return d.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.makeTensorInfo(c.outputShape,T.dtype,T.values)}const x=new AMe(p.shape,y),b=n.runWebGLProgram(x,[p,g],p.dtype);d.push(b);const w=De({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return d.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const IMe={kernelName:Qb,backendName:"webgl",kernelFunc:MX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OMe="return float(a > b);",NMe=`
  return vec4(greaterThan(a, b));
`,_Me=nr({opSnippet:OMe,packedOpSnippet:NMe,cpuKernelImpl:NOe,dtype:"bool"}),RMe={kernelName:Jb,backendName:"webgl",kernelFunc:_Me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DMe="return float(a >= b);",MMe=`
  return vec4(greaterThanEqual(a, b));
`,PMe=nr({opSnippet:DMe,packedOpSnippet:MMe,dtype:"bool",cpuKernelImpl:_Oe}),LMe={kernelName:Mp,backendName:"webgl",kernelFunc:PMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FMe(t){const{inputs:e,backend:n}=t,{input:r}=e;return DX(r,!0,n)}const BMe={kernelName:jE,backendName:"webgl",kernelFunc:FMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zMe="return float(!isnan(x) && !isinf(x));",jMe=bt({opSnippet:zMe,dtype:"bool"}),UMe={kernelName:Lp,backendName:"webgl",kernelFunc:jMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VMe="return float(isinf(x));",WMe=bt({opSnippet:VMe,dtype:"bool"}),GMe={kernelName:Fp,backendName:"webgl",kernelFunc:WMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qMe="return float(isnan(x));",HMe=bt({opSnippet:qMe,dtype:"bool"}),XMe={kernelName:Bp,backendName:"webgl",kernelFunc:HMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KMe="return float(a < b);",YMe=`
  return vec4(lessThan(a, b));
`,ZMe=nr({opSnippet:KMe,packedOpSnippet:YMe,cpuKernelImpl:ROe,dtype:"bool"}),QMe={kernelName:t0,backendName:"webgl",kernelFunc:ZMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JMe="return float(a <= b);",ePe=`
  return vec4(lessThanEqual(a, b));
`,tPe=nr({opSnippet:JMe,packedOpSnippet:ePe,cpuKernelImpl:DOe,dtype:"bool"}),nPe={kernelName:n0,backendName:"webgl",kernelFunc:tPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rPe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:a}=n,o=MOe(r,i,a);return e.makeTensorInfo([o.length],"float32",o)}const iPe={kernelName:xG,backendName:"webgl",kernelFunc:rPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aPe=_f+`
  return x < 0.0 ? 0./0. : log(x);
`,oPe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,sPe=bt({opSnippet:aPe,packedOpSnippet:oPe,cpuKernelImpl:POe}),lPe={kernelName:zp,backendName:"webgl",kernelFunc:sPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uPe=_f+`
  return log(1.0 + x);
`,cPe=bt({opSnippet:uPe}),fPe={kernelName:jp,backendName:"webgl",kernelFunc:cPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hPe="return float(a >= 1.0 && b >= 1.0);",dPe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,pPe=nr({opSnippet:hPe,packedOpSnippet:dPe,dtype:"bool"}),mPe={kernelName:r0,backendName:"webgl",kernelFunc:pPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gPe="return float(!(x >= 1.0));",yPe=bt({opSnippet:gPe}),vPe={kernelName:i0,backendName:"webgl",kernelFunc:yPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bPe="return float(a >= 1.0 || b >= 1.0);",xPe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,wPe=nr({opSnippet:bPe,packedOpSnippet:xPe,dtype:"bool"}),SPe={kernelName:a0,backendName:"webgl",kernelFunc:wPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CPe{constructor(e,n,r,i,a){this.variableNames=["x"],this.outputShape=[];const o=n,s=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Pe{constructor(e,n,r,i,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,s=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TPe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:a,bias:o,alpha:s,beta:l}=r,c=he().getBool("WEBGL_PACK_NORMALIZATION")?new $Pe(i.shape,a,o,s,l):new CPe(i.shape,a,o,s,l);return n.runWebGLProgram(c,[i],i.dtype)},kPe={kernelName:o0,backendName:"webgl",kernelFunc:TPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class APe{constructor(e,n,r,i,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:a,dy:o}=e,{depthRadius:s,bias:l,alpha:c,beta:h}=r,d=new APe(i.shape,s,l,c,h);return n.runWebGLProgram(d,[i,a,o],i.dtype)},IPe={kernelName:VE,backendName:"webgl",kernelFunc:EPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OPe(t,e,n,r){const i=ve(e),o=ve(t.shape)/i,s=De({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=lu(s,t.dtype,"max",r),c=De({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PX(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:a,keepDims:o}=r,s=i.shape.length,l=ut(a,i.shape);let c=l;const h=on(c,s),d=h!=null,p=n.shouldExecuteOnCPU([i]);let g=i;if(d){if(p){const $=n.texData.get(g.dataId).values,T=new Array(s);for(let I=0;I<T.length;I++)T[I]=i.shape[h[I]];const k=WO($,i.shape,i.dtype,h,T);g=n.makeTensorInfo(T,i.dtype);const E=n.texData.get(g.dataId);E.values=k}else g=lx(i,h,n);c=mn(c.length,s)}tr("max",c,s);const[y,x]=Wn(g.shape,c);let b=y;o&&(b=Sn(y,l));let w;if(p){const $=n.texData.get(g.dataId).values,T=LOe($,ve(x),b,i.dtype);w=n.makeTensorInfo(b,i.dtype);const k=n.texData.get(w.dataId);k.values=T}else w=OPe(g,x,b,n);return d&&n.disposeIntermediateTensorInfo(g),w}const NPe={kernelName:s0,backendName:"webgl",kernelFunc:PX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Pe=GO+`
  return max(a, b);
`,RPe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+su+`
  return result;
`,DPe=nr({opSnippet:_Pe,packedOpSnippet:RPe,cpuKernelImpl:FOe}),MPe={kernelName:Up,backendName:"webgl",kernelFunc:DPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Im(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,c=1;j(dr(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const h=Ui(i.shape,a,o,c,s,l);if(h.filterWidth===1&&h.filterHeight===1&&At(h.inShape,h.outShape))return Jr({inputs:{x:i},backend:n});const d=new rp(h,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const LPe={kernelName:l0,backendName:"webgl",kernelFunc:PPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dataFormat:l,dimRoundingMode:c}=r,h=[1,1,1],d=Po(i.shape,a,o,h,s,c,l),p=new HO(d,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}const BPe={kernelName:u0,backendName:"webgl",kernelFunc:FPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zPe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=a-1-e.padInfo.top,l=o-1-e.padInfo.left,c=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class jPe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=c-1-e.padInfo.top,g=h-1-e.padInfo.left,y=l*c*h-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${y} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${h} +
                  wR * ${h} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a,{filterSize:s,strides:l,pad:c,dimRoundingMode:h}=r,d=[1,1,1],p=Po(o.shape,s,l,d,c,h),g=new HO(p,"max",!0),y=n.runWebGLProgram(g,[o],o.dtype),x=new jPe(p),b=n.runWebGLProgram(x,[i,y],o.dtype);return n.disposeIntermediateTensorInfo(y),b}const VPe={kernelName:GE,backendName:"webgl",kernelFunc:UPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:o}=e,s=a;Im([a,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:h,dimRoundingMode:d}=r,p=Ui(s.shape,l,c,1,h,d),g=!0,y=new rp(p,"max",g),x=n.runWebGLProgram(y,[s],s.dtype),b=new zPe(p),w=n.runWebGLProgram(b,[i,x],s.dtype);return n.disposeIntermediateTensorInfo(x),w}const GPe={kernelName:WE,backendName:"webgl",kernelFunc:WPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qPe(t,e,n,r){let i=new rp(n,"max",!1);const a=r.runWebGLProgram(i,[t],"float32");i=new rp(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[a,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HPe={kernelName:wG,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,l=n;j(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];j(dr(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const h=Ui(r.shape,i,a,c,o),[d,p]=qPe(r,s,h,l);return[d,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(t,e,n,r){const i=ve(e),o=ve(t.shape)/i,s=De({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=lu(s,"float32","mean",r),c=De({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KPe={kernelName:c0,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:a}=e,o=n,s=r.shape.length,l=ut(a,r.shape);let c=l;const h=on(c,s),d=h!=null,p=o.shouldExecuteOnCPU([r]),g=[];let y=r;if(d){if(p){const T=o.texData.get(y.dataId).values,k=new Array(s);for(let _=0;_<k.length;_++)k[_]=r.shape[h[_]];const E=WO(T,r.shape,r.dtype,h,k);y=o.makeTensorInfo(k,r.dtype);const I=o.texData.get(y.dataId);I.values=E}else y=lx(r,h,o);g.push(y),c=mn(c.length,s)}tr("sum",c,s);const[x,b]=Wn(y.shape,c);let w=x;i&&(w=Sn(x,l));const S=XPe(y,b,w,o);for(const $ of g)o.disposeIntermediateTensorInfo($);return S}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=ut(a,i.shape);let c=l;const h=on(c,s);let d=i;h!=null&&(d=Ar({inputs:{x:i},backend:n,attrs:{perm:h}}),c=mn(c.length,i.shape.length)),tr("min",c,s);const[p,g]=Wn(d.shape,c),y=ve(g),x=De({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),b=lu(x,x.dtype,"min",n);let w;if(o){const S=Sn(p,l);w=De({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=De({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),h!=null&&n.disposeIntermediateTensorInfo(d),w}const ZPe={kernelName:f0,backendName:"webgl",kernelFunc:YPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QPe=GO+`
  return min(a, b);
`,JPe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+su+`
  return result;
`,e3e=nr({opSnippet:QPe,packedOpSnippet:JPe,cpuKernelImpl:BOe}),t3e={kernelName:Vp,backendName:"webgl",kernelFunc:e3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n3e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((h,d)=>h[0]+e[d]+h[1]);const i=e.length,a=Mt(i),o=n.map(h=>h[0]).join(","),s=n.map((h,d)=>h[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r3e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((y,x)=>y[0]+e[x]+y[1]);const i=e.length,a=Mt(i),o=n.map(y=>y[0]).join(","),s=n.map((y,x)=>y[0]+e[x]).join(","),l=Tr("rc",i),c=Tr("source",i),h=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1;let g="";if(i===1){const y=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${a} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${h}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const y=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${a} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${h}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${y}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${h}) {
            ${y}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i3e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:a}=n,o=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new r3e(r.shape,i,a):new n3e(r.shape,i,a);return e.runWebGLProgram(o,[r],r.dtype)},a3e={kernelName:h0,backendName:"webgl",kernelFunc:i3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o3e=`if (b == 0.0) return NAN;
  return mod(a, b);`,s3e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+su+`
  return result;
`,l3e=nr({opSnippet:o3e,packedOpSnippet:s3e}),u3e={kernelName:Wp,backendName:"webgl",kernelFunc:l3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c3e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3e=`
if (a == b) {
  return 1.0;
};
return a / b;`,h3e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,LX=nr({opSnippet:f3e,packedOpSnippet:h3e,checkOutOfBounds:!0}),d3e={kernelName:Ep,backendName:"webgl",kernelFunc:LX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ej="return a - b;",FX=nr({opSnippet:Ej,packedOpSnippet:Ej,supportsComplex:!0,cpuKernelImpl:oNe}),p3e={kernelName:om,backendName:"webgl",kernelFunc:FX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BX(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:a}=r,o=ut([a],i.shape),s=PX({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Sn(s.shape,o),c=De({inputs:{x:s},backend:n,attrs:{shape:l}}),h=FX({inputs:{a:i,b:c},backend:n}),d=RX({inputs:{x:h},backend:n}),p=ux({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),g=De({inputs:{x:p},backend:n,attrs:{shape:l}}),y=LX({inputs:{a:d,b:g},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}const m3e={kernelName:O0,backendName:"webgl",kernelFunc:BX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:a,seed:o,normalized:s}=r,l=s?i:BX({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],h=l.shape[1],d=new c3e(c,h,a),p=[[o]],g=n.runWebGLProgram(d,[l],"int32",p);return s||n.disposeIntermediateTensorInfo(l),g}const y3e={kernelName:SG,backendName:"webgl",kernelFunc:g3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v3e=Wi+`
  return -x;
`,b3e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function x3e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const a=n.texData.get(r.dataId),[o,s]=jOe(a.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}let i;return he().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new gs(r.shape,b3e):i=new Ia(r.shape,v3e),n.runWebGLProgram(i,[r],r.dtype)}const w3e={kernelName:d0,backendName:"webgl",kernelFunc:x3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3e=RI;function C3e(t){hi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,c=n.readSync(i.dataId),h=n.readSync(a.dataId),{selectedIndices:d}=S3e(c,h,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const $3e={kernelName:qE,backendName:"webgl",kernelFunc:C3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T3e=DI;function k3e(t){hi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:c}=r,h=n.readSync(i.dataId),d=n.readSync(a.dataId),{selectedIndices:p,validOutputs:g}=T3e(h,d,o,s,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const A3e={kernelName:HE,backendName:"webgl",kernelFunc:k3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E3e=MI;function I3e(t){hi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=r,h=n.readSync(i.dataId),d=n.readSync(a.dataId),p=o,g=s,y=l,x=c,{selectedIndices:b,selectedScores:w}=E3e(h,d,p,g,y,x);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const O3e={kernelName:XE,backendName:"webgl",kernelFunc:I3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N3e{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:a,depth:o,onValue:s,offValue:l}=r,c=ve(i.shape),h=new N3e(c,o,s,l),d=De({inputs:{x:i},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(h,[d],a);n.disposeIntermediateTensorInfo(d);const g=[...i.shape,o],y=De({inputs:{x:p},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(p),y},R3e={kernelName:g0,backendName:"webgl",kernelFunc:_3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tb(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=Nm({inputs:{input:r},backend:n}),a=tb({inputs:{x:i},backend:n}),o=cx({inputs:{input:r},backend:n}),s=tb({inputs:{x:o},backend:n}),l=Ws({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return _m({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const D3e={kernelName:R0,backendName:"webgl",kernelFunc:tb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zX(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=Nm({inputs:{input:r},backend:n}),a=zX({inputs:{x:i},backend:n}),o=cx({inputs:{input:r},backend:n}),s=tb({inputs:{x:o},backend:n}),l=Ws({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return _m({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const M3e={kernelName:m0,backendName:"webgl",kernelFunc:zX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return eA({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const a=e[0].shape,o=e[0].dtype;e.forEach(h=>{mE(a,h.shape,"All tensors passed to stack must have matching shapes"),j(o===h.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(h=>{const d=eA({inputs:{input:h},backend:n,attrs:{dim:i}});return s.push(d),d}),c=TX({inputs:l,backend:n,attrs:{axis:i}});return s.forEach(h=>n.disposeIntermediateTensorInfo(h)),c}const L3e={kernelName:y0,backendName:"webgl",kernelFunc:P3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F3e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,h)=>c[0]+e[h]+c[1]);const i=e.length,a=Mt(i),o=n.map(c=>c[0]).join(","),s=n.map((c,h)=>c[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B3e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((x,b)=>x[0]+e[b]+x[1]);const i=e.length,a=Mt(i),o=n.map(x=>x[0]).join(","),s=n.map((x,b)=>x[0]+e[b]).join(","),l=Tr("rc",i),c=Tr("source",i),h=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${a} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${h}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${h}) {`],g=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let y="";for(let x=0,b=i===1?2:4;x<b;x++)y+=`
        ${p[x]}
        if (${g}) {
          result[${x}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${x}] = getChannel(getX(${c.join()}), ${d});
        }
      `;y+=i===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jX=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:o}=r;if(ve(i.shape)===0){const c=a.map((h,d)=>h[0]+i.shape[d]+h[1]);return _m({backend:n,attrs:{shape:c,value:o,dtype:i.dtype}})}const s=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new B3e(i.shape,a,o):new F3e(i.shape,a,o),l=[[o]];return n.runWebGLProgram(s,[i],i.dtype,l)},z3e={kernelName:v0,backendName:"webgl",kernelFunc:jX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j3e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,U3e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+su+`
  return result;
`,V3e=nr({opSnippet:j3e,packedOpSnippet:U3e}),W3e={kernelName:qp,backendName:"webgl",kernelFunc:V3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=[],c=ut(a,i.shape);let h=c;const d=on(h,s);let p=i;d!=null&&(p=Ar({inputs:{x:i},backend:n,attrs:{perm:d}}),h=mn(h.length,s),l.push(p)),tr("prod",h,s);let g;if(n.shouldExecuteOnCPU([p])){const y=n.texData.get(p.dataId).values,{outVals:x,outShape:b,outDtype:w}=VOe(p.shape,p.dtype,y,h);g=n.makeTensorInfo(b,w,x)}else{const[y,x]=Wn(p.shape,h),b=ve(x),w=De({inputs:{x:p},backend:n,attrs:{shape:[-1,b]}}),S=oI(i.dtype),$=lu(w,S,"prod",n);g=De({inputs:{x:$},backend:n,attrs:{shape:y}}),l.push(w),l.push($)}if(o){l.push(g);const y=Sn(g.shape,c);g=De({inputs:{x:g},backend:n,attrs:{shape:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const q3e={kernelName:x0,backendName:"webgl",kernelFunc:G3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=e,{outputRaggedRank:s}=r,l=i.map(w=>n.readSync(w.dataId)),c=i.map(w=>w.shape),h=n.readSync(a.dataId),d=n.readSync(o.dataId),[p,g,y]=WOe(l,c,h,a.shape,a.dtype,d,o.shape,s),x=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),b=n.makeTensorInfo(y,a.dtype,g);return x.concat([b])}const X3e={kernelName:CG,backendName:"webgl",kernelFunc:H3e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K3e(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:a}=e,o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[c,h]=GOe(o,r.shape,r.dtype,s,i.shape,l,a.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([h.length],r.dtype,h);return[d,p]}const Y3e={kernelName:$G,backendName:"webgl",kernelFunc:K3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),h=n.readSync(a.dataId),d=n.readSync(o.dataId),p=s.map(b=>n.readSync(b.dataId)),g=s.map(b=>b.shape),[y,x]=qOe(c,i.shape,h,a.shape,a.dtype,d,o.shape,p,g,l);return n.makeTensorInfo(y,a.dtype,x)}const Q3e={kernelName:TG,backendName:"webgl",kernelFunc:Z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UX=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:a,dtype:o}=n,s=HOe(r,i,a,o);return e.makeTensorInfo([s.length],o,s)},J3e={kernelName:KE,backendName:"webgl",kernelFunc:UX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eLe="return 1.0 / x;",tLe=bt({opSnippet:eLe}),nLe={kernelName:Hp,backendName:"webgl",kernelFunc:tLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rLe=Wi+`
  return (x < 0.0) ? 0.0 : x;
`,iLe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,aLe=bt({opSnippet:rLe,packedOpSnippet:iLe}),oLe={kernelName:Xp,backendName:"webgl",kernelFunc:aLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sLe=Wi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,lLe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,uLe=bt({opSnippet:sLe,packedOpSnippet:lLe}),cLe={kernelName:Kp,backendName:"webgl",kernelFunc:uLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fLe{constructor(e,n,r,i,a){this.variableNames=["A"],this.outputShape=[];const[o,s,l,c]=e;this.outputShape=[o,n,r,c];const h=[i&&n>1?s-1:s,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let p;a?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${h[0]/d[0]},
          ${h[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hLe{constructor(e,n,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,c]=e;this.outputShape=[o,n,r,c];const h=[i&&n>1?s-1:s,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let p;a?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${h[0]/d[0]},
          ${h[1]/d[1]},
          ${h[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dLe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r,[l,c]=s,h=he().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new hLe(i.shape,l,c,a,o):new fLe(i.shape,l,c,a,o);return n.runWebGLProgram(h,[i],"float32")}const pLe={kernelName:C0,backendName:"webgl",kernelFunc:dLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mLe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,a]=n,[,o,s]=e,l=[r&&o>1?i-1:i,r&&s>1?a-1:a],c=[r&&o>1?o-1:o,r&&s>1?s-1:s],h=l[0]/c[0],d=l[1]/c[1],p=1/h,g=1/d,y=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${h});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gLe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r,s=new mLe(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}const yLe={kernelName:QE,backendName:"webgl",kernelFunc:gLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vLe{constructor(e,n,r,i,a){this.variableNames=["A"],this.outputShape=[];const[o,s,l,c]=e;this.outputShape=[o,n,r,c];const h=[i&&n>1?s-1:s,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],p=i?"0.5":"0.0";let g;a?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${h[0]/d[0]},
          ${h[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bLe{constructor(e,n,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,c]=e;this.outputShape=[o,n,r,c];const h=[i&&n>1?s-1:s,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],p=i?"0.5":"0.0";let g;a?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${h[0]/d[0]},
          ${h[1]/d[1]},
          ${h[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xLe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r,[l,c]=s,h=he().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new bLe(i.shape,l,c,a,o):new vLe(i.shape,l,c,a,o);return n.runWebGLProgram(h,[i],i.dtype)}const wLe={kernelName:S0,backendName:"webgl",kernelFunc:xLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SLe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,a]=n,[,o,s]=e,l=[r&&o>1?i-1:i,r&&s>1?a-1:a],c=[r&&o>1?o-1:o,r&&s>1?s-1:s],h=l[0]/c[0],d=l[1]/c[1],p=1/h,g=1/d,y=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${h});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r,s=new SLe(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}const $Le={kernelName:ZE,backendName:"webgl",kernelFunc:CLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TLe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=s=>n.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,a=e.map((s,l)=>i(l)).join(","),o=Mt(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kLe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Tr("rc",r),a=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,s=Mt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${a}){
            result.g = ${c(i.slice())};
          }
          if(${o}) {
            result.b = ${h(i.slice())};
            if(${a}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(y){return p(y)}function c(y){return y[r-1]="("+y[r-1]+" + 1)",p(y)}function h(y){return y[r-2]="("+y[r-2]+" + 1)",p(y)}function d(y){return y[r-1]="("+y[r-1]+" + 1)",y[r-2]="("+y[r-2]+" + 1)",p(y)}function p(y){const x=e.map((S,$)=>g($,y)),b=x.join(","),w=x.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${w}))`}function g(y,x){return n.indexOf(y)!==-1&&e[y]!==1?`${e[y]} - ${x[y]} - 1`:`${x[y]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ALe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:a}=r,o=i.shape.length,s=ut(a,i.shape);if(o===0)return Jr({inputs:{x:i},backend:n});const l=he().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kLe(i.shape,s):new TLe(i.shape,s);return n.runWebGLProgram(l,[i],i.dtype)}const ELe={kernelName:$0,backendName:"webgl",kernelFunc:ALe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ILe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let a="";typeof n=="number"?a=`float outputValue = ${n.toFixed(2)};`:a=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OLe={kernelName:aI,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:o}=e,s=n,l=new ILe(r.shape,a),[c,h]=qI(o,r.shape[1],r.shape[2]),d=[[c,h,Math.sin(i),Math.cos(i)]];return s.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NLe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,_Le=bt({opSnippet:NLe}),RLe={kernelName:Yp,backendName:"webgl",kernelFunc:_Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DLe="return inversesqrt(x);",MLe=bt({opSnippet:DLe,cpuKernelImpl:XOe}),PLe={kernelName:Zp,backendName:"webgl",kernelFunc:MLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XO{constructor(e,n,r,i,a,o,s=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=Mt(a.length),h=Mt(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const p=`getIndices(${d})`;let g="";i===1?g="i":i===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const b=`getDefaultValue(${x})`,w=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${a});

        void main() {
          ${h} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${w};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${y};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LLe{constructor(e,n,r,i,a,o,s=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=Mt(a.length),h=Mt(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const p=`getIndices(${d})`;let g="";i===1?g="i":i===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const b=`getDefaultValue(${x})`,w=n>1?"strides[j]":"strides",S=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${a});

        void main() {
          ${h} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${w};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${S};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${y};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FLe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:a}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:h,outputSize:d}=nu(a,i,o),p=[d/c,c];if(d===0)return n.makeTensorInfo(o,i.dtype);const g=De({inputs:{x:i},backend:n,attrs:{shape:[l,s]}}),y=De({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),x=n.makeTensorInfo([],"float32",new Float32Array([0]));let b;he().getBool("WEBGL_PACK")?b=new LLe(l,s,g.shape.length,y.shape.length,h,p):b=new XO(l,s,g.shape.length,y.shape.length,h,p);const w=n.runWebGLProgram(b,[y,g,x],y.dtype),S=De({inputs:{x:w},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),S}const BLe={kernelName:kG,backendName:"webgl",kernelFunc:FLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zLe{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const a="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=he().getNumber("WEBGL_VERSION")===2?a:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jLe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:a}=e,{side:o}=r,s=new zLe(i.shape[0],i.shape[1],a.shape[1],o),l=[[i.shape[1]]];return n.runWebGLProgram(s,[i,a],"int32",l)}const ULe={kernelName:EG,backendName:"webgl",kernelFunc:jLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VLe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,a;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)a="resRC",i="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let h=0;h<n.length;h++)c.push(`${s[h]}`),h<e&&l.push(`${s[h]}`);i=l.join(),a=c.join()}const o=Mt(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:a}=e,o=new VLe(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,a],Zr(i.dtype,a.dtype))}const GLe={kernelName:T0,backendName:"webgl",kernelFunc:WLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qLe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${G0};
  float scale = ${q0};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,HLe=bt({opSnippet:qLe}),XLe={kernelName:Qp,backendName:"webgl",kernelFunc:HLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KLe=_f+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,YLe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ZLe=bt({opSnippet:KLe,packedOpSnippet:YLe,cpuKernelImpl:YOe}),QLe={kernelName:nm,backendName:"webgl",kernelFunc:ZLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JLe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,eFe=bt({opSnippet:JLe}),tFe={kernelName:tm,backendName:"webgl",kernelFunc:eFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nFe=_f+`
  return sin(x);
`,rFe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${su}
  return result;
`,iFe=bt({opSnippet:nFe,packedOpSnippet:rFe}),aFe={kernelName:Jp,backendName:"webgl",kernelFunc:iFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oFe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,sFe=bt({opSnippet:oFe}),lFe={kernelName:em,backendName:"webgl",kernelFunc:sFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uFe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,cFe=bt({opSnippet:uFe}),fFe={kernelName:rm,backendName:"webgl",kernelFunc:cFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hFe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:o}=r;j(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=a.reduce((w,S)=>w*S),l=[[0,0]];l.push(...o);for(let w=1+a.length;w<i.shape.length;++w)l.push([0,0]);const c=[],h=jX({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=gm(h.shape,a,s,!1),p=ym(d.length,a.length,!1),g=vm(h.shape,a,s,!1),y=De({inputs:{x:h},backend:n,attrs:{shape:d}}),x=Ar({inputs:{x:y},backend:n,attrs:{perm:p}}),b=De({inputs:{x},backend:n,attrs:{shape:g}});return c.push(h),c.push(y),c.push(x),c.forEach(w=>n.disposeIntermediateTensorInfo(w)),b},dFe={kernelName:E0,backendName:"webgl",kernelFunc:hFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pFe(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(a.dataId),h=n.readSync(o.dataId)[0],[d,p,g,y,x]=QOe(s,r.shape,r.dtype,l,i.dtype,c,h);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(b=>Number(b)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const mFe={kernelName:IG,backendName:"webgl",kernelFunc:pFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[c,h,d]=JOe(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(h,r.dtype,c),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}const yFe={kernelName:OG,backendName:"webgl",kernelFunc:gFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[c,h]=hX(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(h,r.dtype,c)}const bFe={kernelName:NG,backendName:"webgl",kernelFunc:vFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xFe(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[c,h]=hX(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(h,r.dtype,c)}const wFe={kernelName:_G,backendName:"webgl",kernelFunc:xFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:a,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:c,sliceSize:h,strides:d,outputSize:p}=nu(a,i,s),g=!1;if(a.dtype==="string"){const w=n.bufferSync(i),S=n.bufferSync(a),$=Ss(n.readSync(o.dataId)[0]),T=KOe(w,S,s,p,h,c,l,d,$,g);return n.makeTensorInfo(s,T.dtype,T.values)}const y=new XO(c,l,i.shape.length,a.shape.length,d,[p,1],g),x=n.runWebGLProgram(y,[a,i,o],a.dtype),b=De({inputs:{x},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(x),b}const CFe={kernelName:RG,backendName:"webgl",kernelFunc:SFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:a,axis:o}=r,s=ut(o,i.shape)[0],l=sO(i,a,s),c=i.shape.length,h=new Array(c).fill(0),d=i.shape.slice();return l.map(p=>{const g=[...d];g[s]=p;const y=Rf({inputs:{x:i},backend:n,attrs:{begin:h,size:g}});return h[s]+=p,y})}const TFe={kernelName:I0,backendName:"webgl",kernelFunc:$Fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ij="return sqrt(x);",kFe=bt({opSnippet:Ij,packedOpSnippet:Ij,cpuKernelImpl:eNe}),AFe={kernelName:im,backendName:"webgl",kernelFunc:kFe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EFe="return x * x;",IFe=bt({opSnippet:EFe}),OFe={kernelName:JE,backendName:"webgl",kernelFunc:IFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oj="return (a - b) * (a - b);",NFe=nr({opSnippet:Oj,packedOpSnippet:Oj}),_Fe={kernelName:am,backendName:"webgl",kernelFunc:NFe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const a=n.readSync(i.dataId),o=No(a),s=tNe(o,"string",r);return n.makeTensorInfo(i.shape,"string",s)}const DFe={kernelName:eI,backendName:"webgl",kernelFunc:RFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MFe({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=Wi+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,a=new Ia(r.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const PFe={kernelName:cm,backendName:"webgl",kernelFunc:MFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LFe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,a=Mt(r.length),o=Mt(r.length);let s="";if(i===1)s="coords * strides + begin";else{let l=0;s=r.map((c,h)=>(l++,r.length===1?`coords * strides[${h}] + begin[${h}]`:`coords[${l-1}] * strides[${h}] + begin[${h}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,end:o,strides:s,beginMask:l,endMask:c,ellipsisMask:h,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:g,finalShape:y,isIdentity:x,sliceDim0:b,isSimpleSlice:w,begin:S,end:$,strides:T}=VI(i.shape,a,o,s,l,c,h,d,p);let k;if(x)k=De({inputs:{x:i},backend:n,attrs:{shape:y}});else if(b||w){j(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const I=zI(S,$,T),_=Rf({inputs:{x:i},backend:n,attrs:{begin:S,size:I}});k=De({inputs:{x:_},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(_)}else if(n.shouldExecuteOnCPU([i])){const _=n.readSync(i.dataId),N=lt(i.shape,i.dtype,_),R=nNe(g,N,T,S);k=n.makeTensorInfo(y,i.dtype,R.values)}else{const _=new LFe(S,T,g);k=n.runWebGLProgram(_,[i],i.dtype)}const E=De({inputs:{x:k},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(k),E}const BFe={kernelName:tI,backendName:"webgl",kernelFunc:FFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:c}=r,{data:h,dataSplits:d}=e,p=n.readSync(h.dataId),g=n.readSync(d.dataId),[y,x]=rNe(p,g,i,a,o,s,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(d.shape,"int32",x)]}const jFe={kernelName:DG,backendName:"webgl",kernelFunc:zFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UFe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(a.dataId),l=n.readSync(o.dataId)[0],[c,h,d]=iNe(s,l,i),p=h.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const VFe={kernelName:MG,backendName:"webgl",kernelFunc:UFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WFe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(a.dataId),s=aNe(o,i);return n.makeTensorInfo(a.shape,"int32",s)}const GFe={kernelName:PG,backendName:"webgl",kernelFunc:WFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qFe="return tan(x);",HFe=bt({opSnippet:qFe}),XFe={kernelName:sm,backendName:"webgl",kernelFunc:HFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KFe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,YFe=bt({opSnippet:KFe}),ZFe={kernelName:lm,backendName:"webgl",kernelFunc:YFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:a,updates:o}=e,{sliceRank:s,numUpdates:l,sliceSize:c,strides:h,outputSize:d}=nu(o,a,i.shape),p=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,a.dtype);const g=De({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),y=De({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),x=De({inputs:{x:i},backend:n,attrs:{shape:p}}),b=new XO(l,s,g.shape.length,y.shape.length,h,p,!1,!0),w=n.runWebGLProgram(b,[y,g,x],x.dtype),S=De({inputs:{x:w},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),S}const JFe={kernelName:AG,backendName:"webgl",kernelFunc:QFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eBe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const i=Mt(this.rank),a=tBe(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function tBe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VX(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:a}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),c=i.dtype==="string"?l.map(p=>Ss(p)):l,h=lt(i.shape,i.dtype,c),d=sNe(h,a);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new eBe(i.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const nBe={kernelName:um,backendName:"webgl",kernelFunc:VX};class rBe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class iBe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cl(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function Nj(t){let e=1;for(;e<t;)e*=2;return e}function aBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:a,sorted:o}=r,s=he().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=he().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,h=c[c.length-1];if(n.shouldExecuteOnCPU([i])||h<s||a>l){const R=n.readSync(i.dataId),[O,P]=lNe(R,c,i.dtype,a,o);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(P.shape,P.dtype,P.values)]}if(a===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(h===1)return[i,_m({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),p=d!==null&&d.isPacked,g=p?n.unpackTensor(i):i,x=ve(c)/h,b=De({inputs:{x:g},attrs:{shape:[x,h]},backend:n});p&&cl(n,g);const w=Nj(a),S=Nj(h);let $=null;const T=()=>$===null?[b,b]:[b,$],k=(R,O,P)=>{const B=T(),U=new rBe(P),M=[[h],[$===null?1:0],[Number.NEGATIVE_INFINITY],[R],[O]],V=$;$=n.runWebGLProgram(U,B,"int32",M),cl(n,V)};for(let R=1;R<w;R*=2){const O=R*2;for(let P=R;P>=1;P/=2)k(O,P,[x,S])}for(let R=S;R>w;R/=2){const O=T(),P=new iBe([x,R/2]),U=[[h],[$===null?1:0],[w]],z=$;$=n.runWebGLProgram(P,O,"int32",U),cl(n,z);const M=w/2,V=M*2;for(let W=M;W>=1;W/=2)k(V,W,$.shape)}let E=$;$=Rf({inputs:{x:$},backend:n,attrs:{begin:0,size:[x,a]}}),cl(n,E);let I=MX({inputs:{x:b,indices:$},backend:n,attrs:{axis:1,batchDims:1}});cl(n,b);const _=c.slice(0,-1);_.push(a),E=$,$=De({inputs:{x:$},attrs:{shape:_},backend:n}),cl(n,E);const N=I;return I=De({inputs:{x:I},attrs:{shape:_},backend:n}),cl(n,N),[I,$]}const oBe={kernelName:nI,backendName:"webgl",kernelFunc:aBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sBe{constructor(e,n,r,i,a,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lBe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:a}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:c}=r,[h,d,p,g]=i.shape,[y,x]=c??[d,p],b=[h,y,x,g],w=new sBe(d,p,o,s,l,b);return n.runWebGLProgram(w,[i,a],"float32")}const uBe={kernelName:rI,backendName:"webgl",kernelFunc:lBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cBe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;Im(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(a.dataId),{outputValues:s,outputShape:l,indices:c}=uNe(o,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}const fBe={kernelName:iI,backendName:"webgl",kernelFunc:cBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hBe(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i,s=o.shape.length,l=i.shape[a],c=new Array(s-1);let h=0;for(let x=0;x<s;x++)x!==a&&(c[h++]=o.shape[x]);const d=[],p=new Array(s).fill(0),g=o.shape.slice();g[a]=1;const y=new Array(l);for(let x=0;x<y.length;x++){p[a]=x;const b=Rf({inputs:{x:o},backend:n,attrs:{begin:p,size:g}}),w=De({inputs:{x:b},backend:n,attrs:{shape:c}});y[x]=w,d.push(b)}return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const dBe={kernelName:N0,backendName:"webgl",kernelFunc:hBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pBe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,a=e.inSize,o=e.numSegments,s=o*Math.ceil(a/r);this.outputShape=[i,s];const l="0.0",c="sumValue",h=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";a%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let y="";a%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${y}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${h}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${h};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:a}=e,{numSegments:o}=r,s=i.shape.length,l=[];let c=0;const h=on([c],s);let d=i;h!=null&&(d=Ar({inputs:{x:i},backend:n,attrs:{perm:h}}),l.push(d),c=mn(1,s)[0]);const p=TH(d.shape,c,o),g=ve([d.shape[c]]),y=De({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}});l.push(y);const x=oI(i.dtype),b=(T,k,E,I,_)=>{const N=T.shape[0],R=T.shape[1],O=$H(R,_),P={windowSize:O,inSize:R,batchSize:N,numSegments:_},B=new pBe(P,k),U=n.compileAndRun(B,[T,E],I);if(l.push(U),U.shape[1]===_)return U;const z=UX({backend:n,attrs:{start:0,stop:_,step:1,dtype:"float32"}}),M=VX({inputs:{x:z},backend:n,attrs:{reps:[R/O]}});return l.push(z),l.push(M),b(U,k,M,I,_)},w=b(y,"unsortedSegmentSum",a,x,o),S=De({inputs:{x:w},backend:n,attrs:{shape:p}});let $=S;if(h!=null){l.push(S);const T=Fs(h);$=Ar({inputs:{x:$},backend:n,attrs:{perm:T}})}return l.forEach(T=>n.disposeIntermediateTensorInfo(T)),$}const gBe={kernelName:_0,backendName:"webgl",kernelFunc:mBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yBe=[e_e,n_e,a_e,l_e,c_e,d_e,m_e,y_e,w_e,C_e,k_e,I_e,__e,P_e,B_e,j_e,V_e,H_e,K_e,Z_e,tRe,lRe,cRe,pRe,gRe,SRe,$Re,ERe,LNe,NRe,PRe,zRe,qRe,KRe,ZRe,JRe,tDe,aDe,lDe,fDe,dDe,mDe,yDe,xDe,SDe,kDe,EDe,NDe,DDe,PDe,zDe,WDe,XDe,ZDe,eMe,tMe,rMe,aMe,sMe,uMe,fMe,mMe,vMe,wMe,CMe,kMe,IMe,RMe,LMe,PNe,BMe,DRe,UMe,GMe,XMe,BNe,QMe,nPe,iPe,lPe,fPe,mPe,vPe,SPe,kPe,IPe,NPe,MPe,LPe,BPe,VPe,GPe,HPe,KPe,ZPe,t3e,a3e,u3e,y3e,UNe,w3e,$3e,A3e,O3e,vRe,R3e,M3e,L3e,z3e,W3e,jNe,q3e,X3e,Y3e,Q3e,J3e,bRe,d3e,nLe,oLe,cLe,WNe,pLe,yLe,wLe,$Le,ELe,OLe,RLe,PLe,BLe,ULe,GLe,XLe,QLe,tFe,aFe,lFe,oRe,m3e,fFe,dFe,mFe,yFe,bFe,wFe,CFe,TFe,AFe,OFe,_Fe,DFe,PFe,BFe,jFe,VFe,GFe,p3e,ZNe,XFe,ZFe,JFe,nBe,oBe,uBe,QNe,fBe,dBe,gBe,D3e];for(const t of yBe)FG(t);const vBe=()=>{const[t,e]=Z.useState(""),[n,r]=Z.useState(""),[i,a]=Z.useState(""),[o,s]=Z.useState(""),[l,c]=Z.useState(""),[h,d]=Z.useState([]),[p,g]=Z.useState(null),[y,x]=Z.useState("normal"),[b,w]=Z.useState(null),[S,$]=Z.useState(!1),[T,k]=Z.useState(!1),[E,I]=Z.useState(window.innerWidth<768),[_,N]=Z.useState(!1),[R,O]=Z.useState("login"),[P,B]=Z.useState(""),[U,z]=Z.useState(""),[M,V]=Z.useState(""),[W,H]=Z.useState(!1),[L,G]=Z.useState(""),q="http://localhost:3002",K=Z.useRef(null),oe=[{date:"2025-06-08",heartRate:72,systolic:120,diastolic:80,cholesterol:180},{date:"2025-06-09",heartRate:75,systolic:122,diastolic:82,cholesterol:182},{date:"2025-06-10",heartRate:78,systolic:125,diastolic:79,cholesterol:185},{date:"2025-06-11",heartRate:76,systolic:123,diastolic:81,cholesterol:183},{date:"2025-06-12",heartRate:80,systolic:128,diastolic:84,cholesterol:190},{date:"2025-06-13",heartRate:77,systolic:124,diastolic:80,cholesterol:185},{date:"2025-06-14",heartRate:74,systolic:121,diastolic:79,cholesterol:182}],[pe,ge]=Z.useState(oe),Re=async ke=>{ke.preventDefault();try{const Ne=await fetch(`${q}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:P,password:U})});if(!Ne.ok)throw new Error("Signup failed");const Le=await Ne.json();localStorage.setItem("user",JSON.stringify(Le)),N(!0),V("")}catch(Ne){V(Ne.message)}},Ee=async ke=>{ke.preventDefault();try{if(!(await fetch(`${q}/users`)).ok)throw new Error("Server not responding");const Le=await fetch(`${q}/users?email=${encodeURIComponent(P)}`);if(!Le.ok)throw new Error("Failed to fetch user");const st=await Le.json();if(!st.length)throw new Error("User not found");if(st[0].password!==U)throw new Error("Incorrect password");localStorage.setItem("user",JSON.stringify(st[0])),N(!0),V(""),Ie(st[0].id)}catch(Ne){console.error("Login error:",Ne),V(Ne.message),ge(oe),d(oe.map(Le=>({...Le,id:Math.random().toString(36).substring(7),timestamp:new Date(Le.date).toISOString(),userId:"demo"})))}},ye=()=>{localStorage.removeItem("user"),N(!1),B(""),z(""),d([]),ge(oe)},Ie=async ke=>{try{H(!0),G("");const Ne=await fetch(`${q}/readings?userId=${ke}`);if(!Ne.ok)throw new Error("Failed to fetch readings");const Le=await Ne.json();console.log("API Response:",Le);const st=Le.length>0?Le:oe.map(tt=>({...tt,id:Math.random().toString(36).substring(7),timestamp:new Date(tt.date).toISOString(),userId:ke}));d(st);const gt=st.map(tt=>({date:tt.date||new Date(tt.timestamp).toISOString().split("T")[0],heartRate:tt.heartRate||0,systolic:tt.systolic||0,diastolic:tt.diastolic||0,cholesterol:tt.cholesterol||0}));ge(gt)}catch(Ne){console.error("Error fetching readings:",Ne),G(Ne.message),ge(oe),d(oe.map(Le=>({...Le,id:Math.random().toString(36).substring(7),timestamp:new Date(Le.date).toISOString(),userId:"demo"})))}finally{H(!1)}};Z.useEffect(()=>{const ke=JSON.parse(localStorage.getItem("user"));ke?(N(!0),Ie(ke.id)):ge(oe)},[]),Z.useEffect(()=>{const ke=()=>I(window.innerWidth<768);return window.addEventListener("resize",ke),()=>window.removeEventListener("resize",ke)},[]),Z.useEffect(()=>{let ke=!0;const Ne=async()=>{try{if(await ime("cpu"),await ame(),!ke)return;$(!0),K.current&&K.current.dispose();const Le=DSe({layers:[VT({inputShape:[4],units:16,activation:"relu"}),QSe({rate:.2}),VT({units:8,activation:"relu"}),VT({units:3,activation:"softmax"})]});Le.compile({optimizer:"adam",loss:"categoricalCrossentropy",metrics:["accuracy"]});const st=Oe(),gt=gc(st.inputs),tt=gc(st.outputs);await Le.fit(gt,tt,{epochs:50,batchSize:32,validationSplit:.2,shuffle:!0}),ot([gt,tt]),ke&&(K.current=Le,w(Le),k(!0),$(!1))}catch(Le){console.error("Model initialization error:",Le),ke&&(k(!1),$(!1),setTimeout(Ne,2e3))}};return Ne(),()=>{ke=!1,K.current&&K.current.dispose()}},[]);const Oe=()=>{const ke=[],Ne=[];for(let Le=0;Le<1e3;Le++){const st=Math.random()*60+20,gt=Math.random()*80+60,tt=Math.random()*60+90,Lt=Math.random()*150+150;ke.push([st,gt,tt,Lt]);let vn=0;st>50&&(vn+=1),gt>100&&(vn+=1),tt>130&&(vn+=1),Lt>240&&(vn+=1);const Gn=vn<=1?[1,0,0]:vn===2?[0,1,0]:[0,0,1];Ne.push(Gn)}return{inputs:ke,outputs:Ne}},be=async()=>{try{if(!t||!n||!i||!o){alert("Please fill in all required fields");return}const ke=JSON.parse(localStorage.getItem("user"))||{id:"demo"},Ne={id:Math.random().toString(36).substring(7),heartRate:parseInt(t),systolic:parseInt(n),diastolic:parseInt(i),age:parseInt(o),cholesterol:parseInt(l)||200,timestamp:new Date().toISOString(),date:new Date().toISOString().split("T")[0],userId:ke.id};d(Le=>[...Le,Ne]),ge(Le=>[...Le,{date:Ne.date,heartRate:Ne.heartRate,systolic:Ne.systolic,diastolic:Ne.diastolic,cholesterol:Ne.cholesterol}]),K.current&&await Ge(Ne),e(""),r(""),a(""),c("")}catch(ke){console.error("Error adding reading:",ke),alert("Failed to add reading. Please try again.")}},Ge=async ke=>{try{if(!K.current)return;const Ne=gc([[ke.age,ke.heartRate,ke.systolic,ke.cholesterol]]),Le=K.current.predict(Ne),st=await Le.data();ot([Ne,Le]);const gt=["Low Risk","Medium Risk","High Risk"],tt=st.indexOf(Math.max(...st)),Lt=(st[tt]*100).toFixed(1);g({risk:gt[tt],confidence:Lt,details:{low:(st[0]*100).toFixed(1),medium:(st[1]*100).toFixed(1),high:(st[2]*100).toFixed(1)}}),x(tt===0?"normal":tt===1?"warning":"danger")}catch(Ne){console.error("Prediction error:",Ne)}},Ue=()=>p?{"Low Risk":["Maintain your current healthy lifestyle","Continue regular exercise routine","Keep monitoring your vitals regularly"],"Medium Risk":["Consider increasing physical activity","Monitor your diet and reduce sodium intake","Schedule regular check-ups with your doctor"],"High Risk":["Consult with a healthcare provider immediately","Consider lifestyle modifications","Monitor blood pressure and heart rate daily"]}[p.risk]||[]:[],xe={app:{minHeight:"100vh",width:"98vw",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px 0",boxSizing:"border-box",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif'},container:{width:"100%",maxWidth:"1200px",margin:"0 auto",padding:"0 20px",boxSizing:"border-box"},header:{textAlign:"center",marginBottom:"40px",color:"white"},headerTitle:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",marginBottom:"10px"},headerTitleH1:{fontSize:"3rem",fontWeight:"bold",margin:"0"},headerSubtitle:{fontSize:"1.2rem",opacity:"0.9",marginBottom:"20px"},trainingIndicator:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",padding:"10px 20px",borderRadius:"25px",animation:"pulse 2s infinite"},mainContent:{display:"flex",flexDirection:"column",gap:"30px"},card:{background:"white",borderRadius:"15px",padding:"25px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.1)",marginBottom:"20px",border:"1px solid rgba(255, 255, 255, 0.2)"},sectionTitle:{display:"flex",alignItems:"center",gap:"10px",fontSize:"1.5rem",fontWeight:"bold",marginBottom:"20px",color:"#2c3e50"},formGroup:{marginBottom:"20px"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},formColumn:{flex:"1 1 500px",maxWidth:"500px",width:"100%",boxSizing:"border-box"},label:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#555",fontSize:"0.9rem"},input:{width:"100%",padding:"12px 15px",border:"2px solid #e1e8ed",borderRadius:"8px",fontSize:"1rem",background:"#fafafa",transition:"all 0.3s ease",boxSizing:"border-box",color:"black"},submitBtn:{width:"100%",padding:"15px",background:"linear-gradient(135deg, #3498db, #9b59b6)",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},riskIndicator:{padding:"15px",borderRadius:"10px",marginBottom:"20px",borderLeft:"5px solid"},riskIndicatorNormal:{background:"#d5f5d5",color:"#2d5a2d",borderLeftColor:"#27ae60"},riskIndicatorWarning:{background:"#fff3cd",color:"#856404",borderLeftColor:"#f39c12"},riskIndicatorDanger:{background:"#f8d7da",color:"#721c24",borderLeftColor:"#e74c3c"},riskHeader:{display:"flex",alignItems:"center",gap:"10px"},riskText:{fontWeight:"bold",fontSize:"1.1rem"},confidence:{marginLeft:"auto",fontSize:"0.9rem",fontWeight:"500"},riskDetails:{marginBottom:"20px",color:"black"},riskItem:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #eee",fontSize:"0.9rem"},lowRisk:{color:"#27ae60",fontWeight:"600"},mediumRisk:{color:"#f39c12",fontWeight:"600"},highRisk:{color:"#e74c3c",fontWeight:"600"},recommendations:{borderTop:"2px solid #f0f0f0",paddingTop:"15px",color:"black"},recommendationsList:{listStyle:"none",padding:"0",margin:"10px 0 0 0"},recommendationsItem:{padding:"5px 0",paddingLeft:"20px",position:"relative",fontSize:"0.9rem",color:"#555"},chartsSection:{display:"flex",flexDirection:"column",gap:"20px",flex:1},chartCard:{minHeight:"400px"},chartContainer:{marginTop:"20px"},tableContainer:{overflowX:"auto",marginTop:"15px"},readingsTable:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},tableHeader:{background:"#f8f9fa",fontWeight:"600",color:"#555",textTransform:"uppercase",letterSpacing:"0.5px",fontSize:"0.8rem"},tableCell:{padding:"12px 15px",textAlign:"left",borderBottom:"1px solid #eee",color:"black"}};return _?fe.jsx("div",{style:xe.app,children:fe.jsxs("div",{style:xe.container,children:[fe.jsx("button",{onClick:ye,style:{position:"absolute",top:"20px",right:"20px",padding:"8px 15px",background:"#e74c3c",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Logout"}),fe.jsxs("div",{style:xe.header,children:[fe.jsxs("div",{style:xe.headerTitle,children:[fe.jsx(Xj,{size:48,color:"#e74c3c"}),fe.jsx("h1",{style:xe.headerTitleH1,children:"CardioFola"})]}),fe.jsx("p",{style:xe.headerSubtitle,children:"Enhanced Heart Tracking with ANN-Based Health Predictions"}),S&&fe.jsxs("div",{style:xe.trainingIndicator,children:[fe.jsx(nM,{size:20,color:"#3498db"}),fe.jsx("span",{children:"Training AI model..."})]})]}),W&&fe.jsx("div",{style:{textAlign:"center",padding:"20px",color:"white"},children:"Loading your data..."}),L&&fe.jsx("div",{style:{background:"rgba(231, 76, 60, 0.2)",color:"white",padding:"15px",borderRadius:"8px",marginBottom:"20px",textAlign:"center"},children:L}),fe.jsxs("div",{style:{...xe.mainContent,flexDirection:E?"column":"row",gap:"30px"},children:[fe.jsxs("div",{style:xe.formColumn,children:[fe.jsxs("div",{style:xe.card,children:[fe.jsxs("h2",{style:xe.sectionTitle,children:[fe.jsx(qY,{size:24,color:"#3498db"}),"Record Vitals"]}),fe.jsxs("div",{style:xe.formGroup,children:[fe.jsx("label",{style:xe.label,children:"Heart Rate (BPM) *"}),fe.jsx("input",{type:"number",value:t,onChange:ke=>e(ke.target.value),placeholder:"e.g., 72",style:xe.input})]}),fe.jsxs("div",{style:xe.formRow,children:[fe.jsxs("div",{style:xe.formGroup,children:[fe.jsx("label",{style:xe.label,children:"Systolic BP *"}),fe.jsx("input",{type:"number",value:n,onChange:ke=>r(ke.target.value),placeholder:"120",style:xe.input})]}),fe.jsxs("div",{style:xe.formGroup,children:[fe.jsx("label",{style:xe.label,children:"Diastolic BP *"}),fe.jsx("input",{type:"number",value:i,onChange:ke=>a(ke.target.value),placeholder:"80",style:xe.input})]})]}),fe.jsxs("div",{style:xe.formGroup,children:[fe.jsx("label",{style:xe.label,children:"Age *"}),fe.jsx("input",{type:"number",value:o,onChange:ke=>s(ke.target.value),placeholder:"e.g., 35",style:xe.input})]}),fe.jsxs("div",{style:xe.formGroup,children:[fe.jsx("label",{style:xe.label,children:"Cholesterol (mg/dL)"}),fe.jsx("input",{type:"number",value:l,onChange:ke=>c(ke.target.value),placeholder:"e.g., 200",style:xe.input})]}),fe.jsx("button",{onClick:be,disabled:S,style:{...xe.submitBtn,opacity:S?.6:1,cursor:S?"not-allowed":"pointer"},children:"Add Reading & Analyze"})]}),p&&fe.jsxs("div",{style:xe.card,children:[fe.jsxs("h3",{style:xe.sectionTitle,children:[fe.jsx(nM,{size:20,color:"#9b59b6"}),"AI Health Analysis"]}),fe.jsx("div",{style:{...xe.riskIndicator,...y==="normal"?xe.riskIndicatorNormal:y==="warning"?xe.riskIndicatorWarning:xe.riskIndicatorDanger},children:fe.jsxs("div",{style:xe.riskHeader,children:[y==="normal"&&fe.jsx(JY,{size:20}),y!=="normal"&&fe.jsx(lZ,{size:20}),fe.jsx("span",{style:xe.riskText,children:p.risk}),fe.jsxs("span",{style:xe.confidence,children:["Confidence: ",p.confidence,"%"]})]})}),fe.jsxs("div",{style:xe.riskDetails,children:[fe.jsxs("div",{style:xe.riskItem,children:[fe.jsx("span",{children:"Low Risk:"}),fe.jsxs("span",{style:xe.lowRisk,children:[p.details.low,"%"]})]}),fe.jsxs("div",{style:xe.riskItem,children:[fe.jsx("span",{children:"Medium Risk:"}),fe.jsxs("span",{style:xe.mediumRisk,children:[p.details.medium,"%"]})]}),fe.jsxs("div",{style:xe.riskItem,children:[fe.jsx("span",{children:"High Risk:"}),fe.jsxs("span",{style:xe.highRisk,children:[p.details.high,"%"]})]})]}),fe.jsxs("div",{style:xe.recommendations,children:[fe.jsx("h4",{children:"Recommendations:"}),fe.jsx("ul",{style:xe.recommendationsList,children:Ue().map((ke,Ne)=>fe.jsxs("li",{style:xe.recommendationsItem,children:["• ",ke]},Ne))})]})]})]}),fe.jsxs("div",{style:{...xe.chartsSection,width:"100%",maxWidth:E?"100%":"700px"},children:[fe.jsxs("div",{style:{...xe.card,...xe.chartCard},children:[fe.jsxs("h3",{style:xe.sectionTitle,children:[fe.jsx(oZ,{size:20,color:"#27ae60"}),"Heart Rate Trends"]}),fe.jsx("div",{style:xe.chartContainer,children:fe.jsx(ML,{width:"100%",height:350,children:fe.jsxs(fpe,{data:pe,margin:{top:10,right:30,left:0,bottom:0},children:[fe.jsx(ak,{strokeDasharray:"3 3",stroke:"#eee"}),fe.jsx(jc,{dataKey:"date",tick:{fill:"#555"},axisLine:{stroke:"#ccc"}}),fe.jsx(Vc,{tick:{fill:"#555"},axisLine:{stroke:"#ccc"}}),fe.jsx(Qi,{contentStyle:{background:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",color:"#333"}}),fe.jsx(Ds,{type:"monotone",dataKey:"heartRate",stroke:"#3498db",strokeWidth:2,fill:"#3498db",fillOpacity:.3,name:"Heart Rate (BPM)",activeDot:{r:6,stroke:"#2980b9",strokeWidth:2},animationDuration:1e3,animationEasing:"ease-in-out"})]})})})]}),fe.jsxs("div",{style:{...xe.card,...xe.chartCard},children:[fe.jsxs("h3",{style:xe.sectionTitle,children:[fe.jsx(ZY,{size:20,color:"#e74c3c"}),"Blood Pressure History"]}),fe.jsx("div",{style:xe.chartContainer,children:fe.jsx(ML,{width:"100%",height:350,children:fe.jsxs(cpe,{data:pe,margin:{top:10,right:30,left:0,bottom:0},children:[fe.jsx(ak,{strokeDasharray:"3 3",stroke:"#eee"}),fe.jsx(jc,{dataKey:"date",tick:{fill:"#555"},axisLine:{stroke:"#ccc"}}),fe.jsx(Vc,{tick:{fill:"#555"},axisLine:{stroke:"#ccc"}}),fe.jsx(Qi,{contentStyle:{background:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",color:"#333"}}),fe.jsx(Fc,{type:"monotone",dataKey:"systolic",stroke:"#e74c3c",strokeWidth:2,name:"Systolic",dot:{r:3,fill:"#e74c3c"},activeDot:{r:6,stroke:"#c0392b",strokeWidth:2},animationDuration:1e3}),fe.jsx(Fc,{type:"monotone",dataKey:"diastolic",stroke:"#f39c12",strokeWidth:2,name:"Diastolic",dot:{r:3,fill:"#f39c12"},activeDot:{r:6,stroke:"#d35400",strokeWidth:2},animationDuration:1e3})]})})})]}),h.length>0&&fe.jsxs("div",{style:xe.card,children:[fe.jsxs("h3",{style:xe.sectionTitle,children:[fe.jsx(KY,{size:20,color:"#8e44ad"}),"Recent Readings"]}),fe.jsx("div",{style:xe.tableContainer,children:fe.jsxs("table",{style:xe.readingsTable,children:[fe.jsx("thead",{children:fe.jsxs("tr",{children:[fe.jsx("th",{style:{...xe.tableCell,...xe.tableHeader},children:"Time"}),fe.jsx("th",{style:{...xe.tableCell,...xe.tableHeader},children:"Heart Rate"}),fe.jsx("th",{style:{...xe.tableCell,...xe.tableHeader},children:"Blood Pressure"}),fe.jsx("th",{style:{...xe.tableCell,...xe.tableHeader},children:"Cholesterol"})]})}),fe.jsx("tbody",{children:h.slice(-5).reverse().map(ke=>fe.jsxs("tr",{children:[fe.jsx("td",{style:xe.tableCell,children:new Date(ke.timestamp).toLocaleString()}),fe.jsxs("td",{style:xe.tableCell,children:[ke.heartRate," BPM"]}),fe.jsxs("td",{style:xe.tableCell,children:[ke.systolic,"/",ke.diastolic]}),fe.jsxs("td",{style:xe.tableCell,children:[ke.cholesterol," mg/dL"]})]},ke.id))})]})})]})]})]}),fe.jsx("div",{style:{width:"100%",textAlign:"center",marginTop:"40px",padding:"20px 10px",color:"white",opacity:.7,display:E?"block":"flex",justifyContent:E?"initial":"center",alignItems:E?"initial":"center"},children:fe.jsxs("p",{style:{margin:0},children:["© ",new Date().getFullYear()," CardioFola — Built by Fola 💙"]})})]})}):fe.jsx("div",{style:xe.app,children:fe.jsx("div",{style:{...xe.container,display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:fe.jsxs("div",{style:{...xe.card,width:"100%",maxWidth:"400px",padding:"30px"},children:[fe.jsx("h2",{style:{...xe.sectionTitle,justifyContent:"center",marginBottom:"30px"},children:R==="login"?"Login":"Sign Up"}),M&&fe.jsx("div",{style:{color:"#e74c3c",marginBottom:"20px",textAlign:"center"},children:M}),fe.jsxs("form",{onSubmit:R==="login"?Ee:Re,children:[fe.jsxs("div",{style:xe.formGroup,children:[fe.jsx("label",{style:xe.label,children:"Email"}),fe.jsx("input",{type:"email",value:P,onChange:ke=>B(ke.target.value),style:xe.input,required:!0})]}),fe.jsxs("div",{style:xe.formGroup,children:[fe.jsx("label",{style:xe.label,children:"Password"}),fe.jsx("input",{type:"password",value:U,onChange:ke=>z(ke.target.value),style:xe.input,required:!0})]}),fe.jsx("button",{type:"submit",style:{...xe.submitBtn,marginTop:"20px"},children:R==="login"?"Login":"Create Account"})]}),fe.jsx("div",{style:{textAlign:"center",marginTop:"20px",color:"#555"},children:R==="login"?fe.jsxs(fe.Fragment,{children:["Don't have an account?"," ",fe.jsx("button",{onClick:()=>O("signup"),style:{background:"none",border:"none",color:"#3498db",cursor:"pointer",textDecoration:"underline"},children:"Sign up"})]}):fe.jsxs(fe.Fragment,{children:["Already have an account?"," ",fe.jsx("button",{onClick:()=>O("login"),style:{background:"none",border:"none",color:"#3498db",cursor:"pointer",textDecoration:"underline"},children:"Login"})]})})]})})})},bBe=()=>{const t=localStorage.getItem("registeredUsers");return t?JSON.parse(t):[{email:"demo@cardiofola.com",password:"demo123",name:"Demo User"}]},xBe=({setIsAuthenticated:t})=>{const[e,n]=Z.useState(!0),[r,i]=Z.useState({email:"",password:"",name:""}),[a,o]=Z.useState(""),[s,l]=Z.useState(!1),[c,h]=Z.useState(bBe()),d=aA();Z.useEffect(()=>{localStorage.setItem("registeredUsers",JSON.stringify(c))},[c]);const p=w=>{i({...r,[w.target.name]:w.target.value})},g=w=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w),y=()=>c.some(S=>S.email===r.email)?(o("Email already registered"),!1):(h([...c,{email:r.email,password:r.password,name:r.name}]),!0),x=()=>{const w=c.find(S=>S.email===r.email);return w?w.password!==r.password?(o("Incorrect password"),!1):!0:(o("Account not found. Please register first."),!1)},b=async w=>{if(w.preventDefault(),o(""),l(!0),!r.email||!r.password){o("Email and password are required"),l(!1);return}if(!g(r.email)){o("Please enter a valid email address"),l(!1);return}if(!e&&!r.name){o("Name is required for registration"),l(!1);return}if(r.password.length<6){o("Password must be at least 6 characters"),l(!1);return}try{await new Promise($=>setTimeout($,1e3)),(e?x():y())&&(localStorage.setItem("isAuthenticated","true"),localStorage.setItem("currentUser",JSON.stringify(r.email)),t(!0),d("/HeartTrackingApp"))}catch{o("An error occurred. Please try again.")}finally{l(!1)}};return fe.jsx("div",{style:Ln.container,children:fe.jsxs("div",{style:Ln.card,children:[fe.jsxs("div",{style:Ln.logo,children:[fe.jsx(Xj,{size:48,color:"#e74c3c"}),fe.jsx("h2",{style:Ln.title,children:"CardioFola"})]}),fe.jsx("h3",{style:Ln.subtitle,children:e?"Sign In":"Create Account"}),a&&fe.jsx("p",{style:Ln.error,children:a}),fe.jsxs("form",{onSubmit:b,style:Ln.form,children:[!e&&fe.jsxs("div",{style:Ln.inputGroup,children:[fe.jsx(cZ,{size:20,style:Ln.icon}),fe.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:r.name,onChange:p,style:Ln.input,required:!0})]}),fe.jsxs("div",{style:Ln.inputGroup,children:[fe.jsx(iZ,{size:20,style:Ln.icon}),fe.jsx("input",{type:"email",name:"email",placeholder:"Your email address",value:r.email,onChange:p,style:Ln.input,required:!0})]}),fe.jsxs("div",{style:Ln.inputGroup,children:[fe.jsx(nZ,{size:20,style:Ln.icon}),fe.jsx("input",{type:"password",name:"password",placeholder:"Password (min 6 characters)",value:r.password,onChange:p,style:Ln.input,minLength:6,required:!0})]}),fe.jsx("button",{type:"submit",style:{...Ln.button,opacity:s?.7:1,cursor:s?"not-allowed":"pointer"},disabled:s,children:s?"Processing...":e?"Sign In":"Sign Up"})]}),fe.jsxs("p",{style:Ln.switchText,children:[e?"Don't have an account? ":"Already have an account? ",fe.jsx("button",{onClick:()=>{n(!e),o("")},style:Ln.switchButton,type:"button",children:e?"Sign up":"Sign in"})]})]})})},Ln={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",width:"98vw",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",position:"fixed"},card:{background:"white",borderRadius:"30px",padding:"40px",width:"100vw",maxWidth:"400px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.1)",textAlign:"center"},logo:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"20px"},title:{color:"#2c3e50",margin:0,fontSize:"2rem"},subtitle:{color:"#555",marginBottom:"25px"},form:{display:"flex",flexDirection:"column",gap:"20px"},inputGroup:{position:"relative",display:"flex",alignItems:"center"},icon:{position:"absolute",left:"15px",color:"#777"},input:{width:"100%",padding:"12px 15px 12px 45px",border:"2px solid #e1e8ed",borderRadius:"8px",fontSize:"1rem",background:"#fafafa",boxSizing:"border-box"},button:{padding:"15px",background:"linear-gradient(135deg, #3498db, #9b59b6)",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",marginTop:"10px"},error:{color:"#e74c3c",marginBottom:"15px"},switchText:{color:"#555",marginTop:"20px"},switchButton:{background:"none",border:"none",color:"#3498db",cursor:"pointer",fontWeight:"600",padding:"0 5px"}};function wBe(){const[t,e]=Z.useState(!1);return Z.useEffect(()=>{localStorage.getItem("isAuthenticated")==="true"&&e(!0)},[]),fe.jsx(OY,{children:fe.jsxs(oY,{children:[fe.jsx(ZT,{path:"/",element:t?fe.jsx(JD,{to:"/HeartTrackingApp"}):fe.jsx(xBe,{setIsAuthenticated:e})}),fe.jsx(ZT,{path:"/HeartTrackingApp",element:t?fe.jsx(vBe,{}):fe.jsx(JD,{to:"/",replace:!0})})]})})}m9.createRoot(document.getElementById("root")).render(fe.jsx(Q.StrictMode,{children:fe.jsx(wBe,{})}));
