function JK(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Le(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t7(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var ew={exports:{}},wh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD;function e7(){if(rD)return wh;rD=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:s,ref:i!==void 0?i:null,props:a}}return wh.Fragment=t,wh.jsx=n,wh.jsxs=n,wh}var iD;function n7(){return iD||(iD=1,ew.exports=e7()),ew.exports}var Ct=n7(),nw={exports:{}},ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aD;function r7(){if(aD)return ne;aD=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=d&&L[d]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function b(L,G,H){this.props=L,this.context=G,this.refs=x,this.updater=H||g}b.prototype.isReactComponent={},b.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function w(){}w.prototype=b.prototype;function S(L,G,H){this.props=L,this.context=G,this.refs=x,this.updater=H||g}var T=S.prototype=new w;T.constructor=S,v(T,b.prototype),T.isPureReactComponent=!0;var $=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function O(L,G,H,Y,ot,ht){return H=ht.ref,{$$typeof:e,type:L,key:G,ref:H!==void 0?H:null,props:ht}}function N(L,G){return O(L.type,G,void 0,void 0,void 0,L.props)}function _(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function R(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(H){return G[H]})}var E=/\/+/g;function F(L,G){return typeof L=="object"&&L!==null&&L.key!=null?R(""+L.key):G.toString(36)}function M(){}function B(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(M,M):(L.status="pending",L.then(function(G){L.status==="pending"&&(L.status="fulfilled",L.value=G)},function(G){L.status==="pending"&&(L.status="rejected",L.reason=G)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function j(L,G,H,Y,ot){var ht=typeof L;(ht==="undefined"||ht==="boolean")&&(L=null);var yt=!1;if(L===null)yt=!0;else switch(ht){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(L.$$typeof){case e:case t:yt=!0;break;case h:return yt=L._init,j(yt(L._payload),G,H,Y,ot)}}if(yt)return ot=ot(L),yt=Y===""?"."+F(L,0):Y,$(ot)?(H="",yt!=null&&(H=yt.replace(E,"$&/")+"/"),j(ot,G,H,"",function(mt){return mt})):ot!=null&&(_(ot)&&(ot=N(ot,H+(ot.key==null||L&&L.key===ot.key?"":(""+ot.key).replace(E,"$&/")+"/")+yt)),G.push(ot)),1;yt=0;var Nt=Y===""?".":Y+":";if($(L))for(var At=0;At<L.length;At++)Y=L[At],ht=Nt+F(Y,At),yt+=j(Y,G,H,ht,ot);else if(At=p(L),typeof At=="function")for(L=At.call(L),At=0;!(Y=L.next()).done;)Y=Y.value,ht=Nt+F(Y,At++),yt+=j(Y,G,H,ht,ot);else if(ht==="object"){if(typeof L.then=="function")return j(B(L),G,H,Y,ot);throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return yt}function P(L,G,H){if(L==null)return L;var Y=[],ot=0;return j(L,Y,"","",function(ht){return G.call(H,ht,ot++)}),Y}function U(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(H){(L._status===0||L._status===-1)&&(L._status=1,L._result=H)},function(H){(L._status===0||L._status===-1)&&(L._status=2,L._result=H)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var W=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function q(){}return ne.Children={map:P,forEach:function(L,G,H){P(L,function(){G.apply(this,arguments)},H)},count:function(L){var G=0;return P(L,function(){G++}),G},toArray:function(L){return P(L,function(G){return G})||[]},only:function(L){if(!_(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ne.Component=b,ne.Fragment=n,ne.Profiler=i,ne.PureComponent=S,ne.StrictMode=r,ne.Suspense=l,ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,ne.__COMPILER_RUNTIME={__proto__:null,c:function(L){return A.H.useMemoCache(L)}},ne.cache=function(L){return function(){return L.apply(null,arguments)}},ne.cloneElement=function(L,G,H){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Y=v({},L.props),ot=L.key,ht=void 0;if(G!=null)for(yt in G.ref!==void 0&&(ht=void 0),G.key!==void 0&&(ot=""+G.key),G)!I.call(G,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&G.ref===void 0||(Y[yt]=G[yt]);var yt=arguments.length-2;if(yt===1)Y.children=H;else if(1<yt){for(var Nt=Array(yt),At=0;At<yt;At++)Nt[At]=arguments[At+2];Y.children=Nt}return O(L.type,ot,void 0,void 0,ht,Y)},ne.createContext=function(L){return L={$$typeof:s,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},ne.createElement=function(L,G,H){var Y,ot={},ht=null;if(G!=null)for(Y in G.key!==void 0&&(ht=""+G.key),G)I.call(G,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ot[Y]=G[Y]);var yt=arguments.length-2;if(yt===1)ot.children=H;else if(1<yt){for(var Nt=Array(yt),At=0;At<yt;At++)Nt[At]=arguments[At+2];ot.children=Nt}if(L&&L.defaultProps)for(Y in yt=L.defaultProps,yt)ot[Y]===void 0&&(ot[Y]=yt[Y]);return O(L,ht,void 0,void 0,null,ot)},ne.createRef=function(){return{current:null}},ne.forwardRef=function(L){return{$$typeof:o,render:L}},ne.isValidElement=_,ne.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:U}},ne.memo=function(L,G){return{$$typeof:c,type:L,compare:G===void 0?null:G}},ne.startTransition=function(L){var G=A.T,H={};A.T=H;try{var Y=L(),ot=A.S;ot!==null&&ot(H,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(q,W)}catch(ht){W(ht)}finally{A.T=G}},ne.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},ne.use=function(L){return A.H.use(L)},ne.useActionState=function(L,G,H){return A.H.useActionState(L,G,H)},ne.useCallback=function(L,G){return A.H.useCallback(L,G)},ne.useContext=function(L){return A.H.useContext(L)},ne.useDebugValue=function(){},ne.useDeferredValue=function(L,G){return A.H.useDeferredValue(L,G)},ne.useEffect=function(L,G,H){var Y=A.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(L,G)},ne.useId=function(){return A.H.useId()},ne.useImperativeHandle=function(L,G,H){return A.H.useImperativeHandle(L,G,H)},ne.useInsertionEffect=function(L,G){return A.H.useInsertionEffect(L,G)},ne.useLayoutEffect=function(L,G){return A.H.useLayoutEffect(L,G)},ne.useMemo=function(L,G){return A.H.useMemo(L,G)},ne.useOptimistic=function(L,G){return A.H.useOptimistic(L,G)},ne.useReducer=function(L,G,H){return A.H.useReducer(L,G,H)},ne.useRef=function(L){return A.H.useRef(L)},ne.useState=function(L){return A.H.useState(L)},ne.useSyncExternalStore=function(L,G,H){return A.H.useSyncExternalStore(L,G,H)},ne.useTransition=function(){return A.H.useTransition()},ne.version="19.1.0",ne}var sD;function IA(){return sD||(sD=1,nw.exports=r7()),nw.exports}var Tt=IA();const Z=Le(Tt);var rw={exports:{}},Sh={},iw={exports:{}},aw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oD;function i7(){return oD||(oD=1,function(e){function t(P,U){var W=P.length;P.push(U);t:for(;0<W;){var q=W-1>>>1,L=P[q];if(0<i(L,U))P[q]=U,P[W]=L,W=q;else break t}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var U=P[0],W=P.pop();if(W!==U){P[0]=W;t:for(var q=0,L=P.length,G=L>>>1;q<G;){var H=2*(q+1)-1,Y=P[H],ot=H+1,ht=P[ot];if(0>i(Y,W))ot<L&&0>i(ht,Y)?(P[q]=ht,P[ot]=W,q=ot):(P[q]=Y,P[H]=W,q=H);else if(ot<L&&0>i(ht,W))P[q]=ht,P[ot]=W,q=ot;else break t}}return U}function i(P,U){var W=P.sortIndex-U.sortIndex;return W!==0?W:P.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],h=1,d=null,p=3,g=!1,v=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function $(P){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=P)r(c),U.sortIndex=U.expirationTime,t(l,U);else break;U=n(c)}}function A(P){if(x=!1,$(P),!v)if(n(l)!==null)v=!0,I||(I=!0,F());else{var U=n(c);U!==null&&j(A,U.startTime-P)}}var I=!1,O=-1,N=5,_=-1;function R(){return b?!0:!(e.unstable_now()-_<N)}function E(){if(b=!1,I){var P=e.unstable_now();_=P;var U=!0;try{t:{v=!1,x&&(x=!1,S(O),O=-1),g=!0;var W=p;try{e:{for($(P),d=n(l);d!==null&&!(d.expirationTime>P&&R());){var q=d.callback;if(typeof q=="function"){d.callback=null,p=d.priorityLevel;var L=q(d.expirationTime<=P);if(P=e.unstable_now(),typeof L=="function"){d.callback=L,$(P),U=!0;break e}d===n(l)&&r(l),$(P)}else r(l);d=n(l)}if(d!==null)U=!0;else{var G=n(c);G!==null&&j(A,G.startTime-P),U=!1}}break t}finally{d=null,p=W,g=!1}U=void 0}}finally{U?F():I=!1}}}var F;if(typeof T=="function")F=function(){T(E)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,B=M.port2;M.port1.onmessage=E,F=function(){B.postMessage(null)}}else F=function(){w(E,0)};function j(P,U){O=w(function(){P(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(P){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var W=p;p=U;try{return P()}finally{p=W}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(P,U){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var W=p;p=P;try{return U()}finally{p=W}},e.unstable_scheduleCallback=function(P,U,W){var q=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?q+W:q):W=q,P){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,P={id:h++,callback:U,priorityLevel:P,startTime:W,expirationTime:L,sortIndex:-1},W>q?(P.sortIndex=W,t(c,P),n(l)===null&&P===n(c)&&(x?(S(O),O=-1):x=!0,j(A,W-q))):(P.sortIndex=L,t(l,P),v||g||(v=!0,I||(I=!0,F()))),P},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(P){var U=p;return function(){var W=p;p=U;try{return P.apply(this,arguments)}finally{p=W}}}}(aw)),aw}var lD;function a7(){return lD||(lD=1,iw.exports=i7()),iw.exports}var sw={exports:{}},mr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uD;function s7(){if(uD)return mr;uD=1;var e=IA();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(l,c,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:h}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return mr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,mr.createPortal=function(l,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return a(l,c,null,h)},mr.flushSync=function(l){var c=s.T,h=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=c,r.p=h,r.d.f()}},mr.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},mr.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},mr.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var h=c.as,d=o(h,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:p,fetchPriority:g}):h==="script"&&r.d.X(l,{crossOrigin:d,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},mr.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},mr.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,d=o(h,c.crossOrigin);r.d.L(l,h,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},mr.preloadModule=function(l,c){if(typeof l=="string")if(c){var h=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},mr.requestFormReset=function(l){r.d.r(l)},mr.unstable_batchedUpdates=function(l,c){return l(c)},mr.useFormState=function(l,c,h){return s.H.useFormState(l,c,h)},mr.useFormStatus=function(){return s.H.useHostTransitionStatus()},mr.version="19.1.0",mr}var cD;function o7(){if(cD)return sw.exports;cD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),sw.exports=s7(),sw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fD;function l7(){if(fD)return Sh;fD=1;var e=a7(),t=IA(),n=o7();function r(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var f=u,m=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(m=f.return),u=f.return;while(u)}return f.tag===3?m:null}function s(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(a(u)!==u)throw Error(r(188))}function l(u){var f=u.alternate;if(!f){if(f=a(u),f===null)throw Error(r(188));return f!==u?null:u}for(var m=u,y=f;;){var C=m.return;if(C===null)break;var k=C.alternate;if(k===null){if(y=C.return,y!==null){m=y;continue}break}if(C.child===k.child){for(k=C.child;k;){if(k===m)return o(C),u;if(k===y)return o(C),f;k=k.sibling}throw Error(r(188))}if(m.return!==y.return)m=C,y=k;else{for(var D=!1,z=C.child;z;){if(z===m){D=!0,m=C,y=k;break}if(z===y){D=!0,y=C,m=k;break}z=z.sibling}if(!D){for(z=k.child;z;){if(z===m){D=!0,m=k,y=C;break}if(z===y){D=!0,y=k,m=C;break}z=z.sibling}if(!D)throw Error(r(189))}}if(m.alternate!==y)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var h=Object.assign,d=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),T=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function F(u){return u===null||typeof u!="object"?null:(u=E&&u[E]||u["@@iterator"],typeof u=="function"?u:null)}var M=Symbol.for("react.client.reference");function B(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===M?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case A:return"Suspense";case I:return"SuspenseList";case _:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case g:return"Portal";case T:return(u.displayName||"Context")+".Provider";case S:return(u._context.displayName||"Context")+".Consumer";case $:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case O:return f=u.displayName||null,f!==null?f:B(u.type)||"Memo";case N:f=u._payload,u=u._init;try{return B(u(f))}catch{}}return null}var j=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},q=[],L=-1;function G(u){return{current:u}}function H(u){0>L||(u.current=q[L],q[L]=null,L--)}function Y(u,f){L++,q[L]=u.current,u.current=f}var ot=G(null),ht=G(null),yt=G(null),Nt=G(null);function At(u,f){switch(Y(yt,f),Y(ht,u),Y(ot,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?NR(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=NR(f),u=_R(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}H(ot),Y(ot,u)}function mt(){H(ot),H(ht),H(yt)}function kt(u){u.memoizedState!==null&&Y(Nt,u);var f=ot.current,m=_R(f,u.type);f!==m&&(Y(ht,u),Y(ot,m))}function It(u){ht.current===u&&(H(ot),H(ht)),Nt.current===u&&(H(Nt),gh._currentValue=W)}var gt=Object.prototype.hasOwnProperty,Vt=e.unstable_scheduleCallback,Lt=e.unstable_cancelCallback,Zt=e.unstable_shouldYield,Wt=e.unstable_requestPaint,Ht=e.unstable_now,de=e.unstable_getCurrentPriorityLevel,Nn=e.unstable_ImmediatePriority,We=e.unstable_UserBlockingPriority,mn=e.unstable_NormalPriority,nn=e.unstable_LowPriority,Fr=e.unstable_IdlePriority,hr=e.log,Lr=e.unstable_setDisableYieldValue,Br=null,an=null;function Jn(u){if(typeof hr=="function"&&Lr(u),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Br,u)}catch{}}var _n=Math.clz32?Math.clz32:V0,Cf=Math.log,Tf=Math.LN2;function V0(u){return u>>>=0,u===0?32:31-(Cf(u)/Tf|0)|0}var ja=256,eu=4194304;function Ua(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function ym(u,f,m){var y=u.pendingLanes;if(y===0)return 0;var C=0,k=u.suspendedLanes,D=u.pingedLanes;u=u.warmLanes;var z=y&134217727;return z!==0?(y=z&~k,y!==0?C=Ua(y):(D&=z,D!==0?C=Ua(D):m||(m=z&~u,m!==0&&(C=Ua(m))))):(z=y&~k,z!==0?C=Ua(z):D!==0?C=Ua(D):m||(m=y&~u,m!==0&&(C=Ua(m)))),C===0?0:f!==0&&f!==C&&(f&k)===0&&(k=C&-C,m=f&-f,k>=m||k===32&&(m&4194048)!==0)?f:C}function $f(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function z8(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pO(){var u=ja;return ja<<=1,(ja&4194048)===0&&(ja=256),u}function mO(){var u=eu;return eu<<=1,(eu&62914560)===0&&(eu=4194304),u}function W0(u){for(var f=[],m=0;31>m;m++)f.push(u);return f}function Af(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function j8(u,f,m,y,C,k){var D=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var z=u.entanglements,K=u.expirationTimes,lt=u.hiddenUpdates;for(m=D&~m;0<m;){var bt=31-_n(m),wt=1<<bt;z[bt]=0,K[bt]=-1;var ut=lt[bt];if(ut!==null)for(lt[bt]=null,bt=0;bt<ut.length;bt++){var ft=ut[bt];ft!==null&&(ft.lane&=-536870913)}m&=~wt}y!==0&&gO(u,y,0),k!==0&&C===0&&u.tag!==0&&(u.suspendedLanes|=k&~(D&~f))}function gO(u,f,m){u.pendingLanes|=f,u.suspendedLanes&=~f;var y=31-_n(f);u.entangledLanes|=f,u.entanglements[y]=u.entanglements[y]|1073741824|m&4194090}function yO(u,f){var m=u.entangledLanes|=f;for(u=u.entanglements;m;){var y=31-_n(m),C=1<<y;C&f|u[y]&f&&(u[y]|=f),m&=~C}}function G0(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function q0(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function vO(){var u=U.p;return u!==0?u:(u=window.event,u===void 0?32:ZR(u.type))}function U8(u,f){var m=U.p;try{return U.p=u,f()}finally{U.p=m}}var Os=Math.random().toString(36).slice(2),dr="__reactFiber$"+Os,zr="__reactProps$"+Os,nu="__reactContainer$"+Os,H0="__reactEvents$"+Os,V8="__reactListeners$"+Os,W8="__reactHandles$"+Os,bO="__reactResources$"+Os,kf="__reactMarker$"+Os;function X0(u){delete u[dr],delete u[zr],delete u[H0],delete u[V8],delete u[W8]}function ru(u){var f=u[dr];if(f)return f;for(var m=u.parentNode;m;){if(f=m[nu]||m[dr]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(u=PR(u);u!==null;){if(m=u[dr])return m;u=PR(u)}return f}u=m,m=u.parentNode}return null}function iu(u){if(u=u[dr]||u[nu]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function If(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(r(33))}function au(u){var f=u[bO];return f||(f=u[bO]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Un(u){u[kf]=!0}var xO=new Set,wO={};function Fo(u,f){su(u,f),su(u+"Capture",f)}function su(u,f){for(wO[u]=f,u=0;u<f.length;u++)xO.add(f[u])}var G8=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),SO={},CO={};function q8(u){return gt.call(CO,u)?!0:gt.call(SO,u)?!1:G8.test(u)?CO[u]=!0:(SO[u]=!0,!1)}function vm(u,f,m){if(q8(f))if(m===null)u.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var y=f.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+m)}}function bm(u,f,m){if(m===null)u.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+m)}}function Va(u,f,m,y){if(y===null)u.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(f,m,""+y)}}var K0,TO;function ou(u){if(K0===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);K0=f&&f[1]||"",TO=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+K0+u+TO}var Y0=!1;function Z0(u,f){if(!u||Y0)return"";Y0=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(f){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(ft){var ut=ft}Reflect.construct(u,[],wt)}else{try{wt.call()}catch(ft){ut=ft}u.call(wt.prototype)}}else{try{throw Error()}catch(ft){ut=ft}(wt=u())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(ft){if(ft&&ut&&typeof ft.stack=="string")return[ft.stack,ut.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=y.DetermineComponentFrameRoot(),D=k[0],z=k[1];if(D&&z){var K=D.split(`
`),lt=z.split(`
`);for(C=y=0;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;for(;C<lt.length&&!lt[C].includes("DetermineComponentFrameRoot");)C++;if(y===K.length||C===lt.length)for(y=K.length-1,C=lt.length-1;1<=y&&0<=C&&K[y]!==lt[C];)C--;for(;1<=y&&0<=C;y--,C--)if(K[y]!==lt[C]){if(y!==1||C!==1)do if(y--,C--,0>C||K[y]!==lt[C]){var bt=`
`+K[y].replace(" at new "," at ");return u.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",u.displayName)),bt}while(1<=y&&0<=C);break}}}finally{Y0=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?ou(m):""}function H8(u){switch(u.tag){case 26:case 27:case 5:return ou(u.type);case 16:return ou("Lazy");case 13:return ou("Suspense");case 19:return ou("SuspenseList");case 0:case 15:return Z0(u.type,!1);case 11:return Z0(u.type.render,!1);case 1:return Z0(u.type,!0);case 31:return ou("Activity");default:return""}}function $O(u){try{var f="";do f+=H8(u),u=u.return;while(u);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function gi(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function AO(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function X8(u){var f=AO(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),y=""+u[f];if(!u.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,k=m.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return C.call(this)},set:function(D){y=""+D,k.call(this,D)}}),Object.defineProperty(u,f,{enumerable:m.enumerable}),{getValue:function(){return y},setValue:function(D){y=""+D},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function xm(u){u._valueTracker||(u._valueTracker=X8(u))}function kO(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var m=f.getValue(),y="";return u&&(y=AO(u)?u.checked?"true":"false":u.value),u=y,u!==m?(f.setValue(u),!0):!1}function wm(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var K8=/[\n"\\]/g;function yi(u){return u.replace(K8,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Q0(u,f,m,y,C,k,D,z){u.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?u.type=D:u.removeAttribute("type"),f!=null?D==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+gi(f)):u.value!==""+gi(f)&&(u.value=""+gi(f)):D!=="submit"&&D!=="reset"||u.removeAttribute("value"),f!=null?J0(u,D,gi(f)):m!=null?J0(u,D,gi(m)):y!=null&&u.removeAttribute("value"),C==null&&k!=null&&(u.defaultChecked=!!k),C!=null&&(u.checked=C&&typeof C!="function"&&typeof C!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?u.name=""+gi(z):u.removeAttribute("name")}function IO(u,f,m,y,C,k,D,z){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(u.type=k),f!=null||m!=null){if(!(k!=="submit"&&k!=="reset"||f!=null))return;m=m!=null?""+gi(m):"",f=f!=null?""+gi(f):m,z||f===u.value||(u.value=f),u.defaultValue=f}y=y??C,y=typeof y!="function"&&typeof y!="symbol"&&!!y,u.checked=z?u.checked:!!y,u.defaultChecked=!!y,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(u.name=D)}function J0(u,f,m){f==="number"&&wm(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function lu(u,f,m,y){if(u=u.options,f){f={};for(var C=0;C<m.length;C++)f["$"+m[C]]=!0;for(m=0;m<u.length;m++)C=f.hasOwnProperty("$"+u[m].value),u[m].selected!==C&&(u[m].selected=C),C&&y&&(u[m].defaultSelected=!0)}else{for(m=""+gi(m),f=null,C=0;C<u.length;C++){if(u[C].value===m){u[C].selected=!0,y&&(u[C].defaultSelected=!0);return}f!==null||u[C].disabled||(f=u[C])}f!==null&&(f.selected=!0)}}function EO(u,f,m){if(f!=null&&(f=""+gi(f),f!==u.value&&(u.value=f),m==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=m!=null?""+gi(m):""}function OO(u,f,m,y){if(f==null){if(y!=null){if(m!=null)throw Error(r(92));if(j(y)){if(1<y.length)throw Error(r(93));y=y[0]}m=y}m==null&&(m=""),f=m}m=gi(f),u.defaultValue=m,y=u.textContent,y===m&&y!==""&&y!==null&&(u.value=y)}function uu(u,f){if(f){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=f;return}}u.textContent=f}var Y8=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function NO(u,f,m){var y=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":y?u.setProperty(f,m):typeof m!="number"||m===0||Y8.has(f)?f==="float"?u.cssFloat=m:u[f]=(""+m).trim():u[f]=m+"px"}function _O(u,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(u=u.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||f!=null&&f.hasOwnProperty(y)||(y.indexOf("--")===0?u.setProperty(y,""):y==="float"?u.cssFloat="":u[y]="");for(var C in f)y=f[C],f.hasOwnProperty(C)&&m[C]!==y&&NO(u,C,y)}else for(var k in f)f.hasOwnProperty(k)&&NO(u,k,f[k])}function tx(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z8=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Q8=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sm(u){return Q8.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var ex=null;function nx(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var cu=null,fu=null;function RO(u){var f=iu(u);if(f&&(u=f.stateNode)){var m=u[zr]||null;t:switch(u=f.stateNode,f.type){case"input":if(Q0(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+yi(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var y=m[f];if(y!==u&&y.form===u.form){var C=y[zr]||null;if(!C)throw Error(r(90));Q0(y,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(f=0;f<m.length;f++)y=m[f],y.form===u.form&&kO(y)}break t;case"textarea":EO(u,m.value,m.defaultValue);break t;case"select":f=m.value,f!=null&&lu(u,!!m.multiple,f,!1)}}}var rx=!1;function DO(u,f,m){if(rx)return u(f,m);rx=!0;try{var y=u(f);return y}finally{if(rx=!1,(cu!==null||fu!==null)&&(og(),cu&&(f=cu,u=fu,fu=cu=null,RO(f),u)))for(f=0;f<u.length;f++)RO(u[f])}}function Ef(u,f){var m=u.stateNode;if(m===null)return null;var y=m[zr]||null;if(y===null)return null;m=y[f];t:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(u=u.type,y=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!y;break t;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var Wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ix=!1;if(Wa)try{var Of={};Object.defineProperty(Of,"passive",{get:function(){ix=!0}}),window.addEventListener("test",Of,Of),window.removeEventListener("test",Of,Of)}catch{ix=!1}var Ns=null,ax=null,Cm=null;function MO(){if(Cm)return Cm;var u,f=ax,m=f.length,y,C="value"in Ns?Ns.value:Ns.textContent,k=C.length;for(u=0;u<m&&f[u]===C[u];u++);var D=m-u;for(y=1;y<=D&&f[m-y]===C[k-y];y++);return Cm=C.slice(u,1<y?1-y:void 0)}function Tm(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function $m(){return!0}function PO(){return!1}function jr(u){function f(m,y,C,k,D){this._reactName=m,this._targetInst=C,this.type=y,this.nativeEvent=k,this.target=D,this.currentTarget=null;for(var z in u)u.hasOwnProperty(z)&&(m=u[z],this[z]=m?m(k):k[z]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?$m:PO,this.isPropagationStopped=PO,this}return h(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=$m)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=$m)},persist:function(){},isPersistent:$m}),f}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Am=jr(Lo),Nf=h({},Lo,{view:0,detail:0}),J8=jr(Nf),sx,ox,_f,km=h({},Nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ux,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==_f&&(_f&&u.type==="mousemove"?(sx=u.screenX-_f.screenX,ox=u.screenY-_f.screenY):ox=sx=0,_f=u),sx)},movementY:function(u){return"movementY"in u?u.movementY:ox}}),FO=jr(km),tX=h({},km,{dataTransfer:0}),eX=jr(tX),nX=h({},Nf,{relatedTarget:0}),lx=jr(nX),rX=h({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),iX=jr(rX),aX=h({},Lo,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),sX=jr(aX),oX=h({},Lo,{data:0}),LO=jr(oX),lX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fX(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=cX[u])?!!f[u]:!1}function ux(){return fX}var hX=h({},Nf,{key:function(u){if(u.key){var f=lX[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=Tm(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?uX[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ux,charCode:function(u){return u.type==="keypress"?Tm(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Tm(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),dX=jr(hX),pX=h({},km,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),BO=jr(pX),mX=h({},Nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ux}),gX=jr(mX),yX=h({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),vX=jr(yX),bX=h({},km,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),xX=jr(bX),wX=h({},Lo,{newState:0,oldState:0}),SX=jr(wX),CX=[9,13,27,32],cx=Wa&&"CompositionEvent"in window,Rf=null;Wa&&"documentMode"in document&&(Rf=document.documentMode);var TX=Wa&&"TextEvent"in window&&!Rf,zO=Wa&&(!cx||Rf&&8<Rf&&11>=Rf),jO=" ",UO=!1;function VO(u,f){switch(u){case"keyup":return CX.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WO(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var hu=!1;function $X(u,f){switch(u){case"compositionend":return WO(f);case"keypress":return f.which!==32?null:(UO=!0,jO);case"textInput":return u=f.data,u===jO&&UO?null:u;default:return null}}function AX(u,f){if(hu)return u==="compositionend"||!cx&&VO(u,f)?(u=MO(),Cm=ax=Ns=null,hu=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return zO&&f.locale!=="ko"?null:f.data;default:return null}}var kX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GO(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!kX[u.type]:f==="textarea"}function qO(u,f,m,y){cu?fu?fu.push(y):fu=[y]:cu=y,f=dg(f,"onChange"),0<f.length&&(m=new Am("onChange","change",null,m,y),u.push({event:m,listeners:f}))}var Df=null,Mf=null;function IX(u){AR(u,0)}function Im(u){var f=If(u);if(kO(f))return u}function HO(u,f){if(u==="change")return f}var XO=!1;if(Wa){var fx;if(Wa){var hx="oninput"in document;if(!hx){var KO=document.createElement("div");KO.setAttribute("oninput","return;"),hx=typeof KO.oninput=="function"}fx=hx}else fx=!1;XO=fx&&(!document.documentMode||9<document.documentMode)}function YO(){Df&&(Df.detachEvent("onpropertychange",ZO),Mf=Df=null)}function ZO(u){if(u.propertyName==="value"&&Im(Mf)){var f=[];qO(f,Mf,u,nx(u)),DO(IX,f)}}function EX(u,f,m){u==="focusin"?(YO(),Df=f,Mf=m,Df.attachEvent("onpropertychange",ZO)):u==="focusout"&&YO()}function OX(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Im(Mf)}function NX(u,f){if(u==="click")return Im(f)}function _X(u,f){if(u==="input"||u==="change")return Im(f)}function RX(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Jr=typeof Object.is=="function"?Object.is:RX;function Pf(u,f){if(Jr(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var m=Object.keys(u),y=Object.keys(f);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var C=m[y];if(!gt.call(f,C)||!Jr(u[C],f[C]))return!1}return!0}function QO(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function JO(u,f){var m=QO(u);u=0;for(var y;m;){if(m.nodeType===3){if(y=u+m.textContent.length,u<=f&&y>=f)return{node:m,offset:f-u};u=y}t:{for(;m;){if(m.nextSibling){m=m.nextSibling;break t}m=m.parentNode}m=void 0}m=QO(m)}}function tN(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?tN(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function eN(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=wm(u.document);f instanceof u.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)u=f.contentWindow;else break;f=wm(u.document)}return f}function dx(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var DX=Wa&&"documentMode"in document&&11>=document.documentMode,du=null,px=null,Ff=null,mx=!1;function nN(u,f,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;mx||du==null||du!==wm(y)||(y=du,"selectionStart"in y&&dx(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Ff&&Pf(Ff,y)||(Ff=y,y=dg(px,"onSelect"),0<y.length&&(f=new Am("onSelect","select",null,f,m),u.push({event:f,listeners:y}),f.target=du)))}function Bo(u,f){var m={};return m[u.toLowerCase()]=f.toLowerCase(),m["Webkit"+u]="webkit"+f,m["Moz"+u]="moz"+f,m}var pu={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionrun:Bo("Transition","TransitionRun"),transitionstart:Bo("Transition","TransitionStart"),transitioncancel:Bo("Transition","TransitionCancel"),transitionend:Bo("Transition","TransitionEnd")},gx={},rN={};Wa&&(rN=document.createElement("div").style,"AnimationEvent"in window||(delete pu.animationend.animation,delete pu.animationiteration.animation,delete pu.animationstart.animation),"TransitionEvent"in window||delete pu.transitionend.transition);function zo(u){if(gx[u])return gx[u];if(!pu[u])return u;var f=pu[u],m;for(m in f)if(f.hasOwnProperty(m)&&m in rN)return gx[u]=f[m];return u}var iN=zo("animationend"),aN=zo("animationiteration"),sN=zo("animationstart"),MX=zo("transitionrun"),PX=zo("transitionstart"),FX=zo("transitioncancel"),oN=zo("transitionend"),lN=new Map,yx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yx.push("scrollEnd");function Vi(u,f){lN.set(u,f),Fo(f,[u])}var uN=new WeakMap;function vi(u,f){if(typeof u=="object"&&u!==null){var m=uN.get(u);return m!==void 0?m:(f={value:u,source:f,stack:$O(f)},uN.set(u,f),f)}return{value:u,source:f,stack:$O(f)}}var bi=[],mu=0,vx=0;function Em(){for(var u=mu,f=vx=mu=0;f<u;){var m=bi[f];bi[f++]=null;var y=bi[f];bi[f++]=null;var C=bi[f];bi[f++]=null;var k=bi[f];if(bi[f++]=null,y!==null&&C!==null){var D=y.pending;D===null?C.next=C:(C.next=D.next,D.next=C),y.pending=C}k!==0&&cN(m,C,k)}}function Om(u,f,m,y){bi[mu++]=u,bi[mu++]=f,bi[mu++]=m,bi[mu++]=y,vx|=y,u.lanes|=y,u=u.alternate,u!==null&&(u.lanes|=y)}function bx(u,f,m,y){return Om(u,f,m,y),Nm(u)}function gu(u,f){return Om(u,null,null,f),Nm(u)}function cN(u,f,m){u.lanes|=m;var y=u.alternate;y!==null&&(y.lanes|=m);for(var C=!1,k=u.return;k!==null;)k.childLanes|=m,y=k.alternate,y!==null&&(y.childLanes|=m),k.tag===22&&(u=k.stateNode,u===null||u._visibility&1||(C=!0)),u=k,k=k.return;return u.tag===3?(k=u.stateNode,C&&f!==null&&(C=31-_n(m),u=k.hiddenUpdates,y=u[C],y===null?u[C]=[f]:y.push(f),f.lane=m|536870912),k):null}function Nm(u){if(50<lh)throw lh=0,$1=null,Error(r(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var yu={};function LX(u,f,m,y){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(u,f,m,y){return new LX(u,f,m,y)}function xx(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Ga(u,f){var m=u.alternate;return m===null?(m=ti(u.tag,f,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=f,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,f=u.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function fN(u,f){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,f=m.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function _m(u,f,m,y,C,k){var D=0;if(y=u,typeof u=="function")xx(u)&&(D=1);else if(typeof u=="string")D=zK(u,m,ot.current)?26:u==="html"||u==="head"||u==="body"?27:5;else t:switch(u){case _:return u=ti(31,m,f,C),u.elementType=_,u.lanes=k,u;case v:return jo(m.children,C,k,f);case x:D=8,C|=24;break;case b:return u=ti(12,m,f,C|2),u.elementType=b,u.lanes=k,u;case A:return u=ti(13,m,f,C),u.elementType=A,u.lanes=k,u;case I:return u=ti(19,m,f,C),u.elementType=I,u.lanes=k,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case w:case T:D=10;break t;case S:D=9;break t;case $:D=11;break t;case O:D=14;break t;case N:D=16,y=null;break t}D=29,m=Error(r(130,u===null?"null":typeof u,"")),y=null}return f=ti(D,m,f,C),f.elementType=u,f.type=y,f.lanes=k,f}function jo(u,f,m,y){return u=ti(7,u,y,f),u.lanes=m,u}function wx(u,f,m){return u=ti(6,u,null,f),u.lanes=m,u}function Sx(u,f,m){return f=ti(4,u.children!==null?u.children:[],u.key,f),f.lanes=m,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var vu=[],bu=0,Rm=null,Dm=0,xi=[],wi=0,Uo=null,qa=1,Ha="";function Vo(u,f){vu[bu++]=Dm,vu[bu++]=Rm,Rm=u,Dm=f}function hN(u,f,m){xi[wi++]=qa,xi[wi++]=Ha,xi[wi++]=Uo,Uo=u;var y=qa;u=Ha;var C=32-_n(y)-1;y&=~(1<<C),m+=1;var k=32-_n(f)+C;if(30<k){var D=C-C%5;k=(y&(1<<D)-1).toString(32),y>>=D,C-=D,qa=1<<32-_n(f)+C|m<<C|y,Ha=k+u}else qa=1<<k|m<<C|y,Ha=u}function Cx(u){u.return!==null&&(Vo(u,1),hN(u,1,0))}function Tx(u){for(;u===Rm;)Rm=vu[--bu],vu[bu]=null,Dm=vu[--bu],vu[bu]=null;for(;u===Uo;)Uo=xi[--wi],xi[wi]=null,Ha=xi[--wi],xi[wi]=null,qa=xi[--wi],xi[wi]=null}var Ar=null,sn=null,$e=!1,Wo=null,ha=!1,$x=Error(r(519));function Go(u){var f=Error(r(418,""));throw zf(vi(f,u)),$x}function dN(u){var f=u.stateNode,m=u.type,y=u.memoizedProps;switch(f[dr]=u,f[zr]=y,m){case"dialog":he("cancel",f),he("close",f);break;case"iframe":case"object":case"embed":he("load",f);break;case"video":case"audio":for(m=0;m<ch.length;m++)he(ch[m],f);break;case"source":he("error",f);break;case"img":case"image":case"link":he("error",f),he("load",f);break;case"details":he("toggle",f);break;case"input":he("invalid",f),IO(f,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),xm(f);break;case"select":he("invalid",f);break;case"textarea":he("invalid",f),OO(f,y.value,y.defaultValue,y.children),xm(f)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||y.suppressHydrationWarning===!0||OR(f.textContent,m)?(y.popover!=null&&(he("beforetoggle",f),he("toggle",f)),y.onScroll!=null&&he("scroll",f),y.onScrollEnd!=null&&he("scrollend",f),y.onClick!=null&&(f.onclick=pg),f=!0):f=!1,f||Go(u)}function pN(u){for(Ar=u.return;Ar;)switch(Ar.tag){case 5:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:Ar=Ar.return}}function Lf(u){if(u!==Ar)return!1;if(!$e)return pN(u),$e=!0,!1;var f=u.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||j1(u.type,u.memoizedProps)),m=!m),m&&sn&&Go(u),pN(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));t:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(f===0){sn=Gi(u.nextSibling);break t}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;u=u.nextSibling}sn=null}}else f===27?(f=sn,Hs(u.type)?(u=G1,G1=null,sn=u):sn=f):sn=Ar?Gi(u.stateNode.nextSibling):null;return!0}function Bf(){sn=Ar=null,$e=!1}function mN(){var u=Wo;return u!==null&&(Wr===null?Wr=u:Wr.push.apply(Wr,u),Wo=null),u}function zf(u){Wo===null?Wo=[u]:Wo.push(u)}var Ax=G(null),qo=null,Xa=null;function _s(u,f,m){Y(Ax,f._currentValue),f._currentValue=m}function Ka(u){u._currentValue=Ax.current,H(Ax)}function kx(u,f,m){for(;u!==null;){var y=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,y!==null&&(y.childLanes|=f)):y!==null&&(y.childLanes&f)!==f&&(y.childLanes|=f),u===m)break;u=u.return}}function Ix(u,f,m,y){var C=u.child;for(C!==null&&(C.return=u);C!==null;){var k=C.dependencies;if(k!==null){var D=C.child;k=k.firstContext;t:for(;k!==null;){var z=k;k=C;for(var K=0;K<f.length;K++)if(z.context===f[K]){k.lanes|=m,z=k.alternate,z!==null&&(z.lanes|=m),kx(k.return,m,u),y||(D=null);break t}k=z.next}}else if(C.tag===18){if(D=C.return,D===null)throw Error(r(341));D.lanes|=m,k=D.alternate,k!==null&&(k.lanes|=m),kx(D,m,u),D=null}else D=C.child;if(D!==null)D.return=C;else for(D=C;D!==null;){if(D===u){D=null;break}if(C=D.sibling,C!==null){C.return=D.return,D=C;break}D=D.return}C=D}}function jf(u,f,m,y){u=null;for(var C=f,k=!1;C!==null;){if(!k){if((C.flags&524288)!==0)k=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var D=C.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var z=C.type;Jr(C.pendingProps.value,D.value)||(u!==null?u.push(z):u=[z])}}else if(C===Nt.current){if(D=C.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(u!==null?u.push(gh):u=[gh])}C=C.return}u!==null&&Ix(f,u,m,y),f.flags|=262144}function Mm(u){for(u=u.firstContext;u!==null;){if(!Jr(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Ho(u){qo=u,Xa=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function pr(u){return gN(qo,u)}function Pm(u,f){return qo===null&&Ho(u),gN(u,f)}function gN(u,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},Xa===null){if(u===null)throw Error(r(308));Xa=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else Xa=Xa.next=f;return m}var BX=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(m,y){u.push(y)}};this.abort=function(){f.aborted=!0,u.forEach(function(m){return m()})}},zX=e.unstable_scheduleCallback,jX=e.unstable_NormalPriority,Rn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ex(){return{controller:new BX,data:new Map,refCount:0}}function Uf(u){u.refCount--,u.refCount===0&&zX(jX,function(){u.controller.abort()})}var Vf=null,Ox=0,xu=0,wu=null;function UX(u,f){if(Vf===null){var m=Vf=[];Ox=0,xu=_1(),wu={status:"pending",value:void 0,then:function(y){m.push(y)}}}return Ox++,f.then(yN,yN),f}function yN(){if(--Ox===0&&Vf!==null){wu!==null&&(wu.status="fulfilled");var u=Vf;Vf=null,xu=0,wu=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function VX(u,f){var m=[],y={status:"pending",value:null,reason:null,then:function(C){m.push(C)}};return u.then(function(){y.status="fulfilled",y.value=f;for(var C=0;C<m.length;C++)(0,m[C])(f)},function(C){for(y.status="rejected",y.reason=C,C=0;C<m.length;C++)(0,m[C])(void 0)}),y}var vN=P.S;P.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&UX(u,f),vN!==null&&vN(u,f)};var Xo=G(null);function Nx(){var u=Xo.current;return u!==null?u:Ge.pooledCache}function Fm(u,f){f===null?Y(Xo,Xo.current):Y(Xo,f.pool)}function bN(){var u=Nx();return u===null?null:{parent:Rn._currentValue,pool:u}}var Wf=Error(r(460)),xN=Error(r(474)),Lm=Error(r(542)),_x={then:function(){}};function wN(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Bm(){}function SN(u,f,m){switch(m=u[m],m===void 0?u.push(f):m!==f&&(f.then(Bm,Bm),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,TN(u),u;default:if(typeof f.status=="string")f.then(Bm,Bm);else{if(u=Ge,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=f,u.status="pending",u.then(function(y){if(f.status==="pending"){var C=f;C.status="fulfilled",C.value=y}},function(y){if(f.status==="pending"){var C=f;C.status="rejected",C.reason=y}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,TN(u),u}throw Gf=f,Wf}}var Gf=null;function CN(){if(Gf===null)throw Error(r(459));var u=Gf;return Gf=null,u}function TN(u){if(u===Wf||u===Lm)throw Error(r(483))}var Rs=!1;function Rx(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dx(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Ds(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Ms(u,f,m){var y=u.updateQueue;if(y===null)return null;if(y=y.shared,(Oe&2)!==0){var C=y.pending;return C===null?f.next=f:(f.next=C.next,C.next=f),y.pending=f,f=Nm(u),cN(u,null,m),f}return Om(u,y,f,m),Nm(u)}function qf(u,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var y=f.lanes;y&=u.pendingLanes,m|=y,f.lanes=m,yO(u,m)}}function Mx(u,f){var m=u.updateQueue,y=u.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var C=null,k=null;if(m=m.firstBaseUpdate,m!==null){do{var D={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};k===null?C=k=D:k=k.next=D,m=m.next}while(m!==null);k===null?C=k=f:k=k.next=f}else C=k=f;m={baseState:y.baseState,firstBaseUpdate:C,lastBaseUpdate:k,shared:y.shared,callbacks:y.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=f}var Px=!1;function Hf(){if(Px){var u=wu;if(u!==null)throw u}}function Xf(u,f,m,y){Px=!1;var C=u.updateQueue;Rs=!1;var k=C.firstBaseUpdate,D=C.lastBaseUpdate,z=C.shared.pending;if(z!==null){C.shared.pending=null;var K=z,lt=K.next;K.next=null,D===null?k=lt:D.next=lt,D=K;var bt=u.alternate;bt!==null&&(bt=bt.updateQueue,z=bt.lastBaseUpdate,z!==D&&(z===null?bt.firstBaseUpdate=lt:z.next=lt,bt.lastBaseUpdate=K))}if(k!==null){var wt=C.baseState;D=0,bt=lt=K=null,z=k;do{var ut=z.lane&-536870913,ft=ut!==z.lane;if(ft?(ye&ut)===ut:(y&ut)===ut){ut!==0&&ut===xu&&(Px=!0),bt!==null&&(bt=bt.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});t:{var Qt=u,Gt=z;ut=f;var Me=m;switch(Gt.tag){case 1:if(Qt=Gt.payload,typeof Qt=="function"){wt=Qt.call(Me,wt,ut);break t}wt=Qt;break t;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=Gt.payload,ut=typeof Qt=="function"?Qt.call(Me,wt,ut):Qt,ut==null)break t;wt=h({},wt,ut);break t;case 2:Rs=!0}}ut=z.callback,ut!==null&&(u.flags|=64,ft&&(u.flags|=8192),ft=C.callbacks,ft===null?C.callbacks=[ut]:ft.push(ut))}else ft={lane:ut,tag:z.tag,payload:z.payload,callback:z.callback,next:null},bt===null?(lt=bt=ft,K=wt):bt=bt.next=ft,D|=ut;if(z=z.next,z===null){if(z=C.shared.pending,z===null)break;ft=z,z=ft.next,ft.next=null,C.lastBaseUpdate=ft,C.shared.pending=null}}while(!0);bt===null&&(K=wt),C.baseState=K,C.firstBaseUpdate=lt,C.lastBaseUpdate=bt,k===null&&(C.shared.lanes=0),Vs|=D,u.lanes=D,u.memoizedState=wt}}function $N(u,f){if(typeof u!="function")throw Error(r(191,u));u.call(f)}function AN(u,f){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)$N(m[u],f)}var Su=G(null),zm=G(0);function kN(u,f){u=ns,Y(zm,u),Y(Su,f),ns=u|f.baseLanes}function Fx(){Y(zm,ns),Y(Su,Su.current)}function Lx(){ns=zm.current,H(Su),H(zm)}var Ps=0,oe=null,Re=null,xn=null,jm=!1,Cu=!1,Ko=!1,Um=0,Kf=0,Tu=null,WX=0;function gn(){throw Error(r(321))}function Bx(u,f){if(f===null)return!1;for(var m=0;m<f.length&&m<u.length;m++)if(!Jr(u[m],f[m]))return!1;return!0}function zx(u,f,m,y,C,k){return Ps=k,oe=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,P.H=u===null||u.memoizedState===null?c_:f_,Ko=!1,k=m(y,C),Ko=!1,Cu&&(k=EN(f,m,y,C)),IN(u),k}function IN(u){P.H=Xm;var f=Re!==null&&Re.next!==null;if(Ps=0,xn=Re=oe=null,jm=!1,Kf=0,Tu=null,f)throw Error(r(300));u===null||Vn||(u=u.dependencies,u!==null&&Mm(u)&&(Vn=!0))}function EN(u,f,m,y){oe=u;var C=0;do{if(Cu&&(Tu=null),Kf=0,Cu=!1,25<=C)throw Error(r(301));if(C+=1,xn=Re=null,u.updateQueue!=null){var k=u.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}P.H=ZX,k=f(m,y)}while(Cu);return k}function GX(){var u=P.H,f=u.useState()[0];return f=typeof f.then=="function"?Yf(f):f,u=u.useState()[0],(Re!==null?Re.memoizedState:null)!==u&&(oe.flags|=1024),f}function jx(){var u=Um!==0;return Um=0,u}function Ux(u,f,m){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~m}function Vx(u){if(jm){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}jm=!1}Ps=0,xn=Re=oe=null,Cu=!1,Kf=Um=0,Tu=null}function Ur(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?oe.memoizedState=xn=u:xn=xn.next=u,xn}function wn(){if(Re===null){var u=oe.alternate;u=u!==null?u.memoizedState:null}else u=Re.next;var f=xn===null?oe.memoizedState:xn.next;if(f!==null)xn=f,Re=u;else{if(u===null)throw oe.alternate===null?Error(r(467)):Error(r(310));Re=u,u={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},xn===null?oe.memoizedState=xn=u:xn=xn.next=u}return xn}function Wx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yf(u){var f=Kf;return Kf+=1,Tu===null&&(Tu=[]),u=SN(Tu,u,f),f=oe,(xn===null?f.memoizedState:xn.next)===null&&(f=f.alternate,P.H=f===null||f.memoizedState===null?c_:f_),u}function Vm(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Yf(u);if(u.$$typeof===T)return pr(u)}throw Error(r(438,String(u)))}function Gx(u){var f=null,m=oe.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var y=oe.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(f={data:y.data.map(function(C){return C.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=Wx(),oe.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(u),y=0;y<u;y++)m[y]=R;return f.index++,m}function Ya(u,f){return typeof f=="function"?f(u):f}function Wm(u){var f=wn();return qx(f,Re,u)}function qx(u,f,m){var y=u.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=m;var C=u.baseQueue,k=y.pending;if(k!==null){if(C!==null){var D=C.next;C.next=k.next,k.next=D}f.baseQueue=C=k,y.pending=null}if(k=u.baseState,C===null)u.memoizedState=k;else{f=C.next;var z=D=null,K=null,lt=f,bt=!1;do{var wt=lt.lane&-536870913;if(wt!==lt.lane?(ye&wt)===wt:(Ps&wt)===wt){var ut=lt.revertLane;if(ut===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),wt===xu&&(bt=!0);else if((Ps&ut)===ut){lt=lt.next,ut===xu&&(bt=!0);continue}else wt={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},K===null?(z=K=wt,D=k):K=K.next=wt,oe.lanes|=ut,Vs|=ut;wt=lt.action,Ko&&m(k,wt),k=lt.hasEagerState?lt.eagerState:m(k,wt)}else ut={lane:wt,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},K===null?(z=K=ut,D=k):K=K.next=ut,oe.lanes|=wt,Vs|=wt;lt=lt.next}while(lt!==null&&lt!==f);if(K===null?D=k:K.next=z,!Jr(k,u.memoizedState)&&(Vn=!0,bt&&(m=wu,m!==null)))throw m;u.memoizedState=k,u.baseState=D,u.baseQueue=K,y.lastRenderedState=k}return C===null&&(y.lanes=0),[u.memoizedState,y.dispatch]}function Hx(u){var f=wn(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var y=m.dispatch,C=m.pending,k=f.memoizedState;if(C!==null){m.pending=null;var D=C=C.next;do k=u(k,D.action),D=D.next;while(D!==C);Jr(k,f.memoizedState)||(Vn=!0),f.memoizedState=k,f.baseQueue===null&&(f.baseState=k),m.lastRenderedState=k}return[k,y]}function ON(u,f,m){var y=oe,C=wn(),k=$e;if(k){if(m===void 0)throw Error(r(407));m=m()}else m=f();var D=!Jr((Re||C).memoizedState,m);D&&(C.memoizedState=m,Vn=!0),C=C.queue;var z=RN.bind(null,y,C,u);if(Zf(2048,8,z,[u]),C.getSnapshot!==f||D||xn!==null&&xn.memoizedState.tag&1){if(y.flags|=2048,$u(9,Gm(),_N.bind(null,y,C,m,f),null),Ge===null)throw Error(r(349));k||(Ps&124)!==0||NN(y,f,m)}return m}function NN(u,f,m){u.flags|=16384,u={getSnapshot:f,value:m},f=oe.updateQueue,f===null?(f=Wx(),oe.updateQueue=f,f.stores=[u]):(m=f.stores,m===null?f.stores=[u]:m.push(u))}function _N(u,f,m,y){f.value=m,f.getSnapshot=y,DN(f)&&MN(u)}function RN(u,f,m){return m(function(){DN(f)&&MN(u)})}function DN(u){var f=u.getSnapshot;u=u.value;try{var m=f();return!Jr(u,m)}catch{return!0}}function MN(u){var f=gu(u,2);f!==null&&ai(f,u,2)}function Xx(u){var f=Ur();if(typeof u=="function"){var m=u;if(u=m(),Ko){Jn(!0);try{m()}finally{Jn(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:u},f}function PN(u,f,m,y){return u.baseState=m,qx(u,Re,typeof y=="function"?y:Ya)}function qX(u,f,m,y,C){if(Hm(u))throw Error(r(485));if(u=f.action,u!==null){var k={payload:C,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){k.listeners.push(D)}};P.T!==null?m(!0):k.isTransition=!1,y(k),m=f.pending,m===null?(k.next=f.pending=k,FN(f,k)):(k.next=m.next,f.pending=m.next=k)}}function FN(u,f){var m=f.action,y=f.payload,C=u.state;if(f.isTransition){var k=P.T,D={};P.T=D;try{var z=m(C,y),K=P.S;K!==null&&K(D,z),LN(u,f,z)}catch(lt){Kx(u,f,lt)}finally{P.T=k}}else try{k=m(C,y),LN(u,f,k)}catch(lt){Kx(u,f,lt)}}function LN(u,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){BN(u,f,y)},function(y){return Kx(u,f,y)}):BN(u,f,m)}function BN(u,f,m){f.status="fulfilled",f.value=m,zN(f),u.state=m,f=u.pending,f!==null&&(m=f.next,m===f?u.pending=null:(m=m.next,f.next=m,FN(u,m)))}function Kx(u,f,m){var y=u.pending;if(u.pending=null,y!==null){y=y.next;do f.status="rejected",f.reason=m,zN(f),f=f.next;while(f!==y)}u.action=null}function zN(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function jN(u,f){return f}function UN(u,f){if($e){var m=Ge.formState;if(m!==null){t:{var y=oe;if($e){if(sn){e:{for(var C=sn,k=ha;C.nodeType!==8;){if(!k){C=null;break e}if(C=Gi(C.nextSibling),C===null){C=null;break e}}k=C.data,C=k==="F!"||k==="F"?C:null}if(C){sn=Gi(C.nextSibling),y=C.data==="F!";break t}}Go(y)}y=!1}y&&(f=m[0])}}return m=Ur(),m.memoizedState=m.baseState=f,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jN,lastRenderedState:f},m.queue=y,m=o_.bind(null,oe,y),y.dispatch=m,y=Xx(!1),k=t1.bind(null,oe,!1,y.queue),y=Ur(),C={state:f,dispatch:null,action:u,pending:null},y.queue=C,m=qX.bind(null,oe,C,k,m),C.dispatch=m,y.memoizedState=u,[f,m,!1]}function VN(u){var f=wn();return WN(f,Re,u)}function WN(u,f,m){if(f=qx(u,f,jN)[0],u=Wm(Ya)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var y=Yf(f)}catch(D){throw D===Wf?Lm:D}else y=f;f=wn();var C=f.queue,k=C.dispatch;return m!==f.memoizedState&&(oe.flags|=2048,$u(9,Gm(),HX.bind(null,C,m),null)),[y,k,u]}function HX(u,f){u.action=f}function GN(u){var f=wn(),m=Re;if(m!==null)return WN(f,m,u);wn(),f=f.memoizedState,m=wn();var y=m.queue.dispatch;return m.memoizedState=u,[f,y,!1]}function $u(u,f,m,y){return u={tag:u,create:m,deps:y,inst:f,next:null},f=oe.updateQueue,f===null&&(f=Wx(),oe.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=u.next=u:(y=m.next,m.next=u,u.next=y,f.lastEffect=u),u}function Gm(){return{destroy:void 0,resource:void 0}}function qN(){return wn().memoizedState}function qm(u,f,m,y){var C=Ur();y=y===void 0?null:y,oe.flags|=u,C.memoizedState=$u(1|f,Gm(),m,y)}function Zf(u,f,m,y){var C=wn();y=y===void 0?null:y;var k=C.memoizedState.inst;Re!==null&&y!==null&&Bx(y,Re.memoizedState.deps)?C.memoizedState=$u(f,k,m,y):(oe.flags|=u,C.memoizedState=$u(1|f,k,m,y))}function HN(u,f){qm(8390656,8,u,f)}function XN(u,f){Zf(2048,8,u,f)}function KN(u,f){return Zf(4,2,u,f)}function YN(u,f){return Zf(4,4,u,f)}function ZN(u,f){if(typeof f=="function"){u=u();var m=f(u);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function QN(u,f,m){m=m!=null?m.concat([u]):null,Zf(4,4,ZN.bind(null,f,u),m)}function Yx(){}function JN(u,f){var m=wn();f=f===void 0?null:f;var y=m.memoizedState;return f!==null&&Bx(f,y[1])?y[0]:(m.memoizedState=[u,f],u)}function t_(u,f){var m=wn();f=f===void 0?null:f;var y=m.memoizedState;if(f!==null&&Bx(f,y[1]))return y[0];if(y=u(),Ko){Jn(!0);try{u()}finally{Jn(!1)}}return m.memoizedState=[y,f],y}function Zx(u,f,m){return m===void 0||(Ps&1073741824)!==0?u.memoizedState=f:(u.memoizedState=m,u=rR(),oe.lanes|=u,Vs|=u,m)}function e_(u,f,m,y){return Jr(m,f)?m:Su.current!==null?(u=Zx(u,m,y),Jr(u,f)||(Vn=!0),u):(Ps&42)===0?(Vn=!0,u.memoizedState=m):(u=rR(),oe.lanes|=u,Vs|=u,f)}function n_(u,f,m,y,C){var k=U.p;U.p=k!==0&&8>k?k:8;var D=P.T,z={};P.T=z,t1(u,!1,f,m);try{var K=C(),lt=P.S;if(lt!==null&&lt(z,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var bt=VX(K,y);Qf(u,f,bt,ii(u))}else Qf(u,f,y,ii(u))}catch(wt){Qf(u,f,{then:function(){},status:"rejected",reason:wt},ii())}finally{U.p=k,P.T=D}}function XX(){}function Qx(u,f,m,y){if(u.tag!==5)throw Error(r(476));var C=r_(u).queue;n_(u,C,f,W,m===null?XX:function(){return i_(u),m(y)})}function r_(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:W},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:m},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function i_(u){var f=r_(u).next.queue;Qf(u,f,{},ii())}function Jx(){return pr(gh)}function a_(){return wn().memoizedState}function s_(){return wn().memoizedState}function KX(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var m=ii();u=Ds(m);var y=Ms(f,u,m);y!==null&&(ai(y,f,m),qf(y,f,m)),f={cache:Ex()},u.payload=f;return}f=f.return}}function YX(u,f,m){var y=ii();m={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Hm(u)?l_(f,m):(m=bx(u,f,m,y),m!==null&&(ai(m,u,y),u_(m,f,y)))}function o_(u,f,m){var y=ii();Qf(u,f,m,y)}function Qf(u,f,m,y){var C={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Hm(u))l_(f,C);else{var k=u.alternate;if(u.lanes===0&&(k===null||k.lanes===0)&&(k=f.lastRenderedReducer,k!==null))try{var D=f.lastRenderedState,z=k(D,m);if(C.hasEagerState=!0,C.eagerState=z,Jr(z,D))return Om(u,f,C,0),Ge===null&&Em(),!1}catch{}finally{}if(m=bx(u,f,C,y),m!==null)return ai(m,u,y),u_(m,f,y),!0}return!1}function t1(u,f,m,y){if(y={lane:2,revertLane:_1(),action:y,hasEagerState:!1,eagerState:null,next:null},Hm(u)){if(f)throw Error(r(479))}else f=bx(u,m,y,2),f!==null&&ai(f,u,2)}function Hm(u){var f=u.alternate;return u===oe||f!==null&&f===oe}function l_(u,f){Cu=jm=!0;var m=u.pending;m===null?f.next=f:(f.next=m.next,m.next=f),u.pending=f}function u_(u,f,m){if((m&4194048)!==0){var y=f.lanes;y&=u.pendingLanes,m|=y,f.lanes=m,yO(u,m)}}var Xm={readContext:pr,use:Vm,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn,useHostTransitionStatus:gn,useFormState:gn,useActionState:gn,useOptimistic:gn,useMemoCache:gn,useCacheRefresh:gn},c_={readContext:pr,use:Vm,useCallback:function(u,f){return Ur().memoizedState=[u,f===void 0?null:f],u},useContext:pr,useEffect:HN,useImperativeHandle:function(u,f,m){m=m!=null?m.concat([u]):null,qm(4194308,4,ZN.bind(null,f,u),m)},useLayoutEffect:function(u,f){return qm(4194308,4,u,f)},useInsertionEffect:function(u,f){qm(4,2,u,f)},useMemo:function(u,f){var m=Ur();f=f===void 0?null:f;var y=u();if(Ko){Jn(!0);try{u()}finally{Jn(!1)}}return m.memoizedState=[y,f],y},useReducer:function(u,f,m){var y=Ur();if(m!==void 0){var C=m(f);if(Ko){Jn(!0);try{m(f)}finally{Jn(!1)}}}else C=f;return y.memoizedState=y.baseState=C,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:C},y.queue=u,u=u.dispatch=YX.bind(null,oe,u),[y.memoizedState,u]},useRef:function(u){var f=Ur();return u={current:u},f.memoizedState=u},useState:function(u){u=Xx(u);var f=u.queue,m=o_.bind(null,oe,f);return f.dispatch=m,[u.memoizedState,m]},useDebugValue:Yx,useDeferredValue:function(u,f){var m=Ur();return Zx(m,u,f)},useTransition:function(){var u=Xx(!1);return u=n_.bind(null,oe,u.queue,!0,!1),Ur().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,m){var y=oe,C=Ur();if($e){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),Ge===null)throw Error(r(349));(ye&124)!==0||NN(y,f,m)}C.memoizedState=m;var k={value:m,getSnapshot:f};return C.queue=k,HN(RN.bind(null,y,k,u),[u]),y.flags|=2048,$u(9,Gm(),_N.bind(null,y,k,m,f),null),m},useId:function(){var u=Ur(),f=Ge.identifierPrefix;if($e){var m=Ha,y=qa;m=(y&~(1<<32-_n(y)-1)).toString(32)+m,f=""+f+"R"+m,m=Um++,0<m&&(f+="H"+m.toString(32)),f+=""}else m=WX++,f=""+f+"r"+m.toString(32)+"";return u.memoizedState=f},useHostTransitionStatus:Jx,useFormState:UN,useActionState:UN,useOptimistic:function(u){var f=Ur();f.memoizedState=f.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=t1.bind(null,oe,!0,m),m.dispatch=f,[u,f]},useMemoCache:Gx,useCacheRefresh:function(){return Ur().memoizedState=KX.bind(null,oe)}},f_={readContext:pr,use:Vm,useCallback:JN,useContext:pr,useEffect:XN,useImperativeHandle:QN,useInsertionEffect:KN,useLayoutEffect:YN,useMemo:t_,useReducer:Wm,useRef:qN,useState:function(){return Wm(Ya)},useDebugValue:Yx,useDeferredValue:function(u,f){var m=wn();return e_(m,Re.memoizedState,u,f)},useTransition:function(){var u=Wm(Ya)[0],f=wn().memoizedState;return[typeof u=="boolean"?u:Yf(u),f]},useSyncExternalStore:ON,useId:a_,useHostTransitionStatus:Jx,useFormState:VN,useActionState:VN,useOptimistic:function(u,f){var m=wn();return PN(m,Re,u,f)},useMemoCache:Gx,useCacheRefresh:s_},ZX={readContext:pr,use:Vm,useCallback:JN,useContext:pr,useEffect:XN,useImperativeHandle:QN,useInsertionEffect:KN,useLayoutEffect:YN,useMemo:t_,useReducer:Hx,useRef:qN,useState:function(){return Hx(Ya)},useDebugValue:Yx,useDeferredValue:function(u,f){var m=wn();return Re===null?Zx(m,u,f):e_(m,Re.memoizedState,u,f)},useTransition:function(){var u=Hx(Ya)[0],f=wn().memoizedState;return[typeof u=="boolean"?u:Yf(u),f]},useSyncExternalStore:ON,useId:a_,useHostTransitionStatus:Jx,useFormState:GN,useActionState:GN,useOptimistic:function(u,f){var m=wn();return Re!==null?PN(m,Re,u,f):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:Gx,useCacheRefresh:s_},Au=null,Jf=0;function Km(u){var f=Jf;return Jf+=1,Au===null&&(Au=[]),SN(Au,u,f)}function th(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function Ym(u,f){throw f.$$typeof===d?Error(r(525)):(u=Object.prototype.toString.call(f),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function h_(u){var f=u._init;return f(u._payload)}function d_(u){function f(it,J){if(u){var at=it.deletions;at===null?(it.deletions=[J],it.flags|=16):at.push(J)}}function m(it,J){if(!u)return null;for(;J!==null;)f(it,J),J=J.sibling;return null}function y(it){for(var J=new Map;it!==null;)it.key!==null?J.set(it.key,it):J.set(it.index,it),it=it.sibling;return J}function C(it,J){return it=Ga(it,J),it.index=0,it.sibling=null,it}function k(it,J,at){return it.index=at,u?(at=it.alternate,at!==null?(at=at.index,at<J?(it.flags|=67108866,J):at):(it.flags|=67108866,J)):(it.flags|=1048576,J)}function D(it){return u&&it.alternate===null&&(it.flags|=67108866),it}function z(it,J,at,xt){return J===null||J.tag!==6?(J=wx(at,it.mode,xt),J.return=it,J):(J=C(J,at),J.return=it,J)}function K(it,J,at,xt){var Pt=at.type;return Pt===v?bt(it,J,at.props.children,xt,at.key):J!==null&&(J.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===N&&h_(Pt)===J.type)?(J=C(J,at.props),th(J,at),J.return=it,J):(J=_m(at.type,at.key,at.props,null,it.mode,xt),th(J,at),J.return=it,J)}function lt(it,J,at,xt){return J===null||J.tag!==4||J.stateNode.containerInfo!==at.containerInfo||J.stateNode.implementation!==at.implementation?(J=Sx(at,it.mode,xt),J.return=it,J):(J=C(J,at.children||[]),J.return=it,J)}function bt(it,J,at,xt,Pt){return J===null||J.tag!==7?(J=jo(at,it.mode,xt,Pt),J.return=it,J):(J=C(J,at),J.return=it,J)}function wt(it,J,at){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=wx(""+J,it.mode,at),J.return=it,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case p:return at=_m(J.type,J.key,J.props,null,it.mode,at),th(at,J),at.return=it,at;case g:return J=Sx(J,it.mode,at),J.return=it,J;case N:var xt=J._init;return J=xt(J._payload),wt(it,J,at)}if(j(J)||F(J))return J=jo(J,it.mode,at,null),J.return=it,J;if(typeof J.then=="function")return wt(it,Km(J),at);if(J.$$typeof===T)return wt(it,Pm(it,J),at);Ym(it,J)}return null}function ut(it,J,at,xt){var Pt=J!==null?J.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return Pt!==null?null:z(it,J,""+at,xt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case p:return at.key===Pt?K(it,J,at,xt):null;case g:return at.key===Pt?lt(it,J,at,xt):null;case N:return Pt=at._init,at=Pt(at._payload),ut(it,J,at,xt)}if(j(at)||F(at))return Pt!==null?null:bt(it,J,at,xt,null);if(typeof at.then=="function")return ut(it,J,Km(at),xt);if(at.$$typeof===T)return ut(it,J,Pm(it,at),xt);Ym(it,at)}return null}function ft(it,J,at,xt,Pt){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return it=it.get(at)||null,z(J,it,""+xt,Pt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case p:return it=it.get(xt.key===null?at:xt.key)||null,K(J,it,xt,Pt);case g:return it=it.get(xt.key===null?at:xt.key)||null,lt(J,it,xt,Pt);case N:var ue=xt._init;return xt=ue(xt._payload),ft(it,J,at,xt,Pt)}if(j(xt)||F(xt))return it=it.get(at)||null,bt(J,it,xt,Pt,null);if(typeof xt.then=="function")return ft(it,J,at,Km(xt),Pt);if(xt.$$typeof===T)return ft(it,J,at,Pm(J,xt),Pt);Ym(J,xt)}return null}function Qt(it,J,at,xt){for(var Pt=null,ue=null,zt=J,Xt=J=0,Gn=null;zt!==null&&Xt<at.length;Xt++){zt.index>Xt?(Gn=zt,zt=null):Gn=zt.sibling;var xe=ut(it,zt,at[Xt],xt);if(xe===null){zt===null&&(zt=Gn);break}u&&zt&&xe.alternate===null&&f(it,zt),J=k(xe,J,Xt),ue===null?Pt=xe:ue.sibling=xe,ue=xe,zt=Gn}if(Xt===at.length)return m(it,zt),$e&&Vo(it,Xt),Pt;if(zt===null){for(;Xt<at.length;Xt++)zt=wt(it,at[Xt],xt),zt!==null&&(J=k(zt,J,Xt),ue===null?Pt=zt:ue.sibling=zt,ue=zt);return $e&&Vo(it,Xt),Pt}for(zt=y(zt);Xt<at.length;Xt++)Gn=ft(zt,it,Xt,at[Xt],xt),Gn!==null&&(u&&Gn.alternate!==null&&zt.delete(Gn.key===null?Xt:Gn.key),J=k(Gn,J,Xt),ue===null?Pt=Gn:ue.sibling=Gn,ue=Gn);return u&&zt.forEach(function(Qs){return f(it,Qs)}),$e&&Vo(it,Xt),Pt}function Gt(it,J,at,xt){if(at==null)throw Error(r(151));for(var Pt=null,ue=null,zt=J,Xt=J=0,Gn=null,xe=at.next();zt!==null&&!xe.done;Xt++,xe=at.next()){zt.index>Xt?(Gn=zt,zt=null):Gn=zt.sibling;var Qs=ut(it,zt,xe.value,xt);if(Qs===null){zt===null&&(zt=Gn);break}u&&zt&&Qs.alternate===null&&f(it,zt),J=k(Qs,J,Xt),ue===null?Pt=Qs:ue.sibling=Qs,ue=Qs,zt=Gn}if(xe.done)return m(it,zt),$e&&Vo(it,Xt),Pt;if(zt===null){for(;!xe.done;Xt++,xe=at.next())xe=wt(it,xe.value,xt),xe!==null&&(J=k(xe,J,Xt),ue===null?Pt=xe:ue.sibling=xe,ue=xe);return $e&&Vo(it,Xt),Pt}for(zt=y(zt);!xe.done;Xt++,xe=at.next())xe=ft(zt,it,Xt,xe.value,xt),xe!==null&&(u&&xe.alternate!==null&&zt.delete(xe.key===null?Xt:xe.key),J=k(xe,J,Xt),ue===null?Pt=xe:ue.sibling=xe,ue=xe);return u&&zt.forEach(function(QK){return f(it,QK)}),$e&&Vo(it,Xt),Pt}function Me(it,J,at,xt){if(typeof at=="object"&&at!==null&&at.type===v&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case p:t:{for(var Pt=at.key;J!==null;){if(J.key===Pt){if(Pt=at.type,Pt===v){if(J.tag===7){m(it,J.sibling),xt=C(J,at.props.children),xt.return=it,it=xt;break t}}else if(J.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===N&&h_(Pt)===J.type){m(it,J.sibling),xt=C(J,at.props),th(xt,at),xt.return=it,it=xt;break t}m(it,J);break}else f(it,J);J=J.sibling}at.type===v?(xt=jo(at.props.children,it.mode,xt,at.key),xt.return=it,it=xt):(xt=_m(at.type,at.key,at.props,null,it.mode,xt),th(xt,at),xt.return=it,it=xt)}return D(it);case g:t:{for(Pt=at.key;J!==null;){if(J.key===Pt)if(J.tag===4&&J.stateNode.containerInfo===at.containerInfo&&J.stateNode.implementation===at.implementation){m(it,J.sibling),xt=C(J,at.children||[]),xt.return=it,it=xt;break t}else{m(it,J);break}else f(it,J);J=J.sibling}xt=Sx(at,it.mode,xt),xt.return=it,it=xt}return D(it);case N:return Pt=at._init,at=Pt(at._payload),Me(it,J,at,xt)}if(j(at))return Qt(it,J,at,xt);if(F(at)){if(Pt=F(at),typeof Pt!="function")throw Error(r(150));return at=Pt.call(at),Gt(it,J,at,xt)}if(typeof at.then=="function")return Me(it,J,Km(at),xt);if(at.$$typeof===T)return Me(it,J,Pm(it,at),xt);Ym(it,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,J!==null&&J.tag===6?(m(it,J.sibling),xt=C(J,at),xt.return=it,it=xt):(m(it,J),xt=wx(at,it.mode,xt),xt.return=it,it=xt),D(it)):m(it,J)}return function(it,J,at,xt){try{Jf=0;var Pt=Me(it,J,at,xt);return Au=null,Pt}catch(zt){if(zt===Wf||zt===Lm)throw zt;var ue=ti(29,zt,null,it.mode);return ue.lanes=xt,ue.return=it,ue}finally{}}}var ku=d_(!0),p_=d_(!1),Si=G(null),da=null;function Fs(u){var f=u.alternate;Y(Dn,Dn.current&1),Y(Si,u),da===null&&(f===null||Su.current!==null||f.memoizedState!==null)&&(da=u)}function m_(u){if(u.tag===22){if(Y(Dn,Dn.current),Y(Si,u),da===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(da=u)}}else Ls()}function Ls(){Y(Dn,Dn.current),Y(Si,Si.current)}function Za(u){H(Si),da===u&&(da=null),H(Dn)}var Dn=G(0);function Zm(u){for(var f=u;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||W1(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function e1(u,f,m,y){f=u.memoizedState,m=m(y,f),m=m==null?f:h({},f,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var n1={enqueueSetState:function(u,f,m){u=u._reactInternals;var y=ii(),C=Ds(y);C.payload=f,m!=null&&(C.callback=m),f=Ms(u,C,y),f!==null&&(ai(f,u,y),qf(f,u,y))},enqueueReplaceState:function(u,f,m){u=u._reactInternals;var y=ii(),C=Ds(y);C.tag=1,C.payload=f,m!=null&&(C.callback=m),f=Ms(u,C,y),f!==null&&(ai(f,u,y),qf(f,u,y))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var m=ii(),y=Ds(m);y.tag=2,f!=null&&(y.callback=f),f=Ms(u,y,m),f!==null&&(ai(f,u,m),qf(f,u,m))}};function g_(u,f,m,y,C,k,D){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(y,k,D):f.prototype&&f.prototype.isPureReactComponent?!Pf(m,y)||!Pf(C,k):!0}function y_(u,f,m,y){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,y),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,y),f.state!==u&&n1.enqueueReplaceState(f,f.state,null)}function Yo(u,f){var m=f;if("ref"in f){m={};for(var y in f)y!=="ref"&&(m[y]=f[y])}if(u=u.defaultProps){m===f&&(m=h({},m));for(var C in u)m[C]===void 0&&(m[C]=u[C])}return m}var Qm=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function v_(u){Qm(u)}function b_(u){console.error(u)}function x_(u){Qm(u)}function Jm(u,f){try{var m=u.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(y){setTimeout(function(){throw y})}}function w_(u,f,m){try{var y=u.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function r1(u,f,m){return m=Ds(m),m.tag=3,m.payload={element:null},m.callback=function(){Jm(u,f)},m}function S_(u){return u=Ds(u),u.tag=3,u}function C_(u,f,m,y){var C=m.type.getDerivedStateFromError;if(typeof C=="function"){var k=y.value;u.payload=function(){return C(k)},u.callback=function(){w_(f,m,y)}}var D=m.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(u.callback=function(){w_(f,m,y),typeof C!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var z=y.stack;this.componentDidCatch(y.value,{componentStack:z!==null?z:""})})}function QX(u,f,m,y,C){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(f=m.alternate,f!==null&&jf(f,m,C,!0),m=Si.current,m!==null){switch(m.tag){case 13:return da===null?k1():m.alternate===null&&on===0&&(on=3),m.flags&=-257,m.flags|=65536,m.lanes=C,y===_x?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([y]):f.add(y),E1(u,y,C)),!1;case 22:return m.flags|=65536,y===_x?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([y]):m.add(y)),E1(u,y,C)),!1}throw Error(r(435,m.tag))}return E1(u,y,C),k1(),!1}if($e)return f=Si.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=C,y!==$x&&(u=Error(r(422),{cause:y}),zf(vi(u,m)))):(y!==$x&&(f=Error(r(423),{cause:y}),zf(vi(f,m))),u=u.current.alternate,u.flags|=65536,C&=-C,u.lanes|=C,y=vi(y,m),C=r1(u.stateNode,y,C),Mx(u,C),on!==4&&(on=2)),!1;var k=Error(r(520),{cause:y});if(k=vi(k,m),oh===null?oh=[k]:oh.push(k),on!==4&&(on=2),f===null)return!0;y=vi(y,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,u=C&-C,m.lanes|=u,u=r1(m.stateNode,y,u),Mx(m,u),!1;case 1:if(f=m.type,k=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ws===null||!Ws.has(k))))return m.flags|=65536,C&=-C,m.lanes|=C,C=S_(C),C_(C,u,m,y),Mx(m,C),!1}m=m.return}while(m!==null);return!1}var T_=Error(r(461)),Vn=!1;function tr(u,f,m,y){f.child=u===null?p_(f,null,m,y):ku(f,u.child,m,y)}function $_(u,f,m,y,C){m=m.render;var k=f.ref;if("ref"in y){var D={};for(var z in y)z!=="ref"&&(D[z]=y[z])}else D=y;return Ho(f),y=zx(u,f,m,D,k,C),z=jx(),u!==null&&!Vn?(Ux(u,f,C),Qa(u,f,C)):($e&&z&&Cx(f),f.flags|=1,tr(u,f,y,C),f.child)}function A_(u,f,m,y,C){if(u===null){var k=m.type;return typeof k=="function"&&!xx(k)&&k.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=k,k_(u,f,k,y,C)):(u=_m(m.type,null,y,f,f.mode,C),u.ref=f.ref,u.return=f,f.child=u)}if(k=u.child,!f1(u,C)){var D=k.memoizedProps;if(m=m.compare,m=m!==null?m:Pf,m(D,y)&&u.ref===f.ref)return Qa(u,f,C)}return f.flags|=1,u=Ga(k,y),u.ref=f.ref,u.return=f,f.child=u}function k_(u,f,m,y,C){if(u!==null){var k=u.memoizedProps;if(Pf(k,y)&&u.ref===f.ref)if(Vn=!1,f.pendingProps=y=k,f1(u,C))(u.flags&131072)!==0&&(Vn=!0);else return f.lanes=u.lanes,Qa(u,f,C)}return i1(u,f,m,y,C)}function I_(u,f,m){var y=f.pendingProps,C=y.children,k=u!==null?u.memoizedState:null;if(y.mode==="hidden"){if((f.flags&128)!==0){if(y=k!==null?k.baseLanes|m:m,u!==null){for(C=f.child=u.child,k=0;C!==null;)k=k|C.lanes|C.childLanes,C=C.sibling;f.childLanes=k&~y}else f.childLanes=0,f.child=null;return E_(u,f,y,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&Fm(f,k!==null?k.cachePool:null),k!==null?kN(f,k):Fx(),m_(f);else return f.lanes=f.childLanes=536870912,E_(u,f,k!==null?k.baseLanes|m:m,m)}else k!==null?(Fm(f,k.cachePool),kN(f,k),Ls(),f.memoizedState=null):(u!==null&&Fm(f,null),Fx(),Ls());return tr(u,f,C,m),f.child}function E_(u,f,m,y){var C=Nx();return C=C===null?null:{parent:Rn._currentValue,pool:C},f.memoizedState={baseLanes:m,cachePool:C},u!==null&&Fm(f,null),Fx(),m_(f),u!==null&&jf(u,f,y,!0),null}function tg(u,f){var m=f.ref;if(m===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(u===null||u.ref!==m)&&(f.flags|=4194816)}}function i1(u,f,m,y,C){return Ho(f),m=zx(u,f,m,y,void 0,C),y=jx(),u!==null&&!Vn?(Ux(u,f,C),Qa(u,f,C)):($e&&y&&Cx(f),f.flags|=1,tr(u,f,m,C),f.child)}function O_(u,f,m,y,C,k){return Ho(f),f.updateQueue=null,m=EN(f,y,m,C),IN(u),y=jx(),u!==null&&!Vn?(Ux(u,f,k),Qa(u,f,k)):($e&&y&&Cx(f),f.flags|=1,tr(u,f,m,k),f.child)}function N_(u,f,m,y,C){if(Ho(f),f.stateNode===null){var k=yu,D=m.contextType;typeof D=="object"&&D!==null&&(k=pr(D)),k=new m(y,k),f.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=n1,f.stateNode=k,k._reactInternals=f,k=f.stateNode,k.props=y,k.state=f.memoizedState,k.refs={},Rx(f),D=m.contextType,k.context=typeof D=="object"&&D!==null?pr(D):yu,k.state=f.memoizedState,D=m.getDerivedStateFromProps,typeof D=="function"&&(e1(f,m,D,y),k.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(D=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),D!==k.state&&n1.enqueueReplaceState(k,k.state,null),Xf(f,y,k,C),Hf(),k.state=f.memoizedState),typeof k.componentDidMount=="function"&&(f.flags|=4194308),y=!0}else if(u===null){k=f.stateNode;var z=f.memoizedProps,K=Yo(m,z);k.props=K;var lt=k.context,bt=m.contextType;D=yu,typeof bt=="object"&&bt!==null&&(D=pr(bt));var wt=m.getDerivedStateFromProps;bt=typeof wt=="function"||typeof k.getSnapshotBeforeUpdate=="function",z=f.pendingProps!==z,bt||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(z||lt!==D)&&y_(f,k,y,D),Rs=!1;var ut=f.memoizedState;k.state=ut,Xf(f,y,k,C),Hf(),lt=f.memoizedState,z||ut!==lt||Rs?(typeof wt=="function"&&(e1(f,m,wt,y),lt=f.memoizedState),(K=Rs||g_(f,m,K,y,ut,lt,D))?(bt||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(f.flags|=4194308)):(typeof k.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=y,f.memoizedState=lt),k.props=y,k.state=lt,k.context=D,y=K):(typeof k.componentDidMount=="function"&&(f.flags|=4194308),y=!1)}else{k=f.stateNode,Dx(u,f),D=f.memoizedProps,bt=Yo(m,D),k.props=bt,wt=f.pendingProps,ut=k.context,lt=m.contextType,K=yu,typeof lt=="object"&&lt!==null&&(K=pr(lt)),z=m.getDerivedStateFromProps,(lt=typeof z=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(D!==wt||ut!==K)&&y_(f,k,y,K),Rs=!1,ut=f.memoizedState,k.state=ut,Xf(f,y,k,C),Hf();var ft=f.memoizedState;D!==wt||ut!==ft||Rs||u!==null&&u.dependencies!==null&&Mm(u.dependencies)?(typeof z=="function"&&(e1(f,m,z,y),ft=f.memoizedState),(bt=Rs||g_(f,m,bt,y,ut,ft,K)||u!==null&&u.dependencies!==null&&Mm(u.dependencies))?(lt||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,ft,K),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,ft,K)),typeof k.componentDidUpdate=="function"&&(f.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof k.componentDidUpdate!="function"||D===u.memoizedProps&&ut===u.memoizedState||(f.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&ut===u.memoizedState||(f.flags|=1024),f.memoizedProps=y,f.memoizedState=ft),k.props=y,k.state=ft,k.context=K,y=bt):(typeof k.componentDidUpdate!="function"||D===u.memoizedProps&&ut===u.memoizedState||(f.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||D===u.memoizedProps&&ut===u.memoizedState||(f.flags|=1024),y=!1)}return k=y,tg(u,f),y=(f.flags&128)!==0,k||y?(k=f.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:k.render(),f.flags|=1,u!==null&&y?(f.child=ku(f,u.child,null,C),f.child=ku(f,null,m,C)):tr(u,f,m,C),f.memoizedState=k.state,u=f.child):u=Qa(u,f,C),u}function __(u,f,m,y){return Bf(),f.flags|=256,tr(u,f,m,y),f.child}var a1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function s1(u){return{baseLanes:u,cachePool:bN()}}function o1(u,f,m){return u=u!==null?u.childLanes&~m:0,f&&(u|=Ci),u}function R_(u,f,m){var y=f.pendingProps,C=!1,k=(f.flags&128)!==0,D;if((D=k)||(D=u!==null&&u.memoizedState===null?!1:(Dn.current&2)!==0),D&&(C=!0,f.flags&=-129),D=(f.flags&32)!==0,f.flags&=-33,u===null){if($e){if(C?Fs(f):Ls(),$e){var z=sn,K;if(K=z){t:{for(K=z,z=ha;K.nodeType!==8;){if(!z){z=null;break t}if(K=Gi(K.nextSibling),K===null){z=null;break t}}z=K}z!==null?(f.memoizedState={dehydrated:z,treeContext:Uo!==null?{id:qa,overflow:Ha}:null,retryLane:536870912,hydrationErrors:null},K=ti(18,null,null,0),K.stateNode=z,K.return=f,f.child=K,Ar=f,sn=null,K=!0):K=!1}K||Go(f)}if(z=f.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return W1(z)?f.lanes=32:f.lanes=536870912,null;Za(f)}return z=y.children,y=y.fallback,C?(Ls(),C=f.mode,z=eg({mode:"hidden",children:z},C),y=jo(y,C,m,null),z.return=f,y.return=f,z.sibling=y,f.child=z,C=f.child,C.memoizedState=s1(m),C.childLanes=o1(u,D,m),f.memoizedState=a1,y):(Fs(f),l1(f,z))}if(K=u.memoizedState,K!==null&&(z=K.dehydrated,z!==null)){if(k)f.flags&256?(Fs(f),f.flags&=-257,f=u1(u,f,m)):f.memoizedState!==null?(Ls(),f.child=u.child,f.flags|=128,f=null):(Ls(),C=y.fallback,z=f.mode,y=eg({mode:"visible",children:y.children},z),C=jo(C,z,m,null),C.flags|=2,y.return=f,C.return=f,y.sibling=C,f.child=y,ku(f,u.child,null,m),y=f.child,y.memoizedState=s1(m),y.childLanes=o1(u,D,m),f.memoizedState=a1,f=C);else if(Fs(f),W1(z)){if(D=z.nextSibling&&z.nextSibling.dataset,D)var lt=D.dgst;D=lt,y=Error(r(419)),y.stack="",y.digest=D,zf({value:y,source:null,stack:null}),f=u1(u,f,m)}else if(Vn||jf(u,f,m,!1),D=(m&u.childLanes)!==0,Vn||D){if(D=Ge,D!==null&&(y=m&-m,y=(y&42)!==0?1:G0(y),y=(y&(D.suspendedLanes|m))!==0?0:y,y!==0&&y!==K.retryLane))throw K.retryLane=y,gu(u,y),ai(D,u,y),T_;z.data==="$?"||k1(),f=u1(u,f,m)}else z.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=K.treeContext,sn=Gi(z.nextSibling),Ar=f,$e=!0,Wo=null,ha=!1,u!==null&&(xi[wi++]=qa,xi[wi++]=Ha,xi[wi++]=Uo,qa=u.id,Ha=u.overflow,Uo=f),f=l1(f,y.children),f.flags|=4096);return f}return C?(Ls(),C=y.fallback,z=f.mode,K=u.child,lt=K.sibling,y=Ga(K,{mode:"hidden",children:y.children}),y.subtreeFlags=K.subtreeFlags&65011712,lt!==null?C=Ga(lt,C):(C=jo(C,z,m,null),C.flags|=2),C.return=f,y.return=f,y.sibling=C,f.child=y,y=C,C=f.child,z=u.child.memoizedState,z===null?z=s1(m):(K=z.cachePool,K!==null?(lt=Rn._currentValue,K=K.parent!==lt?{parent:lt,pool:lt}:K):K=bN(),z={baseLanes:z.baseLanes|m,cachePool:K}),C.memoizedState=z,C.childLanes=o1(u,D,m),f.memoizedState=a1,y):(Fs(f),m=u.child,u=m.sibling,m=Ga(m,{mode:"visible",children:y.children}),m.return=f,m.sibling=null,u!==null&&(D=f.deletions,D===null?(f.deletions=[u],f.flags|=16):D.push(u)),f.child=m,f.memoizedState=null,m)}function l1(u,f){return f=eg({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function eg(u,f){return u=ti(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function u1(u,f,m){return ku(f,u.child,null,m),u=l1(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function D_(u,f,m){u.lanes|=f;var y=u.alternate;y!==null&&(y.lanes|=f),kx(u.return,f,m)}function c1(u,f,m,y,C){var k=u.memoizedState;k===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:C}:(k.isBackwards=f,k.rendering=null,k.renderingStartTime=0,k.last=y,k.tail=m,k.tailMode=C)}function M_(u,f,m){var y=f.pendingProps,C=y.revealOrder,k=y.tail;if(tr(u,f,y.children,m),y=Dn.current,(y&2)!==0)y=y&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)t:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&D_(u,m,f);else if(u.tag===19)D_(u,m,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break t;for(;u.sibling===null;){if(u.return===null||u.return===f)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}y&=1}switch(Y(Dn,y),C){case"forwards":for(m=f.child,C=null;m!==null;)u=m.alternate,u!==null&&Zm(u)===null&&(C=m),m=m.sibling;m=C,m===null?(C=f.child,f.child=null):(C=m.sibling,m.sibling=null),c1(f,!1,C,m,k);break;case"backwards":for(m=null,C=f.child,f.child=null;C!==null;){if(u=C.alternate,u!==null&&Zm(u)===null){f.child=C;break}u=C.sibling,C.sibling=m,m=C,C=u}c1(f,!0,m,null,k);break;case"together":c1(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Qa(u,f,m){if(u!==null&&(f.dependencies=u.dependencies),Vs|=f.lanes,(m&f.childLanes)===0)if(u!==null){if(jf(u,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(r(153));if(f.child!==null){for(u=f.child,m=Ga(u,u.pendingProps),f.child=m,m.return=f;u.sibling!==null;)u=u.sibling,m=m.sibling=Ga(u,u.pendingProps),m.return=f;m.sibling=null}return f.child}function f1(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&Mm(u)))}function JX(u,f,m){switch(f.tag){case 3:At(f,f.stateNode.containerInfo),_s(f,Rn,u.memoizedState.cache),Bf();break;case 27:case 5:kt(f);break;case 4:At(f,f.stateNode.containerInfo);break;case 10:_s(f,f.type,f.memoizedProps.value);break;case 13:var y=f.memoizedState;if(y!==null)return y.dehydrated!==null?(Fs(f),f.flags|=128,null):(m&f.child.childLanes)!==0?R_(u,f,m):(Fs(f),u=Qa(u,f,m),u!==null?u.sibling:null);Fs(f);break;case 19:var C=(u.flags&128)!==0;if(y=(m&f.childLanes)!==0,y||(jf(u,f,m,!1),y=(m&f.childLanes)!==0),C){if(y)return M_(u,f,m);f.flags|=128}if(C=f.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Y(Dn,Dn.current),y)break;return null;case 22:case 23:return f.lanes=0,I_(u,f,m);case 24:_s(f,Rn,u.memoizedState.cache)}return Qa(u,f,m)}function P_(u,f,m){if(u!==null)if(u.memoizedProps!==f.pendingProps)Vn=!0;else{if(!f1(u,m)&&(f.flags&128)===0)return Vn=!1,JX(u,f,m);Vn=(u.flags&131072)!==0}else Vn=!1,$e&&(f.flags&1048576)!==0&&hN(f,Dm,f.index);switch(f.lanes=0,f.tag){case 16:t:{u=f.pendingProps;var y=f.elementType,C=y._init;if(y=C(y._payload),f.type=y,typeof y=="function")xx(y)?(u=Yo(y,u),f.tag=1,f=N_(null,f,y,u,m)):(f.tag=0,f=i1(null,f,y,u,m));else{if(y!=null){if(C=y.$$typeof,C===$){f.tag=11,f=$_(null,f,y,u,m);break t}else if(C===O){f.tag=14,f=A_(null,f,y,u,m);break t}}throw f=B(y)||y,Error(r(306,f,""))}}return f;case 0:return i1(u,f,f.type,f.pendingProps,m);case 1:return y=f.type,C=Yo(y,f.pendingProps),N_(u,f,y,C,m);case 3:t:{if(At(f,f.stateNode.containerInfo),u===null)throw Error(r(387));y=f.pendingProps;var k=f.memoizedState;C=k.element,Dx(u,f),Xf(f,y,null,m);var D=f.memoizedState;if(y=D.cache,_s(f,Rn,y),y!==k.cache&&Ix(f,[Rn],m,!0),Hf(),y=D.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:D.cache},f.updateQueue.baseState=k,f.memoizedState=k,f.flags&256){f=__(u,f,y,m);break t}else if(y!==C){C=vi(Error(r(424)),f),zf(C),f=__(u,f,y,m);break t}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(sn=Gi(u.firstChild),Ar=f,$e=!0,Wo=null,ha=!0,m=p_(f,null,y,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Bf(),y===C){f=Qa(u,f,m);break t}tr(u,f,y,m)}f=f.child}return f;case 26:return tg(u,f),u===null?(m=zR(f.type,null,f.pendingProps,null))?f.memoizedState=m:$e||(m=f.type,u=f.pendingProps,y=mg(yt.current).createElement(m),y[dr]=f,y[zr]=u,nr(y,m,u),Un(y),f.stateNode=y):f.memoizedState=zR(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return kt(f),u===null&&$e&&(y=f.stateNode=FR(f.type,f.pendingProps,yt.current),Ar=f,ha=!0,C=sn,Hs(f.type)?(G1=C,sn=Gi(y.firstChild)):sn=C),tr(u,f,f.pendingProps.children,m),tg(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&$e&&((C=y=sn)&&(y=kK(y,f.type,f.pendingProps,ha),y!==null?(f.stateNode=y,Ar=f,sn=Gi(y.firstChild),ha=!1,C=!0):C=!1),C||Go(f)),kt(f),C=f.type,k=f.pendingProps,D=u!==null?u.memoizedProps:null,y=k.children,j1(C,k)?y=null:D!==null&&j1(C,D)&&(f.flags|=32),f.memoizedState!==null&&(C=zx(u,f,GX,null,null,m),gh._currentValue=C),tg(u,f),tr(u,f,y,m),f.child;case 6:return u===null&&$e&&((u=m=sn)&&(m=IK(m,f.pendingProps,ha),m!==null?(f.stateNode=m,Ar=f,sn=null,u=!0):u=!1),u||Go(f)),null;case 13:return R_(u,f,m);case 4:return At(f,f.stateNode.containerInfo),y=f.pendingProps,u===null?f.child=ku(f,null,y,m):tr(u,f,y,m),f.child;case 11:return $_(u,f,f.type,f.pendingProps,m);case 7:return tr(u,f,f.pendingProps,m),f.child;case 8:return tr(u,f,f.pendingProps.children,m),f.child;case 12:return tr(u,f,f.pendingProps.children,m),f.child;case 10:return y=f.pendingProps,_s(f,f.type,y.value),tr(u,f,y.children,m),f.child;case 9:return C=f.type._context,y=f.pendingProps.children,Ho(f),C=pr(C),y=y(C),f.flags|=1,tr(u,f,y,m),f.child;case 14:return A_(u,f,f.type,f.pendingProps,m);case 15:return k_(u,f,f.type,f.pendingProps,m);case 19:return M_(u,f,m);case 31:return y=f.pendingProps,m=f.mode,y={mode:y.mode,children:y.children},u===null?(m=eg(y,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=Ga(u.child,y),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return I_(u,f,m);case 24:return Ho(f),y=pr(Rn),u===null?(C=Nx(),C===null&&(C=Ge,k=Ex(),C.pooledCache=k,k.refCount++,k!==null&&(C.pooledCacheLanes|=m),C=k),f.memoizedState={parent:y,cache:C},Rx(f),_s(f,Rn,C)):((u.lanes&m)!==0&&(Dx(u,f),Xf(f,null,null,m),Hf()),C=u.memoizedState,k=f.memoizedState,C.parent!==y?(C={parent:y,cache:y},f.memoizedState=C,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=C),_s(f,Rn,y)):(y=k.cache,_s(f,Rn,y),y!==C.cache&&Ix(f,[Rn],m,!0))),tr(u,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Ja(u){u.flags|=4}function F_(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!GR(f)){if(f=Si.current,f!==null&&((ye&4194048)===ye?da!==null:(ye&62914560)!==ye&&(ye&536870912)===0||f!==da))throw Gf=_x,xN;u.flags|=8192}}function ng(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?mO():536870912,u.lanes|=f,Nu|=f)}function eh(u,f){if(!$e)switch(u.tailMode){case"hidden":f=u.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:y.sibling=null}}function rn(u){var f=u.alternate!==null&&u.alternate.child===u.child,m=0,y=0;if(f)for(var C=u.child;C!==null;)m|=C.lanes|C.childLanes,y|=C.subtreeFlags&65011712,y|=C.flags&65011712,C.return=u,C=C.sibling;else for(C=u.child;C!==null;)m|=C.lanes|C.childLanes,y|=C.subtreeFlags,y|=C.flags,C.return=u,C=C.sibling;return u.subtreeFlags|=y,u.childLanes=m,f}function tK(u,f,m){var y=f.pendingProps;switch(Tx(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(f),null;case 1:return rn(f),null;case 3:return m=f.stateNode,y=null,u!==null&&(y=u.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),Ka(Rn),mt(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(Lf(f)?Ja(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,mN())),rn(f),null;case 26:return m=f.memoizedState,u===null?(Ja(f),m!==null?(rn(f),F_(f,m)):(rn(f),f.flags&=-16777217)):m?m!==u.memoizedState?(Ja(f),rn(f),F_(f,m)):(rn(f),f.flags&=-16777217):(u.memoizedProps!==y&&Ja(f),rn(f),f.flags&=-16777217),null;case 27:It(f),m=yt.current;var C=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==y&&Ja(f);else{if(!y){if(f.stateNode===null)throw Error(r(166));return rn(f),null}u=ot.current,Lf(f)?dN(f):(u=FR(C,y,m),f.stateNode=u,Ja(f))}return rn(f),null;case 5:if(It(f),m=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==y&&Ja(f);else{if(!y){if(f.stateNode===null)throw Error(r(166));return rn(f),null}if(u=ot.current,Lf(f))dN(f);else{switch(C=mg(yt.current),u){case 1:u=C.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=C.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=C.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof y.is=="string"?C.createElement("select",{is:y.is}):C.createElement("select"),y.multiple?u.multiple=!0:y.size&&(u.size=y.size);break;default:u=typeof y.is=="string"?C.createElement(m,{is:y.is}):C.createElement(m)}}u[dr]=f,u[zr]=y;t:for(C=f.child;C!==null;){if(C.tag===5||C.tag===6)u.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===f)break t;for(;C.sibling===null;){if(C.return===null||C.return===f)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}f.stateNode=u;t:switch(nr(u,m,y),m){case"button":case"input":case"select":case"textarea":u=!!y.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Ja(f)}}return rn(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==y&&Ja(f);else{if(typeof y!="string"&&f.stateNode===null)throw Error(r(166));if(u=yt.current,Lf(f)){if(u=f.stateNode,m=f.memoizedProps,y=null,C=Ar,C!==null)switch(C.tag){case 27:case 5:y=C.memoizedProps}u[dr]=f,u=!!(u.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||OR(u.nodeValue,m)),u||Go(f)}else u=mg(u).createTextNode(y),u[dr]=f,f.stateNode=u}return rn(f),null;case 13:if(y=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(C=Lf(f),y!==null&&y.dehydrated!==null){if(u===null){if(!C)throw Error(r(318));if(C=f.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[dr]=f}else Bf(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;rn(f),C=!1}else C=mN(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=C),C=!0;if(!C)return f.flags&256?(Za(f),f):(Za(f),null)}if(Za(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=y!==null,u=u!==null&&u.memoizedState!==null,m){y=f.child,C=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(C=y.alternate.memoizedState.cachePool.pool);var k=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(k=y.memoizedState.cachePool.pool),k!==C&&(y.flags|=2048)}return m!==u&&m&&(f.child.flags|=8192),ng(f,f.updateQueue),rn(f),null;case 4:return mt(),u===null&&P1(f.stateNode.containerInfo),rn(f),null;case 10:return Ka(f.type),rn(f),null;case 19:if(H(Dn),C=f.memoizedState,C===null)return rn(f),null;if(y=(f.flags&128)!==0,k=C.rendering,k===null)if(y)eh(C,!1);else{if(on!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(k=Zm(u),k!==null){for(f.flags|=128,eh(C,!1),u=k.updateQueue,f.updateQueue=u,ng(f,u),f.subtreeFlags=0,u=m,m=f.child;m!==null;)fN(m,u),m=m.sibling;return Y(Dn,Dn.current&1|2),f.child}u=u.sibling}C.tail!==null&&Ht()>ag&&(f.flags|=128,y=!0,eh(C,!1),f.lanes=4194304)}else{if(!y)if(u=Zm(k),u!==null){if(f.flags|=128,y=!0,u=u.updateQueue,f.updateQueue=u,ng(f,u),eh(C,!0),C.tail===null&&C.tailMode==="hidden"&&!k.alternate&&!$e)return rn(f),null}else 2*Ht()-C.renderingStartTime>ag&&m!==536870912&&(f.flags|=128,y=!0,eh(C,!1),f.lanes=4194304);C.isBackwards?(k.sibling=f.child,f.child=k):(u=C.last,u!==null?u.sibling=k:f.child=k,C.last=k)}return C.tail!==null?(f=C.tail,C.rendering=f,C.tail=f.sibling,C.renderingStartTime=Ht(),f.sibling=null,u=Dn.current,Y(Dn,y?u&1|2:u&1),f):(rn(f),null);case 22:case 23:return Za(f),Lx(),y=f.memoizedState!==null,u!==null?u.memoizedState!==null!==y&&(f.flags|=8192):y&&(f.flags|=8192),y?(m&536870912)!==0&&(f.flags&128)===0&&(rn(f),f.subtreeFlags&6&&(f.flags|=8192)):rn(f),m=f.updateQueue,m!==null&&ng(f,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),y=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==m&&(f.flags|=2048),u!==null&&H(Xo),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),Ka(Rn),rn(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function eK(u,f){switch(Tx(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return Ka(Rn),mt(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return It(f),null;case 13:if(Za(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Bf()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return H(Dn),null;case 4:return mt(),null;case 10:return Ka(f.type),null;case 22:case 23:return Za(f),Lx(),u!==null&&H(Xo),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return Ka(Rn),null;case 25:return null;default:return null}}function L_(u,f){switch(Tx(f),f.tag){case 3:Ka(Rn),mt();break;case 26:case 27:case 5:It(f);break;case 4:mt();break;case 13:Za(f);break;case 19:H(Dn);break;case 10:Ka(f.type);break;case 22:case 23:Za(f),Lx(),u!==null&&H(Xo);break;case 24:Ka(Rn)}}function nh(u,f){try{var m=f.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var C=y.next;m=C;do{if((m.tag&u)===u){y=void 0;var k=m.create,D=m.inst;y=k(),D.destroy=y}m=m.next}while(m!==C)}}catch(z){Be(f,f.return,z)}}function Bs(u,f,m){try{var y=f.updateQueue,C=y!==null?y.lastEffect:null;if(C!==null){var k=C.next;y=k;do{if((y.tag&u)===u){var D=y.inst,z=D.destroy;if(z!==void 0){D.destroy=void 0,C=f;var K=m,lt=z;try{lt()}catch(bt){Be(C,K,bt)}}}y=y.next}while(y!==k)}}catch(bt){Be(f,f.return,bt)}}function B_(u){var f=u.updateQueue;if(f!==null){var m=u.stateNode;try{AN(f,m)}catch(y){Be(u,u.return,y)}}}function z_(u,f,m){m.props=Yo(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(y){Be(u,f,y)}}function rh(u,f){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var y=u.stateNode;break;case 30:y=u.stateNode;break;default:y=u.stateNode}typeof m=="function"?u.refCleanup=m(y):m.current=y}}catch(C){Be(u,f,C)}}function pa(u,f){var m=u.ref,y=u.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(C){Be(u,f,C)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(C){Be(u,f,C)}else m.current=null}function j_(u){var f=u.type,m=u.memoizedProps,y=u.stateNode;try{t:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break t;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(C){Be(u,u.return,C)}}function h1(u,f,m){try{var y=u.stateNode;SK(y,u.type,m,f),y[zr]=f}catch(C){Be(u,u.return,C)}}function U_(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Hs(u.type)||u.tag===4}function d1(u){t:for(;;){for(;u.sibling===null;){if(u.return===null||U_(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Hs(u.type)||u.flags&2||u.child===null||u.tag===4)continue t;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function p1(u,f,m){var y=u.tag;if(y===5||y===6)u=u.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(u),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=pg));else if(y!==4&&(y===27&&Hs(u.type)&&(m=u.stateNode,f=null),u=u.child,u!==null))for(p1(u,f,m),u=u.sibling;u!==null;)p1(u,f,m),u=u.sibling}function rg(u,f,m){var y=u.tag;if(y===5||y===6)u=u.stateNode,f?m.insertBefore(u,f):m.appendChild(u);else if(y!==4&&(y===27&&Hs(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(rg(u,f,m),u=u.sibling;u!==null;)rg(u,f,m),u=u.sibling}function V_(u){var f=u.stateNode,m=u.memoizedProps;try{for(var y=u.type,C=f.attributes;C.length;)f.removeAttributeNode(C[0]);nr(f,y,m),f[dr]=u,f[zr]=m}catch(k){Be(u,u.return,k)}}var ts=!1,yn=!1,m1=!1,W_=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function nK(u,f){if(u=u.containerInfo,B1=wg,u=eN(u),dx(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else t:{m=(m=u.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var C=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{m.nodeType,k.nodeType}catch{m=null;break t}var D=0,z=-1,K=-1,lt=0,bt=0,wt=u,ut=null;e:for(;;){for(var ft;wt!==m||C!==0&&wt.nodeType!==3||(z=D+C),wt!==k||y!==0&&wt.nodeType!==3||(K=D+y),wt.nodeType===3&&(D+=wt.nodeValue.length),(ft=wt.firstChild)!==null;)ut=wt,wt=ft;for(;;){if(wt===u)break e;if(ut===m&&++lt===C&&(z=D),ut===k&&++bt===y&&(K=D),(ft=wt.nextSibling)!==null)break;wt=ut,ut=wt.parentNode}wt=ft}m=z===-1||K===-1?null:{start:z,end:K}}else m=null}m=m||{start:0,end:0}}else m=null;for(z1={focusedElem:u,selectionRange:m},wg=!1,Wn=f;Wn!==null;)if(f=Wn,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,Wn=u;else for(;Wn!==null;){switch(f=Wn,k=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&k!==null){u=void 0,m=f,C=k.memoizedProps,k=k.memoizedState,y=m.stateNode;try{var Qt=Yo(m.type,C,m.elementType===m.type);u=y.getSnapshotBeforeUpdate(Qt,k),y.__reactInternalSnapshotBeforeUpdate=u}catch(Gt){Be(m,m.return,Gt)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,m=u.nodeType,m===9)V1(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":V1(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=f.sibling,u!==null){u.return=f.return,Wn=u;break}Wn=f.return}}function G_(u,f,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:zs(u,m),y&4&&nh(5,m);break;case 1:if(zs(u,m),y&4)if(u=m.stateNode,f===null)try{u.componentDidMount()}catch(D){Be(m,m.return,D)}else{var C=Yo(m.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(C,f,u.__reactInternalSnapshotBeforeUpdate)}catch(D){Be(m,m.return,D)}}y&64&&B_(m),y&512&&rh(m,m.return);break;case 3:if(zs(u,m),y&64&&(u=m.updateQueue,u!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{AN(u,f)}catch(D){Be(m,m.return,D)}}break;case 27:f===null&&y&4&&V_(m);case 26:case 5:zs(u,m),f===null&&y&4&&j_(m),y&512&&rh(m,m.return);break;case 12:zs(u,m);break;case 13:zs(u,m),y&4&&X_(u,m),y&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=fK.bind(null,m),EK(u,m))));break;case 22:if(y=m.memoizedState!==null||ts,!y){f=f!==null&&f.memoizedState!==null||yn,C=ts;var k=yn;ts=y,(yn=f)&&!k?js(u,m,(m.subtreeFlags&8772)!==0):zs(u,m),ts=C,yn=k}break;case 30:break;default:zs(u,m)}}function q_(u){var f=u.alternate;f!==null&&(u.alternate=null,q_(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&X0(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Qe=null,Vr=!1;function es(u,f,m){for(m=m.child;m!==null;)H_(u,f,m),m=m.sibling}function H_(u,f,m){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Br,m)}catch{}switch(m.tag){case 26:yn||pa(m,f),es(u,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:yn||pa(m,f);var y=Qe,C=Vr;Hs(m.type)&&(Qe=m.stateNode,Vr=!1),es(u,f,m),hh(m.stateNode),Qe=y,Vr=C;break;case 5:yn||pa(m,f);case 6:if(y=Qe,C=Vr,Qe=null,es(u,f,m),Qe=y,Vr=C,Qe!==null)if(Vr)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(m.stateNode)}catch(k){Be(m,f,k)}else try{Qe.removeChild(m.stateNode)}catch(k){Be(m,f,k)}break;case 18:Qe!==null&&(Vr?(u=Qe,MR(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),xh(u)):MR(Qe,m.stateNode));break;case 4:y=Qe,C=Vr,Qe=m.stateNode.containerInfo,Vr=!0,es(u,f,m),Qe=y,Vr=C;break;case 0:case 11:case 14:case 15:yn||Bs(2,m,f),yn||Bs(4,m,f),es(u,f,m);break;case 1:yn||(pa(m,f),y=m.stateNode,typeof y.componentWillUnmount=="function"&&z_(m,f,y)),es(u,f,m);break;case 21:es(u,f,m);break;case 22:yn=(y=yn)||m.memoizedState!==null,es(u,f,m),yn=y;break;default:es(u,f,m)}}function X_(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{xh(u)}catch(m){Be(f,f.return,m)}}function rK(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new W_),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new W_),f;default:throw Error(r(435,u.tag))}}function g1(u,f){var m=rK(u);f.forEach(function(y){var C=hK.bind(null,u,y);m.has(y)||(m.add(y),y.then(C,C))})}function ei(u,f){var m=f.deletions;if(m!==null)for(var y=0;y<m.length;y++){var C=m[y],k=u,D=f,z=D;t:for(;z!==null;){switch(z.tag){case 27:if(Hs(z.type)){Qe=z.stateNode,Vr=!1;break t}break;case 5:Qe=z.stateNode,Vr=!1;break t;case 3:case 4:Qe=z.stateNode.containerInfo,Vr=!0;break t}z=z.return}if(Qe===null)throw Error(r(160));H_(k,D,C),Qe=null,Vr=!1,k=C.alternate,k!==null&&(k.return=null),C.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)K_(f,u),f=f.sibling}var Wi=null;function K_(u,f){var m=u.alternate,y=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:ei(f,u),ni(u),y&4&&(Bs(3,u,u.return),nh(3,u),Bs(5,u,u.return));break;case 1:ei(f,u),ni(u),y&512&&(yn||m===null||pa(m,m.return)),y&64&&ts&&(u=u.updateQueue,u!==null&&(y=u.callbacks,y!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var C=Wi;if(ei(f,u),ni(u),y&512&&(yn||m===null||pa(m,m.return)),y&4){var k=m!==null?m.memoizedState:null;if(y=u.memoizedState,m===null)if(y===null)if(u.stateNode===null){t:{y=u.type,m=u.memoizedProps,C=C.ownerDocument||C;e:switch(y){case"title":k=C.getElementsByTagName("title")[0],(!k||k[kf]||k[dr]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=C.createElement(y),C.head.insertBefore(k,C.querySelector("head > title"))),nr(k,y,m),k[dr]=u,Un(k),y=k;break t;case"link":var D=VR("link","href",C).get(y+(m.href||""));if(D){for(var z=0;z<D.length;z++)if(k=D[z],k.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&k.getAttribute("rel")===(m.rel==null?null:m.rel)&&k.getAttribute("title")===(m.title==null?null:m.title)&&k.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){D.splice(z,1);break e}}k=C.createElement(y),nr(k,y,m),C.head.appendChild(k);break;case"meta":if(D=VR("meta","content",C).get(y+(m.content||""))){for(z=0;z<D.length;z++)if(k=D[z],k.getAttribute("content")===(m.content==null?null:""+m.content)&&k.getAttribute("name")===(m.name==null?null:m.name)&&k.getAttribute("property")===(m.property==null?null:m.property)&&k.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&k.getAttribute("charset")===(m.charSet==null?null:m.charSet)){D.splice(z,1);break e}}k=C.createElement(y),nr(k,y,m),C.head.appendChild(k);break;default:throw Error(r(468,y))}k[dr]=u,Un(k),y=k}u.stateNode=y}else WR(C,u.type,u.stateNode);else u.stateNode=UR(C,y,u.memoizedProps);else k!==y?(k===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):k.count--,y===null?WR(C,u.type,u.stateNode):UR(C,y,u.memoizedProps)):y===null&&u.stateNode!==null&&h1(u,u.memoizedProps,m.memoizedProps)}break;case 27:ei(f,u),ni(u),y&512&&(yn||m===null||pa(m,m.return)),m!==null&&y&4&&h1(u,u.memoizedProps,m.memoizedProps);break;case 5:if(ei(f,u),ni(u),y&512&&(yn||m===null||pa(m,m.return)),u.flags&32){C=u.stateNode;try{uu(C,"")}catch(ft){Be(u,u.return,ft)}}y&4&&u.stateNode!=null&&(C=u.memoizedProps,h1(u,C,m!==null?m.memoizedProps:C)),y&1024&&(m1=!0);break;case 6:if(ei(f,u),ni(u),y&4){if(u.stateNode===null)throw Error(r(162));y=u.memoizedProps,m=u.stateNode;try{m.nodeValue=y}catch(ft){Be(u,u.return,ft)}}break;case 3:if(vg=null,C=Wi,Wi=gg(f.containerInfo),ei(f,u),Wi=C,ni(u),y&4&&m!==null&&m.memoizedState.isDehydrated)try{xh(f.containerInfo)}catch(ft){Be(u,u.return,ft)}m1&&(m1=!1,Y_(u));break;case 4:y=Wi,Wi=gg(u.stateNode.containerInfo),ei(f,u),ni(u),Wi=y;break;case 12:ei(f,u),ni(u);break;case 13:ei(f,u),ni(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(S1=Ht()),y&4&&(y=u.updateQueue,y!==null&&(u.updateQueue=null,g1(u,y)));break;case 22:C=u.memoizedState!==null;var K=m!==null&&m.memoizedState!==null,lt=ts,bt=yn;if(ts=lt||C,yn=bt||K,ei(f,u),yn=bt,ts=lt,ni(u),y&8192)t:for(f=u.stateNode,f._visibility=C?f._visibility&-2:f._visibility|1,C&&(m===null||K||ts||yn||Zo(u)),m=null,f=u;;){if(f.tag===5||f.tag===26){if(m===null){K=m=f;try{if(k=K.stateNode,C)D=k.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{z=K.stateNode;var wt=K.memoizedProps.style,ut=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;z.style.display=ut==null||typeof ut=="boolean"?"":(""+ut).trim()}}catch(ft){Be(K,K.return,ft)}}}else if(f.tag===6){if(m===null){K=f;try{K.stateNode.nodeValue=C?"":K.memoizedProps}catch(ft){Be(K,K.return,ft)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break t;for(;f.sibling===null;){if(f.return===null||f.return===u)break t;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}y&4&&(y=u.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,g1(u,m))));break;case 19:ei(f,u),ni(u),y&4&&(y=u.updateQueue,y!==null&&(u.updateQueue=null,g1(u,y)));break;case 30:break;case 21:break;default:ei(f,u),ni(u)}}function ni(u){var f=u.flags;if(f&2){try{for(var m,y=u.return;y!==null;){if(U_(y)){m=y;break}y=y.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var C=m.stateNode,k=d1(u);rg(u,k,C);break;case 5:var D=m.stateNode;m.flags&32&&(uu(D,""),m.flags&=-33);var z=d1(u);rg(u,z,D);break;case 3:case 4:var K=m.stateNode.containerInfo,lt=d1(u);p1(u,lt,K);break;default:throw Error(r(161))}}catch(bt){Be(u,u.return,bt)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function Y_(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;Y_(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function zs(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)G_(u,f.alternate,f),f=f.sibling}function Zo(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Bs(4,f,f.return),Zo(f);break;case 1:pa(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&z_(f,f.return,m),Zo(f);break;case 27:hh(f.stateNode);case 26:case 5:pa(f,f.return),Zo(f);break;case 22:f.memoizedState===null&&Zo(f);break;case 30:Zo(f);break;default:Zo(f)}u=u.sibling}}function js(u,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var y=f.alternate,C=u,k=f,D=k.flags;switch(k.tag){case 0:case 11:case 15:js(C,k,m),nh(4,k);break;case 1:if(js(C,k,m),y=k,C=y.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(lt){Be(y,y.return,lt)}if(y=k,C=y.updateQueue,C!==null){var z=y.stateNode;try{var K=C.shared.hiddenCallbacks;if(K!==null)for(C.shared.hiddenCallbacks=null,C=0;C<K.length;C++)$N(K[C],z)}catch(lt){Be(y,y.return,lt)}}m&&D&64&&B_(k),rh(k,k.return);break;case 27:V_(k);case 26:case 5:js(C,k,m),m&&y===null&&D&4&&j_(k),rh(k,k.return);break;case 12:js(C,k,m);break;case 13:js(C,k,m),m&&D&4&&X_(C,k);break;case 22:k.memoizedState===null&&js(C,k,m),rh(k,k.return);break;case 30:break;default:js(C,k,m)}f=f.sibling}}function y1(u,f){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&Uf(m))}function v1(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Uf(u))}function ma(u,f,m,y){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Z_(u,f,m,y),f=f.sibling}function Z_(u,f,m,y){var C=f.flags;switch(f.tag){case 0:case 11:case 15:ma(u,f,m,y),C&2048&&nh(9,f);break;case 1:ma(u,f,m,y);break;case 3:ma(u,f,m,y),C&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Uf(u)));break;case 12:if(C&2048){ma(u,f,m,y),u=f.stateNode;try{var k=f.memoizedProps,D=k.id,z=k.onPostCommit;typeof z=="function"&&z(D,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(K){Be(f,f.return,K)}}else ma(u,f,m,y);break;case 13:ma(u,f,m,y);break;case 23:break;case 22:k=f.stateNode,D=f.alternate,f.memoizedState!==null?k._visibility&2?ma(u,f,m,y):ih(u,f):k._visibility&2?ma(u,f,m,y):(k._visibility|=2,Iu(u,f,m,y,(f.subtreeFlags&10256)!==0)),C&2048&&y1(D,f);break;case 24:ma(u,f,m,y),C&2048&&v1(f.alternate,f);break;default:ma(u,f,m,y)}}function Iu(u,f,m,y,C){for(C=C&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var k=u,D=f,z=m,K=y,lt=D.flags;switch(D.tag){case 0:case 11:case 15:Iu(k,D,z,K,C),nh(8,D);break;case 23:break;case 22:var bt=D.stateNode;D.memoizedState!==null?bt._visibility&2?Iu(k,D,z,K,C):ih(k,D):(bt._visibility|=2,Iu(k,D,z,K,C)),C&&lt&2048&&y1(D.alternate,D);break;case 24:Iu(k,D,z,K,C),C&&lt&2048&&v1(D.alternate,D);break;default:Iu(k,D,z,K,C)}f=f.sibling}}function ih(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=u,y=f,C=y.flags;switch(y.tag){case 22:ih(m,y),C&2048&&y1(y.alternate,y);break;case 24:ih(m,y),C&2048&&v1(y.alternate,y);break;default:ih(m,y)}f=f.sibling}}var ah=8192;function Eu(u){if(u.subtreeFlags&ah)for(u=u.child;u!==null;)Q_(u),u=u.sibling}function Q_(u){switch(u.tag){case 26:Eu(u),u.flags&ah&&u.memoizedState!==null&&UK(Wi,u.memoizedState,u.memoizedProps);break;case 5:Eu(u);break;case 3:case 4:var f=Wi;Wi=gg(u.stateNode.containerInfo),Eu(u),Wi=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=ah,ah=16777216,Eu(u),ah=f):Eu(u));break;default:Eu(u)}}function J_(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function sh(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var y=f[m];Wn=y,eR(y,u)}J_(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)tR(u),u=u.sibling}function tR(u){switch(u.tag){case 0:case 11:case 15:sh(u),u.flags&2048&&Bs(9,u,u.return);break;case 3:sh(u);break;case 12:sh(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,ig(u)):sh(u);break;default:sh(u)}}function ig(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var y=f[m];Wn=y,eR(y,u)}J_(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Bs(8,f,f.return),ig(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,ig(f));break;default:ig(f)}u=u.sibling}}function eR(u,f){for(;Wn!==null;){var m=Wn;switch(m.tag){case 0:case 11:case 15:Bs(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Uf(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,Wn=y;else t:for(m=u;Wn!==null;){y=Wn;var C=y.sibling,k=y.return;if(q_(y),y===m){Wn=null;break t}if(C!==null){C.return=k,Wn=C;break t}Wn=k}}}var iK={getCacheForType:function(u){var f=pr(Rn),m=f.data.get(u);return m===void 0&&(m=u(),f.data.set(u,m)),m}},aK=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Ge=null,fe=null,ye=0,Ne=0,ri=null,Us=!1,Ou=!1,b1=!1,ns=0,on=0,Vs=0,Qo=0,x1=0,Ci=0,Nu=0,oh=null,Wr=null,w1=!1,S1=0,ag=1/0,sg=null,Ws=null,er=0,Gs=null,_u=null,Ru=0,C1=0,T1=null,nR=null,lh=0,$1=null;function ii(){if((Oe&2)!==0&&ye!==0)return ye&-ye;if(P.T!==null){var u=xu;return u!==0?u:_1()}return vO()}function rR(){Ci===0&&(Ci=(ye&536870912)===0||$e?pO():536870912);var u=Si.current;return u!==null&&(u.flags|=32),Ci}function ai(u,f,m){(u===Ge&&(Ne===2||Ne===9)||u.cancelPendingCommit!==null)&&(Du(u,0),qs(u,ye,Ci,!1)),Af(u,m),((Oe&2)===0||u!==Ge)&&(u===Ge&&((Oe&2)===0&&(Qo|=m),on===4&&qs(u,ye,Ci,!1)),ga(u))}function iR(u,f,m){if((Oe&6)!==0)throw Error(r(327));var y=!m&&(f&124)===0&&(f&u.expiredLanes)===0||$f(u,f),C=y?lK(u,f):I1(u,f,!0),k=y;do{if(C===0){Ou&&!y&&qs(u,f,0,!1);break}else{if(m=u.current.alternate,k&&!sK(m)){C=I1(u,f,!1),k=!1;continue}if(C===2){if(k=f,u.errorRecoveryDisabledLanes&k)var D=0;else D=u.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){f=D;t:{var z=u;C=oh;var K=z.current.memoizedState.isDehydrated;if(K&&(Du(z,D).flags|=256),D=I1(z,D,!1),D!==2){if(b1&&!K){z.errorRecoveryDisabledLanes|=k,Qo|=k,C=4;break t}k=Wr,Wr=C,k!==null&&(Wr===null?Wr=k:Wr.push.apply(Wr,k))}C=D}if(k=!1,C!==2)continue}}if(C===1){Du(u,0),qs(u,f,0,!0);break}t:{switch(y=u,k=C,k){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:qs(y,f,Ci,!Us);break t;case 2:Wr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(C=S1+300-Ht(),10<C)){if(qs(y,f,Ci,!Us),ym(y,0,!0)!==0)break t;y.timeoutHandle=RR(aR.bind(null,y,m,Wr,sg,w1,f,Ci,Qo,Nu,Us,k,2,-0,0),C);break t}aR(y,m,Wr,sg,w1,f,Ci,Qo,Nu,Us,k,0,-0,0)}}break}while(!0);ga(u)}function aR(u,f,m,y,C,k,D,z,K,lt,bt,wt,ut,ft){if(u.timeoutHandle=-1,wt=f.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(mh={stylesheets:null,count:0,unsuspend:jK},Q_(f),wt=VK(),wt!==null)){u.cancelPendingCommit=wt(hR.bind(null,u,f,k,m,y,C,D,z,K,bt,1,ut,ft)),qs(u,k,D,!lt);return}hR(u,f,k,m,y,C,D,z,K)}function sK(u){for(var f=u;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var C=m[y],k=C.getSnapshot;C=C.value;try{if(!Jr(k(),C))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function qs(u,f,m,y){f&=~x1,f&=~Qo,u.suspendedLanes|=f,u.pingedLanes&=~f,y&&(u.warmLanes|=f),y=u.expirationTimes;for(var C=f;0<C;){var k=31-_n(C),D=1<<k;y[k]=-1,C&=~D}m!==0&&gO(u,m,f)}function og(){return(Oe&6)===0?(uh(0),!1):!0}function A1(){if(fe!==null){if(Ne===0)var u=fe.return;else u=fe,Xa=qo=null,Vx(u),Au=null,Jf=0,u=fe;for(;u!==null;)L_(u.alternate,u),u=u.return;fe=null}}function Du(u,f){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,TK(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),A1(),Ge=u,fe=m=Ga(u.current,null),ye=f,Ne=0,ri=null,Us=!1,Ou=$f(u,f),b1=!1,Nu=Ci=x1=Qo=Vs=on=0,Wr=oh=null,w1=!1,(f&8)!==0&&(f|=f&32);var y=u.entangledLanes;if(y!==0)for(u=u.entanglements,y&=f;0<y;){var C=31-_n(y),k=1<<C;f|=u[C],y&=~k}return ns=f,Em(),m}function sR(u,f){oe=null,P.H=Xm,f===Wf||f===Lm?(f=CN(),Ne=3):f===xN?(f=CN(),Ne=4):Ne=f===T_?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,ri=f,fe===null&&(on=1,Jm(u,vi(f,u.current)))}function oR(){var u=P.H;return P.H=Xm,u===null?Xm:u}function lR(){var u=P.A;return P.A=iK,u}function k1(){on=4,Us||(ye&4194048)!==ye&&Si.current!==null||(Ou=!0),(Vs&134217727)===0&&(Qo&134217727)===0||Ge===null||qs(Ge,ye,Ci,!1)}function I1(u,f,m){var y=Oe;Oe|=2;var C=oR(),k=lR();(Ge!==u||ye!==f)&&(sg=null,Du(u,f)),f=!1;var D=on;t:do try{if(Ne!==0&&fe!==null){var z=fe,K=ri;switch(Ne){case 8:A1(),D=6;break t;case 3:case 2:case 9:case 6:Si.current===null&&(f=!0);var lt=Ne;if(Ne=0,ri=null,Mu(u,z,K,lt),m&&Ou){D=0;break t}break;default:lt=Ne,Ne=0,ri=null,Mu(u,z,K,lt)}}oK(),D=on;break}catch(bt){sR(u,bt)}while(!0);return f&&u.shellSuspendCounter++,Xa=qo=null,Oe=y,P.H=C,P.A=k,fe===null&&(Ge=null,ye=0,Em()),D}function oK(){for(;fe!==null;)uR(fe)}function lK(u,f){var m=Oe;Oe|=2;var y=oR(),C=lR();Ge!==u||ye!==f?(sg=null,ag=Ht()+500,Du(u,f)):Ou=$f(u,f);t:do try{if(Ne!==0&&fe!==null){f=fe;var k=ri;e:switch(Ne){case 1:Ne=0,ri=null,Mu(u,f,k,1);break;case 2:case 9:if(wN(k)){Ne=0,ri=null,cR(f);break}f=function(){Ne!==2&&Ne!==9||Ge!==u||(Ne=7),ga(u)},k.then(f,f);break t;case 3:Ne=7;break t;case 4:Ne=5;break t;case 7:wN(k)?(Ne=0,ri=null,cR(f)):(Ne=0,ri=null,Mu(u,f,k,7));break;case 5:var D=null;switch(fe.tag){case 26:D=fe.memoizedState;case 5:case 27:var z=fe;if(!D||GR(D)){Ne=0,ri=null;var K=z.sibling;if(K!==null)fe=K;else{var lt=z.return;lt!==null?(fe=lt,lg(lt)):fe=null}break e}}Ne=0,ri=null,Mu(u,f,k,5);break;case 6:Ne=0,ri=null,Mu(u,f,k,6);break;case 8:A1(),on=6;break t;default:throw Error(r(462))}}uK();break}catch(bt){sR(u,bt)}while(!0);return Xa=qo=null,P.H=y,P.A=C,Oe=m,fe!==null?0:(Ge=null,ye=0,Em(),on)}function uK(){for(;fe!==null&&!Zt();)uR(fe)}function uR(u){var f=P_(u.alternate,u,ns);u.memoizedProps=u.pendingProps,f===null?lg(u):fe=f}function cR(u){var f=u,m=f.alternate;switch(f.tag){case 15:case 0:f=O_(m,f,f.pendingProps,f.type,void 0,ye);break;case 11:f=O_(m,f,f.pendingProps,f.type.render,f.ref,ye);break;case 5:Vx(f);default:L_(m,f),f=fe=fN(f,ns),f=P_(m,f,ns)}u.memoizedProps=u.pendingProps,f===null?lg(u):fe=f}function Mu(u,f,m,y){Xa=qo=null,Vx(f),Au=null,Jf=0;var C=f.return;try{if(QX(u,C,f,m,ye)){on=1,Jm(u,vi(m,u.current)),fe=null;return}}catch(k){if(C!==null)throw fe=C,k;on=1,Jm(u,vi(m,u.current)),fe=null;return}f.flags&32768?($e||y===1?u=!0:Ou||(ye&536870912)!==0?u=!1:(Us=u=!0,(y===2||y===9||y===3||y===6)&&(y=Si.current,y!==null&&y.tag===13&&(y.flags|=16384))),fR(f,u)):lg(f)}function lg(u){var f=u;do{if((f.flags&32768)!==0){fR(f,Us);return}u=f.return;var m=tK(f.alternate,f,ns);if(m!==null){fe=m;return}if(f=f.sibling,f!==null){fe=f;return}fe=f=u}while(f!==null);on===0&&(on=5)}function fR(u,f){do{var m=eK(u.alternate,u);if(m!==null){m.flags&=32767,fe=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(u=u.sibling,u!==null)){fe=u;return}fe=u=m}while(u!==null);on=6,fe=null}function hR(u,f,m,y,C,k,D,z,K){u.cancelPendingCommit=null;do ug();while(er!==0);if((Oe&6)!==0)throw Error(r(327));if(f!==null){if(f===u.current)throw Error(r(177));if(k=f.lanes|f.childLanes,k|=vx,j8(u,m,k,D,z,K),u===Ge&&(fe=Ge=null,ye=0),_u=f,Gs=u,Ru=m,C1=k,T1=C,nR=y,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,dK(mn,function(){return yR(),null})):(u.callbackNode=null,u.callbackPriority=0),y=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||y){y=P.T,P.T=null,C=U.p,U.p=2,D=Oe,Oe|=4;try{nK(u,f,m)}finally{Oe=D,U.p=C,P.T=y}}er=1,dR(),pR(),mR()}}function dR(){if(er===1){er=0;var u=Gs,f=_u,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=P.T,P.T=null;var y=U.p;U.p=2;var C=Oe;Oe|=4;try{K_(f,u);var k=z1,D=eN(u.containerInfo),z=k.focusedElem,K=k.selectionRange;if(D!==z&&z&&z.ownerDocument&&tN(z.ownerDocument.documentElement,z)){if(K!==null&&dx(z)){var lt=K.start,bt=K.end;if(bt===void 0&&(bt=lt),"selectionStart"in z)z.selectionStart=lt,z.selectionEnd=Math.min(bt,z.value.length);else{var wt=z.ownerDocument||document,ut=wt&&wt.defaultView||window;if(ut.getSelection){var ft=ut.getSelection(),Qt=z.textContent.length,Gt=Math.min(K.start,Qt),Me=K.end===void 0?Gt:Math.min(K.end,Qt);!ft.extend&&Gt>Me&&(D=Me,Me=Gt,Gt=D);var it=JO(z,Gt),J=JO(z,Me);if(it&&J&&(ft.rangeCount!==1||ft.anchorNode!==it.node||ft.anchorOffset!==it.offset||ft.focusNode!==J.node||ft.focusOffset!==J.offset)){var at=wt.createRange();at.setStart(it.node,it.offset),ft.removeAllRanges(),Gt>Me?(ft.addRange(at),ft.extend(J.node,J.offset)):(at.setEnd(J.node,J.offset),ft.addRange(at))}}}}for(wt=[],ft=z;ft=ft.parentNode;)ft.nodeType===1&&wt.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<wt.length;z++){var xt=wt[z];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}wg=!!B1,z1=B1=null}finally{Oe=C,U.p=y,P.T=m}}u.current=f,er=2}}function pR(){if(er===2){er=0;var u=Gs,f=_u,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=P.T,P.T=null;var y=U.p;U.p=2;var C=Oe;Oe|=4;try{G_(u,f.alternate,f)}finally{Oe=C,U.p=y,P.T=m}}er=3}}function mR(){if(er===4||er===3){er=0,Wt();var u=Gs,f=_u,m=Ru,y=nR;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?er=5:(er=0,_u=Gs=null,gR(u,u.pendingLanes));var C=u.pendingLanes;if(C===0&&(Ws=null),q0(m),f=f.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Br,f,void 0,(f.current.flags&128)===128)}catch{}if(y!==null){f=P.T,C=U.p,U.p=2,P.T=null;try{for(var k=u.onRecoverableError,D=0;D<y.length;D++){var z=y[D];k(z.value,{componentStack:z.stack})}}finally{P.T=f,U.p=C}}(Ru&3)!==0&&ug(),ga(u),C=u.pendingLanes,(m&4194090)!==0&&(C&42)!==0?u===$1?lh++:(lh=0,$1=u):lh=0,uh(0)}}function gR(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Uf(f)))}function ug(u){return dR(),pR(),mR(),yR()}function yR(){if(er!==5)return!1;var u=Gs,f=C1;C1=0;var m=q0(Ru),y=P.T,C=U.p;try{U.p=32>m?32:m,P.T=null,m=T1,T1=null;var k=Gs,D=Ru;if(er=0,_u=Gs=null,Ru=0,(Oe&6)!==0)throw Error(r(331));var z=Oe;if(Oe|=4,tR(k.current),Z_(k,k.current,D,m),Oe=z,uh(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Br,k)}catch{}return!0}finally{U.p=C,P.T=y,gR(u,f)}}function vR(u,f,m){f=vi(m,f),f=r1(u.stateNode,f,2),u=Ms(u,f,2),u!==null&&(Af(u,2),ga(u))}function Be(u,f,m){if(u.tag===3)vR(u,u,m);else for(;f!==null;){if(f.tag===3){vR(f,u,m);break}else if(f.tag===1){var y=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ws===null||!Ws.has(y))){u=vi(m,u),m=S_(2),y=Ms(f,m,2),y!==null&&(C_(m,y,f,u),Af(y,2),ga(y));break}}f=f.return}}function E1(u,f,m){var y=u.pingCache;if(y===null){y=u.pingCache=new aK;var C=new Set;y.set(f,C)}else C=y.get(f),C===void 0&&(C=new Set,y.set(f,C));C.has(m)||(b1=!0,C.add(m),u=cK.bind(null,u,f,m),f.then(u,u))}function cK(u,f,m){var y=u.pingCache;y!==null&&y.delete(f),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,Ge===u&&(ye&m)===m&&(on===4||on===3&&(ye&62914560)===ye&&300>Ht()-S1?(Oe&2)===0&&Du(u,0):x1|=m,Nu===ye&&(Nu=0)),ga(u)}function bR(u,f){f===0&&(f=mO()),u=gu(u,f),u!==null&&(Af(u,f),ga(u))}function fK(u){var f=u.memoizedState,m=0;f!==null&&(m=f.retryLane),bR(u,m)}function hK(u,f){var m=0;switch(u.tag){case 13:var y=u.stateNode,C=u.memoizedState;C!==null&&(m=C.retryLane);break;case 19:y=u.stateNode;break;case 22:y=u.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(f),bR(u,m)}function dK(u,f){return Vt(u,f)}var cg=null,Pu=null,O1=!1,fg=!1,N1=!1,Jo=0;function ga(u){u!==Pu&&u.next===null&&(Pu===null?cg=Pu=u:Pu=Pu.next=u),fg=!0,O1||(O1=!0,mK())}function uh(u,f){if(!N1&&fg){N1=!0;do for(var m=!1,y=cg;y!==null;){if(u!==0){var C=y.pendingLanes;if(C===0)var k=0;else{var D=y.suspendedLanes,z=y.pingedLanes;k=(1<<31-_n(42|u)+1)-1,k&=C&~(D&~z),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(m=!0,CR(y,k))}else k=ye,k=ym(y,y===Ge?k:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(k&3)===0||$f(y,k)||(m=!0,CR(y,k));y=y.next}while(m);N1=!1}}function pK(){xR()}function xR(){fg=O1=!1;var u=0;Jo!==0&&(CK()&&(u=Jo),Jo=0);for(var f=Ht(),m=null,y=cg;y!==null;){var C=y.next,k=wR(y,f);k===0?(y.next=null,m===null?cg=C:m.next=C,C===null&&(Pu=m)):(m=y,(u!==0||(k&3)!==0)&&(fg=!0)),y=C}uh(u)}function wR(u,f){for(var m=u.suspendedLanes,y=u.pingedLanes,C=u.expirationTimes,k=u.pendingLanes&-62914561;0<k;){var D=31-_n(k),z=1<<D,K=C[D];K===-1?((z&m)===0||(z&y)!==0)&&(C[D]=z8(z,f)):K<=f&&(u.expiredLanes|=z),k&=~z}if(f=Ge,m=ye,m=ym(u,u===f?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),y=u.callbackNode,m===0||u===f&&(Ne===2||Ne===9)||u.cancelPendingCommit!==null)return y!==null&&y!==null&&Lt(y),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||$f(u,m)){if(f=m&-m,f===u.callbackPriority)return f;switch(y!==null&&Lt(y),q0(m)){case 2:case 8:m=We;break;case 32:m=mn;break;case 268435456:m=Fr;break;default:m=mn}return y=SR.bind(null,u),m=Vt(m,y),u.callbackPriority=f,u.callbackNode=m,f}return y!==null&&y!==null&&Lt(y),u.callbackPriority=2,u.callbackNode=null,2}function SR(u,f){if(er!==0&&er!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(ug()&&u.callbackNode!==m)return null;var y=ye;return y=ym(u,u===Ge?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),y===0?null:(iR(u,y,f),wR(u,Ht()),u.callbackNode!=null&&u.callbackNode===m?SR.bind(null,u):null)}function CR(u,f){if(ug())return null;iR(u,f,!0)}function mK(){$K(function(){(Oe&6)!==0?Vt(Nn,pK):xR()})}function _1(){return Jo===0&&(Jo=pO()),Jo}function TR(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Sm(""+u)}function $R(u,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,u.id&&m.setAttribute("form",u.id),f.parentNode.insertBefore(m,f),u=new FormData(u),m.parentNode.removeChild(m),u}function gK(u,f,m,y,C){if(f==="submit"&&m&&m.stateNode===C){var k=TR((C[zr]||null).action),D=y.submitter;D&&(f=(f=D[zr]||null)?TR(f.formAction):D.getAttribute("formAction"),f!==null&&(k=f,D=null));var z=new Am("action","action",null,y,C);u.push({event:z,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Jo!==0){var K=D?$R(C,D):new FormData(C);Qx(m,{pending:!0,data:K,method:C.method,action:k},null,K)}}else typeof k=="function"&&(z.preventDefault(),K=D?$R(C,D):new FormData(C),Qx(m,{pending:!0,data:K,method:C.method,action:k},k,K))},currentTarget:C}]})}}for(var R1=0;R1<yx.length;R1++){var D1=yx[R1],yK=D1.toLowerCase(),vK=D1[0].toUpperCase()+D1.slice(1);Vi(yK,"on"+vK)}Vi(iN,"onAnimationEnd"),Vi(aN,"onAnimationIteration"),Vi(sN,"onAnimationStart"),Vi("dblclick","onDoubleClick"),Vi("focusin","onFocus"),Vi("focusout","onBlur"),Vi(MX,"onTransitionRun"),Vi(PX,"onTransitionStart"),Vi(FX,"onTransitionCancel"),Vi(oN,"onTransitionEnd"),su("onMouseEnter",["mouseout","mouseover"]),su("onMouseLeave",["mouseout","mouseover"]),su("onPointerEnter",["pointerout","pointerover"]),su("onPointerLeave",["pointerout","pointerover"]),Fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bK=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ch));function AR(u,f){f=(f&4)!==0;for(var m=0;m<u.length;m++){var y=u[m],C=y.event;y=y.listeners;t:{var k=void 0;if(f)for(var D=y.length-1;0<=D;D--){var z=y[D],K=z.instance,lt=z.currentTarget;if(z=z.listener,K!==k&&C.isPropagationStopped())break t;k=z,C.currentTarget=lt;try{k(C)}catch(bt){Qm(bt)}C.currentTarget=null,k=K}else for(D=0;D<y.length;D++){if(z=y[D],K=z.instance,lt=z.currentTarget,z=z.listener,K!==k&&C.isPropagationStopped())break t;k=z,C.currentTarget=lt;try{k(C)}catch(bt){Qm(bt)}C.currentTarget=null,k=K}}}}function he(u,f){var m=f[H0];m===void 0&&(m=f[H0]=new Set);var y=u+"__bubble";m.has(y)||(kR(f,u,2,!1),m.add(y))}function M1(u,f,m){var y=0;f&&(y|=4),kR(m,u,y,f)}var hg="_reactListening"+Math.random().toString(36).slice(2);function P1(u){if(!u[hg]){u[hg]=!0,xO.forEach(function(m){m!=="selectionchange"&&(bK.has(m)||M1(m,!1,u),M1(m,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[hg]||(f[hg]=!0,M1("selectionchange",!1,f))}}function kR(u,f,m,y){switch(ZR(f)){case 2:var C=qK;break;case 8:C=HK;break;default:C=Y1}m=C.bind(null,f,m,u),C=void 0,!ix||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(C=!0),y?C!==void 0?u.addEventListener(f,m,{capture:!0,passive:C}):u.addEventListener(f,m,!0):C!==void 0?u.addEventListener(f,m,{passive:C}):u.addEventListener(f,m,!1)}function F1(u,f,m,y,C){var k=y;if((f&1)===0&&(f&2)===0&&y!==null)t:for(;;){if(y===null)return;var D=y.tag;if(D===3||D===4){var z=y.stateNode.containerInfo;if(z===C)break;if(D===4)for(D=y.return;D!==null;){var K=D.tag;if((K===3||K===4)&&D.stateNode.containerInfo===C)return;D=D.return}for(;z!==null;){if(D=ru(z),D===null)return;if(K=D.tag,K===5||K===6||K===26||K===27){y=k=D;continue t}z=z.parentNode}}y=y.return}DO(function(){var lt=k,bt=nx(m),wt=[];t:{var ut=lN.get(u);if(ut!==void 0){var ft=Am,Qt=u;switch(u){case"keypress":if(Tm(m)===0)break t;case"keydown":case"keyup":ft=dX;break;case"focusin":Qt="focus",ft=lx;break;case"focusout":Qt="blur",ft=lx;break;case"beforeblur":case"afterblur":ft=lx;break;case"click":if(m.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=FO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=eX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=gX;break;case iN:case aN:case sN:ft=iX;break;case oN:ft=vX;break;case"scroll":case"scrollend":ft=J8;break;case"wheel":ft=xX;break;case"copy":case"cut":case"paste":ft=sX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=BO;break;case"toggle":case"beforetoggle":ft=SX}var Gt=(f&4)!==0,Me=!Gt&&(u==="scroll"||u==="scrollend"),it=Gt?ut!==null?ut+"Capture":null:ut;Gt=[];for(var J=lt,at;J!==null;){var xt=J;if(at=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||at===null||it===null||(xt=Ef(J,it),xt!=null&&Gt.push(fh(J,xt,at))),Me)break;J=J.return}0<Gt.length&&(ut=new ft(ut,Qt,null,m,bt),wt.push({event:ut,listeners:Gt}))}}if((f&7)===0){t:{if(ut=u==="mouseover"||u==="pointerover",ft=u==="mouseout"||u==="pointerout",ut&&m!==ex&&(Qt=m.relatedTarget||m.fromElement)&&(ru(Qt)||Qt[nu]))break t;if((ft||ut)&&(ut=bt.window===bt?bt:(ut=bt.ownerDocument)?ut.defaultView||ut.parentWindow:window,ft?(Qt=m.relatedTarget||m.toElement,ft=lt,Qt=Qt?ru(Qt):null,Qt!==null&&(Me=a(Qt),Gt=Qt.tag,Qt!==Me||Gt!==5&&Gt!==27&&Gt!==6)&&(Qt=null)):(ft=null,Qt=lt),ft!==Qt)){if(Gt=FO,xt="onMouseLeave",it="onMouseEnter",J="mouse",(u==="pointerout"||u==="pointerover")&&(Gt=BO,xt="onPointerLeave",it="onPointerEnter",J="pointer"),Me=ft==null?ut:If(ft),at=Qt==null?ut:If(Qt),ut=new Gt(xt,J+"leave",ft,m,bt),ut.target=Me,ut.relatedTarget=at,xt=null,ru(bt)===lt&&(Gt=new Gt(it,J+"enter",Qt,m,bt),Gt.target=at,Gt.relatedTarget=Me,xt=Gt),Me=xt,ft&&Qt)e:{for(Gt=ft,it=Qt,J=0,at=Gt;at;at=Fu(at))J++;for(at=0,xt=it;xt;xt=Fu(xt))at++;for(;0<J-at;)Gt=Fu(Gt),J--;for(;0<at-J;)it=Fu(it),at--;for(;J--;){if(Gt===it||it!==null&&Gt===it.alternate)break e;Gt=Fu(Gt),it=Fu(it)}Gt=null}else Gt=null;ft!==null&&IR(wt,ut,ft,Gt,!1),Qt!==null&&Me!==null&&IR(wt,Me,Qt,Gt,!0)}}t:{if(ut=lt?If(lt):window,ft=ut.nodeName&&ut.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ut.type==="file")var Pt=HO;else if(GO(ut))if(XO)Pt=_X;else{Pt=OX;var ue=EX}else ft=ut.nodeName,!ft||ft.toLowerCase()!=="input"||ut.type!=="checkbox"&&ut.type!=="radio"?lt&&tx(lt.elementType)&&(Pt=HO):Pt=NX;if(Pt&&(Pt=Pt(u,lt))){qO(wt,Pt,m,bt);break t}ue&&ue(u,ut,lt),u==="focusout"&&lt&&ut.type==="number"&&lt.memoizedProps.value!=null&&J0(ut,"number",ut.value)}switch(ue=lt?If(lt):window,u){case"focusin":(GO(ue)||ue.contentEditable==="true")&&(du=ue,px=lt,Ff=null);break;case"focusout":Ff=px=du=null;break;case"mousedown":mx=!0;break;case"contextmenu":case"mouseup":case"dragend":mx=!1,nN(wt,m,bt);break;case"selectionchange":if(DX)break;case"keydown":case"keyup":nN(wt,m,bt)}var zt;if(cx)t:{switch(u){case"compositionstart":var Xt="onCompositionStart";break t;case"compositionend":Xt="onCompositionEnd";break t;case"compositionupdate":Xt="onCompositionUpdate";break t}Xt=void 0}else hu?VO(u,m)&&(Xt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Xt="onCompositionStart");Xt&&(zO&&m.locale!=="ko"&&(hu||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&hu&&(zt=MO()):(Ns=bt,ax="value"in Ns?Ns.value:Ns.textContent,hu=!0)),ue=dg(lt,Xt),0<ue.length&&(Xt=new LO(Xt,u,null,m,bt),wt.push({event:Xt,listeners:ue}),zt?Xt.data=zt:(zt=WO(m),zt!==null&&(Xt.data=zt)))),(zt=TX?$X(u,m):AX(u,m))&&(Xt=dg(lt,"onBeforeInput"),0<Xt.length&&(ue=new LO("onBeforeInput","beforeinput",null,m,bt),wt.push({event:ue,listeners:Xt}),ue.data=zt)),gK(wt,u,lt,m,bt)}AR(wt,f)})}function fh(u,f,m){return{instance:u,listener:f,currentTarget:m}}function dg(u,f){for(var m=f+"Capture",y=[];u!==null;){var C=u,k=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||k===null||(C=Ef(u,m),C!=null&&y.unshift(fh(u,C,k)),C=Ef(u,f),C!=null&&y.push(fh(u,C,k))),u.tag===3)return y;u=u.return}return[]}function Fu(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function IR(u,f,m,y,C){for(var k=f._reactName,D=[];m!==null&&m!==y;){var z=m,K=z.alternate,lt=z.stateNode;if(z=z.tag,K!==null&&K===y)break;z!==5&&z!==26&&z!==27||lt===null||(K=lt,C?(lt=Ef(m,k),lt!=null&&D.unshift(fh(m,lt,K))):C||(lt=Ef(m,k),lt!=null&&D.push(fh(m,lt,K)))),m=m.return}D.length!==0&&u.push({event:f,listeners:D})}var xK=/\r\n?/g,wK=/\u0000|\uFFFD/g;function ER(u){return(typeof u=="string"?u:""+u).replace(xK,`
`).replace(wK,"")}function OR(u,f){return f=ER(f),ER(u)===f}function pg(){}function De(u,f,m,y,C,k){switch(m){case"children":typeof y=="string"?f==="body"||f==="textarea"&&y===""||uu(u,y):(typeof y=="number"||typeof y=="bigint")&&f!=="body"&&uu(u,""+y);break;case"className":bm(u,"class",y);break;case"tabIndex":bm(u,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":bm(u,m,y);break;case"style":_O(u,y,k);break;case"data":if(f!=="object"){bm(u,"data",y);break}case"src":case"href":if(y===""&&(f!=="a"||m!=="href")){u.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){u.removeAttribute(m);break}y=Sm(""+y),u.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(m==="formAction"?(f!=="input"&&De(u,f,"name",C.name,C,null),De(u,f,"formEncType",C.formEncType,C,null),De(u,f,"formMethod",C.formMethod,C,null),De(u,f,"formTarget",C.formTarget,C,null)):(De(u,f,"encType",C.encType,C,null),De(u,f,"method",C.method,C,null),De(u,f,"target",C.target,C,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){u.removeAttribute(m);break}y=Sm(""+y),u.setAttribute(m,y);break;case"onClick":y!=null&&(u.onclick=pg);break;case"onScroll":y!=null&&he("scroll",u);break;case"onScrollEnd":y!=null&&he("scrollend",u);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(C.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"multiple":u.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":u.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){u.removeAttribute("xlink:href");break}m=Sm(""+y),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?u.setAttribute(m,""+y):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":y===!0?u.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?u.setAttribute(m,y):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?u.setAttribute(m,y):u.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?u.removeAttribute(m):u.setAttribute(m,y);break;case"popover":he("beforetoggle",u),he("toggle",u),vm(u,"popover",y);break;case"xlinkActuate":Va(u,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Va(u,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Va(u,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Va(u,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Va(u,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Va(u,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Va(u,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Va(u,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Va(u,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":vm(u,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Z8.get(m)||m,vm(u,m,y))}}function L1(u,f,m,y,C,k){switch(m){case"style":_O(u,y,k);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(C.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"children":typeof y=="string"?uu(u,y):(typeof y=="number"||typeof y=="bigint")&&uu(u,""+y);break;case"onScroll":y!=null&&he("scroll",u);break;case"onScrollEnd":y!=null&&he("scrollend",u);break;case"onClick":y!=null&&(u.onclick=pg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wO.hasOwnProperty(m))t:{if(m[0]==="o"&&m[1]==="n"&&(C=m.endsWith("Capture"),f=m.slice(2,C?m.length-7:void 0),k=u[zr]||null,k=k!=null?k[m]:null,typeof k=="function"&&u.removeEventListener(f,k,C),typeof y=="function")){typeof k!="function"&&k!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(f,y,C);break t}m in u?u[m]=y:y===!0?u.setAttribute(m,""):vm(u,m,y)}}}function nr(u,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":he("error",u),he("load",u);var y=!1,C=!1,k;for(k in m)if(m.hasOwnProperty(k)){var D=m[k];if(D!=null)switch(k){case"src":y=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:De(u,f,k,D,m,null)}}C&&De(u,f,"srcSet",m.srcSet,m,null),y&&De(u,f,"src",m.src,m,null);return;case"input":he("invalid",u);var z=k=D=C=null,K=null,lt=null;for(y in m)if(m.hasOwnProperty(y)){var bt=m[y];if(bt!=null)switch(y){case"name":C=bt;break;case"type":D=bt;break;case"checked":K=bt;break;case"defaultChecked":lt=bt;break;case"value":k=bt;break;case"defaultValue":z=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(r(137,f));break;default:De(u,f,y,bt,m,null)}}IO(u,k,z,K,lt,D,C,!1),xm(u);return;case"select":he("invalid",u),y=D=k=null;for(C in m)if(m.hasOwnProperty(C)&&(z=m[C],z!=null))switch(C){case"value":k=z;break;case"defaultValue":D=z;break;case"multiple":y=z;default:De(u,f,C,z,m,null)}f=k,m=D,u.multiple=!!y,f!=null?lu(u,!!y,f,!1):m!=null&&lu(u,!!y,m,!0);return;case"textarea":he("invalid",u),k=C=y=null;for(D in m)if(m.hasOwnProperty(D)&&(z=m[D],z!=null))switch(D){case"value":y=z;break;case"defaultValue":C=z;break;case"children":k=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:De(u,f,D,z,m,null)}OO(u,y,C,k),xm(u);return;case"option":for(K in m)if(m.hasOwnProperty(K)&&(y=m[K],y!=null))switch(K){case"selected":u.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:De(u,f,K,y,m,null)}return;case"dialog":he("beforetoggle",u),he("toggle",u),he("cancel",u),he("close",u);break;case"iframe":case"object":he("load",u);break;case"video":case"audio":for(y=0;y<ch.length;y++)he(ch[y],u);break;case"image":he("error",u),he("load",u);break;case"details":he("toggle",u);break;case"embed":case"source":case"link":he("error",u),he("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in m)if(m.hasOwnProperty(lt)&&(y=m[lt],y!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:De(u,f,lt,y,m,null)}return;default:if(tx(f)){for(bt in m)m.hasOwnProperty(bt)&&(y=m[bt],y!==void 0&&L1(u,f,bt,y,m,void 0));return}}for(z in m)m.hasOwnProperty(z)&&(y=m[z],y!=null&&De(u,f,z,y,m,null))}function SK(u,f,m,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,k=null,D=null,z=null,K=null,lt=null,bt=null;for(ft in m){var wt=m[ft];if(m.hasOwnProperty(ft)&&wt!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":K=wt;default:y.hasOwnProperty(ft)||De(u,f,ft,null,y,wt)}}for(var ut in y){var ft=y[ut];if(wt=m[ut],y.hasOwnProperty(ut)&&(ft!=null||wt!=null))switch(ut){case"type":k=ft;break;case"name":C=ft;break;case"checked":lt=ft;break;case"defaultChecked":bt=ft;break;case"value":D=ft;break;case"defaultValue":z=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(r(137,f));break;default:ft!==wt&&De(u,f,ut,ft,y,wt)}}Q0(u,D,z,K,lt,bt,k,C);return;case"select":ft=D=z=ut=null;for(k in m)if(K=m[k],m.hasOwnProperty(k)&&K!=null)switch(k){case"value":break;case"multiple":ft=K;default:y.hasOwnProperty(k)||De(u,f,k,null,y,K)}for(C in y)if(k=y[C],K=m[C],y.hasOwnProperty(C)&&(k!=null||K!=null))switch(C){case"value":ut=k;break;case"defaultValue":z=k;break;case"multiple":D=k;default:k!==K&&De(u,f,C,k,y,K)}f=z,m=D,y=ft,ut!=null?lu(u,!!m,ut,!1):!!y!=!!m&&(f!=null?lu(u,!!m,f,!0):lu(u,!!m,m?[]:"",!1));return;case"textarea":ft=ut=null;for(z in m)if(C=m[z],m.hasOwnProperty(z)&&C!=null&&!y.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:De(u,f,z,null,y,C)}for(D in y)if(C=y[D],k=m[D],y.hasOwnProperty(D)&&(C!=null||k!=null))switch(D){case"value":ut=C;break;case"defaultValue":ft=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==k&&De(u,f,D,C,y,k)}EO(u,ut,ft);return;case"option":for(var Qt in m)if(ut=m[Qt],m.hasOwnProperty(Qt)&&ut!=null&&!y.hasOwnProperty(Qt))switch(Qt){case"selected":u.selected=!1;break;default:De(u,f,Qt,null,y,ut)}for(K in y)if(ut=y[K],ft=m[K],y.hasOwnProperty(K)&&ut!==ft&&(ut!=null||ft!=null))switch(K){case"selected":u.selected=ut&&typeof ut!="function"&&typeof ut!="symbol";break;default:De(u,f,K,ut,y,ft)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in m)ut=m[Gt],m.hasOwnProperty(Gt)&&ut!=null&&!y.hasOwnProperty(Gt)&&De(u,f,Gt,null,y,ut);for(lt in y)if(ut=y[lt],ft=m[lt],y.hasOwnProperty(lt)&&ut!==ft&&(ut!=null||ft!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(137,f));break;default:De(u,f,lt,ut,y,ft)}return;default:if(tx(f)){for(var Me in m)ut=m[Me],m.hasOwnProperty(Me)&&ut!==void 0&&!y.hasOwnProperty(Me)&&L1(u,f,Me,void 0,y,ut);for(bt in y)ut=y[bt],ft=m[bt],!y.hasOwnProperty(bt)||ut===ft||ut===void 0&&ft===void 0||L1(u,f,bt,ut,y,ft);return}}for(var it in m)ut=m[it],m.hasOwnProperty(it)&&ut!=null&&!y.hasOwnProperty(it)&&De(u,f,it,null,y,ut);for(wt in y)ut=y[wt],ft=m[wt],!y.hasOwnProperty(wt)||ut===ft||ut==null&&ft==null||De(u,f,wt,ut,y,ft)}var B1=null,z1=null;function mg(u){return u.nodeType===9?u:u.ownerDocument}function NR(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _R(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function j1(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var U1=null;function CK(){var u=window.event;return u&&u.type==="popstate"?u===U1?!1:(U1=u,!0):(U1=null,!1)}var RR=typeof setTimeout=="function"?setTimeout:void 0,TK=typeof clearTimeout=="function"?clearTimeout:void 0,DR=typeof Promise=="function"?Promise:void 0,$K=typeof queueMicrotask=="function"?queueMicrotask:typeof DR<"u"?function(u){return DR.resolve(null).then(u).catch(AK)}:RR;function AK(u){setTimeout(function(){throw u})}function Hs(u){return u==="head"}function MR(u,f){var m=f,y=0,C=0;do{var k=m.nextSibling;if(u.removeChild(m),k&&k.nodeType===8)if(m=k.data,m==="/$"){if(0<y&&8>y){m=y;var D=u.ownerDocument;if(m&1&&hh(D.documentElement),m&2&&hh(D.body),m&4)for(m=D.head,hh(m),D=m.firstChild;D;){var z=D.nextSibling,K=D.nodeName;D[kf]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&D.rel.toLowerCase()==="stylesheet"||m.removeChild(D),D=z}}if(C===0){u.removeChild(k),xh(f);return}C--}else m==="$"||m==="$?"||m==="$!"?C++:y=m.charCodeAt(0)-48;else y=0;m=k}while(m);xh(f)}function V1(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":V1(m),X0(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function kK(u,f,m,y){for(;u.nodeType===1;){var C=m;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!y&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(y){if(!u[kf])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(k=u.getAttribute("rel"),k==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(k!==C.rel||u.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||u.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||u.getAttribute("title")!==(C.title==null?null:C.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(k=u.getAttribute("src"),(k!==(C.src==null?null:C.src)||u.getAttribute("type")!==(C.type==null?null:C.type)||u.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&k&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var k=C.name==null?null:""+C.name;if(C.type==="hidden"&&u.getAttribute("name")===k)return u}else return u;if(u=Gi(u.nextSibling),u===null)break}return null}function IK(u,f,m){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=Gi(u.nextSibling),u===null))return null;return u}function W1(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function EK(u,f){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")f();else{var y=function(){f(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),u._reactRetry=y}}function Gi(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var G1=null;function PR(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return u;f--}else m==="/$"&&f++}u=u.previousSibling}return null}function FR(u,f,m){switch(f=mg(m),u){case"html":if(u=f.documentElement,!u)throw Error(r(452));return u;case"head":if(u=f.head,!u)throw Error(r(453));return u;case"body":if(u=f.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function hh(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);X0(u)}var Ti=new Map,LR=new Set;function gg(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var rs=U.d;U.d={f:OK,r:NK,D:_K,C:RK,L:DK,m:MK,X:FK,S:PK,M:LK};function OK(){var u=rs.f(),f=og();return u||f}function NK(u){var f=iu(u);f!==null&&f.tag===5&&f.type==="form"?i_(f):rs.r(u)}var Lu=typeof document>"u"?null:document;function BR(u,f,m){var y=Lu;if(y&&typeof f=="string"&&f){var C=yi(f);C='link[rel="'+u+'"][href="'+C+'"]',typeof m=="string"&&(C+='[crossorigin="'+m+'"]'),LR.has(C)||(LR.add(C),u={rel:u,crossOrigin:m,href:f},y.querySelector(C)===null&&(f=y.createElement("link"),nr(f,"link",u),Un(f),y.head.appendChild(f)))}}function _K(u){rs.D(u),BR("dns-prefetch",u,null)}function RK(u,f){rs.C(u,f),BR("preconnect",u,f)}function DK(u,f,m){rs.L(u,f,m);var y=Lu;if(y&&u&&f){var C='link[rel="preload"][as="'+yi(f)+'"]';f==="image"&&m&&m.imageSrcSet?(C+='[imagesrcset="'+yi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(C+='[imagesizes="'+yi(m.imageSizes)+'"]')):C+='[href="'+yi(u)+'"]';var k=C;switch(f){case"style":k=Bu(u);break;case"script":k=zu(u)}Ti.has(k)||(u=h({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:u,as:f},m),Ti.set(k,u),y.querySelector(C)!==null||f==="style"&&y.querySelector(dh(k))||f==="script"&&y.querySelector(ph(k))||(f=y.createElement("link"),nr(f,"link",u),Un(f),y.head.appendChild(f)))}}function MK(u,f){rs.m(u,f);var m=Lu;if(m&&u){var y=f&&typeof f.as=="string"?f.as:"script",C='link[rel="modulepreload"][as="'+yi(y)+'"][href="'+yi(u)+'"]',k=C;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=zu(u)}if(!Ti.has(k)&&(u=h({rel:"modulepreload",href:u},f),Ti.set(k,u),m.querySelector(C)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(ph(k)))return}y=m.createElement("link"),nr(y,"link",u),Un(y),m.head.appendChild(y)}}}function PK(u,f,m){rs.S(u,f,m);var y=Lu;if(y&&u){var C=au(y).hoistableStyles,k=Bu(u);f=f||"default";var D=C.get(k);if(!D){var z={loading:0,preload:null};if(D=y.querySelector(dh(k)))z.loading=5;else{u=h({rel:"stylesheet",href:u,"data-precedence":f},m),(m=Ti.get(k))&&q1(u,m);var K=D=y.createElement("link");Un(K),nr(K,"link",u),K._p=new Promise(function(lt,bt){K.onload=lt,K.onerror=bt}),K.addEventListener("load",function(){z.loading|=1}),K.addEventListener("error",function(){z.loading|=2}),z.loading|=4,yg(D,f,y)}D={type:"stylesheet",instance:D,count:1,state:z},C.set(k,D)}}}function FK(u,f){rs.X(u,f);var m=Lu;if(m&&u){var y=au(m).hoistableScripts,C=zu(u),k=y.get(C);k||(k=m.querySelector(ph(C)),k||(u=h({src:u,async:!0},f),(f=Ti.get(C))&&H1(u,f),k=m.createElement("script"),Un(k),nr(k,"link",u),m.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(C,k))}}function LK(u,f){rs.M(u,f);var m=Lu;if(m&&u){var y=au(m).hoistableScripts,C=zu(u),k=y.get(C);k||(k=m.querySelector(ph(C)),k||(u=h({src:u,async:!0,type:"module"},f),(f=Ti.get(C))&&H1(u,f),k=m.createElement("script"),Un(k),nr(k,"link",u),m.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(C,k))}}function zR(u,f,m,y){var C=(C=yt.current)?gg(C):null;if(!C)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=Bu(m.href),m=au(C).hoistableStyles,y=m.get(f),y||(y={type:"style",instance:null,count:0,state:null},m.set(f,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Bu(m.href);var k=au(C).hoistableStyles,D=k.get(u);if(D||(C=C.ownerDocument||C,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(u,D),(k=C.querySelector(dh(u)))&&!k._p&&(D.instance=k,D.state.loading=5),Ti.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ti.set(u,m),k||BK(C,u,m,D.state))),f&&y===null)throw Error(r(528,""));return D}if(f&&y!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=zu(m),m=au(C).hoistableScripts,y=m.get(f),y||(y={type:"script",instance:null,count:0,state:null},m.set(f,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function Bu(u){return'href="'+yi(u)+'"'}function dh(u){return'link[rel="stylesheet"]['+u+"]"}function jR(u){return h({},u,{"data-precedence":u.precedence,precedence:null})}function BK(u,f,m,y){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?y.loading=1:(f=u.createElement("link"),y.preload=f,f.addEventListener("load",function(){return y.loading|=1}),f.addEventListener("error",function(){return y.loading|=2}),nr(f,"link",m),Un(f),u.head.appendChild(f))}function zu(u){return'[src="'+yi(u)+'"]'}function ph(u){return"script[async]"+u}function UR(u,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var y=u.querySelector('style[data-href~="'+yi(m.href)+'"]');if(y)return f.instance=y,Un(y),y;var C=h({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(u.ownerDocument||u).createElement("style"),Un(y),nr(y,"style",C),yg(y,m.precedence,u),f.instance=y;case"stylesheet":C=Bu(m.href);var k=u.querySelector(dh(C));if(k)return f.state.loading|=4,f.instance=k,Un(k),k;y=jR(m),(C=Ti.get(C))&&q1(y,C),k=(u.ownerDocument||u).createElement("link"),Un(k);var D=k;return D._p=new Promise(function(z,K){D.onload=z,D.onerror=K}),nr(k,"link",y),f.state.loading|=4,yg(k,m.precedence,u),f.instance=k;case"script":return k=zu(m.src),(C=u.querySelector(ph(k)))?(f.instance=C,Un(C),C):(y=m,(C=Ti.get(k))&&(y=h({},m),H1(y,C)),u=u.ownerDocument||u,C=u.createElement("script"),Un(C),nr(C,"link",y),u.head.appendChild(C),f.instance=C);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(y=f.instance,f.state.loading|=4,yg(y,m.precedence,u));return f.instance}function yg(u,f,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=y.length?y[y.length-1]:null,k=C,D=0;D<y.length;D++){var z=y[D];if(z.dataset.precedence===f)k=z;else if(k!==C)break}k?k.parentNode.insertBefore(u,k.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(u,f.firstChild))}function q1(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function H1(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var vg=null;function VR(u,f,m){if(vg===null){var y=new Map,C=vg=new Map;C.set(m,y)}else C=vg,y=C.get(m),y||(y=new Map,C.set(m,y));if(y.has(u))return y;for(y.set(u,null),m=m.getElementsByTagName(u),C=0;C<m.length;C++){var k=m[C];if(!(k[kf]||k[dr]||u==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var D=k.getAttribute(f)||"";D=u+D;var z=y.get(D);z?z.push(k):y.set(D,[k])}}return y}function WR(u,f,m){u=u.ownerDocument||u,u.head.insertBefore(m,f==="title"?u.querySelector("head > title"):null)}function zK(u,f,m){if(m===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function GR(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var mh=null;function jK(){}function UK(u,f,m){if(mh===null)throw Error(r(475));var y=mh;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var C=Bu(m.href),k=u.querySelector(dh(C));if(k){u=k._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(y.count++,y=bg.bind(y),u.then(y,y)),f.state.loading|=4,f.instance=k,Un(k);return}k=u.ownerDocument||u,m=jR(m),(C=Ti.get(C))&&q1(m,C),k=k.createElement("link"),Un(k);var D=k;D._p=new Promise(function(z,K){D.onload=z,D.onerror=K}),nr(k,"link",m),f.instance=k}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(y.count++,f=bg.bind(y),u.addEventListener("load",f),u.addEventListener("error",f))}}function VK(){if(mh===null)throw Error(r(475));var u=mh;return u.stylesheets&&u.count===0&&X1(u,u.stylesheets),0<u.count?function(f){var m=setTimeout(function(){if(u.stylesheets&&X1(u,u.stylesheets),u.unsuspend){var y=u.unsuspend;u.unsuspend=null,y()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(m)}}:null}function bg(){if(this.count--,this.count===0){if(this.stylesheets)X1(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var xg=null;function X1(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,xg=new Map,f.forEach(WK,u),xg=null,bg.call(u))}function WK(u,f){if(!(f.state.loading&4)){var m=xg.get(u);if(m)var y=m.get(null);else{m=new Map,xg.set(u,m);for(var C=u.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<C.length;k++){var D=C[k];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(m.set(D.dataset.precedence,D),y=D)}y&&m.set(null,y)}C=f.instance,D=C.getAttribute("data-precedence"),k=m.get(D)||y,k===y&&m.set(null,C),m.set(D,C),this.count++,y=bg.bind(this),C.addEventListener("load",y),C.addEventListener("error",y),k?k.parentNode.insertBefore(C,k.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(C,u.firstChild)),f.state.loading|=4}}var gh={$$typeof:T,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function GK(u,f,m,y,C,k,D,z){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=W0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=W0(0),this.hiddenUpdates=W0(null),this.identifierPrefix=y,this.onUncaughtError=C,this.onCaughtError=k,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function qR(u,f,m,y,C,k,D,z,K,lt,bt,wt){return u=new GK(u,f,m,D,z,K,lt,wt),f=1,k===!0&&(f|=24),k=ti(3,null,null,f),u.current=k,k.stateNode=u,f=Ex(),f.refCount++,u.pooledCache=f,f.refCount++,k.memoizedState={element:y,isDehydrated:m,cache:f},Rx(k),u}function HR(u){return u?(u=yu,u):yu}function XR(u,f,m,y,C,k){C=HR(C),y.context===null?y.context=C:y.pendingContext=C,y=Ds(f),y.payload={element:m},k=k===void 0?null:k,k!==null&&(y.callback=k),m=Ms(u,y,f),m!==null&&(ai(m,u,f),qf(m,u,f))}function KR(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<f?m:f}}function K1(u,f){KR(u,f),(u=u.alternate)&&KR(u,f)}function YR(u){if(u.tag===13){var f=gu(u,67108864);f!==null&&ai(f,u,67108864),K1(u,67108864)}}var wg=!0;function qK(u,f,m,y){var C=P.T;P.T=null;var k=U.p;try{U.p=2,Y1(u,f,m,y)}finally{U.p=k,P.T=C}}function HK(u,f,m,y){var C=P.T;P.T=null;var k=U.p;try{U.p=8,Y1(u,f,m,y)}finally{U.p=k,P.T=C}}function Y1(u,f,m,y){if(wg){var C=Z1(y);if(C===null)F1(u,f,y,Sg,m),QR(u,y);else if(KK(C,u,f,m,y))y.stopPropagation();else if(QR(u,y),f&4&&-1<XK.indexOf(u)){for(;C!==null;){var k=iu(C);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var D=Ua(k.pendingLanes);if(D!==0){var z=k;for(z.pendingLanes|=2,z.entangledLanes|=2;D;){var K=1<<31-_n(D);z.entanglements[1]|=K,D&=~K}ga(k),(Oe&6)===0&&(ag=Ht()+500,uh(0))}}break;case 13:z=gu(k,2),z!==null&&ai(z,k,2),og(),K1(k,2)}if(k=Z1(y),k===null&&F1(u,f,y,Sg,m),k===C)break;C=k}C!==null&&y.stopPropagation()}else F1(u,f,y,null,m)}}function Z1(u){return u=nx(u),Q1(u)}var Sg=null;function Q1(u){if(Sg=null,u=ru(u),u!==null){var f=a(u);if(f===null)u=null;else{var m=f.tag;if(m===13){if(u=s(f),u!==null)return u;u=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return Sg=u,null}function ZR(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case Nn:return 2;case We:return 8;case mn:case nn:return 32;case Fr:return 268435456;default:return 32}default:return 32}}var J1=!1,Xs=null,Ks=null,Ys=null,yh=new Map,vh=new Map,Zs=[],XK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QR(u,f){switch(u){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":yh.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(f.pointerId)}}function bh(u,f,m,y,C,k){return u===null||u.nativeEvent!==k?(u={blockedOn:f,domEventName:m,eventSystemFlags:y,nativeEvent:k,targetContainers:[C]},f!==null&&(f=iu(f),f!==null&&YR(f)),u):(u.eventSystemFlags|=y,f=u.targetContainers,C!==null&&f.indexOf(C)===-1&&f.push(C),u)}function KK(u,f,m,y,C){switch(f){case"focusin":return Xs=bh(Xs,u,f,m,y,C),!0;case"dragenter":return Ks=bh(Ks,u,f,m,y,C),!0;case"mouseover":return Ys=bh(Ys,u,f,m,y,C),!0;case"pointerover":var k=C.pointerId;return yh.set(k,bh(yh.get(k)||null,u,f,m,y,C)),!0;case"gotpointercapture":return k=C.pointerId,vh.set(k,bh(vh.get(k)||null,u,f,m,y,C)),!0}return!1}function JR(u){var f=ru(u.target);if(f!==null){var m=a(f);if(m!==null){if(f=m.tag,f===13){if(f=s(m),f!==null){u.blockedOn=f,U8(u.priority,function(){if(m.tag===13){var y=ii();y=G0(y);var C=gu(m,y);C!==null&&ai(C,m,y),K1(m,y)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Cg(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var m=Z1(u.nativeEvent);if(m===null){m=u.nativeEvent;var y=new m.constructor(m.type,m);ex=y,m.target.dispatchEvent(y),ex=null}else return f=iu(m),f!==null&&YR(f),u.blockedOn=m,!1;f.shift()}return!0}function tD(u,f,m){Cg(u)&&m.delete(f)}function YK(){J1=!1,Xs!==null&&Cg(Xs)&&(Xs=null),Ks!==null&&Cg(Ks)&&(Ks=null),Ys!==null&&Cg(Ys)&&(Ys=null),yh.forEach(tD),vh.forEach(tD)}function Tg(u,f){u.blockedOn===f&&(u.blockedOn=null,J1||(J1=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,YK)))}var $g=null;function eD(u){$g!==u&&($g=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){$g===u&&($g=null);for(var f=0;f<u.length;f+=3){var m=u[f],y=u[f+1],C=u[f+2];if(typeof y!="function"){if(Q1(y||m)===null)continue;break}var k=iu(m);k!==null&&(u.splice(f,3),f-=3,Qx(k,{pending:!0,data:C,method:m.method,action:y},y,C))}}))}function xh(u){function f(K){return Tg(K,u)}Xs!==null&&Tg(Xs,u),Ks!==null&&Tg(Ks,u),Ys!==null&&Tg(Ys,u),yh.forEach(f),vh.forEach(f);for(var m=0;m<Zs.length;m++){var y=Zs[m];y.blockedOn===u&&(y.blockedOn=null)}for(;0<Zs.length&&(m=Zs[0],m.blockedOn===null);)JR(m),m.blockedOn===null&&Zs.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var C=m[y],k=m[y+1],D=C[zr]||null;if(typeof k=="function")D||eD(m);else if(D){var z=null;if(k&&k.hasAttribute("formAction")){if(C=k,D=k[zr]||null)z=D.formAction;else if(Q1(C)!==null)continue}else z=D.action;typeof z=="function"?m[y+1]=z:(m.splice(y,3),y-=3),eD(m)}}}function tw(u){this._internalRoot=u}Ag.prototype.render=tw.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,y=ii();XR(m,y,u,f,null,null)},Ag.prototype.unmount=tw.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;XR(u.current,2,null,u,null,null),og(),f[nu]=null}};function Ag(u){this._internalRoot=u}Ag.prototype.unstable_scheduleHydration=function(u){if(u){var f=vO();u={blockedOn:null,target:u,priority:f};for(var m=0;m<Zs.length&&f!==0&&f<Zs[m].priority;m++);Zs.splice(m,0,u),m===0&&JR(u)}};var nD=t.version;if(nD!=="19.1.0")throw Error(r(527,nD,"19.1.0"));U.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var ZK={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kg.isDisabled&&kg.supportsFiber)try{Br=kg.inject(ZK),an=kg}catch{}}return Sh.createRoot=function(u,f){if(!i(u))throw Error(r(299));var m=!1,y="",C=v_,k=b_,D=x_,z=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(k=f.onCaughtError),f.onRecoverableError!==void 0&&(D=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(z=f.unstable_transitionCallbacks)),f=qR(u,1,!1,null,null,m,y,C,k,D,z,null),u[nu]=f.current,P1(u),new tw(f)},Sh.hydrateRoot=function(u,f,m){if(!i(u))throw Error(r(299));var y=!1,C="",k=v_,D=b_,z=x_,K=null,lt=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(k=m.onUncaughtError),m.onCaughtError!==void 0&&(D=m.onCaughtError),m.onRecoverableError!==void 0&&(z=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(K=m.unstable_transitionCallbacks),m.formState!==void 0&&(lt=m.formState)),f=qR(u,1,!0,f,m??null,y,C,k,D,z,K,lt),f.context=HR(null),m=f.current,y=ii(),y=G0(y),C=Ds(y),C.callback=null,Ms(m,C,y),m=y,f.current.lanes=m,Af(f,m),ga(f),u[nu]=f.current,P1(u),new Ag(f)},Sh.version="19.1.0",Sh}var hD;function u7(){if(hD)return rw.exports;hD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),rw.exports=l7(),rw.exports}var c7=u7();/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),h7=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),dD=e=>{const t=h7(e);return t.charAt(0).toUpperCase()+t.slice(1)},W4=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),d7=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=Tt.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},l)=>Tt.createElement("svg",{ref:l,...p7,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:W4("lucide",i),...!a&&!d7(o)&&{"aria-hidden":"true"},...o},[...s.map(([c,h])=>Tt.createElement(c,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=(e,t)=>{const n=Tt.forwardRef(({className:r,...i},a)=>Tt.createElement(m7,{ref:a,iconNode:t,className:W4(`lucide-${f7(dD(e))}`,`lucide-${e}`,r),...i}));return n.displayName=dD(e),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],y7=xo("activity",g7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],pD=xo("brain",v7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],x7=xo("calendar",b7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],S7=xo("chart-column",w7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],T7=xo("circle-check-big",C7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],A7=xo("heart",$7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],I7=xo("trending-up",k7);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],O7=xo("triangle-alert",E7);function G4(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=G4(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ve(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=G4(e))&&(r&&(r+=" "),r+=t);return r}var ow,mD;function Qr(){if(mD)return ow;mD=1;var e=Array.isArray;return ow=e,ow}var lw,gD;function q4(){if(gD)return lw;gD=1;var e=typeof Ig=="object"&&Ig&&Ig.Object===Object&&Ig;return lw=e,lw}var uw,yD;function Ba(){if(yD)return uw;yD=1;var e=q4(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return uw=n,uw}var cw,vD;function Gd(){if(vD)return cw;vD=1;var e=Ba(),t=e.Symbol;return cw=t,cw}var fw,bD;function N7(){if(bD)return fw;bD=1;var e=Gd(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=n.call(s,i),l=s[i];try{s[i]=void 0;var c=!0}catch{}var h=r.call(s);return c&&(o?s[i]=l:delete s[i]),h}return fw=a,fw}var hw,xD;function _7(){if(xD)return hw;xD=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return hw=n,hw}var dw,wD;function Cs(){if(wD)return dw;wD=1;var e=Gd(),t=N7(),n=_7(),r="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?t(o):n(o)}return dw=s,dw}var pw,SD;function Ts(){if(SD)return pw;SD=1;function e(t){return t!=null&&typeof t=="object"}return pw=e,pw}var mw,CD;function Yc(){if(CD)return mw;CD=1;var e=Cs(),t=Ts(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return mw=r,mw}var gw,TD;function EA(){if(TD)return gw;TD=1;var e=Qr(),t=Yc(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return gw=i,gw}var yw,$D;function wo(){if($D)return yw;$D=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return yw=e,yw}var vw,AD;function OA(){if(AD)return vw;AD=1;var e=Cs(),t=wo(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==a}return vw=s,vw}var bw,kD;function R7(){if(kD)return bw;kD=1;var e=Ba(),t=e["__core-js_shared__"];return bw=t,bw}var xw,ID;function D7(){if(ID)return xw;ID=1;var e=R7(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return xw=n,xw}var ww,ED;function H4(){if(ED)return ww;ED=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return ww=n,ww}var Sw,OD;function M7(){if(OD)return Sw;OD=1;var e=OA(),t=D7(),n=wo(),r=H4(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,c=o.hasOwnProperty,h=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(p){if(!n(p)||t(p))return!1;var g=e(p)?h:a;return g.test(r(p))}return Sw=d,Sw}var Cw,ND;function P7(){if(ND)return Cw;ND=1;function e(t,n){return t==null?void 0:t[n]}return Cw=e,Cw}var Tw,_D;function zl(){if(_D)return Tw;_D=1;var e=M7(),t=P7();function n(r,i){var a=t(r,i);return e(a)?a:void 0}return Tw=n,Tw}var $w,RD;function Pv(){if(RD)return $w;RD=1;var e=zl(),t=e(Object,"create");return $w=t,$w}var Aw,DD;function F7(){if(DD)return Aw;DD=1;var e=Pv();function t(){this.__data__=e?e(null):{},this.size=0}return Aw=t,Aw}var kw,MD;function L7(){if(MD)return kw;MD=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return kw=e,kw}var Iw,PD;function B7(){if(PD)return Iw;PD=1;var e=Pv(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return r.call(s,a)?s[a]:void 0}return Iw=i,Iw}var Ew,FD;function z7(){if(FD)return Ew;FD=1;var e=Pv(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var a=this.__data__;return e?a[i]!==void 0:n.call(a,i)}return Ew=r,Ew}var Ow,LD;function j7(){if(LD)return Ow;LD=1;var e=Pv(),t="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&i===void 0?t:i,this}return Ow=n,Ow}var Nw,BD;function U7(){if(BD)return Nw;BD=1;var e=F7(),t=L7(),n=B7(),r=z7(),i=j7();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Nw=a,Nw}var _w,zD;function V7(){if(zD)return _w;zD=1;function e(){this.__data__=[],this.size=0}return _w=e,_w}var Rw,jD;function NA(){if(jD)return Rw;jD=1;function e(t,n){return t===n||t!==t&&n!==n}return Rw=e,Rw}var Dw,UD;function Fv(){if(UD)return Dw;UD=1;var e=NA();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Dw=t,Dw}var Mw,VD;function W7(){if(VD)return Mw;VD=1;var e=Fv(),t=Array.prototype,n=t.splice;function r(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return Mw=r,Mw}var Pw,WD;function G7(){if(WD)return Pw;WD=1;var e=Fv();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return Pw=t,Pw}var Fw,GD;function q7(){if(GD)return Fw;GD=1;var e=Fv();function t(n){return e(this.__data__,n)>-1}return Fw=t,Fw}var Lw,qD;function H7(){if(qD)return Lw;qD=1;var e=Fv();function t(n,r){var i=this.__data__,a=e(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return Lw=t,Lw}var Bw,HD;function Lv(){if(HD)return Bw;HD=1;var e=V7(),t=W7(),n=G7(),r=q7(),i=H7();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Bw=a,Bw}var zw,XD;function _A(){if(XD)return zw;XD=1;var e=zl(),t=Ba(),n=e(t,"Map");return zw=n,zw}var jw,KD;function X7(){if(KD)return jw;KD=1;var e=U7(),t=Lv(),n=_A();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return jw=r,jw}var Uw,YD;function K7(){if(YD)return Uw;YD=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Uw=e,Uw}var Vw,ZD;function Bv(){if(ZD)return Vw;ZD=1;var e=K7();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Vw=t,Vw}var Ww,QD;function Y7(){if(QD)return Ww;QD=1;var e=Bv();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Ww=t,Ww}var Gw,JD;function Z7(){if(JD)return Gw;JD=1;var e=Bv();function t(n){return e(this,n).get(n)}return Gw=t,Gw}var qw,tM;function Q7(){if(tM)return qw;tM=1;var e=Bv();function t(n){return e(this,n).has(n)}return qw=t,qw}var Hw,eM;function J7(){if(eM)return Hw;eM=1;var e=Bv();function t(n,r){var i=e(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return Hw=t,Hw}var Xw,nM;function RA(){if(nM)return Xw;nM=1;var e=X7(),t=Y7(),n=Z7(),r=Q7(),i=J7();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Xw=a,Xw}var Kw,rM;function X4(){if(rM)return Kw;rM=1;var e=RA(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var c=r.apply(this,s);return a.cache=l.set(o,c)||l,c};return a.cache=new(n.Cache||e),a}return n.Cache=e,Kw=n,Kw}var Yw,iM;function t9(){if(iM)return Yw;iM=1;var e=X4(),t=500;function n(r){var i=e(r,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return Yw=n,Yw}var Zw,aM;function e9(){if(aM)return Zw;aM=1;var e=t9(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,l,c){a.push(l?c.replace(n,"$1"):o||s)}),a});return Zw=r,Zw}var Qw,sM;function DA(){if(sM)return Qw;sM=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return Qw=e,Qw}var Jw,oM;function n9(){if(oM)return Jw;oM=1;var e=Gd(),t=DA(),n=Qr(),r=Yc(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return t(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Jw=s,Jw}var tS,lM;function K4(){if(lM)return tS;lM=1;var e=n9();function t(n){return n==null?"":e(n)}return tS=t,tS}var eS,uM;function Y4(){if(uM)return eS;uM=1;var e=Qr(),t=EA(),n=e9(),r=K4();function i(a,s){return e(a)?a:t(a,s)?[a]:n(r(a))}return eS=i,eS}var nS,cM;function zv(){if(cM)return nS;cM=1;var e=Yc();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return nS=t,nS}var rS,fM;function MA(){if(fM)return rS;fM=1;var e=Y4(),t=zv();function n(r,i){i=e(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[t(i[a++])];return a&&a==s?r:void 0}return rS=n,rS}var iS,hM;function Z4(){if(hM)return iS;hM=1;var e=MA();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return iS=t,iS}var r9=Z4();const Di=Le(r9);var aS,dM;function i9(){if(dM)return aS;dM=1;function e(t){return t==null}return aS=e,aS}var a9=i9();const ce=Le(a9);var sS,pM;function s9(){if(pM)return sS;pM=1;var e=Cs(),t=Qr(),n=Ts(),r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return sS=i,sS}var o9=s9();const wl=Le(o9);var l9=OA();const te=Le(l9);var u9=wo();const Zc=Le(u9);var oS={exports:{}},Ae={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mM;function c9(){if(mM)return Ae;mM=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function x(b){if(typeof b=="object"&&b!==null){var w=b.$$typeof;switch(w){case e:switch(b=b.type,b){case n:case i:case r:case c:case h:return b;default:switch(b=b&&b.$$typeof,b){case o:case s:case l:case p:case d:case a:return b;default:return w}}case t:return w}}}return Ae.ContextConsumer=s,Ae.ContextProvider=a,Ae.Element=e,Ae.ForwardRef=l,Ae.Fragment=n,Ae.Lazy=p,Ae.Memo=d,Ae.Portal=t,Ae.Profiler=i,Ae.StrictMode=r,Ae.Suspense=c,Ae.SuspenseList=h,Ae.isAsyncMode=function(){return!1},Ae.isConcurrentMode=function(){return!1},Ae.isContextConsumer=function(b){return x(b)===s},Ae.isContextProvider=function(b){return x(b)===a},Ae.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},Ae.isForwardRef=function(b){return x(b)===l},Ae.isFragment=function(b){return x(b)===n},Ae.isLazy=function(b){return x(b)===p},Ae.isMemo=function(b){return x(b)===d},Ae.isPortal=function(b){return x(b)===t},Ae.isProfiler=function(b){return x(b)===i},Ae.isStrictMode=function(b){return x(b)===r},Ae.isSuspense=function(b){return x(b)===c},Ae.isSuspenseList=function(b){return x(b)===h},Ae.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===c||b===h||b===g||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===d||b.$$typeof===a||b.$$typeof===s||b.$$typeof===l||b.$$typeof===v||b.getModuleId!==void 0)},Ae.typeOf=x,Ae}var gM;function f9(){return gM||(gM=1,oS.exports=c9()),oS.exports}var h9=f9(),lS,yM;function Q4(){if(yM)return lS;yM=1;var e=Cs(),t=Ts(),n="[object Number]";function r(i){return typeof i=="number"||t(i)&&e(i)==n}return lS=r,lS}var uS,vM;function d9(){if(vM)return uS;vM=1;var e=Q4();function t(n){return e(n)&&n!=+n}return uS=t,uS}var p9=d9();const Qc=Le(p9);var m9=Q4();const g9=Le(m9);var na=function(t){return t===0?0:t>0?1:-1},ul=function(t){return wl(t)&&t.indexOf("%")===t.length-1},Et=function(t){return g9(t)&&!Qc(t)},Ln=function(t){return Et(t)||wl(t)},y9=0,Jc=function(t){var n=++y9;return"".concat(t||"").concat(n)},Sl=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Et(t)&&!wl(t))return r;var a;if(ul(t)){var s=t.indexOf("%");a=n*parseFloat(t.slice(0,s))/100}else a=+t;return Qc(a)&&(a=r),i&&a>n&&(a=n),a},no=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},v9=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},i=0;i<n;i++)if(!r[t[i]])r[t[i]]=!0;else return!0;return!1},ir=function(t,n){return Et(t)&&Et(n)?function(r){return t+r*(n-t)}:function(){return n}};function cy(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Di(r,t))===n})}var b9=function(t,n){return Et(t)&&Et(n)?t-n:wl(t)&&wl(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function tc(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function A$(e){"@babel/helpers - typeof";return A$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A$(e)}var x9=["viewBox","children"],w9=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],bM=["points","pathLength"],cS={svg:x9,polygon:bM,polyline:bM},PA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],fy=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(Tt.isValidElement(t)&&(r=t.props),!Zc(r))return null;var i={};return Object.keys(r).forEach(function(a){PA.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},S9=function(t,n,r){return function(i){return t(n,r,i),null}},hy=function(t,n,r){if(!Zc(t)||A$(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var s=t[a];PA.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=S9(s,n,r))}),i},C9=["children"],T9=["children"];function xM(e,t){if(e==null)return{};var n=$9(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $9(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function k$(e){"@babel/helpers - typeof";return k$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k$(e)}var wM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},fs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},SM=null,fS=null,FA=function e(t){if(t===SM&&Array.isArray(fS))return fS;var n=[];return Tt.Children.forEach(t,function(r){ce(r)||(h9.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),fS=n,SM=t,n};function Mi(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(i){return fs(i)}):r=[fs(t)],FA(e).forEach(function(i){var a=Di(i,"type.displayName")||Di(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function li(e,t){var n=Mi(e,t);return n&&n[0]}var CM=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,i=n.height;return!(!Et(r)||r<=0||!Et(i)||i<=0)},A9=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],k9=function(t){return t&&t.type&&wl(t.type)&&A9.indexOf(t.type)>=0},J4=function(t){return t&&k$(t)==="object"&&"clipDot"in t},I9=function(t,n,r,i){var a,s=(a=cS==null?void 0:cS[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!te(t)&&(i&&s.includes(n)||w9.includes(n))||r&&PA.includes(n)},re=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(Tt.isValidElement(t)&&(i=t.props),!Zc(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;I9((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},I$=function e(t,n){if(t===n)return!0;var r=Tt.Children.count(t);if(r!==Tt.Children.count(n))return!1;if(r===0)return!0;if(r===1)return TM(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=t[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!e(a,s))return!1}else if(!TM(a,s))return!1}return!0},TM=function(t,n){if(ce(t)&&ce(n))return!0;if(!ce(t)&&!ce(n)){var r=t.props||{},i=r.children,a=xM(r,C9),s=n.props||{},o=s.children,l=xM(s,T9);return i&&o?tc(a,l)&&I$(i,o):!i&&!o?tc(a,l):!1}return!1},$M=function(t,n){var r=[],i={};return FA(t).forEach(function(a,s){if(k9(a))r.push(a);else if(a){var o=fs(a.type),l=n[o]||{},c=l.handler,h=l.once;if(c&&(!h||!i[o])){var d=c(a,o,s);r.push(d),i[o]=!0}}}),r},E9=function(t){var n=t&&t.type;return n&&wM[n]?wM[n]:null},O9=function(t,n){return FA(n).indexOf(t)},N9=["children","width","height","viewBox","className","style","title","desc"];function E$(){return E$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E$.apply(this,arguments)}function _9(e,t){if(e==null)return{};var n=R9(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function R9(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function O$(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,a=e.className,s=e.style,o=e.title,l=e.desc,c=_9(e,N9),h=i||{width:n,height:r,x:0,y:0},d=ve("recharts-surface",a);return Z.createElement("svg",E$({},re(c,!0,"svg"),{className:d,width:n,height:r,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),Z.createElement("title",null,o),Z.createElement("desc",null,l),t)}var D9=["children","className"];function N$(){return N$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N$.apply(this,arguments)}function M9(e,t){if(e==null)return{};var n=P9(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function P9(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var He=Z.forwardRef(function(e,t){var n=e.children,r=e.className,i=M9(e,D9),a=ve("recharts-layer",r);return Z.createElement("g",N$({className:a},re(i,!0),{ref:t}),n)}),hs=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},hS,AM;function F9(){if(AM)return hS;AM=1;function e(t,n,r){var i=-1,a=t.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var s=Array(a);++i<a;)s[i]=t[i+n];return s}return hS=e,hS}var dS,kM;function L9(){if(kM)return dS;kM=1;var e=F9();function t(n,r,i){var a=n.length;return i=i===void 0?a:i,!r&&i>=a?n:e(n,r,i)}return dS=t,dS}var pS,IM;function tj(){if(IM)return pS;IM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function l(c){return o.test(c)}return pS=l,pS}var mS,EM;function B9(){if(EM)return mS;EM=1;function e(t){return t.split("")}return mS=e,mS}var gS,OM;function z9(){if(OM)return gS;OM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+o+"|"+l+")",h="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",v=c+"?",x="["+a+"]?",b="(?:"+g+"(?:"+[h,d,p].join("|")+")"+x+v+")*",w=x+v+b,S="(?:"+[h+o+"?",o,d,p,s].join("|")+")",T=RegExp(l+"(?="+l+")|"+S+w,"g");function $(A){return A.match(T)||[]}return gS=$,gS}var yS,NM;function j9(){if(NM)return yS;NM=1;var e=B9(),t=tj(),n=z9();function r(i){return t(i)?n(i):e(i)}return yS=r,yS}var vS,_M;function U9(){if(_M)return vS;_M=1;var e=L9(),t=tj(),n=j9(),r=K4();function i(a){return function(s){s=r(s);var o=t(s)?n(s):void 0,l=o?o[0]:s.charAt(0),c=o?e(o,1).join(""):s.slice(1);return l[a]()+c}}return vS=i,vS}var bS,RM;function V9(){if(RM)return bS;RM=1;var e=U9(),t=e("toUpperCase");return bS=t,bS}var W9=V9();const jv=Le(W9);function qe(e){return function(){return e}}const ej=Math.cos,dy=Math.sin,ca=Math.sqrt,py=Math.PI,Uv=2*py,_$=Math.PI,R$=2*_$,rl=1e-6,G9=R$-rl;function nj(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function q9(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return nj;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class H9{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?nj:q9(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-t,c=i-n,h=s-t,d=o-n,p=h*h+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>rl)if(!(Math.abs(d*l-c*h)>rl)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-s,v=i-o,x=l*l+c*c,b=g*g+v*v,w=Math.sqrt(x),S=Math.sqrt(p),T=a*Math.tan((_$-Math.acos((x+p-b)/(2*w*S)))/2),$=T/S,A=T/w;Math.abs($-1)>rl&&this._append`L${t+$*h},${n+$*d}`,this._append`A${a},${a},0,0,${+(d*g>h*v)},${this._x1=t+A*l},${this._y1=n+A*c}`}}arc(t,n,r,i,a,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=t+o,h=n+l,d=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>rl||Math.abs(this._y1-h)>rl)&&this._append`L${c},${h}`,r&&(p<0&&(p=p%R$+R$),p>G9?this._append`A${r},${r},0,1,${d},${t-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=h}`:p>rl&&this._append`A${r},${r},0,${+(p>=_$)},${d},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function LA(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new H9(t)}function BA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rj(e){this._context=e}rj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Vv(e){return new rj(e)}function ij(e){return e[0]}function aj(e){return e[1]}function sj(e,t){var n=qe(!0),r=null,i=Vv,a=null,s=LA(o);e=typeof e=="function"?e:e===void 0?ij:qe(e),t=typeof t=="function"?t:t===void 0?aj:qe(t);function o(l){var c,h=(l=BA(l)).length,d,p=!1,g;for(r==null&&(a=i(g=s())),c=0;c<=h;++c)!(c<h&&n(d=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(d,c,l),+t(d,c,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:qe(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:qe(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:qe(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function Eg(e,t,n){var r=null,i=qe(!0),a=null,s=Vv,o=null,l=LA(c);e=typeof e=="function"?e:e===void 0?ij:qe(+e),t=typeof t=="function"?t:qe(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?aj:qe(+n);function c(d){var p,g,v,x=(d=BA(d)).length,b,w=!1,S,T=new Array(x),$=new Array(x);for(a==null&&(o=s(S=l())),p=0;p<=x;++p){if(!(p<x&&i(b=d[p],p,d))===w)if(w=!w)g=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=g;--v)o.point(T[v],$[v]);o.lineEnd(),o.areaEnd()}w&&(T[p]=+e(b,p,d),$[p]=+t(b,p,d),o.point(r?+r(b,p,d):T[p],n?+n(b,p,d):$[p]))}if(S)return o=null,S+""||null}function h(){return sj().defined(i).curve(s).context(a)}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:qe(+d),r=null,c):e},c.x0=function(d){return arguments.length?(e=typeof d=="function"?d:qe(+d),c):e},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:qe(+d),c):r},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:qe(+d),n=null,c):t},c.y0=function(d){return arguments.length?(t=typeof d=="function"?d:qe(+d),c):t},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:qe(+d),c):n},c.lineX0=c.lineY0=function(){return h().x(e).y(t)},c.lineY1=function(){return h().x(e).y(n)},c.lineX1=function(){return h().x(r).y(t)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:qe(!!d),c):i},c.curve=function(d){return arguments.length?(s=d,a!=null&&(o=s(a)),c):s},c.context=function(d){return arguments.length?(d==null?a=o=null:o=s(a=d),c):a},c}class oj{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function X9(e){return new oj(e,!0)}function K9(e){return new oj(e,!1)}const zA={draw(e,t){const n=ca(t/py);e.moveTo(n,0),e.arc(0,0,n,0,Uv)}},Y9={draw(e,t){const n=ca(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},lj=ca(1/3),Z9=lj*2,Q9={draw(e,t){const n=ca(t/Z9),r=n*lj;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},J9={draw(e,t){const n=ca(t),r=-n/2;e.rect(r,r,n,n)}},tY=.8908130915292852,uj=dy(py/10)/dy(7*py/10),eY=dy(Uv/10)*uj,nY=-ej(Uv/10)*uj,rY={draw(e,t){const n=ca(t*tY),r=eY*n,i=nY*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const s=Uv*a/5,o=ej(s),l=dy(s);e.lineTo(l*n,-o*n),e.lineTo(o*r-l*i,l*r+o*i)}e.closePath()}},xS=ca(3),iY={draw(e,t){const n=-ca(t/(xS*3));e.moveTo(0,n*2),e.lineTo(-xS*n,-n),e.lineTo(xS*n,-n),e.closePath()}},$i=-.5,Ai=ca(3)/2,D$=1/ca(12),aY=(D$/2+1)*3,sY={draw(e,t){const n=ca(t/aY),r=n/2,i=n*D$,a=r,s=n*D$+n,o=-a,l=s;e.moveTo(r,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo($i*r-Ai*i,Ai*r+$i*i),e.lineTo($i*a-Ai*s,Ai*a+$i*s),e.lineTo($i*o-Ai*l,Ai*o+$i*l),e.lineTo($i*r+Ai*i,$i*i-Ai*r),e.lineTo($i*a+Ai*s,$i*s-Ai*a),e.lineTo($i*o+Ai*l,$i*l-Ai*o),e.closePath()}};function oY(e,t){let n=null,r=LA(i);e=typeof e=="function"?e:qe(e||zA),t=typeof t=="function"?t:qe(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:qe(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:qe(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function my(){}function gy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function cj(e){this._context=e}cj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lY(e){return new cj(e)}function fj(e){this._context=e}fj.prototype={areaStart:my,areaEnd:my,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uY(e){return new fj(e)}function hj(e){this._context=e}hj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cY(e){return new hj(e)}function dj(e){this._context=e}dj.prototype={areaStart:my,areaEnd:my,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function fY(e){return new dj(e)}function DM(e){return e<0?-1:1}function MM(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(DM(a)+DM(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function PM(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function wS(e,t,n){var r=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-r)/3;e._context.bezierCurveTo(r+o,i+o*t,a-o,s-o*n,a,s)}function yy(e){this._context=e}yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wS(this,this._t0,PM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wS(this,PM(this,n=MM(this,e,t)),n);break;default:wS(this,this._t0,n=MM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function pj(e){this._context=new mj(e)}(pj.prototype=Object.create(yy.prototype)).point=function(e,t){yy.prototype.point.call(this,t,e)};function mj(e){this._context=e}mj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function hY(e){return new yy(e)}function dY(e){return new pj(e)}function gj(e){this._context=e}gj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=FM(e),i=FM(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function FM(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function pY(e){return new gj(e)}function Wv(e,t){this._context=e,this._t=t}Wv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function mY(e){return new Wv(e,.5)}function gY(e){return new Wv(e,0)}function yY(e){return new Wv(e,1)}function fc(e,t){if((s=e.length)>1)for(var n=1,r,i,a=e[t[0]],s,o=a.length;n<s;++n)for(i=a,a=e[t[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function M$(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function vY(e,t){return e[t]}function bY(e){const t=[];return t.key=e,t}function xY(){var e=qe([]),t=M$,n=fc,r=vY;function i(a){var s=Array.from(e.apply(this,arguments),bY),o,l=s.length,c=-1,h;for(const d of a)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(d,s[o].key,c,a)]).data=d;for(o=0,h=BA(t(s));o<l;++o)s[h[o]].index=o;return n(s,h),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:qe(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:qe(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?M$:typeof a=="function"?a:qe(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??fc,i):n},i}function wY(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=e[n][i][1]||0;if(s)for(n=0;n<r;++n)e[n][i][1]/=s}fc(e,t)}}function SY(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=e[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}fc(e,t)}}function CY(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,l=0,c=0;o<s;++o){for(var h=e[t[o]],d=h[r][1]||0,p=h[r-1][1]||0,g=(d-p)/2,v=0;v<o;++v){var x=e[t[v]],b=x[r][1]||0,w=x[r-1][1]||0;g+=b-w}l+=d,c+=g*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,fc(e,t)}}function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}var TY=["type","size","sizeType"];function P$(){return P$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P$.apply(this,arguments)}function LM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function BM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LM(Object(n),!0).forEach(function(r){$Y(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $Y(e,t,n){return t=AY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AY(e){var t=kY(e,"string");return Qh(t)=="symbol"?t:t+""}function kY(e,t){if(Qh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Qh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IY(e,t){if(e==null)return{};var n=EY(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function EY(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var yj={symbolCircle:zA,symbolCross:Y9,symbolDiamond:Q9,symbolSquare:J9,symbolStar:rY,symbolTriangle:iY,symbolWye:sY},OY=Math.PI/180,NY=function(t){var n="symbol".concat(jv(t));return yj[n]||zA},_Y=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*OY;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},RY=function(t,n){yj["symbol".concat(jv(t))]=n},jA=function(t){var n=t.type,r=n===void 0?"circle":n,i=t.size,a=i===void 0?64:i,s=t.sizeType,o=s===void 0?"area":s,l=IY(t,TY),c=BM(BM({},l),{},{type:r,size:a,sizeType:o}),h=function(){var b=NY(r),w=oY().type(b).size(_Y(a,o,r));return w()},d=c.className,p=c.cx,g=c.cy,v=re(c,!0);return p===+p&&g===+g&&a===+a?Z.createElement("path",P$({},v,{className:ve("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(g,")"),d:h()})):null};jA.registerSymbol=RY;function hc(e){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(e)}function F$(){return F$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F$.apply(this,arguments)}function zM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function DY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zM(Object(n),!0).forEach(function(r){Jh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bj(r.key),r)}}function FY(e,t,n){return t&&PY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LY(e,t,n){return t=vy(t),BY(e,vj()?Reflect.construct(t,n||[],vy(e).constructor):t.apply(e,n))}function BY(e,t){if(t&&(hc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zY(e)}function zY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vj=function(){return!!e})()}function vy(e){return vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vy(e)}function jY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L$(e,t)}function L$(e,t){return L$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},L$(e,t)}function Jh(e,t,n){return t=bj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bj(e){var t=UY(e,"string");return hc(t)=="symbol"?t:t+""}function UY(e,t){if(hc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qi=32,UA=function(e){function t(){return MY(this,t),LY(this,t,arguments)}return jY(t,e),FY(t,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=qi/2,s=qi/6,o=qi/3,l=r.inactive?i:r.color;if(r.type==="plainline")return Z.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:qi,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return Z.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(qi,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return Z.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(qi/8,"h").concat(qi,"v").concat(qi*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Z.isValidElement(r.legendIcon)){var c=DY({},r);return delete c.legendIcon,Z.cloneElement(r.legendIcon,c)}return Z.createElement(jA,{fill:l,cx:a,cy:a,size:qi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,h={x:0,y:0,width:qi,height:qi},d={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(g,v){var x=g.formatter||l,b=ve(Jh(Jh({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",g.inactive));if(g.type==="none")return null;var w=te(g.value)?null:g.value;hs(!te(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=g.inactive?c:g.color;return Z.createElement("li",F$({className:b,style:d,key:"legend-item-".concat(v)},hy(r.props,g,v)),Z.createElement(O$,{width:s,height:s,viewBox:h,style:p},r.renderIcon(g)),Z.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},x?x(w,g,v):w))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return Z.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(Tt.PureComponent);Jh(UA,"displayName","Legend");Jh(UA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var SS,jM;function VY(){if(jM)return SS;jM=1;var e=Lv();function t(){this.__data__=new e,this.size=0}return SS=t,SS}var CS,UM;function WY(){if(UM)return CS;UM=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return CS=e,CS}var TS,VM;function GY(){if(VM)return TS;VM=1;function e(t){return this.__data__.get(t)}return TS=e,TS}var $S,WM;function qY(){if(WM)return $S;WM=1;function e(t){return this.__data__.has(t)}return $S=e,$S}var AS,GM;function HY(){if(GM)return AS;GM=1;var e=Lv(),t=_A(),n=RA(),r=200;function i(a,s){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return AS=i,AS}var kS,qM;function xj(){if(qM)return kS;qM=1;var e=Lv(),t=VY(),n=WY(),r=GY(),i=qY(),a=HY();function s(o){var l=this.__data__=new e(o);this.size=l.size}return s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,kS=s,kS}var IS,HM;function XY(){if(HM)return IS;HM=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return IS=t,IS}var ES,XM;function KY(){if(XM)return ES;XM=1;function e(t){return this.__data__.has(t)}return ES=e,ES}var OS,KM;function wj(){if(KM)return OS;KM=1;var e=RA(),t=XY(),n=KY();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,OS=r,OS}var NS,YM;function Sj(){if(YM)return NS;YM=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return NS=e,NS}var _S,ZM;function Cj(){if(ZM)return _S;ZM=1;function e(t,n){return t.has(n)}return _S=e,_S}var RS,QM;function Tj(){if(QM)return RS;QM=1;var e=wj(),t=Sj(),n=Cj(),r=1,i=2;function a(s,o,l,c,h,d){var p=l&r,g=s.length,v=o.length;if(g!=v&&!(p&&v>g))return!1;var x=d.get(s),b=d.get(o);if(x&&b)return x==o&&b==s;var w=-1,S=!0,T=l&i?new e:void 0;for(d.set(s,o),d.set(o,s);++w<g;){var $=s[w],A=o[w];if(c)var I=p?c(A,$,w,o,s,d):c($,A,w,s,o,d);if(I!==void 0){if(I)continue;S=!1;break}if(T){if(!t(o,function(O,N){if(!n(T,N)&&($===O||h($,O,l,c,d)))return T.push(N)})){S=!1;break}}else if(!($===A||h($,A,l,c,d))){S=!1;break}}return d.delete(s),d.delete(o),S}return RS=a,RS}var DS,JM;function YY(){if(JM)return DS;JM=1;var e=Ba(),t=e.Uint8Array;return DS=t,DS}var MS,tP;function ZY(){if(tP)return MS;tP=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,a){r[++n]=[a,i]}),r}return MS=e,MS}var PS,eP;function VA(){if(eP)return PS;eP=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return PS=e,PS}var FS,nP;function QY(){if(nP)return FS;nP=1;var e=Gd(),t=YY(),n=NA(),r=Tj(),i=ZY(),a=VA(),s=1,o=2,l="[object Boolean]",c="[object Date]",h="[object Error]",d="[object Map]",p="[object Number]",g="[object RegExp]",v="[object Set]",x="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",S="[object DataView]",T=e?e.prototype:void 0,$=T?T.valueOf:void 0;function A(I,O,N,_,R,E,F){switch(N){case S:if(I.byteLength!=O.byteLength||I.byteOffset!=O.byteOffset)return!1;I=I.buffer,O=O.buffer;case w:return!(I.byteLength!=O.byteLength||!E(new t(I),new t(O)));case l:case c:case p:return n(+I,+O);case h:return I.name==O.name&&I.message==O.message;case g:case x:return I==O+"";case d:var M=i;case v:var B=_&s;if(M||(M=a),I.size!=O.size&&!B)return!1;var j=F.get(I);if(j)return j==O;_|=o,F.set(I,O);var P=r(M(I),M(O),_,R,E,F);return F.delete(I),P;case b:if($)return $.call(I)==$.call(O)}return!1}return FS=A,FS}var LS,rP;function $j(){if(rP)return LS;rP=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return LS=e,LS}var BS,iP;function JY(){if(iP)return BS;iP=1;var e=$j(),t=Qr();function n(r,i,a){var s=i(r);return t(r)?s:e(s,a(r))}return BS=n,BS}var zS,aP;function tZ(){if(aP)return zS;aP=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,s=[];++r<i;){var o=t[r];n(o,r,t)&&(s[a++]=o)}return s}return zS=e,zS}var jS,sP;function eZ(){if(sP)return jS;sP=1;function e(){return[]}return jS=e,jS}var US,oP;function nZ(){if(oP)return US;oP=1;var e=tZ(),t=eZ(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return r.call(s,o)}))}:t;return US=a,US}var VS,lP;function rZ(){if(lP)return VS;lP=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return VS=e,VS}var WS,uP;function iZ(){if(uP)return WS;uP=1;var e=Cs(),t=Ts(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return WS=r,WS}var GS,cP;function WA(){if(cP)return GS;cP=1;var e=iZ(),t=Ts(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return GS=a,GS}var Ph={exports:{}},qS,fP;function aZ(){if(fP)return qS;fP=1;function e(){return!1}return qS=e,qS}Ph.exports;var hP;function Aj(){return hP||(hP=1,function(e,t){var n=Ba(),r=aZ(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;e.exports=c}(Ph,Ph.exports)),Ph.exports}var HS,dP;function GA(){if(dP)return HS;dP=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return HS=n,HS}var XS,pP;function qA(){if(pP)return XS;pP=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return XS=t,XS}var KS,mP;function sZ(){if(mP)return KS;mP=1;var e=Cs(),t=qA(),n=Ts(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",c="[object Map]",h="[object Number]",d="[object Object]",p="[object RegExp]",g="[object Set]",v="[object String]",x="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",S="[object Float32Array]",T="[object Float64Array]",$="[object Int8Array]",A="[object Int16Array]",I="[object Int32Array]",O="[object Uint8Array]",N="[object Uint8ClampedArray]",_="[object Uint16Array]",R="[object Uint32Array]",E={};E[S]=E[T]=E[$]=E[A]=E[I]=E[O]=E[N]=E[_]=E[R]=!0,E[r]=E[i]=E[b]=E[a]=E[w]=E[s]=E[o]=E[l]=E[c]=E[h]=E[d]=E[p]=E[g]=E[v]=E[x]=!1;function F(M){return n(M)&&t(M.length)&&!!E[e(M)]}return KS=F,KS}var YS,gP;function kj(){if(gP)return YS;gP=1;function e(t){return function(n){return t(n)}}return YS=e,YS}var Fh={exports:{}};Fh.exports;var yP;function oZ(){return yP||(yP=1,function(e,t){var n=q4(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(Fh,Fh.exports)),Fh.exports}var ZS,vP;function Ij(){if(vP)return ZS;vP=1;var e=sZ(),t=kj(),n=oZ(),r=n&&n.isTypedArray,i=r?t(r):e;return ZS=i,ZS}var QS,bP;function lZ(){if(bP)return QS;bP=1;var e=rZ(),t=WA(),n=Qr(),r=Aj(),i=GA(),a=Ij(),s=Object.prototype,o=s.hasOwnProperty;function l(c,h){var d=n(c),p=!d&&t(c),g=!d&&!p&&r(c),v=!d&&!p&&!g&&a(c),x=d||p||g||v,b=x?e(c.length,String):[],w=b.length;for(var S in c)(h||o.call(c,S))&&!(x&&(S=="length"||g&&(S=="offset"||S=="parent")||v&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||i(S,w)))&&b.push(S);return b}return QS=l,QS}var JS,xP;function uZ(){if(xP)return JS;xP=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return JS=t,JS}var tC,wP;function Ej(){if(wP)return tC;wP=1;function e(t,n){return function(r){return t(n(r))}}return tC=e,tC}var eC,SP;function cZ(){if(SP)return eC;SP=1;var e=Ej(),t=e(Object.keys,Object);return eC=t,eC}var nC,CP;function fZ(){if(CP)return nC;CP=1;var e=uZ(),t=cZ(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return nC=i,nC}var rC,TP;function qd(){if(TP)return rC;TP=1;var e=OA(),t=qA();function n(r){return r!=null&&t(r.length)&&!e(r)}return rC=n,rC}var iC,$P;function Gv(){if($P)return iC;$P=1;var e=lZ(),t=fZ(),n=qd();function r(i){return n(i)?e(i):t(i)}return iC=r,iC}var aC,AP;function hZ(){if(AP)return aC;AP=1;var e=JY(),t=nZ(),n=Gv();function r(i){return e(i,n,t)}return aC=r,aC}var sC,kP;function dZ(){if(kP)return sC;kP=1;var e=hZ(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,l,c,h){var d=o&t,p=e(a),g=p.length,v=e(s),x=v.length;if(g!=x&&!d)return!1;for(var b=g;b--;){var w=p[b];if(!(d?w in s:r.call(s,w)))return!1}var S=h.get(a),T=h.get(s);if(S&&T)return S==s&&T==a;var $=!0;h.set(a,s),h.set(s,a);for(var A=d;++b<g;){w=p[b];var I=a[w],O=s[w];if(l)var N=d?l(O,I,w,s,a,h):l(I,O,w,a,s,h);if(!(N===void 0?I===O||c(I,O,o,l,h):N)){$=!1;break}A||(A=w=="constructor")}if($&&!A){var _=a.constructor,R=s.constructor;_!=R&&"constructor"in a&&"constructor"in s&&!(typeof _=="function"&&_ instanceof _&&typeof R=="function"&&R instanceof R)&&($=!1)}return h.delete(a),h.delete(s),$}return sC=i,sC}var oC,IP;function pZ(){if(IP)return oC;IP=1;var e=zl(),t=Ba(),n=e(t,"DataView");return oC=n,oC}var lC,EP;function mZ(){if(EP)return lC;EP=1;var e=zl(),t=Ba(),n=e(t,"Promise");return lC=n,lC}var uC,OP;function Oj(){if(OP)return uC;OP=1;var e=zl(),t=Ba(),n=e(t,"Set");return uC=n,uC}var cC,NP;function gZ(){if(NP)return cC;NP=1;var e=zl(),t=Ba(),n=e(t,"WeakMap");return cC=n,cC}var fC,_P;function yZ(){if(_P)return fC;_P=1;var e=pZ(),t=_A(),n=mZ(),r=Oj(),i=gZ(),a=Cs(),s=H4(),o="[object Map]",l="[object Object]",c="[object Promise]",h="[object Set]",d="[object WeakMap]",p="[object DataView]",g=s(e),v=s(t),x=s(n),b=s(r),w=s(i),S=a;return(e&&S(new e(new ArrayBuffer(1)))!=p||t&&S(new t)!=o||n&&S(n.resolve())!=c||r&&S(new r)!=h||i&&S(new i)!=d)&&(S=function(T){var $=a(T),A=$==l?T.constructor:void 0,I=A?s(A):"";if(I)switch(I){case g:return p;case v:return o;case x:return c;case b:return h;case w:return d}return $}),fC=S,fC}var hC,RP;function vZ(){if(RP)return hC;RP=1;var e=xj(),t=Tj(),n=QY(),r=dZ(),i=yZ(),a=Qr(),s=Aj(),o=Ij(),l=1,c="[object Arguments]",h="[object Array]",d="[object Object]",p=Object.prototype,g=p.hasOwnProperty;function v(x,b,w,S,T,$){var A=a(x),I=a(b),O=A?h:i(x),N=I?h:i(b);O=O==c?d:O,N=N==c?d:N;var _=O==d,R=N==d,E=O==N;if(E&&s(x)){if(!s(b))return!1;A=!0,_=!1}if(E&&!_)return $||($=new e),A||o(x)?t(x,b,w,S,T,$):n(x,b,O,w,S,T,$);if(!(w&l)){var F=_&&g.call(x,"__wrapped__"),M=R&&g.call(b,"__wrapped__");if(F||M){var B=F?x.value():x,j=M?b.value():b;return $||($=new e),T(B,j,w,S,$)}}return E?($||($=new e),r(x,b,w,S,T,$)):!1}return hC=v,hC}var dC,DP;function HA(){if(DP)return dC;DP=1;var e=vZ(),t=Ts();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,a,s,n,o)}return dC=n,dC}var pC,MP;function bZ(){if(MP)return pC;MP=1;var e=xj(),t=HA(),n=1,r=2;function i(a,s,o,l){var c=o.length,h=c,d=!l;if(a==null)return!h;for(a=Object(a);c--;){var p=o[c];if(d&&p[2]?p[1]!==a[p[0]]:!(p[0]in a))return!1}for(;++c<h;){p=o[c];var g=p[0],v=a[g],x=p[1];if(d&&p[2]){if(v===void 0&&!(g in a))return!1}else{var b=new e;if(l)var w=l(v,x,g,a,s,b);if(!(w===void 0?t(x,v,n|r,l,b):w))return!1}}return!0}return pC=i,pC}var mC,PP;function Nj(){if(PP)return mC;PP=1;var e=wo();function t(n){return n===n&&!e(n)}return mC=t,mC}var gC,FP;function xZ(){if(FP)return gC;FP=1;var e=Nj(),t=Gv();function n(r){for(var i=t(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,e(o)]}return i}return gC=n,gC}var yC,LP;function _j(){if(LP)return yC;LP=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return yC=e,yC}var vC,BP;function wZ(){if(BP)return vC;BP=1;var e=bZ(),t=xZ(),n=_j();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return vC=r,vC}var bC,zP;function SZ(){if(zP)return bC;zP=1;function e(t,n){return t!=null&&n in Object(t)}return bC=e,bC}var xC,jP;function CZ(){if(jP)return xC;jP=1;var e=Y4(),t=WA(),n=Qr(),r=GA(),i=qA(),a=zv();function s(o,l,c){l=e(l,o);for(var h=-1,d=l.length,p=!1;++h<d;){var g=a(l[h]);if(!(p=o!=null&&c(o,g)))break;o=o[g]}return p||++h!=d?p:(d=o==null?0:o.length,!!d&&i(d)&&r(g,d)&&(n(o)||t(o)))}return xC=s,xC}var wC,UP;function TZ(){if(UP)return wC;UP=1;var e=SZ(),t=CZ();function n(r,i){return r!=null&&t(r,i,e)}return wC=n,wC}var SC,VP;function $Z(){if(VP)return SC;VP=1;var e=HA(),t=Z4(),n=TZ(),r=EA(),i=Nj(),a=_j(),s=zv(),o=1,l=2;function c(h,d){return r(h)&&i(d)?a(s(h),d):function(p){var g=t(p,h);return g===void 0&&g===d?n(p,h):e(d,g,o|l)}}return SC=c,SC}var CC,WP;function tf(){if(WP)return CC;WP=1;function e(t){return t}return CC=e,CC}var TC,GP;function AZ(){if(GP)return TC;GP=1;function e(t){return function(n){return n==null?void 0:n[t]}}return TC=e,TC}var $C,qP;function kZ(){if(qP)return $C;qP=1;var e=MA();function t(n){return function(r){return e(r,n)}}return $C=t,$C}var AC,HP;function IZ(){if(HP)return AC;HP=1;var e=AZ(),t=kZ(),n=EA(),r=zv();function i(a){return n(a)?e(r(a)):t(a)}return AC=i,AC}var kC,XP;function So(){if(XP)return kC;XP=1;var e=wZ(),t=$Z(),n=tf(),r=Qr(),i=IZ();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return kC=a,kC}var IC,KP;function Rj(){if(KP)return IC;KP=1;function e(t,n,r,i){for(var a=t.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(t[s],s,t))return s;return-1}return IC=e,IC}var EC,YP;function EZ(){if(YP)return EC;YP=1;function e(t){return t!==t}return EC=e,EC}var OC,ZP;function OZ(){if(ZP)return OC;ZP=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return OC=e,OC}var NC,QP;function NZ(){if(QP)return NC;QP=1;var e=Rj(),t=EZ(),n=OZ();function r(i,a,s){return a===a?n(i,a,s):e(i,t,s)}return NC=r,NC}var _C,JP;function _Z(){if(JP)return _C;JP=1;var e=NZ();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return _C=t,_C}var RC,t3;function RZ(){if(t3)return RC;t3=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return RC=e,RC}var DC,e3;function DZ(){if(e3)return DC;e3=1;function e(){}return DC=e,DC}var MC,n3;function MZ(){if(n3)return MC;n3=1;var e=Oj(),t=DZ(),n=VA(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return MC=i,MC}var PC,r3;function PZ(){if(r3)return PC;r3=1;var e=wj(),t=_Z(),n=RZ(),r=Cj(),i=MZ(),a=VA(),s=200;function o(l,c,h){var d=-1,p=t,g=l.length,v=!0,x=[],b=x;if(h)v=!1,p=n;else if(g>=s){var w=c?null:i(l);if(w)return a(w);v=!1,p=r,b=new e}else b=c?[]:x;t:for(;++d<g;){var S=l[d],T=c?c(S):S;if(S=h||S!==0?S:0,v&&T===T){for(var $=b.length;$--;)if(b[$]===T)continue t;c&&b.push(T),x.push(S)}else p(b,T,h)||(b!==x&&b.push(T),x.push(S))}return x}return PC=o,PC}var FC,i3;function FZ(){if(i3)return FC;i3=1;var e=So(),t=PZ();function n(r,i){return r&&r.length?t(r,e(i,2)):[]}return FC=n,FC}var LZ=FZ();const a3=Le(LZ);function Dj(e,t,n){return t===!0?a3(e,n):te(t)?a3(e,t):e}function dc(e){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dc(e)}var BZ=["ref"];function s3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s3(Object(n),!0).forEach(function(r){qv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pj(r.key),r)}}function jZ(e,t,n){return t&&o3(e.prototype,t),n&&o3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function UZ(e,t,n){return t=by(t),VZ(e,Mj()?Reflect.construct(t,n||[],by(e).constructor):t.apply(e,n))}function VZ(e,t){if(t&&(dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WZ(e)}function WZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mj=function(){return!!e})()}function by(e){return by=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},by(e)}function GZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B$(e,t)}function B$(e,t){return B$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},B$(e,t)}function qv(e,t,n){return t=Pj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pj(e){var t=qZ(e,"string");return dc(t)=="symbol"?t:t+""}function qZ(e,t){if(dc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(dc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function HZ(e,t){if(e==null)return{};var n=XZ(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function XZ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function KZ(e){return e.value}function YZ(e,t){if(Z.isValidElement(e))return Z.cloneElement(e,t);if(typeof e=="function")return Z.createElement(e,t);t.ref;var n=HZ(t,BZ);return Z.createElement(UA,n)}var l3=1,ec=function(e){function t(){var n;zZ(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=UZ(this,t,[].concat(i)),qv(n,"lastBoundingBox",{width:-1,height:-1}),n}return GZ(t,e),jZ(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>l3||Math.abs(i.height-this.lastBoundingBox.height)>l3)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?is({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,h=i.chartHeight,d,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var g=this.getBBoxSnapshot();d={left:((c||0)-g.width)/2}}else d=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var v=this.getBBoxSnapshot();p={top:((h||0)-v.height)/2}}else p=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return is(is({},d),p)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,h=i.payload,d=is(is({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return Z.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(g){r.wrapperNode=g}},YZ(a,is(is({},this.props),{},{payload:Dj(h,c,KZ)})))}}],[{key:"getWithHeight",value:function(r,i){var a=is(is({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&Et(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(Tt.PureComponent);qv(ec,"displayName","Legend");qv(ec,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var LC,u3;function ZZ(){if(u3)return LC;u3=1;var e=Gd(),t=WA(),n=Qr(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return LC=i,LC}var BC,c3;function Fj(){if(c3)return BC;c3=1;var e=$j(),t=ZZ();function n(r,i,a,s,o){var l=-1,c=r.length;for(a||(a=t),o||(o=[]);++l<c;){var h=r[l];i>0&&a(h)?i>1?n(h,i-1,a,s,o):e(o,h):s||(o[o.length]=h)}return o}return BC=n,BC}var zC,f3;function QZ(){if(f3)return zC;f3=1;function e(t){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),l=o.length;l--;){var c=o[t?l:++a];if(r(s[c],c,s)===!1)break}return n}}return zC=e,zC}var jC,h3;function JZ(){if(h3)return jC;h3=1;var e=QZ(),t=e();return jC=t,jC}var UC,d3;function Lj(){if(d3)return UC;d3=1;var e=JZ(),t=Gv();function n(r,i){return r&&e(r,i,t)}return UC=n,UC}var VC,p3;function tQ(){if(p3)return VC;p3=1;var e=qd();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return VC=t,VC}var WC,m3;function XA(){if(m3)return WC;m3=1;var e=Lj(),t=tQ(),n=t(e);return WC=n,WC}var GC,g3;function Bj(){if(g3)return GC;g3=1;var e=XA(),t=qd();function n(r,i){var a=-1,s=t(r)?Array(r.length):[];return e(r,function(o,l,c){s[++a]=i(o,l,c)}),s}return GC=n,GC}var qC,y3;function eQ(){if(y3)return qC;y3=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return qC=e,qC}var HC,v3;function nQ(){if(v3)return HC;v3=1;var e=Yc();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=e(n),l=r!==void 0,c=r===null,h=r===r,d=e(r);if(!c&&!d&&!o&&n>r||o&&l&&h&&!c&&!d||a&&l&&h||!i&&h||!s)return 1;if(!a&&!o&&!d&&n<r||d&&i&&s&&!a&&!o||c&&i&&s||!l&&s||!h)return-1}return 0}return HC=t,HC}var XC,b3;function rQ(){if(b3)return XC;b3=1;var e=nQ();function t(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,l=s.length,c=i.length;++a<l;){var h=e(s[a],o[a]);if(h){if(a>=c)return h;var d=i[a];return h*(d=="desc"?-1:1)}}return n.index-r.index}return XC=t,XC}var KC,x3;function iQ(){if(x3)return KC;x3=1;var e=DA(),t=MA(),n=So(),r=Bj(),i=eQ(),a=kj(),s=rQ(),o=tf(),l=Qr();function c(h,d,p){d.length?d=e(d,function(x){return l(x)?function(b){return t(b,x.length===1?x[0]:x)}:x}):d=[o];var g=-1;d=e(d,a(n));var v=r(h,function(x,b,w){var S=e(d,function(T){return T(x)});return{criteria:S,index:++g,value:x}});return i(v,function(x,b){return s(x,b,p)})}return KC=c,KC}var YC,w3;function aQ(){if(w3)return YC;w3=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return YC=e,YC}var ZC,S3;function sQ(){if(S3)return ZC;S3=1;var e=aQ(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=t(s.length-i,0),c=Array(l);++o<l;)c[o]=s[i+o];o=-1;for(var h=Array(i+1);++o<i;)h[o]=s[o];return h[i]=a(c),e(r,this,h)}}return ZC=n,ZC}var QC,C3;function oQ(){if(C3)return QC;C3=1;function e(t){return function(){return t}}return QC=e,QC}var JC,T3;function zj(){if(T3)return JC;T3=1;var e=zl(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return JC=t,JC}var tT,$3;function lQ(){if($3)return tT;$3=1;var e=oQ(),t=zj(),n=tf(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return tT=r,tT}var eT,A3;function uQ(){if(A3)return eT;A3=1;var e=800,t=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),l=t-(o-s);if(s=o,l>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return eT=r,eT}var nT,k3;function cQ(){if(k3)return nT;k3=1;var e=lQ(),t=uQ(),n=t(e);return nT=n,nT}var rT,I3;function fQ(){if(I3)return rT;I3=1;var e=tf(),t=sQ(),n=cQ();function r(i,a){return n(t(i,a,e),i+"")}return rT=r,rT}var iT,E3;function Hv(){if(E3)return iT;E3=1;var e=NA(),t=qd(),n=GA(),r=wo();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?t(o)&&n(s,o.length):l=="string"&&s in o)?e(o[s],a):!1}return iT=i,iT}var aT,O3;function hQ(){if(O3)return aT;O3=1;var e=Fj(),t=iQ(),n=fQ(),r=Hv(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return aT=i,aT}var dQ=hQ();const KA=Le(dQ);function td(e){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(e)}function z$(){return z$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z$.apply(this,arguments)}function pQ(e,t){return vQ(e)||yQ(e,t)||gQ(e,t)||mQ()}function mQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gQ(e,t){if(e){if(typeof e=="string")return N3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N3(e,t)}}function N3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yQ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function vQ(e){if(Array.isArray(e))return e}function _3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_3(Object(n),!0).forEach(function(r){bQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bQ(e,t,n){return t=xQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xQ(e){var t=wQ(e,"string");return td(t)=="symbol"?t:t+""}function wQ(e,t){if(td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SQ(e){return Array.isArray(e)&&Ln(e[0])&&Ln(e[1])?e.join(" ~ "):e}var CQ=function(t){var n=t.separator,r=n===void 0?" : ":n,i=t.contentStyle,a=i===void 0?{}:i,s=t.itemStyle,o=s===void 0?{}:s,l=t.labelStyle,c=l===void 0?{}:l,h=t.payload,d=t.formatter,p=t.itemSorter,g=t.wrapperClassName,v=t.labelClassName,x=t.label,b=t.labelFormatter,w=t.accessibilityLayer,S=w===void 0?!1:w,T=function(){if(h&&h.length){var F={padding:0,margin:0},M=(p?KA(h,p):h).map(function(B,j){if(B.type==="none")return null;var P=sT({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},o),U=B.formatter||d||SQ,W=B.value,q=B.name,L=W,G=q;if(U&&L!=null&&G!=null){var H=U(W,q,B,j,h);if(Array.isArray(H)){var Y=pQ(H,2);L=Y[0],G=Y[1]}else L=H}return Z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:P},Ln(G)?Z.createElement("span",{className:"recharts-tooltip-item-name"},G):null,Ln(G)?Z.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Z.createElement("span",{className:"recharts-tooltip-item-value"},L),Z.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return Z.createElement("ul",{className:"recharts-tooltip-item-list",style:F},M)}return null},$=sT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),A=sT({margin:0},c),I=!ce(x),O=I?x:"",N=ve("recharts-default-tooltip",g),_=ve("recharts-tooltip-label",v);I&&b&&h!==void 0&&h!==null&&(O=b(x,h));var R=S?{role:"status","aria-live":"assertive"}:{};return Z.createElement("div",z$({className:N,style:$},R),Z.createElement("p",{className:_,style:A},Z.isValidElement(O)?O:"".concat(O)),T())};function ed(e){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ed(e)}function Og(e,t,n){return t=TQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TQ(e){var t=$Q(e,"string");return ed(t)=="symbol"?t:t+""}function $Q(e,t){if(ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ch="recharts-tooltip-wrapper",AQ={visibility:"hidden"};function kQ(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return ve(Ch,Og(Og(Og(Og({},"".concat(Ch,"-right"),Et(n)&&t&&Et(t.x)&&n>=t.x),"".concat(Ch,"-left"),Et(n)&&t&&Et(t.x)&&n<t.x),"".concat(Ch,"-bottom"),Et(r)&&t&&Et(t.y)&&r>=t.y),"".concat(Ch,"-top"),Et(r)&&t&&Et(t.y)&&r<t.y))}function R3(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(a&&Et(a[r]))return a[r];var h=n[r]-o-i,d=n[r]+i;if(t[r])return s[r]?h:d;if(s[r]){var p=h,g=l[r];return p<g?Math.max(d,l[r]):Math.max(h,l[r])}var v=d+o,x=l[r]+c;return v>x?Math.max(h,l[r]):Math.max(d,l[r])}function IQ(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function EQ(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,i=e.position,a=e.reverseDirection,s=e.tooltipBox,o=e.useTranslate3d,l=e.viewBox,c,h,d;return s.height>0&&s.width>0&&n?(h=R3({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),d=R3({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=IQ({translateX:h,translateY:d,useTranslate3d:o})):c=AQ,{cssProperties:c,cssClasses:kQ({translateX:h,translateY:d,coordinate:n})}}function pc(e){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pc(e)}function D3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function M3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D3(Object(n),!0).forEach(function(r){U$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uj(r.key),r)}}function _Q(e,t,n){return t&&NQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RQ(e,t,n){return t=xy(t),DQ(e,jj()?Reflect.construct(t,n||[],xy(e).constructor):t.apply(e,n))}function DQ(e,t){if(t&&(pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MQ(e)}function MQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jj=function(){return!!e})()}function xy(e){return xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xy(e)}function PQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j$(e,t)}function j$(e,t){return j$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},j$(e,t)}function U$(e,t,n){return t=Uj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uj(e){var t=FQ(e,"string");return pc(t)=="symbol"?t:t+""}function FQ(e,t){if(pc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(pc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var P3=1,LQ=function(e){function t(){var n;OQ(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=RQ(this,t,[].concat(i)),U$(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),U$(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,c,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&c!==void 0?c:0}})}}),n}return PQ(t,e),_Q(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>P3||Math.abs(r.height-this.state.lastBoundingBox.height)>P3)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,h=i.coordinate,d=i.hasPayload,p=i.isAnimationActive,g=i.offset,v=i.position,x=i.reverseDirection,b=i.useTranslate3d,w=i.viewBox,S=i.wrapperStyle,T=EQ({allowEscapeViewBox:s,coordinate:h,offsetTopLeft:g,position:v,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:w}),$=T.cssClasses,A=T.cssProperties,I=M3(M3({transition:p&&a?"transform ".concat(o,"ms ").concat(l):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},S);return Z.createElement("div",{tabIndex:-1,className:$,style:I,ref:function(N){r.wrapperNode=N}},c)}}])}(Tt.PureComponent),BQ=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},jl={isSsr:BQ()};function mc(e){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mc(e)}function F3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function L3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(n),!0).forEach(function(r){YA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wj(r.key),r)}}function UQ(e,t,n){return t&&jQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VQ(e,t,n){return t=wy(t),WQ(e,Vj()?Reflect.construct(t,n||[],wy(e).constructor):t.apply(e,n))}function WQ(e,t){if(t&&(mc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GQ(e)}function GQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vj=function(){return!!e})()}function wy(e){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wy(e)}function qQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V$(e,t)}function V$(e,t){return V$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},V$(e,t)}function YA(e,t,n){return t=Wj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wj(e){var t=HQ(e,"string");return mc(t)=="symbol"?t:t+""}function HQ(e,t){if(mc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(mc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function XQ(e){return e.dataKey}function KQ(e,t){return Z.isValidElement(e)?Z.cloneElement(e,t):typeof e=="function"?Z.createElement(e,t):Z.createElement(CQ,t)}var Yi=function(e){function t(){return zQ(this,t),VQ(this,t,arguments)}return qQ(t,e),UQ(t,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,h=i.coordinate,d=i.filterNull,p=i.isAnimationActive,g=i.offset,v=i.payload,x=i.payloadUniqBy,b=i.position,w=i.reverseDirection,S=i.useTranslate3d,T=i.viewBox,$=i.wrapperStyle,A=v??[];d&&A.length&&(A=Dj(v.filter(function(O){return O.value!=null&&(O.hide!==!0||r.props.includeHidden)}),x,XQ));var I=A.length>0;return Z.createElement(LQ,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:p,active:a,coordinate:h,hasPayload:I,offset:g,position:b,reverseDirection:w,useTranslate3d:S,viewBox:T,wrapperStyle:$},KQ(c,L3(L3({},this.props),{},{payload:A})))}}])}(Tt.PureComponent);YA(Yi,"displayName","Tooltip");YA(Yi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var oT,B3;function YQ(){if(B3)return oT;B3=1;var e=Ba(),t=function(){return e.Date.now()};return oT=t,oT}var lT,z3;function ZQ(){if(z3)return lT;z3=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return lT=t,lT}var uT,j3;function QQ(){if(j3)return uT;j3=1;var e=ZQ(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return uT=n,uT}var cT,U3;function Gj(){if(U3)return cT;U3=1;var e=QQ(),t=wo(),n=Yc(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(c){if(typeof c=="number")return c;if(n(c))return r;if(t(c)){var h=typeof c.valueOf=="function"?c.valueOf():c;c=t(h)?h+"":h}if(typeof c!="string")return c===0?c:+c;c=e(c);var d=a.test(c);return d||s.test(c)?o(c.slice(2),d?2:8):i.test(c)?r:+c}return cT=l,cT}var fT,V3;function JQ(){if(V3)return fT;V3=1;var e=wo(),t=YQ(),n=Gj(),r="Expected a function",i=Math.max,a=Math.min;function s(o,l,c){var h,d,p,g,v,x,b=0,w=!1,S=!1,T=!0;if(typeof o!="function")throw new TypeError(r);l=n(l)||0,e(c)&&(w=!!c.leading,S="maxWait"in c,p=S?i(n(c.maxWait)||0,l):p,T="trailing"in c?!!c.trailing:T);function $(M){var B=h,j=d;return h=d=void 0,b=M,g=o.apply(j,B),g}function A(M){return b=M,v=setTimeout(N,l),w?$(M):g}function I(M){var B=M-x,j=M-b,P=l-B;return S?a(P,p-j):P}function O(M){var B=M-x,j=M-b;return x===void 0||B>=l||B<0||S&&j>=p}function N(){var M=t();if(O(M))return _(M);v=setTimeout(N,I(M))}function _(M){return v=void 0,T&&h?$(M):(h=d=void 0,g)}function R(){v!==void 0&&clearTimeout(v),b=0,h=x=d=v=void 0}function E(){return v===void 0?g:_(t())}function F(){var M=t(),B=O(M);if(h=arguments,d=this,x=M,B){if(v===void 0)return A(x);if(S)return clearTimeout(v),v=setTimeout(N,l),$(x)}return v===void 0&&(v=setTimeout(N,l)),g}return F.cancel=R,F.flush=E,F}return fT=s,fT}var hT,W3;function tJ(){if(W3)return hT;W3=1;var e=JQ(),t=wo(),n="Expected a function";function r(i,a,s){var o=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return t(s)&&(o="leading"in s?!!s.leading:o,l="trailing"in s?!!s.trailing:l),e(i,a,{leading:o,maxWait:a,trailing:l})}return hT=r,hT}var eJ=tJ();const qj=Le(eJ);function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function G3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ng(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G3(Object(n),!0).forEach(function(r){nJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nJ(e,t,n){return t=rJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rJ(e){var t=iJ(e,"string");return nd(t)=="symbol"?t:t+""}function iJ(e,t){if(nd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aJ(e,t){return uJ(e)||lJ(e,t)||oJ(e,t)||sJ()}function sJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oJ(e,t){if(e){if(typeof e=="string")return q3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q3(e,t)}}function q3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lJ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function uJ(e){if(Array.isArray(e))return e}var H3=Tt.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=e.width,s=a===void 0?"100%":a,o=e.height,l=o===void 0?"100%":o,c=e.minWidth,h=c===void 0?0:c,d=e.minHeight,p=e.maxHeight,g=e.children,v=e.debounce,x=v===void 0?0:v,b=e.id,w=e.className,S=e.onResize,T=e.style,$=T===void 0?{}:T,A=Tt.useRef(null),I=Tt.useRef();I.current=S,Tt.useImperativeHandle(t,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var O=Tt.useState({containerWidth:i.width,containerHeight:i.height}),N=aJ(O,2),_=N[0],R=N[1],E=Tt.useCallback(function(M,B){R(function(j){var P=Math.round(M),U=Math.round(B);return j.containerWidth===P&&j.containerHeight===U?j:{containerWidth:P,containerHeight:U}})},[]);Tt.useEffect(function(){var M=function(q){var L,G=q[0].contentRect,H=G.width,Y=G.height;E(H,Y),(L=I.current)===null||L===void 0||L.call(I,H,Y)};x>0&&(M=qj(M,x,{trailing:!0,leading:!1}));var B=new ResizeObserver(M),j=A.current.getBoundingClientRect(),P=j.width,U=j.height;return E(P,U),B.observe(A.current),function(){B.disconnect()}},[E,x]);var F=Tt.useMemo(function(){var M=_.containerWidth,B=_.containerHeight;if(M<0||B<0)return null;hs(ul(s)||ul(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),hs(!n||n>0,"The aspect(%s) must be greater than zero.",n);var j=ul(s)?M:s,P=ul(l)?B:l;n&&n>0&&(j?P=j/n:P&&(j=P*n),p&&P>p&&(P=p)),hs(j>0||P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,P,s,l,h,d,n);var U=!Array.isArray(g)&&fs(g.type).endsWith("Chart");return Z.Children.map(g,function(W){return Z.isValidElement(W)?Tt.cloneElement(W,Ng({width:j,height:P},U?{style:Ng({height:"100%",width:"100%",maxHeight:P,maxWidth:j},W.props.style)}:{})):W})},[n,g,l,p,d,h,_,s]);return Z.createElement("div",{id:b?"".concat(b):void 0,className:ve("recharts-responsive-container",w),style:Ng(Ng({},$),{},{width:s,height:l,minWidth:h,minHeight:d,maxHeight:p}),ref:A},F)}),Hj=function(t){return null};Hj.displayName="Cell";function rd(e){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rd(e)}function X3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function W$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(n),!0).forEach(function(r){cJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cJ(e,t,n){return t=fJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fJ(e){var t=hJ(e,"string");return rd(t)=="symbol"?t:t+""}function hJ(e,t){if(rd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ju={widthCache:{},cacheCount:0},dJ=2e3,pJ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},K3="recharts_measurement_span";function mJ(e){var t=W$({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Gh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||jl.isSsr)return{width:0,height:0};var r=mJ(n),i=JSON.stringify({text:t,copyStyle:r});if(ju.widthCache[i])return ju.widthCache[i];try{var a=document.getElementById(K3);a||(a=document.createElement("span"),a.setAttribute("id",K3),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=W$(W$({},pJ),r);Object.assign(a.style,s),a.textContent="".concat(t);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return ju.widthCache[i]=l,++ju.cacheCount>dJ&&(ju.cacheCount=0,ju.widthCache={}),l}catch{return{width:0,height:0}}},gJ=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}function Sy(e,t){return xJ(e)||bJ(e,t)||vJ(e,t)||yJ()}function yJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vJ(e,t){if(e){if(typeof e=="string")return Y3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y3(e,t)}}function Y3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bJ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function xJ(e){if(Array.isArray(e))return e}function wJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,CJ(r.key),r)}}function SJ(e,t,n){return t&&Z3(e.prototype,t),n&&Z3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function CJ(e){var t=TJ(e,"string");return id(t)=="symbol"?t:t+""}function TJ(e,t){if(id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Q3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,J3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$J=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,AJ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Xj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},kJ=Object.keys(Xj),Zu="NaN";function IJ(e,t){return e*Xj[t]}var _g=function(){function e(t,n){wJ(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!$J.test(n)&&(this.num=NaN,this.unit=""),kJ.includes(n)&&(this.num=IJ(t,n),this.unit="px")}return SJ(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=AJ.exec(n))!==null&&r!==void 0?r:[],a=Sy(i,3),s=a[1],o=a[2];return new e(parseFloat(s),o??"")}}])}();function Kj(e){if(e.includes(Zu))return Zu;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=Q3.exec(t))!==null&&n!==void 0?n:[],i=Sy(r,4),a=i[1],s=i[2],o=i[3],l=_g.parse(a??""),c=_g.parse(o??""),h=s==="*"?l.multiply(c):l.divide(c);if(h.isNaN())return Zu;t=t.replace(Q3,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,p=(d=J3.exec(t))!==null&&d!==void 0?d:[],g=Sy(p,4),v=g[1],x=g[2],b=g[3],w=_g.parse(v??""),S=_g.parse(b??""),T=x==="+"?w.add(S):w.subtract(S);if(T.isNaN())return Zu;t=t.replace(J3,T.toString())}return t}var tF=/\(([^()]*)\)/;function EJ(e){for(var t=e;t.includes("(");){var n=tF.exec(t),r=Sy(n,2),i=r[1];t=t.replace(tF,Kj(i))}return t}function OJ(e){var t=e.replace(/\s+/g,"");return t=EJ(t),t=Kj(t),t}function NJ(e){try{return OJ(e)}catch{return Zu}}function dT(e){var t=NJ(e.slice(5,-1));return t===Zu?"":t}var _J=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],RJ=["dx","dy","angle","className","breakAll"];function G$(){return G$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G$.apply(this,arguments)}function eF(e,t){if(e==null)return{};var n=DJ(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function DJ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function nF(e,t){return LJ(e)||FJ(e,t)||PJ(e,t)||MJ()}function MJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PJ(e,t){if(e){if(typeof e=="string")return rF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rF(e,t)}}function rF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function FJ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function LJ(e){if(Array.isArray(e))return e}var Yj=/[ \f\n\r\t\v\u2028\u2029]+/,Zj=function(t){var n=t.children,r=t.breakAll,i=t.style;try{var a=[];ce(n)||(r?a=n.toString().split(""):a=n.toString().split(Yj));var s=a.map(function(l){return{word:l,width:Gh(l,i).width}}),o=r?0:Gh("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},BJ=function(t,n,r,i,a){var s=t.maxLines,o=t.children,l=t.style,c=t.breakAll,h=Et(s),d=o,p=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j.reduce(function(P,U){var W=U.word,q=U.width,L=P[P.length-1];if(L&&(i==null||a||L.width+q+r<Number(i)))L.words.push(W),L.width+=q+r;else{var G={words:[W],width:q};P.push(G)}return P},[])},g=p(n),v=function(j){return j.reduce(function(P,U){return P.width>U.width?P:U})};if(!h)return g;for(var x="",b=function(j){var P=d.slice(0,j),U=Zj({breakAll:c,style:l,children:P+x}).wordsWithComputedWidth,W=p(U),q=W.length>s||v(W).width>Number(i);return[q,W]},w=0,S=d.length-1,T=0,$;w<=S&&T<=d.length-1;){var A=Math.floor((w+S)/2),I=A-1,O=b(I),N=nF(O,2),_=N[0],R=N[1],E=b(A),F=nF(E,1),M=F[0];if(!_&&!M&&(w=A+1),_&&M&&(S=A-1),!_&&M){$=R;break}T++}return $||g},iF=function(t){var n=ce(t)?[]:t.toString().split(Yj);return[{words:n}]},zJ=function(t){var n=t.width,r=t.scaleToFit,i=t.children,a=t.style,s=t.breakAll,o=t.maxLines;if((n||r)&&!jl.isSsr){var l,c,h=Zj({breakAll:s,children:i,style:a});if(h){var d=h.wordsWithComputedWidth,p=h.spaceWidth;l=d,c=p}else return iF(i);return BJ({breakAll:s,children:i,maxLines:o,style:a},l,c,n,r)}return iF(i)},aF="#808080",Cy=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,s=t.lineHeight,o=s===void 0?"1em":s,l=t.capHeight,c=l===void 0?"0.71em":l,h=t.scaleToFit,d=h===void 0?!1:h,p=t.textAnchor,g=p===void 0?"start":p,v=t.verticalAnchor,x=v===void 0?"end":v,b=t.fill,w=b===void 0?aF:b,S=eF(t,_J),T=Tt.useMemo(function(){return zJ({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:d,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,d,S.style,S.width]),$=S.dx,A=S.dy,I=S.angle,O=S.className,N=S.breakAll,_=eF(S,RJ);if(!Ln(r)||!Ln(a))return null;var R=r+(Et($)?$:0),E=a+(Et(A)?A:0),F;switch(x){case"start":F=dT("calc(".concat(c,")"));break;case"middle":F=dT("calc(".concat((T.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:F=dT("calc(".concat(T.length-1," * -").concat(o,")"));break}var M=[];if(d){var B=T[0].width,j=S.width;M.push("scale(".concat((Et(j)?j/B:1)/B,")"))}return I&&M.push("rotate(".concat(I,", ").concat(R,", ").concat(E,")")),M.length&&(_.transform=M.join(" ")),Z.createElement("text",G$({},re(_,!0),{x:R,y:E,className:ve("recharts-text",O),textAnchor:g,fill:w.includes("url")?aF:w}),T.map(function(P,U){var W=P.words.join(N?"":" ");return Z.createElement("tspan",{x:R,dy:U===0?F:o,key:"".concat(W,"-").concat(U)},W)}))};function lo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jJ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ZA(e){let t,n,r;e.length!==2?(t=lo,n=(o,l)=>lo(e(o),l),r=(o,l)=>e(o)-l):(t=e===lo||e===jJ?e:UJ,n=e,r=e);function i(o,l,c=0,h=o.length){if(c<h){if(t(l,l)!==0)return h;do{const d=c+h>>>1;n(o[d],l)<0?c=d+1:h=d}while(c<h)}return c}function a(o,l,c=0,h=o.length){if(c<h){if(t(l,l)!==0)return h;do{const d=c+h>>>1;n(o[d],l)<=0?c=d+1:h=d}while(c<h)}return c}function s(o,l,c=0,h=o.length){const d=i(o,l,c,h-1);return d>c&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:i,center:s,right:a}}function UJ(){return 0}function Qj(e){return e===null?NaN:+e}function*VJ(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const WJ=ZA(lo),Hd=WJ.right;ZA(Qj).center;class sF extends Map{constructor(t,n=HJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(oF(this,t))}has(t){return super.has(oF(this,t))}set(t,n){return super.set(GJ(this,t),n)}delete(t){return super.delete(qJ(this,t))}}function oF({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function GJ({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function qJ({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function HJ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function XJ(e=lo){if(e===lo)return Jj;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Jj(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const KJ=Math.sqrt(50),YJ=Math.sqrt(10),ZJ=Math.sqrt(2);function Ty(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=KJ?10:a>=YJ?5:a>=ZJ?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?Ty(e,t,n*2):[o,l,c]}function q$(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,s]=r?Ty(t,e,n):Ty(e,t,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function H$(e,t,n){return t=+t,e=+e,n=+n,Ty(e,t,n)[2]}function X$(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?H$(t,e,n):H$(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function lF(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function uF(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function tU(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Jj:XJ(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,h=Math.log(l),d=.5*Math.exp(2*h/3),p=.5*Math.sqrt(h*d*(l-d)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(t-c*d/l+p)),v=Math.min(r,Math.floor(t+(l-c)*d/l+p));tU(e,t,g,v,i)}const a=e[t];let s=n,o=r;for(Th(e,n,t),i(e[r],a)>0&&Th(e,n,r);s<o;){for(Th(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}i(e[n],a)===0?Th(e,n,o):(++o,Th(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function Th(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function QJ(e,t,n){if(e=Float64Array.from(VJ(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return uF(e);if(t>=1)return lF(e);var r,i=(r-1)*t,a=Math.floor(i),s=lF(tU(e,a).subarray(0,a+1)),o=uF(e.subarray(a+1));return s+(o-s)*(i-a)}}function JJ(e,t,n=Qj){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(i-a)}}function ttt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Bi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $s(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const K$=Symbol("implicit");function QA(){var e=new sF,t=[],n=[],r=K$;function i(a){let s=e.get(a);if(s===void 0){if(r!==K$)return r;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new sF;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return QA(t,n).unknown(r)},Bi.apply(i,arguments),i}function ad(){var e=QA().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,s,o=!1,l=0,c=0,h=.5;delete e.unknown;function d(){var p=t().length,g=i<r,v=g?i:r,x=g?r:i;a=(x-v)/Math.max(1,p-l+c*2),o&&(a=Math.floor(a)),v+=(x-v-a*(p-l))*h,s=a*(1-l),o&&(v=Math.round(v),s=Math.round(s));var b=ttt(p).map(function(w){return v+a*w});return n(g?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),d()):t()},e.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,d()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(p){return arguments.length?(o=!!p,d()):o},e.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),d()):l},e.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},e.paddingOuter=function(p){return arguments.length?(c=+p,d()):c},e.align=function(p){return arguments.length?(h=Math.max(0,Math.min(1,p)),d()):h},e.copy=function(){return ad(t(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(h)},Bi.apply(d(),arguments)}function eU(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eU(t())},e}function qh(){return eU(ad.apply(null,arguments).paddingInner(1))}function JA(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function nU(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Xd(){}var sd=.7,$y=1/sd,nc="\\s*([+-]?\\d+)\\s*",od="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$a="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ett=/^#([0-9a-f]{3,8})$/,ntt=new RegExp(`^rgb\\(${nc},${nc},${nc}\\)$`),rtt=new RegExp(`^rgb\\(${$a},${$a},${$a}\\)$`),itt=new RegExp(`^rgba\\(${nc},${nc},${nc},${od}\\)$`),att=new RegExp(`^rgba\\(${$a},${$a},${$a},${od}\\)$`),stt=new RegExp(`^hsl\\(${od},${$a},${$a}\\)$`),ott=new RegExp(`^hsla\\(${od},${$a},${$a},${od}\\)$`),cF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JA(Xd,ld,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fF,formatHex:fF,formatHex8:ltt,formatHsl:utt,formatRgb:hF,toString:hF});function fF(){return this.rgb().formatHex()}function ltt(){return this.rgb().formatHex8()}function utt(){return rU(this).formatHsl()}function hF(){return this.rgb().formatRgb()}function ld(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ett.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?dF(t):n===3?new Hr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Rg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Rg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ntt.exec(e))?new Hr(t[1],t[2],t[3],1):(t=rtt.exec(e))?new Hr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=itt.exec(e))?Rg(t[1],t[2],t[3],t[4]):(t=att.exec(e))?Rg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=stt.exec(e))?gF(t[1],t[2]/100,t[3]/100,1):(t=ott.exec(e))?gF(t[1],t[2]/100,t[3]/100,t[4]):cF.hasOwnProperty(e)?dF(cF[e]):e==="transparent"?new Hr(NaN,NaN,NaN,0):null}function dF(e){return new Hr(e>>16&255,e>>8&255,e&255,1)}function Rg(e,t,n,r){return r<=0&&(e=t=n=NaN),new Hr(e,t,n,r)}function ctt(e){return e instanceof Xd||(e=ld(e)),e?(e=e.rgb(),new Hr(e.r,e.g,e.b,e.opacity)):new Hr}function Y$(e,t,n,r){return arguments.length===1?ctt(e):new Hr(e,t,n,r??1)}function Hr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}JA(Hr,Y$,nU(Xd,{brighter(e){return e=e==null?$y:Math.pow($y,e),new Hr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?sd:Math.pow(sd,e),new Hr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Hr(gl(this.r),gl(this.g),gl(this.b),Ay(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pF,formatHex:pF,formatHex8:ftt,formatRgb:mF,toString:mF}));function pF(){return`#${cl(this.r)}${cl(this.g)}${cl(this.b)}`}function ftt(){return`#${cl(this.r)}${cl(this.g)}${cl(this.b)}${cl((isNaN(this.opacity)?1:this.opacity)*255)}`}function mF(){const e=Ay(this.opacity);return`${e===1?"rgb(":"rgba("}${gl(this.r)}, ${gl(this.g)}, ${gl(this.b)}${e===1?")":`, ${e})`}`}function Ay(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function cl(e){return e=gl(e),(e<16?"0":"")+e.toString(16)}function gF(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ea(e,t,n,r)}function rU(e){if(e instanceof ea)return new ea(e.h,e.s,e.l,e.opacity);if(e instanceof Xd||(e=ld(e)),!e)return new ea;if(e instanceof ea)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(t===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-t)/o+2:s=(t-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new ea(s,o,l,e.opacity)}function htt(e,t,n,r){return arguments.length===1?rU(e):new ea(e,t,n,r??1)}function ea(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}JA(ea,htt,nU(Xd,{brighter(e){return e=e==null?$y:Math.pow($y,e),new ea(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?sd:Math.pow(sd,e),new ea(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Hr(pT(e>=240?e-240:e+120,i,r),pT(e,i,r),pT(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ea(yF(this.h),Dg(this.s),Dg(this.l),Ay(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ay(this.opacity);return`${e===1?"hsl(":"hsla("}${yF(this.h)}, ${Dg(this.s)*100}%, ${Dg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yF(e){return e=(e||0)%360,e<0?e+360:e}function Dg(e){return Math.max(0,Math.min(1,e||0))}function pT(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tk=e=>()=>e;function dtt(e,t){return function(n){return e+n*t}}function ptt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function mtt(e){return(e=+e)==1?iU:function(t,n){return n-t?ptt(t,n,e):tk(isNaN(t)?n:t)}}function iU(e,t){var n=t-e;return n?dtt(e,n):tk(isNaN(e)?t:e)}const vF=function e(t){var n=mtt(t);function r(i,a){var s=n((i=Y$(i)).r,(a=Y$(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),c=iU(i.opacity,a.opacity);return function(h){return i.r=s(h),i.g=o(h),i.b=l(h),i.opacity=c(h),i+""}}return r.gamma=e,r}(1);function gtt(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function ytt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vtt(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=ef(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function btt(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ky(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function xtt(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ef(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Z$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mT=new RegExp(Z$.source,"g");function wtt(e){return function(){return e}}function Stt(e){return function(t){return e(t)+""}}function Ctt(e,t){var n=Z$.lastIndex=mT.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(r=Z$.exec(e))&&(i=mT.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:ky(r,i)})),n=mT.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Stt(l[0].x):wtt(t):(t=l.length,function(c){for(var h=0,d;h<t;++h)o[(d=l[h]).i]=d.x(c);return o.join("")})}function ef(e,t){var n=typeof t,r;return t==null||n==="boolean"?tk(t):(n==="number"?ky:n==="string"?(r=ld(t))?(t=r,vF):Ctt:t instanceof ld?vF:t instanceof Date?btt:ytt(t)?gtt:Array.isArray(t)?vtt:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xtt:ky)(e,t)}function ek(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ttt(e,t){t===void 0&&(t=e,e=ef);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function $tt(e){return function(){return e}}function Iy(e){return+e}var bF=[0,1];function Nr(e){return e}function Q$(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:$tt(isNaN(t)?NaN:.5)}function Att(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ktt(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=Q$(i,r),a=n(s,a)):(r=Q$(r,i),a=n(a,s)),function(o){return a(r(o))}}function Itt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=Q$(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var l=Hd(e,o,1,r)-1;return a[l](i[l](o))}}function Kd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xv(){var e=bF,t=bF,n=ef,r,i,a,s=Nr,o,l,c;function h(){var p=Math.min(e.length,t.length);return s!==Nr&&(s=Att(e[0],e[p-1])),o=p>2?Itt:ktt,l=c=null,d}function d(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(r),t,n)))(r(s(p)))}return d.invert=function(p){return s(i((c||(c=o(t,e.map(r),ky)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,Iy),h()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),h()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),n=ek,h()},d.clamp=function(p){return arguments.length?(s=p?!0:Nr,h()):s!==Nr},d.interpolate=function(p){return arguments.length?(n=p,h()):n},d.unknown=function(p){return arguments.length?(a=p,d):a},function(p,g){return r=p,i=g,h()}}function nk(){return Xv()(Nr,Nr)}function Ett(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ey(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function gc(e){return e=Ey(Math.abs(e)),e?e[1]:NaN}function Ott(e,t){return function(n,r){for(var i=n.length,a=[],s=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function Ntt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var _tt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ud(e){if(!(t=_tt.exec(e)))throw new Error("invalid format: "+e);var t;return new rk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ud.prototype=rk.prototype;function rk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}rk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Rtt(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var aU;function Dtt(e,t){var n=Ey(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(aU=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ey(e,Math.max(0,t+a-1))[0]}function xF(e,t){var n=Ey(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const wF={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ett,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xF(e*100,t),r:xF,s:Dtt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function SF(e){return e}var CF=Array.prototype.map,TF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Mtt(e){var t=e.grouping===void 0||e.thousands===void 0?SF:Ott(CF.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?SF:Ntt(CF.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(d){d=ud(d);var p=d.fill,g=d.align,v=d.sign,x=d.symbol,b=d.zero,w=d.width,S=d.comma,T=d.precision,$=d.trim,A=d.type;A==="n"?(S=!0,A="g"):wF[A]||(T===void 0&&(T=12),$=!0,A="g"),(b||p==="0"&&g==="=")&&(b=!0,p="0",g="=");var I=x==="$"?n:x==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",O=x==="$"?r:/[%p]/.test(A)?s:"",N=wF[A],_=/[defgprs%]/.test(A);T=T===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function R(E){var F=I,M=O,B,j,P;if(A==="c")M=N(E)+M,E="";else{E=+E;var U=E<0||1/E<0;if(E=isNaN(E)?l:N(Math.abs(E),T),$&&(E=Rtt(E)),U&&+E==0&&v!=="+"&&(U=!1),F=(U?v==="("?v:o:v==="-"||v==="("?"":v)+F,M=(A==="s"?TF[8+aU/3]:"")+M+(U&&v==="("?")":""),_){for(B=-1,j=E.length;++B<j;)if(P=E.charCodeAt(B),48>P||P>57){M=(P===46?i+E.slice(B+1):E.slice(B))+M,E=E.slice(0,B);break}}}S&&!b&&(E=t(E,1/0));var W=F.length+E.length+M.length,q=W<w?new Array(w-W+1).join(p):"";switch(S&&b&&(E=t(q+E,q.length?w-M.length:1/0),q=""),g){case"<":E=F+E+M+q;break;case"=":E=F+q+E+M;break;case"^":E=q.slice(0,W=q.length>>1)+F+E+M+q.slice(W);break;default:E=q+F+E+M;break}return a(E)}return R.toString=function(){return d+""},R}function h(d,p){var g=c((d=ud(d),d.type="f",d)),v=Math.max(-8,Math.min(8,Math.floor(gc(p)/3)))*3,x=Math.pow(10,-v),b=TF[8+v/3];return function(w){return g(x*w)+b}}return{format:c,formatPrefix:h}}var Mg,ik,sU;Ptt({thousands:",",grouping:[3],currency:["$",""]});function Ptt(e){return Mg=Mtt(e),ik=Mg.format,sU=Mg.formatPrefix,Mg}function Ftt(e){return Math.max(0,-gc(Math.abs(e)))}function Ltt(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gc(t)/3)))*3-gc(Math.abs(e)))}function Btt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gc(t)-gc(e))+1}function oU(e,t,n,r){var i=X$(e,t,n),a;switch(r=ud(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Ltt(i,s))&&(r.precision=a),sU(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Btt(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ftt(i))&&(r.precision=a-(r.type==="%")*2);break}}return ik(r)}function Co(e){var t=e.domain;return e.ticks=function(n){var r=t();return q$(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return oU(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,s=r[i],o=r[a],l,c,h=10;for(o<s&&(c=s,s=o,o=c,c=i,i=a,a=c);h-- >0;){if(c=H$(s,o,n),c===l)return r[i]=s,r[a]=o,t(r);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function Oy(){var e=nk();return e.copy=function(){return Kd(e,Oy())},Bi.apply(e,arguments),Co(e)}function lU(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Iy),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return lU(e).unknown(t)},e=arguments.length?Array.from(e,Iy):[0,1],Co(n)}function uU(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),e[n]=t.floor(i),e[r]=t.ceil(a),e}function $F(e){return Math.log(e)}function AF(e){return Math.exp(e)}function ztt(e){return-Math.log(-e)}function jtt(e){return-Math.exp(-e)}function Utt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vtt(e){return e===10?Utt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Wtt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function kF(e){return(t,n)=>-e(-t,n)}function ak(e){const t=e($F,AF),n=t.domain;let r=10,i,a;function s(){return i=Wtt(r),a=Vtt(r),n()[0]<0?(i=kF(i),a=kF(a),e(ztt,jtt)):e($F,AF),t}return t.base=function(o){return arguments.length?(r=+o,s()):r},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const l=n();let c=l[0],h=l[l.length-1];const d=h<c;d&&([c,h]=[h,c]);let p=i(c),g=i(h),v,x;const b=o==null?10:+o;let w=[];if(!(r%1)&&g-p<b){if(p=Math.floor(p),g=Math.ceil(g),c>0){for(;p<=g;++p)for(v=1;v<r;++v)if(x=p<0?v/a(-p):v*a(p),!(x<c)){if(x>h)break;w.push(x)}}else for(;p<=g;++p)for(v=r-1;v>=1;--v)if(x=p>0?v/a(-p):v*a(p),!(x<c)){if(x>h)break;w.push(x)}w.length*2<b&&(w=q$(c,h,b))}else w=q$(p,g,Math.min(g-p,b)).map(a);return d?w.reverse():w},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ud(l)).precision==null&&(l.trim=!0),l=ik(l)),o===1/0)return l;const c=Math.max(1,r*o/t.ticks().length);return h=>{let d=h/a(Math.round(i(h)));return d*r<r-.5&&(d*=r),d<=c?l(h):""}},t.nice=()=>n(uU(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function cU(){const e=ak(Xv()).domain([1,10]);return e.copy=()=>Kd(e,cU()).base(e.base()),Bi.apply(e,arguments),e}function IF(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function EF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sk(e){var t=1,n=e(IF(t),EF(t));return n.constant=function(r){return arguments.length?e(IF(t=+r),EF(t)):t},Co(n)}function fU(){var e=sk(Xv());return e.copy=function(){return Kd(e,fU()).constant(e.constant())},Bi.apply(e,arguments)}function OF(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Gtt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function qtt(e){return e<0?-e*e:e*e}function ok(e){var t=e(Nr,Nr),n=1;function r(){return n===1?e(Nr,Nr):n===.5?e(Gtt,qtt):e(OF(n),OF(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Co(t)}function lk(){var e=ok(Xv());return e.copy=function(){return Kd(e,lk()).exponent(e.exponent())},Bi.apply(e,arguments),e}function Htt(){return lk.apply(null,arguments).exponent(.5)}function NF(e){return Math.sign(e)*e*e}function Xtt(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function hU(){var e=nk(),t=[0,1],n=!1,r;function i(a){var s=Xtt(e(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return e.invert(NF(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Iy)).map(NF)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return hU(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Bi.apply(i,arguments),Co(i)}function dU(){var e=[],t=[],n=[],r;function i(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=JJ(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:t[Hd(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(lo),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return dU().domain(e).range(t).unknown(r)},Bi.apply(a,arguments)}function pU(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[Hd(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,r[0]]:c>=n?[r[n-1],t]:[r[c-1],r[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return pU().domain([e,t]).range(i).unknown(a)},Bi.apply(Co(s),arguments)}function mU(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Hd(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return mU().domain(e).range(t).unknown(n)},Bi.apply(i,arguments)}const gT=new Date,yT=new Date;function zn(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),t(a,o),e(a);while(c<a&&a<s);return l},i.filter=a=>zn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(i.count=(a,s)=>(gT.setTime(+a),yT.setTime(+s),e(gT),e(yT),Math.floor(n(gT,yT))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Ny=zn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ny.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ny);Ny.range;const os=1e3,Ni=os*60,ls=Ni*60,gs=ls*24,uk=gs*7,_F=gs*30,vT=gs*365,fl=zn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*os)},(e,t)=>(t-e)/os,e=>e.getUTCSeconds());fl.range;const ck=zn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*os)},(e,t)=>{e.setTime(+e+t*Ni)},(e,t)=>(t-e)/Ni,e=>e.getMinutes());ck.range;const fk=zn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ni)},(e,t)=>(t-e)/Ni,e=>e.getUTCMinutes());fk.range;const hk=zn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*os-e.getMinutes()*Ni)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getHours());hk.range;const dk=zn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getUTCHours());dk.range;const Yd=zn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ni)/gs,e=>e.getDate()-1);Yd.range;const Kv=zn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gs,e=>e.getUTCDate()-1);Kv.range;const gU=zn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gs,e=>Math.floor(e/gs));gU.range;function Ul(e){return zn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ni)/uk)}const Yv=Ul(0),_y=Ul(1),Ktt=Ul(2),Ytt=Ul(3),yc=Ul(4),Ztt=Ul(5),Qtt=Ul(6);Yv.range;_y.range;Ktt.range;Ytt.range;yc.range;Ztt.range;Qtt.range;function Vl(e){return zn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/uk)}const Zv=Vl(0),Ry=Vl(1),Jtt=Vl(2),tet=Vl(3),vc=Vl(4),eet=Vl(5),net=Vl(6);Zv.range;Ry.range;Jtt.range;tet.range;vc.range;eet.range;net.range;const pk=zn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());pk.range;const mk=zn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());mk.range;const ys=zn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ys.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ys.range;const vs=zn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());vs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});vs.range;function yU(e,t,n,r,i,a){const s=[[fl,1,os],[fl,5,5*os],[fl,15,15*os],[fl,30,30*os],[a,1,Ni],[a,5,5*Ni],[a,15,15*Ni],[a,30,30*Ni],[i,1,ls],[i,3,3*ls],[i,6,6*ls],[i,12,12*ls],[r,1,gs],[r,2,2*gs],[n,1,uk],[t,1,_F],[t,3,3*_F],[e,1,vT]];function o(c,h,d){const p=h<c;p&&([c,h]=[h,c]);const g=d&&typeof d.range=="function"?d:l(c,h,d),v=g?g.range(c,+h+1):[];return p?v.reverse():v}function l(c,h,d){const p=Math.abs(h-c)/d,g=ZA(([,,b])=>b).right(s,p);if(g===s.length)return e.every(X$(c/vT,h/vT,d));if(g===0)return Ny.every(Math.max(X$(c,h,d),1));const[v,x]=s[p/s[g-1][2]<s[g][2]/p?g-1:g];return v.every(x)}return[o,l]}const[ret,iet]=yU(vs,mk,Zv,gU,dk,fk),[aet,set]=yU(ys,pk,Yv,Yd,hk,ck);function bT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function xT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $h(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function oet(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=Ah(i),h=kh(i),d=Ah(a),p=kh(a),g=Ah(s),v=kh(s),x=Ah(o),b=kh(o),w=Ah(l),S=kh(l),T={a:U,A:W,b:q,B:L,c:null,d:LF,e:LF,f:_et,g:Uet,G:Wet,H:Eet,I:Oet,j:Net,L:vU,m:Ret,M:Det,p:G,q:H,Q:jF,s:UF,S:Met,u:Pet,U:Fet,V:Let,w:Bet,W:zet,x:null,X:null,y:jet,Y:Vet,Z:Get,"%":zF},$={a:Y,A:ot,b:ht,B:yt,c:null,d:BF,e:BF,f:Ket,g:ant,G:ont,H:qet,I:Het,j:Xet,L:xU,m:Yet,M:Zet,p:Nt,q:At,Q:jF,s:UF,S:Qet,u:Jet,U:tnt,V:ent,w:nnt,W:rnt,x:null,X:null,y:int,Y:snt,Z:lnt,"%":zF},A={a:R,A:E,b:F,B:M,c:B,d:PF,e:PF,f:$et,g:MF,G:DF,H:FF,I:FF,j:xet,L:Tet,m:bet,M:wet,p:_,q:vet,Q:ket,s:Iet,S:Cet,u:det,U:pet,V:met,w:het,W:get,x:j,X:P,y:MF,Y:DF,Z:yet,"%":Aet};T.x=I(n,T),T.X=I(r,T),T.c=I(t,T),$.x=I(n,$),$.X=I(r,$),$.c=I(t,$);function I(mt,kt){return function(It){var gt=[],Vt=-1,Lt=0,Zt=mt.length,Wt,Ht,de;for(It instanceof Date||(It=new Date(+It));++Vt<Zt;)mt.charCodeAt(Vt)===37&&(gt.push(mt.slice(Lt,Vt)),(Ht=RF[Wt=mt.charAt(++Vt)])!=null?Wt=mt.charAt(++Vt):Ht=Wt==="e"?" ":"0",(de=kt[Wt])&&(Wt=de(It,Ht)),gt.push(Wt),Lt=Vt+1);return gt.push(mt.slice(Lt,Vt)),gt.join("")}}function O(mt,kt){return function(It){var gt=$h(1900,void 0,1),Vt=N(gt,mt,It+="",0),Lt,Zt;if(Vt!=It.length)return null;if("Q"in gt)return new Date(gt.Q);if("s"in gt)return new Date(gt.s*1e3+("L"in gt?gt.L:0));if(kt&&!("Z"in gt)&&(gt.Z=0),"p"in gt&&(gt.H=gt.H%12+gt.p*12),gt.m===void 0&&(gt.m="q"in gt?gt.q:0),"V"in gt){if(gt.V<1||gt.V>53)return null;"w"in gt||(gt.w=1),"Z"in gt?(Lt=xT($h(gt.y,0,1)),Zt=Lt.getUTCDay(),Lt=Zt>4||Zt===0?Ry.ceil(Lt):Ry(Lt),Lt=Kv.offset(Lt,(gt.V-1)*7),gt.y=Lt.getUTCFullYear(),gt.m=Lt.getUTCMonth(),gt.d=Lt.getUTCDate()+(gt.w+6)%7):(Lt=bT($h(gt.y,0,1)),Zt=Lt.getDay(),Lt=Zt>4||Zt===0?_y.ceil(Lt):_y(Lt),Lt=Yd.offset(Lt,(gt.V-1)*7),gt.y=Lt.getFullYear(),gt.m=Lt.getMonth(),gt.d=Lt.getDate()+(gt.w+6)%7)}else("W"in gt||"U"in gt)&&("w"in gt||(gt.w="u"in gt?gt.u%7:"W"in gt?1:0),Zt="Z"in gt?xT($h(gt.y,0,1)).getUTCDay():bT($h(gt.y,0,1)).getDay(),gt.m=0,gt.d="W"in gt?(gt.w+6)%7+gt.W*7-(Zt+5)%7:gt.w+gt.U*7-(Zt+6)%7);return"Z"in gt?(gt.H+=gt.Z/100|0,gt.M+=gt.Z%100,xT(gt)):bT(gt)}}function N(mt,kt,It,gt){for(var Vt=0,Lt=kt.length,Zt=It.length,Wt,Ht;Vt<Lt;){if(gt>=Zt)return-1;if(Wt=kt.charCodeAt(Vt++),Wt===37){if(Wt=kt.charAt(Vt++),Ht=A[Wt in RF?kt.charAt(Vt++):Wt],!Ht||(gt=Ht(mt,It,gt))<0)return-1}else if(Wt!=It.charCodeAt(gt++))return-1}return gt}function _(mt,kt,It){var gt=c.exec(kt.slice(It));return gt?(mt.p=h.get(gt[0].toLowerCase()),It+gt[0].length):-1}function R(mt,kt,It){var gt=g.exec(kt.slice(It));return gt?(mt.w=v.get(gt[0].toLowerCase()),It+gt[0].length):-1}function E(mt,kt,It){var gt=d.exec(kt.slice(It));return gt?(mt.w=p.get(gt[0].toLowerCase()),It+gt[0].length):-1}function F(mt,kt,It){var gt=w.exec(kt.slice(It));return gt?(mt.m=S.get(gt[0].toLowerCase()),It+gt[0].length):-1}function M(mt,kt,It){var gt=x.exec(kt.slice(It));return gt?(mt.m=b.get(gt[0].toLowerCase()),It+gt[0].length):-1}function B(mt,kt,It){return N(mt,t,kt,It)}function j(mt,kt,It){return N(mt,n,kt,It)}function P(mt,kt,It){return N(mt,r,kt,It)}function U(mt){return s[mt.getDay()]}function W(mt){return a[mt.getDay()]}function q(mt){return l[mt.getMonth()]}function L(mt){return o[mt.getMonth()]}function G(mt){return i[+(mt.getHours()>=12)]}function H(mt){return 1+~~(mt.getMonth()/3)}function Y(mt){return s[mt.getUTCDay()]}function ot(mt){return a[mt.getUTCDay()]}function ht(mt){return l[mt.getUTCMonth()]}function yt(mt){return o[mt.getUTCMonth()]}function Nt(mt){return i[+(mt.getUTCHours()>=12)]}function At(mt){return 1+~~(mt.getUTCMonth()/3)}return{format:function(mt){var kt=I(mt+="",T);return kt.toString=function(){return mt},kt},parse:function(mt){var kt=O(mt+="",!1);return kt.toString=function(){return mt},kt},utcFormat:function(mt){var kt=I(mt+="",$);return kt.toString=function(){return mt},kt},utcParse:function(mt){var kt=O(mt+="",!0);return kt.toString=function(){return mt},kt}}}var RF={"-":"",_:" ",0:"0"},Kn=/^\s*\d+/,uet=/^%/,cet=/[\\^$*+?|[\]().{}]/g;function Ce(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function fet(e){return e.replace(cet,"\\$&")}function Ah(e){return new RegExp("^(?:"+e.map(fet).join("|")+")","i")}function kh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function het(e,t,n){var r=Kn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function det(e,t,n){var r=Kn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function pet(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function met(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function get(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function DF(e,t,n){var r=Kn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function MF(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yet(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vet(e,t,n){var r=Kn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function bet(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function PF(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xet(e,t,n){var r=Kn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function FF(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wet(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Cet(e,t,n){var r=Kn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Tet(e,t,n){var r=Kn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function $et(e,t,n){var r=Kn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Aet(e,t,n){var r=uet.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ket(e,t,n){var r=Kn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Iet(e,t,n){var r=Kn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function LF(e,t){return Ce(e.getDate(),t,2)}function Eet(e,t){return Ce(e.getHours(),t,2)}function Oet(e,t){return Ce(e.getHours()%12||12,t,2)}function Net(e,t){return Ce(1+Yd.count(ys(e),e),t,3)}function vU(e,t){return Ce(e.getMilliseconds(),t,3)}function _et(e,t){return vU(e,t)+"000"}function Ret(e,t){return Ce(e.getMonth()+1,t,2)}function Det(e,t){return Ce(e.getMinutes(),t,2)}function Met(e,t){return Ce(e.getSeconds(),t,2)}function Pet(e){var t=e.getDay();return t===0?7:t}function Fet(e,t){return Ce(Yv.count(ys(e)-1,e),t,2)}function bU(e){var t=e.getDay();return t>=4||t===0?yc(e):yc.ceil(e)}function Let(e,t){return e=bU(e),Ce(yc.count(ys(e),e)+(ys(e).getDay()===4),t,2)}function Bet(e){return e.getDay()}function zet(e,t){return Ce(_y.count(ys(e)-1,e),t,2)}function jet(e,t){return Ce(e.getFullYear()%100,t,2)}function Uet(e,t){return e=bU(e),Ce(e.getFullYear()%100,t,2)}function Vet(e,t){return Ce(e.getFullYear()%1e4,t,4)}function Wet(e,t){var n=e.getDay();return e=n>=4||n===0?yc(e):yc.ceil(e),Ce(e.getFullYear()%1e4,t,4)}function Get(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ce(t/60|0,"0",2)+Ce(t%60,"0",2)}function BF(e,t){return Ce(e.getUTCDate(),t,2)}function qet(e,t){return Ce(e.getUTCHours(),t,2)}function Het(e,t){return Ce(e.getUTCHours()%12||12,t,2)}function Xet(e,t){return Ce(1+Kv.count(vs(e),e),t,3)}function xU(e,t){return Ce(e.getUTCMilliseconds(),t,3)}function Ket(e,t){return xU(e,t)+"000"}function Yet(e,t){return Ce(e.getUTCMonth()+1,t,2)}function Zet(e,t){return Ce(e.getUTCMinutes(),t,2)}function Qet(e,t){return Ce(e.getUTCSeconds(),t,2)}function Jet(e){var t=e.getUTCDay();return t===0?7:t}function tnt(e,t){return Ce(Zv.count(vs(e)-1,e),t,2)}function wU(e){var t=e.getUTCDay();return t>=4||t===0?vc(e):vc.ceil(e)}function ent(e,t){return e=wU(e),Ce(vc.count(vs(e),e)+(vs(e).getUTCDay()===4),t,2)}function nnt(e){return e.getUTCDay()}function rnt(e,t){return Ce(Ry.count(vs(e)-1,e),t,2)}function int(e,t){return Ce(e.getUTCFullYear()%100,t,2)}function ant(e,t){return e=wU(e),Ce(e.getUTCFullYear()%100,t,2)}function snt(e,t){return Ce(e.getUTCFullYear()%1e4,t,4)}function ont(e,t){var n=e.getUTCDay();return e=n>=4||n===0?vc(e):vc.ceil(e),Ce(e.getUTCFullYear()%1e4,t,4)}function lnt(){return"+0000"}function zF(){return"%"}function jF(e){return+e}function UF(e){return Math.floor(+e/1e3)}var Uu,SU,CU;unt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function unt(e){return Uu=oet(e),SU=Uu.format,Uu.parse,CU=Uu.utcFormat,Uu.utcParse,Uu}function cnt(e){return new Date(e)}function fnt(e){return e instanceof Date?+e:+new Date(+e)}function gk(e,t,n,r,i,a,s,o,l,c){var h=nk(),d=h.invert,p=h.domain,g=c(".%L"),v=c(":%S"),x=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),S=c("%b %d"),T=c("%B"),$=c("%Y");function A(I){return(l(I)<I?g:o(I)<I?v:s(I)<I?x:a(I)<I?b:r(I)<I?i(I)<I?w:S:n(I)<I?T:$)(I)}return h.invert=function(I){return new Date(d(I))},h.domain=function(I){return arguments.length?p(Array.from(I,fnt)):p().map(cnt)},h.ticks=function(I){var O=p();return e(O[0],O[O.length-1],I??10)},h.tickFormat=function(I,O){return O==null?A:c(O)},h.nice=function(I){var O=p();return(!I||typeof I.range!="function")&&(I=t(O[0],O[O.length-1],I??10)),I?p(uU(O,I)):h},h.copy=function(){return Kd(h,gk(e,t,n,r,i,a,s,o,l,c))},h}function hnt(){return Bi.apply(gk(aet,set,ys,pk,Yv,Yd,hk,ck,fl,SU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dnt(){return Bi.apply(gk(ret,iet,vs,mk,Zv,Kv,dk,fk,fl,CU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qv(){var e=0,t=1,n,r,i,a,s=Nr,o=!1,l;function c(d){return d==null||isNaN(d=+d)?l:s(i===0?.5:(d=(a(d)-n)*i,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([e,t]=d,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),c):[e,t]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(s=d,c):s};function h(d){return function(p){var g,v;return arguments.length?([g,v]=p,s=d(g,v),c):[s(0),s(1)]}}return c.range=h(ef),c.rangeRound=h(ek),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return a=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),c}}function To(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function TU(){var e=Co(Qv()(Nr));return e.copy=function(){return To(e,TU())},$s.apply(e,arguments)}function $U(){var e=ak(Qv()).domain([1,10]);return e.copy=function(){return To(e,$U()).base(e.base())},$s.apply(e,arguments)}function AU(){var e=sk(Qv());return e.copy=function(){return To(e,AU()).constant(e.constant())},$s.apply(e,arguments)}function yk(){var e=ok(Qv());return e.copy=function(){return To(e,yk()).exponent(e.exponent())},$s.apply(e,arguments)}function pnt(){return yk.apply(null,arguments).exponent(.5)}function kU(){var e=[],t=Nr;function n(r){if(r!=null&&!isNaN(r=+r))return t((Hd(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(lo),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>QJ(e,a/r))},n.copy=function(){return kU(t).domain(e)},$s.apply(n,arguments)}function Jv(){var e=0,t=.5,n=1,r=1,i,a,s,o,l,c=Nr,h,d=!1,p;function g(x){return isNaN(x=+x)?p:(x=.5+((x=+h(x))-a)*(r*x<r*a?o:l),c(d?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([e,t,n]=x,i=h(e=+e),a=h(t=+t),s=h(n=+n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,g):[e,t,n]},g.clamp=function(x){return arguments.length?(d=!!x,g):d},g.interpolator=function(x){return arguments.length?(c=x,g):c};function v(x){return function(b){var w,S,T;return arguments.length?([w,S,T]=b,c=Ttt(x,[w,S,T]),g):[c(0),c(.5),c(1)]}}return g.range=v(ef),g.rangeRound=v(ek),g.unknown=function(x){return arguments.length?(p=x,g):p},function(x){return h=x,i=x(e),a=x(t),s=x(n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,g}}function IU(){var e=Co(Jv()(Nr));return e.copy=function(){return To(e,IU())},$s.apply(e,arguments)}function EU(){var e=ak(Jv()).domain([.1,1,10]);return e.copy=function(){return To(e,EU()).base(e.base())},$s.apply(e,arguments)}function OU(){var e=sk(Jv());return e.copy=function(){return To(e,OU()).constant(e.constant())},$s.apply(e,arguments)}function vk(){var e=ok(Jv());return e.copy=function(){return To(e,vk()).exponent(e.exponent())},$s.apply(e,arguments)}function mnt(){return vk.apply(null,arguments).exponent(.5)}const VF=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ad,scaleDiverging:IU,scaleDivergingLog:EU,scaleDivergingPow:vk,scaleDivergingSqrt:mnt,scaleDivergingSymlog:OU,scaleIdentity:lU,scaleImplicit:K$,scaleLinear:Oy,scaleLog:cU,scaleOrdinal:QA,scalePoint:qh,scalePow:lk,scaleQuantile:dU,scaleQuantize:pU,scaleRadial:hU,scaleSequential:TU,scaleSequentialLog:$U,scaleSequentialPow:yk,scaleSequentialQuantile:kU,scaleSequentialSqrt:pnt,scaleSequentialSymlog:AU,scaleSqrt:Htt,scaleSymlog:fU,scaleThreshold:mU,scaleTime:hnt,scaleUtc:dnt,tickFormat:oU},Symbol.toStringTag,{value:"Module"}));var wT,WF;function NU(){if(WF)return wT;WF=1;var e=Yc();function t(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=r(o);if(l!=null&&(c===void 0?l===l&&!e(l):i(l,c)))var c=l,h=o}return h}return wT=t,wT}var ST,GF;function gnt(){if(GF)return ST;GF=1;function e(t,n){return t>n}return ST=e,ST}var CT,qF;function ynt(){if(qF)return CT;qF=1;var e=NU(),t=gnt(),n=tf();function r(i){return i&&i.length?e(i,n,t):void 0}return CT=r,CT}var vnt=ynt();const ro=Le(vnt);var TT,HF;function bnt(){if(HF)return TT;HF=1;function e(t,n){return t<n}return TT=e,TT}var $T,XF;function xnt(){if(XF)return $T;XF=1;var e=NU(),t=bnt(),n=tf();function r(i){return i&&i.length?e(i,n,t):void 0}return $T=r,$T}var wnt=xnt();const tb=Le(wnt);var AT,KF;function Snt(){if(KF)return AT;KF=1;var e=DA(),t=So(),n=Bj(),r=Qr();function i(a,s){var o=r(a)?e:n;return o(a,t(s,3))}return AT=i,AT}var kT,YF;function Cnt(){if(YF)return kT;YF=1;var e=Fj(),t=Snt();function n(r,i){return e(t(r,i),1)}return kT=n,kT}var Tnt=Cnt();const $nt=Le(Tnt);var IT,ZF;function Ant(){if(ZF)return IT;ZF=1;var e=HA();function t(n,r){return e(n,r)}return IT=t,IT}var knt=Ant();const bc=Le(knt);var nf=1e9,Int={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},xk,Je=!0,Pi="[DecimalError] ",yl=Pi+"Invalid argument: ",bk=Pi+"Exponent out of range: ",rf=Math.floor,il=Math.pow,Ent=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ui,qn=1e7,Ke=7,_U=9007199254740991,Dy=rf(_U/Ke),Dt={};Dt.absoluteValue=Dt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Dt.comparedTo=Dt.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Dt.decimalPlaces=Dt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ke;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Dt.dividedBy=Dt.div=function(e){return ds(this,new this.constructor(e))};Dt.dividedToIntegerBy=Dt.idiv=function(e){var t=this,n=t.constructor;return Ue(ds(t,new n(e),0,1),n.precision)};Dt.equals=Dt.eq=function(e){return!this.cmp(e)};Dt.exponent=function(){return An(this)};Dt.greaterThan=Dt.gt=function(e){return this.cmp(e)>0};Dt.greaterThanOrEqualTo=Dt.gte=function(e){return this.cmp(e)>=0};Dt.isInteger=Dt.isint=function(){return this.e>this.d.length-2};Dt.isNegative=Dt.isneg=function(){return this.s<0};Dt.isPositive=Dt.ispos=function(){return this.s>0};Dt.isZero=function(){return this.s===0};Dt.lessThan=Dt.lt=function(e){return this.cmp(e)<0};Dt.lessThanOrEqualTo=Dt.lte=function(e){return this.cmp(e)<1};Dt.logarithm=Dt.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ui))throw Error(Pi+"NaN");if(n.s<1)throw Error(Pi+(n.s?"NaN":"-Infinity"));return n.eq(ui)?new r(0):(Je=!1,t=ds(cd(n,a),cd(e,a),a),Je=!0,Ue(t,i))};Dt.minus=Dt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MU(t,e):RU(t,(e.s=-e.s,e))};Dt.modulo=Dt.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Pi+"NaN");return n.s?(Je=!1,t=ds(n,e,0,1).times(e),Je=!0,n.minus(t)):Ue(new r(n),i)};Dt.naturalExponential=Dt.exp=function(){return DU(this)};Dt.naturalLogarithm=Dt.ln=function(){return cd(this)};Dt.negated=Dt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Dt.plus=Dt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RU(t,e):MU(t,(e.s=-e.s,e))};Dt.precision=Dt.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(yl+e);if(t=An(i)+1,r=i.d.length-1,n=r*Ke+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Dt.squareRoot=Dt.sqrt=function(){var e,t,n,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Pi+"NaN")}for(e=An(o),Je=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=Sa(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=rf((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new l(t)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(ds(o,a,s+2)).times(.5),Sa(a.d).slice(0,s)===(t=Sa(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(Ue(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(t!="9999")break;s+=4}return Je=!0,Ue(r,n)};Dt.times=Dt.mul=function(e){var t,n,r,i,a,s,o,l,c,h=this,d=h.constructor,p=h.d,g=(e=new d(e)).d;if(!h.s||!e.s)return new d(0);for(e.s*=h.s,n=h.e+e.e,l=p.length,c=g.length,l<c&&(a=p,p=g,g=a,s=l,l=c,c=s),a=[],s=l+c,r=s;r--;)a.push(0);for(r=c;--r>=0;){for(t=0,i=l+r;i>r;)o=a[i]+g[r]*p[i-r-1]+t,a[i--]=o%qn|0,t=o/qn|0;a[i]=(a[i]+t)%qn|0}for(;!a[--s];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,Je?Ue(e,d.precision):e};Dt.toDecimalPlaces=Dt.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(_a(e,0,nf),t===void 0?t=r.rounding:_a(t,0,8),Ue(n,e+An(n)+1,t))};Dt.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Cl(r,!0):(_a(e,0,nf),t===void 0?t=i.rounding:_a(t,0,8),r=Ue(new i(r),e+1,t),n=Cl(r,!0,e+1)),n};Dt.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?Cl(i):(_a(e,0,nf),t===void 0?t=a.rounding:_a(t,0,8),r=Ue(new a(i),e+An(i)+1,t),n=Cl(r.abs(),!1,e+An(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Dt.toInteger=Dt.toint=function(){var e=this,t=e.constructor;return Ue(new t(e),An(e)+1,t.rounding)};Dt.toNumber=function(){return+this};Dt.toPower=Dt.pow=function(e){var t,n,r,i,a,s,o=this,l=o.constructor,c=12,h=+(e=new l(e));if(!e.s)return new l(ui);if(o=new l(o),!o.s){if(e.s<1)throw Error(Pi+"Infinity");return o}if(o.eq(ui))return o;if(r=l.precision,e.eq(ui))return Ue(o,r);if(t=e.e,n=e.d.length-1,s=t>=n,a=o.s,s){if((n=h<0?-h:h)<=_U){for(i=new l(ui),t=Math.ceil(r/Ke+4),Je=!1;n%2&&(i=i.times(o),JF(i.d,t)),n=rf(n/2),n!==0;)o=o.times(o),JF(o.d,t);return Je=!0,e.s<0?new l(ui).div(i):Ue(i,r)}}else if(a<0)throw Error(Pi+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,o.s=1,Je=!1,i=e.times(cd(o,r+c)),Je=!0,i=DU(i),i.s=a,i};Dt.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=An(i),r=Cl(i,n<=a.toExpNeg||n>=a.toExpPos)):(_a(e,1,nf),t===void 0?t=a.rounding:_a(t,0,8),i=Ue(new a(i),e,t),n=An(i),r=Cl(i,e<=n||n<=a.toExpNeg,e)),r};Dt.toSignificantDigits=Dt.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(_a(e,1,nf),t===void 0?t=r.rounding:_a(t,0,8)),Ue(new r(n),e,t)};Dt.toString=Dt.valueOf=Dt.val=Dt.toJSON=Dt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=An(e),n=e.constructor;return Cl(e,t<=n.toExpNeg||t>=n.toExpPos)};function RU(e,t){var n,r,i,a,s,o,l,c,h=e.constructor,d=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Je?Ue(t,d):t;if(l=e.d,c=t.d,s=e.e,i=t.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,o=c.length):(r=c,i=s,o=l.length),s=Math.ceil(d/Ke),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=c.length,o-a<0&&(a=o,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/qn|0,l[a]%=qn;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=i,Je?Ue(t,d):t}function _a(e,t,n){if(e!==~~e||e<t||e>n)throw Error(yl+e)}function Sa(e){var t,n,r,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)r=e[t]+"",n=Ke-r.length,n&&(a+=to(n)),a+=r;s=e[t],r=s+"",n=Ke-r.length,n&&(a+=to(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var ds=function(){function e(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%qn|0,s=a/qn|0;return s&&r.unshift(s),r}function t(r,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*qn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,l,c,h,d,p,g,v,x,b,w,S,T,$,A,I,O,N,_=r.constructor,R=r.s==i.s?1:-1,E=r.d,F=i.d;if(!r.s)return new _(r);if(!i.s)throw Error(Pi+"Division by zero");for(l=r.e-i.e,O=F.length,A=E.length,g=new _(R),v=g.d=[],c=0;F[c]==(E[c]||0);)++c;if(F[c]>(E[c]||0)&&--l,a==null?S=a=_.precision:s?S=a+(An(r)-An(i))+1:S=a,S<0)return new _(0);if(S=S/Ke+2|0,c=0,O==1)for(h=0,F=F[0],S++;(c<A||h)&&S--;c++)T=h*qn+(E[c]||0),v[c]=T/F|0,h=T%F|0;else{for(h=qn/(F[0]+1)|0,h>1&&(F=e(F,h),E=e(E,h),O=F.length,A=E.length),$=O,x=E.slice(0,O),b=x.length;b<O;)x[b++]=0;N=F.slice(),N.unshift(0),I=F[0],F[1]>=qn/2&&++I;do h=0,o=t(F,x,O,b),o<0?(w=x[0],O!=b&&(w=w*qn+(x[1]||0)),h=w/I|0,h>1?(h>=qn&&(h=qn-1),d=e(F,h),p=d.length,b=x.length,o=t(d,x,p,b),o==1&&(h--,n(d,O<p?N:F,p))):(h==0&&(o=h=1),d=F.slice()),p=d.length,p<b&&d.unshift(0),n(x,d,b),o==-1&&(b=x.length,o=t(F,x,O,b),o<1&&(h++,n(x,O<b?N:F,b))),b=x.length):o===0&&(h++,x=[0]),v[c++]=h,o&&x[0]?x[b++]=E[$]||0:(x=[E[$]],b=1);while(($++<A||x[0]!==void 0)&&S--)}return v[0]||v.shift(),g.e=l,Ue(g,s?a+An(g)+1:a)}}();function DU(e,t){var n,r,i,a,s,o,l=0,c=0,h=e.constructor,d=h.precision;if(An(e)>16)throw Error(bk+An(e));if(!e.s)return new h(ui);for(Je=!1,o=d,s=new h(.03125);e.abs().gte(.1);)e=e.times(s),c+=5;for(r=Math.log(il(2,c))/Math.LN10*2+5|0,o+=r,n=i=a=new h(ui),h.precision=o;;){if(i=Ue(i.times(e),o),n=n.times(++l),s=a.plus(ds(i,n,o)),Sa(s.d).slice(0,o)===Sa(a.d).slice(0,o)){for(;c--;)a=Ue(a.times(a),o);return h.precision=d,t==null?(Je=!0,Ue(a,d)):a}a=s}}function An(e){for(var t=e.e*Ke,n=e.d[0];n>=10;n/=10)t++;return t}function ET(e,t,n){if(t>e.LN10.sd())throw Je=!0,n&&(e.precision=n),Error(Pi+"LN10 precision limit exceeded");return Ue(new e(e.LN10),t)}function to(e){for(var t="";e--;)t+="0";return t}function cd(e,t){var n,r,i,a,s,o,l,c,h,d=1,p=10,g=e,v=g.d,x=g.constructor,b=x.precision;if(g.s<1)throw Error(Pi+(g.s?"NaN":"-Infinity"));if(g.eq(ui))return new x(0);if(t==null?(Je=!1,c=b):c=t,g.eq(10))return t==null&&(Je=!0),ET(x,c);if(c+=p,x.precision=c,n=Sa(v),r=n.charAt(0),a=An(g),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(e),n=Sa(g.d),r=n.charAt(0),d++;a=An(g),r>1?(g=new x("0."+n),a++):g=new x(r+"."+n.slice(1))}else return l=ET(x,c+2,b).times(a+""),g=cd(new x(r+"."+n.slice(1)),c-p).plus(l),x.precision=b,t==null?(Je=!0,Ue(g,b)):g;for(o=s=g=ds(g.minus(ui),g.plus(ui),c),h=Ue(g.times(g),c),i=3;;){if(s=Ue(s.times(h),c),l=o.plus(ds(s,new x(i),c)),Sa(l.d).slice(0,c)===Sa(o.d).slice(0,c))return o=o.times(2),a!==0&&(o=o.plus(ET(x,c+2,b).times(a+""))),o=ds(o,new x(d),c),x.precision=b,t==null?(Je=!0,Ue(o,b)):o;o=l,i+=2}}function QF(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=rf(n/Ke),e.d=[],r=(n+1)%Ke,n<0&&(r+=Ke),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Ke;r<i;)e.d.push(+t.slice(r,r+=Ke));t=t.slice(r),r=Ke-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Je&&(e.e>Dy||e.e<-Dy))throw Error(bk+n)}else e.s=0,e.e=0,e.d=[0];return e}function Ue(e,t,n){var r,i,a,s,o,l,c,h,d=e.d;for(s=1,a=d[0];a>=10;a/=10)s++;if(r=t-s,r<0)r+=Ke,i=t,c=d[h=0];else{if(h=Math.ceil((r+1)/Ke),a=d.length,h>=a)return e;for(c=a=d[h],s=1;a>=10;a/=10)s++;r%=Ke,i=r-Ke+s}if(n!==void 0&&(a=il(10,s-i-1),o=c/a%10|0,l=t<0||d[h+1]!==void 0||c%a,l=n<4?(o||l)&&(n==0||n==(e.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/il(10,s-i):0:d[h-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return l?(a=An(e),d.length=1,t=t-a-1,d[0]=il(10,(Ke-t%Ke)%Ke),e.e=rf(-t/Ke)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=h,a=1,h--):(d.length=h+1,a=il(10,Ke-r),d[h]=i>0?(c/il(10,s-i)%il(10,i)|0)*a:0),l)for(;;)if(h==0){(d[0]+=a)==qn&&(d[0]=1,++e.e);break}else{if(d[h]+=a,d[h]!=qn)break;d[h--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(Je&&(e.e>Dy||e.e<-Dy))throw Error(bk+An(e));return e}function MU(e,t){var n,r,i,a,s,o,l,c,h,d,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Je?Ue(t,g):t;if(l=e.d,d=t.d,r=t.e,c=e.e,l=l.slice(),s=c-r,s){for(h=s<0,h?(n=l,s=-s,o=d.length):(n=d,r=c,o=l.length),i=Math.max(Math.ceil(g/Ke),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=d.length,h=i<o,h&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){h=l[i]<d[i];break}s=0}for(h&&(n=l,l=d,d=n,t.s=-t.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>s;){if(l[--i]<d[i]){for(a=i;a&&l[--a]===0;)l[a]=qn-1;--l[a],l[i]+=qn}l[i]-=d[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(t.d=l,t.e=r,Je?Ue(t,g):t):new p(0)}function Cl(e,t,n){var r,i=An(e),a=Sa(e.d),s=a.length;return t?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+to(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+to(-i-1)+a,n&&(r=n-s)>0&&(a+=to(r))):i>=s?(a+=to(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+to(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=to(r))),e.s<0?"-"+a:a}function JF(e,t){if(e.length>t)return e.length=t,!0}function PU(e){var t,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(yl+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return QF(s,a.toString())}else if(typeof a!="string")throw Error(yl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Ent.test(a))QF(s,a);else throw Error(yl+a)}if(i.prototype=Dt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=PU,i.config=i.set=Ont,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Ont(e){if(!e||typeof e!="object")throw Error(Pi+"Object expected");var t,n,r,i=["precision",1,nf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(rf(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(yl+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(yl+n+": "+r);return this}var xk=PU(Int);ui=new xk(1);const Pe=xk;function Nnt(e){return Mnt(e)||Dnt(e)||Rnt(e)||_nt()}function _nt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rnt(e,t){if(e){if(typeof e=="string")return J$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J$(e,t)}}function Dnt(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Mnt(e){if(Array.isArray(e))return J$(e)}function J$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pnt=function(t){return t},FU={},LU=function(t){return t===FU},tL=function(t){return function n(){return arguments.length===0||arguments.length===1&&LU(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Fnt=function e(t,n){return t===1?n:tL(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==FU}).length;return s>=t?n.apply(void 0,i):e(t-s,tL(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var h=i.map(function(d){return LU(d)?l.shift():d});return n.apply(void 0,Nnt(h).concat(l))}))})},eb=function(t){return Fnt(t.length,t)},t2=function(t,n){for(var r=[],i=t;i<n;++i)r[i-t]=i;return r},Lnt=eb(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Bnt=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Pnt;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},e2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},BU=function(t){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,l){return o===n[l]})||(n=a,r=t.apply(void 0,a)),r}};function znt(e){var t;return e===0?t=1:t=Math.floor(new Pe(e).abs().log(10).toNumber())+1,t}function jnt(e,t,n){for(var r=new Pe(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Unt=eb(function(e,t,n){var r=+e,i=+t;return r+n*(i-r)}),Vnt=eb(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),Wnt=eb(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const nb={rangeStep:jnt,getDigitCount:znt,interpolateNumber:Unt,uninterpolateNumber:Vnt,uninterpolateTruncation:Wnt};function n2(e){return Hnt(e)||qnt(e)||zU(e)||Gnt()}function Gnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qnt(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Hnt(e){if(Array.isArray(e))return r2(e)}function fd(e,t){return Ynt(e)||Knt(e,t)||zU(e,t)||Xnt()}function Xnt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zU(e,t){if(e){if(typeof e=="string")return r2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r2(e,t)}}function r2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Knt(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=e[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(t&&n.length===t));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function Ynt(e){if(Array.isArray(e))return e}function jU(e){var t=fd(e,2),n=t[0],r=t[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function UU(e,t,n){if(e.lte(0))return new Pe(0);var r=nb.getDigitCount(e.toNumber()),i=new Pe(10).pow(r),a=e.div(i),s=r!==1?.05:.1,o=new Pe(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=o.mul(i);return t?l:new Pe(Math.ceil(l))}function Znt(e,t,n){var r=1,i=new Pe(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new Pe(10).pow(nb.getDigitCount(e)-1),i=new Pe(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Pe(Math.floor(e)))}else e===0?i=new Pe(Math.floor((t-1)/2)):n||(i=new Pe(Math.floor(e)));var s=Math.floor((t-1)/2),o=Bnt(Lnt(function(l){return i.add(new Pe(l-s).mul(r)).toNumber()}),t2);return o(0,t)}function VU(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Pe(0),tickMin:new Pe(0),tickMax:new Pe(0)};var a=UU(new Pe(t).sub(e).div(n-1),r,i),s;e<=0&&t>=0?s=new Pe(0):(s=new Pe(e).add(t).div(2),s=s.sub(new Pe(s).mod(a)));var o=Math.ceil(s.sub(e).div(a).toNumber()),l=Math.ceil(new Pe(t).sub(s).div(a).toNumber()),c=o+l+1;return c>n?VU(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:a,tickMin:s.sub(new Pe(o).mul(a)),tickMax:s.add(new Pe(l).mul(a))})}function Qnt(e){var t=fd(e,2),n=t[0],r=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=jU([n,r]),l=fd(o,2),c=l[0],h=l[1];if(c===-1/0||h===1/0){var d=h===1/0?[c].concat(n2(t2(0,i-1).map(function(){return 1/0}))):[].concat(n2(t2(0,i-1).map(function(){return-1/0})),[h]);return n>r?e2(d):d}if(c===h)return Znt(c,i,a);var p=VU(c,h,s,a),g=p.step,v=p.tickMin,x=p.tickMax,b=nb.rangeStep(v,x.add(new Pe(.1).mul(g)),g);return n>r?e2(b):b}function Jnt(e,t){var n=fd(e,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=jU([r,i]),o=fd(s,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var h=Math.max(t,2),d=UU(new Pe(c).sub(l).div(h-1),a,0),p=[].concat(n2(nb.rangeStep(new Pe(l),new Pe(c).sub(new Pe(.99).mul(d)),d)),[c]);return r>i?e2(p):p}var trt=BU(Qnt),ert=BU(Jnt),nrt="Invariant failed";function Tl(e,t){throw new Error(nrt)}var rrt=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function xc(e){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xc(e)}function My(){return My=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},My.apply(this,arguments)}function irt(e,t){return lrt(e)||ort(e,t)||srt(e,t)||art()}function art(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function srt(e,t){if(e){if(typeof e=="string")return eL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eL(e,t)}}function eL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ort(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function lrt(e){if(Array.isArray(e))return e}function urt(e,t){if(e==null)return{};var n=crt(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function crt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function frt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hrt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qU(r.key),r)}}function drt(e,t,n){return t&&hrt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function prt(e,t,n){return t=Py(t),mrt(e,WU()?Reflect.construct(t,n||[],Py(e).constructor):t.apply(e,n))}function mrt(e,t){if(t&&(xc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return grt(e)}function grt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WU=function(){return!!e})()}function Py(e){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Py(e)}function yrt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i2(e,t)}function i2(e,t){return i2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},i2(e,t)}function GU(e,t,n){return t=qU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qU(e){var t=vrt(e,"string");return xc(t)=="symbol"?t:t+""}function vrt(e,t){if(xc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zd=function(e){function t(){return frt(this,t),prt(this,t,arguments)}return yrt(t,e),drt(t,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,l=r.data,c=r.dataPointFormatter,h=r.xAxis,d=r.yAxis,p=urt(r,rrt),g=re(p,!1);this.props.direction==="x"&&h.type!=="number"&&Tl();var v=l.map(function(x){var b=c(x,o),w=b.x,S=b.y,T=b.value,$=b.errorVal;if(!$)return null;var A=[],I,O;if(Array.isArray($)){var N=irt($,2);I=N[0],O=N[1]}else I=O=$;if(a==="vertical"){var _=h.scale,R=S+i,E=R+s,F=R-s,M=_(T-I),B=_(T+O);A.push({x1:B,y1:E,x2:B,y2:F}),A.push({x1:M,y1:R,x2:B,y2:R}),A.push({x1:M,y1:E,x2:M,y2:F})}else if(a==="horizontal"){var j=d.scale,P=w+i,U=P-s,W=P+s,q=j(T-I),L=j(T+O);A.push({x1:U,y1:L,x2:W,y2:L}),A.push({x1:P,y1:q,x2:P,y2:L}),A.push({x1:U,y1:q,x2:W,y2:q})}return Z.createElement(He,My({className:"recharts-errorBar",key:"bar-".concat(A.map(function(G){return"".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))},g),A.map(function(G){return Z.createElement("line",My({},G,{key:"line-".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))}))});return Z.createElement(He,{className:"recharts-errorBars"},v)}}])}(Z.Component);GU(Zd,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});GU(Zd,"displayName","ErrorBar");function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}function nL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nL(Object(n),!0).forEach(function(r){brt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function brt(e,t,n){return t=xrt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xrt(e){var t=wrt(e,"string");return hd(t)=="symbol"?t:t+""}function wrt(e,t){if(hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HU=function(t){var n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,s=li(n,ec);if(!s)return null;var o=ec.defaultProps,l=o!==void 0?tl(tl({},o),s.props):{},c;return s.props&&s.props.payload?c=s.props&&s.props.payload:a==="children"?c=(r||[]).reduce(function(h,d){var p=d.item,g=d.props,v=g.sectors||g.data||[];return h.concat(v.map(function(x){return{type:s.props.iconType||p.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):c=(r||[]).map(function(h){var d=h.item,p=d.type.defaultProps,g=p!==void 0?tl(tl({},p),d.props):{},v=g.dataKey,x=g.name,b=g.legendType,w=g.hide;return{inactive:w,dataKey:v,type:l.iconType||b||"square",color:wk(d),value:x||v,payload:g}}),tl(tl(tl({},l),ec.getWithHeight(s,i)),{},{payload:c,item:s})};function dd(e){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dd(e)}function rL(e){return $rt(e)||Trt(e)||Crt(e)||Srt()}function Srt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Crt(e,t){if(e){if(typeof e=="string")return a2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a2(e,t)}}function Trt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $rt(e){if(Array.isArray(e))return a2(e)}function a2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iL(Object(n),!0).forEach(function(r){rc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rc(e,t,n){return t=Art(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Art(e){var t=krt(e,"string");return dd(t)=="symbol"?t:t+""}function krt(e,t){if(dd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rr(e,t,n){return ce(e)||ce(t)?n:Ln(t)?Di(e,t,n):te(t)?t(e):n}function Hh(e,t,n,r){var i=$nt(e,function(o){return Rr(o,t)});if(n==="number"){var a=i.filter(function(o){return Et(o)||parseFloat(o)});return a.length?[tb(a),ro(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!ce(o)}):i;return s.map(function(o){return Ln(o)||o instanceof Date?o:""})}var Irt=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<o;c++){var h=c>0?i[c-1].coordinate:i[o-1].coordinate,d=i[c].coordinate,p=c>=o-1?i[0].coordinate:i[c+1].coordinate,g=void 0;if(na(d-h)!==na(p-d)){var v=[];if(na(p-d)===na(l[1]-l[0])){g=p;var x=d+l[1]-l[0];v[0]=Math.min(x,(x+h)/2),v[1]=Math.max(x,(x+h)/2)}else{g=h;var b=p+l[1]-l[0];v[0]=Math.min(d,(b+d)/2),v[1]=Math.max(d,(b+d)/2)}var w=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(t>w[0]&&t<=w[1]||t>=v[0]&&t<=v[1]){s=i[c].index;break}}else{var S=Math.min(h,p),T=Math.max(h,p);if(t>(S+d)/2&&t<=(T+d)/2){s=i[c].index;break}}}else for(var $=0;$<o;$++)if($===0&&t<=(r[$].coordinate+r[$+1].coordinate)/2||$>0&&$<o-1&&t>(r[$].coordinate+r[$-1].coordinate)/2&&t<=(r[$].coordinate+r[$+1].coordinate)/2||$===o-1&&t>(r[$].coordinate+r[$-1].coordinate)/2){s=r[$].index;break}return s},wk=function(t){var n,r=t,i=r.type.displayName,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ln(ln({},t.type.defaultProps),t.props):t.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},Ert=function(t){var n=t.barSize,r=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,c=o.length;l<c;l++)for(var h=a[o[l]].stackGroups,d=Object.keys(h),p=0,g=d.length;p<g;p++){var v=h[d[p]],x=v.items,b=v.cateAxisId,w=x.filter(function(O){return fs(O.type).indexOf("Bar")>=0});if(w&&w.length){var S=w[0].type.defaultProps,T=S!==void 0?ln(ln({},S),w[0].props):w[0].props,$=T.barSize,A=T[b];s[A]||(s[A]=[]);var I=ce($)?n:$;s[A].push({item:w[0],stackList:w.slice(1),barSize:ce(I)?void 0:Sl(I,r,0)})}}return s},Ort=function(t){var n=t.barGap,r=t.barCategoryGap,i=t.bandSize,a=t.sizeList,s=a===void 0?[]:a,o=t.maxBarSize,l=s.length;if(l<1)return null;var c=Sl(n,i,0,!0),h,d=[];if(s[0].barSize===+s[0].barSize){var p=!1,g=i/l,v=s.reduce(function($,A){return $+A.barSize||0},0);v+=(l-1)*c,v>=i&&(v-=(l-1)*c,c=0),v>=i&&g>0&&(p=!0,g*=.9,v=l*g);var x=(i-v)/2>>0,b={offset:x-c,size:0};h=s.reduce(function($,A){var I={item:A.item,position:{offset:b.offset+b.size+c,size:p?g:A.barSize}},O=[].concat(rL($),[I]);return b=O[O.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(N){O.push({item:N,position:b})}),O},d)}else{var w=Sl(r,i,0,!0);i-2*w-(l-1)*c<=0&&(c=0);var S=(i-2*w-(l-1)*c)/l;S>1&&(S>>=0);var T=o===+o?Math.min(S,o):S;h=s.reduce(function($,A,I){var O=[].concat(rL($),[{item:A.item,position:{offset:w+(S+c)*I+(S-T)/2,size:T}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(N){O.push({item:N,position:O[O.length-1].position})}),O},d)}return h},Nrt=function(t,n,r,i){var a=r.children,s=r.width,o=r.margin,l=s-(o.left||0)-(o.right||0),c=HU({children:a,legendWidth:l});if(c){var h=i||{},d=h.width,p=h.height,g=c.align,v=c.verticalAlign,x=c.layout;if((x==="vertical"||x==="horizontal"&&v==="middle")&&g!=="center"&&Et(t[g]))return ln(ln({},t),{},rc({},g,t[g]+(d||0)));if((x==="horizontal"||x==="vertical"&&g==="center")&&v!=="middle"&&Et(t[v]))return ln(ln({},t),{},rc({},v,t[v]+(p||0)))}return t},_rt=function(t,n,r){return ce(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},XU=function(t,n,r,i,a){var s=n.props.children,o=Mi(s,Zd).filter(function(c){return _rt(i,a,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return t.reduce(function(c,h){var d=Rr(h,r);if(ce(d))return c;var p=Array.isArray(d)?[tb(d),ro(d)]:[d,d],g=l.reduce(function(v,x){var b=Rr(h,x,0),w=p[0]-Math.abs(Array.isArray(b)?b[0]:b),S=p[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(w,v[0]),Math.max(S,v[1])]},[1/0,-1/0]);return[Math.min(g[0],c[0]),Math.max(g[1],c[1])]},[1/0,-1/0])}return null},Rrt=function(t,n,r,i,a){var s=n.map(function(o){return XU(t,o,r,a,i)}).filter(function(o){return!ce(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},KU=function(t,n,r,i,a){var s=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&XU(t,l,c,i)||Hh(t,c,r,a)});if(r==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,c){for(var h=0,d=c.length;h<d;h++)o[c[h]]||(o[c[h]]=!0,l.push(c[h]));return l},[])},YU=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},ZU=function(t,n,r,i){if(i)return t.map(function(l){return l.coordinate});var a,s,o=t.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||o.push(n),s||o.push(r),o},us=function(t,n,r){if(!t)return null;var i=t.scale,a=t.duplicateDomain,s=t.type,o=t.range,l=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?na(o[0]-o[1])*2*c:c,n&&(t.ticks||t.niceTicks)){var h=(t.ticks||t.niceTicks).map(function(d){var p=a?a.indexOf(d):d;return{coordinate:i(p)+c,value:d,offset:c}});return h.filter(function(d){return!Qc(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,p){return{coordinate:i(d)+c,value:d,index:p,offset:c}}):i.ticks&&!r?i.ticks(t.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,p){return{coordinate:i(d)+c,value:a?a[d]:d,index:p,offset:c}})},OT=new WeakMap,Pg=function(t,n){if(typeof n!="function")return t;OT.has(t)||OT.set(t,new WeakMap);var r=OT.get(t);if(r.has(n))return r.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Drt=function(t,n,r){var i=t.scale,a=t.type,s=t.layout,o=t.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:ad(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Oy(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:qh(),realScaleType:"point"}:a==="category"?{scale:ad(),realScaleType:"band"}:{scale:Oy(),realScaleType:"linear"};if(wl(i)){var l="scale".concat(jv(i));return{scale:(VF[l]||qh)(),realScaleType:VF[l]?l:"point"}}return te(i)?{scale:i}:{scale:qh(),realScaleType:"point"}},aL=1e-4,Mrt=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,i=t.range(),a=Math.min(i[0],i[1])-aL,s=Math.max(i[0],i[1])+aL,o=t(n[0]),l=t(n[r-1]);(o<a||o>s||l<a||l>s)&&t.domain([n[0],n[r-1]])}},Prt=function(t,n){if(!t)return null;for(var r=0,i=t.length;r<i;r++)if(t[r].item===n)return t[r].position;return null},Frt=function(t,n){if(!n||n.length!==2||!Et(n[0])||!Et(n[1]))return t;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!Et(t[0])||t[0]<r)&&(a[0]=r),(!Et(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},Lrt=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var l=Qc(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=a,t[o][r][1]=a+l,a=t[o][r][1]):(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1])}},Brt=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=Qc(t[s][r][1])?t[s][r][0]:t[s][r][1];o>=0?(t[s][r][0]=a,t[s][r][1]=a+o,a=t[s][r][1]):(t[s][r][0]=0,t[s][r][1]=0)}},zrt={sign:Lrt,expand:wY,none:fc,silhouette:SY,wiggle:CY,positive:Brt},jrt=function(t,n,r){var i=n.map(function(o){return o.props.dataKey}),a=zrt[r],s=xY().keys(i).value(function(o,l){return+Rr(o,l,0)}).order(M$).offset(a);return s(t)},Urt=function(t,n,r,i,a,s){if(!t)return null;var o=s?n.reverse():n,l={},c=o.reduce(function(d,p){var g,v=(g=p.type)!==null&&g!==void 0&&g.defaultProps?ln(ln({},p.type.defaultProps),p.props):p.props,x=v.stackId,b=v.hide;if(b)return d;var w=v[r],S=d[w]||{hasStack:!1,stackGroups:{}};if(Ln(x)){var T=S.stackGroups[x]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(p),S.hasStack=!0,S.stackGroups[x]=T}else S.stackGroups[Jc("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return ln(ln({},d),{},rc({},w,S))},l),h={};return Object.keys(c).reduce(function(d,p){var g=c[p];if(g.hasStack){var v={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(x,b){var w=g.stackGroups[b];return ln(ln({},x),{},rc({},b,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:jrt(t,w.items,a)}))},v)}return ln(ln({},d),{},rc({},p,g))},h)},Vrt=function(t,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=t.domain();if(!c.length)return null;var h=trt(c,a,o);return t.domain([tb(h),ro(h)]),{niceTicks:h}}if(a&&i==="number"){var d=t.domain(),p=ert(d,a,o);return{niceTicks:p}}return null};function Fy(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,a=e.index,s=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ce(i[t.dataKey])){var o=cy(n,"value",i[t.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=Rr(i,ce(s)?t.dataKey:s);return ce(l)?null:t.scale(l)}var sL=function(t){var n=t.axis,r=t.ticks,i=t.offset,a=t.bandSize,s=t.entry,o=t.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=Rr(s,n.dataKey,n.domain[o]);return ce(l)?null:n.scale(l)-a/2+i},Wrt=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Grt=function(t,n){var r,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ln(ln({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(Ln(a)){var s=n[a];if(s){var o=s.items.indexOf(t);return o>=0?s.stackedData[o]:null}}return null},qrt=function(t){return t.reduce(function(n,r){return[tb(r.concat([n[0]]).filter(Et)),ro(r.concat([n[1]]).filter(Et))]},[1/0,-1/0])},QU=function(t,n,r){return Object.keys(t).reduce(function(i,a){var s=t[a],o=s.stackedData,l=o.reduce(function(c,h){var d=qrt(h.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},oL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,s2=function(t,n,r){if(te(t))return t(n,r);if(!Array.isArray(t))return n;var i=[];if(Et(t[0]))i[0]=r?t[0]:Math.min(t[0],n[0]);else if(oL.test(t[0])){var a=+oL.exec(t[0])[1];i[0]=n[0]-a}else te(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(Et(t[1]))i[1]=r?t[1]:Math.max(t[1],n[1]);else if(lL.test(t[1])){var s=+lL.exec(t[1])[1];i[1]=n[1]+s}else te(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},Ly=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!r||i>0)return i}if(t&&n&&n.length>=2){for(var a=KA(n,function(d){return d.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],h=a[o-1];s=Math.min((c.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},uL=function(t,n,r){return!t||!t.length||bc(t,Di(r,"type.defaultProps.domain"))?n:t},JU=function(t,n){var r=t.type.defaultProps?ln(ln({},t.type.defaultProps),t.props):t.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,l=r.tooltipType,c=r.chartType,h=r.hide;return ln(ln({},re(t,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:wk(t),value:Rr(n,i),type:l,payload:n,chartType:c,hide:h})};function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function cL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cL(Object(n),!0).forEach(function(r){Hrt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hrt(e,t,n){return t=Xrt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xrt(e){var t=Krt(e,"string");return pd(t)=="symbol"?t:t+""}function Krt(e,t){if(pd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var By=Math.PI/180,Yrt=function(t){return t*180/Math.PI},ar=function(t,n,r,i){return{x:t+Math.cos(-By*i)*r,y:n+Math.sin(-By*i)*r}},Zrt=function(t,n){var r=t.x,i=t.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},Qrt=function(t,n){var r=t.x,i=t.y,a=n.cx,s=n.cy,o=Zrt({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(r-a)/o,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:o,angle:Yrt(c),angleInRadian:c}},Jrt=function(t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},tit=function(t,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return t+o*360},hL=function(t,n){var r=t.x,i=t.y,a=Qrt({x:r,y:i},n),s=a.radius,o=a.angle,l=n.innerRadius,c=n.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var h=Jrt(n),d=h.startAngle,p=h.endAngle,g=o,v;if(d<=p){for(;g>p;)g-=360;for(;g<d;)g+=360;v=g>=d&&g<=p}else{for(;g>d;)g-=360;for(;g<p;)g+=360;v=g>=p&&g<=d}return v?fL(fL({},n),{},{radius:s,angle:tit(g,n)}):null};function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(e)}var eit=["offset"];function nit(e){return sit(e)||ait(e)||iit(e)||rit()}function rit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iit(e,t){if(e){if(typeof e=="string")return o2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o2(e,t)}}function ait(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sit(e){if(Array.isArray(e))return o2(e)}function o2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oit(e,t){if(e==null)return{};var n=lit(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lit(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function dL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dL(Object(n),!0).forEach(function(r){uit(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uit(e,t,n){return t=cit(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cit(e){var t=fit(e,"string");return md(t)=="symbol"?t:t+""}function fit(e,t){if(md(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gd(){return gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gd.apply(this,arguments)}var hit=function(t){var n=t.value,r=t.formatter,i=ce(t.children)?n:t.children;return te(r)?r(i):i},dit=function(t,n){var r=na(n-t),i=Math.min(Math.abs(n-t),360);return r*i},pit=function(t,n,r){var i=t.position,a=t.viewBox,s=t.offset,o=t.className,l=a,c=l.cx,h=l.cy,d=l.innerRadius,p=l.outerRadius,g=l.startAngle,v=l.endAngle,x=l.clockWise,b=(d+p)/2,w=dit(g,v),S=w>=0?1:-1,T,$;i==="insideStart"?(T=g+S*s,$=x):i==="insideEnd"?(T=v-S*s,$=!x):i==="end"&&(T=v+S*s,$=x),$=w<=0?$:!$;var A=ar(c,h,b,T),I=ar(c,h,b,T+($?1:-1)*359),O="M".concat(A.x,",").concat(A.y,`
    A`).concat(b,",").concat(b,",0,1,").concat($?0:1,`,
    `).concat(I.x,",").concat(I.y),N=ce(t.id)?Jc("recharts-radial-line-"):t.id;return Z.createElement("text",gd({},r,{dominantBaseline:"central",className:ve("recharts-radial-bar-label",o)}),Z.createElement("defs",null,Z.createElement("path",{id:N,d:O})),Z.createElement("textPath",{xlinkHref:"#".concat(N)},n))},mit=function(t){var n=t.viewBox,r=t.offset,i=t.position,a=n,s=a.cx,o=a.cy,l=a.innerRadius,c=a.outerRadius,h=a.startAngle,d=a.endAngle,p=(h+d)/2;if(i==="outside"){var g=ar(s,o,c+r,p),v=g.x,x=g.y;return{x:v,y:x,textAnchor:v>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var b=(l+c)/2,w=ar(s,o,b,p),S=w.x,T=w.y;return{x:S,y:T,textAnchor:"middle",verticalAnchor:"middle"}},git=function(t){var n=t.viewBox,r=t.parentViewBox,i=t.offset,a=t.position,s=n,o=s.x,l=s.y,c=s.width,h=s.height,d=h>=0?1:-1,p=d*i,g=d>0?"end":"start",v=d>0?"start":"end",x=c>=0?1:-1,b=x*i,w=x>0?"end":"start",S=x>0?"start":"end";if(a==="top"){var T={x:o+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:g};return Mn(Mn({},T),r?{height:Math.max(l-r.y,0),width:c}:{})}if(a==="bottom"){var $={x:o+c/2,y:l+h+p,textAnchor:"middle",verticalAnchor:v};return Mn(Mn({},$),r?{height:Math.max(r.y+r.height-(l+h),0),width:c}:{})}if(a==="left"){var A={x:o-b,y:l+h/2,textAnchor:w,verticalAnchor:"middle"};return Mn(Mn({},A),r?{width:Math.max(A.x-r.x,0),height:h}:{})}if(a==="right"){var I={x:o+c+b,y:l+h/2,textAnchor:S,verticalAnchor:"middle"};return Mn(Mn({},I),r?{width:Math.max(r.x+r.width-I.x,0),height:h}:{})}var O=r?{width:c,height:h}:{};return a==="insideLeft"?Mn({x:o+b,y:l+h/2,textAnchor:S,verticalAnchor:"middle"},O):a==="insideRight"?Mn({x:o+c-b,y:l+h/2,textAnchor:w,verticalAnchor:"middle"},O):a==="insideTop"?Mn({x:o+c/2,y:l+p,textAnchor:"middle",verticalAnchor:v},O):a==="insideBottom"?Mn({x:o+c/2,y:l+h-p,textAnchor:"middle",verticalAnchor:g},O):a==="insideTopLeft"?Mn({x:o+b,y:l+p,textAnchor:S,verticalAnchor:v},O):a==="insideTopRight"?Mn({x:o+c-b,y:l+p,textAnchor:w,verticalAnchor:v},O):a==="insideBottomLeft"?Mn({x:o+b,y:l+h-p,textAnchor:S,verticalAnchor:g},O):a==="insideBottomRight"?Mn({x:o+c-b,y:l+h-p,textAnchor:w,verticalAnchor:g},O):Zc(a)&&(Et(a.x)||ul(a.x))&&(Et(a.y)||ul(a.y))?Mn({x:o+Sl(a.x,c),y:l+Sl(a.y,h),textAnchor:"end",verticalAnchor:"end"},O):Mn({x:o+c/2,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},O)},yit=function(t){return"cx"in t&&Et(t.cx)};function br(e){var t=e.offset,n=t===void 0?5:t,r=oit(e,eit),i=Mn({offset:n},r),a=i.viewBox,s=i.position,o=i.value,l=i.children,c=i.content,h=i.className,d=h===void 0?"":h,p=i.textBreakAll;if(!a||ce(o)&&ce(l)&&!Tt.isValidElement(c)&&!te(c))return null;if(Tt.isValidElement(c))return Tt.cloneElement(c,i);var g;if(te(c)){if(g=Tt.createElement(c,i),Tt.isValidElement(g))return g}else g=hit(i);var v=yit(a),x=re(i,!0);if(v&&(s==="insideStart"||s==="insideEnd"||s==="end"))return pit(i,g,x);var b=v?mit(i):git(i);return Z.createElement(Cy,gd({className:ve("recharts-label",d)},x,b,{breakAll:p}),g)}br.displayName="Label";var tV=function(t){var n=t.cx,r=t.cy,i=t.angle,a=t.startAngle,s=t.endAngle,o=t.r,l=t.radius,c=t.innerRadius,h=t.outerRadius,d=t.x,p=t.y,g=t.top,v=t.left,x=t.width,b=t.height,w=t.clockWise,S=t.labelViewBox;if(S)return S;if(Et(x)&&Et(b)){if(Et(d)&&Et(p))return{x:d,y:p,width:x,height:b};if(Et(g)&&Et(v))return{x:g,y:v,width:x,height:b}}return Et(d)&&Et(p)?{x:d,y:p,width:0,height:0}:Et(n)&&Et(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:c||0,outerRadius:h||l||o||0,clockWise:w}:t.viewBox?t.viewBox:{}},vit=function(t,n){return t?t===!0?Z.createElement(br,{key:"label-implicit",viewBox:n}):Ln(t)?Z.createElement(br,{key:"label-implicit",viewBox:n,value:t}):Tt.isValidElement(t)?t.type===br?Tt.cloneElement(t,{key:"label-implicit",viewBox:n}):Z.createElement(br,{key:"label-implicit",content:t,viewBox:n}):te(t)?Z.createElement(br,{key:"label-implicit",content:t,viewBox:n}):Zc(t)?Z.createElement(br,gd({viewBox:n},t,{key:"label-implicit"})):null:null},bit=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var i=t.children,a=tV(t),s=Mi(i,br).map(function(l,c){return Tt.cloneElement(l,{viewBox:n||a,key:"label-".concat(c)})});if(!r)return s;var o=vit(t.label,n||a);return[o].concat(nit(s))};br.parseViewBox=tV;br.renderCallByParent=bit;var NT,pL;function xit(){if(pL)return NT;pL=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return NT=e,NT}var wit=xit();const Sit=Le(wit);function yd(e){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yd(e)}var Cit=["valueAccessor"],Tit=["data","dataKey","clockWise","id","textBreakAll"];function $it(e){return Eit(e)||Iit(e)||kit(e)||Ait()}function Ait(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kit(e,t){if(e){if(typeof e=="string")return l2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l2(e,t)}}function Iit(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Eit(e){if(Array.isArray(e))return l2(e)}function l2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zy.apply(this,arguments)}function mL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mL(Object(n),!0).forEach(function(r){Oit(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oit(e,t,n){return t=Nit(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nit(e){var t=_it(e,"string");return yd(t)=="symbol"?t:t+""}function _it(e,t){if(yd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yL(e,t){if(e==null)return{};var n=Rit(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rit(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Dit=function(t){return Array.isArray(t.value)?Sit(t.value):t.value};function ps(e){var t=e.valueAccessor,n=t===void 0?Dit:t,r=yL(e,Cit),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,c=yL(r,Tit);return!i||!i.length?null:Z.createElement(He,{className:"recharts-label-list"},i.map(function(h,d){var p=ce(a)?n(h,d):Rr(h&&h.payload,a),g=ce(o)?{}:{id:"".concat(o,"-").concat(d)};return Z.createElement(br,zy({},re(h,!0),c,g,{parentViewBox:h.parentViewBox,value:p,textBreakAll:l,viewBox:br.parseViewBox(ce(s)?h:gL(gL({},h),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}ps.displayName="LabelList";function Mit(e,t){return e?e===!0?Z.createElement(ps,{key:"labelList-implicit",data:t}):Z.isValidElement(e)||te(e)?Z.createElement(ps,{key:"labelList-implicit",data:t,content:e}):Zc(e)?Z.createElement(ps,zy({data:t},e,{key:"labelList-implicit"})):null:null}function Pit(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=Mi(r,ps).map(function(s,o){return Tt.cloneElement(s,{data:t,key:"labelList-".concat(o)})});if(!n)return i;var a=Mit(e.label,t);return[a].concat($it(i))}ps.renderCallByParent=Pit;function vd(e){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(e)}function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u2.apply(this,arguments)}function vL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vL(Object(n),!0).forEach(function(r){Fit(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fit(e,t,n){return t=Lit(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lit(e){var t=Bit(e,"string");return vd(t)=="symbol"?t:t+""}function Bit(e,t){if(vd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zit=function(t,n){var r=na(n-t),i=Math.min(Math.abs(n-t),359.999);return r*i},Fg=function(t){var n=t.cx,r=t.cy,i=t.radius,a=t.angle,s=t.sign,o=t.isExternal,l=t.cornerRadius,c=t.cornerIsExternal,h=l*(o?1:-1)+i,d=Math.asin(l/h)/By,p=c?a:a+s*d,g=ar(n,r,h,p),v=ar(n,r,i,p),x=c?a-s*d:a,b=ar(n,r,h*Math.cos(d*By),x);return{center:g,circleTangency:v,lineTangency:b,theta:d}},eV=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.startAngle,o=t.endAngle,l=zit(s,o),c=s+l,h=ar(n,r,a,s),d=ar(n,r,a,c),p="M ".concat(h.x,",").concat(h.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var g=ar(n,r,i,s),v=ar(n,r,i,c);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},jit=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,h=t.endAngle,d=na(h-c),p=Fg({cx:n,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),g=p.circleTangency,v=p.lineTangency,x=p.theta,b=Fg({cx:n,cy:r,radius:a,angle:h,sign:-d,cornerRadius:s,cornerIsExternal:l}),w=b.circleTangency,S=b.lineTangency,T=b.theta,$=l?Math.abs(c-h):Math.abs(c-h)-x-T;if($<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):eV({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:h});var A="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,").concat(+($>180),",").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
  `);if(i>0){var I=Fg({cx:n,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),O=I.circleTangency,N=I.lineTangency,_=I.theta,R=Fg({cx:n,cy:r,radius:i,angle:h,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),E=R.circleTangency,F=R.lineTangency,M=R.theta,B=l?Math.abs(c-h):Math.abs(c-h)-_-M;if(B<0&&s===0)return"".concat(A,"L").concat(n,",").concat(r,"Z");A+="L".concat(F.x,",").concat(F.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else A+="L".concat(n,",").concat(r,"Z");return A},Uit={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nV=function(t){var n=bL(bL({},Uit),t),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,h=n.startAngle,d=n.endAngle,p=n.className;if(s<a||h===d)return null;var g=ve("recharts-sector",p),v=s-a,x=Sl(o,v,0,!0),b;return x>0&&Math.abs(h-d)<360?b=jit({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(x,v/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:h,endAngle:d}):b=eV({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:h,endAngle:d}),Z.createElement("path",u2({},re(n,!0),{className:g,d:b,role:"img"}))};function bd(e){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bd(e)}function c2(){return c2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c2.apply(this,arguments)}function xL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xL(Object(n),!0).forEach(function(r){Vit(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vit(e,t,n){return t=Wit(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wit(e){var t=Git(e,"string");return bd(t)=="symbol"?t:t+""}function Git(e,t){if(bd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SL={curveBasisClosed:uY,curveBasisOpen:cY,curveBasis:lY,curveBumpX:X9,curveBumpY:K9,curveLinearClosed:fY,curveLinear:Vv,curveMonotoneX:hY,curveMonotoneY:dY,curveNatural:pY,curveStep:mY,curveStepAfter:yY,curveStepBefore:gY},Lg=function(t){return t.x===+t.x&&t.y===+t.y},Ih=function(t){return t.x},Eh=function(t){return t.y},qit=function(t,n){if(te(t))return t;var r="curve".concat(jv(t));return(r==="curveMonotone"||r==="curveBump")&&n?SL["".concat(r).concat(n==="vertical"?"Y":"X")]:SL[r]||Vv},Hit=function(t){var n=t.type,r=n===void 0?"linear":n,i=t.points,a=i===void 0?[]:i,s=t.baseLine,o=t.layout,l=t.connectNulls,c=l===void 0?!1:l,h=qit(r,o),d=c?a.filter(function(x){return Lg(x)}):a,p;if(Array.isArray(s)){var g=c?s.filter(function(x){return Lg(x)}):s,v=d.map(function(x,b){return wL(wL({},x),{},{base:g[b]})});return o==="vertical"?p=Eg().y(Eh).x1(Ih).x0(function(x){return x.base.x}):p=Eg().x(Ih).y1(Eh).y0(function(x){return x.base.y}),p.defined(Lg).curve(h),p(v)}return o==="vertical"&&Et(s)?p=Eg().y(Eh).x1(Ih).x0(s):Et(s)?p=Eg().x(Ih).y1(Eh).y0(s):p=sj().x(Ih).y(Eh),p.defined(Lg).curve(h),p(d)},ic=function(t){var n=t.className,r=t.points,i=t.path,a=t.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?Hit(t):i;return Z.createElement("path",c2({},re(t,!1),fy(t),{className:ve("recharts-curve",n),d:s,ref:a}))},_T={exports:{}},RT,CL;function Xit(){if(CL)return RT;CL=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return RT=e,RT}var DT,TL;function Kit(){if(TL)return DT;TL=1;var e=Xit();function t(){}function n(){}return n.resetWarningCache=t,DT=function(){function r(s,o,l,c,h,d){if(d!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},DT}var $L;function Yit(){return $L||($L=1,_T.exports=Kit()()),_T.exports}var Zit=Yit();const ke=Le(Zit);var Qit=Object.getOwnPropertyNames,Jit=Object.getOwnPropertySymbols,tat=Object.prototype.hasOwnProperty;function AL(e,t){return function(r,i,a){return e(r,i,a)&&t(r,i,a)}}function Bg(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var a=i.cache,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);var l=e(n,r,i);return a.delete(n),a.delete(r),l}}function kL(e){return Qit(e).concat(Jit(e))}var eat=Object.hasOwn||function(e,t){return tat.call(e,t)};function Wl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var nat="__v",rat="__o",iat="_owner",IL=Object.getOwnPropertyDescriptor,EL=Object.keys;function aat(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function sat(e,t){return Wl(e.getTime(),t.getTime())}function oat(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function lat(e,t){return e===t}function OL(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),a=e.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var c=t.entries(),h=!1,d=0;(o=c.next())&&!o.done;){if(i[d]){d++;continue}var p=s.value,g=o.value;if(n.equals(p[0],g[0],l,d,e,t,n)&&n.equals(p[1],g[1],p[0],g[0],e,t,n)){h=i[d]=!0;break}d++}if(!h)return!1;l++}return!0}var uat=Wl;function cat(e,t,n){var r=EL(e),i=r.length;if(EL(t).length!==i)return!1;for(;i-- >0;)if(!rV(e,t,n,r[i]))return!1;return!0}function Oh(e,t,n){var r=kL(e),i=r.length;if(kL(t).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!rV(e,t,n,a)||(s=IL(e,a),o=IL(t,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function fat(e,t){return Wl(e.valueOf(),t.valueOf())}function hat(e,t){return e.source===t.source&&e.flags===t.flags}function NL(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),a=e.values(),s,o;(s=a.next())&&!s.done;){for(var l=t.values(),c=!1,h=0;(o=l.next())&&!o.done;){if(!i[h]&&n.equals(s.value,o.value,s.value,o.value,e,t,n)){c=i[h]=!0;break}h++}if(!c)return!1}return!0}function dat(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function pat(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function rV(e,t,n,r){return(r===iat||r===rat||r===nat)&&(e.$$typeof||t.$$typeof)?!0:eat(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var mat="[object Arguments]",gat="[object Boolean]",yat="[object Date]",vat="[object Error]",bat="[object Map]",xat="[object Number]",wat="[object Object]",Sat="[object RegExp]",Cat="[object Set]",Tat="[object String]",$at="[object URL]",Aat=Array.isArray,_L=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,RL=Object.assign,kat=Object.prototype.toString.call.bind(Object.prototype.toString);function Iat(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,s=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,h=e.areSetsEqual,d=e.areTypedArraysEqual,p=e.areUrlsEqual;return function(v,x,b){if(v===x)return!0;if(v==null||x==null)return!1;var w=typeof v;if(w!==typeof x)return!1;if(w!=="object")return w==="number"?s(v,x,b):w==="function"?i(v,x,b):!1;var S=v.constructor;if(S!==x.constructor)return!1;if(S===Object)return o(v,x,b);if(Aat(v))return t(v,x,b);if(_L!=null&&_L(v))return d(v,x,b);if(S===Date)return n(v,x,b);if(S===RegExp)return c(v,x,b);if(S===Map)return a(v,x,b);if(S===Set)return h(v,x,b);var T=kat(v);return T===yat?n(v,x,b):T===Sat?c(v,x,b):T===bat?a(v,x,b):T===Cat?h(v,x,b):T===wat?typeof v.then!="function"&&typeof x.then!="function"&&o(v,x,b):T===$at?p(v,x,b):T===vat?r(v,x,b):T===mat?o(v,x,b):T===gat||T===xat||T===Tat?l(v,x,b):!1}}function Eat(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?Oh:aat,areDatesEqual:sat,areErrorsEqual:oat,areFunctionsEqual:lat,areMapsEqual:r?AL(OL,Oh):OL,areNumbersEqual:uat,areObjectsEqual:r?Oh:cat,arePrimitiveWrappersEqual:fat,areRegExpsEqual:hat,areSetsEqual:r?AL(NL,Oh):NL,areTypedArraysEqual:r?Oh:dat,areUrlsEqual:pat};if(n&&(i=RL({},i,n(i))),t){var a=Bg(i.areArraysEqual),s=Bg(i.areMapsEqual),o=Bg(i.areObjectsEqual),l=Bg(i.areSetsEqual);i=RL({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}function Oat(e){return function(t,n,r,i,a,s,o){return e(t,n,o)}}function Nat(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,a=e.strict;if(r)return function(l,c){var h=r(),d=h.cache,p=d===void 0?t?new WeakMap:void 0:d,g=h.meta;return n(l,c,{cache:p,equals:i,meta:g,strict:a})};if(t)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,c){return n(l,c,s)}}var _at=$o();$o({strict:!0});$o({circular:!0});$o({circular:!0,strict:!0});$o({createInternalComparator:function(){return Wl}});$o({strict:!0,createInternalComparator:function(){return Wl}});$o({circular:!0,createInternalComparator:function(){return Wl}});$o({circular:!0,createInternalComparator:function(){return Wl},strict:!0});function $o(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,a=e.strict,s=a===void 0?!1:a,o=Eat(e),l=Iat(o),c=r?r(l):Oat(l);return Nat({circular:n,comparator:l,createState:i,equals:c,strict:s})}function Rat(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function DL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>t?(e(a),n=-1):Rat(i)};requestAnimationFrame(r)}function f2(e){"@babel/helpers - typeof";return f2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f2(e)}function Dat(e){return Lat(e)||Fat(e)||Pat(e)||Mat()}function Mat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pat(e,t){if(e){if(typeof e=="string")return ML(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ML(e,t)}}function ML(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lat(e){if(Array.isArray(e))return e}function Bat(){var e={},t=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=Dat(s),l=o[0],c=o.slice(1);if(typeof l=="number"){DL(i.bind(null,c),l);return}i(l),DL(i.bind(null,c));return}f2(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function xd(e){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xd(e)}function PL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function FL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PL(Object(n),!0).forEach(function(r){iV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iV(e,t,n){return t=zat(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zat(e){var t=jat(e,"string");return xd(t)==="symbol"?t:String(t)}function jat(e,t){if(xd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uat=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},Vat=function(t){return t},Wat=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Xh=function(t,n){return Object.keys(n).reduce(function(r,i){return FL(FL({},r),{},iV({},i,t(i,n[i])))},{})},LL=function(t,n,r){return t.map(function(i){return"".concat(Wat(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Gat(e,t){return Xat(e)||Hat(e,t)||aV(e,t)||qat()}function qat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hat(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Xat(e){if(Array.isArray(e))return e}function Kat(e){return Qat(e)||Zat(e)||aV(e)||Yat()}function Yat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aV(e,t){if(e){if(typeof e=="string")return h2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h2(e,t)}}function Zat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qat(e){if(Array.isArray(e))return h2(e)}function h2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jy=1e-4,sV=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},oV=function(t,n){return t.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},BL=function(t,n){return function(r){var i=sV(t,n);return oV(i,r)}},Jat=function(t,n){return function(r){var i=sV(t,n),a=[].concat(Kat(i.map(function(s,o){return s*o}).slice(1)),[0]);return oV(a,r)}},zL=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),h=Gat(c,4);i=h[0],a=h[1],s=h[2],o=h[3]}}}var d=BL(i,s),p=BL(a,o),g=Jat(i,s),v=function(w){return w>1?1:w<0?0:w},x=function(w){for(var S=w>1?1:w,T=S,$=0;$<8;++$){var A=d(T)-S,I=g(T);if(Math.abs(A-S)<jy||I<jy)return p(T);T=v(T-A/I)}return p(T)};return x.isStepper=!1,x},tst=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,i=t.damping,a=i===void 0?8:i,s=t.dt,o=s===void 0?17:s,l=function(h,d,p){var g=-(h-d)*r,v=p*a,x=p+(g-v)*o/1e3,b=p*o/1e3+h;return Math.abs(b-d)<jy&&Math.abs(x)<jy?[d,0]:[b,x]};return l.isStepper=!0,l.dt=o,l},est=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return zL(i);case"spring":return tst();default:if(i.split("(")[0]==="cubic-bezier")return zL(i)}return typeof i=="function"?i:null};function wd(e){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(e)}function jL(e){return ist(e)||rst(e)||lV(e)||nst()}function nst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rst(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ist(e){if(Array.isArray(e))return p2(e)}function UL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UL(Object(n),!0).forEach(function(r){d2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d2(e,t,n){return t=ast(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ast(e){var t=sst(e,"string");return wd(t)==="symbol"?t:String(t)}function sst(e,t){if(wd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ost(e,t){return cst(e)||ust(e,t)||lV(e,t)||lst()}function lst(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lV(e,t){if(e){if(typeof e=="string")return p2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p2(e,t)}}function p2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ust(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function cst(e){if(Array.isArray(e))return e}var Uy=function(t,n,r){return t+(n-t)*r},m2=function(t){var n=t.from,r=t.to;return n!==r},fst=function e(t,n,r){var i=Xh(function(a,s){if(m2(s)){var o=t(s.from,s.to,s.velocity),l=ost(o,2),c=l[0],h=l[1];return rr(rr({},s),{},{from:c,velocity:h})}return s},n);return r<1?Xh(function(a,s){return m2(s)?rr(rr({},s),{},{velocity:Uy(s.velocity,i[a].velocity,r),from:Uy(s.from,i[a].from,r)}):s},n):e(t,i,r-1)};const hst=function(e,t,n,r,i){var a=Uat(e,t),s=a.reduce(function(b,w){return rr(rr({},b),{},d2({},w,[e[w],t[w]]))},{}),o=a.reduce(function(b,w){return rr(rr({},b),{},d2({},w,{from:e[w],velocity:0,to:t[w]}))},{}),l=-1,c,h,d=function(){return null},p=function(){return Xh(function(w,S){return S.from},o)},g=function(){return!Object.values(o).filter(m2).length},v=function(w){c||(c=w);var S=w-c,T=S/n.dt;o=fst(n,o,T),i(rr(rr(rr({},e),t),p())),c=w,g()||(l=requestAnimationFrame(d))},x=function(w){h||(h=w);var S=(w-h)/r,T=Xh(function(A,I){return Uy.apply(void 0,jL(I).concat([n(S)]))},s);if(i(rr(rr(rr({},e),t),T)),S<1)l=requestAnimationFrame(d);else{var $=Xh(function(A,I){return Uy.apply(void 0,jL(I).concat([n(1)]))},s);i(rr(rr(rr({},e),t),$))}};return d=n.isStepper?v:x,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function wc(e){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wc(e)}var dst=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function pst(e,t){if(e==null)return{};var n=mst(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mst(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function MT(e){return bst(e)||vst(e)||yst(e)||gst()}function gst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yst(e,t){if(e){if(typeof e=="string")return g2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g2(e,t)}}function vst(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bst(e){if(Array.isArray(e))return g2(e)}function g2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VL(Object(n),!0).forEach(function(r){Lh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lh(e,t,n){return t=uV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xst(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wst(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uV(r.key),r)}}function Sst(e,t,n){return t&&wst(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uV(e){var t=Cst(e,"string");return wc(t)==="symbol"?t:String(t)}function Cst(e,t){if(wc(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tst(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y2(e,t)}function y2(e,t){return y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},y2(e,t)}function $st(e){var t=Ast();return function(){var r=Vy(e),i;if(t){var a=Vy(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return v2(this,i)}}function v2(e,t){if(t&&(wc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b2(e)}function b2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ast(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vy(e){return Vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vy(e)}var Ra=function(e){Tst(n,e);var t=$st(n);function n(r,i){var a;xst(this,n),a=t.call(this,r,i);var s=a.props,o=s.isActive,l=s.attributeName,c=s.from,h=s.to,d=s.steps,p=s.children,g=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(b2(a)),a.changeStyle=a.changeStyle.bind(b2(a)),!o||g<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:h}),v2(a);if(d&&d.length)a.state={style:d[0].style};else if(c){if(typeof p=="function")return a.state={style:c},v2(a);a.state={style:l?Lh({},l,c):c}}else a.state={style:{}};return a}return Sst(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,h=a.to,d=a.from,p=this.state.style;if(o){if(!s){var g={style:l?Lh({},l,h):h};this.state&&p&&(l&&p[l]!==h||!l&&p!==h)&&this.setState(g);return}if(!(_at(i.to,h)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=v||c?d:i.to;if(this.state&&p){var b={style:l?Lh({},l,x):x};(l&&p[l]!==x||!l&&p!==x)&&this.setState(b)}this.runAnimation(Hi(Hi({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,c=i.easing,h=i.begin,d=i.onAnimationEnd,p=i.onAnimationStart,g=hst(s,o,est(c),l,this.changeStyle),v=function(){a.stopJSAnimation=g()};this.manager.start([p,h,v,l,d])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,c=s[0],h=c.style,d=c.duration,p=d===void 0?0:d,g=function(x,b,w){if(w===0)return x;var S=b.duration,T=b.easing,$=T===void 0?"ease":T,A=b.style,I=b.properties,O=b.onAnimationEnd,N=w>0?s[w-1]:b,_=I||Object.keys(A);if(typeof $=="function"||$==="spring")return[].concat(MT(x),[a.runJSAnimation.bind(a,{from:N.style,to:A,duration:S,easing:$}),S]);var R=LL(_,S,$),E=Hi(Hi(Hi({},N.style),A),{},{transition:R});return[].concat(MT(x),[E,S,O]).filter(Vat)};return this.manager.start([l].concat(MT(s.reduce(g,[h,Math.max(p,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Bat());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,c=i.easing,h=i.onAnimationStart,d=i.onAnimationEnd,p=i.steps,g=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof c=="function"||typeof g=="function"||c==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var x=o?Lh({},o,l):l,b=LL(Object.keys(x),s,c);v.start([h,a,Hi(Hi({},x),{},{transition:b}),s,d])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=pst(i,dst),c=Tt.Children.count(a),h=this.state.style;if(typeof a=="function")return a(h);if(!o||c===0||s<=0)return a;var d=function(g){var v=g.props,x=v.style,b=x===void 0?{}:x,w=v.className,S=Tt.cloneElement(g,Hi(Hi({},l),{},{style:Hi(Hi({},b),h),className:w}));return S};return c===1?d(Tt.Children.only(a)):Z.createElement("div",null,Tt.Children.map(a,function(p){return d(p)}))}}]),n}(Tt.PureComponent);Ra.displayName="Animate";Ra.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ra.propTypes={from:ke.oneOfType([ke.object,ke.string]),to:ke.oneOfType([ke.object,ke.string]),attributeName:ke.string,duration:ke.number,begin:ke.number,easing:ke.oneOfType([ke.string,ke.func]),steps:ke.arrayOf(ke.shape({duration:ke.number.isRequired,style:ke.object.isRequired,easing:ke.oneOfType([ke.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ke.func]),properties:ke.arrayOf("string"),onAnimationEnd:ke.func})),children:ke.oneOfType([ke.node,ke.func]),isActive:ke.bool,canBegin:ke.bool,onAnimationEnd:ke.func,shouldReAnimate:ke.bool,onAnimationStart:ke.func,onAnimationReStart:ke.func};function Sd(e){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sd(e)}function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wy.apply(this,arguments)}function kst(e,t){return Nst(e)||Ost(e,t)||Est(e,t)||Ist()}function Ist(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Est(e,t){if(e){if(typeof e=="string")return WL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WL(e,t)}}function WL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ost(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Nst(e){if(Array.isArray(e))return e}function GL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GL(Object(n),!0).forEach(function(r){_st(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _st(e,t,n){return t=Rst(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rst(e){var t=Dst(e,"string");return Sd(t)=="symbol"?t:t+""}function Dst(e,t){if(Sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HL=function(t,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,h;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],p=0,g=4;p<g;p++)d[p]=a[p]>s?s:a[p];h="M".concat(t,",").concat(n+o*d[0]),d[0]>0&&(h+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(t+l*d[0],",").concat(n)),h+="L ".concat(t+r-l*d[1],",").concat(n),d[1]>0&&(h+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(t+r,",").concat(n+o*d[1])),h+="L ".concat(t+r,",").concat(n+i-o*d[2]),d[2]>0&&(h+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(t+r-l*d[2],",").concat(n+i)),h+="L ".concat(t+l*d[3],",").concat(n+i),d[3]>0&&(h+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(n+i-o*d[3])),h+="Z"}else if(s>0&&a===+a&&a>0){var v=Math.min(s,a);h="M ".concat(t,",").concat(n+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t+l*v,",").concat(n,`
            L `).concat(t+r-l*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t+r,",").concat(n+o*v,`
            L `).concat(t+r,",").concat(n+i-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t+r-l*v,",").concat(n+i,`
            L `).concat(t+l*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(c,",").concat(t,",").concat(n+i-o*v," Z")}else h="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return h},Mst=function(t,n){if(!t||!n)return!1;var r=t.x,i=t.y,a=n.x,s=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(a,a+o),h=Math.max(a,a+o),d=Math.min(s,s+l),p=Math.max(s,s+l);return r>=c&&r<=h&&i>=d&&i<=p}return!1},Pst={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Sk=function(t){var n=qL(qL({},Pst),t),r=Tt.useRef(),i=Tt.useState(-1),a=kst(i,2),s=a[0],o=a[1];Tt.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var $=r.current.getTotalLength();$&&o($)}catch{}},[]);var l=n.x,c=n.y,h=n.width,d=n.height,p=n.radius,g=n.className,v=n.animationEasing,x=n.animationDuration,b=n.animationBegin,w=n.isAnimationActive,S=n.isUpdateAnimationActive;if(l!==+l||c!==+c||h!==+h||d!==+d||h===0||d===0)return null;var T=ve("recharts-rectangle",g);return S?Z.createElement(Ra,{canBegin:s>0,from:{width:h,height:d,x:l,y:c},to:{width:h,height:d,x:l,y:c},duration:x,animationEasing:v,isActive:S},function($){var A=$.width,I=$.height,O=$.x,N=$.y;return Z.createElement(Ra,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,isActive:w,easing:v},Z.createElement("path",Wy({},re(n,!0),{className:T,d:HL(O,N,A,I,p),ref:r})))}):Z.createElement("path",Wy({},re(n,!0),{className:T,d:HL(l,c,h,d,p)}))};function x2(){return x2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x2.apply(this,arguments)}var rb=function(t){var n=t.cx,r=t.cy,i=t.r,a=t.className,s=ve("recharts-dot",a);return n===+n&&r===+r&&i===+i?Z.createElement("circle",x2({},re(t,!1),fy(t),{className:s,cx:n,cy:r,r:i})):null};function Cd(e){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(e)}var Fst=["x","y","top","left","width","height","className"];function w2(){return w2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w2.apply(this,arguments)}function XL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Lst(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XL(Object(n),!0).forEach(function(r){Bst(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bst(e,t,n){return t=zst(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zst(e){var t=jst(e,"string");return Cd(t)=="symbol"?t:t+""}function jst(e,t){if(Cd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ust(e,t){if(e==null)return{};var n=Vst(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Vst(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Wst=function(t,n,r,i,a,s){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},Gst=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,s=t.top,o=s===void 0?0:s,l=t.left,c=l===void 0?0:l,h=t.width,d=h===void 0?0:h,p=t.height,g=p===void 0?0:p,v=t.className,x=Ust(t,Fst),b=Lst({x:r,y:a,top:o,left:c,width:d,height:g},x);return!Et(r)||!Et(a)||!Et(d)||!Et(g)||!Et(o)||!Et(c)?null:Z.createElement("path",w2({},re(b,!0),{className:ve("recharts-cross",v),d:Wst(r,a,d,g,o,c)}))},PT,KL;function qst(){if(KL)return PT;KL=1;var e=Ej(),t=e(Object.getPrototypeOf,Object);return PT=t,PT}var FT,YL;function Hst(){if(YL)return FT;YL=1;var e=Cs(),t=qst(),n=Ts(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function c(h){if(!n(h)||e(h)!=r)return!1;var d=t(h);if(d===null)return!0;var p=o.call(d,"constructor")&&d.constructor;return typeof p=="function"&&p instanceof p&&s.call(p)==l}return FT=c,FT}var Xst=Hst();const Kst=Le(Xst);var LT,ZL;function Yst(){if(ZL)return LT;ZL=1;var e=Cs(),t=Ts(),n="[object Boolean]";function r(i){return i===!0||i===!1||t(i)&&e(i)==n}return LT=r,LT}var Zst=Yst();const Qst=Le(Zst);function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gy.apply(this,arguments)}function Jst(e,t){return rot(e)||not(e,t)||eot(e,t)||tot()}function tot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eot(e,t){if(e){if(typeof e=="string")return QL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QL(e,t)}}function QL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function not(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function rot(e){if(Array.isArray(e))return e}function JL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JL(Object(n),!0).forEach(function(r){iot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iot(e,t,n){return t=aot(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aot(e){var t=sot(e,"string");return Td(t)=="symbol"?t:t+""}function sot(e,t){if(Td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eB=function(t,n,r,i,a){var s=r-i,o;return o="M ".concat(t,",").concat(n),o+="L ".concat(t+r,",").concat(n),o+="L ".concat(t+r-s/2,",").concat(n+a),o+="L ".concat(t+r-s/2-i,",").concat(n+a),o+="L ".concat(t,",").concat(n," Z"),o},oot={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lot=function(t){var n=tB(tB({},oot),t),r=Tt.useRef(),i=Tt.useState(-1),a=Jst(i,2),s=a[0],o=a[1];Tt.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&o(T)}catch{}},[]);var l=n.x,c=n.y,h=n.upperWidth,d=n.lowerWidth,p=n.height,g=n.className,v=n.animationEasing,x=n.animationDuration,b=n.animationBegin,w=n.isUpdateAnimationActive;if(l!==+l||c!==+c||h!==+h||d!==+d||p!==+p||h===0&&d===0||p===0)return null;var S=ve("recharts-trapezoid",g);return w?Z.createElement(Ra,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:c},to:{upperWidth:h,lowerWidth:d,height:p,x:l,y:c},duration:x,animationEasing:v,isActive:w},function(T){var $=T.upperWidth,A=T.lowerWidth,I=T.height,O=T.x,N=T.y;return Z.createElement(Ra,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,easing:v},Z.createElement("path",Gy({},re(n,!0),{className:S,d:eB(O,N,$,A,I),ref:r})))}):Z.createElement("g",null,Z.createElement("path",Gy({},re(n,!0),{className:S,d:eB(l,c,h,d,p)})))},uot=["option","shapeType","propTransformer","activeClassName","isActive"];function $d(e){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(e)}function cot(e,t){if(e==null)return{};var n=fot(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fot(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function nB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nB(Object(n),!0).forEach(function(r){hot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hot(e,t,n){return t=dot(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dot(e){var t=pot(e,"string");return $d(t)=="symbol"?t:t+""}function pot(e,t){if($d(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mot(e,t){return qy(qy({},t),e)}function got(e,t){return e==="symbols"}function rB(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Z.createElement(Sk,n);case"trapezoid":return Z.createElement(lot,n);case"sector":return Z.createElement(nV,n);case"symbols":if(got(t))return Z.createElement(jA,n);break;default:return null}}function yot(e){return Tt.isValidElement(e)?e.props:e}function vot(e){var t=e.option,n=e.shapeType,r=e.propTransformer,i=r===void 0?mot:r,a=e.activeClassName,s=a===void 0?"recharts-active-shape":a,o=e.isActive,l=cot(e,uot),c;if(Tt.isValidElement(t))c=Tt.cloneElement(t,qy(qy({},l),yot(t)));else if(te(t))c=t(l);else if(Kst(t)&&!Qst(t)){var h=i(t,l);c=Z.createElement(rB,{shapeType:n,elementProps:h})}else{var d=l;c=Z.createElement(rB,{shapeType:n,elementProps:d})}return o?Z.createElement(He,{className:s},c):c}function ib(e,t){return t!=null&&"trapezoids"in e.props}function ab(e,t){return t!=null&&"sectors"in e.props}function Ad(e,t){return t!=null&&"points"in e.props}function bot(e,t){var n,r,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return i&&a}function xot(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function wot(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function Sot(e,t){var n;return ib(e,t)?n=bot:ab(e,t)?n=xot:Ad(e,t)&&(n=wot),n}function Cot(e,t){var n;return ib(e,t)?n="trapezoids":ab(e,t)?n="sectors":Ad(e,t)&&(n="points"),n}function Tot(e,t){if(ib(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(ab(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Ad(e,t)?t.payload:{}}function $ot(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=Cot(n,t),a=Tot(n,t),s=r.filter(function(l,c){var h=bc(a,l),d=n.props[i].filter(function(v){var x=Sot(n,t);return x(v,t)}),p=n.props[i].indexOf(d[d.length-1]),g=c===p;return h&&g}),o=r.indexOf(s[s.length-1]);return o}var BT,iB;function Aot(){if(iB)return BT;iB=1;var e=Math.ceil,t=Math.max;function n(r,i,a,s){for(var o=-1,l=t(e((i-r)/(a||1)),0),c=Array(l);l--;)c[s?l:++o]=r,r+=a;return c}return BT=n,BT}var zT,aB;function cV(){if(aB)return zT;aB=1;var e=Gj(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-1/0){var a=i<0?-1:1;return a*n}return i===i?i:0}return zT=r,zT}var jT,sB;function kot(){if(sB)return jT;sB=1;var e=Aot(),t=Hv(),n=cV();function r(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),e(a,s,o,i)}}return jT=r,jT}var UT,oB;function Iot(){if(oB)return UT;oB=1;var e=kot(),t=e();return UT=t,UT}var Eot=Iot();const Hy=Le(Eot);function kd(e){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kd(e)}function lB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lB(Object(n),!0).forEach(function(r){fV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fV(e,t,n){return t=Oot(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oot(e){var t=Not(e,"string");return kd(t)=="symbol"?t:t+""}function Not(e,t){if(kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _ot=["Webkit","Moz","O","ms"],Rot=function(t,n){var r=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=_ot.reduce(function(a,s){return uB(uB({},a),{},fV({},s+r,n))},{});return i[t]=n,i};function Sc(e){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sc(e)}function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(this,arguments)}function cB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function VT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cB(Object(n),!0).forEach(function(r){oi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dV(r.key),r)}}function Mot(e,t,n){return t&&fB(e.prototype,t),n&&fB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pot(e,t,n){return t=Ky(t),Fot(e,hV()?Reflect.construct(t,n||[],Ky(e).constructor):t.apply(e,n))}function Fot(e,t){if(t&&(Sc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lot(e)}function Lot(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hV=function(){return!!e})()}function Ky(e){return Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ky(e)}function Bot(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S2(e,t)}function S2(e,t){return S2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S2(e,t)}function oi(e,t,n){return t=dV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dV(e){var t=zot(e,"string");return Sc(t)=="symbol"?t:t+""}function zot(e,t){if(Sc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jot=function(t){var n=t.data,r=t.startIndex,i=t.endIndex,a=t.x,s=t.width,o=t.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=qh().domain(Hy(0,l)).range([a,a+s-o]),h=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:h}},hB=function(t){return t.changedTouches&&!!t.changedTouches.length},Cc=function(e){function t(n){var r;return Dot(this,t),r=Pot(this,t,[n]),oi(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),oi(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),oi(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),oi(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),oi(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),oi(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),oi(r,"handleSlideDragStart",function(i){var a=hB(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Bot(t,e),Mot(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,h=c.length-1,d=Math.min(i,a),p=Math.max(i,a),g=t.getIndexInRange(s,d),v=t.getIndexInRange(s,p);return{startIndex:g-g%l,endIndex:v===h?h:v-v%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=Rr(a[r],o,r);return te(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,c=l.x,h=l.width,d=l.travellerWidth,p=l.startIndex,g=l.endIndex,v=l.onChange,x=r.pageX-a;x>0?x=Math.min(x,c+h-d-o,c+h-d-s):x<0&&(x=Math.max(x,c-s,c-o));var b=this.getIndex({startX:s+x,endX:o+x});(b.startIndex!==p||b.endIndex!==g)&&v&&v(b),this.setState({startX:s+x,endX:o+x,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=hB(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[s],h=this.props,d=h.x,p=h.width,g=h.travellerWidth,v=h.onChange,x=h.gap,b=h.data,w={startX:this.state.startX,endX:this.state.endX},S=r.pageX-a;S>0?S=Math.min(S,d+p-g-c):S<0&&(S=Math.max(S,d-c)),w[s]=c+S;var T=this.getIndex(w),$=T.startIndex,A=T.endIndex,I=function(){var N=b.length-1;return s==="startX"&&(o>l?$%x===0:A%x===0)||o<l&&A===N||s==="endX"&&(o>l?A%x===0:$%x===0)||o>l&&A===N};this.setState(oi(oi({},s,c+S),"brushMoveStartX",r.pageX),function(){v&&I()&&v(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,c=s.endX,h=this.state[i],d=o.indexOf(h);if(d!==-1){var p=d+r;if(!(p===-1||p>=o.length)){var g=o[p];i==="startX"&&g>=c||i==="endX"&&g<=l||this.setState(oi({},i,g),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.fill,c=r.stroke;return Z.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.data,c=r.children,h=r.padding,d=Tt.Children.only(c);return d?Z.cloneElement(d,{x:i,y:a,width:s,height:o,margin:h,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,l=this.props,c=l.y,h=l.travellerWidth,d=l.height,p=l.traveller,g=l.ariaLabel,v=l.data,x=l.startIndex,b=l.endIndex,w=Math.max(r,this.props.x),S=VT(VT({},re(this.props,!1)),{},{x:w,y:c,width:h,height:d}),T=g||"Min value: ".concat((a=v[x])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=v[b])===null||s===void 0?void 0:s.name);return Z.createElement(He,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),o.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,S))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,c=a.travellerWidth,h=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return Z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:h,y:s,width:d,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,l=r.travellerWidth,c=r.stroke,h=this.state,d=h.startX,p=h.endX,g=5,v={pointerEvents:"none",fill:c};return Z.createElement(He,{className:"recharts-brush-texts"},Z.createElement(Cy,Xy({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,p)-g,y:s+o/2},v),this.getTextOfTick(i)),Z.createElement(Cy,Xy({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,p)+l+g,y:s+o/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,l=r.y,c=r.width,h=r.height,d=r.alwaysShowText,p=this.state,g=p.startX,v=p.endX,x=p.isTextActive,b=p.isSlideMoving,w=p.isTravellerMoving,S=p.isTravellerFocused;if(!i||!i.length||!Et(o)||!Et(l)||!Et(c)||!Et(h)||c<=0||h<=0)return null;var T=ve("recharts-brush",a),$=Z.Children.count(s)===1,A=Rot("userSelect","none");return Z.createElement(He,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),$&&this.renderPanorama(),this.renderSlide(g,v),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(v,"endX"),(x||b||w||S||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,l=r.stroke,c=Math.floor(a+o/2)-1;return Z.createElement(Z.Fragment,null,Z.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),Z.createElement("line",{x1:i+1,y1:c,x2:i+s-1,y2:c,fill:"none",stroke:"#fff"}),Z.createElement("line",{x1:i+1,y1:c+2,x2:i+s-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return Z.isValidElement(r)?a=Z.cloneElement(r,i):te(r)?a=r(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,l=r.travellerWidth,c=r.updateId,h=r.startIndex,d=r.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return VT({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:s},a&&a.length?jot({data:a,width:s,x:o,travellerWidth:l,startIndex:h,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var p=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);r[l]>i?o=l:s=l}return i>=r[o]?o:s}}])}(Tt.PureComponent);oi(Cc,"displayName","Brush");oi(Cc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var WT,dB;function Uot(){if(dB)return WT;dB=1;var e=XA();function t(n,r){var i;return e(n,function(a,s,o){return i=r(a,s,o),!i}),!!i}return WT=t,WT}var GT,pB;function Vot(){if(pB)return GT;pB=1;var e=Sj(),t=So(),n=Uot(),r=Qr(),i=Hv();function a(s,o,l){var c=r(s)?e:n;return l&&i(s,o,l)&&(o=void 0),c(s,t(o,3))}return GT=a,GT}var Wot=Vot();const Got=Le(Wot);var Aa=function(t,n){var r=t.alwaysShow,i=t.ifOverflow;return r&&(i="extendDomain"),i===n},qT,mB;function qot(){if(mB)return qT;mB=1;var e=zj();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return qT=t,qT}var HT,gB;function Hot(){if(gB)return HT;gB=1;var e=qot(),t=Lj(),n=So();function r(i,a){var s={};return a=n(a,3),t(i,function(o,l,c){e(s,l,a(o,l,c))}),s}return HT=r,HT}var Xot=Hot();const Kot=Le(Xot);var XT,yB;function Yot(){if(yB)return XT;yB=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(!n(t[r],r,t))return!1;return!0}return XT=e,XT}var KT,vB;function Zot(){if(vB)return KT;vB=1;var e=XA();function t(n,r){var i=!0;return e(n,function(a,s,o){return i=!!r(a,s,o),i}),i}return KT=t,KT}var YT,bB;function Qot(){if(bB)return YT;bB=1;var e=Yot(),t=Zot(),n=So(),r=Qr(),i=Hv();function a(s,o,l){var c=r(s)?e:t;return l&&i(s,o,l)&&(o=void 0),c(s,n(o,3))}return YT=a,YT}var Jot=Qot();const pV=Le(Jot);var tlt=["x","y"];function Id(e){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Id(e)}function C2(){return C2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C2.apply(this,arguments)}function xB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xB(Object(n),!0).forEach(function(r){elt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function elt(e,t,n){return t=nlt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nlt(e){var t=rlt(e,"string");return Id(t)=="symbol"?t:t+""}function rlt(e,t){if(Id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ilt(e,t){if(e==null)return{};var n=alt(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function alt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function slt(e,t){var n=e.x,r=e.y,i=ilt(e,tlt),a="".concat(n),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),c="".concat(t.height||i.height),h=parseInt(c,10),d="".concat(t.width||i.width),p=parseInt(d,10);return Nh(Nh(Nh(Nh(Nh({},t),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:h,width:p,name:t.name,radius:t.radius})}function wB(e){return Z.createElement(vot,C2({shapeType:"rectangle",propTransformer:slt,activeClassName:"recharts-active-bar"},e))}var olt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof t=="number")return t;var a=typeof r=="number";return a?t(r,i):(a||Tl(),n)}},llt=["value","background"],mV;function Tc(e){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(e)}function ult(e,t){if(e==null)return{};var n=clt(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function clt(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yy.apply(this,arguments)}function SB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SB(Object(n),!0).forEach(function(r){io(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function flt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yV(r.key),r)}}function hlt(e,t,n){return t&&CB(e.prototype,t),n&&CB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dlt(e,t,n){return t=Zy(t),plt(e,gV()?Reflect.construct(t,n||[],Zy(e).constructor):t.apply(e,n))}function plt(e,t){if(t&&(Tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mlt(e)}function mlt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gV=function(){return!!e})()}function Zy(e){return Zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zy(e)}function glt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T2(e,t)}function T2(e,t){return T2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},T2(e,t)}function io(e,t,n){return t=yV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yV(e){var t=ylt(e,"string");return Tc(t)=="symbol"?t:t+""}function ylt(e,t){if(Tc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Qd=function(e){function t(){var n;flt(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=dlt(this,t,[].concat(i)),io(n,"state",{isAnimationFinished:!1}),io(n,"id",Jc("recharts-bar-")),io(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),io(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return glt(t,e),hlt(t,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,c=a.activeBar,h=re(this.props,!1);return r&&r.map(function(d,p){var g=p===l,v=g?c:s,x=Sn(Sn(Sn({},h),d),{},{isActive:g,option:v,index:p,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Z.createElement(He,Yy({className:"recharts-bar-rectangle"},hy(i.props,d,p),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(p)}),Z.createElement(wB,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,h=i.animationEasing,d=i.animationId,p=this.state.prevData;return Z.createElement(Ra,{begin:l,duration:c,isActive:o,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var v=g.t,x=a.map(function(b,w){var S=p&&p[w];if(S){var T=ir(S.x,b.x),$=ir(S.y,b.y),A=ir(S.width,b.width),I=ir(S.height,b.height);return Sn(Sn({},b),{},{x:T(v),y:$(v),width:A(v),height:I(v)})}if(s==="horizontal"){var O=ir(0,b.height),N=O(v);return Sn(Sn({},b),{},{y:b.y+b.height-N,height:N})}var _=ir(0,b.width),R=_(v);return Sn(Sn({},b),{},{width:R})});return Z.createElement(He,null,r.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!bc(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=re(this.props.background,!1);return a.map(function(c,h){c.value;var d=c.background,p=ult(c,llt);if(!d)return null;var g=Sn(Sn(Sn(Sn(Sn({},p),{},{fill:"#eee"},d),l),hy(r.props,c,h)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:h,className:"recharts-bar-background-rectangle"});return Z.createElement(wB,Yy({key:"background-bar-".concat(h),option:r.props.background,isActive:h===o},g))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,c=a.layout,h=a.children,d=Mi(h,Zd);if(!d)return null;var p=c==="vertical"?s[0].height/2:s[0].width/2,g=function(b,w){var S=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:S,errorVal:Rr(b,w)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Z.createElement(He,v,d.map(function(x){return Z.cloneElement(x,{key:"error-bar-".concat(i,"-").concat(x.props.dataKey),data:s,xAxis:o,yAxis:l,layout:c,offset:p,dataPointFormatter:g})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,l=r.yAxis,c=r.left,h=r.top,d=r.width,p=r.height,g=r.isAnimationActive,v=r.background,x=r.id;if(i||!a||!a.length)return null;var b=this.state.isAnimationFinished,w=ve("recharts-bar",s),S=o&&o.allowDataOverflow,T=l&&l.allowDataOverflow,$=S||T,A=ce(x)?this.id:x;return Z.createElement(He,{className:w},S||T?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(A)},Z.createElement("rect",{x:S?c:c-d/2,y:T?h:h-p/2,width:S?d:d*2,height:T?p:p*2}))):null,Z.createElement(He,{className:"recharts-bar-rectangles",clipPath:$?"url(#clipPath-".concat(A,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar($,A),(!g||b)&&ps.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(Tt.PureComponent);mV=Qd;io(Qd,"displayName","Bar");io(Qd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});io(Qd,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,a=e.xAxis,s=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,h=e.dataStartIndex,d=e.displayedData,p=e.offset,g=Prt(r,n);if(!g)return null;var v=t.layout,x=n.type.defaultProps,b=x!==void 0?Sn(Sn({},x),n.props):n.props,w=b.dataKey,S=b.children,T=b.minPointSize,$=v==="horizontal"?s:a,A=c?$.scale.domain():null,I=Wrt({numericAxis:$}),O=Mi(S,Hj),N=d.map(function(_,R){var E,F,M,B,j,P;c?E=Frt(c[h+R],A):(E=Rr(_,w),Array.isArray(E)||(E=[I,E]));var U=olt(T,mV.defaultProps.minPointSize)(E[1],R);if(v==="horizontal"){var W,q=[s.scale(E[0]),s.scale(E[1])],L=q[0],G=q[1];F=sL({axis:a,ticks:o,bandSize:i,offset:g.offset,entry:_,index:R}),M=(W=G??L)!==null&&W!==void 0?W:void 0,B=g.size;var H=L-G;if(j=Number.isNaN(H)?0:H,P={x:F,y:s.y,width:B,height:s.height},Math.abs(U)>0&&Math.abs(j)<Math.abs(U)){var Y=na(j||U)*(Math.abs(U)-Math.abs(j));M-=Y,j+=Y}}else{var ot=[a.scale(E[0]),a.scale(E[1])],ht=ot[0],yt=ot[1];if(F=ht,M=sL({axis:s,ticks:l,bandSize:i,offset:g.offset,entry:_,index:R}),B=yt-ht,j=g.size,P={x:a.x,y:M,width:a.width,height:j},Math.abs(U)>0&&Math.abs(B)<Math.abs(U)){var Nt=na(B||U)*(Math.abs(U)-Math.abs(B));B+=Nt}}return Sn(Sn(Sn({},_),{},{x:F,y:M,width:B,height:j,value:c?E:E[1],payload:_,background:P},O&&O[R]&&O[R].props),{},{tooltipPayload:[JU(n,_)],tooltipPosition:{x:F+B/2,y:M+j/2}})});return Sn({data:N,layout:v},p)});function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function vlt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vV(r.key),r)}}function blt(e,t,n){return t&&TB(e.prototype,t),n&&TB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$B(Object(n),!0).forEach(function(r){sb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$B(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sb(e,t,n){return t=vV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vV(e){var t=xlt(e,"string");return Ed(t)=="symbol"?t:t+""}function xlt(e,t){if(Ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bV=function(t,n,r,i,a){var s=t.width,o=t.height,l=t.layout,c=t.children,h=Object.keys(n),d={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!li(c,Qd);return h.reduce(function(g,v){var x=n[v],b=x.orientation,w=x.domain,S=x.padding,T=S===void 0?{}:S,$=x.mirror,A=x.reversed,I="".concat(b).concat($?"Mirror":""),O,N,_,R,E;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var F=w[1]-w[0],M=1/0,B=x.categoricalDomain.sort(b9);if(B.forEach(function(ot,ht){ht>0&&(M=Math.min((ot||0)-(B[ht-1]||0),M))}),Number.isFinite(M)){var j=M/F,P=x.layout==="vertical"?r.height:r.width;if(x.padding==="gap"&&(O=j*P/2),x.padding==="no-gap"){var U=Sl(t.barCategoryGap,j*P),W=j*P/2;O=W-U-(W-U)/P*U}}}i==="xAxis"?N=[r.left+(T.left||0)+(O||0),r.left+r.width-(T.right||0)-(O||0)]:i==="yAxis"?N=l==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(O||0),r.top+r.height-(T.bottom||0)-(O||0)]:N=x.range,A&&(N=[N[1],N[0]]);var q=Drt(x,a,p),L=q.scale,G=q.realScaleType;L.domain(w).range(N),Mrt(L);var H=Vrt(L,Zi(Zi({},x),{},{realScaleType:G}));i==="xAxis"?(E=b==="top"&&!$||b==="bottom"&&$,_=r.left,R=d[I]-E*x.height):i==="yAxis"&&(E=b==="left"&&!$||b==="right"&&$,_=d[I]-E*x.width,R=r.top);var Y=Zi(Zi(Zi({},x),H),{},{realScaleType:G,x:_,y:R,scale:L,width:i==="xAxis"?r.width:x.width,height:i==="yAxis"?r.height:x.height});return Y.bandSize=Ly(Y,H),!x.hide&&i==="xAxis"?d[I]+=(E?-1:1)*Y.height:x.hide||(d[I]+=(E?-1:1)*Y.width),Zi(Zi({},g),{},sb({},v,Y))},{})},xV=function(t,n){var r=t.x,i=t.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},wlt=function(t){var n=t.x1,r=t.y1,i=t.x2,a=t.y2;return xV({x:n,y:r},{x:i,y:a})},wV=function(){function e(t){vlt(this,e),this.scale=t}return blt(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();sb(wV,"EPS",1e-4);var Ck=function(t){var n=Object.keys(t).reduce(function(r,i){return Zi(Zi({},r),{},sb({},i,wV.create(t[i])))},{});return Zi(Zi({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return Kot(i,function(l,c){return n[c].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return pV(i,function(a,s){return n[s].isInRange(a)})}})};function Slt(e){return(e%180+180)%180}var Clt=function(t){var n=t.width,r=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Slt(i),s=a*Math.PI/180,o=Math.atan(r/n),l=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},ZT,AB;function Tlt(){if(AB)return ZT;AB=1;var e=So(),t=qd(),n=Gv();function r(i){return function(a,s,o){var l=Object(a);if(!t(a)){var c=e(s,3);a=n(a),s=function(d){return c(l[d],d,l)}}var h=i(a,s,o);return h>-1?l[c?a[h]:h]:void 0}}return ZT=r,ZT}var QT,kB;function $lt(){if(kB)return QT;kB=1;var e=cV();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return QT=t,QT}var JT,IB;function Alt(){if(IB)return JT;IB=1;var e=Rj(),t=So(),n=$lt(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var c=o==null?0:n(o);return c<0&&(c=r(l+c,0)),e(a,t(s,3),c)}return JT=i,JT}var t$,EB;function klt(){if(EB)return t$;EB=1;var e=Tlt(),t=Alt(),n=e(t);return t$=n,t$}var Ilt=klt();const Elt=Le(Ilt);var Olt=X4();const Nlt=Le(Olt);var _lt=Nlt(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Tk=Tt.createContext(void 0),$k=Tt.createContext(void 0),SV=Tt.createContext(void 0),CV=Tt.createContext({}),TV=Tt.createContext(void 0),$V=Tt.createContext(0),AV=Tt.createContext(0),OB=function(t){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=t.clipPathId,o=t.children,l=t.width,c=t.height,h=_lt(a);return Z.createElement(Tk.Provider,{value:r},Z.createElement($k.Provider,{value:i},Z.createElement(CV.Provider,{value:a},Z.createElement(SV.Provider,{value:h},Z.createElement(TV.Provider,{value:s},Z.createElement($V.Provider,{value:c},Z.createElement(AV.Provider,{value:l},o)))))))},Rlt=function(){return Tt.useContext(TV)},kV=function(t){var n=Tt.useContext(Tk);n==null&&Tl();var r=n[t];return r==null&&Tl(),r},Dlt=function(){var t=Tt.useContext(Tk);return no(t)},Mlt=function(){var t=Tt.useContext($k),n=Elt(t,function(r){return pV(r.domain,Number.isFinite)});return n||no(t)},IV=function(t){var n=Tt.useContext($k);n==null&&Tl();var r=n[t];return r==null&&Tl(),r},Plt=function(){var t=Tt.useContext(SV);return t},Flt=function(){return Tt.useContext(CV)},Ak=function(){return Tt.useContext(AV)},kk=function(){return Tt.useContext($V)};function $c(e){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$c(e)}function Llt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Blt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OV(r.key),r)}}function zlt(e,t,n){return t&&Blt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jlt(e,t,n){return t=Qy(t),Ult(e,EV()?Reflect.construct(t,n||[],Qy(e).constructor):t.apply(e,n))}function Ult(e,t){if(t&&($c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vlt(e)}function Vlt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EV=function(){return!!e})()}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qy(e)}function Wlt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$2(e,t)}function $2(e,t){return $2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$2(e,t)}function NB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _B(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NB(Object(n),!0).forEach(function(r){Ik(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ik(e,t,n){return t=OV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OV(e){var t=Glt(e,"string");return $c(t)=="symbol"?t:t+""}function Glt(e,t){if($c(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qlt(e,t){return Ylt(e)||Klt(e,t)||Xlt(e,t)||Hlt()}function Hlt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xlt(e,t){if(e){if(typeof e=="string")return RB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RB(e,t)}}function RB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Klt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Ylt(e){if(Array.isArray(e))return e}function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A2.apply(this,arguments)}var Zlt=function(t,n){var r;return Z.isValidElement(t)?r=Z.cloneElement(t,n):te(t)?r=t(n):r=Z.createElement("line",A2({},n,{className:"recharts-reference-line-line"})),r},Qlt=function(t,n,r,i,a,s,o,l,c){var h=a.x,d=a.y,p=a.width,g=a.height;if(r){var v=c.y,x=t.y.apply(v,{position:s});if(Aa(c,"discard")&&!t.y.isInRange(x))return null;var b=[{x:h+p,y:x},{x:h,y:x}];return l==="left"?b.reverse():b}if(n){var w=c.x,S=t.x.apply(w,{position:s});if(Aa(c,"discard")&&!t.x.isInRange(S))return null;var T=[{x:S,y:d+g},{x:S,y:d}];return o==="top"?T.reverse():T}if(i){var $=c.segment,A=$.map(function(I){return t.apply(I,{position:s})});return Aa(c,"discard")&&Got(A,function(I){return!t.isInRange(I)})?null:A}return null};function Jlt(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,a=e.yAxisId,s=e.shape,o=e.className,l=e.alwaysShow,c=Rlt(),h=kV(i),d=IV(a),p=Plt();if(!c||!p)return null;hs(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=Ck({x:h.scale,y:d.scale}),v=Ln(t),x=Ln(n),b=r&&r.length===2,w=Qlt(g,v,x,b,p,e.position,h.orientation,d.orientation,e);if(!w)return null;var S=qlt(w,2),T=S[0],$=T.x,A=T.y,I=S[1],O=I.x,N=I.y,_=Aa(e,"hidden")?"url(#".concat(c,")"):void 0,R=_B(_B({clipPath:_},re(e,!0)),{},{x1:$,y1:A,x2:O,y2:N});return Z.createElement(He,{className:ve("recharts-reference-line",o)},Zlt(s,R),br.renderCallByParent(e,wlt({x1:$,y1:A,x2:O,y2:N})))}var Ek=function(e){function t(){return Llt(this,t),jlt(this,t,arguments)}return Wlt(t,e),zlt(t,[{key:"render",value:function(){return Z.createElement(Jlt,this.props)}}])}(Z.Component);Ik(Ek,"displayName","ReferenceLine");Ik(Ek,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function k2(){return k2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k2.apply(this,arguments)}function Ac(e){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(e)}function DB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function MB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DB(Object(n),!0).forEach(function(r){ob(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_V(r.key),r)}}function nut(e,t,n){return t&&eut(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rut(e,t,n){return t=Jy(t),iut(e,NV()?Reflect.construct(t,n||[],Jy(e).constructor):t.apply(e,n))}function iut(e,t){if(t&&(Ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aut(e)}function aut(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NV=function(){return!!e})()}function Jy(e){return Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jy(e)}function sut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I2(e,t)}function I2(e,t){return I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},I2(e,t)}function ob(e,t,n){return t=_V(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _V(e){var t=out(e,"string");return Ac(t)=="symbol"?t:t+""}function out(e,t){if(Ac(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lut=function(t){var n=t.x,r=t.y,i=t.xAxis,a=t.yAxis,s=Ck({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return Aa(t,"discard")&&!s.isInRange(o)?null:o},lb=function(e){function t(){return tut(this,t),rut(this,t,arguments)}return sut(t,e),nut(t,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,l=r.clipPathId,c=Ln(i),h=Ln(a);if(hs(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!h)return null;var d=lut(this.props);if(!d)return null;var p=d.x,g=d.y,v=this.props,x=v.shape,b=v.className,w=Aa(this.props,"hidden")?"url(#".concat(l,")"):void 0,S=MB(MB({clipPath:w},re(this.props,!0)),{},{cx:p,cy:g});return Z.createElement(He,{className:ve("recharts-reference-dot",b)},t.renderDot(x,S),br.renderCallByParent(this.props,{x:p-s,y:g-s,width:2*s,height:2*s}))}}])}(Z.Component);ob(lb,"displayName","ReferenceDot");ob(lb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ob(lb,"renderDot",function(e,t){var n;return Z.isValidElement(e)?n=Z.cloneElement(e,t):te(e)?n=e(t):n=Z.createElement(rb,k2({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function E2(){return E2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E2.apply(this,arguments)}function kc(e){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(e)}function PB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function FB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PB(Object(n),!0).forEach(function(r){ub(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,DV(r.key),r)}}function fut(e,t,n){return t&&cut(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hut(e,t,n){return t=tv(t),dut(e,RV()?Reflect.construct(t,n||[],tv(e).constructor):t.apply(e,n))}function dut(e,t){if(t&&(kc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return put(e)}function put(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RV=function(){return!!e})()}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tv(e)}function mut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O2(e,t)}function O2(e,t){return O2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},O2(e,t)}function ub(e,t,n){return t=DV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DV(e){var t=gut(e,"string");return kc(t)=="symbol"?t:t+""}function gut(e,t){if(kc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yut=function(t,n,r,i,a){var s=a.x1,o=a.x2,l=a.y1,c=a.y2,h=a.xAxis,d=a.yAxis;if(!h||!d)return null;var p=Ck({x:h.scale,y:d.scale}),g={x:t?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(l,{position:"start"}):p.y.rangeMin},v={x:n?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(c,{position:"end"}):p.y.rangeMax};return Aa(a,"discard")&&(!p.isInRange(g)||!p.isInRange(v))?null:xV(g,v)},cb=function(e){function t(){return uut(this,t),hut(this,t,arguments)}return mut(t,e),fut(t,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,l=r.className,c=r.alwaysShow,h=r.clipPathId;hs(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Ln(i),p=Ln(a),g=Ln(s),v=Ln(o),x=this.props.shape;if(!d&&!p&&!g&&!v&&!x)return null;var b=yut(d,p,g,v,this.props);if(!b&&!x)return null;var w=Aa(this.props,"hidden")?"url(#".concat(h,")"):void 0;return Z.createElement(He,{className:ve("recharts-reference-area",l)},t.renderRect(x,FB(FB({clipPath:w},re(this.props,!0)),b)),br.renderCallByParent(this.props,b))}}])}(Z.Component);ub(cb,"displayName","ReferenceArea");ub(cb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ub(cb,"renderRect",function(e,t){var n;return Z.isValidElement(e)?n=Z.cloneElement(e,t):te(e)?n=e(t):n=Z.createElement(Sk,E2({},t,{className:"recharts-reference-area-rect"})),n});function MV(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function vut(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Clt(r,n)}function but(e,t,n){var r=n==="width",i=e.x,a=e.y,s=e.width,o=e.height;return t===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function ev(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function xut(e,t){return MV(e,t+1)}function wut(e,t,n,r,i){for(var a=(r||[]).slice(),s=t.start,o=t.end,l=0,c=1,h=s,d=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:MV(r,c)};var x=l,b,w=function(){return b===void 0&&(b=n(v,x)),b},S=v.coordinate,T=l===0||ev(e,S,w,h,o);T||(l=0,h=s,c+=1),T&&(h=S+e*(w()/2+i),l+=c)},p;c<=a.length;)if(p=d(),p)return p.v;return[]}function Od(e){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(e)}function LB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LB(Object(n),!0).forEach(function(r){Sut(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sut(e,t,n){return t=Cut(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cut(e){var t=Tut(e,"string");return Od(t)=="symbol"?t:t+""}function Tut(e,t){if(Od(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ut(e,t,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=t.start,l=t.end,c=function(p){var g=a[p],v,x=function(){return v===void 0&&(v=n(g,p)),v};if(p===s-1){var b=e*(g.coordinate+e*x()/2-l);a[p]=g=gr(gr({},g),{},{tickCoord:b>0?g.coordinate-b*e:g.coordinate})}else a[p]=g=gr(gr({},g),{},{tickCoord:g.coordinate});var w=ev(e,g.tickCoord,x,o,l);w&&(l=g.tickCoord-e*(x()/2+i),a[p]=gr(gr({},g),{},{isShow:!0}))},h=s-1;h>=0;h--)c(h);return a}function Aut(e,t,n,r,i,a){var s=(r||[]).slice(),o=s.length,l=t.start,c=t.end;if(a){var h=r[o-1],d=n(h,o-1),p=e*(h.coordinate+e*d/2-c);s[o-1]=h=gr(gr({},h),{},{tickCoord:p>0?h.coordinate-p*e:h.coordinate});var g=ev(e,h.tickCoord,function(){return d},l,c);g&&(c=h.tickCoord-e*(d/2+i),s[o-1]=gr(gr({},h),{},{isShow:!0}))}for(var v=a?o-1:o,x=function(S){var T=s[S],$,A=function(){return $===void 0&&($=n(T,S)),$};if(S===0){var I=e*(T.coordinate-e*A()/2-l);s[S]=T=gr(gr({},T),{},{tickCoord:I<0?T.coordinate-I*e:T.coordinate})}else s[S]=T=gr(gr({},T),{},{tickCoord:T.coordinate});var O=ev(e,T.tickCoord,A,l,c);O&&(l=T.tickCoord+e*(A()/2+i),s[S]=gr(gr({},T),{},{isShow:!0}))},b=0;b<v;b++)x(b);return s}function Ok(e,t,n){var r=e.tick,i=e.ticks,a=e.viewBox,s=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,h=e.unit,d=e.angle;if(!i||!i.length||!r)return[];if(Et(l)||jl.isSsr)return xut(i,typeof l=="number"&&Et(l)?l:0);var p=[],g=o==="top"||o==="bottom"?"width":"height",v=h&&g==="width"?Gh(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},x=function(T,$){var A=te(c)?c(T.value,$):T.value;return g==="width"?vut(Gh(A,{fontSize:t,letterSpacing:n}),v,d):Gh(A,{fontSize:t,letterSpacing:n})[g]},b=i.length>=2?na(i[1].coordinate-i[0].coordinate):1,w=but(a,b,g);return l==="equidistantPreserveStart"?wut(b,w,x,i,s):(l==="preserveStart"||l==="preserveStartEnd"?p=Aut(b,w,x,i,s,l==="preserveStartEnd"):p=$ut(b,w,x,i,s),p.filter(function(S){return S.isShow}))}var kut=["viewBox"],Iut=["viewBox"],Eut=["ticks"];function Ic(e){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(e)}function Qu(){return Qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qu.apply(this,arguments)}function BB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BB(Object(n),!0).forEach(function(r){Nk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e$(e,t){if(e==null)return{};var n=Out(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Out(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Nut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FV(r.key),r)}}function _ut(e,t,n){return t&&zB(e.prototype,t),n&&zB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rut(e,t,n){return t=nv(t),Dut(e,PV()?Reflect.construct(t,n||[],nv(e).constructor):t.apply(e,n))}function Dut(e,t){if(t&&(Ic(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mut(e)}function Mut(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PV=function(){return!!e})()}function nv(e){return nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nv(e)}function Put(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N2(e,t)}function N2(e,t){return N2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},N2(e,t)}function Nk(e,t,n){return t=FV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FV(e){var t=Fut(e,"string");return Ic(t)=="symbol"?t:t+""}function Fut(e,t){if(Ic(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ic(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var af=function(e){function t(n){var r;return Nut(this,t),r=Rut(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Put(t,e),_ut(t,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=e$(r,kut),o=this.props,l=o.viewBox,c=e$(o,Iut);return!tc(a,l)||!tc(s,c)||!tc(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.orientation,h=i.tickSize,d=i.mirror,p=i.tickMargin,g,v,x,b,w,S,T=d?-1:1,$=r.tickSize||h,A=Et(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":g=v=r.coordinate,b=s+ +!d*l,x=b-T*$,S=x-T*p,w=A;break;case"left":x=b=r.coordinate,v=a+ +!d*o,g=v-T*$,w=g-T*p,S=A;break;case"right":x=b=r.coordinate,v=a+ +d*o,g=v+T*$,w=g+T*p,S=A;break;default:g=v=r.coordinate,b=s+ +d*l,x=b+T*$,S=x+T*p,w=A;break}return{line:{x1:g,y1:x,x2:v,y2:b},tick:{x:w,y:S}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.orientation,c=r.mirror,h=r.axisLine,d=kr(kr(kr({},re(this.props,!1)),re(h,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!c||l==="bottom"&&c);d=kr(kr({},d),{},{x1:i,y1:a+p*o,x2:i+s,y2:a+p*o})}else{var g=+(l==="left"&&!c||l==="right"&&c);d=kr(kr({},d),{},{x1:i+g*s,y1:a,x2:i+g*s,y2:a+o})}return Z.createElement("line",Qu({},d,{className:ve("recharts-cartesian-axis-line",Di(h,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,l=o.tickLine,c=o.stroke,h=o.tick,d=o.tickFormatter,p=o.unit,g=Ok(kr(kr({},this.props),{},{ticks:r}),i,a),v=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),b=re(this.props,!1),w=re(h,!1),S=kr(kr({},b),{},{fill:"none"},re(l,!1)),T=g.map(function($,A){var I=s.getTickLineCoord($),O=I.line,N=I.tick,_=kr(kr(kr(kr({textAnchor:v,verticalAnchor:x},b),{},{stroke:"none",fill:c},w),N),{},{index:A,payload:$,visibleTicksCount:g.length,tickFormatter:d});return Z.createElement(He,Qu({className:"recharts-cartesian-axis-tick",key:"tick-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},hy(s.props,$,A)),l&&Z.createElement("line",Qu({},S,O,{className:ve("recharts-cartesian-axis-tick-line",Di(l,"className"))})),h&&t.renderTickItem(h,_,"".concat(te(d)?d($.value,A):$.value).concat(p||"")))});return Z.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,c=i.className,h=i.hide;if(h)return null;var d=this.props,p=d.ticks,g=e$(d,Eut),v=p;return te(l)&&(v=p&&p.length>0?l(this.props):l(g)),s<=0||o<=0||!v||!v.length?null:Z.createElement(He,{className:ve("recharts-cartesian-axis",c),ref:function(b){r.layerReference=b}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),br.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return Z.isValidElement(r)?s=Z.cloneElement(r,i):te(r)?s=r(i):s=Z.createElement(Cy,Qu({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(Tt.Component);Nk(af,"displayName","CartesianAxis");Nk(af,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Lut=["x1","y1","x2","y2","key"],But=["offset"];function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function jB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jB(Object(n),!0).forEach(function(r){zut(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zut(e,t,n){return t=jut(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jut(e){var t=Uut(e,"string");return $l(t)=="symbol"?t:t+""}function Uut(e,t){if($l(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hl(){return hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hl.apply(this,arguments)}function UB(e,t){if(e==null)return{};var n=Vut(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Vut(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Wut=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,a=t.y,s=t.width,o=t.height,l=t.ry;return Z.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function LV(e,t){var n;if(Z.isValidElement(e))n=Z.cloneElement(e,t);else if(te(e))n=e(t);else{var r=t.x1,i=t.y1,a=t.x2,s=t.y2,o=t.key,l=UB(t,Lut),c=re(l,!1);c.offset;var h=UB(c,But);n=Z.createElement("line",hl({},h,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function Gut(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var c=xr(xr({},e),{},{x1:t,y1:o,x2:t+n,y2:o,key:"line-".concat(l),index:l});return LV(i,c)});return Z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function qut(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,a=e.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var c=xr(xr({},e),{},{x1:o,y1:t,x2:o,y2:t+n,key:"line-".concat(l),index:l});return LV(i,c)});return Z.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Hut(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,a=e.width,s=e.height,o=e.horizontalPoints,l=e.horizontal,c=l===void 0?!0:l;if(!c||!t||!t.length)return null;var h=o.map(function(p){return Math.round(p+i-i)}).sort(function(p,g){return p-g});i!==h[0]&&h.unshift(0);var d=h.map(function(p,g){var v=!h[g+1],x=v?i+s-p:h[g+1]-p;if(x<=0)return null;var b=g%t.length;return Z.createElement("rect",{key:"react-".concat(g),y:p,x:r,height:x,width:a,stroke:"none",fill:t[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Xut(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,a=e.x,s=e.y,o=e.width,l=e.height,c=e.verticalPoints;if(!n||!r||!r.length)return null;var h=c.map(function(p){return Math.round(p+a-a)}).sort(function(p,g){return p-g});a!==h[0]&&h.unshift(0);var d=h.map(function(p,g){var v=!h[g+1],x=v?a+o-p:h[g+1]-p;if(x<=0)return null;var b=g%r.length;return Z.createElement("rect",{key:"react-".concat(g),x:p,y:s,width:x,height:l,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Kut=function(t,n){var r=t.xAxis,i=t.width,a=t.height,s=t.offset;return ZU(Ok(xr(xr(xr({},af.defaultProps),r),{},{ticks:us(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},Yut=function(t,n){var r=t.yAxis,i=t.width,a=t.height,s=t.offset;return ZU(Ok(xr(xr(xr({},af.defaultProps),r),{},{ticks:us(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Vu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function _2(e){var t,n,r,i,a,s,o=Ak(),l=kk(),c=Flt(),h=xr(xr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Vu.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Vu.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Vu.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Vu.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Vu.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:Vu.verticalFill,x:Et(e.x)?e.x:c.left,y:Et(e.y)?e.y:c.top,width:Et(e.width)?e.width:c.width,height:Et(e.height)?e.height:c.height}),d=h.x,p=h.y,g=h.width,v=h.height,x=h.syncWithTicks,b=h.horizontalValues,w=h.verticalValues,S=Dlt(),T=Mlt();if(!Et(g)||g<=0||!Et(v)||v<=0||!Et(d)||d!==+d||!Et(p)||p!==+p)return null;var $=h.verticalCoordinatesGenerator||Kut,A=h.horizontalCoordinatesGenerator||Yut,I=h.horizontalPoints,O=h.verticalPoints;if((!I||!I.length)&&te(A)){var N=b&&b.length,_=A({yAxis:T?xr(xr({},T),{},{ticks:N?b:T.ticks}):void 0,width:o,height:l,offset:c},N?!0:x);hs(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat($l(_),"]")),Array.isArray(_)&&(I=_)}if((!O||!O.length)&&te($)){var R=w&&w.length,E=$({xAxis:S?xr(xr({},S),{},{ticks:R?w:S.ticks}):void 0,width:o,height:l,offset:c},R?!0:x);hs(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat($l(E),"]")),Array.isArray(E)&&(O=E)}return Z.createElement("g",{className:"recharts-cartesian-grid"},Z.createElement(Wut,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),Z.createElement(Gut,hl({},h,{offset:c,horizontalPoints:I,xAxis:S,yAxis:T})),Z.createElement(qut,hl({},h,{offset:c,verticalPoints:O,xAxis:S,yAxis:T})),Z.createElement(Hut,hl({},h,{horizontalPoints:I})),Z.createElement(Xut,hl({},h,{verticalPoints:O})))}_2.displayName="CartesianGrid";var Zut=["type","layout","connectNulls","ref"],Qut=["key"];function Ec(e){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ec(e)}function VB(e,t){if(e==null)return{};var n=Jut(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jut(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kh.apply(this,arguments)}function WB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WB(Object(n),!0).forEach(function(r){Qi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wu(e){return rct(e)||nct(e)||ect(e)||tct()}function tct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ect(e,t){if(e){if(typeof e=="string")return R2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R2(e,t)}}function nct(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rct(e){if(Array.isArray(e))return R2(e)}function R2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ict(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zV(r.key),r)}}function act(e,t,n){return t&&GB(e.prototype,t),n&&GB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sct(e,t,n){return t=rv(t),oct(e,BV()?Reflect.construct(t,n||[],rv(e).constructor):t.apply(e,n))}function oct(e,t){if(t&&(Ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lct(e)}function lct(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BV=function(){return!!e})()}function rv(e){return rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rv(e)}function uct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D2(e,t)}function D2(e,t){return D2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},D2(e,t)}function Qi(e,t,n){return t=zV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zV(e){var t=cct(e,"string");return Ec(t)=="symbol"?t:t+""}function cct(e,t){if(Ec(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Oc=function(e){function t(){var n;ict(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=sct(this,t,[].concat(i)),Qi(n,"state",{isAnimationFinished:!0,totalLength:0}),Qi(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),Qi(n,"getStrokeDasharray",function(s,o,l){var c=l.reduce(function(w,S){return w+S});if(!c)return n.generateSimpleStrokeDasharray(o,s);for(var h=Math.floor(s/c),d=s%c,p=o-s,g=[],v=0,x=0;v<l.length;x+=l[v],++v)if(x+l[v]>d){g=[].concat(Wu(l.slice(0,v)),[d-x]);break}var b=g.length%2===0?[0,p]:[p];return[].concat(Wu(t.repeat(l,h)),Wu(g),b).map(function(w){return"".concat(w,"px")}).join(", ")}),Qi(n,"id",Jc("recharts-line-")),Qi(n,"pathRef",function(s){n.mainCurve=s}),Qi(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Qi(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return uct(t,e),act(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,l=a.yAxis,c=a.layout,h=a.children,d=Mi(h,Zd);if(!d)return null;var p=function(x,b){return{x:x.x,y:x.y,value:x.value,errorVal:Rr(x.payload,b)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Z.createElement(He,g,d.map(function(v){return Z.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:s,xAxis:o,yAxis:l,layout:c,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,c=o.points,h=o.dataKey,d=re(this.props,!1),p=re(l,!0),g=c.map(function(x,b){var w=si(si(si({key:"dot-".concat(b),r:3},d),p),{},{index:b,cx:x.x,cy:x.y,value:x.value,dataKey:h,payload:x.payload,points:c});return t.renderDotItem(l,w)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Z.createElement(He,Kh({className:"recharts-line-dots",key:"dots"},v),g)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,l=o.type,c=o.layout,h=o.connectNulls;o.ref;var d=VB(o,Zut),p=si(si(si({},re(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:l,layout:c,connectNulls:h});return Z.createElement(ic,Kh({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.strokeDasharray,c=s.isAnimationActive,h=s.animationBegin,d=s.animationDuration,p=s.animationEasing,g=s.animationId,v=s.animateNewValues,x=s.width,b=s.height,w=this.state,S=w.prevPoints,T=w.totalLength;return Z.createElement(Ra,{begin:h,duration:d,isActive:c,easing:p,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function($){var A=$.t;if(S){var I=S.length/o.length,O=o.map(function(F,M){var B=Math.floor(M*I);if(S[B]){var j=S[B],P=ir(j.x,F.x),U=ir(j.y,F.y);return si(si({},F),{},{x:P(A),y:U(A)})}if(v){var W=ir(x*2,F.x),q=ir(b/2,F.y);return si(si({},F),{},{x:W(A),y:q(A)})}return si(si({},F),{},{x:F.x,y:F.y})});return a.renderCurveStatically(O,r,i)}var N=ir(0,T),_=N(A),R;if(l){var E="".concat(l).split(/[,\s]+/gim).map(function(F){return parseFloat(F)});R=a.getStrokeDasharray(_,T,E)}else R=a.generateSimpleStrokeDasharray(T,_);return a.renderCurveStatically(o,r,i,{strokeDasharray:R})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,l=this.state,c=l.prevPoints,h=l.totalLength;return o&&s&&s.length&&(!c&&h>0||!bc(c,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,c=i.xAxis,h=i.yAxis,d=i.top,p=i.left,g=i.width,v=i.height,x=i.isAnimationActive,b=i.id;if(a||!o||!o.length)return null;var w=this.state.isAnimationFinished,S=o.length===1,T=ve("recharts-line",l),$=c&&c.allowDataOverflow,A=h&&h.allowDataOverflow,I=$||A,O=ce(b)?this.id:b,N=(r=re(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},_=N.r,R=_===void 0?3:_,E=N.strokeWidth,F=E===void 0?2:E,M=J4(s)?s:{},B=M.clipDot,j=B===void 0?!0:B,P=R*2+F;return Z.createElement(He,{className:T},$||A?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(O)},Z.createElement("rect",{x:$?p:p-g/2,y:A?d:d-v/2,width:$?g:g*2,height:A?v:v*2})),!j&&Z.createElement("clipPath",{id:"clipPath-dots-".concat(O)},Z.createElement("rect",{x:p-P/2,y:d-P/2,width:g+P,height:v+P}))):null,!S&&this.renderCurve(I,O),this.renderErrorBar(I,O),(S||s)&&this.renderDots(I,j,O),(!x||w)&&ps.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Wu(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(Wu(s),Wu(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(Z.isValidElement(r))a=Z.cloneElement(r,i);else if(te(r))a=r(i);else{var s=i.key,o=VB(i,Qut),l=ve("recharts-line-dot",typeof r!="boolean"?r.className:"");a=Z.createElement(rb,Kh({key:s},o,{className:l}))}return a}}])}(Tt.PureComponent);Qi(Oc,"displayName","Line");Qi(Oc,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!jl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Qi(Oc,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,s=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,h=t.layout,d=l.map(function(p,g){var v=Rr(p,s);return h==="horizontal"?{x:Fy({axis:n,ticks:i,bandSize:o,entry:p,index:g}),y:ce(v)?null:r.scale(v),value:v,payload:p}:{x:ce(v)?null:n.scale(v),y:Fy({axis:r,ticks:a,bandSize:o,entry:p,index:g}),value:v,payload:p}});return si({points:d,layout:h},c)});var fct=["layout","type","stroke","connectNulls","isRange","ref"],hct=["key"],jV;function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}function UV(e,t){if(e==null)return{};var n=dct(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dct(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dl.apply(this,arguments)}function qB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Js(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qB(Object(n),!0).forEach(function(r){Ca(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WV(r.key),r)}}function mct(e,t,n){return t&&HB(e.prototype,t),n&&HB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gct(e,t,n){return t=iv(t),yct(e,VV()?Reflect.construct(t,n||[],iv(e).constructor):t.apply(e,n))}function yct(e,t){if(t&&(Nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vct(e)}function vct(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VV=function(){return!!e})()}function iv(e){return iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iv(e)}function bct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M2(e,t)}function M2(e,t){return M2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},M2(e,t)}function Ca(e,t,n){return t=WV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WV(e){var t=xct(e,"string");return Nc(t)=="symbol"?t:t+""}function xct(e,t){if(Nc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Nc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ao=function(e){function t(){var n;pct(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=gct(this,t,[].concat(i)),Ca(n,"state",{isAnimationFinished:!0}),Ca(n,"id",Jc("recharts-area-")),Ca(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),te(s)&&s()}),Ca(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),te(s)&&s()}),n}return bct(t,e),mct(t,[{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(s&&!o)return null;var l=this.props,c=l.dot,h=l.points,d=l.dataKey,p=re(this.props,!1),g=re(c,!0),v=h.map(function(b,w){var S=Js(Js(Js({key:"dot-".concat(w),r:3},p),g),{},{index:w,cx:b.x,cy:b.y,dataKey:d,value:b.value,payload:b.payload,points:h});return t.renderDotItem(c,S)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Z.createElement(He,dl({className:"recharts-area-dots"},x),v)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,l=s[0].x,c=s[s.length-1].x,h=r*Math.abs(l-c),d=ro(s.map(function(p){return p.y||0}));return Et(a)&&typeof a=="number"?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(ro(a.map(function(p){return p.y||0})),d)),Et(d)?Z.createElement("rect",{x:l<c?l:l-h,y:0,width:h,height:Math.floor(d+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,l=s[0].y,c=s[s.length-1].y,h=r*Math.abs(l-c),d=ro(s.map(function(p){return p.x||0}));return Et(a)&&typeof a=="number"?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(ro(a.map(function(p){return p.x||0})),d)),Et(d)?Z.createElement("rect",{x:0,y:l<c?l:l-h,width:d+(o?parseInt("".concat(o),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,s){var o=this.props,l=o.layout,c=o.type,h=o.stroke,d=o.connectNulls,p=o.isRange;o.ref;var g=UV(o,fct);return Z.createElement(He,{clipPath:a?"url(#clipPath-".concat(s,")"):null},Z.createElement(ic,dl({},re(g,!0),{points:r,connectNulls:d,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),h!=="none"&&Z.createElement(ic,dl({},re(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),h!=="none"&&p&&Z.createElement(ic,dl({},re(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,h=s.animationBegin,d=s.animationDuration,p=s.animationEasing,g=s.animationId,v=this.state,x=v.prevPoints,b=v.prevBaseLine;return Z.createElement(Ra,{begin:h,duration:d,isActive:c,easing:p,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var S=w.t;if(x){var T=x.length/o.length,$=o.map(function(N,_){var R=Math.floor(_*T);if(x[R]){var E=x[R],F=ir(E.x,N.x),M=ir(E.y,N.y);return Js(Js({},N),{},{x:F(S),y:M(S)})}return N}),A;if(Et(l)&&typeof l=="number"){var I=ir(b,l);A=I(S)}else if(ce(l)||Qc(l)){var O=ir(b,0);A=O(S)}else A=l.map(function(N,_){var R=Math.floor(_*T);if(b[R]){var E=b[R],F=ir(E.x,N.x),M=ir(E.y,N.y);return Js(Js({},N),{},{x:F(S),y:M(S)})}return N});return a.renderAreaStatically($,A,r,i)}return Z.createElement(He,null,Z.createElement("defs",null,Z.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(S))),Z.createElement(He,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(o,l,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,s=a.points,o=a.baseLine,l=a.isAnimationActive,c=this.state,h=c.prevPoints,d=c.prevBaseLine,p=c.totalLength;return l&&s&&s.length&&(!h&&p>0||!bc(h,s)||!bc(d,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(s,o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,c=i.top,h=i.left,d=i.xAxis,p=i.yAxis,g=i.width,v=i.height,x=i.isAnimationActive,b=i.id;if(a||!o||!o.length)return null;var w=this.state.isAnimationFinished,S=o.length===1,T=ve("recharts-area",l),$=d&&d.allowDataOverflow,A=p&&p.allowDataOverflow,I=$||A,O=ce(b)?this.id:b,N=(r=re(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},_=N.r,R=_===void 0?3:_,E=N.strokeWidth,F=E===void 0?2:E,M=J4(s)?s:{},B=M.clipDot,j=B===void 0?!0:B,P=R*2+F;return Z.createElement(He,{className:T},$||A?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(O)},Z.createElement("rect",{x:$?h:h-g/2,y:A?c:c-v/2,width:$?g:g*2,height:A?v:v*2})),!j&&Z.createElement("clipPath",{id:"clipPath-dots-".concat(O)},Z.createElement("rect",{x:h-P/2,y:c-P/2,width:g+P,height:v+P}))):null,S?null:this.renderArea(I,O),(s||S)&&this.renderDots(I,j,O),(!x||w)&&ps.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(Tt.PureComponent);jV=Ao;Ca(Ao,"displayName","Area");Ca(Ao,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ca(Ao,"getBaseValue",function(e,t,n,r){var i=e.layout,a=e.baseValue,s=t.props.baseValue,o=s??a;if(Et(o)&&typeof o=="number")return o;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var h=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return o==="dataMin"?d:o==="dataMax"||h<0?h:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]});Ca(Ao,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,i=e.yAxis,a=e.xAxisTicks,s=e.yAxisTicks,o=e.bandSize,l=e.dataKey,c=e.stackedData,h=e.dataStartIndex,d=e.displayedData,p=e.offset,g=t.layout,v=c&&c.length,x=jV.getBaseValue(t,n,r,i),b=g==="horizontal",w=!1,S=d.map(function($,A){var I;v?I=c[h+A]:(I=Rr($,l),Array.isArray(I)?w=!0:I=[x,I]);var O=I[1]==null||v&&Rr($,l)==null;return b?{x:Fy({axis:r,ticks:a,bandSize:o,entry:$,index:A}),y:O?null:i.scale(I[1]),value:I,payload:$}:{x:O?null:r.scale(I[1]),y:Fy({axis:i,ticks:s,bandSize:o,entry:$,index:A}),value:I,payload:$}}),T;return v||w?T=S.map(function($){var A=Array.isArray($.value)?$.value[0]:null;return b?{x:$.x,y:A!=null&&$.y!=null?i.scale(A):null}:{x:A!=null?r.scale(A):null,y:$.y}}):T=b?i.scale(x):r.scale(x),Js({points:S,baseLine:T,layout:g,isRange:w},p)});Ca(Ao,"renderDotItem",function(e,t){var n;if(Z.isValidElement(e))n=Z.cloneElement(e,t);else if(te(e))n=e(t);else{var r=ve("recharts-area-dot",typeof e!="boolean"?e.className:""),i=t.key,a=UV(t,hct);n=Z.createElement(rb,dl({},a,{key:i,className:r}))}return n});function _c(e){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(e)}function wct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HV(r.key),r)}}function Cct(e,t,n){return t&&Sct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tct(e,t,n){return t=av(t),$ct(e,GV()?Reflect.construct(t,n||[],av(e).constructor):t.apply(e,n))}function $ct(e,t){if(t&&(_c(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Act(e)}function Act(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GV=function(){return!!e})()}function av(e){return av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},av(e)}function kct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P2(e,t)}function P2(e,t){return P2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},P2(e,t)}function qV(e,t,n){return t=HV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HV(e){var t=Ict(e,"string");return _c(t)=="symbol"?t:t+""}function Ict(e,t){if(_c(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function F2(){return F2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F2.apply(this,arguments)}function Ect(e){var t=e.xAxisId,n=Ak(),r=kk(),i=kV(t);return i==null?null:Z.createElement(af,F2({},i,{className:ve("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return us(s,!0)}}))}var Rc=function(e){function t(){return wct(this,t),Tct(this,t,arguments)}return kct(t,e),Cct(t,[{key:"render",value:function(){return Z.createElement(Ect,this.props)}}])}(Z.Component);qV(Rc,"displayName","XAxis");qV(Rc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Dc(e){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(e)}function Oct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YV(r.key),r)}}function _ct(e,t,n){return t&&Nct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rct(e,t,n){return t=sv(t),Dct(e,XV()?Reflect.construct(t,n||[],sv(e).constructor):t.apply(e,n))}function Dct(e,t){if(t&&(Dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mct(e)}function Mct(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XV=function(){return!!e})()}function sv(e){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sv(e)}function Pct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L2(e,t)}function L2(e,t){return L2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},L2(e,t)}function KV(e,t,n){return t=YV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YV(e){var t=Fct(e,"string");return Dc(t)=="symbol"?t:t+""}function Fct(e,t){if(Dc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Dc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function B2(){return B2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B2.apply(this,arguments)}var Lct=function(t){var n=t.yAxisId,r=Ak(),i=kk(),a=IV(n);return a==null?null:Z.createElement(af,B2({},a,{className:ve("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return us(o,!0)}}))},Mc=function(e){function t(){return Oct(this,t),Rct(this,t,arguments)}return Pct(t,e),_ct(t,[{key:"render",value:function(){return Z.createElement(Lct,this.props)}}])}(Z.Component);KV(Mc,"displayName","YAxis");KV(Mc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function XB(e){return Uct(e)||jct(e)||zct(e)||Bct()}function Bct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zct(e,t){if(e){if(typeof e=="string")return z2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z2(e,t)}}function jct(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uct(e){if(Array.isArray(e))return z2(e)}function z2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j2=function(t,n,r,i,a){var s=Mi(t,Ek),o=Mi(t,lb),l=[].concat(XB(s),XB(o)),c=Mi(t,cb),h="".concat(i,"Id"),d=i[0],p=n;if(l.length&&(p=l.reduce(function(x,b){if(b.props[h]===r&&Aa(b.props,"extendDomain")&&Et(b.props[d])){var w=b.props[d];return[Math.min(x[0],w),Math.max(x[1],w)]}return x},p)),c.length){var g="".concat(d,"1"),v="".concat(d,"2");p=c.reduce(function(x,b){if(b.props[h]===r&&Aa(b.props,"extendDomain")&&Et(b.props[g])&&Et(b.props[v])){var w=b.props[g],S=b.props[v];return[Math.min(x[0],w,S),Math.max(x[1],w,S)]}return x},p)}return a&&a.length&&(p=a.reduce(function(x,b){return Et(b)?[Math.min(x[0],b),Math.max(x[1],b)]:x},p)),p},n$={exports:{}},KB;function Vct(){return KB||(KB=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function a(l,c,h,d,p){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new i(h,d||l,p),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],h,d;if(this._eventsCount===0)return c;for(d in h=this._events)t.call(h,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},o.prototype.listeners=function(c){var h=n?n+c:c,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,g=d.length,v=new Array(g);p<g;p++)v[p]=d[p].fn;return v},o.prototype.listenerCount=function(c){var h=n?n+c:c,d=this._events[h];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,h,d,p,g,v){var x=n?n+c:c;if(!this._events[x])return!1;var b=this._events[x],w=arguments.length,S,T;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,d),!0;case 4:return b.fn.call(b.context,h,d,p),!0;case 5:return b.fn.call(b.context,h,d,p,g),!0;case 6:return b.fn.call(b.context,h,d,p,g,v),!0}for(T=1,S=new Array(w-1);T<w;T++)S[T-1]=arguments[T];b.fn.apply(b.context,S)}else{var $=b.length,A;for(T=0;T<$;T++)switch(b[T].once&&this.removeListener(c,b[T].fn,void 0,!0),w){case 1:b[T].fn.call(b[T].context);break;case 2:b[T].fn.call(b[T].context,h);break;case 3:b[T].fn.call(b[T].context,h,d);break;case 4:b[T].fn.call(b[T].context,h,d,p);break;default:if(!S)for(A=1,S=new Array(w-1);A<w;A++)S[A-1]=arguments[A];b[T].fn.apply(b[T].context,S)}}return!0},o.prototype.on=function(c,h,d){return a(this,c,h,d,!1)},o.prototype.once=function(c,h,d){return a(this,c,h,d,!0)},o.prototype.removeListener=function(c,h,d,p){var g=n?n+c:c;if(!this._events[g])return this;if(!h)return s(this,g),this;var v=this._events[g];if(v.fn)v.fn===h&&(!p||v.once)&&(!d||v.context===d)&&s(this,g);else{for(var x=0,b=[],w=v.length;x<w;x++)(v[x].fn!==h||p&&!v[x].once||d&&v[x].context!==d)&&b.push(v[x]);b.length?this._events[g]=b.length===1?b[0]:b:s(this,g)}return this},o.prototype.removeAllListeners=function(c){var h;return c?(h=n?n+c:c,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(n$)),n$.exports}var Wct=Vct();const Gct=Le(Wct);var r$=new Gct,i$="recharts.syncMouseEvents";function Nd(e){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function qct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZV(r.key),r)}}function Xct(e,t,n){return t&&Hct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a$(e,t,n){return t=ZV(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZV(e){var t=Kct(e,"string");return Nd(t)=="symbol"?t:t+""}function Kct(e,t){if(Nd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Yct=function(){function e(){qct(this,e),a$(this,"activeIndex",0),a$(this,"coordinateList",[]),a$(this,"layout","horizontal")}return Xct(e,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,l=n.layout,c=l===void 0?null:l,h=n.offset,d=h===void 0?null:h,p=n.mouseHandlerCallback,g=p===void 0?null:p;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=a+l+c,p=s+this.offset.top+o/2+h;this.mouseHandlerCallback({pageX:d,pageY:p})}}}])}();function Zct(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],i=e==null?void 0:e[1];if(r&&i&&Et(r)&&Et(i))return!0}return!1}function Qct(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function QV(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,a=e.endAngle,s=ar(t,n,r,i),o=ar(t,n,r,a);return{points:[s,o],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function Jct(e,t,n){var r,i,a,s;if(e==="horizontal")r=t.x,a=r,i=n.top,s=n.top+n.height;else if(e==="vertical")i=t.y,s=i,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,l=t.cy,c=t.innerRadius,h=t.outerRadius,d=t.angle,p=ar(o,l,c,d),g=ar(o,l,h,d);r=p.x,i=p.y,a=g.x,s=g.y}else return QV(t);return[{x:r,y:i},{x:a,y:s}]}function _d(e){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d(e)}function YB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YB(Object(n),!0).forEach(function(r){tft(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tft(e,t,n){return t=eft(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eft(e){var t=nft(e,"string");return _d(t)=="symbol"?t:t+""}function nft(e,t){if(_d(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rft(e){var t,n,r=e.element,i=e.tooltipEventType,a=e.isActive,s=e.activeCoordinate,o=e.activePayload,l=e.offset,c=e.activeTooltipIndex,h=e.tooltipAxisBandSize,d=e.layout,p=e.chartName,g=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!g||!a||!s||p!=="ScatterChart"&&i!=="axis")return null;var v,x=ic;if(p==="ScatterChart")v=s,x=Gst;else if(p==="BarChart")v=Qct(d,s,l,h),x=Sk;else if(d==="radial"){var b=QV(s),w=b.cx,S=b.cy,T=b.radius,$=b.startAngle,A=b.endAngle;v={cx:w,cy:S,startAngle:$,endAngle:A,innerRadius:T,outerRadius:T},x=nV}else v={points:Jct(d,s,l)},x=ic;var I=zg(zg(zg(zg({stroke:"#ccc",pointerEvents:"none"},l),v),re(g,!1)),{},{payload:o,payloadIndex:c,className:ve("recharts-tooltip-cursor",g.className)});return Tt.isValidElement(g)?Tt.cloneElement(g,I):Tt.createElement(x,I)}var ift=["item"],aft=["children","className","width","height","style","compact","title","desc"];function Pc(e){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pc(e)}function Ju(){return Ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ju.apply(this,arguments)}function ZB(e,t){return lft(e)||oft(e,t)||tW(e,t)||sft()}function sft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oft(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function lft(e){if(Array.isArray(e))return e}function QB(e,t){if(e==null)return{};var n=uft(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uft(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function cft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eW(r.key),r)}}function hft(e,t,n){return t&&fft(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dft(e,t,n){return t=ov(t),pft(e,JV()?Reflect.construct(t,n||[],ov(e).constructor):t.apply(e,n))}function pft(e,t){if(t&&(Pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mft(e)}function mft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JV=function(){return!!e})()}function ov(e){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ov(e)}function gft(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U2(e,t)}function U2(e,t){return U2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},U2(e,t)}function Fc(e){return bft(e)||vft(e)||tW(e)||yft()}function yft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tW(e,t){if(e){if(typeof e=="string")return V2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V2(e,t)}}function vft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bft(e){if(Array.isArray(e))return V2(e)}function V2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function JB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JB(Object(n),!0).forEach(function(r){Kt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kt(e,t,n){return t=eW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eW(e){var t=xft(e,"string");return Pc(t)=="symbol"?t:t+""}function xft(e,t){if(Pc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Pc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wft={xAxis:["bottom","top"],yAxis:["left","right"]},Sft={width:"100%",height:"100%"},nW={x:0,y:0};function jg(e){return e}var Cft=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},Tft=function(t,n,r,i){var a=n.find(function(h){return h&&h.index===r});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var s=a.coordinate,o=i.radius;return vt(vt(vt({},i),ar(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,c=i.angle;return vt(vt(vt({},i),ar(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return nW},fb=function(t,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(Fc(o),Fc(c)):o},[]);return s.length>0?s:t&&t.length&&Et(i)&&Et(a)?t.slice(i,a+1):[]};function rW(e){return e==="number"?[0,"auto"]:void 0}var W2=function(t,n,r,i){var a=t.graphicalItems,s=t.tooltipAxis,o=fb(n,t);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(l,c){var h,d=(h=c.props.data)!==null&&h!==void 0?h:n;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var g=d===void 0?o:d;p=cy(g,s.dataKey,i)}else p=d&&d[r]||o[r];return p?[].concat(Fc(l),[JU(c,p)]):l},[])},tz=function(t,n,r,i){var a=i||{x:t.chartX,y:t.chartY},s=Cft(a,r),o=t.orderedTooltipTicks,l=t.tooltipAxis,c=t.tooltipTicks,h=Irt(s,o,c,l);if(h>=0&&c){var d=c[h]&&c[h].value,p=W2(t,n,h,d),g=Tft(r,o,h,a);return{activeTooltipIndex:h,activeLabel:d,activePayload:p,activeCoordinate:g}}return null},$ft=function(t,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=t.layout,d=t.children,p=t.stackOffset,g=YU(h,a);return r.reduce(function(v,x){var b,w=x.type.defaultProps!==void 0?vt(vt({},x.type.defaultProps),x.props):x.props,S=w.type,T=w.dataKey,$=w.allowDataOverflow,A=w.allowDuplicatedCategory,I=w.scale,O=w.ticks,N=w.includeHidden,_=w[s];if(v[_])return v;var R=fb(t.data,{graphicalItems:i.filter(function(H){var Y,ot=s in H.props?H.props[s]:(Y=H.type.defaultProps)===null||Y===void 0?void 0:Y[s];return ot===_}),dataStartIndex:l,dataEndIndex:c}),E=R.length,F,M,B;Zct(w.domain,$,S)&&(F=s2(w.domain,null,$),g&&(S==="number"||I!=="auto")&&(B=Hh(R,T,"category")));var j=rW(S);if(!F||F.length===0){var P,U=(P=w.domain)!==null&&P!==void 0?P:j;if(T){if(F=Hh(R,T,S),S==="category"&&g){var W=v9(F);A&&W?(M=F,F=Hy(0,E)):A||(F=uL(U,F,x).reduce(function(H,Y){return H.indexOf(Y)>=0?H:[].concat(Fc(H),[Y])},[]))}else if(S==="category")A?F=F.filter(function(H){return H!==""&&!ce(H)}):F=uL(U,F,x).reduce(function(H,Y){return H.indexOf(Y)>=0||Y===""||ce(Y)?H:[].concat(Fc(H),[Y])},[]);else if(S==="number"){var q=Rrt(R,i.filter(function(H){var Y,ot,ht=s in H.props?H.props[s]:(Y=H.type.defaultProps)===null||Y===void 0?void 0:Y[s],yt="hide"in H.props?H.props.hide:(ot=H.type.defaultProps)===null||ot===void 0?void 0:ot.hide;return ht===_&&(N||!yt)}),T,a,h);q&&(F=q)}g&&(S==="number"||I!=="auto")&&(B=Hh(R,T,"category"))}else g?F=Hy(0,E):o&&o[_]&&o[_].hasStack&&S==="number"?F=p==="expand"?[0,1]:QU(o[_].stackGroups,l,c):F=KU(R,i.filter(function(H){var Y=s in H.props?H.props[s]:H.type.defaultProps[s],ot="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return Y===_&&(N||!ot)}),S,h,!0);if(S==="number")F=j2(d,F,_,a,O),U&&(F=s2(U,F,$));else if(S==="category"&&U){var L=U,G=F.every(function(H){return L.indexOf(H)>=0});G&&(F=L)}}return vt(vt({},v),{},Kt({},_,vt(vt({},w),{},{axisType:a,domain:F,categoricalDomain:B,duplicateDomain:M,originalDomain:(b=w.domain)!==null&&b!==void 0?b:j,isCategorical:g,layout:h})))},{})},Aft=function(t,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=t.layout,d=t.children,p=fb(t.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),g=p.length,v=YU(h,a),x=-1;return r.reduce(function(b,w){var S=w.type.defaultProps!==void 0?vt(vt({},w.type.defaultProps),w.props):w.props,T=S[s],$=rW("number");if(!b[T]){x++;var A;return v?A=Hy(0,g):o&&o[T]&&o[T].hasStack?(A=QU(o[T].stackGroups,l,c),A=j2(d,A,T,a)):(A=s2($,KU(p,r.filter(function(I){var O,N,_=s in I.props?I.props[s]:(O=I.type.defaultProps)===null||O===void 0?void 0:O[s],R="hide"in I.props?I.props.hide:(N=I.type.defaultProps)===null||N===void 0?void 0:N.hide;return _===T&&!R}),"number",h),i.defaultProps.allowDataOverflow),A=j2(d,A,T,a)),vt(vt({},b),{},Kt({},T,vt(vt({axisType:a},i.defaultProps),{},{hide:!0,orientation:Di(wft,"".concat(a,".").concat(x%2),null),domain:A,originalDomain:$,isCategorical:v,layout:h})))}return b},{})},kft=function(t,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=t.children,d="".concat(i,"Id"),p=Mi(h,a),g={};return p&&p.length?g=$ft(t,{axes:p,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(g=Aft(t,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),g},Ift=function(t){var n=no(t),r=us(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:KA(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Ly(n,r)}},ez=function(t){var n=t.children,r=t.defaultShowTooltip,i=li(n,Cc),a=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Eft=function(t){return!t||!t.length?!1:t.some(function(n){var r=fs(n&&n.type);return r&&r.indexOf("Bar")>=0})},nz=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Oft=function(t,n){var r=t.props,i=t.graphicalItems,a=t.xAxisMap,s=a===void 0?{}:a,o=t.yAxisMap,l=o===void 0?{}:o,c=r.width,h=r.height,d=r.children,p=r.margin||{},g=li(d,Cc),v=li(d,ec),x=Object.keys(l).reduce(function(A,I){var O=l[I],N=O.orientation;return!O.mirror&&!O.hide?vt(vt({},A),{},Kt({},N,A[N]+O.width)):A},{left:p.left||0,right:p.right||0}),b=Object.keys(s).reduce(function(A,I){var O=s[I],N=O.orientation;return!O.mirror&&!O.hide?vt(vt({},A),{},Kt({},N,Di(A,"".concat(N))+O.height)):A},{top:p.top||0,bottom:p.bottom||0}),w=vt(vt({},b),x),S=w.bottom;g&&(w.bottom+=g.props.height||Cc.defaultProps.height),v&&n&&(w=Nrt(w,i,r,n));var T=c-w.left-w.right,$=h-w.top-w.bottom;return vt(vt({brushBottom:S},w),{},{width:Math.max(T,0),height:Math.max($,0)})},Nft=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},iW=function(t){var n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,s=t.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=t.axisComponents,c=t.legendContent,h=t.formatAxisMap,d=t.defaultProps,p=function(w,S){var T=S.graphicalItems,$=S.stackGroups,A=S.offset,I=S.updateId,O=S.dataStartIndex,N=S.dataEndIndex,_=w.barSize,R=w.layout,E=w.barGap,F=w.barCategoryGap,M=w.maxBarSize,B=nz(R),j=B.numericAxisName,P=B.cateAxisName,U=Eft(T),W=[];return T.forEach(function(q,L){var G=fb(w.data,{graphicalItems:[q],dataStartIndex:O,dataEndIndex:N}),H=q.type.defaultProps!==void 0?vt(vt({},q.type.defaultProps),q.props):q.props,Y=H.dataKey,ot=H.maxBarSize,ht=H["".concat(j,"Id")],yt=H["".concat(P,"Id")],Nt={},At=l.reduce(function(mn,nn){var Fr=S["".concat(nn.axisType,"Map")],hr=H["".concat(nn.axisType,"Id")];Fr&&Fr[hr]||nn.axisType==="zAxis"||Tl();var Lr=Fr[hr];return vt(vt({},mn),{},Kt(Kt({},nn.axisType,Lr),"".concat(nn.axisType,"Ticks"),us(Lr)))},Nt),mt=At[P],kt=At["".concat(P,"Ticks")],It=$&&$[ht]&&$[ht].hasStack&&Grt(q,$[ht].stackGroups),gt=fs(q.type).indexOf("Bar")>=0,Vt=Ly(mt,kt),Lt=[],Zt=U&&Ert({barSize:_,stackGroups:$,totalSize:Nft(At,P)});if(gt){var Wt,Ht,de=ce(ot)?M:ot,Nn=(Wt=(Ht=Ly(mt,kt,!0))!==null&&Ht!==void 0?Ht:de)!==null&&Wt!==void 0?Wt:0;Lt=Ort({barGap:E,barCategoryGap:F,bandSize:Nn!==Vt?Nn:Vt,sizeList:Zt[yt],maxBarSize:de}),Nn!==Vt&&(Lt=Lt.map(function(mn){return vt(vt({},mn),{},{position:vt(vt({},mn.position),{},{offset:mn.position.offset-Nn/2})})}))}var We=q&&q.type&&q.type.getComposedData;We&&W.push({props:vt(vt({},We(vt(vt({},At),{},{displayedData:G,props:w,dataKey:Y,item:q,bandSize:Vt,barPosition:Lt,offset:A,stackedData:It,layout:R,dataStartIndex:O,dataEndIndex:N}))),{},Kt(Kt(Kt({key:q.key||"item-".concat(L)},j,At[j]),P,At[P]),"animationId",I)),childIndex:O9(q,w.children),item:q})}),W},g=function(w,S){var T=w.props,$=w.dataStartIndex,A=w.dataEndIndex,I=w.updateId;if(!CM({props:T}))return null;var O=T.children,N=T.layout,_=T.stackOffset,R=T.data,E=T.reverseStackOrder,F=nz(N),M=F.numericAxisName,B=F.cateAxisName,j=Mi(O,r),P=Urt(R,j,"".concat(M,"Id"),"".concat(B,"Id"),_,E),U=l.reduce(function(H,Y){var ot="".concat(Y.axisType,"Map");return vt(vt({},H),{},Kt({},ot,kft(T,vt(vt({},Y),{},{graphicalItems:j,stackGroups:Y.axisType===M&&P,dataStartIndex:$,dataEndIndex:A}))))},{}),W=Oft(vt(vt({},U),{},{props:T,graphicalItems:j}),S==null?void 0:S.legendBBox);Object.keys(U).forEach(function(H){U[H]=h(T,U[H],W,H.replace("Map",""),n)});var q=U["".concat(B,"Map")],L=Ift(q),G=p(T,vt(vt({},U),{},{dataStartIndex:$,dataEndIndex:A,updateId:I,graphicalItems:j,stackGroups:P,offset:W}));return vt(vt({formattedGraphicalItems:G,graphicalItems:j,offset:W,stackGroups:P},L),U)},v=function(b){function w(S){var T,$,A;return cft(this,w),A=dft(this,w,[S]),Kt(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Kt(A,"accessibilityManager",new Yct),Kt(A,"handleLegendBBoxUpdate",function(I){if(I){var O=A.state,N=O.dataStartIndex,_=O.dataEndIndex,R=O.updateId;A.setState(vt({legendBBox:I},g({props:A.props,dataStartIndex:N,dataEndIndex:_,updateId:R},vt(vt({},A.state),{},{legendBBox:I}))))}}),Kt(A,"handleReceiveSyncEvent",function(I,O,N){if(A.props.syncId===I){if(N===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(O)}}),Kt(A,"handleBrushChange",function(I){var O=I.startIndex,N=I.endIndex;if(O!==A.state.dataStartIndex||N!==A.state.dataEndIndex){var _=A.state.updateId;A.setState(function(){return vt({dataStartIndex:O,dataEndIndex:N},g({props:A.props,dataStartIndex:O,dataEndIndex:N,updateId:_},A.state))}),A.triggerSyncEvent({dataStartIndex:O,dataEndIndex:N})}}),Kt(A,"handleMouseEnter",function(I){var O=A.getMouseInfo(I);if(O){var N=vt(vt({},O),{},{isTooltipActive:!0});A.setState(N),A.triggerSyncEvent(N);var _=A.props.onMouseEnter;te(_)&&_(N,I)}}),Kt(A,"triggeredAfterMouseMove",function(I){var O=A.getMouseInfo(I),N=O?vt(vt({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(N),A.triggerSyncEvent(N);var _=A.props.onMouseMove;te(_)&&_(N,I)}),Kt(A,"handleItemMouseEnter",function(I){A.setState(function(){return{isTooltipActive:!0,activeItem:I,activePayload:I.tooltipPayload,activeCoordinate:I.tooltipPosition||{x:I.cx,y:I.cy}}})}),Kt(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),Kt(A,"handleMouseMove",function(I){I.persist(),A.throttleTriggeredAfterMouseMove(I)}),Kt(A,"handleMouseLeave",function(I){A.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};A.setState(O),A.triggerSyncEvent(O);var N=A.props.onMouseLeave;te(N)&&N(O,I)}),Kt(A,"handleOuterEvent",function(I){var O=E9(I),N=Di(A.props,"".concat(O));if(O&&te(N)){var _,R;/.*touch.*/i.test(O)?R=A.getMouseInfo(I.changedTouches[0]):R=A.getMouseInfo(I),N((_=R)!==null&&_!==void 0?_:{},I)}}),Kt(A,"handleClick",function(I){var O=A.getMouseInfo(I);if(O){var N=vt(vt({},O),{},{isTooltipActive:!0});A.setState(N),A.triggerSyncEvent(N);var _=A.props.onClick;te(_)&&_(N,I)}}),Kt(A,"handleMouseDown",function(I){var O=A.props.onMouseDown;if(te(O)){var N=A.getMouseInfo(I);O(N,I)}}),Kt(A,"handleMouseUp",function(I){var O=A.props.onMouseUp;if(te(O)){var N=A.getMouseInfo(I);O(N,I)}}),Kt(A,"handleTouchMove",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(I.changedTouches[0])}),Kt(A,"handleTouchStart",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&A.handleMouseDown(I.changedTouches[0])}),Kt(A,"handleTouchEnd",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&A.handleMouseUp(I.changedTouches[0])}),Kt(A,"handleDoubleClick",function(I){var O=A.props.onDoubleClick;if(te(O)){var N=A.getMouseInfo(I);O(N,I)}}),Kt(A,"handleContextMenu",function(I){var O=A.props.onContextMenu;if(te(O)){var N=A.getMouseInfo(I);O(N,I)}}),Kt(A,"triggerSyncEvent",function(I){A.props.syncId!==void 0&&r$.emit(i$,A.props.syncId,I,A.eventEmitterSymbol)}),Kt(A,"applySyncEvent",function(I){var O=A.props,N=O.layout,_=O.syncMethod,R=A.state.updateId,E=I.dataStartIndex,F=I.dataEndIndex;if(I.dataStartIndex!==void 0||I.dataEndIndex!==void 0)A.setState(vt({dataStartIndex:E,dataEndIndex:F},g({props:A.props,dataStartIndex:E,dataEndIndex:F,updateId:R},A.state)));else if(I.activeTooltipIndex!==void 0){var M=I.chartX,B=I.chartY,j=I.activeTooltipIndex,P=A.state,U=P.offset,W=P.tooltipTicks;if(!U)return;if(typeof _=="function")j=_(W,I);else if(_==="value"){j=-1;for(var q=0;q<W.length;q++)if(W[q].value===I.activeLabel){j=q;break}}var L=vt(vt({},U),{},{x:U.left,y:U.top}),G=Math.min(M,L.x+L.width),H=Math.min(B,L.y+L.height),Y=W[j]&&W[j].value,ot=W2(A.state,A.props.data,j),ht=W[j]?{x:N==="horizontal"?W[j].coordinate:G,y:N==="horizontal"?H:W[j].coordinate}:nW;A.setState(vt(vt({},I),{},{activeLabel:Y,activeCoordinate:ht,activePayload:ot,activeTooltipIndex:j}))}else A.setState(I)}),Kt(A,"renderCursor",function(I){var O,N=A.state,_=N.isTooltipActive,R=N.activeCoordinate,E=N.activePayload,F=N.offset,M=N.activeTooltipIndex,B=N.tooltipAxisBandSize,j=A.getTooltipEventType(),P=(O=I.props.active)!==null&&O!==void 0?O:_,U=A.props.layout,W=I.key||"_recharts-cursor";return Z.createElement(rft,{key:W,activeCoordinate:R,activePayload:E,activeTooltipIndex:M,chartName:n,element:I,isActive:P,layout:U,offset:F,tooltipAxisBandSize:B,tooltipEventType:j})}),Kt(A,"renderPolarAxis",function(I,O,N){var _=Di(I,"type.axisType"),R=Di(A.state,"".concat(_,"Map")),E=I.type.defaultProps,F=E!==void 0?vt(vt({},E),I.props):I.props,M=R&&R[F["".concat(_,"Id")]];return Tt.cloneElement(I,vt(vt({},M),{},{className:ve(_,M.className),key:I.key||"".concat(O,"-").concat(N),ticks:us(M,!0)}))}),Kt(A,"renderPolarGrid",function(I){var O=I.props,N=O.radialLines,_=O.polarAngles,R=O.polarRadius,E=A.state,F=E.radiusAxisMap,M=E.angleAxisMap,B=no(F),j=no(M),P=j.cx,U=j.cy,W=j.innerRadius,q=j.outerRadius;return Tt.cloneElement(I,{polarAngles:Array.isArray(_)?_:us(j,!0).map(function(L){return L.coordinate}),polarRadius:Array.isArray(R)?R:us(B,!0).map(function(L){return L.coordinate}),cx:P,cy:U,innerRadius:W,outerRadius:q,key:I.key||"polar-grid",radialLines:N})}),Kt(A,"renderLegend",function(){var I=A.state.formattedGraphicalItems,O=A.props,N=O.children,_=O.width,R=O.height,E=A.props.margin||{},F=_-(E.left||0)-(E.right||0),M=HU({children:N,formattedGraphicalItems:I,legendWidth:F,legendContent:c});if(!M)return null;var B=M.item,j=QB(M,ift);return Tt.cloneElement(B,vt(vt({},j),{},{chartWidth:_,chartHeight:R,margin:E,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),Kt(A,"renderTooltip",function(){var I,O=A.props,N=O.children,_=O.accessibilityLayer,R=li(N,Yi);if(!R)return null;var E=A.state,F=E.isTooltipActive,M=E.activeCoordinate,B=E.activePayload,j=E.activeLabel,P=E.offset,U=(I=R.props.active)!==null&&I!==void 0?I:F;return Tt.cloneElement(R,{viewBox:vt(vt({},P),{},{x:P.left,y:P.top}),active:U,label:j,payload:U?B:[],coordinate:M,accessibilityLayer:_})}),Kt(A,"renderBrush",function(I){var O=A.props,N=O.margin,_=O.data,R=A.state,E=R.offset,F=R.dataStartIndex,M=R.dataEndIndex,B=R.updateId;return Tt.cloneElement(I,{key:I.key||"_recharts-brush",onChange:Pg(A.handleBrushChange,I.props.onChange),data:_,x:Et(I.props.x)?I.props.x:E.left,y:Et(I.props.y)?I.props.y:E.top+E.height+E.brushBottom-(N.bottom||0),width:Et(I.props.width)?I.props.width:E.width,startIndex:F,endIndex:M,updateId:"brush-".concat(B)})}),Kt(A,"renderReferenceElement",function(I,O,N){if(!I)return null;var _=A,R=_.clipPathId,E=A.state,F=E.xAxisMap,M=E.yAxisMap,B=E.offset,j=I.type.defaultProps||{},P=I.props,U=P.xAxisId,W=U===void 0?j.xAxisId:U,q=P.yAxisId,L=q===void 0?j.yAxisId:q;return Tt.cloneElement(I,{key:I.key||"".concat(O,"-").concat(N),xAxis:F[W],yAxis:M[L],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:R})}),Kt(A,"renderActivePoints",function(I){var O=I.item,N=I.activePoint,_=I.basePoint,R=I.childIndex,E=I.isRange,F=[],M=O.props.key,B=O.item.type.defaultProps!==void 0?vt(vt({},O.item.type.defaultProps),O.item.props):O.item.props,j=B.activeDot,P=B.dataKey,U=vt(vt({index:R,dataKey:P,cx:N.x,cy:N.y,r:4,fill:wk(O.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},re(j,!1)),fy(j));return F.push(w.renderActiveDot(j,U,"".concat(M,"-activePoint-").concat(R))),_?F.push(w.renderActiveDot(j,vt(vt({},U),{},{cx:_.x,cy:_.y}),"".concat(M,"-basePoint-").concat(R))):E&&F.push(null),F}),Kt(A,"renderGraphicChild",function(I,O,N){var _=A.filterFormatItem(I,O,N);if(!_)return null;var R=A.getTooltipEventType(),E=A.state,F=E.isTooltipActive,M=E.tooltipAxis,B=E.activeTooltipIndex,j=E.activeLabel,P=A.props.children,U=li(P,Yi),W=_.props,q=W.points,L=W.isRange,G=W.baseLine,H=_.item.type.defaultProps!==void 0?vt(vt({},_.item.type.defaultProps),_.item.props):_.item.props,Y=H.activeDot,ot=H.hide,ht=H.activeBar,yt=H.activeShape,Nt=!!(!ot&&F&&U&&(Y||ht||yt)),At={};R!=="axis"&&U&&U.props.trigger==="click"?At={onClick:Pg(A.handleItemMouseEnter,I.props.onClick)}:R!=="axis"&&(At={onMouseLeave:Pg(A.handleItemMouseLeave,I.props.onMouseLeave),onMouseEnter:Pg(A.handleItemMouseEnter,I.props.onMouseEnter)});var mt=Tt.cloneElement(I,vt(vt({},_.props),At));function kt(nn){return typeof M.dataKey=="function"?M.dataKey(nn.payload):null}if(Nt)if(B>=0){var It,gt;if(M.dataKey&&!M.allowDuplicatedCategory){var Vt=typeof M.dataKey=="function"?kt:"payload.".concat(M.dataKey.toString());It=cy(q,Vt,j),gt=L&&G&&cy(G,Vt,j)}else It=q==null?void 0:q[B],gt=L&&G&&G[B];if(yt||ht){var Lt=I.props.activeIndex!==void 0?I.props.activeIndex:B;return[Tt.cloneElement(I,vt(vt(vt({},_.props),At),{},{activeIndex:Lt})),null,null]}if(!ce(It))return[mt].concat(Fc(A.renderActivePoints({item:_,activePoint:It,basePoint:gt,childIndex:B,isRange:L})))}else{var Zt,Wt=(Zt=A.getItemByXY(A.state.activeCoordinate))!==null&&Zt!==void 0?Zt:{graphicalItem:mt},Ht=Wt.graphicalItem,de=Ht.item,Nn=de===void 0?I:de,We=Ht.childIndex,mn=vt(vt(vt({},_.props),At),{},{activeIndex:We});return[Tt.cloneElement(Nn,mn),null,null]}return L?[mt,null,null]:[mt,null]}),Kt(A,"renderCustomized",function(I,O,N){return Tt.cloneElement(I,vt(vt({key:"recharts-customized-".concat(N)},A.props),A.state))}),Kt(A,"renderMap",{CartesianGrid:{handler:jg,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:jg},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:jg},YAxis:{handler:jg},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((T=S.id)!==null&&T!==void 0?T:Jc("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=qj(A.triggeredAfterMouseMove,($=S.throttleDelay)!==null&&$!==void 0?$:1e3/60),A.state={},A}return gft(w,b),hft(w,[{key:"componentDidMount",value:function(){var T,$;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:($=this.props.margin.top)!==null&&$!==void 0?$:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,$=T.children,A=T.data,I=T.height,O=T.layout,N=li($,Yi);if(N){var _=N.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,E=W2(this.state,A,_,R),F=this.state.tooltipTicks[_].coordinate,M=(this.state.offset.top+I)/2,B=O==="horizontal",j=B?{x:F,y:M}:{y:F,x:M},P=this.state.formattedGraphicalItems.find(function(W){var q=W.item;return q.type.name==="Scatter"});P&&(j=vt(vt({},j),P.props.points[_].tooltipPosition),E=P.props.points[_].tooltipPayload);var U={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:R,activePayload:E,activeCoordinate:j};this.setState(U),this.renderCursor(N),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,$){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==$.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var A,I;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(I=this.props.margin.top)!==null&&I!==void 0?I:0}})}return null}},{key:"componentDidUpdate",value:function(T){I$([li(T.children,Yi)],[li(this.props.children,Yi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=li(this.props.children,Yi);if(T&&typeof T.props.shared=="boolean"){var $=T.props.shared?"axis":"item";return o.indexOf($)>=0?$:a}return a}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var $=this.container,A=$.getBoundingClientRect(),I=gJ(A),O={chartX:Math.round(T.pageX-I.left),chartY:Math.round(T.pageY-I.top)},N=A.width/$.offsetWidth||1,_=this.inRange(O.chartX,O.chartY,N);if(!_)return null;var R=this.state,E=R.xAxisMap,F=R.yAxisMap,M=this.getTooltipEventType(),B=tz(this.state,this.props.data,this.props.layout,_);if(M!=="axis"&&E&&F){var j=no(E).scale,P=no(F).scale,U=j&&j.invert?j.invert(O.chartX):null,W=P&&P.invert?P.invert(O.chartY):null;return vt(vt({},O),{},{xValue:U,yValue:W},B)}return B?vt(vt({},O),B):null}},{key:"inRange",value:function(T,$){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,I=this.props.layout,O=T/A,N=$/A;if(I==="horizontal"||I==="vertical"){var _=this.state.offset,R=O>=_.left&&O<=_.left+_.width&&N>=_.top&&N<=_.top+_.height;return R?{x:O,y:N}:null}var E=this.state,F=E.angleAxisMap,M=E.radiusAxisMap;if(F&&M){var B=no(F);return hL({x:O,y:N},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,$=this.getTooltipEventType(),A=li(T,Yi),I={};A&&$==="axis"&&(A.props.trigger==="click"?I={onClick:this.handleClick}:I={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=fy(this.props,this.handleOuterEvent);return vt(vt({},O),I)}},{key:"addListener",value:function(){r$.on(i$,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){r$.removeListener(i$,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,$,A){for(var I=this.state.formattedGraphicalItems,O=0,N=I.length;O<N;O++){var _=I[O];if(_.item===T||_.props.key===T.key||$===fs(_.item.type)&&A===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,$=this.state.offset,A=$.left,I=$.top,O=$.height,N=$.width;return Z.createElement("defs",null,Z.createElement("clipPath",{id:T},Z.createElement("rect",{x:A,y:I,height:O,width:N})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function($,A){var I=ZB(A,2),O=I[0],N=I[1];return vt(vt({},$),{},Kt({},O,N.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function($,A){var I=ZB(A,2),O=I[0],N=I[1];return vt(vt({},$),{},Kt({},O,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var $;return($=this.state.xAxisMap)===null||$===void 0||($=$[T])===null||$===void 0?void 0:$.scale}},{key:"getYScaleByAxisId",value:function(T){var $;return($=this.state.yAxisMap)===null||$===void 0||($=$[T])===null||$===void 0?void 0:$.scale}},{key:"getItemByXY",value:function(T){var $=this.state,A=$.formattedGraphicalItems,I=$.activeItem;if(A&&A.length)for(var O=0,N=A.length;O<N;O++){var _=A[O],R=_.props,E=_.item,F=E.type.defaultProps!==void 0?vt(vt({},E.type.defaultProps),E.props):E.props,M=fs(E.type);if(M==="Bar"){var B=(R.data||[]).find(function(W){return Mst(T,W)});if(B)return{graphicalItem:_,payload:B}}else if(M==="RadialBar"){var j=(R.data||[]).find(function(W){return hL(T,W)});if(j)return{graphicalItem:_,payload:j}}else if(ib(_,I)||ab(_,I)||Ad(_,I)){var P=$ot({graphicalItem:_,activeTooltipItem:I,itemData:F.data}),U=F.activeIndex===void 0?P:F.activeIndex;return{graphicalItem:vt(vt({},_),{},{childIndex:U}),payload:Ad(_,I)?F.data[P]:_.props.data[P]}}}return null}},{key:"render",value:function(){var T=this;if(!CM(this))return null;var $=this.props,A=$.children,I=$.className,O=$.width,N=$.height,_=$.style,R=$.compact,E=$.title,F=$.desc,M=QB($,aft),B=re(M,!1);if(R)return Z.createElement(OB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Z.createElement(O$,Ju({},B,{width:O,height:N,title:E,desc:F}),this.renderClipPath(),$M(A,this.renderMap)));if(this.props.accessibilityLayer){var j,P;B.tabIndex=(j=this.props.tabIndex)!==null&&j!==void 0?j:0,B.role=(P=this.props.role)!==null&&P!==void 0?P:"application",B.onKeyDown=function(W){T.accessibilityManager.keyboardEvent(W)},B.onFocus=function(){T.accessibilityManager.focus()}}var U=this.parseEventsOfWrapper();return Z.createElement(OB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Z.createElement("div",Ju({className:ve("recharts-wrapper",I),style:vt({position:"relative",cursor:"default",width:O,height:N},_)},U,{ref:function(q){T.container=q}}),Z.createElement(O$,Ju({},B,{width:O,height:N,title:E,desc:F,style:Sft}),this.renderClipPath(),$M(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(Tt.Component);Kt(v,"displayName",n),Kt(v,"defaultProps",vt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Kt(v,"getDerivedStateFromProps",function(b,w){var S=b.dataKey,T=b.data,$=b.children,A=b.width,I=b.height,O=b.layout,N=b.stackOffset,_=b.margin,R=w.dataStartIndex,E=w.dataEndIndex;if(w.updateId===void 0){var F=ez(b);return vt(vt(vt({},F),{},{updateId:0},g(vt(vt({props:b},F),{},{updateId:0}),w)),{},{prevDataKey:S,prevData:T,prevWidth:A,prevHeight:I,prevLayout:O,prevStackOffset:N,prevMargin:_,prevChildren:$})}if(S!==w.prevDataKey||T!==w.prevData||A!==w.prevWidth||I!==w.prevHeight||O!==w.prevLayout||N!==w.prevStackOffset||!tc(_,w.prevMargin)){var M=ez(b),B={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},j=vt(vt({},tz(w,T,O)),{},{updateId:w.updateId+1}),P=vt(vt(vt({},M),B),j);return vt(vt(vt({},P),g(vt({props:b},P),w)),{},{prevDataKey:S,prevData:T,prevWidth:A,prevHeight:I,prevLayout:O,prevStackOffset:N,prevMargin:_,prevChildren:$})}if(!I$($,w.prevChildren)){var U,W,q,L,G=li($,Cc),H=G&&(U=(W=G.props)===null||W===void 0?void 0:W.startIndex)!==null&&U!==void 0?U:R,Y=G&&(q=(L=G.props)===null||L===void 0?void 0:L.endIndex)!==null&&q!==void 0?q:E,ot=H!==R||Y!==E,ht=!ce(T),yt=ht&&!ot?w.updateId:w.updateId+1;return vt(vt({updateId:yt},g(vt(vt({props:b},w),{},{updateId:yt,dataStartIndex:H,dataEndIndex:Y}),w)),{},{prevChildren:$,dataStartIndex:H,dataEndIndex:Y})}return null}),Kt(v,"renderActiveDot",function(b,w,S){var T;return Tt.isValidElement(b)?T=Tt.cloneElement(b,w):te(b)?T=b(w):T=Z.createElement(rb,w),Z.createElement(He,{className:"recharts-active-dot",key:S},T)});var x=Tt.forwardRef(function(w,S){return Z.createElement(v,Ju({},w,{ref:S}))});return x.displayName=v.displayName,x},_ft=iW({chartName:"LineChart",GraphicalChild:Oc,axisComponents:[{axisType:"xAxis",AxisComp:Rc},{axisType:"yAxis",AxisComp:Mc}],formatAxisMap:bV}),Rft=iW({chartName:"AreaChart",GraphicalChild:Ao,axisComponents:[{axisType:"xAxis",AxisComp:Rc},{axisType:"yAxis",AxisComp:Mc}],formatAxisMap:bV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dft=1e-7,Mft=1e-4;class aW{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class _k{refCount(t){return Gr("refCount")}incRef(t){return Gr("incRef")}timerAvailable(){return!0}time(t){return Gr("time")}read(t){return Gr("read")}readSync(t){return Gr("readSync")}readToGPU(t,n){return Gr("readToGPU")}numDataIds(){return Gr("numDataIds")}disposeData(t,n){return Gr("disposeData")}write(t,n,r){return Gr("write")}move(t,n,r,i,a){return Gr("move")}createTensorFromGPUData(t,n,r){return Gr("createTensorFromGPUData")}memory(){return Gr("memory")}floatPrecision(){return Gr("floatPrecision")}epsilon(){return this.floatPrecision()===32?Dft:Mft}dispose(){return Gr("dispose")}}function Gr(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pft(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Xu(e,t,n)}function Al(e,t,n){return Math.max(e,Math.min(t,n))}function Rk(e){return e%2===0?e:e+1}function Xu(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Fft(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function V(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Dk(e,t,n=""){V(Te(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function sW(e){V(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function pt(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function Te(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Lc(e){return e%1===0}function G2(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function ac(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function rz(e,t=i=>0,n,r){return new Promise((i,a)=>{let s=0;const o=()=>{if(e()){i();return}s++;const l=t(s);if(n!=null&&s>=n){a();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function oW(e,t){let n=1,r=-1;for(let a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(e[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(e[a]<0)throw Error(`Shapes can not be < 0. Found ${e[a]} at dim ${a}`);if(r===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const i=e.slice();return i[r]=t/n,i}function ae(e,t){const n=t.length;return e=e==null?t.map((r,i)=>i):[].concat(e),V(e.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),V(e.every(r=>Lc(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?n+r:r)}function ko(e,t){const n=[],r=[],i=t!=null&&Array.isArray(t)&&t.length===0,a=t==null||i?null:ae(t,e).sort();let s=0;for(let o=0;o<e.length;++o){if(a!=null){if(a[s]===o&&e[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${e[o]}' is not 1`);(a[s]==null||a[s]>o)&&e[o]===1&&(n.push(e[o]),r.push(o)),a[s]<=o&&s++}e[o]!==1&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function sr(e,t){return un(e,t)}function un(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function Lft(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function Bft(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function lW(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function lv(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function zft(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function Jd(e){return typeof e=="string"||e instanceof String}function jft(e){return typeof e=="boolean"}function q2(e){return typeof e=="number"}function sf(e){return Array.isArray(e)?sf(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":q2(e)?"float32":Jd(e)?"string":jft(e)?"bool":"float32"}function H2(e){return!!(e&&e.constructor&&e.call&&e.apply)}function X2(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Bt(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function uW(e,t,n,r=!1){const i=new Array;if(t.length===1){const a=t[0]*(r?2:1);for(let s=0;s<a;s++)i[s]=n[e+s]}else{const a=t[0],s=t.slice(1),o=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<a;l++)i[l]=uW(e+l*o,s,n,r)}return i}function ia(e,t,n=!1){if(e.length===0)return t[0];const r=e.reduce((i,a)=>i*a)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return uW(0,e,t,n)}function Uft(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function Mk(e,t){const n=or(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function or(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function cW(e,t){const n=e.reduce((r,i)=>r*i,1);if(t==null||t==="float32")return ia(e,new Float32Array(n));if(t==="int32")return ia(e,new Int32Array(n));if(t==="bool")return ia(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function As(e){e.forEach(t=>{V(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function ka(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function of(e,t,n){if(t===0)return[];if(t===1)return[e];const r=new Array(t);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}function Pk(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iz="tfjsflags";class Vft{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Wft,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(ct().getBool("IS_TEST")||ct().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){const i=this.urlFlags[t];ct().getBool("IS_TEST")||ct().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${i}.`),this.set(t,i)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const n=this.evaluateFlag(t);if(Pk(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=this.getQueryParams(this.global.location.search);iz in t&&t[iz].split(",").forEach(r=>{const[i,a]=r.split(":");this.urlFlags[i]=qft(i,a)})}}function Wft(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Gft(t,r[0],r[1]),r.join("="))),t}function Gft(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function qft(e,t){const n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function ct(){return fW}let fW=null;function Hft(e){fW=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let s$;function hW(){if(s$==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");s$=e}return s$}function Xft(){const e=hW();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function Fk(e,t){const n=Xft();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const hb="Abs",tp="Acos",ep="Acosh",lf="Add",Lk="AddN",Bk="All",zk="Any",db="ArgMax",pb="ArgMin",np="Asin",rp="Asinh",ip="Atan",ap="Atanh",sp="Atan2",mb="AvgPool",jk="AvgPoolGrad",gb="AvgPool3D",Uk="AvgPool3DGrad",yb="BatchMatMul",vb="BatchToSpaceND",Vk="Bincount",Wk="BitwiseAnd",Kft="BroadcastTo",dW="BroadcastArgs",op="Cast",lp="Ceil",up="ClipByValue",Gk="Complex",bb="ComplexAbs",xb="Concat",wb="Conv2D",qk="Conv2DBackpropFilter",Sb="Conv2DBackpropInput",Cb="Conv3D",Hk="Conv3DBackpropFilterV2",Xk="Conv3DBackpropInputV2",cp="Cos",fp="Cosh",Kk="Cumprod",Tb="Cumsum",Yk="CropAndResize",Zk="DenseBincount",Qk="DepthToSpace",$b="DepthwiseConv2dNative",Jk="DepthwiseConv2dNativeBackpropFilter",tI="DepthwiseConv2dNativeBackpropInput",pW="Diag",Ab="Dilation2D",K2="Dilation2DBackpropInput",Y2="Dilation2DBackpropFilter",Yft="Draw",hp="RealDiv",eI="Einsum",dp="Elu",nI="EluGrad",pp="Erf",kb="Equal",mp="Exp",Ib="ExpandDims",gp="Expm1",rI="FFT",iI="Fill",aI="FlipLeftRight",yp="Floor",vp="FloorDiv",Eb="FusedBatchNorm",Ob="GatherV2",mW="GatherNd",Nb="Greater",bp="GreaterEqual",xp="Identity",sI="IFFT",oI="Imag",wp="IsFinite",Sp="IsInf",Cp="IsNan",_b="LeakyRelu",Rb="Less",Db="LessEqual",gW="LinSpace",Tp="Log",$p="Log1p",Mb="LogicalAnd",Pb="LogicalNot",Fb="LogicalOr",Zft="LogSoftmax",Lb="LRN",lI="LRNGrad",Bb="Max",Ap="Maximum",zb="MaxPool",uI="MaxPoolGrad",jb="MaxPool3D",cI="MaxPool3DGrad",yW="MaxPoolWithArgmax",Ub="Mean",Vb="Min",kp="Minimum",Wb="MirrorPad",Ip="Mod",vW="Multinomial",Ep="Multiply",Gb="Neg",qb="NotEqual",fI="NonMaxSuppressionV3",hI="NonMaxSuppressionV4",dI="NonMaxSuppressionV5",Hb="OnesLike",Xb="OneHot",Kb="Pack",Yb="PadV2",Op="Pow",Zb="Prelu",Qb="Prod",bW="RaggedGather",xW="RaggedRange",wW="RaggedTensorToTensor",pI="Range",mI="Real",Np="Reciprocal",_p="Relu",Jb="Reshape",t0="ResizeNearestNeighbor",gI="ResizeNearestNeighborGrad",e0="ResizeBilinear",yI="ResizeBilinearGrad",Rp="Relu6",n0="Reverse",Dp="Round",Mp="Rsqrt",SW="ScatterNd",CW="TensorScatterUpdate",TW="SearchSorted",r0="Select",Pp="Selu",i0="Slice",Fp="Sin",Lp="Sinh",Bp="Sign",zp="Sigmoid",jp="Softplus",Up="Sqrt",a0="Sum",s0="SpaceToBatchND",o0="SplitV",l0="Softmax",$W="SparseFillEmptyRows",AW="SparseReshape",kW="SparseSegmentMean",IW="SparseSegmentSum",EW="SparseToDense",Vp="SquaredDifference",vI="Square",bI="StaticRegexReplace",xI="StridedSlice",OW="StringNGrams",NW="StringSplit",_W="StringToHashBucketFast",Wp="Sub",Gp="Tan",qp="Tanh",Hp="Tile",wI="TopK",SI="Transform",sc="Transpose",CI="Unique",u0="Unpack",c0="UnsortedSegmentSum",f0="ZerosLike",Xp="Step",Qft="FromPixels",TI="RotateWithOffset",uv="_FusedMatMul",cv="FusedConv2D",RW="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ci(...e){ct().getBool("IS_TEST")||ct().getBool("PROD")||console.warn(...e)}function Jft(...e){ct().getBool("IS_TEST")||ct().getBool("PROD")||console.log(...e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fv=Fk("kernelRegistry",()=>new Map),Z2=Fk("gradRegistry",()=>new Map);function az(e,t){const n=MW(e,t);return fv.get(n)}function sz(e){return Z2.get(e)}function oz(e){const t=fv.entries(),n=[];for(;;){const{done:r,value:i}=t.next();if(r)break;const[a,s]=i,[o]=a.split("_");o===e&&n.push(s)}return n}function DW(e){const{kernelName:t,backendName:n}=e,r=MW(t,n);fv.has(r)&&ci(`The kernel '${t}' for backend '${n}' is already registered`),fv.set(r,e)}function tht(e){const{kernelName:t}=e;Z2.has(t)&&ct().getBool("DEBUG")&&ci(`Overriding the gradient for '${t}'`),Z2.set(t,e)}function MW(e,t){return`${t}_${e}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PW(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var o$,lz;function eht(){if(lz)return o$;lz=1,o$=t;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(R,E,F){this.low=R|0,this.high=E|0,this.unsigned=!!F}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0});function n(R){return(R&&R.__isLong__)===!0}t.isLong=n;var r={},i={};function a(R,E){var F,M,B;return E?(R>>>=0,(B=0<=R&&R<256)&&(M=i[R],M)?M:(F=o(R,(R|0)<0?-1:0,!0),B&&(i[R]=F),F)):(R|=0,(B=-128<=R&&R<128)&&(M=r[R],M)?M:(F=o(R,R<0?-1:0,!1),B&&(r[R]=F),F))}t.fromInt=a;function s(R,E){if(isNaN(R))return E?S:w;if(E){if(R<0)return S;if(R>=v)return O}else{if(R<=-9223372036854776e3)return N;if(R+1>=x)return I}return R<0?s(-R,E).neg():o(R%g|0,R/g|0,E)}t.fromNumber=s;function o(R,E,F){return new t(R,E,F)}t.fromBits=o;var l=Math.pow;function c(R,E,F){if(R.length===0)throw Error("empty string");if(R==="NaN"||R==="Infinity"||R==="+Infinity"||R==="-Infinity")return w;if(typeof E=="number"?(F=E,E=!1):E=!!E,F=F||10,F<2||36<F)throw RangeError("radix");var M;if((M=R.indexOf("-"))>0)throw Error("interior hyphen");if(M===0)return c(R.substring(1),E,F).neg();for(var B=s(l(F,8)),j=w,P=0;P<R.length;P+=8){var U=Math.min(8,R.length-P),W=parseInt(R.substring(P,P+U),F);if(U<8){var q=s(l(F,U));j=j.mul(q).add(s(W))}else j=j.mul(B),j=j.add(s(W))}return j.unsigned=E,j}t.fromString=c;function h(R,E){return typeof R=="number"?s(R,E):typeof R=="string"?c(R,E):o(R.low,R.high,typeof E=="boolean"?E:R.unsigned)}t.fromValue=h;var d=65536,p=1<<24,g=d*d,v=g*g,x=v/2,b=a(p),w=a(0);t.ZERO=w;var S=a(0,!0);t.UZERO=S;var T=a(1);t.ONE=T;var $=a(1,!0);t.UONE=$;var A=a(-1);t.NEG_ONE=A;var I=o(-1,2147483647,!1);t.MAX_VALUE=I;var O=o(-1,-1,!0);t.MAX_UNSIGNED_VALUE=O;var N=o(0,-2147483648,!1);t.MIN_VALUE=N;var _=t.prototype;return _.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},_.toString=function(E){if(E=E||10,E<2||36<E)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(N)){var F=s(E),M=this.div(F),B=M.mul(F).sub(this);return M.toString(E)+B.toInt().toString(E)}else return"-"+this.neg().toString(E);for(var j=s(l(E,6),this.unsigned),P=this,U="";;){var W=P.div(j),q=P.sub(W.mul(j)).toInt()>>>0,L=q.toString(E);if(P=W,P.isZero())return L+U;for(;L.length<6;)L="0"+L;U=""+L+U}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(N)?64:this.neg().getNumBitsAbs();for(var E=this.high!=0?this.high:this.low,F=31;F>0&&(E&1<<F)==0;F--);return this.high!=0?F+33:F+1},_.isZero=function(){return this.high===0&&this.low===0},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return(this.low&1)===1},_.isEven=function(){return(this.low&1)===0},_.equals=function(E){return n(E)||(E=h(E)),this.unsigned!==E.unsigned&&this.high>>>31===1&&E.high>>>31===1?!1:this.high===E.high&&this.low===E.low},_.eq=_.equals,_.notEquals=function(E){return!this.eq(E)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(E){return this.comp(E)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(E){return this.comp(E)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(E){return this.comp(E)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(E){return this.comp(E)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(E){if(n(E)||(E=h(E)),this.eq(E))return 0;var F=this.isNegative(),M=E.isNegative();return F&&!M?-1:!F&&M?1:this.unsigned?E.high>>>0>this.high>>>0||E.high===this.high&&E.low>>>0>this.low>>>0?-1:1:this.sub(E).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(N)?N:this.not().add(T)},_.neg=_.negate,_.add=function(E){n(E)||(E=h(E));var F=this.high>>>16,M=this.high&65535,B=this.low>>>16,j=this.low&65535,P=E.high>>>16,U=E.high&65535,W=E.low>>>16,q=E.low&65535,L=0,G=0,H=0,Y=0;return Y+=j+q,H+=Y>>>16,Y&=65535,H+=B+W,G+=H>>>16,H&=65535,G+=M+U,L+=G>>>16,G&=65535,L+=F+P,L&=65535,o(H<<16|Y,L<<16|G,this.unsigned)},_.subtract=function(E){return n(E)||(E=h(E)),this.add(E.neg())},_.sub=_.subtract,_.multiply=function(E){if(this.isZero())return w;if(n(E)||(E=h(E)),e){var F=e.mul(this.low,this.high,E.low,E.high);return o(F,e.get_high(),this.unsigned)}if(E.isZero())return w;if(this.eq(N))return E.isOdd()?N:w;if(E.eq(N))return this.isOdd()?N:w;if(this.isNegative())return E.isNegative()?this.neg().mul(E.neg()):this.neg().mul(E).neg();if(E.isNegative())return this.mul(E.neg()).neg();if(this.lt(b)&&E.lt(b))return s(this.toNumber()*E.toNumber(),this.unsigned);var M=this.high>>>16,B=this.high&65535,j=this.low>>>16,P=this.low&65535,U=E.high>>>16,W=E.high&65535,q=E.low>>>16,L=E.low&65535,G=0,H=0,Y=0,ot=0;return ot+=P*L,Y+=ot>>>16,ot&=65535,Y+=j*L,H+=Y>>>16,Y&=65535,Y+=P*q,H+=Y>>>16,Y&=65535,H+=B*L,G+=H>>>16,H&=65535,H+=j*q,G+=H>>>16,H&=65535,H+=P*W,G+=H>>>16,H&=65535,G+=M*L+B*q+j*W+P*U,G&=65535,o(Y<<16|ot,G<<16|H,this.unsigned)},_.mul=_.multiply,_.divide=function(E){if(n(E)||(E=h(E)),E.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&E.low===-1&&E.high===-1)return this;var F=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,E.low,E.high);return o(F,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?S:w;var M,B,j;if(this.unsigned){if(E.unsigned||(E=E.toUnsigned()),E.gt(this))return S;if(E.gt(this.shru(1)))return $;j=S}else{if(this.eq(N)){if(E.eq(T)||E.eq(A))return N;if(E.eq(N))return T;var P=this.shr(1);return M=P.div(E).shl(1),M.eq(w)?E.isNegative()?T:A:(B=this.sub(E.mul(M)),j=M.add(B.div(E)),j)}else if(E.eq(N))return this.unsigned?S:w;if(this.isNegative())return E.isNegative()?this.neg().div(E.neg()):this.neg().div(E).neg();if(E.isNegative())return this.div(E.neg()).neg();j=w}for(B=this;B.gte(E);){M=Math.max(1,Math.floor(B.toNumber()/E.toNumber()));for(var U=Math.ceil(Math.log(M)/Math.LN2),W=U<=48?1:l(2,U-48),q=s(M),L=q.mul(E);L.isNegative()||L.gt(B);)M-=W,q=s(M,this.unsigned),L=q.mul(E);q.isZero()&&(q=T),j=j.add(q),B=B.sub(L)}return j},_.div=_.divide,_.modulo=function(E){if(n(E)||(E=h(E)),e){var F=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,E.low,E.high);return o(F,e.get_high(),this.unsigned)}return this.sub(this.div(E).mul(E))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return o(~this.low,~this.high,this.unsigned)},_.and=function(E){return n(E)||(E=h(E)),o(this.low&E.low,this.high&E.high,this.unsigned)},_.or=function(E){return n(E)||(E=h(E)),o(this.low|E.low,this.high|E.high,this.unsigned)},_.xor=function(E){return n(E)||(E=h(E)),o(this.low^E.low,this.high^E.high,this.unsigned)},_.shiftLeft=function(E){return n(E)&&(E=E.toInt()),(E&=63)===0?this:E<32?o(this.low<<E,this.high<<E|this.low>>>32-E,this.unsigned):o(0,this.low<<E-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(E){return n(E)&&(E=E.toInt()),(E&=63)===0?this:E<32?o(this.low>>>E|this.high<<32-E,this.high>>E,this.unsigned):o(this.high>>E-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(E){if(n(E)&&(E=E.toInt()),E&=63,E===0)return this;var F=this.high;if(E<32){var M=this.low;return o(M>>>E|F<<32-E,F>>>E,this.unsigned)}else return E===32?o(F,0,this.unsigned):o(F>>>E-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},_.toBytes=function(E){return E?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var E=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24,E&255,E>>>8&255,E>>>16&255,E>>>24]},_.toBytesBE=function(){var E=this.high,F=this.low;return[E>>>24,E>>>16&255,E>>>8&255,E&255,F>>>24,F>>>16&255,F>>>8&255,F&255]},t.fromBytes=function(E,F,M){return M?t.fromBytesLE(E,F):t.fromBytesBE(E,F)},t.fromBytesLE=function(E,F){return new t(E[0]|E[1]<<8|E[2]<<16|E[3]<<24,E[4]|E[5]<<8|E[6]<<16|E[7]<<24,F)},t.fromBytesBE=function(E,F){return new t(E[4]<<24|E[5]<<16|E[6]<<8|E[7],E[0]<<24|E[1]<<16|E[2]<<8|E[3],F)},o$}var FW=eht();const LW=Le(FW),nht=JK({__proto__:null,default:LW},[FW]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sl=LW||nht;function h0(e){return sl.fromString(e,!0,16)}const BW=h0("c3a5c85c97cb3127"),al=h0("b492b66fbe98f273"),wr=h0("9ae16a3b2f90404f");function Q2(e){return e.xor(e.shru(47))}function zW(e,t,n){const r=e.slice(t,t+n);return sl.fromBytes(Array.from(r),!0,!0)}function ze(e,t){return zW(e,t,8)}function uz(e,t){return zW(e,t,4)}function Pn(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function uo(e,t,n=h0("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function rht(e,t,n,r,i,a){i=i.add(e),a=Pn(a.add(i).add(r),21);const s=i;return i=i.add(t),i=i.add(n),a=a.add(Pn(i,44)),[i.add(r),a.add(s)]}function Ug(e,t,n,r){return rht(ze(e,t),ze(e,t+8),ze(e,t+16),ze(e,t+24),n,r)}function iht(e,t=e.length){if(t>=8){const n=wr.add(t*2),r=ze(e,0).add(wr),i=ze(e,t-8),a=Pn(i,37).mul(n).add(r),s=Pn(r,25).add(i).mul(n);return uo(a,s,n)}if(t>=4){const n=wr.add(t*2),r=uz(e,0);return uo(r.shl(3).add(t),uz(e,t-4),n)}if(t>0){const n=e[0],r=e[t>>1],i=e[t-1],a=n+(r<<8),s=t+(i<<2);return Q2(wr.mul(a).xor(BW.mul(s))).mul(wr)}return wr}function aht(e,t=e.length){const n=wr.add(t*2),r=ze(e,0).mul(al),i=ze(e,8),a=ze(e,t-8).mul(n),s=ze(e,t-16).mul(wr);return uo(Pn(r.add(i),43).add(Pn(a,30)).add(s),r.add(Pn(i.add(wr),18)).add(a),n)}function sht(e,t=e.length){const n=wr.add(t*2),r=ze(e,0).mul(wr),i=ze(e,8),a=ze(e,t-8).mul(n),s=ze(e,t-16).mul(wr),o=Pn(r.add(i),43).add(Pn(a,30)).add(s),l=uo(o,r.add(Pn(i.add(wr),18)).add(a),n),c=ze(e,16).mul(n),h=ze(e,24),d=o.add(ze(e,t-32)).mul(n),p=l.add(ze(e,t-24)).mul(n);return uo(Pn(c.add(h),43).add(Pn(d,30)).add(p),c.add(Pn(h.add(r),18)).add(d),n)}function oht(e,t=e.length){const n=sl.fromNumber(81,!0);if(t<=32)return t<=16?iht(e,t):aht(e,t);if(t<=64)return sht(e,t);let r=n,i=n.mul(al).add(113),a=Q2(i.mul(wr).add(113)).mul(wr),s=[sl.UZERO,sl.UZERO],o=[sl.UZERO,sl.UZERO];r=r.mul(wr).add(ze(e,0));let l=0;const c=(t-1>>6)*64,h=c+(t-1&63)-63;do r=Pn(r.add(i).add(s[0]).add(ze(e,l+8)),37).mul(al),i=Pn(i.add(s[1]).add(ze(e,l+48)),42).mul(al),r=r.xor(o[1]),i=i.add(s[0]).add(ze(e,l+40)),a=Pn(a.add(o[0]),33).mul(al),s=Ug(e,l,s[1].mul(al),r.add(o[0])),o=Ug(e,l+32,a.add(o[1]),i.add(ze(e,l+16))),[a,r]=[r,a],l+=64;while(l!==c);const d=al.add(a.and(255).shl(1));return l=h,o[0]=o[0].add(t-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),r=Pn(r.add(i).add(s[0]).add(ze(e,l+8)),37).mul(d),i=Pn(i.add(s[1]).add(ze(e,l+48)),42).mul(d),r=r.xor(o[1].mul(9)),i=i.add(s[0].mul(9).add(ze(e,l+40))),a=Pn(a.add(o[0]),33).mul(d),s=Ug(e,l,s[1].mul(d),r.add(o[0])),o=Ug(e,l+32,a.add(o[1]),i.add(ze(e,l+16))),[a,r]=[r,a],uo(uo(s[0],o[0],d).add(Q2(i).mul(BW)).add(a),uo(s[1],o[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Io(e,t){return t==="string"?co(e):Gl([e],t)}function lht(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function Gl(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=kl(e)),ct().getBool("DEBUG")&&Lft(e,t),lht(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${t}`)}function Ir(){return ct().platform.now()}function co(e,t="utf-8"){return t=t||"utf-8",ct().platform.encode(e,t)}function po(e,t="utf-8"){return t=t||"utf-8",ct().platform.decode(e,t)}function Fi(e){return ct().platform.isTypedArray!=null?ct().platform.isTypedArray(e):PW(e)}function kl(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||Pk(e)||e==null||Fi(e)&&n)t.push(e);else if(Array.isArray(e)||Fi(e))for(let r=0;r<e.length;++r)kl(e[r],t,n);else{let r=-1;for(const i of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)kl(e[i],t,n)}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uht{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new fht)}profileKernel(t,n,r){let i;const a=()=>{i=r()};let s;const o=Ir();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(a);else{a();for(const c of i)c.dataSync();s=Promise.resolve({kernelMs:Ir()-o})}if(ct().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const h=i[c];h.data().then(d=>{cht(d,h.dtype,t)})}return{kernelName:t,outputs:i,inputs:n,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:n,outputs:r,timeMs:i,inputs:a,extraInfo:s}=t;r.forEach(o=>{Promise.all([o.data(),i,s]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],a,l[2])})})}}function cht(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){const i=e[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class fht{logKernelProfile(t,n,r,i,a,s){const o=typeof i=="number"?ac(`${i}ms`,9):i.error,l=ac(t,25),c=n.rank,h=n.size,d=ac(n.shape.toString(),14);let p="";for(const g in a){const v=a[g];if(v!=null){const x=v.shape||n.shape,b=x.length;p+=`${g}: ${b}D ${b>0?x:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${d}	%c${h}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hht(e,t,n){const r={},i={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const c=e[l],h=c.inputs;for(const d in h){const p=h[d];let g=!1;for(let v=0;v<t.length;v++)if(r[p.id]){c.outputs.forEach(x=>r[x.id]=!0),g=!0,i[c.id]=!0;break}if(g)break}}const a={};a[n.id]=!0;const s={};for(let l=e.length-1;l>=0;l--){const c=e[l],h=c.inputs;for(let d=0;d<c.outputs.length;d++)if(a[c.outputs[d].id]){for(const p in h)a[h[p].id]=!0,s[c.id]=!0;break}}const o=[];for(let l=0;l<e.length;l++){const c=e[l];if(i[c.id]&&s[c.id]){const h={};for(const p in c.inputs){const g=c.inputs[p];r[g.id]&&(h[p]=g)}const d=Object.assign({},c);d.inputs=h,d.outputs=c.outputs,o.push(d)}}return o}function dht(e,t,n,r){for(let i=t.length-1;i>=0;i--){const a=t[i],s=[];if(a.outputs.forEach(l=>{const c=e[l.id];c!=null?s.push(c):s.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const o=a.gradient(s);for(const l in a.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=n(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const h=a.inputs[l];if(!Te(c.shape,h.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${h.shape}'`);if(e[h.id]==null)e[h.id]=c;else{const d=e[h.id];e[h.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cz=20,_h=3,l$=7;function pht(e,t,n,r){const i=Bt(t),a=mht(e,t,n,i),s=t.length,o=ey(e,t,n,i,a),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${s}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function mht(e,t,n,r){const i=pt(t),a=r[r.length-1],s=new Array(a).fill(0),o=t.length,l=n==="complex64"?zh(e):e;if(o>1)for(let c=0;c<i/a;c++){const h=c*a;for(let d=0;d<a;d++)s[d]=Math.max(s[d],Bh(l[h+d],0,n).length)}return s}function Bh(e,t,n){let r;return Array.isArray(e)?r=`${parseFloat(e[0].toFixed(l$))} + ${parseFloat(e[1].toFixed(l$))}j`:Jd(e)?r=`'${e}'`:n==="bool"?r=jW(e):r=parseFloat(e.toFixed(l$)).toString(),ac(r,t)}function jW(e){return e===0?"false":"true"}function ey(e,t,n,r,i,a=!0){const s=n==="complex64"?2:1,o=t[0],l=t.length;if(l===0){if(n==="complex64"){const x=zh(e);return[Bh(x[0],0,n)]}return n==="bool"?[jW(e[0])]:[e[0].toString()]}if(l===1){if(o>cz){const b=_h*s;let w=Array.from(e.slice(0,b)),S=Array.from(e.slice((o-_h)*s,o*s));return n==="complex64"&&(w=zh(w),S=zh(S)),["["+w.map((T,$)=>Bh(T,i[$],n)).join(", ")+", ..., "+S.map((T,$)=>Bh(T,i[o-_h+$],n)).join(", ")+"]"]}return["["+(n==="complex64"?zh(e):Array.from(e)).map((b,w)=>Bh(b,i[w],n)).join(", ")+"]"]}const c=t.slice(1),h=r.slice(1),d=r[0]*s,p=[];if(o>cz){for(let x=0;x<_h;x++){const b=x*d,w=b+d;p.push(...ey(e.slice(b,w),c,n,h,i,!1))}p.push("...");for(let x=o-_h;x<o;x++){const b=x*d,w=b+d;p.push(...ey(e.slice(b,w),c,n,h,i,x===o-1))}}else for(let x=0;x<o;x++){const b=x*d,w=b+d;p.push(...ey(e.slice(b,w),c,n,h,i,x===o-1))}const g=l===2?",":"";p[0]="["+(o>0?p[0]+g:"");for(let x=1;x<p.length-1;x++)p[x]=" "+p[x]+g;let v=`,
`;for(let x=2;x<l;x++)v+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(a?"":v),p}function zh(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xn{constructor(t,n,r){if(this.dtype=n,this.shape=t.slice(),this.size=pt(t),r!=null){const i=r.length;V(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||un(n,this.size),this.strides=Bt(t)}set(t,...n){n.length===0&&(n=[0]),V(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(const i of t){if(i<0||i>=this.shape[n]){const a=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(a)}n++}let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=this.strides[i]*t[i];return this.values[r]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return Ji().makeTensor(this.values,this.shape,this.dtype)}}let Ji=null,Ku=null;function ght(e){Ji=e}function yht(e){Ku=e}class Cn{constructor(t,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=pt(t),this.strides=Bt(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return Ku.buffer(this.shape,this.dtype,t)}bufferSync(){return Ku.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return ia(this.shape,t,this.dtype==="complex64")}arraySync(){return ia(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=Ji().read(this.dataId);if(this.dtype==="string"){const n=await t;try{return n.map(r=>po(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),Ji().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=Ji().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>po(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await Ji().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ji().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return Ku.print(this,t)}clone(){return this.throwIfDisposed(),Ku.clone(this)}toString(t=!1){const n=this.dataSync();return pht(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),Ku.cast(this,t)}variable(t=!0,n,r){return this.throwIfDisposed(),Ji().makeVariable(this,t,n,r)}}Object.defineProperty(Cn,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function dt(){return Fk("Tensor",()=>Cn)}dt();class hv extends Cn{constructor(t,n,r,i){super(t.shape,t.dtype,t.dataId,i),this.trainable=n,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!Te(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Ji().disposeTensor(this),this.dataId=t.dataId,Ji().incRef(this,null)}dispose(){Ji().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(hv,Symbol.hasInstance,{value:e=>e instanceof Cn&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var fz;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(fz||(fz={}));var J2;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(J2||(J2={}));var tA;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(tA||(tA={}));var eA;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(eA||(eA={}));var nA;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(nA||(nA={}));const vht={float32:eA,int32:J2,bool:tA,complex64:nA};function Kr(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return vht[e][t]}function $I(e){return Kr(e,"int32")}function UW(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function VW(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fn(e,t){if(e.dtype===t.dtype)return[e,t];const n=Kr(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function WW(e){const t=[];return GW(e,t,new Set),t}function GW(e,t,n){if(e==null)return;if(e instanceof Cn){t.push(e);return}if(!bht(e))return;const r=e;for(const i in r){const a=r[i];n.has(a)||(n.add(a),GW(a,t,n))}}function bht(e){return Array.isArray(e)||typeof e=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u$(e){return e.kernelName!=null}class hz{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class Bc{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new hz}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const r=t[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,r=1){return t in this.registryFactory?(ci(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:r},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(t);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new uht(this.backendInstance),!0}setupRegisteredKernels(){oz(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){oz(t).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof _k)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,a=r.then(s=>i<this.pendingBackendInitId?!1:(this.registry[t]=s,this.pendingBackendInit=null,!0)).catch(s=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,ci(`Initialization of backend ${t} failed`),ci(s.stack||s.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(r){return ci(`Initialization of backend ${t} failed`),ci(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const r=t[n],{success:i,asyncInit:a}=this.initializeBackend(r);if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){const r=this.state.tensorInfo.get(n),i=r.backend,a=this.readSync(n),s=i.refCount(n);i.disposeData(n,!0),r.backend=t,t.move(n,a,r.shape,r.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let r=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(t,n,r){t();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return Bc.nextTensorId++}nextVariableId(){return Bc.nextVariableId++}clone(t){const n=et.runKernel(xp,{x:t}),r={x:t},i=s=>({x:()=>{const o="float32",l={x:s},c={dtype:o};return et.runKernel(op,l,c)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,a,{}),n}runKernel(t,n,r){if(this.backendName==null&&this.backend,!(az(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,r){const i=this.backend.numDataIds();let a=0;r.forEach(l=>{a+=l.dtype==="complex64"?3:1});const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=i-n-a-s;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${t}'`)}runKernelFunc(t){let n,r=[];const i=this.isTapeOn(),a=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=u$(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(u$(t)){const{kernelName:v,inputs:x,attrs:b}=t;this.backendName==null&&this.backend;const w=az(v,this.backendName);V(w!=null,()=>`Cannot find registered kernel '${v}' for backend '${this.backendName}'`),o=()=>{const S=this.backend.numDataIds();l=w.kernelFunc({inputs:x,attrs:b,backend:this.backend});const T=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(v,S,T);const $=T.map(A=>A.rank!=null?A:this.makeTensorFromTensorInfo(A));if(i){const A=this.getTensorsForGradient(v,x,$);r=this.saveTensorsForBackwardMode(A)}return $}}else{const{forwardFunc:v}=t,x=b=>{i&&(r=b.map(w=>this.keep(this.clone(w))))};o=()=>{const b=this.backend.numDataIds();l=this.tidy(()=>v(this.backend,x));const w=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,b,w),w}}const{inputs:h,attrs:d}=t,p=u$(t)?null:t.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(g=this.profiler.profileKernel(c,h,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),n=g.outputs)}),i&&this.addTapeNode(c,h,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map(v=>h[v]!=null?h[v].shape:null),outputShapes:n.map(v=>v.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(t,n,r){const i=sz(t);if(i!=null){const a=i.inputsToSave||[],s=i.outputsToSave||[];let o;i.saveAllInputs?(V(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(c=>n[c])):o=a.map(c=>n[c]);const l=r.filter((c,h)=>s[h]);return o.concat(l)}return[]}makeTensor(t,n,r,i){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let a=t;r==="string"&&Jd(t[0])&&(a=t.map(l=>co(l)));const s=i.write(a,n,r),o=new Cn(n,r,s,this.nextTensorId());if(this.trackTensor(o,i),r==="string"){const l=this.state.tensorInfo.get(s),c=zft(a);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(t,n,r,i){r=r||"float32";const a={dataId:t,shape:n,dtype:r};return this.makeTensorFromTensorInfo(a,i)}makeTensorFromTensorInfo(t,n){const{dataId:r,shape:i,dtype:a}=t,s=new Cn(i,a,r,this.nextTensorId());return this.trackTensor(s,n),s}makeVariable(t,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==t.dtype&&(t=t.cast(i));const a=new hv(t,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*lv(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof hv||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const r=t.size*lv(t.dtype);this.state.numBytes-=r}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,r,i,a,s){const o={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:a},l=sz(t);l!=null&&(i=l.gradFunc),i!=null&&(o.gradient=c=>(c=c.map((h,d)=>{if(h==null){const p=r[d],g=or(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return h}),i(c.length>1?c:c[0],a,s))),this.state.activeTape.push(o)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){const n=WW(t),r=new Set(n.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const s=this.state.activeScope.track[a];!s.kept&&!r.has(s.id)&&s.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(a=>{!a.kept&&a.scopeId===i.id&&this.track(a)})}gradients(t,n,r,i=!1){if(V(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));V(a instanceof Cn,()=>"The result y returned by f() must be a tensor.");const s=hht(this.state.activeTape,n,a);if(!i&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[a.id]=r??xht(a.shape),dht(o,s,c=>this.tidy(c),wht);const l=n.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const h of c.saved)h.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(t){return V(H2(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{V(n.every(o=>o instanceof Cn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((o,l)=>{i[l]=o});const a=(o,l)=>(r=t(...n,l),V(r.value instanceof Cn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),V(H2(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),s=(o,l)=>{const c=r.gradFunc(o,l),h=Array.isArray(c)?c:[c];V(h.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),V(h.every(p=>p instanceof Cn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return h.forEach((p,g)=>{d[g]=()=>p}),d};return this.runKernelFunc({forwardFunc:a,backwardsFunc:s,inputs:i})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){const n=Ir(),r=await this.backend.time(t);return r.wallMs=Ir()-n,r}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new hz;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Bc.nextTensorId=0;Bc.nextVariableId=0;function xht(e){const t=Mk(pt(e),"float32");return et.makeTensor(t,e,"float32")}function qW(){const e=hW();if(e._tfengine==null){const t=new Vft(e);e._tfengine=new Bc(t)}return Hft(e._tfengine.ENV),ght(()=>e._tfengine),e._tfengine}const et=qW();function wht(e,t){const n={a:e,b:t};return et.runKernel(lf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sht(){return typeof navigator<"u"&&navigator!=null}function HW(e){if(e||Sht()){if(e||(e=navigator),e.product==="ReactNative")return!0;const t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){const n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function XW(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dr=ct();Dr.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Dr.registerFlag("IS_BROWSER",()=>XW());Dr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Dr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Dr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Dr.registerFlag("PROD",()=>!1);Dr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Dr.getBool("DEBUG"));Dr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Dr.registerFlag("IS_TEST",()=>!1);Dr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Dr.getBool("DEBUG"));Dr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Dr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Dr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d0(e,t){let n=e;if(Fi(e))return t==="string"?[]:[e.length];if(UW(e)){const i=e.channels||"RGBA";return[e.height,e.width*i.length]}else if(VW(e))return[e.buffer.size/(t==null?4:lv(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||Fi(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&ct().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&KW(e,r,[]),r}function KW(e,t,n){if(n=n||[],!Array.isArray(e)&&!Fi(e)){V(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}V(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),V(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const r=t.slice(1);for(let i=0;i<e.length;++i)KW(e[i],r,n.concat(i))}function dz(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function X(e,t,n,r="numeric"){if(e instanceof dt())return dz(r,e.dtype,t,n),e;let i=sf(e);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),dz(r,i,t,n),e==null||!Fi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const l=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const a=d0(e,i);!Fi(e)&&!Array.isArray(e)&&(e=[e]);const o=i!=="string"?Gl(e,i):kl(e,[],!0);return et.makeTensor(o,a,i)}function YW(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((a,s)=>X(a,`${t}[${s}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cht="__op";function rt(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Cht;const i=(...a)=>{et.startScope(n);try{const s=r(...a);return Pk(s)&&console.error("Cannot return a Promise inside of tidy."),et.endScope(s),s}catch(s){throw et.endScope(null),s}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tht(e,t){const n=X(e,"real","complex"),r=X(t,"imag","complex");Dk(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return et.runKernel(Gk,i)}const zc=rt({complex_:Tht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p0(e,t,n,r){if(r==null)r=sf(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(VW(e)||UW(e)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return et.backend.createTensorFromGPUData(e,t||n,r)}if(!Fi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){As(t);const i=pt(t),a=pt(n);V(i===a,()=>`Based on the provided shape, [${t}], the tensor should have ${i} values but has ${a}`);for(let s=0;s<n.length;++s){const o=n[s],l=s===n.length-1?o!==pt(t.slice(s)):!0;V(n[s]===t[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!Fi(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?Gl(e,r):kl(e,[],!0),et.makeTensor(e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZW(e,t,n){const r=d0(e,n);return p0(e,t,r,n)}class uf{static join(t){return new uf(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>Fi(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let r=0;r<t.length;r++){const i=t[r];r!==t.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=n+i.byteLength;this.shards.push({buffer:i,start:n,end:a}),n=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);const r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);const i=n-t,a=new ArrayBuffer(i),s=new Uint8Array(a);let o=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=t+o-c.start,p=o,v=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,d,v-d);if(s.set(x,p),o+=x.length,n<c.end)break}return a}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(i){return t<i.start?-1:t>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=$ht(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function $ht(e,t){let n=0,r=e.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,a=t(e[i]);if(a===0)return i;a<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ya(){return et}function pz(){return et.memory()}function st(e,t){return et.tidy(e,t)}function le(e){WW(e).forEach(n=>n.dispose())}function Ia(e){return et.keep(e)}function QW(e,t,n=1){return et.registerBackend(e,t,n)}function Aht(){return et.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mz=4;async function gz(e,t){const n=[],r=[],i=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);for(let s=0;s<i.length;++s){const o=i[s],l=Array.isArray(e)?e[s].tensor:e[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const h=new Promise(async d=>{const p=await l.bytes(),g=p.reduce((b,w)=>b+w.length,0)+mz*p.length,v=new Uint8Array(g);let x=0;for(let b=0;b<p.length;b++){const w=p[b],S=new Uint8Array(new Uint32Array([w.length]).buffer);v.set(S,x),x+=mz,v.set(w,x),x+=w.length}d(v)});r.push(h)}else r.push(l.data());t!=null&&(c.group=t),n.push(c)}const a=await Promise.all(r);return{data:kht(a),specs:n}}function kht(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(a=>{if(t+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(t);let i=0;return n.forEach(a=>{r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}const AI=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function yz(e){return AI?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function Iht(e){if(AI)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function Eht(e){if(AI){const r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function Oht(e){return uf.join(e)}function JW(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:yz(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:yz(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new uf(e.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return yr.instance==null&&(yr.instance=new yr),yr.instance}static registerSaveRouter(t){yr.getInstance().saveRouters.push(t)}static registerLoadRouter(t){yr.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return yr.getHandlers(t,"save")}static getLoadHandlers(t,n){return yr.getHandlers(t,"load",n)}static getHandlers(t,n,r){const i=[];return(n==="load"?yr.getInstance().loadRouters:yr.getInstance().saveRouters).forEach(s=>{const o=s(t,r);o!==null&&i.push(o)}),i}}const Nht=e=>yr.getSaveHandlers(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rA="tensorflowjs",iA=1,pl="models_store",ao="model_info_store";function tG(){if(!ct().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function aA(e){const t=e.result;t.createObjectStore(pl,{keyPath:"modelPath"}),t.createObjectStore(ao,{keyPath:"modelPath"})}class Il{constructor(t){if(this.indexedDB=tG(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((r,i)=>{const a=this.indexedDB.open(rA,iA);a.onupgradeneeded=()=>aA(a),a.onsuccess=()=>{const s=a.result;if(n==null){const o=s.transaction(pl,"readonly"),c=o.objectStore(pl).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return s.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=h=>(s.close(),i(c.error)),o.oncomplete=()=>s.close()}else{n.weightData=uf.join(n.weightData);const o=JW(n),l=s.transaction(ao,"readwrite");let c=l.objectStore(ao),h;try{h=c.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(p){return i(p)}let d;h.onsuccess=()=>{d=s.transaction(pl,"readwrite");const p=d.objectStore(pl);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(v){return i(v)}g.onsuccess=()=>r({modelArtifactsInfo:o}),g.onerror=v=>{c=l.objectStore(ao);const x=c.delete(this.modelPath);x.onsuccess=()=>(s.close(),i(g.error)),x.onerror=b=>(s.close(),i(g.error))}},h.onerror=p=>(s.close(),i(h.error)),l.oncomplete=()=>{d==null?s.close():d.oncomplete=()=>s.close()}}},a.onerror=s=>i(a.error)})}}Il.URL_SCHEME="indexeddb://";const eG=e=>ct().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Il.URL_SCHEME)?_ht(e.slice(Il.URL_SCHEME.length)):null;yr.registerSaveRouter(eG);yr.registerLoadRouter(eG);function _ht(e){return new Il(e)}function Rht(e){return e.startsWith(Il.URL_SCHEME)?e.slice(Il.URL_SCHEME.length):e}class Dht{constructor(){this.indexedDB=tG()}async listModels(){return new Promise((t,n)=>{const r=this.indexedDB.open(rA,iA);r.onupgradeneeded=()=>aA(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(ao,"readonly"),o=a.objectStore(ao).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;t(l)},o.onerror=l=>(i.close(),n(o.error)),a.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(t){return t=Rht(t),new Promise((n,r)=>{const i=this.indexedDB.open(rA,iA);i.onupgradeneeded=()=>aA(i),i.onsuccess=()=>{const a=i.result,s=a.transaction(ao,"readwrite"),o=s.objectStore(ao),l=o.get(t);let c;l.onsuccess=()=>{if(l.result==null)return a.close(),r(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const h=o.delete(t),d=()=>{c=a.transaction(pl,"readwrite");const g=c.objectStore(pl).delete(t);g.onsuccess=()=>n(l.result.modelArtifactsInfo),g.onerror=v=>r(l.error)};h.onsuccess=d,h.onerror=p=>(d(),a.close(),r(l.error))}},l.onerror=h=>(a.close(),r(l.error)),s.oncomplete=()=>{c==null?a.close():c.oncomplete=()=>a.close()}},i.onerror=a=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ss="/",Yu="tensorflowjs_models",nG="info",Mht="model_topology",Pht="weight_specs",Fht="weight_data",Lht="model_metadata";function rG(e){return{info:[Yu,e,nG].join(ss),topology:[Yu,e,Mht].join(ss),weightSpecs:[Yu,e,Pht].join(ss),weightData:[Yu,e,Fht].join(ss),modelMetadata:[Yu,e,Lht].join(ss)}}function iG(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function Bht(e){const t=e.split(ss);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(ss)}function zht(e){return e.startsWith(El.URL_SCHEME)?e.slice(El.URL_SCHEME.length):e}class El{constructor(t){if(!ct().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=rG(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),i=JW(t),a=uf.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Iht(a));const s={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:i}}catch{throw iG(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const o=JSON.parse(a);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(s==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Eht(s),n}}El.URL_SCHEME="localstorage://";const aG=e=>ct().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(El.URL_SCHEME)?jht(e.slice(El.URL_SCHEME.length)):null;yr.registerSaveRouter(aG);yr.registerLoadRouter(aG);function jht(e){return new El(e)}class Uht{constructor(){V(ct().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),V(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},n=Yu+ss,r=ss+nG;for(let i=0;i<this.LS.length;++i){const a=this.LS.key(i);if(a.startsWith(n)&&a.endsWith(r)){const s=Bht(a);t[s]=JSON.parse(this.LS.getItem(a))}}return t}async removeModel(t){t=zht(t);const n=rG(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(n.info));return iG(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vz="://";class va{constructor(){this.managers={}}static getInstance(){return va.instance==null&&(va.instance=new va),va.instance}static registerManager(t,n){V(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(vz)&&(t=t.slice(0,t.indexOf(vz))),V(t.length>0,()=>"scheme must not be an empty string.");const r=va.getInstance();V(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=n}static getManager(t){const n=va.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(va.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vht{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}setTimeoutCustom(t,n){if(typeof window>"u"||!ct().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,n);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return PW(t)}}if(ct().get("IS_BROWSER")){ct().setPlatform("browser",new Vht);try{va.registerManager(El.URL_SCHEME,new Uht)}catch{}try{va.registerManager(Il.URL_SCHEME,new Dht)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wht={importFetch:()=>require("node-fetch")};let c$;class Ght{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return ct().global.fetch!=null?ct().global.fetch(t,n):(c$==null&&(c$=Wht.importFetch()),c$(t,n))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}ct().get("IS_NODE")&&!ct().get("IS_BROWSER")&&ct().setPlatform("node",new Ght);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ie(e,t="float32",n){return t=t||"float32",As(e),new Xn(e,t,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qht(e,t){const n=X(e,"x","cast");if(!Bft(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:t};return et.runKernel(op,r,i)}const Rt=rt({cast_:qht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hht(e){const n={x:X(e,"x","clone","string_or_numeric")};return et.runKernel(xp,n)}const vl=rt({clone_:Hht});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xht(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */qW();const Kht={buffer:ie,cast:Rt,clone:vl,print:Xht};yht(Kht);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yht(e,t){let n=X(e,"a","add"),r=X(t,"b","add");[n,r]=fn(n,r);const i={a:n,b:r};return et.runKernel(lf,i)}const $t=rt({add_:Yht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zht(e,t){let n=X(e,"a","floorDiv"),r=X(t,"b","floorDiv");[n,r]=fn(n,r);const i={a:n,b:r};return et.runKernel(vp,i)}const sG=rt({floorDiv_:Zht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qht(e,t){let n=X(e,"a","div"),r=X(t,"b","div");if([n,r]=fn(n,r),n.dtype==="int32"&&r.dtype==="int32")return sG(n,r);const i={a:n,b:r},a={};return et.runKernel(hp,i,a)}const Ut=rt({div_:Qht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jht(e,t){let n=X(e,"a","mul"),r=X(t,"b","mul");[n,r]=fn(n,r);const i={a:n,b:r};return et.runKernel(Ep,i)}const tt=rt({mul_:Jht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tdt(e){const t=X(e,"x","abs");if(t.dtype==="complex64"){const n={x:t};return et.runKernel(bb,n)}else{const n={x:t};return et.runKernel(hb,n)}}const vr=rt({abs_:tdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function edt(e){const n={x:X(e,"x","acos")};return et.runKernel(tp,n)}const ndt=rt({acos_:edt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rdt(e){const n={x:X(e,"x","acosh")};return et.runKernel(ep,n)}const idt=rt({acosh_:rdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function adt(e,t=null,n=!1){const i={x:X(e,"x","all","bool")},a={axis:t,keepDims:n};return et.runKernel(Bk,i,a)}const oG=rt({all_:adt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sdt(e,t=null,n=!1){const i={x:X(e,"x","any","bool")},a={axis:t,keepDims:n};return et.runKernel(zk,i,a)}const sA=rt({any_:sdt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function odt(e,t=0){const r={x:X(e,"x","argMax")},i={axis:t};return et.runKernel(db,r,i)}const Rd=rt({argMax_:odt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ldt(e,t=0){const r={x:X(e,"x","argMin")},i={axis:t};return et.runKernel(pb,r,i)}const udt=rt({argMin_:ldt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cdt(e){const n={x:X(e,"x","asin")};return et.runKernel(np,n)}const fdt=rt({asin_:cdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hdt(e){const n={x:X(e,"x","asinh")};return et.runKernel(rp,n)}const ddt=rt({asinh_:hdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pdt(e){const n={x:X(e,"x","atan")};return et.runKernel(ip,n)}const mdt=rt({atan_:pdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gdt(e,t){let n=X(e,"a","atan2"),r=X(t,"b","atan2");[n,r]=fn(n,r);const i={a:n,b:r};return et.runKernel(sp,i)}const ydt=rt({atan2_:gdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vdt(e){const n={x:X(e,"x","atanh")};return et.runKernel(ap,n)}const bdt=rt({atanh_:vdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kp(e,t,n,r,i="NHWC",a){const s=e[3],o=[...t,s],l=Is(i);return Yn(e,o,n,a,r,null,null,l)}function zi(e,t,n,r,i,a,s="channelsLast"){const[o,l]=Dd(t);let c;if(s==="channelsLast")c=[o,l,e[3],e[3]];else if(s==="channelsFirst")c=[o,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return Yn(e,c,n,r,i,a,!1,s)}function ks(e,t,n,r,i,a,s="NDHWC"){const[o,l,c]=oA(t);let h,d;if(s==="NDHWC")d="channelsLast",h=[o,l,c,e[4],e[4]];else if(s==="NCDHW")d="channelsFirst",h=[o,l,c,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return Eo(e,h,n,r,i,!1,d,a)}function Yn(e,t,n,r,i,a,s=!1,o="channelsLast"){let[l,c,h,d]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,h,d]=e;else if(o==="channelsFirst")[l,d,c,h]=e;else throw new Error(`Unknown dataFormat ${o}`);const[p,g,,v]=t,[x,b]=Dd(n),[w,S]=Dd(r),T=oc(p,w),$=oc(g,S),{padInfo:A,outHeight:I,outWidth:O}=Sdt(i,c,h,x,b,T,$,a,o),N=s?v*d:v;let _;return o==="channelsFirst"?_=[l,N,I,O]:o==="channelsLast"&&(_=[l,I,O,N]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:h,inChannels:d,outHeight:I,outWidth:O,outChannels:N,padInfo:A,strideHeight:x,strideWidth:b,filterHeight:p,filterWidth:g,effectiveFilterHeight:T,effectiveFilterWidth:$,dilationHeight:w,dilationWidth:S,inShape:e,outShape:_,filterShape:t}}function Eo(e,t,n,r,i,a=!1,s="channelsLast",o){let[l,c,h,d,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,h,d,p]=e;else if(s==="channelsFirst")[l,p,c,h,d]=e;else throw new Error(`Unknown dataFormat ${s}`);const[g,v,x,,b]=t,[w,S,T]=oA(n),[$,A,I]=oA(r),O=oc(g,$),N=oc(v,A),_=oc(x,I),{padInfo:R,outDepth:E,outHeight:F,outWidth:M}=Cdt(i,c,h,d,w,S,T,O,N,_,o),B=a?b*p:b;let j;return s==="channelsFirst"?j=[l,B,E,F,M]:s==="channelsLast"&&(j=[l,E,F,M,B]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:h,inWidth:d,inChannels:p,outDepth:E,outHeight:F,outWidth:M,outChannels:B,padInfo:R,strideDepth:w,strideHeight:S,strideWidth:T,filterDepth:g,filterHeight:v,filterWidth:x,effectiveFilterDepth:O,effectiveFilterHeight:N,effectiveFilterWidth:_,dilationDepth:$,dilationHeight:A,dilationWidth:I,inShape:e,outShape:j,filterShape:t}}function xdt(e,t,n,r,i){r==null&&(r=kI(e,t,n));const a=e[0],s=e[1],o=Md((a-t+2*r)/n+1,i),l=Md((s-t+2*r)/n+1,i);return[o,l]}function wdt(e,t,n,r,i,a){i==null&&(i=kI(e,t[0],r[0]));const s=[0,0,0,n];for(let o=0;o<3;o++)e[o]+2*i>=t[o]&&(s[o]=Md((e[o]-t[o]+2*i)/r[o]+1,a));return s}function kI(e,t,n,r=1){const i=oc(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function Dd(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function oA(e){return typeof e=="number"?[e,e,e]:e}function oc(e,t){return t<=1?e:e+(e-1)*(t-1)}function Sdt(e,t,n,r,i,a,s,o,l){let c,h,d;if(typeof e=="number"){c={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const g=xdt([t,n],a,r,e,o);h=g[0],d=g[1]}else if(e==="same"){h=Math.ceil(t/r),d=Math.ceil(n/i);const p=Math.max(0,(h-1)*r+a-t),g=Math.max(0,(d-1)*i+s-n),v=Math.floor(p/2),x=p-v,b=Math.floor(g/2),w=g-b;c={top:v,bottom:x,left:b,right:w,type:"SAME"}}else if(e==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((t-a+1)/r),d=Math.ceil((n-s+1)/i);else if(typeof e=="object"){const p=l==="channelsLast"?e[1][0]:e[2][0],g=l==="channelsLast"?e[1][1]:e[2][1],v=l==="channelsLast"?e[2][0]:e[3][0],x=l==="channelsLast"?e[2][1]:e[3][1];c={top:p,bottom:g,left:v,right:x,type:p===0&&g===0&&v===0&&x===0?"VALID":"EXPLICIT"},h=Md((t-a+p+g)/r+1,o),d=Md((n-s+v+x)/i+1,o)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:c,outHeight:h,outWidth:d}}function Cdt(e,t,n,r,i,a,s,o,l,c,h){let d,p,g,v;if(e==="valid"&&(e=0),typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const b=wdt([t,n,r,1],[o,l,c],1,[i,a,s],e,h);p=b[0],g=b[1],v=b[2]}else if(e==="same"){p=Math.ceil(t/i),g=Math.ceil(n/a),v=Math.ceil(r/s);const x=(p-1)*i+o-t,b=(g-1)*a+l-n,w=(v-1)*s+c-r,S=Math.floor(x/2),T=x-S,$=Math.floor(b/2),A=b-$,I=Math.floor(w/2),O=w-I;d={top:$,bottom:A,left:I,right:O,front:S,back:T,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:p,outHeight:g,outWidth:v}}function Md(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Ol(e){const[t,n,r]=Dd(e);return t===1&&n===1&&r===1}function ur(e,t){return Ol(e)||Ol(t)}function Nl(e){return Dd(e).every(t=>t>0)}function Is(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function Pr(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")V(Lc(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(i=>{V(Lc(i),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tdt(e,t){const r={x:X(e,"x","reshape","string_or_numeric")},i={shape:t};return et.runKernel(Jb,r,i)}const nt=rt({reshape_:Tdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $dt(e,t,n,r,i){const a=X(e,"x","avgPool","float32"),s=1;V(ur(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let o=a,l=!1;a.rank===3&&(l=!0,o=nt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),V(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Pr("avgPool",r,i);const c={x:o},h={filterSize:t,strides:n,pad:r,dimRoundingMode:i};let d=et.runKernel(mb,c,h);return d=Rt(d,a.dtype),l?nt(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const II=rt({avgPool_:$dt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Adt(e,t,n,r,i,a="NDHWC"){const s=X(e,"x","avgPool3d","float32");let o=s,l=!1;s.rank===4&&(l=!0,o=nt(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),V(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),V(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),V(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Pr("avgPool3d",r,i);const c={x:o},h={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:a};let d=et.runKernel(gb,c,h);return d=Rt(d,o.dtype),l?nt(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const kdt=rt({avgPool3d_:Adt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Idt(e,t=0){V(e.length>=1,()=>"Pass at least one tensor to concat");const n=YW(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),n.length===1)return vl(n[0]);const r=n,i={axis:t};return et.runKernel(xb,r,i)}const _r=rt({concat_:Idt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Edt(e,t,n=!1,r=!1){let i=X(e,"a","matMul"),a=X(t,"b","matMul");[i,a]=fn(i,a);const s={a:i,b:a},o={transposeA:n,transposeB:r};return et.runKernel(yb,s,o)}const we=rt({matMul_:Edt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Odt(e){const n={x:X(e,"x","sigmoid","float32")};return et.runKernel(zp,n)}const cf=rt({sigmoid_:Odt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ndt(e,t,n){const r=X(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},a={begin:t,size:n};return et.runKernel(i0,i,a)}const je=rt({slice_:Ndt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _dt(e){const n={x:X(e,"x","tanh","float32")};return et.runKernel(qp,n)}const m0=rt({tanh_:_dt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rdt(e,t,n){const r=X(e,"x","batchToSpaceND"),i=t.reduce((o,l)=>o*l);V(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),V(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),V(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${i}`);const a={x:r},s={blockShape:t,crops:n};return et.runKernel(vb,a,s)}const EI=rt({batchToSpaceND_:Rdt});function Ddt(e){let t;return e.rank===0||e.rank===1?t=nt(e,[1,1,1,e.size]):e.rank===2?t=nt(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=nt(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mdt(e,t,n,r,i,a){a==null&&(a=.001);const s=X(e,"x","batchNorm"),o=X(t,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let h;r!=null&&(h=X(r,"offset","batchNorm")),V(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(h==null||o.rank===h.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:Ddt(s),scale:c,offset:h,mean:o,variance:l},g={varianceEpsilon:a},v=et.runKernel(Eb,p,g);return nt(v,s.shape)}const g0=rt({batchNorm_:Mdt});function Pdt(e,t,n,r,i,a){const s=X(e,"x","batchNorm"),o=X(t,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let h;return r!=null&&(h=X(r,"offset","batchNorm")),V(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),V(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),V(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&V(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),h!=null&&V(h.rank===2||h.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${h.rank}.`),g0(s,o,l,h,c,a)}const Fdt=rt({batchNorm2d_:Pdt});function Ldt(e,t,n,r,i,a){const s=X(e,"x","batchNorm"),o=X(t,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let h;return r!=null&&(h=X(r,"offset","batchNorm")),V(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),V(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),V(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&V(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),h!=null&&V(h.rank===3||h.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${h.rank}.`),g0(s,o,l,h,c,a)}const Bdt=rt({batchNorm3d_:Ldt});function zdt(e,t,n,r,i,a){const s=X(e,"x","batchNorm"),o=X(t,"mean","batchNorm"),l=X(n,"variance","batchNorm");let c;i!=null&&(c=X(i,"scale","batchNorm"));let h;return r!=null&&(h=X(r,"offset","batchNorm")),V(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),V(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),V(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&V(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),h!=null&&V(h.rank===4||h.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${h.rank}.`),g0(s,o,l,h,c,a)}const jdt=rt({batchNorm4d_:zdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Udt(e,t,n){const r=X(e,"x","bincount"),i=X(t,"weights","bincount");V(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const a={x:r,weights:i},s={size:n};return et.runKernel(Vk,a,s)}const Vdt=rt({bincount_:Udt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wdt(e,t){let n=X(e,"broadcastTo","x");const r=n.shape;if(As(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const c=n.shape.slice();for(;c.length<t.length;)c.unshift(1);n=nt(n,c)}const i=n.shape,a=Array.from(t);for(let c=t.length-1;c>=0;c--)if(i[c]===t[c])a[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(a.map((c,h)=>c>1?h:-1).filter(c=>c>=0).length===0)return vl(n);const o={x:n},l={reps:a};return et.runKernel(Hp,o,l)}const Yh=rt({broadcastTo_:Wdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gdt(e){const n={x:X(e,"x","ceil","float32")};return et.runKernel(lp,n)}const qdt=rt({ceil_:Gdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y0(e,t,n){As(e),n=n||sf(t);const r={shape:e,value:t,dtype:n};return et.runKernel(iI,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hdt(e,t,n){const r=X(e,"x","clipByValue");if(V(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return y0(r.shape,t,r.dtype);const i={x:r},a={clipValueMin:t,clipValueMax:n};return et.runKernel(up,i,a)}const di=rt({clipByValue_:Hdt});function Xdt(e){return _r(e,0)}const Kdt=rt({concat1d_:Xdt});function Ydt(e,t){return _r(e,t)}const Zdt=rt({concat2d_:Ydt});function Qdt(e,t){return _r(e,t)}const Jdt=rt({concat3d_:Qdt});function tpt(e,t){return _r(e,t)}const ept=rt({concat4d_:tpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function npt(e,t,n,r,i="NHWC",a=[1,1],s){const o=X(e,"x","conv2d","float32"),l=X(t,"filter","conv2d","float32");let c=o,h=!1;o.rank===3&&(h=!0,c=nt(o,[1,o.shape[0],o.shape[1],o.shape[2]])),V(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Pr("conv2d",r,s);const d=i==="NHWC"?c.shape[3]:c.shape[1];V(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),V(ur(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),V(Nl(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),V(Nl(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s},v=et.runKernel(wb,p,g);return h?nt(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const _l=rt({conv2d_:npt});function rpt(e,t,n,r,i="NWC",a=1,s){const o=X(e,"x","conv1d"),l=X(t,"filter","conv1d");let c=o,h=!1;o.rank===2&&(h=!0,c=nt(o,[1,o.shape[0],o.shape[1]])),V(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),V(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Pr("conv1d",r,s),V(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),V(ur(n,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`),V(Nl(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),V(Nl(n),()=>"Error in conv1D: Stride should be larger than 0."),V(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=nt(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=nt(c,[c.shape[0],1,c.shape[1],c.shape[2]]),b=_l(p,d,[1,n],r,"NHWC",[1,a],s);return h?nt(b,[b.shape[2],b.shape[3]]):nt(b,[b.shape[0],b.shape[2],b.shape[3]])}const lG=rt({conv1d_:rpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ipt(e,t,n,r,i,a="NHWC",s){V(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,l=t,c=!1;t.rank===3&&(c=!0,l=nt(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),V(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),V(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),V(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const h=a==="NHWC"?o[3]:o[1],d=a==="NHWC"?l.shape[3]:l.shape[1];V(h===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[2]}.`),V(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Pr("conv2dDerInput",i,s);const p={dy:l,filter:n},g={strides:r,pad:i,dataFormat:a,dimRoundingMode:s,inputShape:o},v=et.runKernel(Sb,p,g);return c?nt(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const OI=rt({conv2DBackpropInput_:ipt});function apt(e,t,n,r,i,a){const s=X(e,"x","conv2dTranspose"),o=X(t,"filter","conv2dTranspose");return OI(n,s,o,r,i,"NHWC",a)}const uG=rt({conv2dTranspose_:apt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spt(e,t,n,r,i="NDHWC",a=[1,1,1]){const s=X(e,"x","conv3d"),o=X(t,"filter","conv3d");let l=s,c=!1;s.rank===4&&(c=!0,l=nt(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),V(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),V(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),V(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),V(ur(n,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),V(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),V(Nl(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),V(Nl(n),()=>"Error in conv3D: Strides should be larger than 0.");const h={x:l,filter:o},d={strides:n,pad:r,dataFormat:i,dilations:a},p=et.runKernel(Cb,h,d);return c?nt(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const opt=rt({conv3d_:spt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lpt(e,t,n,r,i){V(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let a=e,s=t,o=!1;t.rank===4&&(o=!0,s=nt(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);const l=a[4],c=s.shape[4];V(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),V(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),V(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),V(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),V(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const h={dy:s,filter:n},d={pad:i,strides:r,inputShape:a},p=et.runKernel(Xk,h,d);return o?nt(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const cG=rt({conv3DBackpropInput_:lpt});function upt(e,t,n,r,i){const a=X(e,"x","conv3dTranspose"),s=X(t,"filter","conv3dTranspose");return cG(n,a,s,r,i)}const cpt=rt({conv3dTranspose_:upt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fpt(e){const n={x:X(e,"x","cos","float32")};return et.runKernel(cp,n)}const NI=rt({cos_:fpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hpt(e){const n={x:X(e,"x","cosh","float32")};return et.runKernel(fp,n)}const fG=rt({cosh_:hpt});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dpt(e,t=0,n=!1,r=!1){const a={x:X(e,"x","cumprod")},s={axis:t,exclusive:n,reverse:r};return et.runKernel(Kk,a,s)}const lA=rt({cumprod_:dpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ppt(e,t=0,n=!1,r=!1){const a={x:X(e,"x","cumsum")},s={axis:t,exclusive:n,reverse:r};return et.runKernel(Tb,a,s)}const hG=rt({cumsum_:ppt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mpt(e,t,n,r=!1){const i=X(e,"x","denseBincount"),a=X(t,"weights","denseBincount");V(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),V(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(a.size===i.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`);const s={x:i,weights:a},o={size:n,binaryOutput:r};return et.runKernel(Zk,s,o)}const bz=rt({denseBincount_:mpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gpt(e,t,n="NHWC"){const r=X(e,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];V(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),V(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t}  for depthToSpace with input shape
    ${r.shape}`),V(a*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${t} for depthToSpace with input shape
        ${r.shape}`),V(s%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${s} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:t,dataFormat:n};return et.runKernel(Qk,o,l)}const ypt=rt({depthToSpace_:gpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vpt(e,t,n,r,i="NHWC",a=[1,1],s){const o=X(e,"x","depthwiseConv2d","float32"),l=X(t,"filter","depthwiseConv2d","float32");let c=o,h=!1;o.rank===3&&(h=!0,c=nt(o,[1,o.shape[0],o.shape[1],o.shape[2]])),V(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];V(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Pr("depthwiseConv2d",r,s);const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s},v=et.runKernel($b,p,g);return h?nt(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const _I=rt({depthwiseConv2d_:vpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bpt(e,t,n,r,i=[1,1],a="NHWC"){const s=X(e,"x","dilation2d"),o=X(t,"filter","dilation2d");V(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),V(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),V(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=s,c=!1;s.rank===3&&(l=nt(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),V(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const h={x:l,filter:o},d={strides:n,pad:r,dilations:i},p=et.runKernel(Ab,h,d);return c?nt(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const xpt=rt({dilation2d_:bpt});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jc(e,t){const n=e.length,r=[];for(let i=0;i<n;i++){const a=n-1-i,s=e[a]||1;(t[t.length-1-i]||1)>1&&s===1&&r.unshift(a)}return r}function En(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[e.length-r-1],a=t.length-r-1,s=t[a];(i==null||i===1&&s>1)&&n.unshift(a)}return n}function Jt(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let i=0;i<n;i++){let a=e[e.length-i-1];a==null&&(a=1);let s=t[t.length-i-1];if(s==null&&(s=1),a===1)r[n-i-1]=s;else if(s===1)r[n-i-1]=a;else if(a!==s){const o=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(o)}else r[n-i-1]=a}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wpt(e,t){let n=X(e,"a","equal","string_or_numeric"),r=X(t,"b","equal","string_or_numeric");[n,r]=fn(n,r),Jt(n.shape,r.shape);const i={a:n,b:r};return et.runKernel(kb,i)}const Da=rt({equal_:wpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Spt(e,t,n){const r=X(t,"a","where"),i=X(n,"b","where"),a=X(e,"condition","where","bool"),s=Jt(Jt(a.shape,r.shape),i.shape),o=Yh(a,s),l=Yh(r,s),c=Yh(i,s),h={condition:o,t:l,e:c};return et.runKernel(r0,h)}const Cr=rt({where_:Spt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cpt(e){const n={x:X(e,"x","zerosLike")};return et.runKernel(f0,n)}const me=rt({zerosLike_:Cpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tpt(e,t){let n=X(e,"a","div"),r=X(t,"b","div");[n,r]=fn(n,r);const i=Ut(n,r),a=me(i),s=Da(r,a);return Cr(s,a,i)}const $pt=rt({divNoNan_:Tpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Apt(e,t){const n=X(e,"t1","dot"),r=X(t,"t2","dot");V((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];if(V(i===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${a}.`),n.rank===1&&r.rank===1){const s=nt(n,[1,-1]),o=nt(r,[-1,1]),l=we(s,o);return nt(l,[])}else if(n.rank===1&&r.rank===2){const s=nt(n,[1,-1]),o=nt(r,[r.shape[0],r.shape[1]]),l=we(s,o);return nt(l,[l.size])}else if(n.rank===2&&r.rank===1){const s=nt(r,[-1,1]),o=we(n,s);return nt(o,[o.size])}else{const s=nt(r,[r.shape[0],r.shape[1]]);return we(n,s)}}const kpt=rt({dot_:Apt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ipt(e,...t){const n=t.map((i,a)=>X(i,`tensors${a}`,"einsum")),r={equation:e};return et.runKernel(eI,n,r)}const Rh=rt({einsum_:Ipt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ept(e){const n={x:X(e,"x","elu","float32")};return et.runKernel(dp,n)}const v0=rt({elu_:Ept});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Opt(e){let t=X(e,"x","erf");V(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=Rt(t,"float32"));const n={x:t};return et.runKernel(pp,n)}const dG=rt({erf_:Opt});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RI(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function pG(e,t,n){const r=e.length+t.length,i=[];let a=0,s=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?i.push(e[a++]):i.push(t[s++]);return i}function jn(e,t){const n=[],r=e.length;for(let a=0;a<r;a++)t.indexOf(a)===-1&&n.push(e[a]);const i=t.map(a=>e[a]);return[n,i]}function bn(e,t){const n=t.map(r=>1);return pG(e,n,t)}function Zn(e,t,n){V(RI(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function en(e,t){if(RI(e,t))return null;const n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function Oo(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function hn(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Npt(e,t=null,n=!1){const i={x:X(e,"x","max")},a={reductionIndices:t,keepDims:n};return et.runKernel(Bb,i,a)}const aa=rt({max_:Npt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _pt(e,t=null,n=!1){const i={x:X(e,"x","min")},a={axis:t,keepDims:n};return et.runKernel(Vb,i,a)}const dv=rt({min_:_pt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rpt(e,t){let n=X(e,"base","pow"),r=X(t,"exp","pow");[n,r]=fn(n,r);const i={a:n,b:r};return et.runKernel(Op,i)}const Rl=rt({pow_:Rpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Se(e,t){if((Fi(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Fi(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return p0(e,[],[],t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dpt(e){const n={x:X(e,"x","sqrt","float32")};return et.runKernel(Up,n)}const lr=rt({sqrt_:Dpt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mpt(e){const t=X(e,"x","square"),n={};return et.runKernel("Square",{x:t},n)}const Xe=rt({square_:Mpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ppt(e,t=null,n=!1){let r=X(e,"x","sum");r.dtype==="bool"&&(r=Rt(r,"int32"));const i={x:r},a={axis:t,keepDims:n};return et.runKernel(a0,i,a)}const jt=rt({sum_:Ppt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fpt(e,t="euclidean",n=null,r=!1){e=X(e,"x","norm");const i=mG(e,t,n);let a=i.shape;if(r){const s=ae(n,e.shape);a=bn(i.shape,s)}return nt(i,a)}function mG(e,t,n=null){if(e.rank===0)return vr(e);if(e.rank!==1&&n===null)return mG(nt(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return jt(vr(e),n);if(t===1/0)return aa(vr(e),n);if(t===-1/0)return dv(vr(e),n);if(t==="euclidean"||t===2)return lr(jt(Rl(vr(e),Se(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return aa(jt(vr(e),n[0]),n[1]-1);if(t===1/0)return aa(jt(vr(e),n[1]),n[0]);if(t===-1/0)return dv(jt(vr(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return lr(jt(Xe(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const b0=rt({norm_:Fpt});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lpt(e,t=null,n=!1){return b0(e,"euclidean",t,n)}const Bpt=rt({euclideanNorm_:Lpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zpt(e){const n={x:X(e,"x","exp")};return et.runKernel(mp,n)}const Ma=rt({exp_:zpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jpt(e,t=0){const n=X(e,"x","expandDims","string_or_numeric");V(t<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:t};return et.runKernel(Ib,r,i)}const Er=rt({expandDims_:jpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Upt(e){const n={x:X(e,"x","expm1")};return et.runKernel(gp,n)}const Vpt=rt({expm1_:Upt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wpt(e,t){const n=X(e,"x","tile","string_or_numeric");V(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const r={x:n},i={reps:t};return et.runKernel(Hp,r,i)}const ra=rt({tile_:Wpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gpt(e,t,n,r="float32"){t==null&&(t=e);const i=ie([e,t],r),a=e<=t?e:t;for(let o=0;o<a;++o)i.set(1,o,o);const s=nt(i.toTensor(),[e,t]);if(n==null)return s;if(n.length===1)return ra(Er(s,0),[n[0],1,1]);if(n.length===2)return ra(Er(Er(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return ra(Er(Er(Er(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const gG=rt({eye_:Gpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qpt(e){const n={x:X(e,"x","floor","float32")};return et.runKernel(yp,n)}const x0=rt({floor_:qpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hpt(e,t,n=0,r=0){const i=X(e,"x","gather"),a=X(t,"indices","gather","int32"),s={x:i,indices:a},o={axis:n,batchDims:r};return et.runKernel(Ob,s,o)}const DI=rt({gather_:Hpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xpt(e,t){let n=X(e,"a","greater","string_or_numeric"),r=X(t,"b","greater","string_or_numeric");[n,r]=fn(n,r),Jt(n.shape,r.shape);const i={a:n,b:r};return et.runKernel(Nb,i)}const pi=rt({greater_:Xpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kpt(e,t){let n=X(e,"a","greaterEqual","string_or_numeric"),r=X(t,"b","greaterEqual","string_or_numeric");[n,r]=fn(n,r),Jt(n.shape,r.shape);const i={a:n,b:r};return et.runKernel(bp,i)}const ql=rt({greaterEqual_:Kpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ypt(e){const n={input:X(e,"input","imag")};return et.runKernel(oI,n)}const MI=rt({imag_:Ypt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zpt(e){const n={x:X(e,"x","isFinite")};return et.runKernel(wp,n)}const Qpt=rt({isFinite_:Zpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jpt(e){const n={x:X(e,"x","isInf")};return et.runKernel(Sp,n)}const tmt=rt({isInf_:Jpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function emt(e){const n={x:X(e,"x","isNaN")};return et.runKernel(Cp,n)}const nmt=rt({isNaN_:emt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rmt(e,t=.2){const r={x:X(e,"x","leakyRelu")},i={alpha:t};return et.runKernel(_b,r,i)}const PI=rt({leakyRelu_:rmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imt(e,t){let n=X(e,"a","less","string_or_numeric"),r=X(t,"b","less","string_or_numeric");[n,r]=fn(n,r),Jt(n.shape,r.shape);const i={a:n,b:r};return et.runKernel(Rb,i)}const pv=rt({less_:imt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function amt(e,t){let n=X(e,"a","lessEqual","string_or_numeric"),r=X(t,"b","lessEqual","string_or_numeric");[n,r]=fn(n,r),Jt(n.shape,r.shape);const i={a:n,b:r};return et.runKernel(Db,i)}const ff=rt({lessEqual_:amt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function smt(e,t=5,n=1,r=1,i=.5){const a=X(e,"x","localResponseNormalization");V(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),V(Lc(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let s=a,o=!1;a.rank===3&&(o=!0,s=nt(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:s},c={depthRadius:t,bias:n,alpha:r,beta:i},h=et.runKernel(Lb,l,c);return o?nt(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const omt=rt({localResponseNormalization_:smt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lmt(e){const n={x:X(e,"x","log","float32")};return et.runKernel(Tp,n)}const Pa=rt({log_:lmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function umt(e){const n={x:X(e,"x","log1p")};return et.runKernel($p,n)}const yG=rt({log1p_:umt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cmt(e,t){V(H2(e),()=>"The f passed in variableGrads(f) must be a function"),V(t==null||Array.isArray(t)&&t.every(c=>c instanceof hv),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=t!=null;if(!n){t=[];for(const c in et.registeredVariables)t.push(et.registeredVariables[c])}const r=n?t.filter(c=>!c.trainable):null,i=t.length;t=t.filter(c=>c.trainable),V(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const a=!0,{value:s,grads:o}=et.gradients(e,t,null,a);V(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),V(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);const l={};return t.forEach((c,h)=>{o[h]!=null&&(l[c.name]=o[h])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:s,grads:l}}function Uc(e){return et.customGrad(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fmt(e){const n={x:X(e,"x","neg")};return et.runKernel(Gb,n)}const cn=rt({neg_:fmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hmt(e){const n={x:X(e,"x","softplus")};return et.runKernel(jp,n)}const Yp=rt({softplus_:hmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dmt(e){const t=X(e,"x","logSigmoid");return Uc(r=>({value:cn(Yp(cn(r))),gradFunc:s=>tt(s,cf(cn(r)))}))(t)}const pmt=rt({logSigmoid_:dmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mmt(e,t){let n=X(e,"a","sub"),r=X(t,"b","sub");[n,r]=fn(n,r);const i={a:n,b:r};return et.runKernel(Wp,i)}const qt=rt({sub_:mmt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gmt(e,t=-1){const n=X(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Uc((i,a)=>{const o=aa(i,t,!0),l=qt(i,o),c=qt(Rt(l,"float32"),Pa(jt(Ma(l),t,!0)));return a([c]),{value:c,gradFunc:(d,p)=>{const[g]=p,v=!0,x=Ma(g);return qt(d,tt(jt(d,t,v),x))}}})(n)}const vG=rt({logSoftmax_:gmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ymt(e,t=null,n=!1){const r=X(e,"x","logSumExp"),i=ae(t,r.shape),a=aa(r,i,!0),s=qt(r,a),o=Ma(s),l=jt(o,i),c=Pa(l),h=$t(nt(a,c.shape),c);if(n){const d=bn(h.shape,i);return nt(h,d)}return h}const bG=rt({logSumExp_:ymt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vmt(e,t){const n=X(e,"a","logicalAnd","bool"),r=X(t,"b","logicalAnd","bool");Jt(n.shape,r.shape);const i={a:n,b:r};return et.runKernel(Mb,i)}const bs=rt({logicalAnd_:vmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bmt(e){const n={x:X(e,"x","logicalNot","bool")};return et.runKernel(Pb,n)}const FI=rt({logicalNot_:bmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xmt(e,t){const n=X(e,"a","logicalOr","bool"),r=X(t,"b","logicalOr","bool");Jt(n.shape,r.shape);const i={a:n,b:r};return et.runKernel(Fb,i)}const xG=rt({logicalOr_:xmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wmt(e,t){const n=X(e,"a","logicalXor","bool"),r=X(t,"b","logicalXor","bool");return Jt(n.shape,r.shape),bs(xG(e,t),FI(bs(e,t)))}const Smt=rt({logicalXor_:wmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cmt(e,t,n,r,i){const a=X(e,"x","maxPool"),s=1;let o=a,l=!1;a.rank===3&&(l=!0,o=nt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),V(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),V(ur(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Pr("maxPool",r,i);const c={x:o},h={filterSize:t,strides:n,pad:r,dimRoundingMode:i},d=et.runKernel(zb,c,h);return l?nt(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const LI=rt({maxPool_:Cmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tmt(e,t=[1,1,1],n,r,i,a="NDHWC"){const s=X(e,"x","maxPool3d");let o=s,l=!1;s.rank===4&&(l=!0,o=nt(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),V(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),V(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Pr("maxPool3d",r,i);const c={x:o},h={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:a},d=et.runKernel(jb,c,h);return l?nt(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const $mt=rt({maxPool3d_:Tmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Amt(e,t){let n=X(e,"a","maximum"),r=X(t,"b","maximum");[n,r]=fn(n,r),n.dtype==="bool"&&(n=Rt(n,"int32"),r=Rt(r,"int32")),Jt(n.shape,r.shape);const i={a:n,b:r};return et.runKernel(Ap,i)}const No=rt({maximum_:Amt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kmt(e,t=null,n=!1){const i={x:X(e,"x","mean")},a={axis:t,keepDims:n};return et.runKernel(Ub,i,a)}const vn=rt({mean_:kmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fn(e,t="float32"){if(As(e),t==="complex64"){const r=Fn(e,"float32"),i=Fn(e,"float32");return zc(r,i)}const n=or(pt(e),t);return et.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _o(e,t="float32"){if(As(e),t==="complex64"){const r=_o(e,"float32"),i=Fn(e,"float32");return zc(r,i)}const n=Mk(pt(e),t);return et.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Imt(e,t){let n=X(e,"a","minimum"),r=X(t,"b","minimum");[n,r]=fn(n,r),n.dtype==="bool"&&(n=Rt(n,"int32"),r=Rt(r,"int32")),Jt(n.shape,r.shape);const i={a:n,b:r};return et.runKernel(kp,i)}const Pd=rt({minimum_:Imt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Emt(e,t,n){V(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=X(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");V(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);const i=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)V(t[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),V(t[o][0]>=0&&t[o][0]<=r.shape[o]-i&&t[o][1]>=0&&t[o][1]<=r.shape[o]-i,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-i} or less than 0 for input of shape ${r.shape}`);const a={paddings:t,mode:n},s={x:r};return et.runKernel(Wb,s,a)}const Omt=rt({mirrorPad_:Emt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nmt(e,t){let n=X(e,"a","mod"),r=X(t,"b","mod");[n,r]=fn(n,r);const i={a:n,b:r};return et.runKernel(Ip,i)}const _mt=rt({mod_:Nmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rmt(e,t=null,n=!1){e=X(e,"x","moments");const r=ae(t,e.shape),i=vn(e,r,n);let a=i.shape;n||(a=bn(i.shape,r));const s=Xe(qt(Rt(e,"float32"),nt(i,a))),o=vn(s,r,n);return{mean:i,variance:o}}const BI=rt({moments_:Rmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dmt(e,t){let n=X(e,"a","notEqual","string_or_numeric"),r=X(t,"b","notEqual","string_or_numeric");[n,r]=fn(n,r),Jt(n.shape,r.shape);const i={a:n,b:r};return et.runKernel(qb,i)}const mv=rt({notEqual_:Dmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mmt(e,t,n=1,r=0,i="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const s={indices:X(e,"indices","oneHot","int32")},o={dtype:i,depth:t,onValue:n,offValue:r};return et.runKernel(Xb,s,o)}const wG=rt({oneHot_:Mmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pmt(e){const n={x:X(e,"x","onesLike")};return et.runKernel(Hb,n)}const Li=rt({onesLike_:Pmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fmt(e,t,n=0){const r=X(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:n},a={x:r};return et.runKernel(Yb,a,i)}const zI=rt({pad_:Fmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lmt(e,t,n){const r=X(e,"x","spaceToBatchND");V(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),V(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),V(r.shape.reduce((s,o,l)=>l>0&&l<=t.length?s&&(o+n[l-1][0]+n[l-1][1])%t[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const i={x:r},a={blockShape:t,paddings:n};return et.runKernel(s0,i,a)}const jI=rt({spaceToBatchND_:Lmt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bmt(e,t,n,r,i,a,s){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");const o=X(e,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=nt(o,[1,o.shape[0],o.shape[1],o.shape[2]])),V(ur(a,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${i}'`);const h=zi(l.shape,t,a,i,r),d=[h.dilationHeight,h.dilationWidth];let p;r==="same"?p=jmt([h.filterHeight,h.filterWidth],d):p=[[0,0],[0,0]];const g=d[0]===1&&d[1]===1,[v,x]=zmt([h.inHeight,h.inWidth],d,p),b=g?r:"valid",w=g?l:jI(l,d,v),T=(n==="avg"?()=>II(w,t,a,b,s):()=>LI(w,t,a,b,s))(),$=g?T:EI(T,d,x);return c?nt($,[$.shape[1],$.shape[2],$.shape[3]]):$}function zmt(e,t,n){const r=n.map(h=>h[0]),i=n.map(h=>h[1]),a=e.concat(r,i),s=t.map((h,d)=>(h-a[d]%h)%h),o=i.map((h,d)=>h+s[d]),l=t.map((h,d)=>[r[d],o[d]]),c=t.map((h,d)=>[0,s[d]]);return[l,c]}function jmt(e,t){const r=e.map((s,o)=>s+(s-1)*(t[o]-1)).map(s=>s-1),i=r.map(s=>Math.floor(s/2)),a=r.map((s,o)=>s-i[o]);return r.map((s,o)=>[i[o],a[o]])}const Umt=rt({pool_:Bmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vmt(e,t){const n=X(e,"x","prelu"),r=X(t,"alpha","prelu"),i={x:n,alpha:r};return et.runKernel(Zb,i)}const UI=rt({prelu_:Vmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wmt(e,t=null,n=!1){let r=X(e,"x","prod");r.dtype==="bool"&&(r=Rt(r,"int32"));const i={x:r},a={axis:t,keepDims:n};return et.runKernel(Qb,i,a)}const Gmt=rt({prod_:Wmt});var ny={exports:{}},qmt=ny.exports,xz;function Hmt(){return xz||(xz=1,function(e){(function(t,n,r){function i(l){var c=this,h=o();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=h(" "),c.s1=h(" "),c.s2=h(" "),c.s0-=h(l),c.s0<0&&(c.s0+=1),c.s1-=h(l),c.s1<0&&(c.s1+=1),c.s2-=h(l),c.s2<0&&(c.s2+=1),h=null}function a(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function s(l,c){var h=new i(l),d=c&&c.state,p=h.next;return p.int32=function(){return h.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&a(d,h),p.state=function(){return a(h,{})}),p}function o(){var l=4022871197,c=function(h){h=String(h);for(var d=0;d<h.length;d++){l+=h.charCodeAt(d);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=s:this.alea=s})(qmt,e)}(ny)),ny.exports}var ry={exports:{}},Xmt=ry.exports,wz;function Kmt(){return wz||(wz=1,function(e){(function(t,n,r){function i(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},o===(o|0)?l.x=o:c+=o;for(var h=0;h<c.length+64;h++)l.x^=c.charCodeAt(h)|0,l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function s(o,l){var c=new i(o),h=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,v=(p+g)/(1<<21);while(v===0);return v},d.int32=c.next,d.quick=d,h&&(typeof h=="object"&&a(h,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=s:this.xor128=s})(Xmt,e)}(ry)),ry.exports}var iy={exports:{}},Ymt=iy.exports,Sz;function Zmt(){return Sz||(Sz=1,function(e){(function(t,n,r){function i(o){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var h=0;h<c.length+64;h++)l.x^=c.charCodeAt(h)|0,h==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function s(o,l){var c=new i(o),h=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,v=(p+g)/(1<<21);while(v===0);return v},d.int32=c.next,d.quick=d,h&&(typeof h=="object"&&a(h,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=s:this.xorwow=s})(Ymt,e)}(iy)),iy.exports}var ay={exports:{}},Qmt=ay.exports,Cz;function Jmt(){return Cz||(Cz=1,function(e){(function(t,n,r){function i(o){var l=this;l.next=function(){var h=l.x,d=l.i,p,g;return p=h[d],p^=p>>>7,g=p^p<<24,p=h[d+1&7],g^=p^p>>>10,p=h[d+3&7],g^=p^p>>>3,p=h[d+4&7],g^=p^p<<7,p=h[d+7&7],p=p^p<<13,g^=p^p<<9,h[d]=g,l.i=d+1&7,g};function c(h,d){var p,g=[];if(d===(d|0))g[0]=d;else for(d=""+d,p=0;p<d.length;++p)g[p&7]=g[p&7]<<15^d.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],h.x=g,h.i=0,p=256;p>0;--p)h.next()}c(l,o)}function a(o,l){return l.x=o.x.slice(),l.i=o.i,l}function s(o,l){o==null&&(o=+new Date);var c=new i(o),h=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,v=(p+g)/(1<<21);while(v===0);return v},d.int32=c.next,d.quick=d,h&&(h.x&&a(h,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=s:this.xorshift7=s})(Qmt,e)}(ay)),ay.exports}var sy={exports:{}},tgt=sy.exports,Tz;function egt(){return Tz||(Tz=1,function(e){(function(t,n,r){function i(o){var l=this;l.next=function(){var h=l.w,d=l.X,p=l.i,g,v;return l.w=h=h+1640531527|0,v=d[p+34&127],g=d[p=p+1&127],v^=v<<13,g^=g<<17,v^=v>>>15,g^=g>>>12,v=d[p]=v^g,l.i=p,v+(h^h>>>16)|0};function c(h,d){var p,g,v,x,b,w=[],S=128;for(d===(d|0)?(g=d,d=null):(d=d+"\0",g=0,S=Math.max(S,d.length)),v=0,x=-32;x<S;++x)d&&(g^=d.charCodeAt((x+32)%d.length)),x===0&&(b=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,x>=0&&(b=b+1640531527|0,p=w[x&127]^=g+b,v=p==0?v+1:0);for(v>=128&&(w[(d&&d.length||0)&127]=-1),v=127,x=4*128;x>0;--x)g=w[v+34&127],p=w[v=v+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,w[v]=g^p;h.w=b,h.X=w,h.i=v}c(l,o)}function a(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function s(o,l){o==null&&(o=+new Date);var c=new i(o),h=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,v=(p+g)/(1<<21);while(v===0);return v},d.int32=c.next,d.quick=d,h&&(h.X&&a(h,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=s:this.xor4096=s})(tgt,e)}(sy)),sy.exports}var oy={exports:{}},ngt=oy.exports,$z;function rgt(){return $z||($z=1,function(e){(function(t,n,r){function i(o){var l=this,c="";l.next=function(){var d=l.b,p=l.c,g=l.d,v=l.a;return d=d<<25^d>>>7^p,p=p-g|0,g=g<<24^g>>>8^v,v=v-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^v,l.a=v-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var h=0;h<c.length+20;h++)l.b^=c.charCodeAt(h)|0,l.next()}function a(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function s(o,l){var c=new i(o),h=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,v=(p+g)/(1<<21);while(v===0);return v},d.int32=c.next,d.quick=d,h&&(typeof h=="object"&&a(h,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=s:this.tychei=s})(ngt,e)}(oy)),oy.exports}var ly={exports:{}};const igt={},agt=Object.freeze(Object.defineProperty({__proto__:null,default:igt},Symbol.toStringTag,{value:"Module"})),sgt=t7(agt);var ogt=ly.exports,Az;function lgt(){return Az||(Az=1,function(e){(function(t,n,r){var i=256,a=6,s=52,o="random",l=r.pow(i,a),c=r.pow(2,s),h=c*2,d=i-1,p;function g($,A,I){var O=[];A=A==!0?{entropy:!0}:A||{};var N=w(b(A.entropy?[$,T(n)]:$??S(),3),O),_=new v(O),R=function(){for(var E=_.g(a),F=l,M=0;E<c;)E=(E+M)*i,F*=i,M=_.g(1);for(;E>=h;)E/=2,F/=2,M>>>=1;return(E+M)/F};return R.int32=function(){return _.g(4)|0},R.quick=function(){return _.g(4)/4294967296},R.double=R,w(T(_.S),n),(A.pass||I||function(E,F,M,B){return B&&(B.S&&x(B,_),E.state=function(){return x(_,{})}),M?(r[o]=E,F):E})(R,N,"global"in A?A.global:this==r,A.state)}function v($){var A,I=$.length,O=this,N=0,_=O.i=O.j=0,R=O.S=[];for(I||($=[I++]);N<i;)R[N]=N++;for(N=0;N<i;N++)R[N]=R[_=d&_+$[N%I]+(A=R[N])],R[_]=A;(O.g=function(E){for(var F,M=0,B=O.i,j=O.j,P=O.S;E--;)F=P[B=d&B+1],M=M*i+P[d&(P[B]=P[j=d&j+F])+(P[j]=F)];return O.i=B,O.j=j,M})(i)}function x($,A){return A.i=$.i,A.j=$.j,A.S=$.S.slice(),A}function b($,A){var I=[],O=typeof $,N;if(A&&O=="object")for(N in $)try{I.push(b($[N],A-1))}catch{}return I.length?I:O=="string"?$:$+"\0"}function w($,A){for(var I=$+"",O,N=0;N<I.length;)A[d&N]=d&(O^=A[d&N]*19)+I.charCodeAt(N++);return T(A)}function S(){try{var $;return p&&($=p.randomBytes)?$=$(i):($=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues($)),T($)}catch{var A=t.navigator,I=A&&A.plugins;return[+new Date,t,I,t.screen,T(n)]}}function T($){return String.fromCharCode.apply(0,$)}if(w(r.random(),n),e.exports){e.exports=g;try{p=sgt}catch{}}else r["seed"+o]=g})(typeof self<"u"?self:ogt,[],Math)}(ly)),ly.exports}var f$,kz;function ugt(){if(kz)return f$;kz=1;var e=Hmt(),t=Kmt(),n=Zmt(),r=Jmt(),i=egt(),a=rgt(),s=lgt();return s.alea=e,s.xor128=t,s.xorwow=n,s.xorshift7=r,s.xor4096=i,s.tychei=a,f$=s,f$}var VI=ugt();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SG{constructor(t,n,r,i,a){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const s=a||Math.random();this.random=VI.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let t,n,r=!1;for(;!r;){let i,a,s;do i=2*this.random()-1,a=2*this.random()-1,s=i*i+a*a;while(s>=1||s===0);const o=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*i*o,n=this.mean+this.stdDev*a*o,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class cgt{constructor(t=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=VI.alea(i)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fgt(e,t=0,n=1,r,i){if(As(e),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new SG(t,n,r,!1,i),s=ie(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const hgt=rt({randomNormal_:fgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dgt(e,t=0,n=1,r="float32",i){As(e);const a=ie(e,r),s=new cgt(t,n,null,i);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}const Zp=rt({randomUniform_:dgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fd(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:e,stop:t,step:n,dtype:r};return et.runKernel(pI,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pgt(e){const n={input:X(e,"input","real")};return et.runKernel(mI,n)}const gv=rt({real_:pgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mgt(e){const n={x:X(e,"x","reciprocal")};return et.runKernel(Np,n)}const ggt=rt({reciprocal_:mgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ygt(e){const n={x:X(e,"x","relu")};return et.runKernel(_p,n)}const Hl=rt({relu_:ygt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vgt(e){const n={x:X(e,"x","relu6")};return et.runKernel(Rp,n)}const CG=rt({relu6_:vgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bgt(e,t){const r={x:X(e,"x","reverse")},i={dims:t};return et.runKernel(n0,r,i)}const Dl=rt({reverse_:bgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xgt(e){const n={x:X(e,"x","round")};return et.runKernel(Dp,n)}const TG=rt({round_:xgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wgt(e){const n={x:X(e,"x","rsqrt","float32")};return et.runKernel(Mp,n)}const $G=rt({rsqrt_:wgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sgt(e){const n={x:X(e,"x","selu")};return et.runKernel(Pp,n)}const AG=rt({selu_:Sgt});function Cgt(e,t,n,r,i,a=[1,1],s="NHWC"){const o=X(e,"x","separableConv2d"),l=X(t,"depthwiseFilter","separableConv2d"),c=X(n,"pointwiseFilter","separableConv2d");let h=o,d=!1;if(o.rank===3&&(d=!0,h=nt(o,[1,o.shape[0],o.shape[1],o.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");V(h.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${h.rank}.`),V(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),V(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),V(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),V(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const p=l.shape[2],g=l.shape[3];V(c.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${c.shape[2]}.`);const v=_I(h,l,r,i,s,a),b=_l(v,c,1,"valid",s);return d?nt(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const kG=rt({separableConv2d_:Cgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tgt(e){const n={x:X(e,"x","sign")};return et.runKernel(Bp,n)}const $gt=rt({sign_:Tgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Agt(e){const n={x:X(e,"x","sin","float32")};return et.runKernel(Fp,n)}const IG=rt({sin_:Agt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kgt(e){const n={x:X(e,"x","sinh")};return et.runKernel(Lp,n)}const EG=rt({sinh_:kgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Igt(e,t,n){const r=X(e,"x","slice1d");return V(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),je(r,[t],[n])}const WI=rt({slice1d_:Igt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Egt(e,t,n){const r=X(e,"x","slice2d");return V(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),je(r,t,n)}const OG=rt({slice2d_:Egt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ogt(e,t,n){const r=X(e,"x","slice3d");return V(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),je(r,t,n)}const GI=rt({slice3d_:Ogt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ngt(e,t,n){const r=X(e,"x","slice4d");return V(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),je(r,t,n)}const yv=rt({slice4d_:Ngt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _gt(e,t=-1){const n=X(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},i={dim:t};return et.runKernel(l0,r,i)}const qI=rt({softmax_:_gt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rgt(e){V(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return et.runKernel(rI,t)}const NG=rt({fft_:Rgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dgt(e){V(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return et.runKernel(sI,t)}const uA=rt({ifft_:Dgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mgt(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const i=nt(e,[n,t]);r=uA(i)}else{const i=[n,2*(t-1)],a=nt(gv(e),[n,t]),s=nt(MI(e),[n,t]),o=Dl(je(a,[0,1],[n,t-2]),1),l=tt(Dl(je(s,[0,1],[n,t-2]),1),Se(-1)),c=_r([a,o],1),h=_r([s,l],1),d=nt(zc(c,h),[i[0],i[1]]);r=uA(d)}if(r=gv(r),e.rank===3&&e.shape[0]!==0){const i=r,a=e.shape[0];r=nt(r,[a,r.shape[0]/a,r.shape[1]]),i.dispose()}return r}const Pgt=rt({irfft_:Mgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fgt(e,t,n=0){const i={x:X(e,"x","split")},a={numOrSizeSplits:t,axis:n};return et.runKernel(o0,i,a)}const hi=rt({split_:Fgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lgt(e,t){V(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];const r=e.size/n;let i;if(t!=null&&t<n){const v=e.shape.map(b=>0),x=e.shape.map(b=>b);x[e.shape.length-1]=t,i=je(e,v,x),n=t}else if(t!=null&&t>n){const v=e.shape.map(x=>x);v[e.shape.length-1]=t-n,i=_r([e,Fn(v)],e.shape.length-1),n=t}else i=e;const a=me(i),s=nt(zc(i,a),[r,n]),o=NG(s),l=Math.floor(n/2)+1,c=gv(o),h=MI(o),d=hi(c,[l,n-l],c.shape.length-1),p=hi(h,[l,n-l],h.shape.length-1),g=i.shape.slice();return g[i.shape.length-1]=l,nt(zc(d[0],p[0]),g)}const Bgt=rt({rfft_:Lgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zgt(e,t){let n=X(e,"a","squaredDifference"),r=X(t,"b","squaredDifference");[n,r]=fn(n,r),Jt(n.shape,r.shape);const i={a:n,b:r},a={};return et.runKernel(Vp,i,a)}const jgt=rt({squaredDifference_:zgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ugt(e,t){const n=X(e,"x","squeeze","string_or_numeric");return nt(n,ko(n.shape,t).newShape)}const Qp=rt({squeeze_:Ugt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vgt(e,t=0){const n=YW(e,"tensors","stack","string_or_numeric");V(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&V(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:t};return et.runKernel(Kb,r,i)}const xs=rt({stack_:Vgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wgt(e,t=0){const r={x:X(e,"x","step")},i={alpha:t};return et.runKernel(Xp,r,i)}const Jp=rt({step_:Wgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ggt(e,t,n,r,i=0,a=0,s=0,o=0,l=0){const h={x:X(e,"x","stridedSlice","string_or_numeric")},d={begin:t,end:n,strides:r,beginMask:i,endMask:a,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};return et.runKernel(xI,h,d)}const qgt=rt({stridedSlice_:Ggt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hgt(e){const n={x:X(e,"x","tan","float32")};return et.runKernel(Gp,n)}const Xgt=rt({tan_:Hgt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xr(e,t){sW(e);const n=d0(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return p0(e,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lc(e,t,n){if(sW(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=d0(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return p0(e,t,r,n)}function _G(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(a+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(a+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw new Error(a+` update.rank != ${i+e.length-r}`);for(let s=0;s<i;++s)if(n.shape[s]!==t.shape[s])throw new Error(a+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${t.shape[s]}).`);for(let s=0;s<n.rank-i;++s)if(n.shape[s+i]!==e[s+r])throw new Error(a+` updates.shape[${s+i}] (${n.shape[s+i]}) != shape[${s+i}] (${e[s+i]})`)}function Kgt(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}_G(n,t,e)}function Xl(e,t,n){const r=t.shape.length,i=r>1?t.shape[r-1]:1,a=n.length;let s=1;for(let d=i;d<a;++d)s*=n[d];const o=i<1?1:i,l=pt(t.shape)/o,c=[...Bt(n.slice(0,i)),1],h=pt(n);return{sliceRank:i,numUpdates:l,sliceSize:s,strides:c,outputSize:h}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ygt(e,t=1,n=!0){const r=X(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${t}`);const a={x:r},s={k:t,sorted:n},[o,l]=et.runKernel(wI,a,s);return{values:o,indices:l}}const Zgt=rt({topk_:Ygt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qgt(e,t=0,n=1,r,i){if(As(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new SG(t,n,r,!0,i),s=ie(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}const RG=rt({truncatedNormal_:Qgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jgt(e,t=0){const n=X(e,"x","unique","string_or_numeric");V(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:t},[a,s]=et.runKernel(CI,r,i);return{values:a,indices:s}}const tyt=rt({unique_:Jgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eyt(e,t,n){const r=X(e,"x","unsortedSegmentSum"),i=X(t,"segmentIds","unsortedSegmentSum","int32");V(Lc(n),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:i},s={numSegments:n};return et.runKernel(c0,a,s)}const DG=rt({unsortedSegmentSum_:eyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nyt(e,t=0){const n=X(e,"x","unstack","string_or_numeric");V(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:t};return et.runKernel(u0,r,i)}const Ml=rt({unstack_:nyt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ryt(e,t=!0,n,r){return et.makeVariable(e,t,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MG(e,t){const n=[];for(let a=0;a<t.length;a++)t[a]&&n.push(a);const r=ie(e,"int32"),i=ie([n.length,e.length],"int32");for(let a=0;a<n.length;a++){const s=r.indexToLoc(n[a]),o=a*e.length;i.values.set(s,o)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iyt(e,t,n){const r=X(e,"x","transpose");if(t==null&&(t=r.shape.map((s,o)=>o).reverse()),V(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(s=>{V(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();const i={x:r},a={perm:t};return r.dtype==="complex64"?st(()=>{let s=gv(r),o=MI(r);return s=et.runKernel(sc,{x:s},a),o=et.runKernel(sc,{x:o},a),n&&(o=cn(o)),zc(s,o)}):et.runKernel(sc,i,a)}const pe=rt({transpose_:iyt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ayt(e,t){if(t==null)return e.shape.slice();if(Te(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function syt(e,t,n,r){const i=X(e,"x","dropout");if(V(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),V(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof Cn?i.clone():i;const a=ayt(i,n),s=1-t,o=Ut(x0($t(Zp(a,0,1,"float32",r),s)),s);return tt(i,o)}const oyt=rt({dropout_:syt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lyt(e,t,n,r,i,a="NHWC",s){let o=e;e.rank===3&&(o=nt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=nt(t,[1,t.shape[0],t.shape[1],t.shape[2]])),V(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),V(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),V(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=a==="NHWC"?o.shape[3]:o.shape[1],h=a==="NHWC"?l.shape[3]:l.shape[1];V(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),V(h===n[3],()=>`Error in conv2dDerFilter: depth of dy (${h}) must match output depth for filter (${n[3]}).`),Pr("conv2dDerFilter",i,s);const d={x:o,dy:l},p={strides:r,pad:i,dataFormat:a,dimRoundingMode:s,filterShape:n};return et.runKernel(qk,d,p)}const HI=rt({conv2DBackpropFilter_:lyt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XI(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return tt(e,Jp(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function KI(e,t){let n=t;const r=En(e.shape,t.shape);return r.length>0&&(n=jt(n,r)),nt(n,e.shape)}function YI(e,t,n,r){if(t==="linear")return e;if(t==="relu")return Hl(e);if(t==="elu")return v0(e);if(t==="relu6")return CG(e);if(t==="prelu")return UI(e,n);if(t==="leakyrelu")return PI(e,r);if(t==="sigmoid")return cf(e);throw new Error(`Unknown fused activation ${t}.`)}const ZI=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uyt({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:h}){if(l=l||"linear",ZI(et.state.gradientDepth,l)===!1){V(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let I=_l(e,t,n,r,i,a,s);return o!=null&&(I=$t(I,o)),YI(I,l,c,h)}const d=X(e,"x","conv2d","float32"),p=X(t,"filter","conv2d","float32");let g=d,v=!1;d.rank===3&&(v=!0,g=nt(d,[1,d.shape[0],d.shape[1],d.shape[2]])),V(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),V(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Pr("fused conv2d",r,s);const x=i==="NHWC"?g.shape[3]:g.shape[1];V(p.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${p.shape[2]}.`),V(ur(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);const b=Yn(g.shape,p.shape,n,a,r,s);let w;o!=null&&(w=X(o,"bias","fused conv2d"),[w]=fn(w,d),i==="NHWC"?Jt(b.outShape,w.shape):(V(w.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${w.shape.length}.`),V(w.shape.length===0||w.shape[0]===b.outChannels||w.shape[0]===1,()=>`Error in fused conv2d: bias shape (${w.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let S;if(c!=null){const I=c.shape;if(V(I.length<=1||I.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${I.length}.`),I.length===1)V(I[0]===1||I[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the number of output channels (${b.outChannels}).`);else if(I.length===3)try{Jt(I,b.outShape)}catch{const N=`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(N)}S=X(c,"prelu weights","fused conv2d")}const T=(I,O)=>{V(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[N,_,R,E]=O,F=XI(I,R,l);V(Ol(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const M=OI(_.shape,F,N,n,r),B=HI(_,F,N.shape,n,r),j=[M,B];if(E!=null){const P=KI(E,F);j.push(P)}return j},$={x:g,filter:p,bias:w,preluActivationWeights:S},A={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s,activation:l,leakyreluAlpha:h};return o==null?Uc((O,N,_)=>{let R=et.runKernel(cv,$,A);return _([N,O,R]),v&&(R=nt(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:T}})(g,p):Uc((O,N,_,R)=>{let E=et.runKernel(cv,$,A);return R([N,O,E,_]),v&&(E=nt(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:T}})(g,p,w)}const cyt=rt({fusedConv2d_:uyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fyt(e,t,n,r,i,a=[1,1],s){let o=e;e.rank===3&&(o=nt(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=nt(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:o,dy:l},h={strides:r,pad:i,dimRoundingMode:s,dilations:a,filterShape:n};return et.runKernel(Jk,c,h)}const hyt=rt({depthwiseConv2dNativeBackpropFilter_:fyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dyt(e,t,n,r,i,a=[1,1],s){let o=t,l=!1;t.rank===3&&(l=!0,o=nt(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:o,filter:n},h={strides:r,pad:i,dimRoundingMode:s,dilations:a,inputShape:e},d=et.runKernel(tI,c,h);return l?nt(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const pyt=rt({depthwiseConv2dNativeBackpropInput_:dyt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function myt({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:s,leakyreluAlpha:o=.2}){if(ZI(et.state.gradientDepth,a)===!1){let E=we(e,t,n,r);return i!=null&&(E=$t(E,i)),YI(E,a,s,o)}let l=X(e,"a","fused matMul"),c=X(t,"b","fused matMul");[l,c]=fn(l,c);const h=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],g=r?c.shape[c.rank-2]:c.shape[c.rank-1],v=l.shape.slice(0,-2),x=c.shape.slice(0,-2),b=pt(v),w=pt(x);V(h===d,()=>`Error in fused matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const T=Jt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,g]),$=n?nt(l,[b,h,p]):nt(l,[b,p,h]),A=r?nt(c,[w,g,d]):nt(c,[w,d,g]);let I;i!=null&&(I=X(i,"bias","fused matMul"),[I]=fn(I,l),Jt(T,I.shape));let O;s!=null&&(O=X(s,"prelu weights","fused matMul"));const N=(E,F)=>{const[M,B,j,P]=F,U=XI(nt(E,j.shape),j,a);let W,q;if(!n&&!r?(W=we(U,B,!1,!0),q=we(M,U,!0,!1)):!n&&r?(W=we(U,B,!1,!1),q=we(U,M,!0,!1)):n&&!r?(W=we(B,U,!1,!0),q=we(M,U,!1,!1)):(W=we(B,U,!0,!0),q=we(U,M,!0,!0)),i!=null){const L=KI(P,U);return[W,q,L]}else return[W,q]},_={a:$,b:A,bias:I,preluActivationWeights:O},R={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:o};return i==null?Uc((F,M,B)=>{const j=et.runKernel(uv,_,R);return B([F,M,j]),{value:nt(j,T),gradFunc:N}})($,A):Uc((F,M,B,j)=>{const P=et.runKernel(uv,_,R);return j([F,M,P,B]),{value:nt(P,T),gradFunc:N}})($,A,I)}const Iz=rt({fusedMatMul_:myt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gyt(e,t,n,r,i="bilinear",a=0){const s=X(e,"image","cropAndResize"),o=X(t,"boxes","cropAndResize","float32"),l=X(n,"boxInd","cropAndResize","int32"),c=o.shape[0];V(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),V(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),V(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),V(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),V(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),V(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const h={image:s,boxes:o,boxInd:l},d={method:i,extrapolationValue:a,cropSize:r};return et.runKernel(Yk,h,d)}const yyt=rt({cropAndResize_:gyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vyt(e){const t=X(e,"image","flipLeftRight","float32");V(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t};return et.runKernel(aI,n,{})}const byt=rt({flipLeftRight_:vyt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xyt(e){const t=X(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];V(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),V(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(t.rank);return i.fill(1,0,n),i[n]=3,ra(t,i)}const wyt=rt({grayscaleToRGB_:xyt});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Syt(e){const t=X(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];V(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),V(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=t.dtype,a=Rt(t,"float32"),s=Xr([.2989,.587,.114]);let o;switch(t.rank){case 2:o=Rh("ij,j->i",a,s);break;case 3:o=Rh("ijk,k->ij",a,s);break;case 4:o=Rh("ijkl,l->ijk",a,s);break;case 5:o=Rh("ijklm,m->ijkl",a,s);break;case 6:o=Rh("ijklmn,n->ijklm",a,s);break;default:throw new Error("Not a valid tensor rank.")}return o=Er(o,-1),Rt(o,i)}const Cyt=rt({rgbToGrayscale_:Syt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tyt(e,t,n=0,r=.5){const i=X(e,"image","rotateWithOffset","float32");V(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const a={image:i},s={radians:t,fillValue:n,center:r};return et.runKernel(TI,a,s)}const $yt=rt({rotateWithOffset_:Tyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hf(e,t,n,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);const s=e.shape[0];return n=Math.min(n,s),V(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),V(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),V(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),V(t.rank===1,()=>"scores must be a 1D tensor"),V(t.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${t.shape[0]}`),V(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ayt(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=X(e,"boxes","nonMaxSuppression","float32"),s=X(t,"scores","nonMaxSuppression","float32"),o=hf(a,s,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return et.runKernel(fI,{boxes:a,scores:s},l)}const kyt=rt({nonMaxSuppression_:Ayt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iyt(e,t,n){const r=Eyt(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function Eyt(e,t,n){return Nyt(e,t,n||Oyt)}function Oyt(e,t){return e>t?1:e<t?-1:0}function Nyt(e,t,n){let r=0,i=e.length,a=0,s=!1;for(;r<i;){a=r+(i-r>>>1);const o=n(t,e[a]);o>0?r=a+1:(i=a,s=!o)}return s?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QI(e,t,n,r,i){return eE(e,t,n,r,i,0)}function JI(e,t,n,r,i,a){return eE(e,t,n,r,i,0,!1,a,!0)}function tE(e,t,n,r,i,a){return eE(e,t,n,r,i,a,!0)}function eE(e,t,n,r,i,a,s=!1,o=!1,l=!1){const c=[];for(let b=0;b<t.length;b++)t[b]>i&&c.push({score:t[b],boxIndex:b,suppressBeginIndex:0});c.sort(Ez);const h=a>0?-.5/a:0,d=[],p=[];for(;d.length<n&&c.length>0;){const b=c.pop(),{score:w,boxIndex:S,suppressBeginIndex:T}=b;if(w<i)break;let $=!1;for(let A=d.length-1;A>=T;--A){const I=_yt(e,S,d[A]);if(I>=r){$=!0;break}if(b.score=b.score*Ryt(r,h,I),b.score<=i)break}b.suppressBeginIndex=d.length,$||(b.score===w?(d.push(S),p.push(b.score)):b.score>i&&Iyt(c,b,Ez))}const g=d.length,v=n-g;o&&v>0&&(d.push(...new Array(v).fill(0)),p.push(...new Array(v).fill(0)));const x={selectedIndices:d};return s&&(x.selectedScores=p),l&&(x.validOutputs=g),x}function _yt(e,t,n){const r=e.subarray(t*4,t*4+4),i=e.subarray(n*4,n*4+4),a=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),h=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),g=(o-a)*(l-s),v=(d-c)*(p-h);if(g<=0||v<=0)return 0;const x=Math.max(a,c),b=Math.max(s,h),w=Math.min(o,d),S=Math.min(l,p),T=Math.max(w-x,0)*Math.max(S-b,0);return T/(g+v-T)}function Ryt(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function Ez(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Dyt(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=X(e,"boxes","nonMaxSuppressionAsync"),s=X(t,"scores","nonMaxSuppressionAsync"),o=hf(a,s,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;const l=await Promise.all([a.data(),s.data()]),c=l[0],h=l[1],{selectedIndices:d}=QI(c,h,n,r,i);return a!==e&&a.dispose(),s!==t&&s.dispose(),Xr(d,"int32")}const Myt=Dyt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pyt(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const s=X(e,"boxes","nonMaxSuppression"),o=X(t,"scores","nonMaxSuppression"),l=hf(s,o,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;const c={boxes:s,scores:o},h={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a},d=et.runKernel(dI,c,h);return{selectedIndices:d[0],selectedScores:d[1]}}const Fyt=rt({nonMaxSuppressionWithScore_:Pyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Lyt(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const s=X(e,"boxes","nonMaxSuppressionAsync"),o=X(t,"scores","nonMaxSuppressionAsync"),l=hf(s,o,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;const c=await Promise.all([s.data(),o.data()]),h=c[0],d=c[1],{selectedIndices:p,selectedScores:g}=tE(h,d,n,r,i,a);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:Xr(p,"int32"),selectedScores:Xr(g)}}const Byt=Lyt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zyt(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const s=X(e,"boxes","nonMaxSuppression"),o=X(t,"scores","nonMaxSuppression"),l=hf(s,o,n,r,i,null),c=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,p={boxes:s,scores:o},g={maxOutputSize:c,iouThreshold:h,scoreThreshold:d,padToMaxOutputSize:a},v=et.runKernel(hI,p,g);return{selectedIndices:v[0],validOutputs:v[1]}}const jyt=rt({nonMaxSuppressionPadded_:zyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Uyt(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const s=X(e,"boxes","nonMaxSuppressionAsync"),o=X(t,"scores","nonMaxSuppressionAsync"),l=hf(s,o,n,r,i,null),c=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,[p,g]=await Promise.all([s.data(),o.data()]),{selectedIndices:v,validOutputs:x}=JI(p,g,c,h,d,a);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:Xr(v,"int32"),validOutputs:Se(x,"int32")}}const Vyt=Uyt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wyt(e,t,n=!1,r=!1){const i=X(e,"images","resizeBilinear");V(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),V(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),V(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=i,s=!1;i.rank===3&&(s=!0,a=nt(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},c=et.runKernel(e0,o,l);return s?nt(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const PG=rt({resizeBilinear_:Wyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gyt(e,t,n=!1,r=!1){const i=X(e,"images","resizeNearestNeighbor");V(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),V(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),V(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),V(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=i,s=!1;i.rank===3&&(s=!0,a=nt(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const o={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},c=et.runKernel(t0,o,l);return s?nt(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const FG=rt({resizeNearestNeighbor_:Gyt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qyt(e,t="binary",n=!1,r=.5){const i=X(e,"image","threshold"),a=.2989,s=.587,o=.114,l=i.shape[0]*i.shape[1];let c=tt(Xr([r]),255),h,d,p,g;if(V(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),V(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),V(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),V(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),i.shape[2]===3){[h,d,p]=hi(i,[1,1,1],-1);const b=tt(h,a),w=tt(d,s),S=tt(p,o);g=$t($t(b,w),S)}else g=e;if(t==="otsu"){const b=Vdt(Rt(TG(g),"int32"),ZW([]),256);c=Hyt(b,l)}const v=n?ff(g,c):pi(g,c);return Rt(tt(v,255),"int32")}function Hyt(e,t){let n=Xr([-1]),r=Xr([0]),i=Xr([0]),a,s,o,l,c,h;for(let d=0;d<e.size-1;d++){a=je(e,0,d+1),s=je(e,d+1),c=Ut(jt(a),t),h=Ut(jt(s),t);const p=jt(tt(a,Fd(0,a.size)));o=Ut(p,jt(a));const g=y0(s.shape,a.size),v=$t(Fd(0,s.size),g),x=tt(s,v);l=Ut(jt(x),jt(s));const b=qt(o,l),w=qt(o,l),S=tt(c,h);i=tt(tt(S,b),w);const T=pi(i,r);r=Cr(T,i,r),n=Cr(T,Xr([d]),n)}return n}const Xyt=rt({threshold_:qyt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kyt(e,t,n="nearest",r="constant",i=0,a){const s=X(e,"image","transform","float32"),o=X(t,"transforms","transform","float32");V(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),V(o.rank===2&&(o.shape[0]===s.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),V(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const l={image:s,transforms:o},c={interpolation:n,fillMode:r,fillValue:i,outputShape:a};return et.runKernel(SI,l,c)}const Yyt=rt({transform_:Kyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zyt(e,t,n){const r=X(e,"a","bandPart");V(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[a,s]=r.shape.slice(-2);let o,l;typeof t=="number"?(V(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),V(t<=a,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${a}).`),o=X(t<0?a:t,"numLower","bandPart")):(V(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Cr(pv(t,0),a,Pd(t,a))),typeof n=="number"?(V(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),V(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),l=X(n<0?s:n,"numUpper","bandPart")):(V(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Cr(pv(n,0),s,Pd(n,s)));const c=nt(Fd(0,a,1,"int32"),[-1,1]),h=Fd(0,s,1,"int32"),d=qt(c,h),p=bs(ff(d,o),ql(d,cn(l))),g=Fn([a,s],r.dtype);return nt(xs(Ml(nt(r,[-1,a,s])).map(v=>Cr(p,v,g))),i)}const Qyt=rt({bandPart_:Zyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jyt(e){let t;if(Array.isArray(e)){t=!1,V(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=e[0].shape[0];for(let a=1;a<e.length;++a)V(e[a].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[a].shape[0]} vs. ${i})`)}else t=!0,e=hi(e,e.shape[0],0).map(i=>Qp(i,[0]));V(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],r=e;for(let i=0;i<e.length;++i)n.push(et.tidy(()=>{let a=r[i];if(i>0)for(let s=0;s<i;++s){const o=tt(jt(tt(n[s],a)),n[s]);a=qt(a,o)}return Ut(a,b0(a,"euclidean"))}));return t?xs(n,0):n}const tvt=rt({gramSchmidt_:Jyt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function evt(e,t=!1){if(V(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return Oz(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((l,c)=>l*c),r=Ml(nt(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],a=[];r.forEach(l=>{const[c,h]=Oz(l,t);i.push(c),a.push(h)});const s=nt(xs(i,0),e.shape),o=nt(xs(a,0),e.shape);return[s,o]}}function Oz(e,t=!1){return et.tidy(()=>{V(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],r=e.shape[1];let i=gG(n),a=vl(e);const s=lc([[1]],[1,1]);let o=vl(s);const l=n>=r?r:n;for(let c=0;c<l;++c){const h=a,d=o,p=i;[o,a,i]=et.tidy(()=>{const g=je(a,[c,c],[n-c,1]),v=b0(g),x=je(a,[c,c],[1,1]),b=Cr(pi(x,0),lc([[-1]]),lc([[1]])),w=qt(x,tt(b,v)),S=Ut(g,w);S.shape[0]===1?o=vl(s):o=_r([s,je(S,[1,0],[S.shape[0]-1,S.shape[1]])],0);const T=cn(Ut(we(b,w),v)),$=je(a,[c,0],[n-c,r]),A=tt(T,o),I=pe(o);if(c===0)a=qt($,we(A,we(I,$)));else{const _=qt($,we(A,we(I,$)));a=_r([je(a,[0,0],[c,r]),_],0)}const O=pe(A),N=je(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=qt(N,we(we(N,o),O));else{const _=qt(N,we(we(N,o),O));i=_r([je(i,[0,0],[n,c]),_],1)}return[o,a,i]}),le([h,d,p])}return!t&&n>r&&(i=je(i,[0,0],[n,r]),a=je(a,[0,0],[r,r])),[i,a]})}const nvt=rt({qr_:evt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cs={flipLeftRight:byt,grayscaleToRGB:wyt,resizeNearestNeighbor:FG,resizeBilinear:PG,rgbToGrayscale:Cyt,rotateWithOffset:$yt,cropAndResize:yyt,nonMaxSuppression:kyt,nonMaxSuppressionAsync:Myt,nonMaxSuppressionWithScore:Fyt,nonMaxSuppressionWithScoreAsync:Byt,nonMaxSuppressionPadded:jyt,nonMaxSuppressionPaddedAsync:Vyt,threshold:Xyt,transform:Yyt},rvt={bandPart:Qyt,gramSchmidt:tvt,qr:nvt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ivt=new Map,avt=new Map;class df{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}}class Oi{constructor(){this.classNameMap={}}static getMap(){return Oi.instance==null&&(Oi.instance=new Oi),Oi.instance}static register(t){Oi.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function St(e,t,n){V(e.className!=null,()=>"Class being registered does not have the static className property defined."),V(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),V(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=e.className);const r=n,i=t+">"+r;return Oi.register(e),ivt.set(i,e),avt.set(e,i),e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ro extends df{minimize(t,n=!1,r){const{value:i,grads:a}=this.computeGradients(t,r);if(r!=null){const s=r.map(o=>({name:o.name,tensor:a[o.name]}));this.applyGradients(s)}else this.applyGradients(a);return le(a),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return cmt(t,n)}dispose(){this.iterations_!=null&&le(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Se(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(Ro,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LG extends Ro{static get className(){return"Adadelta"}constructor(t,n,r=null){super(),this.learningRate=t,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=et.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const a=et.registeredVariables[r],s=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:st(()=>me(a).variable(s))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:st(()=>me(a).variable(s))});const o=Array.isArray(t)?t[i].tensor:t[r];if(o==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;st(()=>{const h=$t(tt(l,this.rho),tt(Xe(o),1-this.rho)),d=tt(Ut(lr($t(c,this.epsilon)),lr($t(l,this.epsilon))),o),p=$t(tt(c,this.rho),tt(Xe(d),1-this.rho));l.assign(h),c.assign(p);const g=$t(tt(d,-this.learningRate),a);a.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(le(this.accumulatedGrads.map(t=>t.variable)),le(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=t.length/2,r=!1;this.accumulatedGrads=t.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=t.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BG extends Ro{static get className(){return"Adagrad"}constructor(t,n=.1){super(),this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const a=et.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:st(()=>y0(a.shape,this.initialAccumulatorValue).variable(!1))});const s=Array.isArray(t)?t[i].tensor:t[r];if(s==null)return;const o=this.accumulatedGrads[i].variable;st(()=>{const l=$t(o,Xe(s));o.assign(l);const c=$t(tt(Ut(s,lr($t(l,et.backend.epsilon()))),-this.learningRate),a);a.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&le(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulatedGrads=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zG extends Ro{static get className(){return"Adam"}constructor(t,n,r,i=null){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],st(()=>{this.accBeta1=Se(n).variable(),this.accBeta2=Se(r).variable()}),i==null&&(this.epsilon=et.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);st(()=>{const r=qt(1,this.accBeta1),i=qt(1,this.accBeta2);n.forEach((a,s)=>{const o=et.registeredVariables[a],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${a}/m`,variable:st(()=>me(o).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${a}/v`,variable:st(()=>me(o).variable(l))});const c=Array.isArray(t)?t[s].tensor:t[a];if(c==null)return;const h=this.accumulatedFirstMoment[s].variable,d=this.accumulatedSecondMoment[s].variable,p=$t(tt(h,this.beta1),tt(c,1-this.beta1)),g=$t(tt(d,this.beta2),tt(Xe(c),1-this.beta2)),v=Ut(p,r),x=Ut(g,i);h.assign(p),d.assign(g);const b=$t(tt(Ut(v,$t(lr(x),this.epsilon)),-this.learningRate),o);o.assign(b)}),this.accBeta1.assign(tt(this.accBeta1,this.beta1)),this.accBeta2.assign(tt(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&le(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&le(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),st(()=>{this.accBeta1.assign(Rl(this.beta1,this.iterations_+1)),this.accBeta2.assign(Rl(this.beta2,this.iterations_+1))});const n=t.length/2,r=!1;this.accumulatedFirstMoment=t.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jG extends Ro{static get className(){return"Adamax"}constructor(t,n,r,i=null,a=0){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],st(()=>{this.iteration=Se(0).variable(),this.accBeta1=Se(n).variable()}),i==null&&(this.epsilon=et.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);st(()=>{const r=qt(1,this.accBeta1),i=Ut(-this.learningRate,$t(tt(this.iteration,this.decay),1));n.forEach((a,s)=>{const o=et.registeredVariables[a],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${a}/m`,variable:me(o).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${a}/v`,variable:me(o).variable(l)});const c=Array.isArray(t)?t[s].tensor:t[a];if(c==null)return;const h=this.accumulatedFirstMoment[s].variable,d=this.accumulatedWeightedInfNorm[s].variable,p=$t(tt(h,this.beta1),tt(c,1-this.beta1)),g=tt(d,this.beta2),v=vr(c),x=No(g,v);h.assign(p),d.assign(x);const b=$t(tt(Ut(i,r),Ut(p,$t(x,this.epsilon))),o);o.assign(b)}),this.iteration.assign($t(this.iteration,1)),this.accBeta1.assign(tt(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&le(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&le(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nE extends Ro{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const a=Array.isArray(t)?t[i].tensor:t[r];if(a==null)return;const s=et.registeredVariables[r];st(()=>{const o=$t(tt(this.c,a),s);s.assign(o)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=Ia(Se(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UG extends nE{static get className(){return"Momentum"}constructor(t,n,r=!1){super(t),this.learningRate=t,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Se(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const a=et.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:st(()=>me(a).variable(!1))});const s=this.accumulations[i].variable,o=Array.isArray(t)?t[i].tensor:t[r];o!=null&&st(()=>{let l;const c=$t(tt(this.m,s),o);this.useNesterov?l=$t(tt(this.c,$t(o,tt(c,this.m))),a):l=$t(tt(this.c,c),a),s.assign(c),a.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&le(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulations=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VG extends Ro{static get className(){return"RMSProp"}constructor(t,n=.9,r=0,i=null,a=!1){if(super(),this.learningRate=t,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,i==null&&(this.epsilon=et.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,i)=>{const a=et.registeredVariables[r],s=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:st(()=>me(a).variable(s))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:st(()=>me(a).variable(s))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:st(()=>me(a).variable(s))});const o=Array.isArray(t)?t[i].tensor:t[r];if(o==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;st(()=>{const h=$t(tt(l,this.decay),tt(Xe(o),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,p=$t(tt(d,this.decay),tt(o,1-this.decay)),g=Ut(tt(o,this.learningRate),lr(qt(h,$t(Xe(p),this.epsilon)))),v=$t(tt(c,this.momentum),g);l.assign(h),d.assign(p),c.assign(v);const x=qt(a,v);a.assign(x)}else{const d=$t(tt(l,this.decay),tt(Xe(o),1-this.decay)),p=$t(tt(c,this.momentum),Ut(tt(o,this.learningRate),lr($t(d,this.epsilon))));l.assign(d),c.assign(p);const g=qt(a,p);a.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&le(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&le(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&le(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=this.centered?t.length/3:t.length/2,r=!1;this.accumulatedMeanSquares=t.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=t.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const svt=[LG,BG,zG,jG,UG,VG,nE];function ovt(){for(const e of svt)St(e)}function rE(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(pt(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const i=t.shape,a=i[i.length-1];let s=1;for(let d=0;d<i.length-1;++d)s*=i[d];const o=e.shape,l=i.slice();l.pop();let c=1;for(let d=a;d<n;++d)c*=o[d],l.push(o[d]);const h=[...Bt(e.shape).map(d=>d/c),1].slice(0,a);return[l,s,c,h]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cA=-2,lvt=-1;function iE(e,t,n){const r=e.shape.length;V(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),V(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)V(t[i]+n[i]<=e.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`)}function uvt(e){const t=[];let n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function aE(e,t,n){const r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function WG(e,t,n,r){const i=[...e];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<n;a++)a===0?i[t]=1:(i.splice(t,0,1),i.pop());return i}function GG(e,t,n){return n<=e?n:n-(t-1)}function qG(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function cvt(e,t,n,r,i,a,s,o,l){const c=e.length;let h=new Array(c),d=new Array(c),p=new Array(c);if(t.length&&n>0){const g=t[0],v=n+1;h=HG(s,g,v,r,e),d=XG(o,g,v,i,e),p=WG(a,g,v,e)}else for(let g=0;g<c;g++)h[g]=YG(s,r,a,e,g,l),d[g]=ZG(o,i,a,e,g,l),p[g]=KG(a,g,l);return{begin:h,end:d,strides:p}}function HG(e,t,n,r,i){const a=[...i],s=qG(n,t);for(let o=0;o<a.length;o++)if(s.indexOf(o)>-1)a[o]=0;else{const l=GG(t,n,o);let c=r[l];e&1<<l&&(c=0),a[o]=c}return a}function XG(e,t,n,r,i){const a=[...i],s=qG(n,t);for(let o=0;o<a.length;o++)if(s.indexOf(o)>-1)a[o]=Number.MAX_SAFE_INTEGER;else{const l=GG(t,n,o);let c=r[l];e&1<<l&&(c=Number.MAX_SAFE_INTEGER),a[o]=c}for(let o=0;o<a.length;o++){const l=i[o];a[o]<0&&(a[o]+=l),a[o]=Al(0,a[o],i[o])}return a}function KG(e,t,n){let r=e[t];return(n&1<<t||r==null)&&(r=1),r}function YG(e,t,n,r,i,a){let s=t[i];const o=n[i]||1;(e&1<<i||a&1<<i||s==null)&&(o>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);const l=r[i];return s<0&&(s+=l),s=Al(0,s,l-1),s}function ZG(e,t,n,r,i,a){let s=t[i];const o=n[i]||1;(e&1<<i||a&1<<i||s==null)&&(o>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);const l=r[i];return s<0&&(s+=l),o>0?s=Al(0,s,l):s=Al(-1,s,l-1),s}function sE(e,t,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function oE(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function w0(e,t,n){let r;const i=e.shape.length;typeof t=="number"?r=[t,...new Array(i-1).fill(0)]:t.length<i?r=t.concat(new Array(i-t.length).fill(0)):r=t.slice(),r.forEach(s=>{V(s!==-1,()=>"slice() does not support negative begin indexing.")});let a;return n==null?a=new Array(i).fill(-1):typeof n=="number"?a=[n,...new Array(i-1).fill(-1)]:n.length<i?a=n.concat(new Array(i-n.length).fill(-1)):a=n,a=a.map((s,o)=>s>=0?s:(V(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${o}.`),e.shape[o]-r[o])),[r,a]}function lE(e,t,n,r,i,a,s,o,l){let c;if(r==null?(c=new Array(t.length),c.fill(1)):c=r,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let h=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:a,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};for(let T=0;T<d.dims;T++)h&&(1<<T&o)!==0&&d.numAddAxisAfterEllipsis++,1<<T&s&&(h=!0);h||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};fvt(d,p);let g=!0,v=!0,x=!0;const b=[],w=[];for(let T=0;T<e.length;++T){if(p.strides[T]===0)throw Error(`strides[${T}] must be non-zero`);const $=!!(p.shrinkAxisMask&1<<T),A=e[T];if(A===-1){b.push($?1:-1);continue}const I=[p.beginMask&1<<T,p.endMask&1<<T],O=[p.strides[T]>0?0:-1,p.strides[T]>0?A:A-1];if($&&p.strides[T]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&p.strides[T]===1;const N=!!(p.beginMask&1<<T&&p.endMask&1<<T);if(p.beginValid&&p.endValid){if($){const F=p.begin[T]<0?A+p.begin[T]:p.begin[T];if(p.begin[T]=F,p.end[T]=p.begin[T]+1,F<0||F>=A)throw Error(`slice index ${p.begin[T]} of dimension ${T} out of bounds.`)}else p.begin[T]=Nz(p.begin[T],0,p.strides[T],A,I,O),p.end[T]=Nz(p.end[T],1,p.strides[T],A,I,O);const E=p.strides[T]===1&&p.begin[T]===0&&p.end[T]===A;g=g&&E,v=v&&(T===0&&p.strides[T]===1||E)}else g=g&&p.strides[T]===1&&N,v=v&&(T===0&&p.strides[T]===1||N);let _,R=!1;if(p.beginValid&&p.endValid?(_=p.end[T]-p.begin[T],R=!0):$?(_=1,R=!0):N&&A>=0&&(p.strides[T]<0?_=-A:_=A,R=!0),R){let E;_===0||_<0!=p.strides[T]<0?E=0:E=Math.trunc(_/p.strides[T])+(_%p.strides[T]!==0?1:0),b.push(E)}else b.push(-1)}for(let T=0;T<p.finalShapeGatherIndices.length;++T){const $=p.finalShapeGatherIndices[T];$>=0?w.push(b[$]):$===cA&&w.push(1)}return{finalShapeSparse:w.filter((T,$)=>p.finalShapeGatherIndices[$]!==cA),finalShape:w,isIdentity:g,sliceDim0:v,isSimpleSlice:x,begin:p.begin,end:p.end,strides:p.strides}}function fvt(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(cA),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(lvt),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function Nz(e,t,n,r,i,a){if(i[t])return n>0?a[t]:a[t+1&1];{const s=e<0?r+e:e;return s<a[0]?a[0]:s>a[1]?a[1]:s}}const hvt=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:iE,computeFlatOffset:oE,computeOutShape:aE,getNormalizedAxes:cvt,isSliceContinous:sE,maskToAxes:uvt,parseSliceParams:w0,sliceInfo:lE,startForAxis:YG,startIndicesWithElidedDims:HG,stopForAxis:ZG,stopIndicesWithElidedDims:XG,stridesForAxis:KG,stridesWithElidedDims:WG},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dvt{static sgd(t){return new nE(t)}static momentum(t,n,r=!1){return new UG(t,n,r)}static rmsprop(t,n=.9,r=0,i=null,a=!1){return new VG(t,n,r,i,a)}static adam(t=.001,n=.9,r=.999,i=null){return new zG(t,n,r,i)}static adadelta(t=.001,n=.95,r=null){return new LG(t,n,r)}static adamax(t=.002,n=.9,r=.999,i=null,a=0){return new jG(t,n,r,i,a)}static adagrad(t,n=.1){return new BG(t,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gu=dvt;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pvt=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e();function QG(){return new Promise(e=>pvt(()=>e()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uE(e,t){const n=e[0].length;e.forEach((i,a)=>{V(i.length===n,()=>`Error in concat${n}D: rank of tensors[${a}] must be the same as the rank of the rest (${n})`)}),V(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=e[0];e.forEach((i,a)=>{for(let s=0;s<n;s++)V(s===t||i[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${a}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function Ea(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ta;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(ta||(ta={}));function JG(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const a=n[i],s=r[r.length-n.length+i],o=r[s];if(a>=0)if(o>=0){if(o!==a)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+e}] = ${a} but shape[${i+e}] = ${o}`)}else r[s]=a}return r}function tq(e){const t={FIRST_DIM_SIZE:ta.FIRST_DIM_SIZE,VALUE_ROWIDS:ta.VALUE_ROWIDS,ROW_LENGTHS:ta.ROW_LENGTHS,ROW_SPLITS:ta.ROW_SPLITS,ROW_LIMITS:ta.ROW_LIMITS,ROW_STARTS:ta.ROW_STARTS},n=[];for(const r of e)if(r in t)n.push(t[r]);else break;return n}function eq(e){return e.length===0?0:e[0]===ta.FIRST_DIM_SIZE?e.length-1:e.length}function nq(e,t){if(e==null||t==null)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const a=e[i],s=t[i+1];if(a>=0&&s>=0&&a!==1&&a!==s)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-e.length}] = ${a} but ragged tensor input.flatValues.shape[${i-e.length}] = ${s}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cE=30;function S0(e){return e<=cE?e:X2(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fE(e,t,n){const r=n*(typeof e=="number"?e:e[0]),i=t*(typeof e=="number"?e:e[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tm(e,t,n,r=!0){let i=[];if(r)i=i.concat(t.slice(0)),i.push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);const a=t.length;for(let s=0;s<a;++s)i=i.concat([e[s+1]/t[s],t[s]]);i=i.concat(e.slice(a+1))}return i}function em(e,t,n=!0){const r=[];if(n){r.push(t);for(let i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{const i=[],a=[];for(let s=1;s<e;++s)s>=t*2+1||s%2===1?a.push(s):i.push(s);r.push(...i),r.push(0),r.push(...a)}return r}function nm(e,t,n,r=!0){const i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let a=1;a<e.length;++a)a<=t.length?r?i.push(t[a-1]*e[a]):i.push(e[a]/t[a-1]):i.push(e[a]);return i}function hE(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function dE(e,t,n){const r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C0=1.7580993408473768,T0=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pE=.3275911,mE=.254829592,gE=-.284496736,yE=1.421413741,vE=-1.453152027,bE=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ws(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function rq(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function iq(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function aq(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function xE(e,t){const n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function sq(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function oq(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){const a=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}function lq(e,t,n){const r=(n?2:-2)*Math.PI*(e/t),i=Math.cos(r),a=Math.sin(r);return{real:i,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h$="->",mvt=/->/g,_z=",",Rz="...";function wE(e,t){e=e.replace(/\s/g,"");const n=(e.length-e.replace(mvt,"").length)/h$.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${h$}").`);const[r,i]=e.split(h$);V(r.indexOf(Rz)===-1,()=>`The ellipsis notation ("${Rz}") is not supported yet.`);const a=r.split(_z),s=a.length;if(t!==s)throw new Error(`Expected ${s} input tensors, received ${t}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let p=0;p<i.length;++p){const g=i[p];if(!a.some(v=>v.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);o.indexOf(g)===-1&&o.push(g)}for(let p=0;p<r.length;++p){const g=r[p];o.indexOf(g)===-1&&g!==_z&&o.push(g)}const l=new Array(a.length);for(let p=0;p<s;++p){if(new Set(a[p].split("")).size!==a[p].length)throw new Error(`Found duplicate axes in input component ${a[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let g=0;g<a[p].length;++g)l[p].push(o.indexOf(a[p][g]))}const c=o.length,h=i.length,d=[];for(let p=h;p<c;++p)d.push(p);return{allDims:o,summedDims:d,idDims:l}}function SE(e,t){let n=new Array(e);n.fill(-1);for(let i=0;i<t.length;++i)n[t[i]]=i;const r=[];for(let i=0;i<e;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function CE(e,t,n){const r=new Array(e);for(let i=0;i<n.length;++i){const a=n[i].shape;for(let s=0;s<t[i].length;++s)r[t[i][s]]===void 0?r[t[i][s]]=a[s]:V(r[t[i][s]]===a[s],()=>`Expected dimension ${r[t[i][s]]} at axis ${s} of input shaped ${JSON.stringify(a)}, but got dimension ${a[s]}`)}}function TE(e,t){const n=e,r=[];let i=0;e.length===0&&n.push(-1),i=e.length+1;for(let s=0;s<i;++s)r.push([]);const a=[];for(let s=0;s<n.length;++s){const o=n[s],l=gvt(t,o);for(const c of l)a.indexOf(c)===-1&&(r[s].push(c),a.push(c))}return{path:n,steps:r}}function $E(e){return e.every((t,n)=>t===n)}function gvt(e,t){const n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function AE(e,t,n=0){let r=[];if(typeof t=="number")V(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{const i=t.reduce((s,o)=>(o===-1&&(s+=1),s),0);V(i<=1,()=>"There should be only one negative value in split array.");const a=t.indexOf(-1);if(a!==-1){const s=t.reduce((o,l)=>l>0?o+l:o);t[a]=e.shape[n]-s}V(e.shape[n]===t.reduce((s,o)=>s+o),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uq(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function cq(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function fq(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hq(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function dq(e,t){return`size ${e} must be non-negative, not ${t}`}function pq(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function mq(e,t){const n=pt(e),r=pt(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function gq(e,t){const n=pt(e),r=pt(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fA(){return"segment ids must be >= 0"}function yq(){return"segment ids are not increasing"}function vq(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function bq(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xq(e,t){let n=!1,r;for(e<=cE?(r=e,n=!0):r=X2(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=X2(e,r+1);return r}function wq(e,t,n){const r=[],i=e.length;for(let a=0;a<i;a++)a!==t?r.push(e[a]):r.push(n);return r}function kE(e,t,n,r){const i=t.shape.length,a=e.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);const s=e.shape[n],o=[];let l=1,c=1,h=1;for(let d=0;d<r;++d)o.push(e.shape[d]),l*=e.shape[d];for(let d=r;d<n;d++)o.push(e.shape[d]),c*=e.shape[d];for(let d=r;d<i;d++)o.push(t.shape[d]);for(let d=n+1;d<a;d++)o.push(e.shape[d]),h*=e.shape[d];return{batchSize:l,sliceSize:h,outerSize:c,dimSize:s,outputShape:o}}const yvt=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:kE,computeOutShape:wq,segOpComputeOptimalWindowSize:xq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ss(e){try{return e.map(t=>po(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function Sq(e){return e.map(t=>co(t))}const vvt=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:mE,ERF_A2:gE,ERF_A3:yE,ERF_A4:vE,ERF_A5:bE,ERF_P:pE,PARALLELIZE_THRESHOLD:cE,get RowPartitionType(){return ta},SELU_SCALE:T0,SELU_SCALEALPHA:C0,applyActivation:YI,assertAndGetBroadcastShape:Jt,assertAxesAreInnerMostDims:Zn,assertParamsConsistent:uE,assignToTypedArray:sq,axesAreInnerMostDims:RI,calculateShapes:Xl,checkEinsumDimSizes:CE,checkPadOnDimRoundingMode:Pr,combineLocations:pG,combineRaggedTensorToTensorShapes:JG,complexWithEvenIndex:iq,complexWithOddIndex:aq,computeConv2DInfo:Yn,computeConv3DInfo:Eo,computeDefaultPad:kI,computeDilation2DInfo:Kp,computeOptimalWindowSize:S0,computeOutAndReduceShapes:jn,computeOutShape:Ea,computePool2DInfo:zi,computePool3DInfo:ks,convertConv2DDataFormat:Is,decodeEinsumEquation:wE,eitherStridesOrDilationsAreOne:ur,expandShapeToKeepDim:bn,exponent:lq,exponents:oq,fromStringArrayToUint8:Sq,fromUint8ToStringArray:Ss,getAxesPermutation:en,getBroadcastDims:jc,getComplexWithIndex:xE,getEinsumComputePath:TE,getEinsumPermutation:SE,getFusedBiasGradient:KI,getFusedDyActivation:XI,getImageCenter:fE,getInnerMostAxes:hn,getPermuted:em,getRaggedRank:eq,getReductionAxes:En,getReshaped:tm,getReshapedPermuted:nm,getRowPartitionTypesHelper:tq,getSliceBeginCoords:hE,getSliceSize:dE,getSparseFillEmptyRowsIndicesDenseShapeMismatch:uq,getSparseFillEmptyRowsNegativeIndexErrorMessage:cq,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:fq,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:pq,getSparseReshapeInputOutputMismatchErrorMessage:gq,getSparseReshapeInputOutputMultipleErrorMessage:mq,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:hq,getSparseReshapeNegativeOutputDimErrorMessage:dq,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:bq,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:fA,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:yq,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:vq,getUndoAxesPermutation:Oo,isIdentityPermutation:$E,log:Jft,mergeRealAndImagArrays:ws,prepareAndValidate:rE,prepareSplitSize:AE,segment_util:yvt,shouldFuse:ZI,slice_util:hvt,splitRealAndImagArrays:rq,stridesOrDilationsArePositive:Nl,tupleValuesAreOne:Ol,upcastType:Kr,validateDefaultValueShape:nq,validateInput:Kgt,validateUpdateShape:_G,warn:ci},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ovt();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cq={kernelName:hb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(e,Jp(Rt(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bvt={kernelName:tp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=Xe(Rt(n,"float32")),i=lr(qt(Se(1),r));return cn(Ut(e,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xvt={kernelName:ep,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=lr(qt(Xe(Rt(n,"float32")),1));return Ut(e,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wvt={kernelName:lf,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Jt(n.shape,r.shape);return{a:()=>{let o=e;const l=En(n.shape,i);return l.length>0&&(o=jt(o,l)),nt(o,n.shape)},b:()=>{let o=e;const l=En(r.shape,i);return l.length>0&&(o=jt(o,l)),nt(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Svt={kernelName:Lk,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((r,i)=>{n[i]=()=>e.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cvt={kernelName:db,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tvt={kernelName:pb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>me(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $vt={kernelName:np,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ut(e,lr(qt(Se(1),Xe(Rt(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Avt={kernelName:rp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=lr($t(Se(1),Xe(Rt(n,"float32"))));return Ut(e,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kvt={kernelName:sp,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Jt(n.shape,r.shape);return{a:()=>{const o=$t(Xe(n),Xe(r));let l=tt(e,Ut(r,o));const c=En(n.shape,i);return c.length>0&&(l=jt(l,c)),nt(l,n.shape)},b:()=>{const o=$t(Xe(n),Xe(r));let l=cn(tt(e,Ut(n,o)));const c=En(r.shape,i);return c.length>0&&(l=jt(l,c)),nt(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ivt={kernelName:ip,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ut(e,$t(Xe(Rt(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Evt={kernelName:ap,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ut(e,qt(Se(1),Xe(Rt(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ovt(e,t,n,r,i,a){const s=X(e,"dy","avgPool3dGrad"),o=X(t,"input","avgPool3dGrad");let l=s,c=o,h=!1;o.rank===4&&(h=!0,l=nt(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=nt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),V(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),V(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Pr("avgPool3dGrad",i,a);const d={dy:l,input:c},p={filterSize:n,strides:r,pad:i,dimRoundingMode:a},g=et.runKernel(Uk,d,p);return h?nt(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const Nvt=rt({avgPool3dGrad_:Ovt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _vt={kernelName:gb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:a,pad:s,dimRoundingMode:o}=n;return{x:()=>Nvt(e,r,i,a,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rvt(e,t,n,r,i){const a=X(e,"dy","avgPoolGrad"),s=X(t,"input","avgPoolGrad");V(s.rank===a.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${a.rank})`);let o=s,l=a,c=!1;s.rank===3&&(c=!0,o=nt(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=nt(a,[1,a.shape[0],a.shape[1],a.shape[2]])),V(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),V(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const h={dy:l,input:o},d={filterSize:n,strides:r,pad:i},p=et.runKernel(jk,h,d);return c?nt(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Dvt=rt({avgPoolGrad_:Rvt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mvt={kernelName:mb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:a,pad:s}=n;return{x:()=>Dvt(e,r,i,a,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pvt={kernelName:yb,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,i]=t,{transposeA:a,transposeB:s}=n;return!a&&!s?{a:()=>we(e,i,!1,!0),b:()=>we(r,e,!0,!1)}:!a&&s?{a:()=>we(e,i,!1,!1),b:()=>we(e,r,!0,!1)}:a&&!s?{a:()=>we(i,e,!1,!0),b:()=>we(r,e,!1,!1)}:{a:()=>we(i,e,!0,!0),b:()=>we(e,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fvt={kernelName:vb,gradFunc:(e,t,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>jI(e,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lvt={kernelName:Kft,gradFunc:(e,t,n)=>{const r=n,i=r.inputShape,a=r.shape,s=Array.from(a);for(let l=i.length-1;l>=0;l--)if(i[l]===a[l])s[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${a}].`);const o=[];for(let l=0;l<s.length;l++)s[l]>1&&o.push(l);return{x:()=>jt(e,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bvt={kernelName:op,gradFunc:e=>({x:()=>e.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zvt={kernelName:lp,gradFunc:e=>({x:()=>me(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jvt={kernelName:up,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:i,clipValueMax:a}=n;return{x:()=>Cr(bs(ql(r,i),ff(r,a)),e,me(e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uvt={kernelName:bb,inputsToSave:["x"],gradFunc:Cq.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vvt={kernelName:xb,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map(l=>l.shape),{axis:i}=n,a=ae(i,t[0].shape)[0],s=r.map(l=>l[a]);return hi(e,s,a).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wvt={kernelName:wb,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{dilations:a,strides:s,pad:o,dataFormat:l}=n;return V(Ol(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>OI(r.shape,e,i,s,o,l),filter:()=>HI(r,e,i.shape,s,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gvt={kernelName:Sb,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{strides:a,pad:s,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>_l(e,i,a,s,o,1,l),filter:()=>HI(e,r,i.shape,a,s,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qvt(e,t,n,r,i){let a=e;e.rank===4&&(a=nt(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;s.rank===4&&(s=nt(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),V(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),V(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),V(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),V(a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),V(s.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:a,dy:s},l={strides:r,pad:i,filterShape:n};return et.runKernel(Hk,o,l)}const Hvt=rt({conv3DBackpropFilter_:qvt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xvt={kernelName:Cb,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:a}=n;V(Ol(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[s,o]=t;return{x:()=>cG(s.shape,e,o,i,a),filter:()=>Hvt(s,e,o.shape,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kvt={kernelName:cp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(cn(IG(Rt(n,"float32"))),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yvt={kernelName:fp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(EG(Rt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zvt={kernelName:Tb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i,exclusive:a,reverse:s}=n;return{x:()=>{const o=en([i],r.rank);let l=hG(e,i,a,!s);return o!=null&&(l=pe(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qvt={kernelName:$b,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:a,dimRoundingMode:s}=n,o=r??[1,1];V(Ol(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,c]=t;return V(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),V(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),V(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),V(ur(i,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${o}'.`),Pr("depthwiseConv2d",a,s),{x:()=>pyt(l.shape,e,c,i,a,o,s),filter:()=>hyt(l,e,c.shape,i,a,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jvt={kernelName:Ab,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,a={x:r,filter:i,dy:e},s={x:r,filter:i,dy:e};return{x:()=>et.runKernel(K2,a,n),filter:()=>et.runKernel(Y2,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tbt={kernelName:dp,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>et.runKernel(nI,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ebt={kernelName:pp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=tt(Ma(cn(Xe(n))),2/Math.sqrt(Math.PI));return{x:()=>tt(e,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nbt={kernelName:mp,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(e,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rbt={kernelName:Ib,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>nt(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ibt={kernelName:gp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(e,Ma(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const abt={kernelName:yp,gradFunc:e=>({x:()=>me(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sbt={kernelName:vp,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Jt(n.shape,r.shape);return{a:()=>{const o=Ut(e,Rt(r,"float32")),l=En(n.shape,i);return l.length>0?nt(jt(o,l),n.shape):o},b:()=>{let o=tt(e,Rt(n,"float32"));const l=En(r.shape,i);l.length>0&&(o=nt(jt(o,l),r.shape));const c=Xe(r);return cn(Ut(o,Rt(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const obt={kernelName:Eb,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[i,a,s,o]=t,l=o??Se(1),c=En(a.shape,i.shape),h=[];if(a.rank===1){for(let $=0;$<i.shape.length-1;++$)h.push(i.shape[$]);h.push(1)}const d=qt(i,a),p=tt(e,l),g=$G($t(s,Se(r))),v=tt(tt(tt(g,g),g),Se(-.5));return{x:()=>a.rank===1?nt(tt(tt(e,ra(nt(g,[1,1,1,a.shape[0]]),h)),l),i.shape):nt(tt(tt(e,g),l),i.shape),mean:()=>{let $=tt(tt(g,Se(-1)),p);return a.rank===1&&($=jt($,c)),nt($,a.shape)},variance:()=>{let $=tt(tt(v,d),p);return a.rank===1&&($=jt($,c)),nt($,a.shape)},scale:()=>{const $=tt(d,g);let A=tt(e,$);return a.rank===1&&(A=jt(A,c)),nt(A,a.shape)},offset:()=>{let $=e;return a.rank===1&&($=jt($,c)),nt($,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lbt={kernelName:Ob,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,i]=t,{axis:a,batchDims:s}=n,o=ae(a,r.shape)[0],l=(c,h,d)=>()=>{const p=c.shape,g=h.size,v=p.slice(0,o),x=v.length,b=p.slice(a,p.length).slice(1),w=b.length,S=Dz(0,x),T=Dz(x+1,x+1+w),$=Mz([v,[g],b]),A=nt(d,$),I=nt(h,[g]),O=Mz([[x],S,T]),N=pe(A,O);let _=DG(N,I,c.shape[o]);const R=Oo(O);return _=pe(_,R),_};if(s===1){const c=r.shape[0],h=r.split(c,0);return{x:()=>xs(h.map((g,v)=>l(g,i.slice(v,1),e.slice(v,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,e),indices:()=>i}}};function Dz(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function Mz(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ubt={kernelName:bp,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>me(n),b:()=>me(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cbt={kernelName:xp,gradFunc:e=>({x:()=>Rt(e,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fbt={kernelName:wp,gradFunc:e=>({x:()=>me(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hbt={kernelName:Sp,gradFunc:e=>({x:()=>me(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dbt={kernelName:Cp,gradFunc:e=>({x:()=>me(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pbt={kernelName:_b,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:i}=n,a=pi(r,0);return{x:()=>Cr(a,e,tt(e,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mbt={kernelName:$p,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ut(e,$t(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gbt={kernelName:Tp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ut(e,Rt(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ybt={kernelName:Zft,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;return{logits:()=>{const s=Ma(r);return qt(e,tt(jt(e,i,!0),s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vbt(e,t,n,r=5,i=1,a=1,s=.5){const o={x:e,y:t,dy:n},l={depthRadius:r,bias:i,alpha:a,beta:s};return et.runKernel(lI,o,l)}const bbt=rt({localResponseNormalizationBackprop_:vbt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xbt={kernelName:Lb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{depthRadius:a,bias:s,alpha:o,beta:l}=n;return{x:()=>bbt(r,i,e,a,s,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tq(e,t,n,r){return t.rank<n.rank&&(t=nt(t,bn(t.shape,r))),e.rank<n.rank&&(e=nt(e,bn(e.shape,r))),{x:()=>tt(e,Rt(Da(n,t),e.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pz={kernelName:Bb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:i}=r,a=t[0],s=t[1],o=ae(i,a.shape),l=Tq(e,s,a,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wbt={kernelName:Ap,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>tt(e,Rt(ql(n,r),"float32")),b:()=>tt(e,Rt(pv(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sbt(e,t,n,r,i,a,s){const o=X(e,"dy","maxPool3dGrad"),l=X(t,"input","maxPool3dGrad"),c=X(n,"output","maxPool3dGrad");let h=o,d=l,p=c,g=!1;l.rank===4&&(g=!0,h=nt(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=nt(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=nt(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),V(h.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${h.rank}.`),V(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),V(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),Pr("maxPool3dGrad",a,s);const v={dy:h,input:d,output:p},x={filterSize:r,strides:i,pad:a,dimRoundingMode:s},b=et.runKernel(cI,v,x);return g?nt(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const Cbt=rt({maxPool3dGrad_:Sbt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tbt={kernelName:jb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=n;return{x:()=>Cbt(e,r,i,a,s,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $bt(e,t,n,r,i,a,s){const o=X(e,"dy","maxPoolGrad"),l=X(t,"input","maxPoolGrad"),c=X(n,"output","maxPoolGrad");V(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),V(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),V(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Pr("maxPoolGrad",a,s);const h={dy:o,input:l,output:c},d={filterSize:r,strides:i,pad:a,dimRoundingMode:s};return et.runKernel(uI,h,d)}const Abt=rt({maxPoolGrad_:$bt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kbt={kernelName:zb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:a,strides:s,pad:o}=n;return{x:()=>Abt(e,r,i,a,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ibt={kernelName:Ub,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n,a=ae(i,r.shape),o=jn(r.shape,a)[1],l=pt(o);return{x:()=>{const h=r.shape.slice();a.forEach(g=>{h[g]=1});const d=nt(e,h);return Ut(tt(d,_o(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ebt={kernelName:Vb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:i}=r,[a,s]=t,o=ae(i,a.shape),l=Tq(e,s,a,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Obt={kernelName:kp,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>tt(e,Rt(ff(n,r),"float32")),b:()=>tt(e,Rt(pi(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nbt={kernelName:Wb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,a=i.map(s=>s[0]);return{x:()=>je(e,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _bt={kernelName:Ip,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Jt(n.shape,r.shape);return{a:()=>{const o=En(n.shape,i);return o.length>0?nt(jt(e,o),n.shape):e},b:()=>{const o=tt(e,cn(x0(Ut(n,r)))),l=En(r.shape,i);return l.length>0?nt(jt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rbt={kernelName:Ep,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Jt(n.shape,r.shape);return{a:()=>{const o=tt(e,Rt(r,"float32")),l=En(n.shape,i);return l.length>0?nt(jt(o,l),n.shape):o},b:()=>{const o=tt(e,Rt(n,"float32")),l=En(r.shape,i);return l.length>0?nt(jt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dbt={kernelName:Gb,gradFunc:e=>({x:()=>cn(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mbt={kernelName:Xb,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>Fn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pbt={kernelName:Hb,gradFunc:e=>({x:()=>me(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fbt={kernelName:Kb,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return Ml(e,r).map(a=>()=>a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fz={kernelName:Yb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,a=i.map(s=>s[0]);return{x:()=>je(e,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lbt={kernelName:Op,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,i]=t,a=n,s=r,o=Jt(a.shape,s.shape);return{a:()=>{const h=Rt(s,"float32");let d=tt(e,tt(h,Rl(a,qt(h,Se(1)))));const p=En(a.shape,o);return p.length>0&&(d=jt(d,p)),nt(d,a.shape)},b:()=>{const h=pi(a,0),d=Cr(h,Pa(a),me(a));let p=tt(e,tt(i,d));const g=En(s.shape,o);return g.length>0&&(p=jt(p,g)),nt(p,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bbt={kernelName:Zb,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,i=pi(n,0);return{x:()=>Cr(i,e,tt(e,r)),alpha:()=>{let a=Cr(i,me(e),tt(e,n));const s=En(r.shape,e.shape);return s.length>0&&(a=jt(a,s)),nt(a,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbt(e,t,n){const r=e.shape.slice();r[n]=1;const i=nt(t,r),a=lA(e,n,!0,!1),s=lA(e,n,!0,!0),o=tt(a,s);return tt(i,o)}function jbt(e,t,n){const r=e.shape.length,i=r-n.length,a=en(n,r);let s=e;a!=null&&(s=pe(e,a));const o=s.shape.slice(),c=o.splice(r-n.length,n.length).reduce((p,g)=>p*g,1);o.push(c);const h=s.reshape(o);let d=zbt(h,t,i);if(d=d.reshape(s.shape),a!=null){const p=Oo(a);d=pe(d,p)}return d}const Ubt={kernelName:Qb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;let a=[];return i==null?a=r.shape.map((s,o)=>o):typeof i=="number"?a=[i]:a=i,{x:()=>jbt(r,e,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vbt={kernelName:hp,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Jt(n.shape,r.shape);return{a:()=>{const o=Ut(e,Rt(r,"float32")),l=En(n.shape,i);return l.length>0?nt(jt(o,l),n.shape):o},b:()=>{let o=tt(e,Rt(n,"float32"));const l=En(r.shape,i);l.length>0&&(o=nt(jt(o,l),r.shape));const c=Xe(r);return cn(Ut(o,Rt(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wbt={kernelName:Np,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ut(e,cn(Xe(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gbt={kernelName:Rp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=tt(ff(n,6),Jp(n));return{x:()=>tt(e,Rt(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qbt={kernelName:_p,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(e,Rt(Jp(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hbt={kernelName:Jb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nt(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xbt={kernelName:e0,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>et.runKernel(yI,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kbt={kernelName:t0,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>et.runKernel(gI,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ybt={kernelName:n0,gradFunc:(e,t,n)=>{const{dims:r}=n,i=ae(r,e.shape);return{x:()=>Dl(e,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zbt={kernelName:Dp,gradFunc:e=>({x:()=>me(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qbt={kernelName:Mp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>cn(Ut(e,tt(Rl(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jbt={kernelName:r0,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>Rt(me(n),"float32"),t:()=>tt(e,Rt(n,e.dtype)),e:()=>tt(e,Rt(FI(n),e.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0t={kernelName:Pp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const r=pi(n,Se(0)),i=Se(C0),a=Se(T0),s=tt(e,a),o=tt(tt(e,i),Ma(Rt(n,"float32")));return Cr(r,s,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e0t={kernelName:zp,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(e,tt(n,qt(Se(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n0t={kernelName:Bp,gradFunc:e=>({x:()=>me(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r0t={kernelName:Fp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(NI(Rt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i0t={kernelName:Lp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(fG(Rt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a0t={kernelName:i0,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:i,size:a}=n,s=r.shape,[o,l]=w0(r,i,a),c=[];for(let h=0;h<e.rank;h++)c.push([o[h],s[h]-o[h]-l[h]]);return{x:()=>zI(e,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s0t={kernelName:l0,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:i}=n,a=!0,s=tt(e,r);return{logits:()=>qt(s,tt(jt(s,[i],a),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o0t={kernelName:jp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(e,cf(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lz={kernelName:s0,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>EI(e,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bz={kernelName:o0,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>_r(e,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l0t={kernelName:Up,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ut(e,tt(lr(Rt(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u0t={kernelName:vI,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(e,tt(Rt(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c0t={kernelName:Vp,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Se(2);return{a:()=>tt(e,tt(i,qt(n,r))),b:()=>tt(e,tt(i,qt(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f0t={kernelName:Xp,gradFunc:e=>({x:()=>me(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h0t={kernelName:Wp,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Jt(n.shape,r.shape);return{a:()=>{let o=e;const l=En(n.shape,i);return l.length>0&&(o=jt(o,l)),nt(o,n.shape)},b:()=>{let o=e;const l=En(r.shape,i);return l.length>0&&(o=jt(o,l)),nt(cn(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d0t={kernelName:a0,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,i=r.shape.slice(),{axis:a}=n;ae(a,r.shape).forEach(c=>{i[c]=1});const o=nt(e,i),l=tt(o,_o(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p0t={kernelName:Gp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ut(e,Xe(NI(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m0t={kernelName:qp,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>tt(qt(Se(1),Xe(n)),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g0t={kernelName:Hp,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:i}=n;return{x:()=>{let s=me(r);if(r.rank===1)for(let o=0;o<i[0];++o)s=$t(s,je(e,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)s=$t(s,je(e,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)s=$t(s,je(e,[o*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<i[0];++o)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let h=0;h<i[3];++h)s=$t(s,je(e,[o*r.shape[0],l*r.shape[1],c*r.shape[2],h*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0t={kernelName:sc,gradFunc:(e,t,n)=>{const r=n,{perm:i}=r,a=Oo(i);return{x:()=>pe(e,a)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v0t={kernelName:u0,gradFunc:(e,t,n)=>{const r=n,{axis:i}=r;return{value:()=>xs(e,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b0t={kernelName:c0,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>x0t(e,n)}}};function x0t(e,t){const n=No(t,me(t)),r=DI(e,n);let i=ql(t,Se(0,"int32"));const a=r.rank-i.rank;for(let o=0;o<a;++o)i=Er(i,o+1);i=bs(i,_o(r.shape,"bool"));const s=me(r);return Cr(i,r,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w0t={kernelName:f0,gradFunc:e=>({x:()=>me(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S0t=[Cq,bvt,xvt,wvt,Svt,Cvt,Tvt,$vt,Avt,kvt,Ivt,Evt,_vt,Mvt,Pvt,Fvt,Lvt,Bvt,zvt,jvt,Uvt,Vvt,Gvt,Wvt,Xvt,Kvt,Yvt,Zvt,Qvt,Jvt,Vbt,tbt,ebt,nbt,rbt,ibt,sbt,abt,obt,lbt,ubt,cbt,fbt,hbt,dbt,pbt,mbt,gbt,ybt,xbt,Pz,Pz,wbt,Tbt,kbt,Ibt,Ebt,Obt,Nbt,_bt,Rbt,Dbt,Mbt,Pbt,Fbt,Fz,Fz,Lbt,Bbt,Ubt,Wbt,Gbt,qbt,Hbt,Xbt,Kbt,Ybt,Zbt,Qbt,Jbt,t0t,e0t,n0t,r0t,i0t,a0t,s0t,o0t,Lz,Lz,Bz,Bz,l0t,c0t,u0t,f0t,h0t,d0t,p0t,m0t,g0t,y0t,v0t,b0t,w0t];for(const e of S0t)tht(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.abs=function(){return this.throwIfDisposed(),vr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.acos=function(){return this.throwIfDisposed(),ndt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.acosh=function(){return this.throwIfDisposed(),idt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.add=function(e){return this.throwIfDisposed(),$t(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.all=function(e,t){return this.throwIfDisposed(),oG(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.any=function(e,t){return this.throwIfDisposed(),sA(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.argMax=function(e){return this.throwIfDisposed(),Rd(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.argMin=function(e){return this.throwIfDisposed(),udt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.asScalar=function(){return this.throwIfDisposed(),V(this.size===1,()=>"The array must have only 1 element."),nt(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.asType=function(e){return this.throwIfDisposed(),Rt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.as1D=function(){return this.throwIfDisposed(),nt(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.as2D=function(e,t){return this.throwIfDisposed(),nt(this,[e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),nt(this,[e,t,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),nt(this,[e,t,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),nt(this,[e,t,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.asin=function(){return this.throwIfDisposed(),fdt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.asinh=function(){return this.throwIfDisposed(),ddt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.atan=function(){return this.throwIfDisposed(),mdt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.atan2=function(e){return this.throwIfDisposed(),ydt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.atanh=function(){return this.throwIfDisposed(),bdt(this)};dt().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),II(this,e,t,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),EI(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),g0(this,e,t,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Yh(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.cast=function(e){return this.throwIfDisposed(),Rt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.ceil=function(){return this.throwIfDisposed(),qdt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),di(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Cn&&(e=[e]),_r([this,...e],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.conv1d=function(e,t,n,r,i,a){return this.throwIfDisposed(),lG(this,e,t,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),uG(this,e,t,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.conv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),_l(this,e,t,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.cos=function(){return this.throwIfDisposed(),NI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.cosh=function(){return this.throwIfDisposed(),fG(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),lA(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),hG(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),ypt(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.depthwiseConv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),_I(this,e,t,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),xpt(this,e,t,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.divNoNan=function(e){return this.throwIfDisposed(),$pt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.div=function(e){return this.throwIfDisposed(),Ut(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.dot=function(e){return this.throwIfDisposed(),kpt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.elu=function(){return this.throwIfDisposed(),v0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.equal=function(e){return this.throwIfDisposed(),Da(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.erf=function(){return this.throwIfDisposed(),dG(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Bpt(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.exp=function(){return this.throwIfDisposed(),Ma(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.expandDims=function(e){return this.throwIfDisposed(),Er(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.expm1=function(){return this.throwIfDisposed(),Vpt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.fft=function(){return this.throwIfDisposed(),NG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.flatten=function(){return this.throwIfDisposed(),nt(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.floor=function(){return this.throwIfDisposed(),x0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.floorDiv=function(e){return this.throwIfDisposed(),sG(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.gather=function(e,t,n){return this.throwIfDisposed(),DI(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.greaterEqual=function(e){return this.throwIfDisposed(),ql(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.greater=function(e){return this.throwIfDisposed(),pi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.ifft=function(){return this.throwIfDisposed(),uA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.irfft=function(){return this.throwIfDisposed(),Pgt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.isFinite=function(){return this.throwIfDisposed(),Qpt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.isInf=function(){return this.throwIfDisposed(),tmt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.isNaN=function(){return this.throwIfDisposed(),nmt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.leakyRelu=function(e){return this.throwIfDisposed(),PI(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.lessEqual=function(e){return this.throwIfDisposed(),ff(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.less=function(e){return this.throwIfDisposed(),pv(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),omt(this,e,t,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.logSigmoid=function(){return this.throwIfDisposed(),pmt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.logSoftmax=function(e){return this.throwIfDisposed(),vG(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),bG(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.log=function(){return this.throwIfDisposed(),Pa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.log1p=function(){return this.throwIfDisposed(),yG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.logicalAnd=function(e){return this.throwIfDisposed(),bs(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.logicalNot=function(){return this.throwIfDisposed(),FI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.logicalOr=function(e){return this.throwIfDisposed(),xG(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.logicalXor=function(e){return this.throwIfDisposed(),Smt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),we(this,e,t,n)};dt().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),LI(this,e,t,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.max=function(e,t){return this.throwIfDisposed(),aa(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.maximum=function(e){return this.throwIfDisposed(),No(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.mean=function(e,t){return this.throwIfDisposed(),vn(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.min=function(e,t){return this.throwIfDisposed(),dv(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.minimum=function(e){return this.throwIfDisposed(),Pd(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Omt(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.mod=function(e){return this.throwIfDisposed(),_mt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.mul=function(e){return this.throwIfDisposed(),tt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.neg=function(){return this.throwIfDisposed(),cn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.norm=function(e,t,n){return this.throwIfDisposed(),b0(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.notEqual=function(e){return this.throwIfDisposed(),mv(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),wG(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.onesLike=function(){return this.throwIfDisposed(),Li(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.pad=function(e,t){return this.throwIfDisposed(),zI(this,e,t)};dt().prototype.pool=function(e,t,n,r,i,a){return this.throwIfDisposed(),Umt(this,e,t,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.pow=function(e){return this.throwIfDisposed(),Rl(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.prelu=function(e){return this.throwIfDisposed(),UI(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.prod=function(e,t){return this.throwIfDisposed(),Gmt(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.reciprocal=function(){return this.throwIfDisposed(),ggt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.relu=function(){return this.throwIfDisposed(),Hl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.relu6=function(){return this.throwIfDisposed(),CG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.reshapeAs=function(e){return this.throwIfDisposed(),nt(this,e.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.reshape=function(e){return this.throwIfDisposed(),nt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),PG(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),FG(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.reverse=function(e){return this.throwIfDisposed(),Dl(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.rfft=function(){return this.throwIfDisposed(),Bgt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.round=function(){return this.throwIfDisposed(),TG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.rsqrt=function(){return this.throwIfDisposed(),$G(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.selu=function(){return this.throwIfDisposed(),AG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.separableConv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),kG(this,e,t,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.sigmoid=function(){return this.throwIfDisposed(),cf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.sign=function(){return this.throwIfDisposed(),$gt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.sin=function(){return this.throwIfDisposed(),IG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.sinh=function(){return this.throwIfDisposed(),EG(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.slice=function(e,t){return this.throwIfDisposed(),je(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.softmax=function(e){return this.throwIfDisposed(),qI(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.softplus=function(){return this.throwIfDisposed(),Yp(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),jI(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.split=function(e,t){return this.throwIfDisposed(),hi(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.sqrt=function(){return this.throwIfDisposed(),lr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.square=function(){return this.throwIfDisposed(),Xe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.squaredDifference=function(e){return this.throwIfDisposed(),jgt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.squeeze=function(e){return this.throwIfDisposed(),Qp(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof Cn?[this,e]:[this,...e];return xs(n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.step=function(e){return this.throwIfDisposed(),Jp(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.stridedSlice=function(e,t,n,r,i,a,s,o){return this.throwIfDisposed(),qgt(this,e,t,n,r,i,a,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.sub=function(e){return this.throwIfDisposed(),qt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.sum=function(e,t){return this.throwIfDisposed(),jt(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.tan=function(){return this.throwIfDisposed(),Xgt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.tanh=function(){return this.throwIfDisposed(),m0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.tile=function(e){return this.throwIfDisposed(),ra(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.toBool=function(){return this.throwIfDisposed(),Rt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.toFloat=function(){return this.throwIfDisposed(),Rt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.toInt=function(){return this.throwIfDisposed(),Rt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.topk=function(e,t){return this.throwIfDisposed(),Zgt(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.transpose=function(e){return this.throwIfDisposed(),pe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.unique=function(e){return this.throwIfDisposed(),tyt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),DG(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.unstack=function(e){return this.throwIfDisposed(),Ml(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.where=function(e,t){return this.throwIfDisposed(),Cr(e,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dt().prototype.zerosLike=function(){return this.throwIfDisposed(),me(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ba extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ba.prototype)}}class _i extends Error{constructor(t){super(t),Object.setPrototypeOf(this,_i.prototype)}}class Q extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Q.prototype)}}class ee extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ee.prototype)}}class IE extends Error{constructor(t){super(t),Object.setPrototypeOf(this,IE.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $q{constructor(t){this.maxEntries=t||100,this.cache=new Map}get(t){let n;return this.cache.has(t)&&(n=this.cache.get(t),this.cache.delete(t),this.cache.set(t,n)),n}put(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(t){if(t<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${t}.`);if(this.maxEntries>t)for(let n=0;n<this.maxEntries-t;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pl(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}else{const n=new Array(t);return n.fill(e),n}}function xa(e,t){if(!e)throw new IE(t)}function zz(e,t){let n=0;for(const r of e)r===t&&n++;return n}function Or(e){return e.length===1?e[0]:e}function Ie(e){return Array.isArray(e)?e:[e]}function as(e){const n=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function ol(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}let ki={};function EE(e){if(e==null)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function hA(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>hA(t));else{const t=Object.keys(e);for(const n of t){const r=e[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?e[n]=r.value:hA(r))}}}function rm(e,t={},n={},r="object",i=!1){if(typeof e=="string"){const a=e;let s;if(a in n)s=n[a];else if(a in ki)s=ki[a];else if(s=t[a],s==null)throw new Q(`Unknown ${r}: ${e}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{const a=e;if(a.className==null||a.config==null)throw new Q(`${r}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);const s=a.className;let o,l;if(s in n?[o,l]=n[s]:s in ki?[o,l]=ki.className:s in t&&([o,l]=t[s]),o==null)throw new Q(`Unknown ${r}: ${s}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const g of Object.keys(ki))c[g]=ki[g];for(const g of Object.keys(n))c[g]=n[g];const h=a.config;h.customObjects=c;const d=Object.assign({},ki);for(const g of Object.keys(n))ki[g]=n[g];hA(a.config);const p=l(o,a.config,n,i);return ki=Object.assign({},d),p}else{const c=Object.assign({},ki);for(const d of Object.keys(n))ki[d]=n[d];const h=new o(a.config);return ki=Object.assign({},c),h}}}function C0t(e,t){return e<t?-1:e>t?1:0}function Vg(e,t){return-1*C0t(e,t)}function fo(e){if(e==null)return e;const t=[];for(const n of e)t.indexOf(n)===-1&&t.push(n);return t}function T0t(e){if(e==null)throw new Q(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function Kl(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new Q(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function OE(e,t,n=0,r=1/0){return xa(n>=0),xa(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(i=>typeof i===t)}function Bn(e,t){Array.isArray(e)?(V(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((n,r)=>Bn(n,`element ${r+1} of ${t}`))):V(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${Aq(e)}.`)}function Aq(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>Aq(t)).join(",")+"]":typeof e=="string"?`"${e}"`:`${e}`}function $0t(e,t,n){let r=n!=null?n():Ir(),i;return(...s)=>{const o=n!=null?n():Ir();return o-r<t||(r=o,i=e(...s)),i}}function kq(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let A0t=0;function Iq(){return A0t++}const Wg={};function $0(e=""){return e in Wg||(Wg[e]=0),Wg[e]+=1,e+Wg[e].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const k0t=["channelsFirst","channelsLast"],I0t=["nearest","bilinear"],E0t=["valid","same","causal"],O0t=["max","avg"],N0t=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const qu=new Map;function dn(e){Kl(k0t,"DataFormat",e)}function _0t(e){Kl(I0t,"InterpolationFormat",e)}function mi(e){Kl(E0t,"PaddingMode",e)}function Eq(e){Kl(O0t,"PoolMode",e)}const Zh=[],jz="/";function bl(e,t){Zh.push(e);try{const n=t();return Zh.pop(),n}catch(n){throw Zh.pop(),n}}function R0t(){return Zh.length===0?"":Zh.join(jz)+jz}function Oq(e){if(!_q(e))throw new Error("Not a valid tensor name: '"+e+"'");return R0t()+e}function Nq(e){if(!_q(e))throw new Error("Not a valid tensor name: '"+e+"'");qu.has(e)||qu.set(e,0);const t=qu.get(e);if(qu.set(e,qu.get(e)+1),t>0){const n=`${e}_${t}`;return qu.set(n,1),n}else return e}const D0t=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function _q(e){return!!e.match(D0t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function M0t(e){return e===parseInt(e.toString(),10)}function ho(e,t,n){t==null&&(t=0),n==null&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function Vc(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function mo(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function oa(e,t){if(t<e)throw new Q(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let d$;function Tn(){return d$==null&&(d$=Aht().epsilon()),d$}function la(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Oa(e,t){return Rt(e,t)}function im(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),nt(e,n)}function P0t(e,t){return st(()=>{if(e.shape.length!==2)throw new Q(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);const n=im(e,1);return dA(n,[1,t,1])})}function F0t(e){const t=[ho(e.shape)];return nt(e,t)}function L0t(e){if(e.rank<=1)throw new Q(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],ho(e.shape,1)];return nt(e,t)}function xl(e,t,n){return st(()=>{switch(e.rank){case 1:return WI(e,t,n);case 2:return OG(e,[t,0],[n,e.shape[1]]);case 3:return GI(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return yv(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return je(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return je(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Q(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function p$(e,t,n){return st(()=>{switch(e.rank){case 1:return WI(e,t,n);case 2:return OG(e,[0,t],[e.shape[0],n]);case 3:return GI(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return yv(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Q(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function Gg(e,t,n,r){return st(()=>{switch(e.rank){case 1:return WI(e,t,n);case 2:switch(r){case 1:return xl(e,t,n);case 2:return p$(e,t,n);default:throw new Q(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return xl(e,t,n);case 2:return GI(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return p$(e,t,n);default:throw new Q(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return xl(e,t,n);case 2:return yv(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return yv(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return p$(e,t,n);default:throw new Q(`The axis is not within the rank of the tensor ${r}`)}default:throw new Q(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function NE(e,t=-1){let n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),_r(e,t)}function Uz(e,t){switch(e.rank){case 1:return Kdt([e,t]);case 2:return Zdt([e,t],0);case 3:return Jdt([e,t],0);case 4:return ept([e,t],0);default:throw new Q(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function dA(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Q(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return ra(e,t)}function A0(e,t=0,n=1,r,i){return hgt(e,t,n,r,i)}function Na(e,t,n,r){if(e.rank<2||t.rank<2)throw new ee(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){const i=e.shape.slice(-1)[0],a=t.shape.slice(-2)[0];if(i!==a)throw new ee(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(e.rank===2&&t.rank===2)return Iz({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?pA(e.rank,r,la()):null,activation:n});{const i=e.shape.slice(),a=i.pop();e=nt(e,[-1,a]);const s=t.shape.slice(),o=s.pop(),l=s.pop(),c=[...s,o],h=Array.from({length:t.rank},(v,x)=>x===0?t.rank-2:x<=t.rank-2?x-1:x);t=nt(pe(t,h),[l,-1]);const d=[...i,...c];return nt(Iz({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?pA(e.rank,r,la()):null,activation:n}),d)}}function Rq(e,t,n){return st(()=>(Array.isArray(t)?t=Xr(t,"int32"):t=Rt(t,"int32"),DI(e,t,n)))}function am(e){return tt(e,e)}function pA(e,t,n){const r=t.shape;if(t.rank!==1&&t.rank!==e)throw new Q(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(e===5){if(n==="channelsFirst")return r.length===1?nt(t,[1,r[0],1,1,1]):nt(t,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?nt(t,[1,1,1,1,r[0]]):nt(t,[1].concat(r))}else if(e===4){if(n==="channelsFirst")return r.length===1?nt(t,[1,r[0],1,1]):nt(t,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?nt(t,[1,1,1,r[0]]):nt(t,[1].concat(r))}else if(e===3){if(n==="channelsFirst")return r.length===1?nt(t,[1,r[0],1]):nt(t,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?nt(t,[1,1,r[0]]):nt(t,[1].concat(r))}else if(e<3)return t;throw new Q(`Unsupported input rank by biasAdd: ${t.rank}`)}function fa(e,t,n){return st(()=>(n==null&&(n=la()),dn(n),$t(e,pA(e.rank,t,n))))}function B0t(e,t=1){if(t!==1)throw new ee(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return v0(e)}function z0t(e){return st(()=>Ut(e,$t(vr(e),1)))}function Dq(e,t,n,r){return st(()=>oyt(e,t,n,r))}function j0t(e){return st(()=>{const t=$t(.5,tt(.2,e));return di(t,0,1)})}function sm(e,t,n=!1){return n?e():t()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const U0t=["fanIn","fanOut","fanAvg"],V0t=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function W0t(e){Kl(U0t,"FanMode",e)}function G0t(e){Kl(V0t,"Distribution",e)}class ji extends df{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Mq extends ji{apply(t,n){return Fn(t,n)}}Mq.className="Zeros";St(Mq);class _E extends ji{apply(t,n){return _o(t,n)}}_E.className="Ones";St(_E);class Pq extends ji{constructor(t){if(super(),typeof t!="object")throw new Q(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new Q(`config must have value set but got ${t}`);this.value=t.value}apply(t,n){return st(()=>tt(Se(this.value),_o(t,n)))}getConfig(){return{value:this.value}}}Pq.className="Constant";St(Pq);class Fq extends ji{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,n){return Zp(t,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Fq.className="RandomUniform";St(Fq);class Lq extends ji{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ee(`randomNormal does not support dType ${n}.`);return A0(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Lq.className="RandomNormal";St(Lq);class Bq extends ji{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ee(`truncatedNormal does not support dType ${n}.`);return RG(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Bq.className="TruncatedNormal";St(Bq);class zq extends ji{constructor(t){super(),this.gain=t.gain!=null?t.gain:1}apply(t,n){return st(()=>{if(t.length!==2||t[0]!==t[1])throw new Q("Identity matrix initializer can only be used for 2D square matrices.");return tt(this.gain,gG(t[0]))})}getConfig(){return{gain:this.gain}}}zq.className="Identity";St(zq);function q0t(e,t="channelsLast"){let n,r;if(dn(t),e.length===2)n=e[0],r=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){const i=ho(e,2);n=e[1]*i,r=e[0]*i}else if(t==="channelsLast"){const i=ho(e,0,e.length-2);n=e[e.length-2]*i,r=e[e.length-1]*i}}else{const i=ho(e);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class Yr extends ji{constructor(t){if(super(),t.scale<0)throw new Q(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,W0t(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,G0t(this.distribution),this.seed=t.seed}apply(t,n){const r=q0t(t),i=r[0],a=r[1];let s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,i):this.mode==="fanOut"?s/=Math.max(1,a):s/=Math.max(1,(i+a)/2),this.distribution==="normal"){const o=Math.sqrt(s);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ee(`${this.getClassName()} does not support dType ${n}.`);return RG(t,0,o,n,this.seed)}else{const o=Math.sqrt(3*s);return Zp(t,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Yr.className="VarianceScaling";St(Yr);class RE extends Yr{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Yr.className}}RE.className="GlorotUniform";St(RE);class DE extends Yr{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Yr.className}}DE.className="GlorotNormal";St(DE);class ME extends Yr{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Yr.className}}ME.className="HeNormal";St(ME);class PE extends Yr{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Yr.className}}PE.className="HeUniform";St(PE);class FE extends Yr{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Yr.className}}FE.className="LeCunNormal";St(FE);class LE extends Yr{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Yr.className}}LE.className="LeCunUniform";St(LE);class jq extends ji{constructor(t){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed}apply(t,n){return st(()=>{if(t.length<2)throw new ee("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=pt(t.slice(0,-1)),i=t[t.length-1],a=r*i;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const s=[Math.max(i,r),Math.min(i,r)],o=A0(s,0,1,n,this.seed),l=rvt.qr(o,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=tt(c,d.sign()),r<i&&(c=c.transpose()),tt(Se(this.gain),c.reshape(t))})}getConfig(){return{gain:this.gain,seed:this.seed}}}jq.className="Orthogonal";St(jq);const Vz={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Wz(e,t={}){return rm(e,Oi.getMap().classNameMap,t,"initializer")}function tn(e){return EE(e)}function Ye(e){if(typeof e=="string"){const t=e in Vz?Vz[e]:e;if(t==="GlorotNormal")return new DE;if(t==="GlorotUniform")return new RE;if(t==="HeNormal")return new ME;if(t==="HeUniform")return new PE;if(t==="LeCunNormal")return new FE;if(t==="LeCunUniform")return new LE;{const n={};return n.className=t,n.config={},Wz(n)}}else return e instanceof ji?e:Wz(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mA(e){return Array.isArray(e)&&Array.isArray(e[0])}function vv(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function Yt(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new Q(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function be(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new Q(`Expected exactly 1 Shape; got ${e.length}`)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bv(e){let t=0;for(const n of e)n.shape.length===0?t+=1:t+=n.shape.reduce((r,i)=>r*i);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Gz="Variable";class H0t{constructor(t,n="float32",r=Gz,i=!0,a=null){this.dtype=n??"float32",this.shape=t.shape,this.id=Iq(),r=r??Gz,this.originalName=Oq(r),this.name=Nq(this.originalName),this.trainable_=i,this.constraint=a,this.val=ryt(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),X0t(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function X0t(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function gA(e){return e.map(t=>t.read())}function BE(e){e.forEach(t=>{t[0].write(t[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $n{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class Fa{constructor(t,n,r,i,a,s,o){this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=a,this.outputTensorIndex=o,this.id=Iq(),s!=null&&(this.originalName=Oq(s),this.name=Nq(this.originalName)),this.rank=n.length}}let K0t=0;class k0{constructor(t,n){this.callArgs=n,this.id=K0t++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const r of t.inboundLayers)r!=null&&r.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const n of this.inboundLayers)n!=null?t.push(n.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Y0t=0;class se extends df{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Y0t++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const r=this.getClassName();n=as(r)+"_"+$0(r)}if(this.name=n,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let r;if(t.batchInputShape!=null)r=t.batchInputShape;else if(t.inputShape!=null){let a=null;t.batchSize!=null&&(a=t.batchSize),r=[a].concat(t.inputShape)}this.batchInputShape=r;let i=t.dtype;i==null&&(i=t.inputDType),i==null&&(i="float32"),this.dtype=i}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,n){return t.name+"_ib-"+n.toString()}getNodeAtIndex(t,n){if(this.inboundNodes.length===0)throw new _i(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=t)throw new Q(`Asked to get ${n} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return Or(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return Or(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new ba(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new ba(`Layer ${this.name} is not connected, no input to return.`);return Or(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new ba(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new ba(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Or(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(n=>n.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){const n=Ie(t);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Ie(this.inputSpec);if(n.length!==r.length)throw new Q(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${t}`);for(let i=0;i<n.length;i++){const a=n[i],s=r[i];if(s==null)continue;const o=a.rank;if(s.ndim!=null&&o!==s.ndim)throw new Q(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${o}`);if(s.maxNDim!=null&&o>s.maxNDim)throw new Q(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${o}`);if(s.minNDim!=null&&o<s.minNDim)throw new Q(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${o}.`);if(s.dtype!=null&&a.dtype!==s.dtype)throw new Q(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${a.dtype}.`);if(s.axes){const l=a.shape;for(const c in s.axes){const h=Number(c),d=s.axes[c],p=h>=0?l[h]:l[l.length+h];if(d!=null&&[d,null].indexOf(p)===-1)throw new Q(`Input ${i} is incompatible with layer ${this.name}: expected axis ${h} of input shape to have value ${d} but got shape ${l}.`)}}if(s.shape!=null)for(let l=0;l<s.shape.length;++l){const c=s.shape[l],h=a.shape[l];if(c!=null&&h!=null&&c!==h)throw new Q(`Input ${i} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${a.shape}.`)}}}call(t,n){return t}invokeCallHook(t,n){this._callHook!=null&&this._callHook(t,n)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,n){n=n||{},this.assertNotDisposed();const r=Ie(t),i=J0t(t),a=txt(t);if(i===a)throw new Q("Arguments to apply() must be all SymbolicTensors or all Tensors");return bl(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const s=[];for(const o of Ie(t))s.push(o.shape);this.build(Or(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(t),a){let s=this.call(t,n);this.supportsMasking&&this.setMaskMetadata(t,s);const o=Ie(s),l=[];for(let c of o)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(s=Or(l),this.activityRegularizer!=null)throw new ee("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{const s=Z0t(t),o=this.computeOutputShape(s);let l;const c=Q0t(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?s[0]:s),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((h,d)=>new Fa(c,h,this,Ie(t),n,this.name,d)):l=new Fa(c,o,this,Ie(t),n,this.name),this.addInboundNode(t,l,null,null,s,o,n),this._refCount++,this.activityRegularizer!=null)throw new ee("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&t[i]!=null&&t[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new ba(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);t.indexOf(r)===-1&&t.push(r)}if(t.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new ba(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new _i(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return bv(this.weights)}build(t){this.built=!0}getWeights(t=!1){return gA(t?this.trainableWeights:this.weights)}setWeights(t){st(()=>{const n=this.weights;if(n.length!==t.length)throw new Q(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${n.length} weights. Provided weights: ${t}...`);if(n.length===0)return;const r=[],i=gA(n);for(let a=0;a<i.length;++a){const s=i[a],o=n[a],l=t[a];if(!Te(s.shape,l.shape))throw new Q(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}BE(r)})}addWeight(t,n,r,i,a,s,o,l){if(this._addedWeightNames.indexOf(t)!==-1)throw new Q(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():Ye("zeros"));const c=i.apply(n,r),h=new H0t(c,r,t,s,o);return c.dispose(),a!=null&&this.addLoss(()=>a.apply(h.read())),s==null&&(s=!0),s?this._trainableWeights.push(h):this._nonTrainableWeights.push(h),h}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=Ie(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(t,n,r){if(!this.supportsMasking)return;const i=this.computeMask(t,r),a=Ie(n),s=Ie(i);if(a.length!==s.length)throw new Error(`${this.name} outputs ${a.length} tensors but ${a.length} masks for those tensors`);for(let o=0;o<a.length;o++)a[o].kerasMask=s[o]}addInboundNode(t,n,r,i,a,s,o=null){const l=Ie(t);n=Ie(n),r=Ie(r),i=Ie(i),a=vv(a),s=vv(s);const c=[],h=[],d=[];for(const p of l)c.push(p.sourceLayer),h.push(p.nodeIndex),d.push(p.tensorIndex);new k0({outboundLayer:this,inboundLayers:c,nodeIndices:h,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:a,outputShapes:s},o);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function Z0t(e){e=Ie(e);const t=[];for(const n of e)t.push(n.shape);return Or(t)}function Q0t(e){return"float32"}function Uq(e,t,n){if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];{const r=t.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let a=0;a<r.inboundLayers.length;a++){const s=r.inputTensors[a],o=r.inboundLayers[a],l=r.nodeIndices[a],c=Uq(s,o,l);for(const h of c)i.indexOf(h)===-1&&i.push(h)}return i}}}function J0t(e){let t=!0;for(const n of Ie(e))if(!(n instanceof Fa)){t=!1;break}return t}function txt(e){let t=!0;for(const n of Ie(e))if(n instanceof Fa){t=!1;break}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class om extends se{constructor(t){if(super({dtype:t.dtype,name:t.name!=null?t.name:$0("input").toString()}),t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new Q("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=t.batchInputShape;if(n==null){if(t.inputShape==null)throw new Q("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new Q("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=t.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new Fa(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new k0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(t,n){throw new Q(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}om.className="InputLayer";St(om);function ext(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new Q("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let n=e.dtype;return n==null&&(n="float32"),new om({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nxt(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return Rt(t,e.dtype)}catch{throw new Q(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}class so{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof so)for(const n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(t==null)return;for(const n of t)this.add(n.key,n.value)}}add(t,n,r){if(this.id2Value[t.id]==null)this.id2Value[t.id]=nxt(t,n),this.name2Id[t.name]=t.id,r!=null&&(this.id2Mask[t.id]=r);else throw new Q(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof Fa){if(this.id2Value[t.id]==null)throw new Q(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const n=this.name2Id[t];if(n==null)throw new Q(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[n]}}getMask(t){if(t instanceof Fa){if(this.id2Value[t.id]==null)throw new Q(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const n=this.name2Id[t];if(n==null)throw new Q(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&le(this.id2Mask)}}const xv=new $q,wv=new $q;function rxt(e){xv!=null&&xv.setMaxEntries(e),wv!=null&&wv.setMaxEntries(e)}function jh(e,t,n,r){const i=n==null?!1:n.training,a=Array.isArray(e),s=a?e:[e],o=s.map(v=>v.name),l=[],c=t.names();for(const v of o)c.indexOf(v)!==-1?l.push(t.getValue(v)):l.push(null);const h=o.join(",")+"|"+t.names().sort().join(",");let d=xv.get(h),p;if(d==null){const v=ixt(s,t);d=v.sorted,p=v.recipientCounts,xv.put(h,d),wv.put(h,p)}p={},i||Object.assign(p,wv.get(h));const g=new so(t);for(let v=0;v<d.length;++v){const x=d[v],b=x.sourceLayer;if(b instanceof om)continue;const w=[],S=[],T=[];let $=!1;for(const _ of x.inputs){const R=g.getValue(_),E=g.getMask(_);w.push(R),S.push(E),E!=null&&($=!0),i||(p[_.name]--,p[_.name]===0&&!t.hasKey(_)&&o.indexOf(_.name)===-1&&!R.isDisposed&&_.sourceLayer.stateful!==!0&&T.push(R))}$&&(n=n||{},n.mask=S[0]);const A=Ie(b.apply(w,n));let I=null;b.supportsMasking&&(I=b.computeMask(w,S));const O=sxt(x),N=Array.isArray(O)?O:[O];for(let _=0;_<N.length;++_){g.hasKey(N[_])||g.add(N[_],A[_],Array.isArray(I)?I[0]:I);const R=o.indexOf(N[_].name);R!==-1&&(l[R]=A[_])}i||le(T)}return g.disposeMasks(),a?l:l[0]}function ixt(e,t){V(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(e.length===1){const i=qz(e[0],t);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const a of e){const{sorted:s,recipientMap:o}=qz(a,t);for(const l of s)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:axt(r)}}function axt(e){const t={};for(const n in e)t[n]=e[n].size;return t}function qz(e,t){const n=new Set,r=[],i={};for(const o of t.names())n.add(o);const a=[],s=[];for(a.push(e);a.length>0;){const o=a[a.length-1];if(n.has(o.name)){a.pop();continue}const l=s[s.length-1]===a.length-1;if(o.inputs.length===0||l)a.pop(),r.push(o),n.add(o.name),l&&s.pop();else{s.push(a.length-1);for(const c of o.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(o.name),!n.has(c.name)&&a.push(c)}}return{sorted:r,recipientMap:i}}function sxt(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let n=null;for(let r=0;r<e.sourceLayer.inboundNodes.length;++r)for(const i of e.sourceLayer.inboundNodes[r].outputTensors)if(i.id===e.id){n=r;break}t=e.sourceLayer.getOutputAt(n)}return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oxt=ct();oxt.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,rxt);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zE(e,t){return st(()=>lr(jt(tt(e,e),t,!0)))}class lm extends df{getConfig(){return{}}}class Vq extends lm{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return st(()=>{const n=zE(t,this.axis),r=di(n,0,this.maxValue);return tt(t,Ut(r,$t(Tn(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Vq.className="MaxNorm";St(Vq);class Wq extends lm{constructor(t){super(),this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return st(()=>Ut(t,$t(Tn(),zE(t,this.axis))))}getConfig(){return{axis:this.axis}}}Wq.className="UnitNorm";St(Wq);class Gq extends lm{apply(t){return Hl(t)}}Gq.className="NonNeg";St(Gq);class qq extends lm{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return st(()=>{const n=zE(t,this.axis),r=$t(tt(this.rate,di(n,this.minValue,this.maxValue)),tt(1-this.rate,n));return tt(t,Ut(r,$t(Tn(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}qq.className="MinMaxNorm";St(qq);const Hz={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function kn(e){return EE(e)}function Xz(e,t={}){return rm(e,Oi.getMap().classNameMap,t,"constraint")}function In(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in Hz?Hz[e]:e,config:{}};return Xz(n)}else return e instanceof lm?e:Xz(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function el(e){if(e==null)return;const t=[],n=[],r=[];for(const i in e){const a=e[i];if(typeof a!="number"){const s=a;t.push(s.data()),n.push(i),r.push(s)}}if(t.length>0){const i=await Promise.all(t);for(let a=0;a<i.length;++a)e[n[a]]=i[a][0];le(r)}}function Hq(e){if(e!=null)for(const t in e){const n=e[t];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Kz;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(Kz||(Kz={}));const lxt=125;class Ld{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,n){}async onEpochEnd(t,n){}async onBatchBegin(t,n){}async onBatchEnd(t,n){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class uxt{constructor(t,n=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=n}append(t){this.callbacks.push(t)}setParams(t){for(const n of this.callbacks)n.setParams(t)}setModel(t){for(const n of this.callbacks)n.setModel(t)}async onEpochBegin(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(t,n)}async onEpochEnd(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(t,n)}async onBatchBegin(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(t,n)}async onBatchEnd(t,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(t,n)}async onTrainBegin(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainEnd(t)}}class cxt extends Ld{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const a=n[i];if(typeof a=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+a*r;else{let s;i in this.totals?s=this.totals[i]:this.totals[i]=0;const o=st(()=>$t(this.totals[i],tt(a,r)));this.totals[i]=o,s!=null&&s.dispose()}}}async onEpochEnd(t,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:st(()=>{const i=tt(Ut(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Ia(n[r])}))}}class fxt extends Ld{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,n){n==null&&(n={}),this.epoch.push(t);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const t=[],n=[],r=[];for(const a in this.history){const s=this.history[a];for(let o=0;o<s.length;++o)if(typeof s[o]!="number"){const l=s[o];t.push(l.data()),n.push(a),r.push(o)}}const i=await Promise.all(t);for(let a=0;a<i.length;++a)this.history[n[a]][r[a]].dispose(),this.history[n[a]][r[a]]=i[a][0]}}class hxt extends Ld{constructor(t,n){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||QG,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=lxt),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");q2(this.yieldEvery)&&(this.maybeWait=$0t(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,r){const i=[];this.yield!=null&&(await el(r),i.push(this.yield(t,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(t,n){this.currentEpoch=t,this.epochBegin!=null&&(await el(n),await this.epochBegin(t,n))}async onEpochEnd(t,n){const r=[];this.epochEnd!=null&&(await el(n),r.push(this.epochEnd(t,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(t,n){this.batchBegin!=null&&(await el(n),await this.batchBegin(t,n))}async onBatchEnd(t,n){const r=[];this.batchEnd!=null&&(await el(n),r.push(this.batchEnd(t,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):q2(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(r)}async onTrainBegin(t){this.trainBegin!=null&&(await el(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await el(t),await this.trainEnd(t))}}function Xq(e,t){return e==null&&(e={}),e instanceof Ld?[e]:Array.isArray(e)&&e[0]instanceof Ld?e:Ie(e).map(r=>new hxt(r,t))}class Ei{constructor(){}static registerCallbackConstructor(t,n){V(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),Ei.checkForDuplicate(n),Ei.constructors[t]==null&&(Ei.constructors[t]=[]),Ei.constructors[t].push(n)}static checkForDuplicate(t){for(const n in Ei.constructors)Ei.constructors[+n].forEach(i=>{if(i===t)throw new Q("Duplicate callback constructor.")})}static clear(){Ei.constructors={}}static createCallbacks(t){const n=[];for(const r in Ei.constructors){const i=+r;t>=i&&n.push(...Ei.constructors[i])}return n.map(r=>new r)}}Ei.constructors={};function Kq(e,t,n,r,i,a,s,o,l){const c=new fxt,h=[new cxt,...Ei.createCallbacks(t)];e!=null&&h.push(...e),h.push(c);const d=new uxt(h);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:s,verbose:t,doValidation:o,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ms(e,t={},n=!1){return rm(e,Oi.getMap().classNameMap,t,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Sv(e,t){return st(()=>{e.dtype!=="float32"&&(e=Rt(e,"float32"));const n=jt(am(e),t,!0),r=y0(n.shape,Tn()),i=lr(No(n,r));return Ut(e,i)})}function I0(e,t){return st(()=>vn(am(qt(t,e)),-1))}function jE(e,t){return st(()=>vn(vr(qt(t,e)),-1))}function UE(e,t){return st(()=>{const n=qt(e,t),r=di(vr(e),Tn(),Number.MAX_VALUE),i=vr(Ut(n,r));return tt(100,vn(i,-1))})}function dxt(e,t){return st(()=>{const n=di(t,Tn(),Number.MAX_VALUE),r=Pa($t(1,n)),i=di(e,Tn(),Number.MAX_VALUE),a=Pa($t(1,i));return vn(am(qt(r,a)),-1)})}function pxt(e,t){return st(()=>{const n=No(0,qt(1,tt(e,t)));return vn(am(n),-1)})}function mxt(e,t){return st(()=>{const n=No(0,qt(1,tt(e,t)));return vn(n,-1)})}function gxt(e,t){return st(()=>{const n=jt(tt(e,t),-1),r=aa(tt(qt(1,e),t),-1);return No(0,$t(1,qt(r,n)))})}function yxt(e,t){return st(()=>{const n=Math.log(2),r=qt(t,e),i=qt($t(r,Yp(tt(-2,r))),n);return vn(i,-1)})}function Bd(e,t,n=!1){return st(()=>{if(n)t=qI(t);else{const r=jt(t,t.shape.length-1,!0);t=Ut(t,r)}return t=di(t,Tn(),1-Tn()),cn(jt(tt(Rt(e,"float32"),Pa(t)),t.shape.length-1))})}function Cv(e,t,n=!1){return st(()=>{const r=Rt(x0(F0t(e)),"int32");t=di(t,Tn(),1-Tn());const i=t.shape,a=nt(wG(r,i[i.length-1]),i);return Bd(a,t,n)})}function vxt(e,t){if(!Te(e.shape,t.shape))throw new Q(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return st(()=>{const n=Hl(t),r=cn(vr(t));return $t(qt(n,tt(t,e)),yG(Ma(r)))})}function E0(e,t){return st(()=>{let n;return n=di(t,Tn(),1-Tn()),n=Pa(Ut(n,qt(1,n))),vn(vxt(e,n),-1)})}function bxt(e,t){return st(()=>{const n=di(e,Tn(),1),r=di(t,Tn(),1);return jt(tt(e,Pa(Ut(n,r))),-1)})}function xxt(e,t){return st(()=>{const n=Pa($t(Tn(),t));return vn(qt(t,tt(e,n)),-1)})}function Yq(e,t){return st(()=>{const n=Sv(e,-1),r=Sv(t,-1),i=tt(n,r);return cn(jt(i,-1))})}const Tv={meanSquaredError:I0,meanAbsoluteError:jE,meanAbsolutePercentageError:UE,meanSquaredLogarithmicError:dxt,squaredHinge:pxt,hinge:mxt,categoricalHinge:gxt,logcosh:yxt,categoricalCrossentropy:Bd,sparseCategoricalCrossentropy:Cv,binaryCrossentropy:E0,kullbackLeiblerDivergence:bxt,poisson:xxt,cosineProximity:Yq};function m$(e){if(typeof e=="string"){if(e in Tv)return Tv[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Q(t)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zq(e,t){return st(()=>{const n=tt(.5,Li(t)),r=Oa(pi(t,n),e.dtype);return vn(Da(e,r),-1)})}function Qq(e,t){return st(()=>Oa(Da(Rd(e,-1),Rd(t,-1)),"float32"))}function wxt(e,t){return st(()=>Rt(jt(bs(Da(e,1),Da(t,1))),"float32"))}function Sxt(e,t){return st(()=>Rt(jt(bs(Da(e,0),Da(t,1))),"float32"))}function Cxt(e,t){return st(()=>{const n=wxt(e,t),r=Sxt(e,t),i=$t(n,r);return Rt(Cr(pi(i,0),Ut(n,i),0),"float32")})}function Txt(e,t){return E0(e,t)}function $xt(e,t){return e.rank===t.rank&&(e=Qp(e,[e.rank-1])),t=Rd(t,-1),t.dtype!==e.dtype&&(t=Rt(t,e.dtype)),Rt(Da(e,t),"float32")}const Axt=I0,kxt=I0,Ixt=jE,Ext=jE,Oxt=UE,Nxt=UE,Jq=Bd,_xt=Yq,tH=Cv,$v={binaryAccuracy:Zq,categoricalAccuracy:Qq,precision:Cxt,categoricalCrossentropy:Jq,sparseCategoricalCrossentropy:tH,mse:Axt,MSE:kxt,mae:Ixt,MAE:Ext,mape:Oxt,MAPE:Nxt,cosine:_xt};function Rxt(e){if(typeof e=="string"&&e in $v)return $v[e];if(typeof e!="string"&&e!=null)return e;throw new Q(`Unknown metric ${e}`)}function qg(e){if(xa(e!==null,`Unknown LossOrMetricFn ${e}`),typeof e=="string")return e;{let t;for(const n of Object.keys(Tv))if(Tv[n]===e){t=n;break}if(t!==void 0)return t;for(const n of Object.keys($v))if($v[n]===e){t=n;break}return t!==void 0?t:e.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Dxt(e){const t={Adagrad:()=>Gu.adagrad(.01),Adadelta:()=>Gu.adadelta(1,.95,Tn()),Adam:()=>Gu.adam(.001,.9,.999,Tn()),Adamax:()=>Gu.adamax(.002,.9,.999,Tn(),0),RMSProp:()=>Gu.rmsprop(.001,.9,0,Tn()),SGD:()=>Gu.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Q(`Unknown Optimizer ${e}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Yz=1*1024*1024;function Zz(e,t,n=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!yA(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(e);r.length>Yz&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${Yz}.`)}}function yA(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t)if(typeof n!="string"||!yA(e[n]))return!1;return!0}else if(Array.isArray(e)){for(const t of e)if(!yA(t))return!1;return!0}else return!1;else{const t=typeof e;return t==="string"||t==="number"||t==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mxt(e,t,n,r=console.log){const i=Fxt(e),a=["Layer (type)","Input Shape","Output shape","Param #"];i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(h=>Math.floor(t*h)));let s;if(!i){a.push("Receives inputs"),s=[];for(const h in e.nodesByDepth)s.push(...e.nodesByDepth[h])}r("_".repeat(t)),Av(a,n,r),r("=".repeat(t));const o=e.layers;for(let h=0;h<o.length;++h)i?Lxt(o[h],n,r):Bxt(o[h],n,s,r),r((h===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=Pxt(e),c=bv(e.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(t))}function Pxt(e){let t;return e.collectedTrainableWeights!=null?t=bv(e.collectedTrainableWeights):t=bv(e.trainableWeights),t}function Fxt(e){let t=!0;const n=[],r=[];for(const i in e.nodesByDepth)n.push(e.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){t=!1;break}r.push(...i)}if(t)for(const i of e.layers){let a=!1;for(const s of i.inboundNodes)if(r.indexOf(s)!==-1)if(a){t=!1;break}else a=!0;if(!t)break}return t}function Av(e,t,n=console.log){let r="";for(let i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=e[i],r=r.slice(0,t[i]),r+=" ".repeat(t[i]-r.length);n(r)}function Lxt(e,t,n){let r,i;try{i=e.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(e.outputShape)}catch{r="multiple"}const a=e.name,s=e.getClassName(),o=[`${a} (${s})`,i,r,e.countParams().toString()];Av(o,t,n)}function Bxt(e,t,n,r){let i,a;try{a=e.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{a="multiple"}try{i=JSON.stringify(e.outputShape)}catch{i="multiple"}const s=[];for(const d of e.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){const g=d.inboundLayers[p].name,v=d.nodeIndices[p],x=d.tensorIndices[p];s.push(`${g}[${v}][${x}]`)}const o=e.name,l=e.getClassName(),c=s.length===0?"":s[0],h=[`${o} (${l})`,a,i,e.countParams().toString(),c];Av(h,t,r);for(let d=1;d<s.length;++d)Av(["","","","",s[d]],t,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eH(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function vA(e,t){if(e===null)return null;if(typeof e=="string")return ol(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const a=e[i];eH(t,i,a)?n.push(a):n.push(vA(a,t))}return n}else{const n={};for(const r of Object.keys(e)){const i=e[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const a=ol(r);n[a]=vA(i,a)}}return n}}function bA(e,t){if(e==null)return null;if(typeof e=="string")return as(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const a=e[i];eH(t,i,a)?n.push(a):n.push(bA(a,t))}return n}else{const n={};for(const r of Object.keys(e)){const i=e[r],a=as(r);(r==="name"||r==="className")&&typeof i=="string"?n[a]=i:n[a]=bA(i,r)}return n}}/** @license See the LICENSE file. */const nH="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const zxt=e=>{const t=Object.keys(e);if(t.length===0)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ki extends se{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,this.name==null){const S=this.getClassName().toLowerCase();this.name=$0(S)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],fo(this.inputs).length!==this.inputs.length)throw new Q(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(S=>S.name)}`);fo(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(S=>S.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const S of this.outputs){const T=S.sourceLayer,$=S.nodeIndex,A=S.tensorIndex;this.outputLayers.push(T),this.outputLayersNodeIndices.push($),this.outputLayersTensorIndices.push(A)}for(const S of this.inputs){const T=S.sourceLayer,$=S.nodeIndex,A=S.tensorIndex;xa($===0,"input layer has >1 nodes"),xa(A===0,"input layer has >1 tensors"),this.inputLayers.push(T),this.inputLayersNodeIndices.push($),this.inputLayersTensorIndices.push(A)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let S=0;S<this.inputLayers.length;S++){const T=this.inputLayers[S];if(!(T instanceof om))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${S} (0-based) originates from layer type ${T.getClassName()}.`);this.inputNames.push(T.name),this.feedInputShapes.push(T.batchInputShape),this.feedInputNames.push(T.name)}for(const S of this.outputLayers)this.outputNames.push(S.name);this.internalInputShapes=this.inputs.map(S=>S.shape),this.internalOutputShapes=this.outputs.map(S=>S.shape);const n={},r={},i={},a={},s={},o=[],l=(S,T,$,A,I,O)=>{(A==null||I==null||O==null)&&(A=S.sourceLayer,I=S.nodeIndex,O=S.tensorIndex);const N=A.inboundNodes[I];if($.indexOf(N)!==-1)throw new _i(`The tensor ${S.name} at layer "${A.name}" is part of a cycle.`);if(T.indexOf(N)!==-1)return;this.containerNodes.add(Ki.nodeKey(A,I)),A.id in s||(s[A.id]=Object.keys(s).length),$.indexOf(N)===-1&&$.push(N);const _=N.inboundLayers.length;for(let R=0;R<_;R++){const E=N.inputTensors[R],F=N.inboundLayers[R],M=N.nodeIndices[R],B=N.tensorIndices[R];l(E,T,$,F,M,B)}for(T.push(N);$.indexOf(N)>=0;)$.splice($.indexOf(N),1);o.push(N)},c=[],h=[];for(const S of this.outputs)l(S,c,h);const d=o.slice().reverse();for(const S of d){r[S.id]=S,S.id in n||(n[S.id]=0);let T=n[S.id];const $=i[S.outboundLayer.id]==null?0:i[S.outboundLayer.id];T=Math.max(T,$),i[S.outboundLayer.id]=T,a[S.outboundLayer.id]=S.outboundLayer,n[S.id]=T;for(let A=0;A<S.inboundLayers.length;A++){const I=S.inboundLayers[A],O=S.nodeIndices[A],N=I.inboundNodes[O],_=n[N.id]==null?0:n[N.id];n[N.id]=Math.max(T+1,_),r[N.id]=N}}const p={};for(const S in n){const T=n[S];T in p||(p[T]=[]),p[T].push(r[S])}const g={};for(const S in i){const T=i[S];T in g||(g[T]=[]),g[T].push(a[S])}let v=Object.keys(g).map(S=>parseInt(S,10)).sort(Vg);this.layers=[];for(const S of v){const T=g[S];T.sort(($,A)=>{const I=s[$.id],O=s[A.id];return I<O?-1:I>O?1:0});for(const $ of T)$ instanceof Ki&&this.internalContainerRefs.push($),this.layers.push($)}this.layersByDepth=g,v=Object.keys(p).map(S=>parseInt(S,10)).sort(Vg);const x=this.inputs.slice(),b=[];for(const S of v)for(const T of p[S]){const $=T.outboundLayer;if($!=null){for(const A of T.inputTensors)if(x.indexOf(A)===-1)throw new _i(`Graph disconnected: cannot obtain value for tensor ${A} at layer "${$.name}". The following previous layers were accessed without issue: ${b}`);for(const A of T.outputTensors)x.push(A);b.push($.name)}}this.nodesByDepth=p;const w=this.layers.map(S=>S.name);for(const S of w){const T=w.filter($=>$===S).length;if(T!==1)throw new _i(`The name "${S}" is used ${T} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(w))}this.outboundNodes=[],this.inboundNodes=[],new k0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(S=>null),outputMasks:this.outputs.map(S=>null),inputShapes:this.inputs.map(S=>S.shape),outputShapes:this.outputs.map(S=>S.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)t.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)t.numDisposedVariables+=n.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new Q("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const n of this.layers)t=t.concat(n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.layers)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,n=!0){const r={};let i=0;const a=zxt(t);a&&this.parseWeights(t);for(const o of this.layers)for(const[l,c]of o.weights.entries()){const h=a?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[h]!=null)throw new Q(`Duplicate weight name: ${h}`);r[h]=c,i++}const s=[];for(const o in t){let l=o;if(r[o]==null){const c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)s.push([r[l],t[o]]);else if(n)throw new Q(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new Q(`${o.length} of ${i} weights are not set: ${o}`)}BE(s)}parseWeights(t){for(const n in Object.keys(t)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],a=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!i.includes(s)).join("/");a!==n&&(t[a]=t[n],delete t[n])}}updatedConfig(){const t=this.getConfig(),n={};return n.className=this.getClassName(),n.config=t,n.kerasVersion=`tfjs-layers ${nH}`,n.backend="TensorFlow.js",n}toJSON(t,n=!0){const r=bA(this.updatedConfig());return n?JSON.stringify(r):r}call(t,n){return st(()=>{t=Ie(t);const r=new so;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],t[i]);return jh(this.outputs,r,n)})}computeMask(t,n){return st(()=>{t=Ie(t);let r;return n==null?r=Pl(null,t.length):r=Ie(n),this.runInternalGraph(t,r)[1]})}computeOutputShape(t){const n=vv(t);if(n.length!==this.inputLayers.length)throw new Q(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],c=n[o],h=l.name+"_0_0";r[h]=c}const i=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Vg);if(i.length>1)for(const o of i){const l=this.nodesByDepth[o];for(const c of l){const h=c.outboundLayer;if(this.inputLayers.map(x=>x.id).indexOf(h.id)!==-1)continue;const d=[];for(let x=0;x<c.inboundLayers.length;x++){const b=c.inboundLayers[x],w=c.nodeIndices[x],S=c.tensorIndices[x],T=`${b.name}_${w}_${S}`,$=r[T];d.push($)}const p=h.computeOutputShape(Or(d)),g=vv(p),v=h.inboundNodes.indexOf(c);for(let x=0;x<g.length;x++){const b=`${h.name}_${v}_${x}`;r[b]=g[x]}}}const a=[],s=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],c=this.outputLayersNodeIndices[o],h=this.outputLayersTensorIndices[o],d=`${l.name}_${c}_${h}`;s.push(d)}for(let o=0;o<s.length;o++){const l=s[o];xa(l in r),a.push(r[l])}return Or(a)}runInternalGraph(t,n){n==null&&(n=Pl(null,t.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],h=t[l],d=n[l];r[c.id]=[h,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Vg);for(const l of i){const c=this.nodesByDepth[l];for(const h of c){const d=h.outboundLayer,p=h.inputTensors,g=h.outputTensors,v=new Array;for(const x of p)x.id in r&&v.push(r[x.id]);if(v.length===p.length){let x={},b,w,S,T;if(h.callArgs!=null&&(x=h.callArgs),v.length===1){const[$,A]=v[0];x.mask==null&&(x.mask=A),S=Ie(d.call($,x)),T=Ie(d.computeMask($,A)),b=[$],w=[A]}else b=v.map($=>$[0]),w=v.map($=>$[1]),x.mask==null&&(x.mask=w),S=Ie(d.call(b,x)),T=Ie(d.computeMask(b,w));if(d.activityRegularizer)throw new ee("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let $=0;$<g.length;++$){const A=g[$],I=S[$],O=T[$];r[A.id]=[I,O]}}}}const a=[],s=[],o=[];for(const l of this.outputs){xa(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,h]=r[l.id];o.push(c.shape),a.push(c),s.push(h)}return[a,s,o]}buildNodeConversionMap(t){const n={};let r;for(const i of this.layers){r=i instanceof Ki?1:0;for(let a=0;a<i.inboundNodes.length;a++){const s=Ki.nodeKey(i,a);this.containerNodes.has(s)&&(n[s]=r,r+=1)}}return n}getLayer(t,n){if(n!=null)return this.findLayer(n);if(t==null)throw new Q("Provide either a layer name or layer index");if(typeof t=="number")return this.findLayer(t);for(const r of this.layers)if(r.name===t)return r;throw new Q(`No such layer: ${t}`)}findLayer(t){if(this.layers.length<=t)throw new Q(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}calculateLosses(){return st(()=>{const t=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=Ki.nodeKey(n,r);this.containerNodes.has(i)&&t.push(...n.calculateLosses())}return t})}getConfig(){const t={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const s of this.layers){const o=s.getClassName(),l=s.getConfig(),c=[];for(let d=0;d<s.inboundNodes.length;d++){const p=s.inboundNodes[d],g=Ki.nodeKey(s,d);let v={};if(this.containerNodes.has(g)){if(p.callArgs)try{JSON.stringify(p.callArgs),v=p.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),v={}}if(p.inboundLayers.length>0){const x=[];for(let b=0;b<p.inboundLayers.length;b++){const w=p.inboundLayers[b],S=p.nodeIndices[b],T=p.tensorIndices[b],$=Ki.nodeKey(w,S);let A=n[$];A==null&&(A=0),x.push([w.name,A,T,v])}c.push(x)}}}const h={};h.name=s.name,h.className=o,h.config=l,h.inboundNodes=c,r.push(h)}t.layers=r;const i=[];for(let s=0;s<this.inputLayers.length;s++){const o=this.inputLayers[s],l=this.inputLayersNodeIndices[s],c=Ki.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let h=n[c];h==null&&(h=0);const d=this.inputLayersTensorIndices[s];i.push([o.name,h,d])}t.inputLayers=i;const a=[];for(let s=0;s<this.outputLayers.length;s++){const o=this.outputLayers[s],l=this.outputLayersNodeIndices[s],c=Ki.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let h=n[c];h==null&&(h=0);const d=this.outputLayersTensorIndices[s];a.push([o.name,h,d])}return t.outputLayers=a,t}static fromConfig(t,n,r={},i=!1){const a={},s={};function o(b,w){b.name in s?s[b.name].push(w):s[b.name]=[w]}function l(b,w){const S=[];let T;for(const $ of w){const A=$[0],I=$[1],O=$[2];if(T=$[3]==null?{}:$[3],!(A in a)){o(b,w);return}const N=a[A];if(N.inboundNodes.length<=I){o(b,w);return}const _=N.inboundNodes[I];S.push(_.outputTensors[O])}S.length>0&&b.apply(Or(S),T)}function c(b){const w=b.name,S=ms(b,n.customObjects!=null?n.customObjects:{});S.setFastWeightInitDuringBuild(i),a[w]=S,b.inboundNodes.forEach($=>{if(!($ instanceof Array))throw new Q(`Corrupted configuration, expected array for nodeData: ${$}`);o(S,$)})}const h=n.name,d=n.layers;for(const b of d)c(b);for(;!T0t(s);)for(const b of d){const w=a[b.name];if(w.name in s){const S=s[w.name];delete s[w.name];for(const T of S)l(w,T)}}const p=[],g=[],v=n.inputLayers;for(const b of v){const w=b[0],S=b[1],T=b[2];xa(w in a);const A=a[w].inboundNodes[S].outputTensors;p.push(A[T])}const x=n.outputLayers;for(const b of x){const w=b[0],S=b[1],T=b[2];xa(w in a);const A=a[w].inboundNodes[S].outputTensors;g.push(A[T])}return new t({inputs:p,outputs:g,name:h})}get stateful(){if(this._stateful)throw new Q("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){st(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jxt(e,t,n){const r=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(i=>null);if(r===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){const i=[];return t.forEach(a=>{a in e?i.push(e[a]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function rH(e,t){return jxt(e,t,"classWeight")}async function iH(e,t,n,r){if(n!=null){const i=st(()=>{if(e.shape.length===1)return vl(e);if(e.shape.length===2){if(e.shape[1]>1)return Rd(e,1);if(e.shape[1]===1)return nt(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await i.data());le(i);const s=[];return a.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);s.push(n[o])}),Xr(s,"float32")}else return null}function Uxt(e,t){return tt(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Vxt=32;function aH(e,t){let n,r;const i=t;n=i.xs,r=i.ys,V(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const a=Qz("input",e.inputNames,n),s=Qz("output",e.outputNames,r),o=a[0].shape[0];V(a.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),V(s.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let l=0;l<a.length;l++)V(a[l].shape[0]===o,()=>`Batch size mismatch: input ${e.inputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);for(let l=0;l<s.length;l++)V(s[l].shape[0]===o,()=>`Batch size mismatch: output ${e.outputNames[l]} has ${s[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);return{xs:a,ys:s}}function Qz(e,t,n){if(n instanceof Cn)return[n];if(Array.isArray(n))return V(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{const r=[];for(const i of t){if(n[i]==null)throw new Q(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(n[i])}return r}}function Wxt(e){if(e.length===3)throw new ee("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function Gxt(e,t,n){const r=n.batchesPerEpoch!=null;if(V(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),V(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),V(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),V(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),V(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const i=n.validationData!=null;let a,s;if(i)if(Jz(n.validationData))V(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const b=Wxt(n.validationData);a=b.xs,s=b.ys}const o=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(b=>"val_"+b)):c=l.slice();const h=Xq(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:p,history:g}=Kq(h,d,n.epochs,null,null,qxt(t,n),null,i,c);p.setModel(e),e.history=g,await p.onTrainBegin(),e.stopTraining_=!1;let v=n.initialEpoch==null?0:n.initialEpoch,x=await t.iterator();for(;v<n.epochs;){const b={};await p.onEpochBegin(v);let w=0,S=0;for(r||(x=await t.iterator());!r||w<n.batchesPerEpoch;){const T=await x.next();if(r&&T.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${w} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(T.value!=null){const{xs:$,ys:A}=aH(e,T.value),I={};I.batch=S,I.size=$[0].shape[0],await p.onBatchBegin(S,I);const O=[];if(n.classWeight!=null){const R=rH(n.classWeight,e.outputNames);for(let E=0;E<R.length;++E)O.push(await iH(A[E],null,R[E]))}const N=$.concat(A).concat(O),_=o(N);le(N);for(let R=0;R<l.length;++R){const E=l[R],F=_[R];I[E]=F,Ia(F)}await p.onBatchEnd(S,I),Hq(I),S++,w++}if(r?w>=n.batchesPerEpoch:T.done){if(i){let $;Jz(n.validationData)?$=Ie(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):$=Ie(e.evaluate(a,s,{batchSize:n.validationBatchSize==null?Vxt:n.validationBatchSize,verbose:0}));for(let A=0;A<e.metricsNames.length;++A)b[`val_${e.metricsNames[A]}`]=$[A]}break}if(e.stopTraining_)break}if(await p.onEpochEnd(v,b),v++,e.stopTraining_)break}return await p.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function qxt(e,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function Jz(e){return typeof e.iterator=="function"}function Hxt(e){return typeof e.next=="function"}async function Xxt(e,t,n){n=n||{};const r=n.batches!=null,i=e.testFunction;let a=[];if(n.verbose>0)throw new ee("Verbose mode is not implemented yet.");V(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const s=Hxt(t)?t:await t.iterator();let o=0,l=0;for(;!r||l<n.batches;){const c=await s.next();if(a=st(()=>{if(c.value){const{xs:h,ys:d}=aH(e,c.value),p=h.concat(d),g=st(()=>i(p));if(le(p),l===0)for(let x=0;x<g.length;++x)a.push(Se(0));const v=p[0].shape[0];for(let x=0;x<g.length;++x){const b=g[x],w=a[x];a[x]=st(()=>$t(a[x],tt(v,b))),l>0&&le(w)}le(g),o+=v,++l}return a}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<a.length;++c){const h=a[c];a[c]=Ut(a[c],o),le(h)}return Or(a)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function g$(e){V(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function Dh(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(r=>xl(r,t,n-t)):xl(e,t,n-t)}function xA(e,t){return st(()=>e==null?null:Array.isArray(e)?e.map(n=>xA(n,t)):Rq(e,t.dtype==="int32"?t:Rt(t,"int32")))}function y$(e,t){const n=[];let r=0,i=null;for(;r<e;)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}function sH(e){const t=[];e instanceof Cn&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(r.rank===1)t.push(im(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Xi(e,t){if(e==null)return;const n=[];if(t instanceof Cn)n.push(t.id);else if(Array.isArray(t))t.forEach(i=>n.push(i.id));else if(t!=null)for(const i in t){const a=t[i];n.push(a.id)}const r=[];if(e instanceof Cn)n.indexOf(e.id)===-1&&r.push(e);else if(Array.isArray(e))e.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(e!=null)for(const i in e){const a=e[i];n.indexOf(a.id)===-1&&r.push(a)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Kxt(e){return e instanceof Cn}function wA(e){return Array.isArray(e)}function t4(e){return!Kxt(e)&&!wA(e)}function e4(e,t,n,r=!0,i=""){if(t==null||t.length===0){if(e!=null){let s=!1;if(wA(e)&&e.length>0)s=!0;else if(t4(e)){for(const o in e)if(e.hasOwnProperty(o)){s=!0;break}}else s=!0;if(s)throw new Q(`Error when checking model ${i} expected no data, but got ${e}`)}return[]}if(e==null)return t.map(s=>null);let a;if(t4(e)){e=e,a=[];for(const s of t){if(e[s]==null)throw new Q(`No data provided for "${s}". Need data for each key in: ${t}`);a.push(e[s])}}else if(wA(e)){if(e=e,e.length!==t.length)throw new Q(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);a=e}else{if(e=e,t.length>1)throw new Q(`The model ${i} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);a=[e]}if(a=sH(a),n!=null)for(let s=0;s<t.length;++s){if(n[s]==null)continue;const o=a[s];if(o.shape.length!==n[s].length)throw new Q(`Error when checking ${i}: expected ${t[s]} to have ${n[s].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;const c=o.shape[l],h=n[s][l];if(h!=null&&h>=0&&c!==h)throw new Q(`${i} expected a batch of elements where each example has shape [${n[s].slice(1,n[s].length)}] (i.e.,tensor shape [*,${n[s].slice(1,n[s].length)}]) but the ${i} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return a}function Yxt(e,t,n){const r=fo(e.map(a=>a.shape[0]));r.sort();const i=fo(t.map(a=>a.shape[0]));if(i.sort(),r.length>1)throw new Q(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(i.length>1)throw new Q(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(a=>a.shape))}`);if(r.length>0&&i.length>0&&!Te(r,i))throw new Q(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function Zxt(e,t,n){const r=[I0,E0,Bd];for(let i=0;i<e.length;++i){const a=e[i],s=t[i],o=n[i];if(s!=null){if(s===Bd&&a.shape[a.shape.length-1]===1)throw new Q(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(s)!==-1){const l=a.shape.slice(1),c=o.slice(1);for(let h=0;h<l.length;++h){const d=l[h],p=c[h];if(p!=null&&d!==p)throw new Q(`A target Tensor with shape ${a.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function n4(e,t,n,r=!0,i=""){let a;if(Array.isArray(e)){if(e.length!==t.length)throw new Q(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);a=e}else{if(t.length>1)throw new Q(`The model expects ${t.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);a=[e]}if(n!=null)for(let s=0;s<t.length;++s){if(n[s]==null)continue;const o=a[s];if(o.shape.length!==n[s].length)throw new Q(`Error when checking ${i}: expected ${t[s]} to have ${n[s].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;const c=o.shape[l],h=n[s][l];if(h!=null&&h!==c)throw new Q(`Error when checking ${i}: expected ${t[s]} to have shape ${JSON.stringify(n[s])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function Qxt(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(r=>[]);let n;if(typeof e=="string"||typeof e=="function")n=[e];else if(Array.isArray(e)||typeof e=="object")n=e;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);if(Array.isArray(n))return t.map(r=>n);{const r=[];for(const i of t){let a=n.hasOwnProperty(i)?n[i]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}const Jxt="layers-model";class uc extends Ki{constructor(t){super(t),this.isTraining=!1}summary(t,n,r=console.log){if(!this.built)throw new Q("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Mxt(this,t,n,r)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=Dxt(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof Ro))throw new Q("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const s in t.loss)if(this.outputNames.indexOf(s)===-1)throw new Q(`Unknown entry in loss dictionary: "${s}". Only expected the following keys: ${this.outputNames}`);for(const s of this.outputNames)t.loss[s]==null&&console.warn(`Output "${s}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${s} during training`),n.push(m$(t.loss[s]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new Q(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);n=t.loss.map(o=>m$(o))}else{const s=m$(t.loss);this.outputs.forEach(o=>{n.push(s)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const o=this.internalOutputShapes[s],l=this.outputNames[s];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[s])}const r=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],bl("loss",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const o=this.lossFunctions[s];this.outputs.length>1&&(this.metricsTensors.push([o,s]),this.metricsNames.push(this.outputNames[s]+"_loss"))}});const i=Qxt(t.metrics,this.outputNames),a=(s,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[s]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,s])};bl("metric",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const o=i[s];(c=>{const h="";let d,p,g;for(const v of c){if(typeof v=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(v)!==-1){const b=this.internalOutputShapes[s];b[b.length-1]===1||this.lossFunctions[s]===E0?["accuracy","acc"].indexOf(v)!==-1?p=Zq:["crossentropy","ce"].indexOf(v)!==-1&&(p=Txt):this.lossFunctions[s]===Cv?["accuracy","acc"].indexOf(v)!==-1?p=$xt:["crossentropy","ce"].indexOf(v)!==-1&&(p=tH):["accuracy","acc"].indexOf(v)!==-1?p=Qq:["crossentropy","ce"].indexOf(v)!==-1&&(p=Jq);let w;["accuracy","acc"].indexOf(v)!==-1?w="acc":["crossentropy","ce"].indexOf(v)!==-1&&(w="ce"),g=p,d=h+w}else g=Rxt(v),d=h+qg(v);let x;bl(d,()=>{x=g}),a(s,d,x)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,n,r={}){const i=r.batchSize==null?32:r.batchSize;g$(i);const s=this.standardizeUserDataXY(t,n,!0,i);try{const o=s[0].concat(s[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,o,i,r.verbose,r.steps);return Or(c)}finally{Xi(s[0],t),Xi(s[1],n)}}async evaluateDataset(t,n){return this.makeTestFunction(),Xxt(this,t,n)}checkNumSamples(t,n,r,i="steps"){let a;if(r!=null){if(a=null,n!=null)throw new Q(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(t!=null)Array.isArray(t)?a=t[0].shape[0]:a=t.shape[0];else throw new Q(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return a}execute(t,n){if(Array.isArray(n)&&n.length===0)throw new Q("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],a=this.retrieveSymbolicTensors(i),s=new so;if(t instanceof Cn&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new Q(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)s.add(this.inputs[l],t[l])}else for(const l of this.inputs){const c=t[l.name];if(c==null)throw new Q(`No value is provided for the model's input ${l.name}`);s.add(l,c)}const o=jh(a,s);return r?o:o[0]}retrieveSymbolicTensors(t){const n=Pl(null,t.length);let r=t.length;for(const i of this.layers){const a=Array.isArray(i.output)?i.output:[i.output],s=a.map(o=>o.name);for(let o=0;o<t.length;++o){const l=s.indexOf(t[o]);if(l!==-1&&(n[o]=a[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((a,s)=>{a==null&&i.push(t[s])}),new Q(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(t,n=32,r=!1){return st(()=>{const i=this.checkNumSamples(t);if(r)throw new ee("Verbose predictLoop() is not implemented yet.");const a=y$(i,n),s=this.outputs.map(o=>[]);for(let o=0;o<a.length;++o)st(()=>{const c=a[o][0],h=a[o][1],d=Dh(t,c,h),p=[];if(Array.isArray(d))for(let v=0;v<d.length;++v)p.push({key:this.inputs[v],value:d[v]});else p.push({key:this.inputs[0],value:d});const g=new so(p);return jh(this.outputs,g)}).forEach((c,h)=>s[h].push(c));return Or(s.map(o=>_r(o,0)))})}predict(t,n={}){const r=sH(t);n4(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return g$(i),this.predictLoop(r,i)}finally{Xi(r,t)}}predictOnBatch(t){n4(t,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,n)}standardizeUserDataXY(t,n,r=!0,i){if(this.optimizer_==null)throw new _i("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let s=0;s<this.feedOutputShapes.length;++s){const o=this.feedOutputShapes[s];this.feedLossFns[s]===Cv?a.push(o.slice(0,o.length-1).concat([1])):a.push(o)}if(t=e4(t,this.feedInputNames,this.feedInputShapes,!1,"input"),n=e4(n,this.feedOutputNames,a,!1,"target"),Yxt(t,n),Zxt(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&t[0].shape[0]%i!==0)throw new Q(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${t[0].shape[0]} sample(s).`);return[t,n]}async standardizeUserData(t,n,r,i,a=!0,s){const[o,l]=this.standardizeUserDataXY(t,n,a,s);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const h=rH(i,this.outputNames);c=[];for(let d=0;d<h.length;++d)c.push(await iH(l[d],null,h[d]))}return[o,l,c]}testLoop(t,n,r,i=0,a){return st(()=>{const s=this.checkNumSamples(n,r,a,"steps"),o=[];if(i>0)throw new ee("Verbose mode is not implemented yet.");if(a!=null)throw new ee("steps mode in testLoop() is not implemented yet");{const l=y$(s,r),c=Xr(oa(0,s));for(let h=0;h<l.length;++h){const d=l[h][0],p=l[h][1],g=xl(c,d,p-d),v=xA(n,g),x=t(v);if(h===0)for(let b=0;b<x.length;++b)o.push(Se(0));for(let b=0;b<x.length;++b){const w=x[b];o[b]=$t(o[b],tt(p-d,w))}}for(let h=0;h<o.length;++h)o[h]=Ut(o[h],s)}return o})}getDedupedMetricsNames(){const t=this.metricsNames,n=[];for(let r=0;r<t.length;++r){const i=t[r];let a=i;if(zz(t,i)>1){const s=zz(t.slice(0,r),i);a+=`_${s}`}n.push(a)}return n}makeTrainFunction(){return t=>{const n=[],r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),s=[],o=()=>{const d=[];for(let x=0;x<this.inputs.length;++x)d.push({key:this.inputs[x],value:r[x]});const p=new so(d),g=jh(this.outputs,p,{training:!0});let v;for(let x=0;x<this.lossFunctions.length;++x){const b=this.lossFunctions[x];let w=b(i[x],g[x]);a[x]!=null&&(w=Uxt(w,a[x]));const S=vn(w);n.push(S),x===0?v=w:v=$t(v,w)}for(let x=0;x<this.metricsTensors.length;++x){let b;if(this.outputs.length>1&&x<this.outputs.length)b=n[x];else{const w=this.metricsTensors[x][0],S=this.metricsTensors[x][1];b=vn(w(i[S],g[S]))}Ia(b),s.push(b)}return v=vn(v),this.calculateLosses().forEach(x=>{v=$t(v,x)}),v},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(o,!0,l)].concat(s)}}makeTestFunction(){this.testFunction=t=>st(()=>{const n=[];let r;const i=t.slice(0,this.inputs.length),a=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let c=0;c<this.inputs.length;++c)s.push({key:this.inputs[c],value:i[c]});const o=new so(s),l=jh(this.outputs,o);for(let c=0;c<this.lossFunctions.length;++c){const h=this.lossFunctions[c],d=vn(h(a[c],l[c]));c===0?r=d:r=$t(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const h=this.metricsTensors[c][0],d=this.metricsTensors[c][1],p=vn(h(a[d],l[d]));n.push(p)}return n})}async fit(t,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,a,s,o,l,c,h,d,p;try{const g=r.batchSize==null?32:r.batchSize;g$(g);const x=await this.standardizeUserData(t,n,r.sampleWeight,r.classWeight,!1,g);i=x[0],a=x[1],p=x[2];let b=!1,w;if(r.validationData!=null&&r.validationData.length>0){if(b=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new ee("validationData including sample weights is not supported yet."):new Q(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const R=await this.standardizeUserData(l,c,null,null,!0,g);h=R[0],d=R[1],w=h.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){b=!0;const _=Math.floor(i[0].shape[0]*(1-r.validationSplit)),R=i[0].shape[0];h=Dh(i,_,R),s=i,i=Dh(i,0,_),d=Dh(a,_,R),o=a,a=Dh(a,0,_),w=h.concat(d)}else r.validationSteps!=null&&(b=!0);const S=i.concat(a).concat(p);this.checkTrainableWeightsConsistency();const T=this.makeTrainFunction(),$=this.getDedupedMetricsNames();let A,I;b?(this.makeTestFunction(),A=this.testFunction,I=$.slice().concat($.map(_=>"val_"+_))):(A=null,w=[],I=$.slice());const O=Xq(r.callbacks,r.yieldEvery);return await this.fitLoop(T,S,$,g,r.epochs,r.verbose,O,A,w,r.shuffle,I,r.initialEpoch,null,null)}finally{this.isTraining=!1,Xi(i,t),Xi(a,n),Xi(s,t),Xi(o,n),Xi(h,l),Xi(d,c),p!=null&&le(p)}}async fitLoop(t,n,r,i,a,s,o,l,c,h,d,p,g,v){i==null&&(i=32),a==null&&(a=1),h==null&&(h=!0),p==null&&(p=0);let x=!1;if(l!=null&&c!=null&&(x=!0),v!=null&&(x=!0,g==null))throw new Q("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=this.checkNumSamples(n,i,g,"steps_per_epoch");let w;b!=null&&(w=oa(0,b)),s==null&&(s=1);const{callbackList:S,history:T}=Kq(o,s,a,p,b,g,i,x,d);S.setModel(this),this.history=T,await S.onTrainBegin(),this.stopTraining_=!1;for(let $=p;$<a;++$){await S.onEpochBegin($);const A={};if(g!=null)throw new ee("stepsPerEpoch mode is not implemented yet.");{if(h==="batch")throw new ee("batch shuffling is not implemneted yet");h&&Pft(w);const I=Xr(w),O=y$(b,i);for(let N=0;N<O.length;++N){const _={};if(await S.onBatchBegin(N,_),st(()=>{const R=O[N][0],E=O[N][1],F=xl(I,R,E-R);_.batch=N,_.size=E-R;const M=xA(n,F),B=t(M);for(let j=0;j<r.length;++j){const P=r[j],U=B[j];_[P]=U,Ia(U)}if(N===O.length-1&&x){const j=this.testLoop(l,c,i);for(let P=0;P<r.length;++P){const U=r[P],W=j[P];Ia(W),A["val_"+U]=W}}}),await S.onBatchEnd(N,_),Hq(_),this.stopTraining_)break}I.dispose()}if(await S.onEpochEnd($,A),this.stopTraining_)break}return await S.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(t,n){return Gxt(this,t,n)}async trainOnBatch(t,n){const r=await this.standardizeUserData(t,n),i=r[0],a=r[1],o=this.makeTrainFunction()(i.concat(a)),l=[];for(const c of o){const h=await c.data();l.push(h[0])}return le(o),Xi(r[0],t),Xi(r[1],n),Or(l)}getNamedWeights(t){const n=[],r=t!=null&&t.trainableOnly,i=r?this.trainableWeights:this.weights,a=this.getWeights(r);for(let s=0;s<i.length;++s)r&&!i[s].trainable||n.push({name:i[s].originalName,tensor:a[s]});return n}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=pz().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=n-pz().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=as(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(n=>as(n))}else{const n=Object.keys(this.loss);t={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")t[i]=as(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[as(qg(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>as(qg(t)));{const t={};for(const n in this.metrics)t[n]=as(qg(this.metrics[n]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=vA(t.optimizer_config),r=ms(n);let i;if(typeof t.loss=="string")i=ol(t.loss);else if(Array.isArray(t.loss))i=t.loss.map(s=>ol(s));else if(t.loss!=null){i={};for(const s in t.loss)i[s]=ol(t.loss[s])}let a;if(Array.isArray(t.metrics))a=t.metrics.map(s=>ol(s));else if(t.metrics!=null){a={};for(const s in t.metrics)a[s]=ol(t.metrics[s])}this.compile({loss:i,metrics:a,optimizer:r})}async save(t,n){if(typeof t=="string"){const c=Nht(t);if(c.length===0)throw new Q(`Cannot find any save handlers for URL '${t}'`);if(c.length>1)throw new Q(`Found more than one (${c.length}) save handlers for URL '${t}'`);t=c[0]}if(t.save==null)throw new Q("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await gz(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:Jxt,generatedBy:`TensorFlow.js tfjs-layers v${nH}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:h,specs:d}=await gz(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=Oht([r.data,h])}return this.userDefinedMetadata!=null&&(Zz(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,t.save(o)}setUserDefinedMetadata(t){Zz(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}uc.className="Model";St(uc);class oH extends uc{}oH.className="Functional";St(oH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wc extends uc{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:$0("sequential_"),t.layers!=null)for(const n of t.layers)this.add(n)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new Q(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const n=t instanceof Wc||t instanceof uc;let r;if(n){if(r=t,r.outputs.length!==1)throw new Q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Q("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new Q("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=ext({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(t.inboundNodes.length!==1)throw new Q(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new Q("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=Uq(this.outputs[0])}this.inboundNodes=[],new k0({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Pl(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=t.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,n){return this.model==null&&this.build(),this.model.call(t,n)}build(t){if(be(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new uc({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,n,r=console.log){this.built||this.build(),super.summary(t,n,r)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,n,r={}){if(!this.built)throw new _i("The model needs to be compiled before being used.");return this.model.evaluate(t,n,r)}async evaluateDataset(t,n){if(!this.built)throw new _i("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,n)}predict(t,n={}){return this.model==null&&this.build(),this.model.predict(t,n)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,n,r={}){if(!this.built)throw new _i("The model needs to be compiled before being used.");return this.model.fit(t,n,r)}async fitDataset(t,n){if(!this.built)throw new _i("The model needs to be compiled before being used.");return this.model.fitDataset(t,n)}async trainOnBatch(t,n){return this.model.trainOnBatch(t,n)}static fromConfig(t,n,r={},i=!1){let a,s={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new Q("Legacy serialization format not supported yet.");a=n}else V(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=n.layers,delete n.layers,s=n;const o=new t(s);if(!(o instanceof Wc))throw new ee(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of a){const h=ms(l,void 0,i);i&&h.setFastWeightInitDuringBuild(!0),o.add(h)}return o}set stopTraining(t){if(this.model==null)throw new Q("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new Q("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),t.push(r)}return{name:this.name,layers:t}}}Wc.className="Sequential";St(Wc);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t1t(e){return new Wc(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let cr=class extends df{getConfig(){return{}}};class lH extends cr{apply(t,n=1){return B0t(t,n)}}lH.className="elu";St(lH);class uH extends cr{apply(t){return AG(t)}}uH.className="selu";St(uH);class cH extends cr{apply(t){return Hl(t)}}cH.className="relu";St(cH);class fH extends cr{apply(t){return st(()=>Pd(6,Hl(t)))}}fH.className="relu6";St(fH);class hH extends cr{apply(t){return t}}hH.className="linear";St(hH);class dH extends cr{apply(t){return cf(t)}}dH.className="sigmoid";St(dH);class pH extends cr{apply(t){return j0t(t)}}pH.className="hardSigmoid";St(pH);class mH extends cr{apply(t){return Yp(t)}}mH.className="softplus";St(mH);class gH extends cr{apply(t){return z0t(t)}}gH.className="softsign";St(gH);class yH extends cr{apply(t){return m0(t)}}yH.className="tanh";St(yH);let VE=class extends cr{apply(t,n=-1){return qI(t,n)}};VE.className="softmax";St(VE);class vH extends cr{apply(t,n=-1){return vG(t,n)}}vH.className="logSoftmax";St(vH);class bH extends cr{apply(t){return st(()=>st(()=>{const n=Math.sqrt(2),r=tt(.5,$t(1,dG(Ut(t,n))));return tt(t,r)}))}}bH.className="gelu";St(bH);class xH extends cr{apply(t){return st(()=>tt(.5,tt(t,$t(1,m0(tt(lr(Ut(2,Math.PI)),$t(t,tt(.044715,Rl(t,3)))))))))}}xH.className="gelu_new";St(xH);class wH extends cr{apply(t){return st(()=>tt(t,m0(Yp(t))))}}wH.className="mish";St(wH);class SH extends cr{apply(t,n=1){return st(()=>tt(cf(tt(t,n)),t))}}SH.className="swish";St(SH);function go(e){return e.getClassName()}function v$(e,t={}){return rm(e,Oi.getMap().classNameMap,t,"activation")}function yo(e){if(e==null){const t={};return t.className="linear",t.config={},v$(t)}if(typeof e=="string"){const t={};return t.className=e,t.config={},v$(t)}else return e instanceof cr?e:v$(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function e1t(e){if(e!=null&&typeof e!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}class CH extends df{}class TH extends CH{constructor(t){super(),e1t(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return st(()=>{let n=Fn([1]);return this.hasL1&&(n=$t(n,jt(tt(this.l1,vr(t))))),this.hasL2&&(n=$t(n,jt(tt(this.l2,am(t))))),nt(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,n){return new t({l1:n.l1,l2:n.l2})}}TH.className="L1L2";St(TH);const r4={l1l2:"L1L2"};function Fe(e){return EE(e)}function i4(e,t={}){return rm(e,Oi.getMap().classNameMap,t,"regularizer")}function Ze(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in r4?r4[e]:e,config:{}};return i4(n)}else return e instanceof CH?e:i4(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $H extends se{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,n){t=Yt(t);let r=Hl(t);return this.maxValue!=null&&(r=di(r,0,this.maxValue)),r}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},n=super.getConfig();return Object.assign(t,n),t}}$H.className="ReLU";St($H);class AH extends se{constructor(t){super(t??{}),this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const r=Yt(t);return PI(r,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}AH.className="LeakyReLU";St(AH);class kH extends se{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=Ye(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Ze(t.alphaRegularizer),this.alphaConstraint=In(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new Q(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=be(t);const n=t.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<t.length;++i)r[i]=t[i];this.inputSpec=[new $n({ndim:t.length,axes:r})],this.built=!0}call(t,n){return t=Yt(t),UI(t,this.alpha.read())}getConfig(){const t={alphaInitializer:tn(this.alphaInitializer),alphaRegularizer:Fe(this.alphaRegularizer),alphaConstraint:kn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(t,n),t}}kH.className="PReLU";St(kH);let IH=class extends se{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new ee(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const r=Yt(t);return v0(r)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}};IH.className="ELU";St(IH);class EH extends se{constructor(t){super(t??{}),this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,n){const r=Yt(t);return tt(r,Rt(pi(r,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},n=super.getConfig();return Object.assign(t,n),t}}EH.className="ThresholdedReLU";St(EH);class OH extends se{constructor(t){super(t??{}),this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new VE().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,n){return st(()=>{let r=Yt(t);const i=n.mask;if(i!=null){const a=tt(qt(_o(r.shape),Rt(i,r.dtype)),Se(-1e9));r=$t(r,a)}return this.axis instanceof Array?this.axis.length>1?Ma(qt(r,bG(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}OH.className="Softmax";St(OH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cc(e,t,n){if(typeof e=="number")return Pl(e,t);if(e.length!==t)throw new Q(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){const i=e[r];if(!M0t(i))throw new Q(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${i}`)}return e}function sa(e,t,n,r,i=1){if(e==null)return e;const a=t+(t-1)*(i-1);let s;return n==="same"?s=e:s=e-a+1,Math.floor((s+r-1)/r)}function wa(e,t,n,r){if(e==null)return null;if(r==="valid")e=e*t+mo([n-t,0]);else if(r==="same")e=e*t;else throw new Q(`Unsupport padding mode: ${r}.`);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WE(e,t){return st(()=>(dn(t),t==="channelsFirst"?pe(e,[0,2,3,1]):e))}function NH(e,t){return st(()=>(dn(t),t==="channelsFirst"?pe(e,[0,2,3,4,1]):e))}function n1t(e,t,n,r=1,i="valid",a,s=1){return st(()=>{if(a==null&&(a=la()),dn(a),e.shape.length!==3)throw new Q(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(t.shape.length!==3)throw new Q(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Q(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(a==="channelsFirst"&&(e=pe(e,[0,2,1])),i==="causal")throw new ee("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=lG(e,t,r,i==="same"?"same":"valid","NWC",s);return n!=null&&(o=fa(o,n)),o})}function a4(e,t,n,r=[1,1],i="valid",a,s,o=null){return st(()=>{if(a==null&&(a=la()),dn(a),e.rank!==3&&e.rank!==4)throw new Q(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(t.rank!==3&&t.rank!==4)throw new Q(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=WE(e,a);if(i==="causal")throw new ee("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=cyt({x:l,filter:t,strides:r,pad:i==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:o}),a==="channelsFirst"&&(l=pe(l,[0,3,1,2])),l})}function r1t(e,t,n,r=[1,1,1],i="valid",a,s){return st(()=>{if(a==null&&(a=la()),dn(a),e.rank!==4&&e.rank!==5)throw new Q(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(t.rank!==4&&t.rank!==5)throw new Q(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let o=NH(e,a);if(i==="causal")throw new ee("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=opt(o,t,r,i==="same"?"same":"valid","NDHWC",s),n!=null&&(o=fa(o,n)),a==="channelsFirst"&&(o=pe(o,[0,4,1,2,3])),o})}class O0 extends se{constructor(t,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",O0.verifyArgs(n),this.rank=t,Bn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new ee(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=cc(n.kernelSize,t,"kernelSize"),this.strides=cc(n.strides==null?1:n.strides,t,"strides"),this.padding=n.padding==null?"valid":n.padding,mi(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,dn(this.dataFormat),this.activation=yo(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Ye(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=In(n.biasConstraint),this.biasRegularizer=Ze(n.biasRegularizer),this.activityRegularizer=Ze(n.activityRegularizer),this.dilationRate=cc(n.dilationRate==null?1:n.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Q(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Q(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Q(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(xa("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!OE(t.kernelSize,"number",1,3))throw new Q(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:go(this.activation),useBias:this.useBias,biasInitializer:tn(this.biasInitializer),biasRegularizer:Fe(this.biasRegularizer),activityRegularizer:Fe(this.activityRegularizer),biasConstraint:kn(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}class pf extends O0{constructor(t,n){super(t,n),this.kernel=null,pf.verifyArgs(n),this.filters=n.filters,Bn(this.filters,"filters"),this.kernelInitializer=Ye(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=In(n.kernelConstraint),this.kernelRegularizer=Ze(n.kernelRegularizer)}build(t){t=be(t);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new Q(`The channel dimension of the input should be defined. Found ${t[n]}`);const r=t[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(t,n){return st(()=>{t=Yt(t);let r;const i=this.bias==null?null:this.bias.read(),a=kq(this.activation.getClassName());if(a!=null&&this.rank===2)r=a4(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)r=n1t(t,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=a4(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=r1t(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new ee("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(t){t=be(t);const n=[],r=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let a=0;a<r.length;++a){const s=sa(r[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);n.push(s)}let i=[t[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const t={filters:this.filters,kernelInitializer:tn(this.kernelInitializer),kernelRegularizer:Fe(this.kernelRegularizer),kernelConstraint:kn(this.kernelConstraint)},n=super.getConfig();return Object.assign(t,n),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new Q(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class um extends pf{constructor(t){super(2,t),um.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!OE(t.kernelSize,"number",1,2))throw new Q(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}um.className="Conv2D";St(um);class cm extends pf{constructor(t){super(3,t),cm.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new Q(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}cm.className="Conv3D";St(cm);class _H extends um{constructor(t){if(super(t),this.inputSpec=[new $n({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Q(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=be(t),t.length!==4)throw new Q("Input should have rank 4; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new Q("The channel dimension of the inputs should be defined. Found `None`.");const r=t[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new $n({ndim:4,axes:{[n]:r}})],this.built=!0}call(t,n){return st(()=>{let r=Yt(t);if(r.shape.length!==4)throw new Q(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,a=i[0];let s,o;this.dataFormat==="channelsFirst"?(s=2,o=3):(s=1,o=2);const l=i[s],c=i[o],h=this.kernelSize[0],d=this.kernelSize[1],p=this.strides[0],g=this.strides[1],v=wa(l,p,h,this.padding),x=wa(c,g,d,this.padding),b=[a,v,x,this.filters];this.dataFormat!=="channelsLast"&&(r=pe(r,[0,2,3,1]));let w=uG(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=pe(w,[0,3,1,2])),this.bias!=null&&(w=fa(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(t){t=be(t);const n=t.slice();let r,i,a;this.dataFormat==="channelsFirst"?(r=1,i=2,a=3):(r=3,i=1,a=2);const s=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[i]=wa(n[i],l,s,this.padding),n[a]=wa(n[a],c,o,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}_H.className="Conv2DTranspose";St(_H);class RH extends cm{constructor(t){if(super(t),this.inputSpec=[new $n({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Q(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=be(t),t.length!==5)throw new Q("Input should have rank 5; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new Q("The channel dimension of the inputs should be defined. Found `None`.");const r=t[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new $n({ndim:5,axes:{[n]:r}})],this.built=!0}call(t,n){return st(()=>{let r=Yt(t);if(r.shape.length!==5)throw new Q(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,a=i[0];let s,o,l;this.dataFormat==="channelsFirst"?(l=2,s=3,o=4):(l=1,s=2,o=3);const c=i[l],h=i[s],d=i[o],p=this.kernelSize[0],g=this.kernelSize[1],v=this.kernelSize[2],x=this.strides[0],b=this.strides[1],w=this.strides[2],S=wa(c,x,p,this.padding),T=wa(h,b,g,this.padding),$=wa(d,w,v,this.padding),A=[a,S,T,$,this.filters];this.dataFormat!=="channelsLast"&&(r=pe(r,[0,2,3,4,1]));let I=cpt(r,this.kernel.read(),A,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(I=pe(I,[0,4,1,2,3])),this.bias!==null&&(I=fa(I,this.bias.read(),this.dataFormat)),this.activation!==null&&(I=this.activation.apply(I)),I})}computeOutputShape(t){t=be(t);const n=t.slice();let r,i,a,s;this.dataFormat==="channelsFirst"?(r=1,i=2,a=3,s=4):(r=4,i=1,a=2,s=3);const o=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],h=this.strides[0],d=this.strides[1],p=this.strides[2];return n[r]=this.filters,n[i]=wa(n[i],h,o,this.padding),n[a]=wa(n[a],d,l,this.padding),n[s]=wa(n[s],p,c,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}RH.className="Conv3DTranspose";St(RH);class DH extends pf{constructor(t,n){if(super(t,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new Q("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new Q("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new Q(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Ye(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Ze(n.depthwiseRegularizer),this.depthwiseConstraint=In(n.depthwiseConstraint),this.pointwiseInitializer=Ye(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Ze(n.pointwiseRegularizer),this.pointwiseConstraint=In(n.pointwiseConstraint)}build(t){if(t=be(t),t.length<this.rank+2)throw new Q(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null||t[n]<0)throw new Q(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[n])}`);const r=t[n],i=this.kernelSize.concat([r,this.depthMultiplier]),a=[];for(let o=0;o<this.rank;++o)a.push(1);a.push(r*this.depthMultiplier,this.filters);const s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new $n({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(t,n){return st(()=>{t=Yt(t);let r;if(this.rank===1)throw new ee("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=pe(t,[0,2,3,1])),r=kG(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=fa(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=pe(r,[0,3,1,2])),r})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=tn(this.depthwiseInitializer),t.pointwiseInitializer=tn(this.pointwiseInitializer),t.depthwiseRegularizer=Fe(this.depthwiseRegularizer),t.pointwiseRegularizer=Fe(this.pointwiseRegularizer),t.depthwiseConstraint=kn(this.depthwiseConstraint),t.pointwiseConstraint=kn(this.pointwiseConstraint),t}}DH.className="SeparableConv";class MH extends DH{constructor(t){super(2,t)}}MH.className="SeparableConv2D";St(MH);class N0 extends pf{constructor(t){super(1,t),N0.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!OE(t.kernelSize,"number",1,1))throw new Q(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}N0.className="Conv1D";St(N0);class PH extends se{constructor(t){super(t),typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,n){return st(()=>{if(t=Yt(t),this.dataFormat==="channelsLast"){const r=Gg(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Gg(r,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Gg(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Gg(r,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}PH.className="Cropping2D";St(PH);class FH extends se{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,dn(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,_0t(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const n=t[2]==null?null:this.size[0]*t[2],r=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],n,r]}else{const n=t[1]==null?null:this.size[0]*t[1],r=t[2]==null?null:this.size[1]*t[2];return[t[0],n,r,t[3]]}}call(t,n){return st(()=>{let r=Yt(t);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=pe(r,[0,2,3,1]);const a=this.size[0]*i[2],s=this.size[1]*i[3],o=this.interpolation==="nearest"?cs.resizeNearestNeighbor(r,[a,s]):cs.resizeBilinear(r,[a,s]);return pe(o,[0,3,1,2])}else{const a=this.size[0]*i[1],s=this.size[1]*i[2];return this.interpolation==="nearest"?cs.resizeNearestNeighbor(r,[a,s]):cs.resizeBilinear(r,[a,s])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(t,n),t}}FH.className="UpSampling2D";St(FH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i1t(e,t,n=[1,1],r="valid",i,a){return st(()=>{i==null&&(i=la()),dn(i);let s=WE(e,i);if(e.rank!==4)throw new Q(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(t.rank!==4)throw new Q(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return s=_I(s,t,n,r==="same"?"same":"valid","NHWC",a),i==="channelsFirst"&&(s=pe(s,[0,3,1,2])),s})}class LH extends O0{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=Ye(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=In(t.depthwiseConstraint),this.depthwiseRegularizer=Ze(t.depthwiseRegularizer)}build(t){if(t=be(t),t.length<4)throw new Q(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(t[n]==null||t[n]<0)throw new Q(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[n]}).`);const r=t[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return st(()=>{t=Yt(t);let r=i1t(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=fa(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(t){t=be(t);const n=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2],i=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,a=sa(n,this.kernelSize[0],this.padding,this.strides[0]),s=sa(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],i,a,s]:[t[0],a,s,i]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=tn(this.depthwiseInitializer),t.depthwiseRegularizer=Fe(this.depthwiseRegularizer),t.depthwiseConstraint=kn(this.depthwiseRegularizer),t}}LH.className="DepthwiseConv2D";St(LH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BH(e,t,n,r){if(Array.isArray(e)){if(t!=null||n!=null)throw new Q("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(a){return a==null||Array.isArray(a)?a:[a]}return t=i(t),n=i(n),{inputs:e,initialState:t,constants:n}}function zH(e,t,n,r=!1,i,a,s=!1,o=!1){return st(()=>{const l=t.shape.length;if(l<3)throw new Q(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(oa(2,l));t=pe(t,c),s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Rt(Rt(i,"bool"),"float32"),i.rank===l-1&&(i=Er(i,-1)),i=pe(i,c)),r&&(t=Dl(t,0),i!=null&&(i=Dl(i,0)));const h=[];let d,p=n;const g=t.shape[0],v=Ml(t);let x;i!=null&&(x=Ml(i));for(let w=0;w<g;++w){const S=v[w],T=st(()=>e(S,p));if(i==null)d=T[0],p=T[1];else{const $=st(()=>{const A=x[w],I=qt(Li(A),A),O=$t(tt(T[0],A),tt(p[0],I)),N=p.map((_,R)=>$t(tt(T[1][R],A),tt(_,I)));return{output:O,newStates:N}});d=$.output,p=$.newStates}o&&h.push(d)}let b;return o&&(b=xs(h,1)),[d,b,p]})}class Do extends se{constructor(t){super(t);let n;if(t.cell==null)throw new Q("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?n=new HE({cells:t.cell}):n=t.cell,n.stateSize==null)throw new Q("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new $n({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return oa(0,t).map(n=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){mA(t)&&(t=t[0]),t=t;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[t[0],t[1],r]:i=[t[0],r],this.returnState){const a=[];for(const s of n)a.push([t[0],s]);return[i].concat(a)}else return i}computeMask(t,n){return st(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(a=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<t;++r)n.push(null);return n}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new ee("Constants support is not implemented in RNN yet.");mA(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,r=t.slice(2);this.inputSpec[0]=new $n({shape:[n,null,...r]});const i=[t[0]].concat(t.slice(2));this.cell.build(i);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!Te(this.stateSpec.map(s=>s.shape[s.shape.length-1]),a))throw new Q(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(s=>new $n({shape:[null,s]}));this.stateful&&this.resetStates()}resetStates(t,n=!1){st(()=>{if(!this.stateful)throw new ba("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new Q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Fn([r,i])):this.states_=[Fn([r,this.cell.stateSize])];else if(t==null)le(this.states_),this.keptStates!=null&&(le(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Fn([r,i])):this.states_[0]=Fn([r,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new Q(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n===!0?this.keptStates.push(this.states_.slice()):le(this.states_);for(let i=0;i<this.states_.length;++i){const a=t[i],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,o=[r,s];if(!Te(a.shape,o))throw new Q(`State ${i} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${a.shape}`);this.states_[i]=a}}this.states_=this.states_.map(i=>Ia(i.clone()))})}apply(t,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const a=BH(t,r,i,this.numConstants);t=a.inputs,r=a.initialState,i=a.constants;let s=[],o=[];if(r!=null){n.initialState=r,s=s.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new $n({shape:c.shape}));o=o.concat(this.stateSpec)}if(i!=null&&(n.constants=i,s=s.concat(i),this.numConstants=i.length),s[0]instanceof Fa){const c=[t].concat(s),h=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=h;const p=super.apply(c,n);return this.inputSpec=d,p}else return super.apply(t,n)}call(t,n){return st(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let a=n==null?null:n.initialState;t=Yt(t),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(t));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==s)throw new Q(`RNN Layer has ${s} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:i},c=zH((v,x)=>{const b=this.cell.call([v].concat(x),o);return[b[0],b.slice(1)]},t,a,this.goBackwards,r,null,this.unroll,this.returnSequences),h=c[0],d=c[1],p=c[2];this.stateful&&this.resetStates(p,i);const g=this.returnSequences?d:h;return this.returnState?[g].concat(p):g})}getInitialState(t){return st(()=>{let n=Fn(t.shape);return n=jt(n,[1,2]),n=im(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?dA(n,[1,r]):n):this.cell.stateSize>1?[dA(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Do.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),t),n)}static fromConfig(t,n,r={}){const i=n.cell,a=ms(i,r);return new t(Object.assign(n,{cell:a}))}}Do.className="RNN";St(Do);class _0 extends se{}class GE extends _0{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Bn(this.units,"units"),this.activation=yo(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Ye(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ye(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ye(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Ze(t.kernelRegularizer),this.recurrentRegularizer=Ze(t.recurrentRegularizer),this.biasRegularizer=Ze(t.biasRegularizer),this.kernelConstraint=In(t.kernelConstraint),this.recurrentConstraint=In(t.recurrentConstraint),this.biasConstraint=In(t.biasConstraint),this.dropout=Vc([1,mo([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Vc([1,mo([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=be(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return st(()=>{if(t=t,t.length!==2)throw new Q(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let r=t[1];t=t[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=vo({ones:()=>Li(t),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=vo({ones:()=>Li(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let a;const s=this.dropoutMask,o=this.recurrentDropoutMask;s!=null?a=Na(tt(t,s),this.kernel.read()):a=Na(t,this.kernel.read()),this.bias!=null&&(a=fa(a,this.bias.read())),o!=null&&(r=tt(r,o));let l=$t(a,Na(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:go(this.activation),useBias:this.useBias,kernelInitializer:tn(this.kernelInitializer),recurrentInitializer:tn(this.recurrentInitializer),biasInitializer:tn(this.biasInitializer),kernelRegularizer:Fe(this.kernelRegularizer),recurrentRegularizer:Fe(this.recurrentRegularizer),biasRegularizer:Fe(this.biasRegularizer),activityRegularizer:Fe(this.activityRegularizer),kernelConstraint:kn(this.kernelConstraint),recurrentConstraint:kn(this.recurrentConstraint),biasConstraint:kn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},t),n)}}GE.className="SimpleRNNCell";St(GE);class jH extends Do{constructor(t){t.cell=new GE(t),super(t)}call(t,n){return st(()=>{this.cell.dropoutMask!=null&&(le(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(le(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:a})})}static fromConfig(t,n){return new t(n)}}jH.className="SimpleRNN";St(jH);class qE extends _0{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new Q("GRUCell does not support reset_after parameter set to true.");this.units=t.units,Bn(this.units,"units"),this.activation=yo(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=yo(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Ye(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ye(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ye(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Ze(t.kernelRegularizer),this.recurrentRegularizer=Ze(t.recurrentRegularizer),this.biasRegularizer=Ze(t.biasRegularizer),this.kernelConstraint=In(t.kernelConstraint),this.recurrentConstraint=In(t.recurrentConstraint),this.biasConstraint=In(t.biasConstraint),this.dropout=Vc([1,mo([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Vc([1,mo([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=be(t);const n=t[t.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return st(()=>{if(t=t,t.length!==2)throw new Q(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const r=n.training==null?!1:n.training;let i=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=vo({ones:()=>Li(t),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=vo({ones:()=>Li(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,s=this.recurrentDropoutMask;let o,l,c;0<this.dropout&&this.dropout<1&&(t=tt(t,a[0]));let h=Na(t,this.kernel.read());this.useBias&&(h=fa(h,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=tt(i,s[0]));const d=this.recurrentKernel.read(),[p,g]=hi(d,[2*this.units,this.units],d.rank-1),v=Na(i,p),[x,b,w]=hi(h,3,h.rank-1),[S,T]=hi(v,2,v.rank-1);o=this.recurrentActivation.apply($t(x,S)),l=this.recurrentActivation.apply($t(b,T));const $=Na(tt(l,i),g);c=this.activation.apply($t(w,$));const A=$t(tt(o,i),tt($t(1,cn(o)),c));return[A,A]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:go(this.activation),recurrentActivation:go(this.recurrentActivation),useBias:this.useBias,kernelInitializer:tn(this.kernelInitializer),recurrentInitializer:tn(this.recurrentInitializer),biasInitializer:tn(this.biasInitializer),kernelRegularizer:Fe(this.kernelRegularizer),recurrentRegularizer:Fe(this.recurrentRegularizer),biasRegularizer:Fe(this.biasRegularizer),activityRegularizer:Fe(this.activityRegularizer),kernelConstraint:kn(this.kernelConstraint),recurrentConstraint:kn(this.recurrentConstraint),biasConstraint:kn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},t),n)}}qE.className="GRUCell";St(qE);class UH extends Do{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new qE(t),super(t)}call(t,n){return st(()=>{this.cell.dropoutMask!=null&&(le(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(le(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:a})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}UH.className="GRU";St(UH);class R0 extends _0{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Bn(this.units,"units"),this.activation=yo(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=yo(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Ye(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ye(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ye(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=Ze(t.kernelRegularizer),this.recurrentRegularizer=Ze(t.recurrentRegularizer),this.biasRegularizer=Ze(t.biasRegularizer),this.kernelConstraint=In(t.kernelConstraint),this.recurrentConstraint=In(t.recurrentConstraint),this.biasConstraint=In(t.biasConstraint),this.dropout=Vc([1,mo([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Vc([1,mo([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var n;t=be(t);const r=t[t.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const a=this.biasInitializer,s=this.units;i=new(n=class extends ji{apply(l,c){const h=a.apply([s]),d=new _E().apply([s]),p=a.apply([s*2]);return Uz(Uz(h,d),p)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,n){return st(()=>{const r=n.training==null?!1:n.training;if(t=t,t.length!==3)throw new Q(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let i=t[1];const a=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=vo({ones:()=>Li(t),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=vo({ones:()=>Li(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let l,c,h,d;0<this.dropout&&this.dropout<1&&(t=tt(t,s[0]));let p=Na(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=tt(i,o[0])),p=$t(p,Na(i,this.recurrentKernel.read())),this.useBias&&(p=fa(p,this.bias.read()));const[g,v,x,b]=hi(p,4,p.rank-1);l=this.recurrentActivation.apply(g),c=this.recurrentActivation.apply(v),h=$t(tt(c,a),tt(l,this.activation.apply(x))),d=this.recurrentActivation.apply(b);const w=tt(d,this.activation.apply(h));return[w,w,h]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:go(this.activation),recurrentActivation:go(this.recurrentActivation),useBias:this.useBias,kernelInitializer:tn(this.kernelInitializer),recurrentInitializer:tn(this.recurrentInitializer),biasInitializer:tn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Fe(this.kernelRegularizer),recurrentRegularizer:Fe(this.recurrentRegularizer),biasRegularizer:Fe(this.biasRegularizer),activityRegularizer:Fe(this.activityRegularizer),kernelConstraint:kn(this.kernelConstraint),recurrentConstraint:kn(this.recurrentConstraint),biasConstraint:kn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},t),n)}}R0.className="LSTMCell";St(R0);class VH extends Do{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new R0(t),super(t)}call(t,n){return st(()=>{this.cell.dropoutMask!=null&&(le(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(le(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:a})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}VH.className="LSTM";St(VH);class HE extends _0{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?t.push(...n.stateSize):t.push(n.stateSize);return t}call(t,n){return st(()=>{t=t;let r=t.slice(1);const i=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?i.push(r.splice(0,o.stateSize.length)):i.push(r.splice(0,1));i.reverse();const a=[];let s;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=i[o],o===0?s=[t[0]].concat(r):s=[s[0]].concat(r),s=l.call(s,n),a.push(s.slice(1))}r=[];for(const o of a.slice().reverse())r.push(...o);return[s[0]].concat(r)})}build(t){mA(t)&&(t=t[0]),t=t;let n;this.cells.forEach((r,i)=>{bl(`RNNCell_${i}`,()=>{r.build(t),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,t=[t[0],n]})}),this.built=!0}getConfig(){const t=super.getConfig(),n=a=>({className:a.getClassName(),config:a.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},t),i)}static fromConfig(t,n,r={}){const i=[];for(const a of n.cells)i.push(ms(a,r));return new t({cells:i})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const n of this.cells)t.push(...n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.cells)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(t)}return t}getWeights(){const t=[];for(const n of this.cells)t.push(...n.weights);return gA(t)}setWeights(t){const n=[];for(const r of this.cells){const i=r.weights.length,a=t.splice(i);for(let s=0;s<r.weights.length;++s)n.push([r.weights[s],a[s]])}BE(n)}}HE.className="StackedRNNCells";St(HE);function vo(e){const{ones:t,rate:n,training:r=!1,count:i=1,dropoutFunc:a}=e,s=()=>a!=null?a(t(),n):Dq(t(),n),o=()=>sm(s,t,r);return!i||i<=1?Ia(o().clone()):Array(i).fill(void 0).map(o).map(c=>Ia(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var a1t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class WH extends Do{constructor(t){if(t.unroll)throw new ee("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new ee("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new $n({ndim:5})]}call(t,n){return st(()=>{if(this.cell.dropoutMask!=null&&(le(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(le(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new Q("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(t,{mask:r,training:i,initialState:a})})}computeOutputShape(t){let n=this.computeSingleOutputShape(t);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([t[0],...n.slice(-3)])]),n}getInitialState(t){return st(()=>{const{stateSize:n}=this.cell,r=t.shape,i=this.computeSingleOutputShape(r),a=[i[0],...i.slice(2)],s=Fn(a);return Array.isArray(n)?Array(n.length).fill(s):[s]})}resetStates(t,n=!1){st(()=>{if(!this.stateful)throw new ba("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),a=[i[0],...i.slice(2)];if(r[0]==null)throw new Q("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Fn(a)):this.states_=[Fn(a)];else if(t==null)le(this.states_),this.keptStates!=null&&(le(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Fn(a)):this.states_[0]=Fn(a);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new Q(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n?this.keptStates.push(this.states_.slice()):le(this.states_);for(let o=0;o<this.states_.length;++o){const l=t[o],c=a;if(!Te(l.shape,c))throw new Q(`State ${o} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>Ia(o.clone()))})}computeSingleOutputShape(t){const{dataFormat:n,filters:r,kernelSize:i,padding:a,strides:s,dilationRate:o}=this.cell,l=n==="channelsFirst",c=t[l?3:2],h=t[l?4:3],d=sa(c,i[0],a,s[0],o[0]),p=sa(h,i[1],a,s[1],o[1]);return[...t.slice(0,2),...l?[r,d,p]:[d,p,r]]}}WH.className="ConvRNN2D";class XE extends R0{constructor(t){const{filters:n,kernelSize:r,strides:i,padding:a,dataFormat:s,dilationRate:o}=t;super(Object.assign(Object.assign({},t),{units:n})),this.filters=n,Bn(this.filters,"filters"),this.kernelSize=cc(r,2,"kernelSize"),this.kernelSize.forEach(l=>Bn(l,"kernelSize")),this.strides=cc(i||1,2,"strides"),this.strides.forEach(l=>Bn(l,"strides")),this.padding=a||"valid",mi(this.padding),this.dataFormat=s||"channelsLast",dn(this.dataFormat),this.dilationRate=cc(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>Bn(l,"dilationRate"))}build(t){var n;t=be(t);const r=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[r]==null)throw new Q(`The channel dimension of the input should be defined. Found ${t[r]}`);const i=t[r],a=4,s=this.kernelSize.concat([i,this.filters*a]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,h=this.filters;l=new(n=class extends ji{apply(p,g){const v=c.apply([h]),x=_o([h]),b=c.apply([h*2]);return NE([v,x,b])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,n){return st(()=>{if(t.length!==3)throw new Q(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const r=n.training||!1,i=t[0],a=t[1],s=t[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=vo({ones:()=>Li(i),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(L,G,H)=>!G||!G[H]?L:tt(G[H],L);let h=c(i,l,0),d=c(i,l,1),p=c(i,l,2),g=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=vo({ones:()=>Li(a),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const v=this.recurrentDropoutMask;let x=c(a,v,0),b=c(a,v,1),w=c(a,v,2),S=c(a,v,3);const T=3,[$,A,I,O]=hi(this.kernel.read(),o,T),[N,_,R,E]=this.useBias?hi(this.bias.read(),o):[null,null,null,null];h=this.inputConv(h,$,N,this.padding),d=this.inputConv(d,A,_,this.padding),p=this.inputConv(p,I,R,this.padding),g=this.inputConv(g,O,E,this.padding);const[F,M,B,j]=hi(this.recurrentKernel.read(),o,T);x=this.recurrentConv(x,F),b=this.recurrentConv(b,M),w=this.recurrentConv(w,B),S=this.recurrentConv(S,j);const P=this.recurrentActivation.apply($t(h,x)),U=this.recurrentActivation.apply($t(d,b)),W=$t(tt(U,s),tt(P,this.activation.apply($t(p,w)))),q=tt(this.recurrentActivation.apply($t(g,S)),this.activation.apply(W));return[q,q,W]})}getConfig(){const t=super.getConfig(),{units:n}=t,r=a1t(t,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),i)}inputConv(t,n,r,i){const a=_l(t,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?fa(a,r,this.dataFormat):a}recurrentConv(t,n){return _l(t,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}XE.className="ConvLSTM2DCell";St(XE);class GH extends WH{constructor(t){const n=new XE(t);super(Object.assign(Object.assign({},t),{cell:n}))}static fromConfig(t,n){return new t(n)}}GH.className="ConvLSTM2D";St(GH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class D0 extends se{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const n=t.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(t,n){return st(()=>{this.invokeCallHook(t,n);const r=Yt(t);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,a=this.getNoiseShape(r);return sm(()=>Dq(r,this.rate,a,this.seed),()=>r,i)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(t,n),t}dispose(){return super.dispose()}}D0.className="Dropout";St(D0);class qH extends D0{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const n=t.shape;return[n[0],1,n[2]]}}qH.className="SpatialDropout1D";St(qH);class KE extends se{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let n=null;t.batchSize!=null&&(n=t.batchSize),this.batchInputShape=[n,t.inputDim]}this.units=t.units,Bn(this.units,"units"),this.activation=yo(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=Ye(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Ye(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=In(t.kernelConstraint),this.biasConstraint=In(t.biasConstraint),this.kernelRegularizer=Ze(t.kernelRegularizer),this.biasRegularizer=Ze(t.biasRegularizer),this.activityRegularizer=Ze(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=be(t);const n=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(t){t=be(t);const n=t.slice();return n[n.length-1]=this.units,n}call(t,n){return st(()=>{this.invokeCallHook(t,n);const r=Yt(t),i=kq(this.activation.getClassName());let a;return i!=null?a=Na(r,this.kernel.read(),i,this.bias?this.bias.read():null):(a=Na(r,this.kernel.read()),this.bias!=null&&(a=fa(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){const t={units:this.units,activation:go(this.activation),useBias:this.useBias,kernelInitializer:tn(this.kernelInitializer),biasInitializer:tn(this.biasInitializer),kernelRegularizer:Fe(this.kernelRegularizer),biasRegularizer:Fe(this.biasRegularizer),activityRegularizer:Fe(this.activityRegularizer),kernelConstraint:kn(this.kernelConstraint),biasConstraint:kn(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}KE.className="Dense";St(KE);class HH extends se{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=be(t);for(const n of t.slice(1))if(n==null)throw new Q(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],ho(t,1)]}call(t,n){return st(()=>{this.invokeCallHook(t,n);let r=Yt(t);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let a=2;a<r.rank;++a)i.push(a);i.push(1),r=pe(r,i)}return L0t(r)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(t,n),t}}HH.className="Flatten";St(HH);class XH extends se{constructor(t){super(t),this.supportsMasking=!0,this.activation=yo(t.activation)}call(t,n){return st(()=>{this.invokeCallHook(t,n);const r=Yt(t);return this.activation.apply(r)})}getConfig(){const t={activation:go(this.activation)},n=super.getConfig();return Object.assign(t,n),t}}XH.className="Activation";St(XH);class KH extends se{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,n){return st(()=>(t=Yt(t),P0t(t,this.n)))}getConfig(){const t={n:this.n},n=super.getConfig();return Object.assign(t,n),t}}KH.className="RepeatVector";St(KH);class YH extends se{constructor(t){super(t),this.targetShape=t.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,n){const r="Total size of new array must be unchanged.",i=n.slice();let a=1,s=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(s===null)s=l;else throw new Q("Can only specifiy one unknown dimension.");else a*=c}const o=ho(t);if(s!==null){if(a===0||o%a!==0)throw new Q(r);i[s]=o/a}else if(o!==a)throw new Q(r);return i}computeOutputShape(t){let n=!1;for(let r=0;r<t.length;++r)if(this.isUnknown(t[r])){n=!0;break}return n?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,n){return st(()=>{this.invokeCallHook(t,n);const r=Yt(t),i=r.shape,a=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return nt(r,a)})}getConfig(){const t={targetShape:this.targetShape},n=super.getConfig();return Object.assign(t,n),t}}YH.className="Reshape";St(YH);class ZH extends se{constructor(t){if(super(t),t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const n=oa(1,t.dims.length+1);if(!Te(t.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new $n({ndim:this.dims.length+1})]}computeOutputShape(t){t=be(t);const n=t.slice();return this.dims.forEach((r,i)=>{n[i+1]=t[r]}),n}call(t,n){return pe(Yt(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},n=super.getConfig();return Object.assign(t,n),t}}ZH.className="Permute";St(ZH);class QH extends se{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,t),n}computeMask(t,n){const r=Yt(t);return sA(mv(r,this.maskValue),-1)}call(t,n){return st(()=>{this.invokeCallHook(t,n);const r=Yt(t),s=sA(mv(r,this.maskValue),-1,!0);return tt(r,Rt(s,r.dtype))})}}QH.className="Masking";St(QH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class JH extends se{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let n=null;t.batchSize!=null&&(n=t.batchSize),t.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Ie(t.inputLength))}this.inputDim=t.inputDim,Bn(this.inputDim,"inputDim"),this.outputDim=t.outputDim,Bn(this.outputDim,"outputDim"),this.embeddingsInitializer=Ye(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Ze(t.embeddingsRegularizer),this.activityRegularizer=Ze(t.activityRegularizer),this.embeddingsConstraint=In(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,n){return st(()=>this.maskZero?(t=Yt(t),mv(t,me(t))):null)}computeOutputShape(t){if(t=be(t),this.inputLength==null)return[...t,this.outputDim];const n=Ie(this.inputLength);if(n.length!==t.length-1)throw new Q(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let r=0;for(let i=0;i<n.length;++i){const a=n[i],s=t[i+1];if(a!=null&&s!=null&&a!==s)throw new Q(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);a==null&&(n[r]=s),r++}}return[t[0],...n,this.outputDim]}call(t,n){return st(()=>{this.invokeCallHook(t,n);let r=Yt(t);r.dtype!=="int32"&&(r=Oa(r,"int32"));const i=Rq(this.embeddings.read(),nt(r,[r.size]));return nt(i,be(this.computeOutputShape(r.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:tn(this.embeddingsInitializer),embeddingsRegularizer:Fe(this.embeddingsRegularizer),activityRegularizer:Fe(this.activityRegularizer),embeddingsConstraint:kn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(t,n),t}}JH.className="Embedding";St(JH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Yl extends se{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new ee}computeElementwiseOpOutputShape(t,n){if(t==null||n==null)return null;if(t.length<n.length)return this.computeElementwiseOpOutputShape(n,t);if(n.length===0)return t;const r=t.slice(0,t.length-n.length);for(let i=0;i<n.length;++i){const a=t[t.length-n.length+i],s=n[i];if(a==null||s==null||a<0||s<0)r.push(null);else if(a===1)r.push(s);else if(s===1)r.push(a);else{if(a!==s)throw new Q("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(n));r.push(a)}}return r}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[be(t)]),t=t,t.length<2)throw new Q(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let n=[];for(const a of t)a!=null&&a[0]!==null&&n.push(a[0]);if(n=fo(n),n.length>1)throw new Q(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let r=t[0]==null?null:t[0].slice(1);for(let a=1;a<t.length;++a){const s=t[a]==null?null:t[a].slice(1);r=this.computeElementwiseOpOutputShape(r,s)}const i=t.map(a=>a.length);t.indexOf(null)===-1&&fo(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,n){return st(()=>{if(t=t,this.reshapeRequired){const r=[],i=t.map(a=>a.rank);if(i.indexOf(null)===-1){const a=mo(i);for(let s of t){const o=s.rank;for(let l=0;l<a-o;++l)s=im(s,1);r.push(s)}return this.mergeFunction(r)}else{let a=!1;for(const l of t){const c=l.rank;if(c==null){const h=l.shape,d=h[0],p=h.slice(1).concat([d]);let g=nt(l,[d].concat(ho(h.slice(1))));g=pe(g,[1,0]),g=nt(g,p),r.push(g),a=!0}else if(c>1){const h=oa(1,c).concat([0]);r.push(pe(l,h)),a=!0}else r.push(l)}let s=this.mergeFunction(r);const o=s.rank;if(a){if(o==null){const l=s.shape,c=l.length,h=l[c-1],d=[h].concat(l.slice(0,l.length-1));s=nt(pe(nt(s,[-1,h]),[1,0]),d)}else if(o>1){const l=[o-1].concat(oa(0,o-1));s=pe(s,l)}}return s}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let n;t[0]==null?n=null:n=t[0].slice(1);for(let i=1;i<t.length;++i){const a=t[i]==null?null:t[i].slice(1);n=this.computeElementwiseOpOutputShape(n,a)}let r=[];for(const i of t)i!=null&&i[0]!==null&&r.push(i[0]);return r=fo(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(t,n){return st(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Q("`mask` should be an Array");if(!Array.isArray(t))throw new Q("`inputs` should be an Array");if(n.length!==t.length)throw new Q(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Er(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=bs(r,n[i]);return r})}}class t6 extends Yl{constructor(t){super(t)}mergeFunction(t){return st(()=>{let n=t[0].clone();for(let r=1;r<t.length;++r)n=$t(n,t[r]);return n})}}t6.className="Add";St(t6);class e6 extends Yl{constructor(t){super(t)}mergeFunction(t){return st(()=>{let n=t[0].clone();for(let r=1;r<t.length;++r)n=tt(n,t[r]);return n})}}e6.className="Multiply";St(e6);class n6 extends Yl{constructor(t){super(t)}mergeFunction(t){return st(()=>{let n=t[0].clone();for(let r=1;r<t.length;++r)n=$t(n,t[r]);return tt(1/t.length,n)})}}n6.className="Average";St(n6);class r6 extends Yl{constructor(t){super(t)}mergeFunction(t){return st(()=>{let n=t[0];for(let r=1;r<t.length;++r)n=No(n,t[r]);return n})}}r6.className="Maximum";St(r6);class i6 extends Yl{constructor(t){super(t)}mergeFunction(t){return st(()=>{let n=t[0];for(let r=1;r<t.length;++r)n=Pd(n,t[r]);return n})}}i6.className="Minimum";St(i6);class a6 extends Yl{constructor(t){super(t),this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new Q("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let n=!0;for(const i of t)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<t.length;++i){const a=t[i].slice();a.splice(this.axis,1);let s=!1;for(const o of r)if(Te(o,a)){s=!0;break}s||r.push(a)}if(r.length>1)throw new Q("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return st(()=>NE(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new Q("A `Concatenate` layer should be called on a list of inputs.");const n=t,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const a of n.slice(1)){if(r[i]==null||a[i]==null){r[i]=null;break}r[i]+=a[i]}return r}computeMask(t,n){if(n==null)return null;if(!Array.isArray(n))throw new Q("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new Q("`inputs` should be an array for Concatenate");if(n.length!==t.length)throw new Q(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${t.length})`);return st(()=>{let r=!0;if(n.forEach(s=>{if(s!=null){r=!1;return}}),r)return null;const i=[];for(let s=0;s<t.length;++s)n[s]==null?i.push(Rt(Li(t[s]),"bool")):n[s].rank<t[s].rank?i.push(Er(n[s],-1)):i.push(n[s]);const a=_r(i,this.axis);return oG(a,-1,!1)})}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}a6.className="Concatenate";St(a6);function Mh(e,t){for(;e<0;)e+=t;return e}function s1t(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new ee("batchDot is not implemented for tensors of 4D or higher rank yet");if(V(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),V(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new ee("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,i=t.shape.length;n==null&&(n=[r-1,i-2]);const a=n;return st(()=>{let s;if(r>i){s=r-i;const l=[];for(let c=0;c<s;++c)l.push(1);t=nt(t,t.shape.concat(l))}else if(i>r){s=i-r;const l=[];for(let c=0;c<s;++c)l.push(1);e=nt(e,e.shape.concat(l))}else s=0;let o;if(e.shape.length===2&&t.shape.length===2)a[0]===a[1]?o=jt(tt(e,t),a[0]):o=jt(tt(pe(e,[1,0]),t),a[1]);else{const l=a[0]!==e.shape.length-1,c=a[1]===t.shape.length-1;o=we(e,t,l,c)}if(s>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let h=l;h<l+s;++h)c.push(h);o=Qp(o,c)}return o.shape.length===1&&(o=Er(o,1)),o})}class s6 extends Yl{constructor(t){super(t),this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){V(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0],r=t[1];if(n.length>3||r.length>3)throw new ee("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new Q(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(t){if(t.length!==2)throw new Q(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let n=t[0],r=t[1],i;return Array.isArray(this.axes)?i=this.axes.map((a,s)=>Mh(a,t[s].shape.length)):i=[Mh(this.axes,n.shape.length),Mh(this.axes,r.shape.length)],this.normalize&&(n=Sv(n,i[0]),r=Sv(r,i[1])),s1t(n,r,i)}interpretAxes(t,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Mh(this.axes,t.length),Mh(this.axes,n.length)],r}computeOutputShape(t){V(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0].slice(),r=t[1].slice();if(n.length>3||r.length>3)throw new ee("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const a=n.concat(r);return a.length===1&&a.push(1),a}computeMask(t,n){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(t,n),t}}s6.className="Dot";St(s6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class o6 extends se{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,t),n}call(t,n){return st(()=>{this.invokeCallHook(t,n);const r=Yt(t);return sm(()=>$t(A0(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}o6.className="GaussianNoise";St(o6);class l6 extends se{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return st(()=>{this.invokeCallHook(t,n);const r=Yt(t);return this.rate>0&&this.rate<1?sm(()=>{const a=Math.sqrt(this.rate/(1-this.rate));return tt(r,A0(r.shape,1,a))},()=>r,n.training||!1):r})}}l6.className="GaussianDropout";St(l6);class u6 extends se{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||Yt(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return st(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(t);return sm(()=>{const a=Yt(t),o=-1.6732632423543772*1.0507009873554805;let l=ql(Zp(r),this.rate);l=Oa(l,"float32");const c=((1-this.rate)*(1+this.rate*o**2))**-.5,h=-c*o*this.rate,d=$t(tt(a,l),tt($t(l,-1),o));return $t(tt(d,c),h)},()=>Yt(t),n.training||!1)}return t})}}u6.className="AlphaDropout";St(u6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zd(e,t,n,r,i,a=.001){let s;if(e.rank===2)s=Fdt(e,t,n,r,i,a);else if(e.rank===3)s=Bdt(e,t,n,r,i,a);else if(e.rank===4)s=jdt(e,t,n,r,i,a);else throw new ee(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return s}function o1t(e,t,n,r,i=.001){return st(()=>{const a=BI(e,r),s=a.mean,o=a.variance;return[zd(e,s,o,n,t,i),s,o]})}function l1t(e,t,n,r,i=.001){return st(()=>{const a=BI(e,r),s=a.mean,o=a.variance,l=[];for(const v of oa(0,e.rank))r.indexOf(v)!==-1?l.push(1):l.push(e.shape[v]);const c=nt(s,l),h=nt(o,l),d=t==null?null:nt(t,l),p=n==null?null:nt(n,l);return[zd(e,c,h,p,d,i),s,o]})}function u1t(e,t,n,r,i=.001){return Te(r.slice().sort(),oa(0,e.rank-1))?o1t(e,t,n,r,i):l1t(e,t,n,r,i)}class c6 extends se{constructor(t){t==null&&(t={}),super(t),this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=Ye(t.betaInitializer||"zeros"),this.gammaInitializer=Ye(t.gammaInitializer||"ones"),this.movingMeanInitializer=Ye(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Ye(t.movingVarianceInitializer||"ones"),this.betaConstraint=In(t.betaConstraint),this.gammaConstraint=In(t.gammaConstraint),this.betaRegularizer=Ze(t.betaRegularizer),this.gammaRegularizer=Ze(t.gammaRegularizer)}build(t){t=be(t);const n=this.axis>=0?this.axis:this.axis+t.length,r=t[n];if(r==null)throw new Q(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new $n({ndim:t.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,n){return st(()=>{const r=n.training==null?!1:n.training,i=Yt(t),a=i.shape,s=a.length,o=oa(0,s),l=this.axis>=0?this.axis:this.axis+s;o.splice(l,1);const c=Pl(1,s);c[l]=a[l];const h=o.slice();h.sort();const d=!Te(h,oa(0,s).slice(0,s-1)),p=()=>{if(d){const S=nt(this.movingMean.read(),c),T=nt(this.movingVariance.read(),c),$=this.center?nt(this.beta.read(),c):null,A=this.scale?nt(this.gamma.read(),c):null;return zd(i,S,T,$,A,this.epsilon)}else return zd(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return p();const[g,v,x]=u1t(i,this.gamma.read(),this.beta.read(),o,this.epsilon),b=(S,T,$)=>{st(()=>{const A=1-$,I=S.read(),O=tt(qt(I,T),A);S.write(qt(I,O))})};return(()=>{b(this.movingMean,v,this.momentum),b(this.movingVariance,x,this.momentum)})(),g})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:tn(this.betaInitializer),gammaInitializer:tn(this.gammaInitializer),movingMeanInitializer:tn(this.movingMeanInitializer),movingVarianceInitializer:tn(this.movingVarianceInitializer),betaRegularizer:Fe(this.betaRegularizer),gammaRegularizer:Fe(this.gammaRegularizer),betaConstraint:kn(this.betaConstraint),gammaConstraint:kn(this.gammaConstraint)},n=super.getConfig();return Object.assign(t,n),t}}c6.className="BatchNormalization";St(c6);class f6 extends se{constructor(t){if(t==null&&(t={}),super(t),this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=Ye(t.betaInitializer||"zeros"),this.gammaInitializer=Ye(t.gammaInitializer||"ones"),this.betaRegularizer=Ze(t.betaRegularizer),this.gammaRegularizer=Ze(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=be(t);const n=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=n);for(const a of this.axis)if(a<0||a>=n)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==fo(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(a=>t[a]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(t,n){const r=Yt(t),i=r.shape,a=i.length;return st(()=>{let{mean:o,variance:l}=BI(r,this.axis,!0);const c=Pl(1,a);for(const x of this.axis)c[x]=i[x];const h=x=>x!=null&&x.shape.length!==a?nt(x,c):x;let d=this.scale?h(this.gamma.read()):null,p=this.center?h(this.beta.read()):null;const g=[],v=[];for(let x=0;x<a;++x)this.axis.indexOf(x)!==-1?(g.push(i[x]),v.push(1)):(g.push(1),v.push(i[x]));return o=ra(o,g),l=ra(l,g),d!=null&&(d=ra(d,v)),p!=null&&(p=ra(p,v)),zd(r,o,l,p,d,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:tn(this.betaInitializer),gammaInitializer:tn(this.gammaInitializer),betaRegularizer:Fe(this.betaRegularizer),gammaRegularizer:Fe(this.gammaRegularizer)},n=super.getConfig();return Object.assign(t,n),t}}f6.className="LayerNormalization";St(f6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function c1t(e,t,n){return st(()=>{if(e.rank!==4)throw new Q(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new Q("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=la()),n!=="channelsLast"&&n!=="channelsFirst")throw new Q(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],t[0],t[1]]:r=[[0,0],t[0],t[1],[0,0]],zI(e,r)})}class h6 extends se{constructor(t){if(t==null&&(t={}),super(t),this.dataFormat=t.dataFormat==null?la():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new Q(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let n,r;if(typeof t.padding[0]=="number")n=[t.padding[0],t.padding[0]],r=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new Q(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(n=t.padding[0],t.padding[1].length!==2)throw new Q(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);r=t.padding[1]}this.padding=[n,r]}this.inputSpec=[new $n({ndim:4})]}computeOutputShape(t){t=be(t);let n,r;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?n=t[2]+this.padding[0][0]+this.padding[0][1]:n=null,t[3]!=null&&t[3]>=0?r=t[3]+this.padding[1][0]+this.padding[1][1]:r=null,[t[0],t[1],n,r]):(t[1]!=null&&t[1]>=0?n=t[1]+this.padding[0][0]+this.padding[0][1]:n=null,t[2]!=null&&t[2]>=0?r=t[2]+this.padding[1][0]+this.padding[1][1]:r=null,[t[0],n,r,t[3]])}call(t,n){return st(()=>c1t(Yt(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}h6.className="ZeroPadding2D";St(h6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function M0(e,t,n,r,i,a){return st(()=>{dn(i),Eq(a),mi(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=la()),a==null&&(a="max"),e=WE(e,i);let s;const o=r==="same"?"same":"valid";return a==="max"?s=LI(e,t,n,o):s=II(e,t,n,o),i==="channelsFirst"&&(s=pe(s,[0,3,1,2])),s})}function d6(e,t,n,r,i,a){return st(()=>{dn(i),Eq(a),mi(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=la()),a==null&&(a="max"),e=NH(e,i);let s;const o=r==="same"?"same":"valid";return a==="max"?s=$mt(e,t,n,o):s=kdt(e,t,n,o),i==="channelsFirst"&&(s=pe(s,[0,4,1,2,3])),s})}class p6 extends se{constructor(t){if(t.poolSize==null&&(t.poolSize=2),super(t),typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new Q(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(Bn(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new Q(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);Bn(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,mi(this.padding),this.inputSpec=[new $n({ndim:3})]}computeOutputShape(t){t=be(t);const n=sa(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],n,t[2]]}call(t,n){return st(()=>{this.invokeCallHook(t,n),t=im(Yt(t),2);const r=this.poolingFunction(Yt(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Qp(r,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(t,n),t}}class m6 extends p6{constructor(t){super(t)}poolingFunction(t,n,r,i,a){return dn(a),mi(i),M0(t,n,r,i,a,"max")}}m6.className="MaxPooling1D";St(m6);class g6 extends p6{constructor(t){super(t)}poolingFunction(t,n,r,i,a){return dn(a),mi(i),M0(t,n,r,i,a,"avg")}}g6.className="AveragePooling1D";St(g6);class y6 extends se{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new Q(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];Bn(this.poolSize,"poolSize"),Bn(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,dn(this.dataFormat),mi(this.padding),this.inputSpec=[new $n({ndim:4})]}computeOutputShape(t){t=be(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2];return n=sa(n,this.poolSize[0],this.padding,this.strides[0]),r=sa(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,r]:[t[0],n,r,t[3]]}call(t,n){return st(()=>(this.invokeCallHook(t,n),this.poolingFunction(Yt(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class v6 extends y6{constructor(t){super(t)}poolingFunction(t,n,r,i,a){return dn(a),mi(i),M0(t,n,r,i,a,"max")}}v6.className="MaxPooling2D";St(v6);class b6 extends y6{constructor(t){super(t)}poolingFunction(t,n,r,i,a){return dn(a),mi(i),M0(t,n,r,i,a,"avg")}}b6.className="AveragePooling2D";St(b6);class x6 extends se{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new Q(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];Bn(this.poolSize,"poolSize"),Bn(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,dn(this.dataFormat),mi(this.padding),this.inputSpec=[new $n({ndim:5})]}computeOutputShape(t){t=be(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2],i=this.dataFormat==="channelsFirst"?t[4]:t[3];return n=sa(n,this.poolSize[0],this.padding,this.strides[0]),r=sa(r,this.poolSize[1],this.padding,this.strides[1]),i=sa(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,r,i]:[t[0],n,r,i,t[4]]}call(t,n){return st(()=>(this.invokeCallHook(t,n),this.poolingFunction(Yt(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class w6 extends x6{constructor(t){super(t)}poolingFunction(t,n,r,i,a){return dn(a),mi(i),d6(t,n,r,i,a,"max")}}w6.className="MaxPooling3D";St(w6);class S6 extends x6{constructor(t){super(t)}poolingFunction(t,n,r,i,a){return dn(a),mi(i),d6(t,n,r,i,a,"avg")}}S6.className="AveragePooling3D";St(S6);class C6 extends se{constructor(t){super(t),this.inputSpec=[new $n({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,n){throw new ee}}class T6 extends C6{constructor(t){super(t||{})}call(t,n){return st(()=>{const r=Yt(t);return vn(r,1)})}}T6.className="GlobalAveragePooling1D";St(T6);class $6 extends C6{constructor(t){super(t||{})}call(t,n){return st(()=>{const r=Yt(t);return aa(r,1)})}}$6.className="GlobalMaxPooling1D";St($6);class A6 extends se{constructor(t){super(t),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,dn(this.dataFormat),this.inputSpec=[new $n({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,n){throw new ee}getConfig(){const t={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class k6 extends A6{call(t,n){return st(()=>{const r=Yt(t);return this.dataFormat==="channelsLast"?vn(r,[1,2]):vn(r,[2,3])})}}k6.className="GlobalAveragePooling2D";St(k6);class I6 extends A6{call(t,n){return st(()=>{const r=Yt(t);return this.dataFormat==="channelsLast"?aa(r,[1,2]):aa(r,[2,3])})}}I6.className="GlobalMaxPooling2D";St(I6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class E6 extends se{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(t,n),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,n,r={}){const i=n.layer,a=ms(i,r);delete n.layer;const s={layer:a};return Object.assign(s,n),new t(s)}}class O6 extends E6{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=be(t),t.length<3)throw new Q(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=be(t);const n=[t[0]].concat(t.slice(2)),r=this.layer.computeOutputShape(n),i=t[1];return[r[0],i].concat(r.slice(1))}call(t,n){return st(()=>(t=Yt(t),zH((s,o)=>[Yt(this.layer.call(s,n)),[]],t,[],!1,null,null,!1,!0)[1]))}}O6.className="TimeDistributed";St(O6);function f1t(e){Kl(N0t,"BidirectionalMergeMode",e)}const h1t="concat";class N6 extends E6{constructor(t){super(t);const n=t.layer.getConfig(),r={};r.className=t.layer.getClassName(),r.config=n,this.forwardLayer=ms(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=t.layer.getClassName(),i.config=n,this.backwardLayer=ms(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?h1t:t.mergeMode,f1t(this.mergeMode),t.weights)throw new ee("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const n=t.length,r=Math.floor(n/2);this.forwardLayer.setWeights(t.slice(0,r)),this.backwardLayer.setWeights(t.slice(r))}computeOutputShape(t){let n=this.forwardLayer.computeOutputShape(t);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,a;return this.returnState&&(a=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(a).concat(a.slice()):[r].concat(a).concat(a.slice()):Or(i)}apply(t,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const a=BH(t,r,i,this.numConstants);if(t=a.inputs,r=a.initialState,i=a.constants,Array.isArray(t)&&(r=t.slice(1),t=t[0]),(r==null||r.length===0)&&i==null)return super.apply(t,n);const s=[],o=[];if(r!=null){const c=r.length;if(c%2>0)throw new Q("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,s.push(...r);const h=r.map(d=>new $n({shape:d.shape}));this.forwardLayer.stateSpec=h.slice(0,c/2),this.backwardLayer.stateSpec=h.slice(c/2),o.push(...h)}if(i!=null)throw new ee("Support for constants in Bidirectional layers is not implemented yet.");const l=s[0]instanceof Fa;for(const c of s)if(c instanceof Fa!==l)throw new Q("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[t].concat(s),h=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=h;const p=super.apply(c,n);return this.inputSpec=d,p}else return super.apply(t,n)}call(t,n){return st(()=>{const r=n.initialState;let i,a;if(r==null)i=this.forwardLayer.call(t,n),a=this.backwardLayer.call(t,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(t,Object.assign(n,{initialState:l})),a=this.backwardLayer.call(t,Object.assign(n,{initialState:c}))}let s;this.returnState&&(Array.isArray(i)&&(s=i.slice(1).concat(a.slice(1))),i=i[0],a=a[0]),this.returnSequences&&(a=Dl(a,1));let o;return this.mergeMode==="concat"?o=NE([i,a]):this.mergeMode==="sum"?o=$t(i,a):this.mergeMode==="ave"?o=tt(.5,$t(i,a)):this.mergeMode==="mul"?o=tt(i,a):this.mergeMode==null&&(o=[i,a]),this.returnState?this.mergeMode==null?o.concat(s):[o].concat(s):o})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){bl(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),bl(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const a=this.forwardLayer.states.map(s=>null);return Array.isArray(r)?r.concat(a).concat(a):[r].concat(a).concat(a)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,n){const r=ms(n.layer);if(delete n.layer,n.numConstants!=null)throw new ee("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new t(i)}}N6.className="Bidirectional";St(N6);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _6 extends se{constructor(t){super(t),this.scale=t.scale,t.offset?this.offset=t.offset:this.offset=0}getConfig(){const t={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(t,n),t}call(t,n){return st(()=>(t=Yt(t),t.dtype!=="float32"&&(t=Oa(t,"float32")),$t(tt(t,this.scale),this.offset)))}}_6.className="Rescaling";St(_6);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:d1t,cropAndResize:p1t}=cs;class R6 extends se{constructor(t){super(t),this.height=t.height,this.width=t.width}centerCrop(t,n,r,i,a,s,o,l){return st(()=>{let c,h=!1;const d=n/s,p=r/o,g=(i+n)/s,v=(a+r)/o,x=[d,p,g,v],b=[];t.rank===3?(h=!0,c=xs([t])):c=t;for(let A=0;A<c.shape[0];A++)b.push(x);const w=ZW(b,[b.length,4]),S=Fd(0,b.length,1,"int32"),$=p1t(c,w,S,[i,a],"nearest");return Oa(h?Yt(Ml($)):$,l)})}upsize(t,n,r,i){return st(()=>{const a=d1t(t,[n,r]);return Oa(a,i)})}call(t,n){return st(()=>{const r=Yt(t),i=r.dtype,a=r.shape,s=a[a.length-3],o=a[a.length-2];let l=0;s!==this.height&&(l=Math.floor((s-this.height)/2));let c=0;return o!==this.width&&(c=Math.floor((o-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,s,o,i):this.upsize(t,this.height,this.width,i)})}getConfig(){const t={height:this.height,width:this.width},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){t=be(t);const n=t.length-3,r=t.length-2;return t[n]=this.height,t[r]=this.width,t}}R6.className="CenterCrop";St(R6);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function m1t(e,t,n,r){let i=Yt(e);if(i.dtype!=="int32"&&(i=Oa(i,"int32")),t==="int")return i;const a=i.shape;if(i.rank===0&&(i=Er(i,-1)),t==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Er(i,-1)),i.rank>2)throw new Q(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${a} which would result in output rank ${i.rank}.`);const s=["multiHot","oneHot"].includes(t),o=i;let l;if(typeof r<"u"&&t==="count"?l=bz(o,r,n,s):l=bz(o,[],n,s),t!=="tfIdf")return l;if(r)return tt(l,r);throw new Q("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class D6 extends se{constructor(t){super(t),this.numTokens=t.numTokens,t.outputMode?this.outputMode=t.outputMode:this.outputMode="multiHot"}getConfig(){const t={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){return t=be(t),t==null?[this.numTokens]:this.outputMode==="oneHot"&&t[t.length-1]!==1?(t.push(this.numTokens),t):(t[t.length-1]=this.numTokens,t)}call(t,n){return st(()=>{t=Yt(t),t.dtype!=="int32"&&(t=Oa(t,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new Q(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Yt(n.countWeights)}const i=aa(t),a=dv(t),s=pi(this.numTokens,i).bufferSync().get(0),o=ql(a,0).bufferSync().get(0);if(!(s&&o))throw new Q(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return m1t(t,this.outputMode,this.numTokens,r)})}}D6.className="CategoryEncoding";St(D6);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const g1t=["bilinear","nearest"],s4=new Set(g1t);class M6 extends se{constructor(t){if(super(t),this.height=t.height,this.width=t.width,t.interpolation)if(s4.has(t.interpolation))this.interpolation=t.interpolation;else throw new Q(`Invalid interpolation parameter: ${t.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!t.cropToAspectRatio}computeOutputShape(t){t=be(t);const n=t[2];return[this.height,this.width,n]}getConfig(){const t={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(t,n),t}call(t,n){return st(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return cs.resizeBilinear(t,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return cs.resizeNearestNeighbor(t,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...s4]} are supported`)})}}M6.className="Resizing";St(M6);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class P6{constructor(t){this.seed=t}next(){if(this.seed!==void 0)return this.seed++}}P6.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class F6 extends se{constructor(t){super(t),this.randomGenerator=new P6(t.seed)}getConfig(){const t={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(t,n),t}}F6.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const y1t=["bilinear","nearest"],o4=new Set(y1t);class L6 extends F6{constructor(t){super(t);const{factor:n,interpolation:r="bilinear"}=t;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Q(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Q(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Q(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(o4.has(r))this.interpolation=r;else throw new Q(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const t={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){t=be(t);const n=t[2];return[this.imgHeight,-1,n]}call(t,n){return st(()=>{const r=Yt(t);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=Zp([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*i;a=Math.round(a);const s=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return cs.resizeBilinear(t,s);case"nearest":return cs.resizeNearestNeighbor(t,s);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...o4]} are supported`)}})}}L6.className="RandomWidth";St(L6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function b$(e){return new KE(e)}function v1t(e){return new D0(e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b1t=ct();b1t.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var l4;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(l4||(l4={}));var u4;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(u4||(u4={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var c4;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(c4||(c4={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mt(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x1t=MG;class P0 extends _k{nextDataId(){return P0.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new aW(this,ya())}write(t,n,r){this.firstUse&&(this.firstUse=!1,ct().get("IS_NODE")&&ci(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:t,dtype:r,refCount:1}),i}makeTensorInfo(t,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&Jd(r[0])){const a=r.map(s=>co(s));i=this.write(a,t,n)}else i=this.write(r,t,n);return{dataId:i,shape:t,dtype:n}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const n=this.data.get(t);n.refCount++}decRef(t){if(this.data.has(t)){const n=this.data.get(t);n.refCount--}}move(t,n,r,i,a){this.data.set(t,{values:n,dtype:i,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:n,complexTensorInfos:r}=this.data.get(t);if(n==="complex64"){const i=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return ws(i,a)}return Uft(this.data.get(t).values,n)}bufferSync(t){const n=this.readSync(t.dataId);if(t.dtype==="string")try{const r=n.map(i=>po(i));return ie(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ie(t.shape,t.dtype,n)}makeOutput(t,n,r){return ya().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,t),this)}disposeData(t,n=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!n&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(t);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const n=Ir();return t(),{kernelMs:Ir()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){Mt([t],"where");const n=this.readSync(t.dataId);return x1t(t.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}P0.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B6(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const w1t=e=>{const{x:t}=e.inputs,n=e.backend;Mt(t,"abs");let r=new Float32Array(pt(t.shape));const i=n.data.get(t.dataId).values;return r=B6(i),n.makeOutput(r,t.shape,t.dtype)},S1t={kernelName:hb,backendName:"cpu",kernelFunc:w1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pn(e){return(t,n,r,i,a)=>{const s=Jt(t,n),o=s.length,l=Bt(s),c=pt(s),h=sr(a,c),d=t.length,p=n.length,g=Bt(t),v=Bt(n),x=jc(t,s),b=jc(n,s);if(x.length+b.length===0)for(let w=0;w<h.length;++w)h[w]=e(r[w%r.length],i[w%i.length]);else for(let w=0;w<h.length;++w){const S=of(w,o,l),T=S.slice(-d);x.forEach(O=>T[O]=0);const $=ka(T,d,g),A=S.slice(-p);b.forEach(O=>A[O]=0);const I=ka(A,p,v);h[w]=e(r[$],i[I])}return[h,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(i.shape,"float32",s)},o}const C1t={kernelName:Gk,backendName:"cpu",kernelFunc:qr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kv(e,t,n="float32"){if(n==="complex64"){const i=kv(e,t,"float32"),a=kv(e,t,"float32");return qr({inputs:{real:i,imag:a},backend:e})}const r=or(pt(t),n);return e.makeTensorInfo(t,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function La(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const T1t={kernelName:xp,backendName:"cpu",kernelFunc:La};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fl(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const $1t={kernelName:mI,backendName:"cpu",kernelFunc:Fl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z6(e,t,n,r){if(r==="int32"){const i=Int32Array.from(e);return[t,"int32",i]}if(r==="bool"){const i=Gl([0],n),[a,s]=pn((o,l)=>o!==l?1:0)(t,[],e,i,"bool");return[s,"bool",a]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function bo(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return La({inputs:{x:i},backend:n});const h=kv(n,i.shape,i.dtype),d=bo({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),p=qr({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}if(i.dtype==="complex64"){const h=Fl({inputs:{input:i},backend:n}),d=bo({inputs:{x:h},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(h),d}if(!lW(i.dtype,a)){const h=La({inputs:{x:i},backend:n});return{dataId:h.dataId,shape:h.shape,dtype:a}}const s=n.data.get(i.dataId).values,[o,l,c]=z6(s,i.shape,i.dtype,a);return n.makeTensorInfo(o,l,c)}const A1t={kernelName:op,backendName:"cpu",kernelFunc:bo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function On(e,t,n,r){return n==null?({inputs:i,backend:a})=>{const{a:s,b:o}=i,l=a;Mt([s,o],e);const c=l.data.get(s.dataId).values,h=l.data.get(o.dataId).values,d=s.dtype==="string"?Ss(c):c,p=s.dtype==="string"?Ss(h):h,g=r||s.dtype,[v,x]=t(s.shape,o.shape,d,p,g);return l.makeTensorInfo(x,g,v)}:({inputs:i,backend:a})=>{const{a:s,b:o}=i,l=a;if(s.dtype==="complex64"||o.dtype==="complex64"){const c=bo({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(c.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,g=l.data.get(d.dataId).values,v=l.data.get(p.dataId).values,x=bo({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(x.dataId),w=b.complexTensorInfos.real,S=b.complexTensorInfos.imag,T=l.data.get(w.dataId).values,$=l.data.get(S.dataId).values,[A,I,O]=n(s.shape,o.shape,g,v,T,$),N=l.makeTensorInfo(O,"float32",A),_=l.makeTensorInfo(O,"float32",I),R=qr({inputs:{real:N,imag:_},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(x),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo(_),R}else{const c=l.data.get(s.dataId).values,h=l.data.get(o.dataId).values,d=r||s.dtype,[p,g]=t(s.shape,o.shape,c,h,d);return l.makeTensorInfo(g,d,p)}}}function YE(e){return(t,n,r,i,a,s)=>{const o=Jt(t,n),l=pt(o),c=o.length,h=Bt(o),d=sr("float32",l),p=sr("float32",l),g=jc(t,o),v=jc(n,o),x=ws(r,i),b=ws(a,s),w=t.length,S=Bt(t),T=n.length,$=Bt(n);if(g.length+v.length===0)for(let A=0;A<d.length;A++){const I=A%x.length,O=A%b.length,N=e(x[I*2],x[I*2+1],b[O*2],b[O*2+1]);d[A]=N.real,p[A]=N.imag}else for(let A=0;A<d.length;A++){const I=of(A,c,h),O=I.slice(-w);g.forEach(F=>O[F]=0);const N=ka(O,w,S),_=I.slice(-T);v.forEach(F=>_[F]=0);const R=ka(_,T,$),E=e(x[N*2],x[N*2+1],b[R*2],b[R*2+1]);d[A]=E.real,p[A]=E.imag}return[d,p,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j6=pn((e,t)=>e+t),k1t=YE((e,t,n,r)=>({real:e+n,imag:t+r})),Gc=On(lf,j6,k1t),I1t={kernelName:lf,backendName:"cpu",kernelFunc:Gc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZE(e,t,n,r,i){const a=pt(r),s=or(i,n);for(let o=0;o<e.length;o++){const l=e[o];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(a>0?s[l]+=t[o]:s[l]+=1)}return s}function U6(e,t,n,r=!1){const i=e.shape[0],a=e.shape[1],s=ie([i,n],t.dtype);for(let o=0;o<i;o++)for(let l=0;l<a;l++){const c=e.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?s.set(1,o,c):t.size>0?s.set(s.get(o,c)+t.get(o,l),o,c):s.set(s.get(o,c)+1,o,c))}return s}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V6=pn((e,t)=>e&t),E1t=On(Wk,V6),O1t={kernelName:Wk,backendName:"cpu",kernelFunc:E1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function za(e){return(t,n,r)=>{const i=un(n,t.length);for(let a=0;a<t.length;++a)i[a]=e(t[a],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ee(e,t,n){const r=za(t);return Mo(e,r,n)}function Mo(e,t,n){return({inputs:r,attrs:i,backend:a})=>{const{x:s}=r;Mt(s,e);const o=a,l=o.data.get(s.dataId).values;let c;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Ss(l)}else c=l;const h=n||s.dtype,d=t(c,h,i);return o.makeTensorInfo(s.shape,h,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W6=za(e=>Math.ceil(e)),N1t=Mo(lp,W6),_1t={kernelName:lp,backendName:"cpu",kernelFunc:N1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G6(e,t,n,r){const i=un(n,pt(t));if(r&&n!=="string"){let a=0;e.forEach(s=>{const o=pt(s.shape);i.set(s.vals,a),a+=o})}else{let a=0;e.forEach(s=>{const o=n==="string"?Ss(s.vals):s.vals;let l=0;for(let c=0;c<s.shape[0];++c){const h=c*t[1]+a;for(let d=0;d<s.shape[1];++d)i[h+d]=o[l++]}a+=s.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q6=pn((e,t)=>e===t?1:0),H6=On(kb,q6,null,"bool"),R1t={kernelName:kb,backendName:"cpu",kernelFunc:H6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X6=za(e=>Math.exp(e)),K6=Mo(mp,X6,"float32"),D1t={kernelName:mp,backendName:"cpu",kernelFunc:K6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6=za(e=>Math.expm1(e)),M1t=Mo(gp,Y6),P1t={kernelName:gp,backendName:"cpu",kernelFunc:M1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6=za(e=>Math.floor(e)),F1t=Mo(yp,Z6),L1t={kernelName:yp,backendName:"cpu",kernelFunc:F1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q6=pn((e,t)=>Math.floor(e/t)),B1t=On(vp,Q6,null,"int32"),z1t={kernelName:vp,backendName:"cpu",kernelFunc:B1t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J6(e,t,n,r,i,a,s,o,l){const c=ie([r,a],n);for(let h=0;h<r;h++){const d=[];let p=0;for(let g=0;g<i;g++){const v=e[h*i+g];p+=v*s[g],d.push(v)}if(p<0||p>=l/a)throw new Error(`Invalid indices: ${d} does not index into ${o}`);for(let g=0;g<a;g++)c.values[h*a+g]=t.get(...t.indexToLoc(p*a+g))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5(e,t,n){const r=ie(n,e.dtype);for(let i=0;i<r.size;++i){const s=r.indexToLoc(i).slice(),o=s[0],l=s[2],c=t.locToIndex([o,l]);s[2]=t.values[c];const h=e.locToIndex(s);0<=h&&h<e.values.length&&(r.values[i]=e.values[h])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e5=pn((e,t)=>e>t?1:0),j1t=On(Nb,e5,null,"bool"),U1t={kernelName:Nb,backendName:"cpu",kernelFunc:j1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n5=pn((e,t)=>e>=t?1:0),V1t=On(bp,n5,null,"bool"),W1t={kernelName:bp,backendName:"cpu",kernelFunc:V1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r5=pn((e,t)=>e<t?1:0),G1t=On(Rb,r5,null,"bool"),q1t={kernelName:Rb,backendName:"cpu",kernelFunc:G1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i5=pn((e,t)=>e<=t?1:0),H1t=On(Db,i5,null,"bool"),X1t={kernelName:Db,backendName:"cpu",kernelFunc:H1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a5(e,t,n){const r=(t-e)/(n-1),i=or(n,"float32");i[0]=e;for(let a=1;a<i.length;a++)i[a]=i[a-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s5=za(e=>Math.log(e)),K1t=Mo(Tp,s5),Y1t={kernelName:Tp,backendName:"cpu",kernelFunc:K1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5(e,t,n,r){const i=sr(r,pt(n));for(let a=0;a<i.length;++a){const s=a*t;let o=e[s];for(let l=0;l<t;++l){const c=e[s+l];(Number.isNaN(c)||c>o)&&(o=c)}i[a]=o}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l5=pn((e,t)=>Math.max(e,t)),Z1t=On(Ap,l5),Q1t={kernelName:Ap,backendName:"cpu",kernelFunc:Z1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u5=pn((e,t)=>Math.min(e,t)),J1t=On(kp,u5),twt={kernelName:kp,backendName:"cpu",kernelFunc:J1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QE=pn((e,t)=>e*t),ewt=YE((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),F0=On(Ep,QE,ewt),nwt={kernelName:Ep,backendName:"cpu",kernelFunc:F0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5(e,t,n){const r=Io(-1,n);return QE([],t,r,e,n)}function rwt(e){const{inputs:t,backend:n}=e,{x:r}=t;Mt(r,"neg");const i=n.data.get(r.dataId).values,[a,s]=c5(i,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,a)}const iwt={kernelName:Gb,backendName:"cpu",kernelFunc:rwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f5=pn((e,t)=>e!==t?1:0),awt=On(qb,f5,null,"bool"),swt={kernelName:qb,backendName:"cpu",kernelFunc:awt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JE(e,t,n,r,i){const a=t.length,s=pt(t),o=Bt(t),l=Bt(i),c=sr(n,pt(i));for(let h=0;h<s;++h){const d=of(h,a,o),p=new Array(d.length);for(let v=0;v<p.length;v++)p[v]=d[r[v]];const g=ka(p,a,l);c[g]=e[h]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mr(e){const{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:a}=n;Mt(i,"transpose");const s=i.shape.length,o=new Array(s);for(let d=0;d<o.length;d++)o[d]=i.shape[a[d]];const l=r.data.get(i.dataId).values,c=JE(l,i.shape,i.dtype,a,o);return{dataId:r.write(c,o,i.dtype),shape:o,dtype:i.dtype}}const owt={kernelName:sc,backendName:"cpu",kernelFunc:Mr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h5(e,t,n,r){const[i,a]=jn(e,r),s=Kr(t,"int32"),o=or(pt(i),s),l=pt(a);for(let c=0;c<o.length;++c){const h=c*l;let d=1;for(let p=0;p<l;++p)d*=n[h+p];o[c]=d}return{outVals:o,outShape:i,outDtype:s}}function lwt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;Mt(i,"prod");const o=i.shape.length,l=ae(a,i.shape),c=en(l,o);let h=l,d=i;const p=[];c!=null&&(d=Mr({inputs:{x:i},backend:n,attrs:{perm:c}}),p.push(d),h=hn(h.length,o));const g=n.data.get(d.dataId).values,{outVals:v,outShape:x,outDtype:b}=h5(d.shape,d.dtype,g,h);let w=x;return s&&(w=bn(x,l)),p.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.makeTensorInfo(w,b,v)}const uwt={kernelName:Qb,backendName:"cpu",kernelFunc:lwt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cwt(e,t,n){e.forEach((r,i)=>{if(r<0||r>=n){const a=of(i,t.length,Bt(t)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${n})`)}})}function fwt(e,t){for(let n=0;n<e.length;++n){const r=e[n],i=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function hwt(e,t,n,r){const i=[];let a=0;const s=t.length-1+n.length,o=new Array(s).fill(null).map(()=>[0]);fwt(n,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];const h=t[c+1];for(let d=1;d<l+1;++d)o[c].push(d*h)}for(let c=0;c<e.length;++c){let h=e[c],d=e[c]+1;for(let p=0;p<n.length;++p){const g=n[p],v=p+t.length-1;if(v>=0){const x=o[v],b=x[x.length-1]-g[h];for(let w=h;w<d;++w)o[v].push(g[w+1]+b)}h=g[h],d=g[d]}d!==h&&(i.push([h,d]),a+=d-h)}return{outSplits:o,valueSlices:i,numValues:a}}function dwt(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n].length,i=un("int32",r);t.push(i),e[n].forEach((a,s)=>i[s]=a)}return t}function f4(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function pwt(e,t,n,r,i,a){const s=f4(t,2)[1],o=f4(a,2)[1];let l=0;for(const c of n)for(let h=c[0];h<c[1];++h){for(let d=0;d<r;++d)i[l*o+d]=e[h*s+d];++l}}function mwt(e,t,n,r,i){const a=t.slice();a[0]=i;const s=un(n,pt(a)),o=e.length,l=o===0?0:o/t[0];return pwt(e,t,r,l,s,a),[s,a]}function d5(e,t,n,r,i,a,s,o){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");const l=t[0][0]-1;if(cwt(a,s,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:h,valueSlices:d,numValues:p}=hwt(a,s,e,c),g=dwt(h),v=mwt(n,r,i,d,p);return[g,v[0],v[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4=2147483647;function p5(e,t,n,r,i,a,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const o=t.length===0,l=i.length===0,c=s.length===0,h=[];o||h.push(t[0]),l||h.push(i[0]),c||h.push(s[0]);for(let b=1;b<h.length;++b)if(h[b]!==h[b-1])throw new Error("starts, limits, and deltas must have the same shape");const d=h.length===0?1:h[0],p=un("int32",d+1);p[0]=0;for(let b=0;b<d;++b){const w=o?e[0]:e[b],S=l?r[0]:r[b],T=c?a[0]:a[b];if(T===0)throw new Error("Requires delta != 0");let $;if(T>0&&S<w||T<0&&S>w)$=0;else if($=Math.ceil(Math.abs((S-w)/T)),$>h4)throw new Error(`Requires ((limit - start) / delta) <= ${h4}`);p[b+1]=p[b]+$}const g=p[d],v=un(n,g);let x=0;for(let b=0;b<d;++b){const w=p[b+1]-p[b];let S=o?e[0]:e[b];const T=c?a[0]:a[b];for(let $=0;$<w;++$)v[x++]=S,S+=T}return[p,v]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ii=ta;class Iv{constructor(t,n,r,i,a,s,o,l,c,h){this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=a,this.defaultValue=s,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=tq(h),this.raggedRank=eq(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===Ii.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===Ii.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case Ii.VALUE_ROWIDS:return Iv.getMaxWidthValueRowID(n);case Ii.ROW_SPLITS:return Iv.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Ii[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const n=t.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const a=t[i+1]-t[i];a>r&&(r=a)}return r}static getMaxWidthValueRowID(t){const n=t.length;if(n===0)return 0;let r=0,i=t[0],a=0;for(let s=1;s<n;++s){const o=t[s];o!==i&&(i=o,a=Math.max(s-r,a),r=s)}return Math.max(n-r,a)}tensorShapeFromTensor(t,n,r=!0){if(n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return p4(t,r)}calculateOutputSize(t){const n=this.valuesShape,r=this.defaultValueShape;nq(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=JG(this.raggedRank,i,n);s[0]<0&&(s[0]=t);for(let o=1;o<=this.raggedRank;++o)s[o]<0&&(s[o]=this.getMaxWidth(o));return s}calculateFirstParentOutputIndex(t,n,r){const i=Math.min(t,r),a=[];let s=0;for(let o=0;o<i;++o,s+=n)a.push(s);for(let o=i;o<t;++o)a.push(-1);return V(a.length===t,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(t,n,r,i){const a=t.length,s=[];for(let o=0;o<a-1;++o){const l=t[o+1]-t[o];let c=Math.min(i,l),h=n[o];h===-1&&(c=0);for(let d=0;d<c;++d)s.push(h),h+=r;for(let d=0;d<l-c;++d)s.push(-1)}if(a>0&&s.length!==t[a-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(t,n,r,i){const a=t.length,s=[];if(a===0)return[];let o=0,l=t[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];s.push(c);for(let h=1;h<a;++h){const d=t[h];if(d===l)c>=0&&(++o,o<i?c+=r:c=-1);else{if(o=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}s.push(c)}if(s.length!==t.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(t,n,r,i){const a=this.getRowPartitionTensor(t),s=this.getRowPartitionTypeByDimension(t);switch(s){case Ii.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,n,r,i);case Ii.ROW_SPLITS:if(a.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(a,n,r,i);default:throw new Error(`Unsupported partition type: ${Ii[s]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Ii.FIRST_DIM_SIZE:return t[0];case Ii.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ii.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ii[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const a=p4(r,!1),s=un(this.valuesDType,pt(a));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,s,a)}return[a,s]}setOutput(t,n,r,i){if(r.length===0)return;const a=this.values,s=r;let o=i.slice();o=o.slice(t+1);const l=pt(o),c=n.length;let h=this.defaultValue;if(h.length!==l&&h.length!==1){const v=this.defaultValueShape;st(()=>{const x=nt(h,v);h=Yh(x,o).dataSync()})}let d=0,p=0,g=0;for(let v=0;v<=c;++v){let x=v<c?n[v]:-1;if(x===g){++g;continue}if(p<g){const b=a.subarray(d*l),w=s.subarray(p*l),S=(g-p)*l;d4(w,b,S)}if(v>=c){const b=r.length;x=Math.floor(b/l)}if(x>g)if(this.defaultValue.length===1)s.subarray(g*l,x*l).fill(this.defaultValue[0]),g=x;else for(;x>g;){const b=s.slice(g*l);d4(b,h,l),++g}x<0?(d=v+1,p=g):(d=v,p=g,g=p+1)}}}function d4(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function p4(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function m5(e,t,n,r,i,a,s,o,l,c){return new Iv(e,t,n,r,i,a,s,o,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g5(e,t,n,r){const i=e===t,a=e<t&&n<0,s=t<e&&n>1;if(i||a||s)return or(0,r);const o=Math.abs(Math.ceil((t-e)/n)),l=or(o,r);t<e&&n===1&&(n=-1),l[0]=e;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5=za(e=>1/Math.sqrt(e)),gwt=Mo(Mp,y5),ywt={kernelName:Mp,backendName:"cpu",kernelFunc:gwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ml(e,t,n,r,i,a,s,o,l,c){const h=[r/i,i],d=e.values,p=t.values;if(r===0)return ie(n,t.dtype);const g=l instanceof Xn?l:ie(h,t.dtype);typeof l=="string"||typeof l=="number"?g.values.fill(l):typeof l=="boolean"&&g.values.fill(+l);for(let v=0;v<a;v++){const x=[];let b=0;for(let w=0;w<s;w++){const S=d[v*s+w];x.push(S),b+=S*o[w]}if(b<0||b>=r/i)throw new Error(`Invalid indices: ${x} does not index into ${n}`);for(let w=0;w<i;w++)c?g.values[b*i+w]+=p[v*i+w]:g.values[b*i+w]=t.rank===0?p[0]:p[v*i+w]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vwt=za(e=>1/(1+Math.exp(-e))),v5=Ee(zp,e=>1/(1+Math.exp(-e))),bwt={kernelName:zp,backendName:"cpu",kernelFunc:v5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5(e,t,n,r,i){const a=sE(r,t,n),s=pt(n),o=Bt(r);if(a){const d=oE(t,o);return i==="string"?e.slice(d,d+s):e.subarray(d,d+s)}const l=i==="string"?Ss(e):e,c=ie(r,i,l),h=ie(n,i);for(let d=0;d<h.size;++d){const p=h.indexToLoc(d),g=p.map((v,x)=>v+t[x]);h.set(c.get(...g),...p)}return i==="string"?Sq(h.values):h.values}function Ll(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,size:s}=r;Mt(i,"slice");const[o,l]=w0(i,a,s);iE(i,o,l);const c=n.data.get(i.dataId).values,h=b5(c,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,h)}const xwt={kernelName:i0,backendName:"cpu",kernelFunc:Ll};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5(e,t,n,r,i,a,s){const o=t[0],l=a[0],c=new Array(l),h=new Array(o),d=t[1];if(l===0){if(o!==0)throw new Error(uq(o));const b=un(n,0),w=un(i,0);return[b,[0,d],w,c,h]}let p=!0,g=0;const v=new Array(l).fill(0);for(let b=0;b<o;++b){const w=e[b*d];if(w<0)throw new Error(cq(b,w));if(w>=l)throw new Error(fq(b,w,l));++v[w],p=p&&w>=g,g=w}let x=!0;for(let b=0;b<l;++b){const w=v[b]===0;c[b]=w,x=x&&!w,v[b]=Math.max(v[b],1),b>0&&(v[b]+=v[b-1])}if(x&&p){const b=e,w=r;for(let S=0;S<o;++S)h[S]=S;return[b,[o,d],w,c,h]}else{const b=v[l-1],w=un(n,b*d),S=un(i,b),T=new Array(l).fill(0);for(let $=0;$<o;++$){const A=e[$*d],I=T[A],O=(A===0?0:v[A-1])+I;T[A]++;for(let N=0;N<d;++N)w[O*d+N]=e[$*d+N];S[O]=r[$],h[$]=O}for(let $=0;$<l;++$)if(T[$]===0){const I=$===0?0:v[$-1];w[I*d+0]=$;for(let O=1;O<d;++O)w[I*d+O]=0;S[I]=s}return[w,[b,d],S,c,h]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5(e,t,n,r,i){const a=pt(r),s=t[0],o=i.length,l=[];let c=1,h=-1;for(let b=0;b<o;++b){const w=i[b];if(w===-1){if(h!==-1)throw new Error(hq(h,b));h=b,l.push(1)}else{if(w<0)throw new Error(dq(b,w));c*=w,l.push(w)}}if(h!==-1){if(c<=0)throw new Error(pq());const b=Math.trunc(a/c);if(c*b!==a)throw new Error(mq(r,l));l[h]=b}if(pt(l)!==a)throw new Error(gq(r,l));const p=r.length,g=[];if(p>0){g[p-1]=1;for(let b=p-2;b>=0;--b)g[b]=g[b+1]*r[b+1]}const v=[];if(o>0){v[o-1]=1;for(let b=o-2;b>=0;--b)v[b]=v[b+1]*l[b+1]}const x=un(n,s*o);for(let b=0;b<s;++b){let w=0;for(let S=0;S<p;++S)w+=e[b*p+S]*g[S];for(let S=0;S<o;++S)x[b*o+S]=Math.trunc(w/v[S]),w%=v[S]}return[x,[s,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tO(e,t,n,r,i,a=!1,s=0){const o=r.length,l=[t[0],e.length/t[0]],c=l[1],d=o>0?i[o-1]+1:0;if(d<0)throw new Error(fA());const p=t.slice();p[0]=d;const g=p.reduce((T,$)=>T*$,1),v=un(n,g);if(o===0)return d>0&&v.fill(s),[v,p];if(d<=0)throw new Error(fA());let x=0,b=1,w=0,S=i[x];for(;;){let T=0;if(b<o){if(T=i[b],S===T){++b;continue}if(S>=T)throw new Error(yq())}if(S<0||S>=d)throw new Error(vq(S,d));S>w&&v.fill(s,w*c,S*c);for(let $=x;$<b;++$){const A=r[$];if(A<0||A>=l[0])throw new Error(bq($,r[$],l[0]));for(let I=0;I<c;I++)v[S*c+I]+=e[A*c+I]}if(a)for(let $=0;$<c;$++)v[S*c+$]/=b-x;if(x=b,++b,w=S+1,S=T,b>o)break}return w<d&&v.fill(s,w*c,d*c),[v,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wwt=za(e=>Math.sqrt(e)),Swt=Ee(Up,e=>Math.sqrt(e)),Cwt={kernelName:Up,backendName:"cpu",kernelFunc:Swt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S5=pn((e,t)=>{const n=e-t;return n*n}),Twt=On(Vp,S5),$wt={kernelName:Vp,backendName:"cpu",kernelFunc:Twt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5=za((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)}),Awt=Mo(bI,C5),kwt={kernelName:bI,backendName:"cpu",kernelFunc:Awt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5(e,t,n,r){const i=ie(e,t.dtype);for(let a=0;a<i.size;a++){const s=i.indexToLoc(a),o=new Array(s.length);for(let l=0;l<o.length;l++)o[l]=s[l]*n[l]+r[l];i.set(t.get(...o),...s)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iwt{constructor(t,n,r,i,a,s){this.separator=co(t),this.nGramWidths=n,this.leftPad=co(r),this.rightPad=co(i),this.padWidth=a,this.preserveShort=s}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){const r=this.getPadWidth(n);return Math.max(0,t+2*r-n+1)}createNGrams(t,n,r,i,a,s){for(let o=0;o<a;++o){const l=this.getPadWidth(s),c=Math.max(0,l-o),h=Math.max(0,l-(a-(o+1))),d=s-(c+h),p=n+(c>0?0:o-l);let g=0;g+=c*this.leftPad.length;for(let S=0;S<d;++S)g+=t[p+S].length;g+=h*this.rightPad.length;const v=c+h+d-1;g+=v*this.separator.length,r[i+o]=new Uint8Array(g);const x=r[i+o];let b=0;const w=S=>S.forEach(T=>x[b++]=T);for(let S=0;S<c;++S)w(this.leftPad),w(this.separator);for(let S=0;S<d-1;++S)w(t[p+S]),w(this.separator);if(d>0){w(t[p+d-1]);for(let S=0;S<h;++S)w(this.separator),w(this.rightPad)}else{for(let S=0;S<h-1;++S)w(this.rightPad),w(this.separator);w(this.rightPad)}}}compute(t,n){const r=t.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let h=n[c]>=l;if(h=h&&n[c]<=r,!h)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const a=i-1,s=un("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=a;++c)s[c]=0;return[l,s]}s[0]=0;for(let l=1;l<=a;++l){const c=n[l]-n[l-1];let h=0;this.nGramWidths.forEach(d=>{h+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&h===0&&(h=1),s[l]=s[l-1]+h}const o=new Array(s[a]);for(let l=0;l<a;++l){const c=n[l];let h=s[l];if(this.nGramWidths.forEach(d=>{const p=n[l+1]-n[l],g=this.getNumNGrams(p,d);this.createNGrams(t,c,o,h,g,d),h+=g}),this.preserveShort&&h===s[l]){const d=n[l+1]-n[l];if(d===0)continue;const p=d+2*this.padWidth;this.createNGrams(t,c,o,h,1,p)}}return[o,s]}}function $5(e,t,n,r,i,a,s,o){return new Iwt(n,r,i,a,s,o).compute(e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ewt(e,t,n,r){if(!e.length)return;if(t.length===0){for(let a=0;a<e.length;++a)r.push(e.subarray(a,a+1));return}if(t.length===1){const a=t[0];let s=e.indexOf(a);for(;s!==-1;){const o=e.subarray(0,s);(!n||o.length!==0)&&r.push(o),e=e.subarray(s+1),s=e.indexOf(a)}(!n||e.length!==0)&&r.push(e);return}let i=0;for(let a=0;a<e.length+1;a++)if(a===e.length||t.indexOf(e[a])!==-1){const s=e.subarray(i,a);(!n||s.length!==0)&&r.push(s),i=a+1}}function A5(e,t,n){const r=e.length,i=[];let a=0,s=0;const o=new Array(r);for(let p=0;p<r;++p){const g=i.length;Ewt(e[p],t,n,i);const v=i.length-g;o[p]=v,a+=v,s=Math.max(s,v)}const l=un("int32",a*2),c=new Array(a),h=[r,s];let d=0;for(let p=0;p<r;++p)for(let g=0;g<o[p];++g)l[d*2]=p,l[d*2+1]=g,c[d]=i[d],++d;return[l,c,h]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5(e,t){const n=un("int32",e.length);for(let r=0;r<e.length;++r)n[r]=oht(e[r]).modulo(t).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I5=pn((e,t)=>e-t),Owt=YE((e,t,n,r)=>({real:e-n,imag:t-r})),eO=On(Wp,I5,Owt),Nwt={kernelName:Wp,backendName:"cpu",kernelFunc:eO};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E5(e,t){const n=new Array(e.rank);for(let i=0;i<n.length;i++)n[i]=e.shape[i]*t[i];const r=ie(n,e.dtype);for(let i=0;i<r.values.length;++i){const a=r.indexToLoc(i),s=new Array(e.rank);for(let l=0;l<s.length;l++)s[l]=a[l]%e.shape[l];const o=e.locToIndex(s);r.values[i]=e.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uh=(e,t)=>{const n=t.value-e.value;return n===0?e.index-t.index:n};function O5(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=t-n+1,c=Math.log(o),h=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*h*(o-h)/o)*Math.sign(l-o/2),p=Math.max(n,Math.floor(t-l*h/o+d)),g=Math.min(r,Math.floor(t+(o-l)*h/o+d));O5(e,t,p,g)}const i=e[t];let a=n,s=r;for(Xu(e,n,t),Uh(e[r],i)>0&&Xu(e,n,r);a<s;){for(Xu(e,a,s),a++,s--;Uh(e[a],i)<0;)a=a+1;for(;Uh(e[s],i)>0;)s=s-1}Uh(e[n],i)===0?Xu(e,n,s):(s=s+1,Xu(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function N5(e,t,n,r,i){const a=t[t.length-1],[s,o]=[e.length/a,a],l=sr(n,s*r),c=sr("int32",s*r);for(let d=0;d<s;d++){const p=d*o,g=e.subarray(p,p+o);let v=new Array(g.length);g.forEach((S,T)=>v[T]={value:S,index:T}),r<v.length&&(O5(v,r),v=v.slice(0,r)),i&&v.sort(Uh);const x=d*r,b=l.subarray(x,x+r),w=c.subarray(x,x+r);for(let S=0;S<r;S++)b[S]=v[S].value,w[S]=v[S].index}const h=t.slice();return h[h.length-1]=r,[ie(h,n,l),ie(h,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5(e,t,n,r){const i=ae(t,n)[0],a=[1,n[0],1];for(let v=0;v<i;v++)a[0]*=n[v];a[1]=n[i];for(let v=i+1;v<n.length;v++)a[2]*=n[v];const s=new Map,o=new Int32Array(n[i]),l=new Xn(a,r,e),c=[],h=a[0]===1&&a[2]===1;for(let v=0;v<n[i];v++){let x;if(h)x=e[v].toString();else{const w=[];for(let S=0;S<a[0];S++)for(let T=0;T<a[2];T++)w.push(l.get(S,v,T));x=w.join(",")}const b=s.get(x);if(b!=null)o[v]=b;else{const w=s.size;s.set(x,w),o[v]=w,c.push(v)}}const d=a.slice();d[1]=s.size;const p=new Xn(d,r);c.forEach((v,x)=>{for(let b=0;b<a[0];b++)for(let w=0;w<a[2];w++)p.set(l.get(b,v,w),b,x,w)});const g=n.slice();return g[i]=d[1],{outputValues:p.values,outputShape:g,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _wt=Object.freeze(Object.defineProperty({__proto__:null,addImpl:j6,bincountImpl:ZE,bincountReduceImpl:U6,bitwiseAndImpl:V6,castImpl:z6,ceilImpl:W6,concatImpl:G6,equalImpl:q6,expImpl:X6,expm1Impl:Y6,floorDivImpl:Q6,floorImpl:Z6,gatherNdImpl:J6,gatherV2Impl:t5,greaterEqualImpl:n5,greaterImpl:e5,lessEqualImpl:i5,lessImpl:r5,linSpaceImpl:a5,logImpl:s5,maxImpl:o5,maximumImpl:l5,minimumImpl:u5,multiplyImpl:QE,negImpl:c5,notEqualImpl:f5,prodImpl:h5,raggedGatherImpl:d5,raggedRangeImpl:p5,raggedTensorToTensorImpl:m5,rangeImpl:g5,rsqrtImpl:y5,scatterImpl:ml,sigmoidImpl:vwt,simpleAbsImpl:B6,sliceImpl:b5,sparseFillEmptyRowsImpl:x5,sparseReshapeImpl:w5,sparseSegmentReductionImpl:tO,sqrtImpl:wwt,squaredDifferenceImpl:S5,staticRegexReplaceImpl:C5,stridedSliceImpl:T5,stringNGramsImpl:$5,stringSplitImpl:A5,stringToHashBucketFastImpl:k5,subImpl:I5,tileImpl:E5,topKImpl:N5,transposeImpl:JE,uniqueImpl:_5},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */QW("cpu",()=>new P0,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5=Ee(dp,e=>e>=0?e:Math.exp(e)-1),Rwt={kernelName:dp,backendName:"cpu",kernelFunc:R5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D5(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:a}=r;Mt([i],"leakyRelu");const s=pt(i.shape),o=n.data.get(i.dataId).values,l=sr("float32",s);for(let c=0;c<o.length;c++)l[c]=o[c]<0?a*o[c]:o[c];return n.makeTensorInfo(i.shape,"float32",l)}const Dwt={kernelName:_b,backendName:"cpu",kernelFunc:D5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mwt=pn((e,t)=>e<0?t*e:e);function M5(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t;Mt([r,i],"prelu");const a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,[o,l]=Mwt(r.shape,i.shape,a,s,"float32");return n.makeTensorInfo(l,"float32",o)}const Pwt={kernelName:Zb,backendName:"cpu",kernelFunc:M5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P5=Ee(_p,e=>Math.max(0,e)),Fwt={kernelName:_p,backendName:"cpu",kernelFunc:P5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F5=Ee(Rp,e=>Math.min(Math.max(0,e),6)),Lwt={kernelName:Rp,backendName:"cpu",kernelFunc:F5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ev(e,t,n,r,i){if(n==="linear")return La({inputs:{x:t},backend:e});if(n==="relu")return P5({inputs:{x:t},backend:e});if(n==="elu")return R5({inputs:{x:t},backend:e});if(n==="relu6")return F5({inputs:{x:t},backend:e});if(n==="prelu")return M5({inputs:{x:t,alpha:r},backend:e});if(n==="leakyrelu")return D5({inputs:{x:t},backend:e,attrs:{alpha:i}});if(n==="sigmoid")return v5({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ve(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:a}=r,s=pt(i.shape),o=oW(a,s),l=pt(o);V(s===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){const h=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;h.shape=o,d.shape=o}return{dataId:i.dataId,shape:o,dtype:i.dtype}}const Bwt={kernelName:Jb,backendName:"cpu",kernelFunc:Ve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L5(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:a}=t,{transposeA:s,transposeB:o}=r;Mt([i,a],"matMul");const l=i.shape.length,c=a.shape.length,h=s?i.shape[l-2]:i.shape[l-1],d=o?a.shape[c-1]:a.shape[c-2],p=s?i.shape[l-1]:i.shape[l-2],g=o?a.shape[c-2]:a.shape[c-1],v=i.shape.slice(0,-2),x=a.shape.slice(0,-2),b=pt(v),w=pt(x),T=Jt(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([p,g]);V(h===d,()=>`Error in matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${s} and transposeB=${o} must match.`);const $=s?[b,h,p]:[b,p,h],A=o?[w,g,d]:[w,d,g],I=Ve({inputs:{x:i},backend:n,attrs:{shape:$}}),O=Ve({inputs:{x:a},backend:n,attrs:{shape:A}}),N=s?I.shape[1]:I.shape[2],_=s?I.shape[2]:I.shape[1],R=o?O.shape[1]:O.shape[2],E=Math.max(b,w),F=n.data.get(I.dataId).values,M=n.data.get(O.dataId).values,B=Bt(I.shape),j=Bt(O.shape),[P,U,W]=s?[B[0],1,B[1]]:[B[0],B[1],1],[q,L,G]=o?[1,j[1],j[0]]:[j[1],1,j[0]],H=_*R,Y=ie([E,_,R],I.dtype),ot=Y.values,ht=n.blockSize;for(let yt=0;yt<E;yt++){const Nt=yt%b,At=yt%w;for(let mt=0;mt<_;mt+=ht){const kt=Math.min(mt+ht,_);for(let It=0;It<R;It+=ht){const gt=Math.min(It+ht,R);for(let Vt=0;Vt<N;Vt+=ht){const Lt=Math.min(Vt+ht,N);for(let Zt=mt;Zt<kt;Zt++)for(let Wt=It;Wt<gt;Wt++){let Ht=0;for(let de=Vt;de<Lt;de++){const Nn=F[Nt*P+Zt*U+de*W],We=M[de*q+Wt*L+At*G];Ht+=Nn*We}ot[yt*H+(Zt*R+Wt)]+=Ht}}}}}return n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(O),n.makeTensorInfo(T,Y.dtype,Y.values)}const zwt={kernelName:yb,backendName:"cpu",kernelFunc:L5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jwt(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:a,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:h,leakyreluAlpha:d}=r;let p,g,v;const x=[];p=L5({inputs:{a:i,b:a},attrs:{transposeA:l,transposeB:c},backend:n}),s&&(g=Gc({inputs:{a:p,b:s},backend:n}),x.push(p),p=g),h&&(v=Ev(n,p,h,o,d),x.push(p),p=v);for(const w of x)n.disposeIntermediateTensorInfo(w);return p}const Uwt={kernelName:uv,backendName:"cpu",kernelFunc:jwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vwt=Ee(tp,e=>Math.acos(e)),Wwt={kernelName:tp,backendName:"cpu",kernelFunc:Vwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gwt=Ee(ep,e=>Math.acosh(e)),qwt={kernelName:ep,backendName:"cpu",kernelFunc:Gwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hwt(e){const{inputs:t,backend:n}=e,r=t;Mt(t,"addN");const i=r.map(o=>n.data.get(o.dataId).values),a=ie(r[0].shape,r[0].dtype),s=a.values;for(let o=0;o<r.length;o++){const l=i[o];for(let c=0;c<s.length;c++)s[c]+=l[c]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}const Xwt={kernelName:Lk,backendName:"cpu",kernelFunc:Hwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;Mt(i,"all");const o=ae(a,i.shape);let l=o;const c=en(l,i.shape.length);let h=i;c!=null&&(h=Mr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=hn(l.length,i.shape.length)),Zn("all",l,h.shape.length);const[d,p]=jn(h.shape,l),g=pt(p),v=or(pt(d),h.dtype),x=n.data.get(h.dataId).values;for(let w=0;w<v.length;++w){const S=w*g;let T=x[S];for(let $=0;$<g;++$){const A=x[S+$];T=T&&A}v[w]=T}c!=null&&n.disposeIntermediateTensorInfo(h);const b=n.makeTensorInfo(d,h.dtype,v);if(s){const w=bn(d,o),S=Ve({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const Ywt={kernelName:Bk,backendName:"cpu",kernelFunc:Kwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;Mt(i,"any");const o=ae(a,i.shape);let l=o;const c=en(l,i.shape.length);let h=i;c!=null&&(h=Mr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=hn(l.length,i.shape.length)),Zn("any",l,h.shape.length);const[d,p]=jn(h.shape,l),g=pt(p),v=or(pt(d),h.dtype),x=n.data.get(h.dataId).values;for(let w=0;w<v.length;++w){const S=w*g;let T=x[S];for(let $=0;$<g;++$){const A=x[S+$];T=T||A}v[w]=T}c!=null&&n.disposeIntermediateTensorInfo(h);const b=n.makeTensorInfo(d,h.dtype,v);if(s){const w=bn(d,o),S=Ve({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const Qwt={kernelName:zk,backendName:"cpu",kernelFunc:Zwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jwt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;Mt(i,"argMax");let s=ae(a,i.shape);const o=en(s,i.shape.length);let l=i;const c=[];o!=null&&(l=Mr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),s=hn(s.length,l.shape.length)),s=[s[0]],Zn("argMax",s,l.shape.length);const[h,d]=jn(l.shape,s),p=pt(h),g=or(p,"int32"),v=pt(d),x=n.data.get(l.dataId).values;for(let b=0;b<g.length;++b){const w=b*v;let S=x[w],T=0;for(let $=0;$<v;++$){const A=x[w+$];A>S&&(S=A,T=$)}g[b]=T}return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(h,"int32",g)}const tSt={kernelName:db,backendName:"cpu",kernelFunc:Jwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eSt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;Mt(i,"argMin");let s=ae(a,i.shape);const o=en(s,i.shape.length);let l=i;const c=[];o!=null&&(l=Mr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),s=hn(s.length,l.shape.length)),s=[s[0]],Zn("argMin",s,l.shape.length);const[h,d]=jn(l.shape,s),p=pt(h),g=or(p,"int32"),v=pt(d),x=n.data.get(l.dataId).values;for(let b=0;b<g.length;++b){const w=b*v;let S=x[w],T=0;for(let $=0;$<v;++$){const A=x[w+$];A<S&&(S=A,T=$)}g[b]=T}return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(h,"int32",g)}const nSt={kernelName:pb,backendName:"cpu",kernelFunc:eSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rSt=Ee(np,e=>Math.asin(e)),iSt={kernelName:np,backendName:"cpu",kernelFunc:rSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aSt=Ee(rp,e=>Math.asinh(e)),sSt={kernelName:rp,backendName:"cpu",kernelFunc:aSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oSt=Ee(ip,e=>Math.atan(e)),lSt={kernelName:ip,backendName:"cpu",kernelFunc:oSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uSt=pn((e,t)=>Math.atan2(e,t)),cSt=On(sp,uSt),fSt={kernelName:sp,backendName:"cpu",kernelFunc:cSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hSt=Ee(ap,e=>Math.atanh(e)),dSt={kernelName:ap,backendName:"cpu",kernelFunc:hSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nO(e,t,n,r,i,a){const s=i.strideHeight,o=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,h=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,g=i.padInfo.left,v=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=ie(i.outShape,n),b=x.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3],S=i.outShape[2]*i.outShape[3],T=i.outShape[3];for(let $=0;$<i.batchSize;++$){const A=$*w,I=$*r[0];for(let O=0;O<i.inChannels;++O)for(let N=0;N<i.outHeight;++N){const _=N*s-p,R=Math.max(0,_),E=Math.min(i.inHeight,h+_),F=A+N*S;for(let M=0;M<i.outWidth;++M){const B=M*o-g,j=Math.max(0,B),P=Math.min(i.inWidth,d+B);let U=v,W=0,q=0;for(let G=R;G<E;G+=l){const H=I+G*r[1];for(let Y=j;Y<P;Y+=c){const ot=H+Y*r[2],ht=e[ot+O];a==="max"&&ht>U?U=ht:a==="avg"&&(W+=ht,q++)}if(isNaN(U))break}const L=F+M*T+O;b[L]=a==="avg"?W/q:U}}}return x}function B5(e,t,n,r,i=!1,a=!1){const s=ie(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,h=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=r.padInfo.top,v=r.padInfo.left,x=ie(t,n,e);for(let b=0;b<r.batchSize;++b)for(let w=0;w<r.inChannels;++w)for(let S=0;S<r.outHeight;++S){const T=S*o-g;let $=T;for(;$<0;)$+=c;const A=Math.min(r.inHeight,d+T);for(let I=0;I<r.outWidth;++I){const O=I*l-v;let N=O;for(;N<0;)N+=h;const _=Math.min(r.inWidth,p+O);let R=Number.NEGATIVE_INFINITY,E=-1;for(let F=$;F<A;F+=c){const M=F-T;for(let B=N;B<_;B+=h){const j=B-O,P=x.get(b,F,B,w);P>R&&(R=P,i?E=a?((b*r.inHeight+F)*r.inWidth+B)*r.inChannels+w:(F*r.inWidth+B)*r.inChannels+w:E=M*p+j)}}s.set(E,b,S,I,w)}}return s}function z5(e,t,n,r,i,a){const s=i.strideDepth,o=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,h=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,g=i.effectiveFilterHeight,v=i.effectiveFilterWidth,x=i.padInfo.front,b=i.padInfo.top,w=i.padInfo.left,S=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,T=ie(i.outShape,n),$=T.values,A=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],I=i.outShape[2]*i.outShape[3]*i.outShape[4],O=i.outShape[3]*i.outShape[4],N=i.outShape[4];for(let _=0;_<i.batchSize;++_){const R=_*A,E=_*r[0];for(let F=0;F<i.inChannels;++F)for(let M=0;M<i.outDepth;++M){const B=M*s-x;let j=B;for(;j<0;)j+=c;const P=Math.min(i.inDepth,p+B),U=R+M*I;for(let W=0;W<i.outHeight;++W){const q=W*o-b;let L=q;for(;L<0;)L+=h;const G=Math.min(i.inHeight,g+q),H=U+W*O;for(let Y=0;Y<i.outWidth;++Y){const ot=Y*l-w;let ht=ot;for(;ht<0;)ht+=d;const yt=Math.min(i.inWidth,v+ot),Nt=H+Y*N;let At=S,mt=0,kt=0;for(let gt=j;gt<P;gt+=c){const Vt=E+gt*r[1];for(let Lt=L;Lt<G;Lt+=h){const Zt=Vt+Lt*r[2];for(let Wt=ht;Wt<yt;Wt+=d){const Ht=Zt+Wt*r[3],de=e[Ht+F];if(a==="max"&&de>At?At=de:a==="avg"&&(mt+=de,kt++),isNaN(At))break}if(isNaN(At))break}if(isNaN(At))break}const It=Nt+F;$[It]=a==="avg"?mt/Math.max(kt,1):At}}}}return T}function pSt(e,t){const n=ie(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,h=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,g=t.padInfo.top,v=t.padInfo.left;for(let x=0;x<t.batchSize;++x)for(let b=0;b<t.inChannels;++b)for(let w=0;w<t.outDepth;++w){const S=w*r-p;let T=S;for(;T<0;)T+=s;const $=Math.min(t.inDepth,c+S);for(let A=0;A<t.outHeight;++A){const I=A*i-g;let O=I;for(;O<0;)O+=o;const N=Math.min(t.inHeight,h+I);for(let _=0;_<t.outWidth;++_){const R=_*a-v;let E=R;for(;E<0;)E+=l;const F=Math.min(t.inWidth,d+R);let M=Number.NEGATIVE_INFINITY,B=-1;for(let j=T;j<$;j+=s){const P=j-S;for(let U=O;U<N;U+=o){const W=U-I;for(let q=E;q<F;q+=l){const L=q-R,G=e.get(x,j,U,q,b);G>=M&&(M=G,B=P*h*d+W*h+L)}}}n.set(B,x,w,A,_,b)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mSt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Mt(i,"avgPool");const{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r,c=1;V(ur(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const h=zi(i.shape,a,s,c,o,l);let d;if(h.filterWidth===1&&h.filterHeight===1&&Te(h.inShape,h.outShape))d=La({inputs:{x:i},backend:n});else{const p=n.data.get(i.dataId).values,g=Bt(i.shape),v=nO(p,i.shape,i.dtype,g,h,"avg");d=n.makeTensorInfo(h.outShape,i.dtype,v.values)}return d}const gSt={kernelName:mb,backendName:"cpu",kernelFunc:mSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;Mt(i,"avgPool3d");const h=ks(i.shape,a,s,1,o,l,c),d=n.data.get(i.dataId).values,p=z5(d,i.shape,i.dtype,Bt(i.shape),h,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const vSt={kernelName:gb,backendName:"cpu",kernelFunc:ySt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bSt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;Mt([i,a],"avgPool3DGrad");const h=ks(a.shape,s,o,1,l,c),d=h.strideDepth,p=h.strideHeight,g=h.strideWidth,v=h.filterDepth,x=h.filterHeight,b=h.filterWidth,w=h.dilationDepth,S=h.dilationHeight,T=h.dilationWidth,$=h.effectiveFilterDepth,A=h.effectiveFilterHeight,I=h.effectiveFilterWidth,O=$-1-h.padInfo.front,N=I-1-h.padInfo.left,_=A-1-h.padInfo.top,R=ie(a.shape,"float32"),E=1/(v*x*b),F=n.bufferSync(i);for(let M=0;M<h.batchSize;++M)for(let B=0;B<h.inChannels;++B)for(let j=0;j<h.inDepth;++j)for(let P=0;P<h.inHeight;++P)for(let U=0;U<h.inWidth;++U){const W=j-O,q=P-_,L=U-N;let G=0;for(let H=0;H<$;H+=w){const Y=(W+H)/d;if(!(Y<0||Y>=h.outDepth||Math.floor(Y)!==Y))for(let ot=0;ot<A;ot+=S){const ht=(q+ot)/p;if(!(ht<0||ht>=h.outHeight||Math.floor(ht)!==ht))for(let yt=0;yt<I;yt+=T){const Nt=(L+yt)/g;if(Nt<0||Nt>=h.outWidth||Math.floor(Nt)!==Nt)continue;const At=F.get(M,Y,ht,Nt,B);G+=At}}}R.set(G*E,M,j,P,U,B)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const xSt={kernelName:Uk,backendName:"cpu",kernelFunc:bSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,s=a;Mt([i,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,h=zi(s.shape,o,l,1,c),d=h.strideHeight,p=h.strideWidth,g=h.filterHeight,v=h.filterWidth,x=h.dilationHeight,b=h.dilationWidth,w=h.effectiveFilterHeight,S=h.effectiveFilterWidth,T=S-1-h.padInfo.left,$=w-1-h.padInfo.top,A=ie(s.shape,"float32"),I=1/(g*v),O=n.data.get(i.dataId).values,N=ie(i.shape,"float32",O);for(let _=0;_<h.batchSize;++_)for(let R=0;R<h.inChannels;++R)for(let E=0;E<h.inHeight;++E)for(let F=0;F<h.inWidth;++F){const M=E-$,B=F-T;let j=0;for(let P=0;P<w;P+=x){const U=(M+P)/d;if(!(U<0||U>=h.outHeight||Math.floor(U)!==U))for(let W=0;W<S;W+=b){const q=(B+W)/p;if(q<0||q>=h.outWidth||Math.floor(q)!==q)continue;const L=N.get(_,U,q,R);j+=L}}A.set(j*I,_,E,F,R)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const SSt={kernelName:jk,backendName:"cpu",kernelFunc:wSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CSt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,scale:a,offset:s,mean:o,variance:l}=t;V(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Mt([i,o,l,a,s],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const h=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,p=n.data.get(l.dataId).values,g=a?n.data.get(a.dataId).values:new Float32Array([1]),v=s?n.data.get(s.dataId).values:new Float32Array([0]),x=new Float32Array(h.length),b=v.length,w=g.length,S=p.length,T=d.length;let $=0,A=0,I=0,O=0;for(let N=0;N<h.length;++N)x[N]=v[$++]+(h[N]-d[A++])*g[I++]/Math.sqrt(p[O++]+c),$>=b&&($=0),A>=T&&(A=0),I>=w&&(I=0),O>=S&&(O=0);return n.makeTensorInfo(i.shape,i.dtype,x)}const TSt={kernelName:Eb,backendName:"cpu",kernelFunc:CSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $St(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,crops:s}=r;Mt([i],"batchToSpaceND");const o=a.reduce((w,S)=>w*S),l=tm(i.shape,a,o),c=em(l.length,a.length),h=nm(i.shape,a,o),d=hE(s,a.length),p=dE(h,s,a.length),g=Ve({inputs:{x:i},backend:n,attrs:{shape:l}}),v=Mr({inputs:{x:g},backend:n,attrs:{perm:c}}),x=Ve({inputs:{x:v},backend:n,attrs:{shape:h}}),b=Ll({inputs:{x},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),b}const ASt={kernelName:vb,backendName:"cpu",kernelFunc:$St};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kSt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:s}=r,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,c=ZE(o,l,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,c)}const ISt={kernelName:Vk,backendName:"cpu",kernelFunc:kSt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ESt(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,o=Jt(Array.from(a),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const OSt={kernelName:dW,backendName:"cpu",kernelFunc:ESt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NSt=Ee(up,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),_St={kernelName:up,backendName:"cpu",kernelFunc:NSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSt=e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(pt(t.shape)),i=n.data.get(t.dataId),a=i.complexTensorInfos.real,s=i.complexTensorInfos.imag,o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values;for(let c=0;c<o.length;c++){const h=o[c],d=l[c];r[c]=Math.hypot(h,d)}return n.makeOutput(r,t.shape,"float32")},DSt={kernelName:bb,backendName:"cpu",kernelFunc:RSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qc(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const MSt={kernelName:oI,backendName:"cpu",kernelFunc:qc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hc(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,a=ae(i,t[0].shape)[0],s=t.map(x=>x.shape);uE(s,a);let o=Ea(t.map(x=>x.shape),a);if(pt(o)===0)return n.makeTensorInfo(o,t[0].dtype,[]);const l=t.filter(x=>pt(x.shape)>0);if(l.length===1)return La({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const x=l.map($=>Fl({inputs:{input:$},backend:n})),b=l.map($=>qc({inputs:{input:$},backend:n})),w=Hc({inputs:x,backend:n,attrs:{axis:a}}),S=Hc({inputs:b,backend:n,attrs:{axis:a}}),T=qr({inputs:{real:w,imag:S},backend:n});return x.forEach($=>n.disposeIntermediateTensorInfo($)),b.forEach($=>n.disposeIntermediateTensorInfo($)),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),T}const c=l.map(x=>{const w=[-1,pt(x.shape.slice(a))];return Ve({inputs:{x},backend:n,attrs:{shape:w}})}),h=c.map(x=>({vals:n.data.get(x.dataId).values,shape:x.shape}));o=Ea(c.map(x=>x.shape),1);const d=c[0].shape[0]===1,p=G6(h,o,t[0].dtype,d),g=Ea(l.map(x=>x.shape),a),v=n.makeTensorInfo(g,t[0].dtype,p);return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const PSt={kernelName:xb,backendName:"cpu",kernelFunc:Hc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j5(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:h}=r;Mt([i,a],"conv2d");const d=Is(l),p=Yn(i.shape,a.shape,s,c,o,h,!1,d),g=p.filterHeight,v=p.filterWidth,x=p.dilationHeight,b=p.dilationWidth,w=p.padInfo.left,S=p.padInfo.top,T=p.dataFormat==="channelsLast",$=new Xn(p.outShape,i.dtype),A=Bt(i.shape),I=Bt(a.shape),O=A[0],N=T?A[1]:A[2],_=T?A[2]:1,R=T?1:A[1],E=$.strides[0],F=T?$.strides[1]:$.strides[2],M=T?$.strides[2]:1,B=T?1:$.strides[1],j=n.data.get(i.dataId).values,P=n.data.get(a.dataId).values,U=$.values;for(let W=0;W<p.batchSize;++W){const q=W*O,L=W*E;for(let G=0;G<p.outHeight;++G){const H=L+G*F,Y=G*p.strideHeight-S;for(let ot=0;ot<g;++ot){const ht=Y+ot*x;if(ht<0||ht>=p.inHeight)continue;const yt=ot*I[0],Nt=q+ht*N;for(let At=0;At<p.outWidth;++At){const mt=H+At*M,kt=At*p.strideWidth-w;for(let It=0;It<v;++It){const gt=kt+It*b;if(gt<0||gt>=p.inWidth)continue;const Vt=yt+It*I[1],Lt=Nt+gt*_;let Zt=Vt;for(let Wt=0;Wt<p.inChannels;++Wt){const Ht=j[Lt+Wt*R];for(let de=0;de<p.outChannels;++de)U[mt+de*B]+=Ht*P[Zt+de];Zt+=p.outChannels}}}}}}return n.makeTensorInfo($.shape,$.dtype,U)}const FSt={kernelName:wb,backendName:"cpu",kernelFunc:j5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:h}=r;Mt([i,a],"conv2dBackpropFilter");const d=Is(l),p=Yn(i.shape,h,s,1,o,c,!1,d),{strideHeight:g,strideWidth:v,filterHeight:x,filterWidth:b}=p,w=p.dataFormat==="channelsLast",S=new Xn(p.filterShape,"float32"),T=p.padInfo.left,$=p.padInfo.top,A=n.data.get(i.dataId).values,I=n.data.get(a.dataId).values,O=new Xn(i.shape,i.dtype,A),N=new Xn(a.shape,a.dtype,I);for(let _=0;_<x;++_){const R=Math.max(0,Math.ceil(($-_)/g)),E=Math.min(p.outHeight,(p.inHeight+$-_)/g);for(let F=0;F<b;++F){const M=Math.max(0,Math.ceil((T-F)/v)),B=Math.min(p.outWidth,(p.inWidth+T-F)/v);for(let j=0;j<p.inChannels;++j)for(let P=0;P<p.outChannels;++P){let U=0;for(let W=0;W<p.batchSize;++W)for(let q=R;q<E;++q){const L=_+q*g-$;for(let G=M;G<B;++G){const H=F+G*v-T;w?U+=O.get(W,L,H,j)*N.get(W,q,G,P):U+=O.get(W,j,L,H)*N.get(W,P,q,G)}}S.set(U,_,F,j,P)}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const BSt={kernelName:qk,backendName:"cpu",kernelFunc:LSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:h}=r;Mt([i,a],"conv2dBackpropInput");const d=Bt(a.shape),p=Bt(i.shape);let g=Is(c);const v=Yn(s,a.shape,o,1,l,h,!1,g),x=new Xn(v.inShape,"float32"),b=x.values,w=n.data.get(i.dataId).values,S=n.data.get(a.dataId).values,[T,$,A]=d,{batchSize:I,filterHeight:O,filterWidth:N,inChannels:_,inHeight:R,inWidth:E,outChannels:F,outHeight:M,outWidth:B,strideHeight:j,strideWidth:P}=v;g=v.dataFormat;const U=O-1-v.padInfo.top,W=N-1-v.padInfo.left,q=g==="channelsLast",L=x.strides[0],G=q?x.strides[1]:x.strides[2],H=q?x.strides[2]:1,Y=q?1:x.strides[1],ot=p[0],ht=q?p[1]:p[2],yt=q?p[2]:1,Nt=q?1:p[1];for(let At=0;At<I;++At)for(let mt=0;mt<_;++mt)for(let kt=0;kt<R;++kt){const It=kt-U,gt=Math.max(0,Math.ceil(It/j)),Vt=Math.min(M,(O+It)/j);for(let Lt=0;Lt<E;++Lt){const Zt=Lt-W,Wt=Math.max(0,Math.ceil(Zt/P)),Ht=Math.min(B,(N+Zt)/P);let de=0;for(let We=gt;We<Vt;++We){const mn=We*j-It;for(let nn=Wt;nn<Ht;++nn){const Fr=nn*P-Zt,hr=ot*At+ht*We+yt*nn,Lr=T*(O-1-mn)+$*(N-1-Fr)+A*mt;for(let Br=0;Br<F;++Br){const an=w[hr+Nt*Br],Jn=S[Lr+Br];de+=an*Jn}}}const Nn=L*At+G*kt+H*Lt+Y*mt;b[Nn]=de}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const jSt={kernelName:Sb,backendName:"cpu",kernelFunc:zSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function USt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l}=r;Mt([i,a],"conv3d");const c=Eo(i.shape,a.shape,s,l,o),{filterDepth:h,filterHeight:d,filterWidth:p,dilationDepth:g,dilationHeight:v,dilationWidth:x,padInfo:b}=c,w=b.front,S=b.left,T=b.top,$=new Xn(c.outShape,i.dtype),A=n.data.get(i.dataId).values,I=n.data.get(a.dataId).values,O=$.values,N=Bt(i.shape),_=Bt(a.shape);for(let R=0;R<c.batchSize;++R){const E=R*N[0],F=R*$.strides[0];for(let M=0;M<c.outDepth;++M){const B=F+M*$.strides[1],j=M*c.strideDepth-w;for(let P=0;P<h;++P){const U=j+P*g;if(U<0||U>=c.inDepth)continue;const W=P*_[0],q=E+U*N[1];for(let L=0;L<c.outHeight;++L){const G=B+L*$.strides[2],H=L*c.strideHeight-T;for(let Y=0;Y<d;++Y){const ot=H+Y*v;if(ot<0||ot>=c.inHeight)continue;const ht=W+Y*_[1],yt=q+ot*N[2];for(let Nt=0;Nt<c.outWidth;++Nt){const At=G+Nt*c.outChannels,mt=Nt*c.strideWidth-S;for(let kt=0;kt<p;++kt){const It=mt+kt*x;if(It<0||It>=c.inWidth)continue;const gt=ht+kt*_[2],Vt=yt+It*c.inChannels;let Lt=gt;for(let Zt=0;Zt<c.inChannels;++Zt){const Wt=A[Vt+Zt];for(let Ht=0;Ht<c.outChannels;++Ht)O[At+Ht]+=Wt*I[Lt+Ht];Lt+=c.outChannels}}}}}}}}return n.makeTensorInfo($.shape,$.dtype,$.values)}const VSt={kernelName:Cb,backendName:"cpu",kernelFunc:USt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WSt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,pad:o,filterShape:l}=r;Mt([i,a],"conv3dBackpropFilterV2");const c=Bt(i.shape),h=Bt(a.shape),d=Eo(i.shape,l,s,1,o),p=d.strideDepth,g=d.strideHeight,v=d.strideWidth,x=d.filterDepth,b=d.filterHeight,w=d.filterWidth,S=new Xn(d.filterShape,"float32"),T=S.values,[$,A,I,O]=S.strides,N=n.data.get(a.dataId).values,[_,R,E,F]=h,M=n.data.get(i.dataId).values,[B,j,P,U]=c,W=d.padInfo.front,q=d.padInfo.left,L=d.padInfo.top;for(let G=0;G<x;++G){const H=Math.max(0,Math.ceil((W-G)/p)),Y=Math.min(d.outDepth,(d.inDepth+W-G)/p),ot=G*$;for(let ht=0;ht<b;++ht){const yt=Math.max(0,Math.ceil((L-ht)/g)),Nt=Math.min(d.outHeight,(d.inHeight+L-ht)/g),At=ht*A+ot;for(let mt=0;mt<w;++mt){const kt=Math.max(0,Math.ceil((q-mt)/v)),It=Math.min(d.outWidth,(d.inWidth+q-mt)/v),gt=mt*I+At;for(let Vt=0;Vt<d.inChannels;++Vt){const Lt=Vt*O+gt;for(let Zt=0;Zt<d.outChannels;++Zt){let Wt=0;for(let Ht=0;Ht<d.batchSize;++Ht){const de=Ht*B,Nn=Ht*_;for(let We=H;We<Y;++We){const nn=(G+We*p-W)*j+de,Fr=We*R+Nn;for(let hr=yt;hr<Nt;++hr){const Br=(ht+hr*g-L)*P+nn,an=hr*E+Fr;for(let Jn=kt;Jn<It;++Jn){const Cf=(mt+Jn*v-q)*U+Br,Tf=Jn*F+an;Wt+=M[Cf+Vt]*N[Tf+Zt]}}}}T[Lt+Zt]=Wt}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const GSt={kernelName:Hk,backendName:"cpu",kernelFunc:WSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qSt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{pad:s,strides:o,inputShape:l}=r;Mt([i],"conv3dBackpropInputV2");const c=Bt(i.shape),h=Bt(a.shape),d=Eo(l,a.shape,o,1,s),p=new Xn(d.inShape,"float32"),g=p.values,[v,x,b,w]=p.strides,S=n.data.get(i.dataId).values,[T,$,A,I]=c,O=n.data.get(a.dataId).values,[N,_,R,E]=h,{batchSize:F,filterDepth:M,filterHeight:B,filterWidth:j,inChannels:P,inDepth:U,inHeight:W,inWidth:q,outChannels:L,outDepth:G,outHeight:H,outWidth:Y,strideDepth:ot,strideHeight:ht,strideWidth:yt}=d,Nt=M-1-d.padInfo.front,At=B-1-d.padInfo.top,mt=j-1-d.padInfo.left;for(let kt=0;kt<F;++kt)for(let It=0;It<P;++It)for(let gt=0;gt<U;++gt){const Vt=gt-Nt,Lt=Math.max(0,Math.ceil(Vt/ot)),Zt=Math.min(G,(M+Vt)/ot);for(let Wt=0;Wt<W;++Wt){const Ht=Wt-At,de=Math.max(0,Math.ceil(Ht/ht)),Nn=Math.min(H,(B+Ht)/ht);for(let We=0;We<q;++We){const mn=We-mt,nn=Math.max(0,Math.ceil(mn/yt)),Fr=Math.min(Y,(j+mn)/yt);let hr=0;for(let Lr=Lt;Lr<Zt;++Lr){const Br=Lr*ot-Vt;for(let an=de;an<Nn;++an){const Jn=an*ht-Ht;for(let _n=nn;_n<Fr;++_n){const Cf=_n*yt-mn,Tf=T*kt+$*Lr+A*an+I*_n,V0=N*(M-1-Br)+_*(B-1-Jn)+R*(j-1-Cf)+E*It;for(let ja=0;ja<L;++ja){const eu=S[Tf+ja],Ua=O[V0+ja];hr+=eu*Ua}}}}g[v*kt+x*gt+b*Wt+w*We+It]=hr}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const HSt={kernelName:Xk,backendName:"cpu",kernelFunc:qSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XSt=Ee(cp,e=>Math.cos(e)),KSt={kernelName:cp,backendName:"cpu",kernelFunc:XSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YSt=Ee(fp,e=>Math.cosh(e)),ZSt={kernelName:fp,backendName:"cpu",kernelFunc:YSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QSt(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:a,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:c}=r,[h,d,p,g]=i.shape,v=a.shape[0],[x,b]=o,w=ie([v,x,b,g],"float32"),S=n.data.get(a.dataId).values,T=n.data.get(s.dataId).values,$=n.data.get(i.dataId).values,A=Bt(i.shape),I=Bt(w.shape);for(let O=0;O<v;O++){const N=O*4,_=S[N],R=S[N+1],E=S[N+2],F=S[N+3],M=T[O];if(M>=h)continue;const B=x>1?(E-_)*(d-1)/(x-1):0,j=b>1?(F-R)*(p-1)/(b-1):0;for(let P=0;P<x;P++){const U=x>1?_*(d-1)+P*B:.5*(_+E)*(d-1);if(U<0||U>d-1){for(let W=0;W<b;W++)for(let q=0;q<g;q++){const L=q+W*I[2]+P*I[1]+O*I[0];w.values[L]=c}continue}if(l==="bilinear"){const W=Math.floor(U),q=Math.ceil(U),L=U-W;for(let G=0;G<b;G++){const H=b>1?R*(p-1)+G*j:.5*(R+F)*(p-1);if(H<0||H>p-1){for(let yt=0;yt<g;yt++){const Nt=yt+G*I[2]+P*I[1]+O*I[0];w.values[Nt]=c}continue}const Y=Math.floor(H),ot=Math.ceil(H),ht=H-Y;for(let yt=0;yt<g;yt++){let Nt=yt+Y*A[2]+W*A[1]+M*A[0];const At=$[Nt];Nt=yt+ot*A[2]+W*A[1]+M*A[0];const mt=$[Nt];Nt=yt+Y*A[2]+q*A[1]+M*A[0];const kt=$[Nt];Nt=yt+ot*A[2]+q*A[1]+M*A[0];const It=$[Nt],gt=At+(mt-At)*ht,Vt=kt+(It-kt)*ht;Nt=yt+G*I[2]+P*I[1]+O*I[0],w.values[Nt]=gt+(Vt-gt)*L}}}else for(let W=0;W<b;++W){const q=b>1?R*(p-1)+W*j:.5*(R+F)*(p-1);if(q<0||q>p-1){for(let H=0;H<g;H++){const Y=H+W*I[2]+P*I[1]+O*I[0];w.values[Y]=c}continue}const L=Math.round(q),G=Math.round(U);for(let H=0;H<g;H++){const Y=H+L*A[2]+G*A[1]+M*A[0],ot=H+W*I[2]+P*I[1]+O*I[0];w.values[ot]=$[Y]}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const JSt={kernelName:Yk,backendName:"cpu",kernelFunc:QSt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tCt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:s,reverse:o}=r;Mt(i,"cumprod");const l=en([a],i.shape.length);let c=i;l!=null&&(c=Mr({inputs:{x:i},backend:n,attrs:{perm:l}}));const h=hn(1,i.shape.length)[0];if(h!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${h}`);const d=Kr(c.dtype,"int32"),p=Mk(pt(c.shape),d),g=n.data.get(c.dataId).values,v=c.shape[c.shape.length-1],x=o?(w,S)=>w+v-S-1:(w,S)=>w+S;for(let w=0;w<g.length;w+=v)for(let S=0;S<v;S++){const T=x(w,S);if(S===0)p[T]=s?1:g[T];else{const $=x(w,S-1);p[T]=s?g[$]*p[$]:g[T]*p[$]}}const b=n.makeTensorInfo(c.shape,d,p);if(l!=null){const w=Oo(l),S=Mr({inputs:{x:b},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),S}return b}const eCt={kernelName:Kk,backendName:"cpu",kernelFunc:tCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:s,reverse:o}=r;Mt(i,"cumsum");const l=en([a],i.shape.length);let c=i;l!=null&&(c=Mr({inputs:{x:i},backend:n,attrs:{perm:l}}));const h=hn(1,i.shape.length)[0];if(h!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${h}`);const d=Kr(c.dtype,"int32"),p=or(pt(c.shape),d),g=n.data.get(c.dataId).values,v=c.shape[c.shape.length-1],x=o?(w,S)=>w+v-S-1:(w,S)=>w+S;for(let w=0;w<g.length;w+=v)for(let S=0;S<v;S++){const T=x(w,S);if(S===0)p[T]=s?0:g[T];else{const $=x(w,S-1);p[T]=s?g[$]+p[$]:g[T]+p[$]}}const b=n.makeTensorInfo(c.shape,d,p);if(l!=null){const w=Oo(l),S=Mr({inputs:{x:b},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(c),S}return b}const rCt={kernelName:Tb,backendName:"cpu",kernelFunc:nCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iCt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:s,binaryOutput:o}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,h=ZE(l,c,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,h)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(a),h=U6(l,c,s,o);return n.makeTensorInfo(h.shape,a.dtype,h.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const aCt={kernelName:Zk,backendName:"cpu",kernelFunc:iCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sCt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:a,dataFormat:s}=r;V(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);const o=i.shape[0],l=i.shape[1],c=i.shape[2],h=i.shape[3],d=l*a,p=c*a,g=h/(a*a),v=n.data.get(i.dataId).values,x=new Float32Array(o*d*p*g);let b=0;for(let w=0;w<o;++w)for(let S=0;S<d;++S){const T=Math.floor(S/a),$=S%a;for(let A=0;A<p;++A){const I=Math.floor(A/a),O=A%a,N=($*a+O)*g;for(let _=0;_<g;++_){const E=_+N+h*(I+c*(T+l*w));x[b++]=v[E]}}}return n.makeTensorInfo([o,d,p,g],i.dtype,x)}const oCt={kernelName:Qk,backendName:"cpu",kernelFunc:sCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U5(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r;Mt([i,a],"depthwiseConv2DNative");const h=Bt(i.shape),d=Bt(a.shape);let p=l;p==null&&(p=[1,1]),V(ur(s,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${p}'`);const g=Yn(i.shape,a.shape,s,p,o,c,!0),{filterHeight:v,filterWidth:x,dilationHeight:b,dilationWidth:w,padInfo:S}=g,T=S.left,$=S.top,A=g.outChannels/g.inChannels,I=new Xn(g.outShape,i.dtype),O=n.data.get(i.dataId).values,N=n.data.get(a.dataId).values,_=I.values;for(let R=0;R<g.batchSize;++R){const E=R*h[0],F=R*I.strides[0];for(let M=0;M<g.outHeight;++M){const B=F+M*I.strides[1],j=M*g.strideHeight-$;for(let P=0;P<v;++P){const U=j+P*b;if(U<0||U>=g.inHeight)continue;const W=P*d[0],q=E+U*h[1];for(let L=0;L<g.outWidth;++L){const G=B+L*I.strides[2],H=L*g.strideWidth-T;for(let Y=0;Y<x;++Y){const ot=H+Y*w;if(ot<0||ot>=g.inWidth)continue;const ht=W+Y*d[1],yt=q+ot*g.inChannels;let Nt=G,At=ht;for(let mt=0;mt<g.inChannels;++mt){const kt=O[yt+mt];for(let It=0;It<A;++It)_[Nt+It]+=kt*N[At+It];Nt+=A,At+=A}}}}}}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const lCt={kernelName:$b,backendName:"cpu",kernelFunc:U5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:h}=r;Mt([i,a],"depthwiseConv2dNativeBackpropFilter");const d=Yn(i.shape,h,s,o,l,c,!0),{strideHeight:p,strideWidth:g,filterHeight:v,filterWidth:x}=d,b=new Xn(d.filterShape,"float32"),w=d.padInfo.left,S=d.padInfo.top,T=d.outChannels/d.inChannels,$=n.data.get(i.dataId).values,A=new Xn(i.shape,i.dtype,$),I=n.data.get(a.dataId).values,O=new Xn(a.shape,a.dtype,I);for(let N=0;N<v;++N){const _=Math.max(0,Math.ceil((S-N)/p)),R=Math.min(d.outHeight,(d.inHeight+S-N)/p);for(let E=0;E<x;++E){const F=Math.max(0,Math.ceil((w-E)/g)),M=Math.min(d.outWidth,(d.inWidth+w-E)/g);for(let B=0;B<d.outChannels;++B){const j=Math.trunc(B/T),P=B%T;let U=0;for(let W=0;W<d.batchSize;++W)for(let q=_;q<R;++q){const L=N+q*p-S;for(let G=F;G<M;++G){const H=E+G*g-w;U+=A.get(W,L,H,j)*O.get(W,q,G,B)}}b.set(U,N,E,j,P)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const cCt={kernelName:Jk,backendName:"cpu",kernelFunc:uCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fCt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:h}=r;Mt([i,a],"depthwiseConv2DNativeBackpropInput");const d=Bt(i.shape),p=Bt(a.shape),g=Yn(h,a.shape,s,o,l,c,!0),v=new Xn(g.inShape,"float32"),x=v.values,[b,w,S]=v.strides,T=n.data.get(i.dataId).values,[$,A,I]=d,O=n.data.get(a.dataId).values,[N,_,R]=p,{batchSize:E,filterHeight:F,filterWidth:M,inChannels:B,inHeight:j,inWidth:P,outChannels:U,outHeight:W,outWidth:q,strideHeight:L,strideWidth:G}=g,H=F-1-g.padInfo.top,Y=M-1-g.padInfo.left,ot=U/B;for(let ht=0;ht<E;++ht)for(let yt=0;yt<B;++yt)for(let Nt=0;Nt<j;++Nt){const At=Nt-H,mt=Math.max(0,Math.ceil(At/L)),kt=Math.min(W,(F+At)/L);for(let It=0;It<P;++It){const gt=It-Y,Vt=Math.max(0,Math.ceil(gt/G)),Lt=Math.min(q,(M+gt)/G);let Zt=0;for(let Wt=mt;Wt<kt;++Wt){const Ht=Wt*L-At;for(let de=Vt;de<Lt;++de){const Nn=de*G-gt,We=$*ht+A*Wt+I*de,mn=N*(F-1-Ht)+_*(M-1-Nn)+R*yt;for(let nn=0;nn<ot;++nn){const Fr=yt*ot+nn,hr=T[We+Fr],Lr=O[mn+nn];Zt+=hr*Lr}}}x[b*ht+w*Nt+S*It+yt]=Zt}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const hCt={kernelName:tI,backendName:"cpu",kernelFunc:fCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCt(e){const{inputs:t,backend:n}=e,{x:r}=t,i=pt(r.shape),a=n.data.get(r.dataId).values,s=ie([i,i],r.dtype),o=s.values;for(let c=0;c<a.length;c++)o[c*i+c]=a[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,s.dtype,s.values)}const pCt={kernelName:pW,backendName:"cpu",kernelFunc:dCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mCt={kernelName:Ab,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i}=e,{strides:a,pad:s,dilations:o}=n,l=t,c=l.data.get(r.dataId).values,h=r.shape.length,d=l.data.get(i.dataId).values,p=i.shape.length,{batchSize:g,inHeight:v,inWidth:x,inChannels:b,outHeight:w,outWidth:S,padInfo:T,strideHeight:$,strideWidth:A,filterHeight:I,filterWidth:O,dilationHeight:N,dilationWidth:_,outShape:R}=Kp(r.shape,i.shape,a,s,"NHWC",o),E=pt(R),F=R.length,M=un(r.dtype,E);for(let j=0;j<g;++j)for(let P=0;P<w;++P){const U=P*$-T.top;for(let W=0;W<S;++W){const q=W*A-T.left;for(let L=0;L<b;++L){let G=Number.MIN_SAFE_INTEGER;for(let Y=0;Y<I;++Y){const ot=U+Y*N;if(ot>=0&&ot<v)for(let ht=0;ht<O;++ht){const yt=q+ht*_;if(yt>=0&&yt<x){const Nt=ka([j,ot,yt,L],h,Bt(r.shape)),At=ka([Y,ht,L],p,Bt(i.shape)),mt=c[Nt]+d[At];mt>G&&(G=mt)}}}const H=ka([j,P,W,L],F,Bt(R));M[H]=G}}}return{dataId:l.write(Gl(M,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gCt={kernelName:Y2,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i,dy:a}=e,{strides:s,pad:o,dilations:l}=n,c=t,h=ia(r.shape,c.data.get(r.dataId).values),d=ia(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:g,inWidth:v,inChannels:x,outHeight:b,outWidth:w,padInfo:S,strideHeight:T,strideWidth:$,filterHeight:A,filterWidth:I,dilationHeight:O,dilationWidth:N,outShape:_}=Kp(r.shape,i.shape,s,o,"NHWC",l);V(a.rank===_.length,()=>`Error in ${Y2}, dy must have the same rank as output ${_.length}, but got ${a.rank}`);const R=ia(_,c.data.get(a.dataId).values),E=cW(i.shape,i.dtype);for(let M=0;M<p;++M)for(let B=0;B<b;++B){const j=B*T-S.top;for(let P=0;P<w;++P){const U=P*$-S.left;for(let W=0;W<x;++W){let q=Number.MIN_SAFE_INTEGER,L=0,G=0;for(let H=0;H<A;++H){const Y=j+H*O;if(Y>=0&&Y<g)for(let ot=0;ot<I;++ot){const ht=U+ot*N;if(ht>=0&&ht<v){const yt=h[M][Y][ht][W]+d[H][ot][W];yt>q&&(q=yt,L=H,G=ot)}}}E[L][G][W]+=R[M][B][P][W]}}}return{dataId:c.write(Gl(E,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yCt={kernelName:K2,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i,dy:a}=e,{strides:s,pad:o,dilations:l}=n,c=t,h=ia(r.shape,c.data.get(r.dataId).values),d=ia(i.shape,c.data.get(i.dataId).values),{batchSize:p,inHeight:g,inWidth:v,inChannels:x,outHeight:b,outWidth:w,padInfo:S,strideHeight:T,strideWidth:$,filterHeight:A,filterWidth:I,dilationHeight:O,dilationWidth:N,outShape:_}=Kp(r.shape,i.shape,s,o,"NHWC",l);V(a.rank===_.length,()=>`Error in ${K2}, dy must have the same rank as output ${_.length}, but got ${a.rank}`);const R=ia(_,c.data.get(a.dataId).values),E=cW(r.shape,r.dtype);for(let M=0;M<p;++M)for(let B=0;B<b;++B){const j=B*T-S.top;for(let P=0;P<w;++P){const U=P*$-S.left;for(let W=0;W<x;++W){let q=Number.MIN_SAFE_INTEGER,L=j<0?0:j,G=U<0?0:U;for(let H=0;H<A;++H){const Y=j+H*O;if(Y>=0&&Y<g)for(let ot=0;ot<I;++ot){const ht=U+ot*N;if(ht>=0&&ht<v){const yt=h[M][Y][ht][W]+d[H][ot][W];yt>q&&(q=yt,L=Y,G=ht)}}}E[M][L][G][W]+=R[M][B][P][W]}}}return{dataId:c.write(Gl(E,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vCt(e){const{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{canvas:a,options:s}=r,{contextOptions:o,imageOptions:l}=s||{},c=(l==null?void 0:l.alpha)||1,h=(o==null?void 0:o.contextType)||"2d";if(h!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const d=a.getContext(h,(o==null?void 0:o.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${h} type.`);const[p,g]=i.shape.slice(0,2),v=i.shape.length===2?1:i.shape[2],x=n.data.get(i.dataId).values,b=i.dtype==="float32"?255:1,w=new Uint8ClampedArray(g*p*4);for(let T=0;T<p*g;++T){const $=[0,0,0,255*c];for(let I=0;I<v;I++){const O=x[T*v+I];if(i.dtype==="float32"){if(O<0||O>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${O}.`)}else if(i.dtype==="int32"&&(O<0||O>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${O}.`);v===1?($[0]=O*b,$[1]=O*b,$[2]=O*b):$[I]=O*b}const A=T*4;w[A+0]=Math.round($[0]),w[A+1]=Math.round($[1]),w[A+2]=Math.round($[2]),w[A+3]=Math.round($[3])}a.width=g,a.height=p;const S=new ImageData(w,g,p);return d.putImageData(S,0,0),i}const bCt={kernelName:Yft,backendName:"cpu",kernelFunc:vCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fm(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;Mt(i,"sum");let o;i.dtype==="bool"?o=bo({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):o=La({inputs:{x:i},backend:n});const l=o.shape.length,c=ae(a,o.shape),h=en(c,l);let d=c,p=o;h!=null&&(p=Mr({inputs:{x:o},backend:n,attrs:{perm:h}}),d=hn(d.length,l)),Zn("sum",d,p.shape.length);const[g,v]=jn(p.shape,d),x=Kr(p.dtype,"int32");let b=kv(n,g,x);const w=pt(v),S=n.data.get(b.dataId).values,T=n.data.get(p.dataId).values;for(let $=0;$<S.length;++$){const A=$*w;let I=0;for(let O=0;O<w;++O)I+=T[A+O];S[$]=I}if(s){const $=bn(b.shape,c),A=b;b=Ve({inputs:{x:b},backend:n,attrs:{shape:$}}),n.disposeIntermediateTensorInfo(A)}return n.disposeIntermediateTensorInfo(o),h!=null&&n.disposeIntermediateTensorInfo(p),b}const xCt={kernelName:a0,backendName:"cpu",kernelFunc:fm};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wCt(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,a=t,{allDims:s,summedDims:o,idDims:l}=wE(i,a.length);CE(s.length,l,a);const{path:c,steps:h}=TE(o,l),d=h.length;let p=null,g=s.length;const v=[];for(let x=0;x<d;++x){for(const b of h[x]){const{permutationIndices:w,expandDims:S}=SE(g,l[b]);let T;$E(w)?T=a[b]:(T=Mr({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),v.push(T));const $=T.shape.slice();for(let A=0;A<S.length;++A)$.splice(S[A],0,1);Te(T.shape,$)||(T=Ve({inputs:{x:T},backend:n,attrs:{shape:$}}),v.push(T)),p===null?p=T:(p=F0({inputs:{a:T,b:p},backend:n}),v.push(p))}x<d-1&&(c[x]>=0&&(p=fm({inputs:{x:p},backend:n,attrs:{axis:c[x]-(s.length-g),keepDims:!1}}),v.push(p)),g--)}for(const x of v)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const SCt={kernelName:eI,backendName:"cpu",kernelFunc:wCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CCt(e){const{inputs:t,backend:n}=e,{dy:r,y:i}=t;Mt([r,i],"eluGrad");const a=new Float32Array(pt(i.shape)),s=n.data.get(i.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<s.length;++l){const c=s[l];c>=0?a[l]=o[l]:a[l]=o[l]*(c+1)}return n.makeTensorInfo(i.shape,"float32",a)}const TCt={kernelName:nI,backendName:"cpu",kernelFunc:CCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ct=pE,ACt=mE,kCt=gE,ICt=yE,ECt=vE,OCt=bE,NCt=Ee(pp,e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+$Ct*n);return t*(1-((((OCt*r+ECt)*r+ICt)*r+kCt)*r+ACt)*r*Math.exp(-n*n))}),_Ct={kernelName:pp,backendName:"cpu",kernelFunc:NCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ov(e){const{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:a}=r,s=i.shape.length,o=i.shape.slice();let l=a;return a<0&&(V(-(s+1)<=a,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+a+1),o.splice(l,0,1),Ve({inputs:{x:i},backend:n,attrs:{shape:o}})}const RCt={kernelName:Ib,backendName:"cpu",kernelFunc:Ov};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DCt=pn((e,t)=>e/t),rO=On(hp,DCt),SA={kernelName:hp,backendName:"cpu",kernelFunc:rO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V5(e,t,n){const r=e.shape,i=r[0],a=r[1],s=n.data.get(e.dataId),o=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[i,a],h=pt(c),d=sr("float32",h),p=sr("float32",h);for(let b=0;b<i;b++){const w=Ll({inputs:{x:o},backend:n,attrs:{begin:[b,0],size:[1,a]}}),S=Ll({inputs:{x:l},backend:n,attrs:{begin:[b,0],size:[1,a]}}),T=qr({inputs:{real:w,imag:S},backend:n}),{real:$,imag:A}=MCt(T,t,n),I=ws($,A);for(let O=0;O<a;O++){const N=xE(I,O);d[b*a+O]=N.real,p[b*a+O]=N.imag}n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(T)}const g=n.makeTensorInfo(c,"float32",d),v=n.makeTensorInfo(c,"float32",p),x=qr({inputs:{real:g,imag:v},backend:n});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),x}function MCt(e,t,n){const r=pt(e.shape),i=n.data.get(e.dataId),a=n.data.get(i.complexTensorInfos.real.dataId).values,s=n.data.get(i.complexTensorInfos.imag.dataId).values;if(PCt(r)){const o=CA(a,s,r,t,n),l=[e.shape[0],e.shape[1]];if(t){const c=n.makeTensorInfo(l,"float32",o.real),h=n.makeTensorInfo(l,"float32",o.imag),d=n.makeTensorInfo([],"float32",Io(r,"float32")),p=La({inputs:{x:d},backend:n}),g=SA.kernelFunc({inputs:{a:c,b:d},backend:n}),v=SA.kernelFunc({inputs:{a:h,b:p},backend:n}),x=n.data.get(g.dataId).values,b=n.data.get(v.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),{real:x,imag:b}}return o}else{const o=ws(a,s),l=FCt(o,r,t);return rq(l)}}function PCt(e){return(e&e-1)===0}function CA(e,t,n,r,i){if(n===1)return{real:e,imag:t};const a=ws(e,t),s=n/2,o=iq(a),l=o.real,c=o.imag,h=[l.length],d=i.makeTensorInfo(h,"float32",l),p=i.makeTensorInfo(h,"float32",c),g=qr({inputs:{real:d,imag:p},backend:i}),v=aq(a),x=v.real,b=v.imag,w=[x.length],S=i.makeTensorInfo(w,"float32",x),T=i.makeTensorInfo(w,"float32",b),$=qr({inputs:{real:S,imag:T},backend:i}),A=CA(l,c,s,r,i),I=A.real,O=A.imag,N=[I.length],_=i.makeTensorInfo(N,"float32",I),R=i.makeTensorInfo(N,"float32",O),E=qr({inputs:{real:_,imag:R},backend:i}),F=CA(x,b,s,r,i),M=F.real,B=F.imag,j=[M.length],P=i.makeTensorInfo(j,"float32",M),U=i.makeTensorInfo(j,"float32",B),W=qr({inputs:{real:P,imag:U},backend:i}),q=oq(n,r),L=[q.real.length],G=i.makeTensorInfo(L,"float32",q.real),H=i.makeTensorInfo(L,"float32",q.imag),Y=qr({inputs:{real:G,imag:H},backend:i}),ot=F0({inputs:{a:Y,b:W},backend:i}),ht=Gc({inputs:{a:E,b:ot},backend:i}),yt=eO({inputs:{a:E,b:ot},backend:i}),Nt=Fl({inputs:{input:ht},backend:i}),At=Fl({inputs:{input:yt},backend:i}),mt=qc({inputs:{input:ht},backend:i}),kt=qc({inputs:{input:yt},backend:i}),It=Hc({inputs:[Nt,At],backend:i,attrs:{axis:0}}),gt=Hc({inputs:[mt,kt],backend:i,attrs:{axis:0}}),Vt=i.data.get(It.dataId).values,Lt=i.data.get(gt.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(S),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(Y),i.disposeIntermediateTensorInfo(ot),i.disposeIntermediateTensorInfo(ht),i.disposeIntermediateTensorInfo(yt),i.disposeIntermediateTensorInfo(Nt),i.disposeIntermediateTensorInfo(mt),i.disposeIntermediateTensorInfo(At),i.disposeIntermediateTensorInfo(kt),i.disposeIntermediateTensorInfo(It),i.disposeIntermediateTensorInfo(gt),{real:Vt,imag:Lt}}function FCt(e,t,n){const r=new Float32Array(t*2);for(let i=0;i<t;i++){let a=0,s=0;for(let o=0;o<t;o++){const l=lq(i*o,t,n),c=xE(e,o);a+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}n&&(a/=t,s/=t),sq(r,a,s,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LCt(e){const{inputs:t,backend:n}=e,{input:r}=t,i=pt(r.shape),a=r.shape[r.shape.length-1],s=i/a,o=Ve({inputs:{x:r},backend:n,attrs:{shape:[s,a]}}),l=V5(o,!1,n),c=Ve({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const BCt={kernelName:rI,backendName:"cpu",kernelFunc:LCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iO(e){const{backend:t,attrs:n}=e,{shape:r,value:i,dtype:a}=n,s=a||sf(i),o=un(s,pt(r));return jCt(o,i,s),t.makeTensorInfo(r,s,o)}const zCt={kernelName:iI,backendName:"cpu",kernelFunc:iO};function jCt(e,t,n){e.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UCt={kernelName:aI,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,i=n,a=sr(r.dtype,pt(r.shape)),[s,o,l,c]=r.shape,h=i.data.get(r.dataId).values;for(let p=0;p<s;p++){const g=p*l*o*c;for(let v=0;v<o;v++){const x=v*(l*c);for(let b=0;b<l;b++){const w=b*c;for(let S=0;S<c;S++){const T=Math.round(l-b-1),$=g+x+w+S;let A=h[$];if(T>=0&&T<l){const I=T*c,O=g+x+I+S;A=h[O]}a[$]=A}}}}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VCt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:v}=r;let x=j5({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p}});if(s){const b=x;if(h==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){const w=Ve({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});x=Gc({inputs:{a:x,b:w},backend:n}),n.disposeIntermediateTensorInfo(w)}else x=Gc({inputs:{a:x,b:s},backend:n});n.disposeIntermediateTensorInfo(b)}if(g){const b=x;if(h==="NCHW"&&g==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const w=Ve({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});x=Ev(n,x,g,w,v),n.disposeIntermediateTensorInfo(w)}else x=Ev(n,x,g,o,v);n.disposeIntermediateTensorInfo(b)}return x}const WCt={kernelName:cv,backendName:"cpu",kernelFunc:VCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GCt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:v}=r;let x=U5({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p}});if(s){const b=x;x=Gc({inputs:{a:x,b:s},backend:n}),n.disposeIntermediateTensorInfo(b)}if(g){const b=x;x=Ev(n,x,g,o,v),n.disposeIntermediateTensorInfo(b)}return x}const qCt={kernelName:RW,backendName:"cpu",kernelFunc:GCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HCt(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,a=pt(r.shape),s=i.shape,o=s[s.length-1],[l,c,h,d]=rE(r,i);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(i.dataId).values,g=n.bufferSync(r),v=J6(p,g,r.dtype,c,o,h,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,v.values)}const XCt={kernelName:mW,backendName:"cpu",kernelFunc:HCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KCt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:a}=t,{axis:s,batchDims:o}=r;Mt([i,a],"gatherV2");const l=ae(s,i.shape)[0],c=n.data.get(a.dataId).values,h=i.shape[l];for(let $=0;$<c.length;++$){const A=c[$];V(A<=h-1&&A>=0,()=>`GatherV2: the index value ${A} is not in [0, ${h-1}]`)}let d=o;o==null&&(d=0);const p=pt(a.shape),g=kE(i,a,l,d),v=Ve({inputs:{x:i},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),x=Ve({inputs:{x:a},backend:n,attrs:{shape:[g.batchSize,p/g.batchSize]}}),b=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],w=n.bufferSync(x),S=n.bufferSync(v),T=t5(S,w,b);return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(g.outputShape,T.dtype,T.values)}const YCt={kernelName:Ob,backendName:"cpu",kernelFunc:KCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZCt(e){const{inputs:t,backend:n}=e,{input:r}=t,i=pt(r.shape),a=r.shape[r.shape.length-1],s=i/a,o=Ve({inputs:{x:r},backend:n,attrs:{shape:[s,a]}}),l=V5(o,!0,n),c=Ve({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const QCt={kernelName:sI,backendName:"cpu",kernelFunc:ZCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JCt=Ee(wp,e=>Number.isFinite(e)?1:0,"bool"),tTt={kernelName:wp,backendName:"cpu",kernelFunc:JCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eTt=Ee(Sp,e=>Math.abs(e)===1/0?1:0,"bool"),nTt={kernelName:Sp,backendName:"cpu",kernelFunc:eTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rTt=Ee(Cp,e=>Number.isNaN(e)?1:0,"bool"),iTt={kernelName:Cp,backendName:"cpu",kernelFunc:rTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTt(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:a}=n,s=a5(r,i,a);return t.makeTensorInfo([s.length],"float32",s)}const sTt={kernelName:gW,backendName:"cpu",kernelFunc:aTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oTt=Ee($p,e=>Math.log1p(e)),lTt={kernelName:$p,backendName:"cpu",kernelFunc:oTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uTt=pn((e,t)=>e&&t),cTt=On(Mb,uTt,null,"bool"),fTt={kernelName:Mb,backendName:"cpu",kernelFunc:cTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hTt=Ee(Pb,e=>e?0:1,"bool"),dTt={kernelName:Pb,backendName:"cpu",kernelFunc:hTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pTt=pn((e,t)=>e||t),mTt=On(Fb,pTt,null,"bool"),gTt={kernelName:Fb,backendName:"cpu",kernelFunc:mTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yTt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:a,bias:s,alpha:o,beta:l}=r;Mt(i,"LRN");const c=i.shape[3],h=c-1,d=n.data.get(i.dataId).values,p=pt(i.shape),g=new Float32Array(p);function v(x){const b=x%c;let w=x-b+Math.max(0,b-a);const S=x-b+Math.min(b+a,h);let T=0;for(;w<=S;w++){const $=d[w];T+=$*$}return T}for(let x=0;x<p;x++){const b=v(x),w=d[x]*Math.pow(s+o*b,-l);g[x]=w}return n.makeTensorInfo(i.shape,i.dtype,g)}const vTt={kernelName:Lb,backendName:"cpu",kernelFunc:yTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bTt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,y:a,dy:s}=t,{depthRadius:o,bias:l,alpha:c,beta:h}=r;Mt(s,"LRNGrad");const d=pt(s.shape),p=s.shape[3],g=n.data.get(s.dataId).values,v=n.data.get(i.dataId).values,x=n.data.get(a.dataId).values,b=new Float32Array(d),w=d;for(let S=0;S<w;S++){const T=S%p,$=S-T+Math.max(0,T-o),A=S-T+Math.min(p,T+o+1);let I=0;for(let O=$;O<A;O++)I+=Math.pow(v[O],2);I=c*I+l;for(let O=$;O<A;O++){let N=-2*c*h*v[O]*x[S]/I;S===O&&(N+=Math.pow(I,-h)),N*=g[S],b[O]+=N}}return n.makeTensorInfo(s.shape,i.dtype,b)}const xTt={kernelName:lI,backendName:"cpu",kernelFunc:bTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W5(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:a,keepDims:s}=r,o=n;let l=i.shape;const c=l.length,h=ae(a,l);let d=h;const p=en(d,c);let g=o.data.get(i.dataId).values;if(p!=null){const $=new Array(c);for(let A=0;A<$.length;A++)$[A]=l[p[A]];g=JE(g,l,i.dtype,p,$),d=hn(d.length,c),l=$}Mt(i,"max"),Zn("max",d,c);const[v,x]=jn(l,d),b=pt(x),w=o5(g,b,v,i.dtype),S=o.write(w,v,i.dtype);let T=v;return s&&(T=bn(v,h)),{dataId:S,shape:T,dtype:i.dtype}}const wTt={kernelName:Bb,backendName:"cpu",kernelFunc:W5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function STt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Mt(i,"maxPool");const{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r,c=1;V(ur(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const h=zi(i.shape,a,s,c,o,l);let d;if(h.filterWidth===1&&h.filterHeight===1&&Te(h.inShape,h.outShape))d=La({inputs:{x:i},backend:n});else{const p=n.data.get(i.dataId).values,g=Bt(i.shape),v=nO(p,i.shape,i.dtype,g,h,"max");d=n.makeTensorInfo(h.outShape,i.dtype,v.values)}return d}const CTt={kernelName:zb,backendName:"cpu",kernelFunc:STt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;Mt(i,"maxPool3d");const h=ks(i.shape,a,s,1,o,l,c),d=n.data.get(i.dataId).values,p=z5(d,i.shape,i.dtype,Bt(i.shape),h,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const $Tt={kernelName:jb,backendName:"cpu",kernelFunc:TTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ATt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;Mt([i,a],"maxPool3DGrad");const h=ks(a.shape,s,o,1,l,c),d=n.bufferSync(a),p=pSt(d,h),g=h.strideDepth,v=h.strideHeight,x=h.strideWidth,b=h.dilationDepth,w=h.dilationHeight,S=h.dilationWidth,T=h.effectiveFilterDepth,$=h.effectiveFilterHeight,A=h.effectiveFilterWidth,I=T-1-h.padInfo.front,O=A-1-h.padInfo.left,N=$-1-h.padInfo.top,_=ie(a.shape,"float32"),R=n.bufferSync(i);for(let E=0;E<h.batchSize;++E)for(let F=0;F<h.inChannels;++F)for(let M=0;M<h.inDepth;++M)for(let B=0;B<h.inHeight;++B)for(let j=0;j<h.inWidth;++j){const P=M-I,U=B-N,W=j-O;let q=0;for(let L=0;L<T;L+=b){const G=(P+L)/g;if(!(G<0||G>=h.outDepth||Math.floor(G)!==G))for(let H=0;H<$;H+=w){const Y=(U+H)/v;if(!(Y<0||Y>=h.outHeight||Math.floor(Y)!==Y))for(let ot=0;ot<A;ot+=S){const ht=(W+ot)/x;if(ht<0||ht>=h.outWidth||Math.floor(ht)!==ht)continue;const yt=T*$*A-1-p.get(E,G,Y,ht,F),Nt=L*$*A+H*A+ot,At=yt===Nt?1:0;if(At===0)continue;const mt=R.get(E,G,Y,ht,F);q+=mt*At}}}_.set(q,E,M,B,j,F)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const kTt={kernelName:cI,backendName:"cpu",kernelFunc:ATt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ITt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a,output:s}=t,o=a;Mt([a,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:h,dimRoundingMode:d}=r,p=zi(o.shape,l,c,1,h,d),g=n.data.get(o.dataId).values,v=ie(p.outShape,o.dtype,B5(g,o.shape,o.dtype,p).values),x=p.strideHeight,b=p.strideWidth,w=p.dilationHeight,S=p.dilationWidth,T=p.effectiveFilterHeight,$=p.effectiveFilterWidth,A=$-1-p.padInfo.left,I=T-1-p.padInfo.top,O=ie(o.shape,"float32"),N=n.data.get(i.dataId).values,_=ie(i.shape,"float32",N);for(let R=0;R<p.batchSize;++R)for(let E=0;E<p.inChannels;++E)for(let F=0;F<p.inHeight;++F)for(let M=0;M<p.inWidth;++M){const B=F-I,j=M-A;let P=0;for(let U=0;U<T;U+=w){const W=(B+U)/x;if(!(W<0||W>=p.outHeight||Math.floor(W)!==W))for(let q=0;q<$;q+=S){const L=(j+q)/b;if(L<0||L>=p.outWidth||Math.floor(L)!==L)continue;const G=T*$-1-v.get(R,W,L,E),H=U*$+q,Y=G===H?1:0;if(Y===0)continue;const ot=_.get(R,W,L,E);P+=ot*Y}}O.set(P,R,F,M,E)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const ETt={kernelName:uI,backendName:"cpu",kernelFunc:ITt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTt(e,t,n,r,i){const a=Bt(t),s=nO(e,t,n,a,i,"max"),o=B5(e,t,n,i,!0,r);return[s.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NTt={kernelName:yW,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:i,strides:a,pad:s,includeBatchInIndex:o}=t,l=n;Mt(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,h=zi(r.shape,i,a,[1,1],s),[d,p]=OTt(c,r.shape,r.dtype,o,h),g=l.write(d,h.outShape,r.dtype),v=l.write(p,h.outShape,r.dtype);return[{dataId:g,shape:h.outShape,dtype:r.dtype},{dataId:v,shape:h.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Tt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r,o=ae(a,i.shape),c=jn(i.shape,o)[1],h=pt(c),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([h]));d.push(p);const g=bo({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(g);const v=rO({inputs:{a:g,b:p},backend:n});d.push(v);const x=fm({inputs:{x:v},backend:n,attrs:{axis:a,keepDims:s}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const RTt={kernelName:Ub,backendName:"cpu",kernelFunc:_Tt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;Mt(i,"min");const o=ae(a,i.shape);let l=o;const c=en(l,i.shape.length);let h=i;c!=null&&(h=Mr({inputs:{x:i},backend:n,attrs:{perm:c}}),l=hn(l.length,i.shape.length)),Zn("min",l,h.shape.length);const[d,p]=jn(h.shape,l),g=pt(p),v=or(pt(d),h.dtype),x=n.data.get(h.dataId).values;for(let w=0;w<v.length;++w){const S=w*g;let T=x[S];for(let $=0;$<g;++$){const A=x[S+$];(Number.isNaN(A)||A<T)&&(T=A)}v[w]=T}c!=null&&n.disposeIntermediateTensorInfo(h);const b=n.makeTensorInfo(d,h.dtype,v);if(s){const w=bn(d,o),S=Ve({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),S}return b}const MTt={kernelName:Vb,backendName:"cpu",kernelFunc:DTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,mode:s}=r;Mt(i,"mirrorPad");const o=a.map((T,$)=>T[0]+i.shape[$]+T[1]),l=a.map(T=>T[0]),c=a.map((T,$)=>T[0]+i.shape[$]),h=s==="reflect"?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,g=Bt(i.shape),v=pt(o),x=o.length,b=Bt(o),w=sr(i.dtype,v);for(let T=0;T<v;T++){let $=of(T,x,b);for(let I=0;I<x;I++)$[I]<l[I]?$[I]=l[I]*2-$[I]-h:$[I]>=c[I]&&($[I]=(c[I]-1)*2-$[I]+h);$=$.map((I,O)=>I-l[O]);const A=ka($,p,g);w[T]=d[A]}return{dataId:n.write(w,o,i.dtype),shape:o,dtype:i.dtype}}const FTt={kernelName:Wb,backendName:"cpu",kernelFunc:PTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LTt=pn((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),BTt=On(Ip,LTt),zTt={kernelName:Ip,backendName:"cpu",kernelFunc:BTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G5(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:a}=r,s=i.shape.length;let o=a;if(o===-1&&(o=s-1),o!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${o}`);const l=ae([o],i.shape),c=W5({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),h=bn(c.shape,l),d=Ve({inputs:{x:c},backend:n,attrs:{shape:h}}),p=eO({inputs:{a:i,b:d},backend:n}),g=K6({inputs:{x:p},backend:n}),v=fm({inputs:{x:g},backend:n,attrs:{axis:l,keepDims:!1}}),x=Ve({inputs:{x:v},backend:n,attrs:{shape:h}}),b=rO({inputs:{a:g,b:x},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),b}const jTt={kernelName:l0,backendName:"cpu",kernelFunc:G5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UTt(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:a,seed:s,normalized:o}=r;Mt(i,"multinomial");const l=o?i:G5({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],h=l.shape[1],d=n.data.get(l.dataId).values,p=[c,a],g=or(pt(p),"int32");for(let v=0;v<c;++v){const x=v*h,b=new Float32Array(h-1);b[0]=d[x];for(let T=1;T<b.length;++T)b[T]=b[T-1]+d[x+T];const w=VI.alea(s.toString()),S=v*a;for(let T=0;T<a;++T){const $=w();g[S+T]=b.length;for(let A=0;A<b.length;A++)if($<b[A]){g[S+T]=A;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",g)}const VTt={kernelName:vW,backendName:"cpu",kernelFunc:UTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WTt=QI;function GTt(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r;Mt(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,{selectedIndices:d}=WTt(c,h,s,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const qTt={kernelName:fI,backendName:"cpu",kernelFunc:GTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HTt=JI;function XTt(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;Mt(i,"NonMaxSuppressionPadded");const h=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,{selectedIndices:p,validOutputs:g}=HTt(h,d,s,o,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const KTt={kernelName:hI,backendName:"cpu",kernelFunc:XTt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YTt=tE;function ZTt(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;Mt(i,"NonMaxSuppressionWithScore");const h=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,p=s,g=o,v=l,x=c,{selectedIndices:b,selectedScores:w}=YTt(h,d,p,g,v,x);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const QTt={kernelName:dI,backendName:"cpu",kernelFunc:ZTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTt(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:a,depth:s,onValue:o,offValue:l}=r;Mt(i,"oneHot");const c=pt(i.shape),h=new Float32Array(c*s);h.fill(l);const d=n.data.get(i.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<s&&(h[p*s+d[p]]=o);return n.makeTensorInfo([...i.shape,s],a,h)}const t$t={kernelName:Xb,backendName:"cpu",kernelFunc:JTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nv(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Fl({inputs:{input:r},backend:n}),a=Nv({inputs:{x:i},backend:n}),s=qc({inputs:{input:r},backend:n}),o=Nv({inputs:{x:s},backend:n}),l=qr({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return iO({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const e$t={kernelName:f0,backendName:"cpu",kernelFunc:Nv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Fl({inputs:{input:r},backend:n}),a=q5({inputs:{x:i},backend:n}),s=qc({inputs:{input:r},backend:n}),o=Nv({inputs:{x:s},backend:n}),l=qr({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return iO({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const n$t={kernelName:Hb,backendName:"cpu",kernelFunc:q5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H5(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(t.length===1)return Ov({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const a=t[0].shape,s=t[0].dtype;t.forEach(h=>{Dk(a,h.shape,"All tensors passed to stack must have matching shapes"),V(s===h.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=t.map(h=>{const d=Ov({inputs:{input:h},backend:n,attrs:{dim:i}});return o.push(d),d}),c=Hc({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(h=>n.disposeIntermediateTensorInfo(h)),c}const r$t={kernelName:Kb,backendName:"cpu",kernelFunc:H5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,constantValue:s}=r;Mt(i,"pad");const o=a.map((S,T)=>S[0]+i.shape[T]+S[1]),l=a.map(S=>S[0]),c=n.data.get(i.dataId).values,h=pt(i.shape),d=i.shape.length,p=Bt(i.shape),g=pt(o),v=o.length,x=Bt(o),b=sr(i.dtype,g);s!==0&&b.fill(s);for(let S=0;S<h;S++){const $=of(S,d,p).map((I,O)=>I+l[O]),A=ka($,v,x);b[A]=c[S]}return{dataId:n.write(b,o,i.dtype),shape:o,dtype:i.dtype}}const X5={kernelName:Yb,backendName:"cpu",kernelFunc:i$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a$t=pn((e,t)=>Math.pow(e,t)),s$t=On(Op,a$t),o$t={kernelName:Op,backendName:"cpu",kernelFunc:s$t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$t(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:a,indices:s}=t,{outputRaggedRank:o}=r,l=i.map(w=>n.data.get(w.dataId).values),c=i.map(w=>w.shape),h=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,[p,g,v]=d5(l,c,h,a.shape,a.dtype,d,s.shape),x=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),b=n.makeTensorInfo(v,a.dtype,g);return x.concat([b])}const u$t={kernelName:bW,backendName:"cpu",kernelFunc:l$t};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$t(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:a}=t,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[c,h]=p5(s,r.shape,r.dtype,o,i.shape,l,a.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([h.length],r.dtype,h);return[d,p]}const f$t={kernelName:xW,backendName:"cpu",kernelFunc:c$t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$t(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:a,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,p=o.map(b=>n.data.get(b.dataId).values),g=o.map(b=>b.shape),[v,x]=m5(c,i.shape,h,a.shape,a.dtype,d,s.shape,p,g,l);return n.makeTensorInfo(v,a.dtype,x)}const d$t={kernelName:wW,backendName:"cpu",kernelFunc:h$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$t(e){const{backend:t,attrs:n}=e,{start:r,stop:i,dtype:a,step:s}=n,o=g5(r,i,s,a);return t.makeTensorInfo([o.length],a,o)}const m$t={kernelName:pI,backendName:"cpu",kernelFunc:p$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g$t=Ee(Np,e=>1/e),y$t={kernelName:Np,backendName:"cpu",kernelFunc:g$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$t(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:s,size:o}=r;Mt(i,"resizeBilinear");const l=Bt(i.shape),[c,h]=o,[d,p,g,v]=i.shape,x=n.data.get(i.dataId).values,b=new Float32Array(pt([d,c,h,v])),w=[a&&c>1?p-1:p,a&&h>1?g-1:g],S=[a&&c>1?c-1:c,a&&h>1?h-1:h];let T=0;const $=w[0]/S[0],A=w[1]/S[1];for(let I=0;I<d;I++)for(let O=0;O<c;O++){let N;s?N=$*(O+.5)-.5:N=$*O;const _=Math.max(0,Math.floor(N)),R=N-_,E=Math.min(p-1,Math.ceil(N)),F=I*l[0]+_*l[1],M=I*l[0]+E*l[1];for(let B=0;B<h;B++){let j;s?j=A*(B+.5)-.5:j=A*B;const P=Math.max(0,Math.floor(j)),U=j-P,W=Math.min(g-1,Math.ceil(j)),q=F+P*l[2],L=M+P*l[2],G=F+W*l[2],H=M+W*l[2];for(let Y=0;Y<v;Y++){const ot=x[q+Y],ht=x[L+Y],yt=x[G+Y],Nt=x[H+Y],At=ot+(yt-ot)*U,mt=ht+(Nt-ht)*U,kt=At+(mt-At)*R;b[T++]=kt}}}return n.makeTensorInfo([d,c,h,v],"float32",b)}const b$t={kernelName:e0,backendName:"cpu",kernelFunc:v$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x$t(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:s}=r;Mt([a,i],"resizeBilinearGrad");const o=Bt(i.shape),[l,c,h,d]=i.shape,[,p,g]=a.shape,v=new Float32Array(l*c*h*d),x=[s&&p>1?c-1:c,s&&g>1?h-1:h],b=[s&&p>1?p-1:p,s&&g>1?g-1:g],w=x[0]/b[0],S=x[1]/b[1],T=n.data.get(a.dataId).values;let $=0;for(let A=0;A<l;A++){const I=A*o[0];for(let O=0;O<p;O++){const N=O*w,_=Math.floor(N),R=Math.min(Math.ceil(N),c-1),E=I+_*o[1],F=I+R*o[1],M=N-_,B=1-M;for(let j=0;j<g;j++){const P=j*S,U=Math.floor(P),W=Math.min(Math.ceil(P),h-1),q=P-U,L=1-q,G=E+U*o[2],H=E+W*o[2],Y=F+U*o[2],ot=F+W*o[2],ht=B*L,yt=B*q,Nt=M*L,At=M*q;for(let mt=0;mt<d;mt++){const kt=T[$++];v[G+mt]+=kt*ht,v[H+mt]+=kt*yt,v[Y+mt]+=kt*Nt,v[ot+mt]+=kt*At}}}}return n.makeTensorInfo([l,h,c,d],"float32",v)}const w$t={kernelName:yI,backendName:"cpu",kernelFunc:x$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S$t(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:s,size:o}=r;Mt(i,"resizeNearestNeighbor");const l=Bt(i.shape),[c,h]=o,[d,p,g,v]=i.shape,x=n.data.get(i.dataId).values,b=new Float32Array(d*c*h*v),w=[a&&c>1?p-1:p,a&&h>1?g-1:g],S=[a&&c>1?c-1:c,a&&h>1?h-1:h],T=w[0]/S[0],$=w[1]/S[1];let A=0;for(let I=0;I<d;I++){const O=I*l[0];for(let N=0;N<c;N++){const _=s?T*(N+.5):T*N;let R=Math.min(p-1,a?Math.round(_):Math.floor(_));s&&(R=Math.max(0,R));const E=O+R*l[1];for(let F=0;F<h;F++){const M=s?$*(F+.5):$*F;let B=Math.min(g-1,a?Math.round(M):Math.floor(M));s&&(B=Math.max(0,B));const j=E+B*l[2];for(let P=0;P<v;P++){const U=x[j+P];b[A++]=U}}}}return n.makeTensorInfo([d,c,h,v],i.dtype,b)}const C$t={kernelName:t0,backendName:"cpu",kernelFunc:S$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T$t(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:s}=r;Mt([a,i],"resizeNearestNeighborGrad");const o=Bt(i.shape),l=Bt(a.shape),[c,h,d,p]=i.shape,[,g,v]=a.shape,x=new Float32Array(c*h*d*p),b=n.data.get(a.dataId).values,w=[s&&g>1?h-1:h,s&&v>1?d-1:d],S=[s&&g>1?g-1:g,s&&v>1?v-1:v],T=w[0]/S[0],$=w[1]/S[1],A=1/T,I=1/$,O=Math.ceil(A)*2+2,N=Math.ceil(I)*2+2;for(let _=0;_<c;_++){const R=_*o[0];for(let E=0;E<h;E++){const F=R+E*o[1],M=Math.floor(E*A),B=Math.floor(M-O/2);for(let j=0;j<d;j++){const P=F+j*o[2],U=Math.floor(j*I),W=Math.floor(U-N/2);for(let q=0;q<p;q++){let L=0;for(let G=0;G<O;G++){const H=G+B;if(H<0||H>=g)continue;const Y=R+H*l[1],ot=H*T,ht=Math.min(h-1,s?Math.round(ot):Math.floor(ot));if(E===ht)for(let yt=0;yt<N;yt++){const Nt=yt+W;if(Nt<0||Nt>=v)continue;const At=Y+Nt*l[2],mt=Nt*$,kt=Math.min(d-1,s?Math.round(mt):Math.floor(mt));j===kt&&(L+=b[At+q])}}x[P+q]=L}}}}return n.makeTensorInfo(i.shape,i.dtype,x)}const $$t={kernelName:gI,backendName:"cpu",kernelFunc:T$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A$t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:a}=r;Mt(i,"reverse");const s=i.shape.length,o=ae(a,i.shape);if(s===0)return La({inputs:{x:i},backend:n});const l=new Xn(i.shape,i.dtype),c=n.bufferSync(i);for(let h=0;h<l.size;h++){const d=l.indexToLoc(h),p=d.slice();o.forEach(g=>p[g]=i.shape[g]-1-p[g]),l.set(c.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const k$t={kernelName:n0,backendName:"cpu",kernelFunc:A$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I$t={kernelName:TI,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:a,center:s}=t,o=n,l=sr(r.dtype,pt(r.shape)),[c,h,d,p]=r.shape,[g,v]=fE(s,h,d),x=255,b=Math.sin(i),w=Math.cos(i),S=o.data.get(r.dataId).values;for(let $=0;$<c;$++){const A=$*d*h*p;for(let I=0;I<h;I++){const O=I*(d*p);for(let N=0;N<d;N++){const _=N*p;for(let R=0;R<p;R++){const E=[c,I,N,R],F=E[2],M=E[1];let B=(F-g)*w-(M-v)*b,j=(F-g)*b+(M-v)*w;B=Math.round(B+g),j=Math.round(j+v);let P=a;if(typeof a!="number"&&(R===3?P=x:P=a[R]),B>=0&&B<d&&j>=0&&j<h){const W=j*(d*p),q=B*p,L=A+W+q+R;P=S[L]}const U=A+O+_+R;l[U]=P}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E$t=Ee(Dp,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),O$t={kernelName:Dp,backendName:"cpu",kernelFunc:E$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N$t(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:a}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:h,outputSize:d}=Xl(a,i,s),p=!0,g=n.bufferSync(i),v=n.bufferSync(a),x=ml(g,v,s,d,c,l,o,h,0,p);return n.makeTensorInfo(s,x.dtype,x.values)}const _$t={kernelName:SW,backendName:"cpu",kernelFunc:N$t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R$t(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<t?n=i+1:r=i;return r}function D$t(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<=t?n=i+1:r=i;return r}function M$t(e,t,n,r,i,a){const s=un("int32",n*i);for(let o=0;o<n;++o){const l=e.slice(o*r,(o+1)*r),c=o*i;for(let h=0;h<i;++h)s[c+h]=a==="left"?R$t(l,t[h+c]):D$t(l,t[h+c])}return s}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$t(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:a}=t,{side:s}=r,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,c=M$t(o,l,i.shape[0],i.shape[1],a.shape[1],s);return n.makeTensorInfo(a.shape,"int32",c)}const F$t={kernelName:TW,backendName:"cpu",kernelFunc:P$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L$t(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:a}=t;Mt([r,i,a],"select");const s=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,h=Kr(i.dtype,a.dtype),d=or(pt(i.shape),h);let p=0;const g=s===0||s>1||i.shape.length===1?1:pt(i.shape.slice(1));for(let v=0;v<o.length;v++)for(let x=0;x<g;x++)o[v]===1?d[p++]=l[v]:d[p++]=c[v];return n.makeTensorInfo(i.shape,h,d)}const B$t={kernelName:r0,backendName:"cpu",kernelFunc:L$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z$t=C0,j$t=T0,U$t=Ee(Pp,e=>e>=0?j$t*e:z$t*(Math.exp(e)-1)),V$t={kernelName:Pp,backendName:"cpu",kernelFunc:U$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W$t=Ee(Bp,e=>e<0?-1:e>0?1:0),G$t={kernelName:Bp,backendName:"cpu",kernelFunc:W$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q$t=Ee(Fp,e=>Math.sin(e)),H$t={kernelName:Fp,backendName:"cpu",kernelFunc:q$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X$t=Ee(Lp,e=>Math.sinh(e)),K$t={kernelName:Lp,backendName:"cpu",kernelFunc:X$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y$t=11920928955078125e-23,m4=Math.log(Y$t)+2,Z$t=Ee(jp,e=>{const t=e>-m4,n=e<m4,r=Math.exp(e);let i;return n?i=r:t?i=e:i=Math.log(1+r),i}),Q$t={kernelName:jp,backendName:"cpu",kernelFunc:Z$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,paddings:s}=r;Mt([i],"spaceToBatchND");const o=pt(a),l=[[0,0]];l.push(...s);for(let I=1+a.length;I<i.shape.length;++I)l.push([0,0]);const c=X5.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),h=tm(c.shape,a,o,!1),d=em(h.length,a.length,!1),p=nm(c.shape,a,o,!1),x=Ve({inputs:{x:c},backend:n,attrs:{shape:h}}),S=Mr({inputs:{x},backend:n,attrs:{perm:d}}),A=Ve({inputs:{x:S},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),A}const t2t={kernelName:s0,backendName:"cpu",kernelFunc:J$t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2t(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:a,defaultValue:s}=t;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,h=n.data.get(s.dataId).values[0],[d,p,g,v,x]=x5(o,r.shape,r.dtype,l,i.dtype,c,h);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,g),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map(b=>Number(b)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const n2t={kernelName:$W,backendName:"cpu",kernelFunc:e2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2t(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:a}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const s=Array.from(n.data.get(i.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[c,h,d]=w5(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(h,r.dtype,c),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}const i2t={kernelName:AW,backendName:"cpu",kernelFunc:r2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2t(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[c,h]=tO(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(h,r.dtype,c)}const s2t={kernelName:kW,backendName:"cpu",kernelFunc:a2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2t(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[c,h]=tO(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(h,r.dtype,c)}const l2t={kernelName:IW,backendName:"cpu",kernelFunc:o2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2t(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:h,strides:d,outputSize:p}=Xl(a,i,o),g=!1,v=n.bufferSync(i);let x;switch(a.dtype){case"bool":{const b=n.bufferSync(a),w=!!n.data.get(s.dataId).values[0];x=ml(v,b,o,p,h,c,l,d,w,g);break}case"float32":{const b=n.bufferSync(a),w=n.data.get(s.dataId).values[0];x=ml(v,b,o,p,h,c,l,d,w,g);break}case"int32":{const b=n.bufferSync(a),w=n.data.get(s.dataId).values[0];x=ml(v,b,o,p,h,c,l,d,w,g);break}case"string":{const b=n.bufferSync(a),w=po(n.data.get(s.dataId).values[0]);x=ml(v,b,o,p,h,c,l,d,w,g);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(o,x.dtype,x.values)}const c2t={kernelName:EW,backendName:"cpu",kernelFunc:u2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f2t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:a,axis:s}=r,o=ae(s,i.shape)[0],l=AE(i,a,o),c=new Array(i.shape.length).fill(0),h=i.shape.slice();return l.map(d=>{const p=[...h];p[o]=d;const g=Ll({inputs:{x:i},backend:n,attrs:{begin:c,size:p}});return c[o]+=d,g})}const h2t={kernelName:o0,backendName:"cpu",kernelFunc:f2t};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d2t={kernelName:vI,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;Mt(n,"square");const i=r.data.get(n.dataId).values,a=new Float32Array(i.length);for(let o=0;o<i.length;++o){const l=i[o];a[o]=l*l}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p2t=Ee(Xp,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),m2t={kernelName:Xp,backendName:"cpu",kernelFunc:p2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:h,newAxisMask:d,shrinkAxisMask:p}=r;Mt(i,"stridedSlice");const{finalShapeSparse:g,finalShape:v,isIdentity:x,sliceDim0:b,isSimpleSlice:w,begin:S,end:T,strides:$}=lE(i.shape,a,s,o,l,c,h,d,p);let A;if(x)A=Ve({inputs:{x:i},backend:n,attrs:{shape:v}});else if(b||w){V(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const I=aE(S,T,$),O=Ll({inputs:{x:i},backend:n,attrs:{begin:S,size:I}});A=Ve({inputs:{x:O},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(O)}else{const I=n.bufferSync(i),O=T5(g,I,$,S);A=n.makeTensorInfo(v,O.dtype,O.values)}return A}const y2t={kernelName:xI,backendName:"cpu",kernelFunc:g2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2t(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:a,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:h,dataSplits:d}=t,p=n.data.get(h.dataId).values,g=n.data.get(d.dataId).values,[v,x]=$5(p,g,i,a,s,o,l,c);return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(d.shape,"int32",x)]}const b2t={kernelName:OW,backendName:"cpu",kernelFunc:v2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x2t(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:a,delimiter:s}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values[0],[c,h,d]=A5(o,l,i),p=h.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const w2t={kernelName:NW,backendName:"cpu",kernelFunc:x2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2t(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:a}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const s=n.data.get(a.dataId).values,o=k5(s,i);return n.makeTensorInfo(a.shape,"int32",o)}const C2t={kernelName:_W,backendName:"cpu",kernelFunc:S2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T2t=Ee(Gp,e=>Math.tan(e)),$2t={kernelName:Gp,backendName:"cpu",kernelFunc:T2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A2t=Ee(qp,e=>Math.tanh(e)),k2t={kernelName:qp,backendName:"cpu",kernelFunc:A2t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2t(e){const{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:a}=t,{sliceRank:s,numUpdates:o,sliceSize:l,strides:c,outputSize:h}=Xl(a,i,r.shape),d=!1,p=n.bufferSync(i),g=n.bufferSync(a),v=n.bufferSync(r),x=ml(p,g,r.shape,h,l,o,s,c,v,d);return n.makeTensorInfo(r.shape,x.dtype,x.values)}const E2t={kernelName:CW,backendName:"cpu",kernelFunc:I2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:a}=r;Mt(i,"tile");const s=E5(n.bufferSync(i),a);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const N2t={kernelName:Hp,backendName:"cpu",kernelFunc:O2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:a,sorted:s}=r;Mt(i,"topk");const o=n.data.get(i.dataId).values,[l,c]=N5(o,i.shape,i.dtype,a,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const R2t={kernelName:wI,backendName:"cpu",kernelFunc:_2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2t(e){const{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:a}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=n,[h,d,p,g]=i.shape,[v,x]=c??[d,p],b=[h,v,x,g],w=Bt(i.shape),S=w[0],T=w[1],$=w[2],A=Bt(b),I=A[0],O=A[1],N=A[2],_=sr(i.dtype,pt(b));_.fill(l);const R=r.data.get(i.dataId).values,E=r.data.get(a.dataId).values;for(let M=0;M<h;++M){const B=a.shape[0]===1?E:E.subarray(M*8,M*8+8);for(let j=0;j<v;++j)for(let P=0;P<x;++P)for(let U=0;U<g;++U){let W;const q=B[6]*P+B[7]*j+1;if(q===0)continue;const L=(B[0]*P+B[1]*j+B[2])/q,G=(B[3]*P+B[4]*j+B[5])/q,H=g4(L,p,o),Y=g4(G,d,o);switch(s){case"nearest":W=z2t(R,d,p,S,T,$,M,Y,H,U,l);break;case"bilinear":W=j2t(R,d,p,S,T,$,M,Y,H,U,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}const ot=M*I+j*O+P*N+U;_[ot]=W}return r.makeTensorInfo(b,i.dtype,_)}return{dataId:r.write(_,b,i.dtype),shape:i.shape,dtype:i.dtype}}const M2t={kernelName:SI,backendName:"cpu",kernelFunc:D2t};function g4(e,t,n){switch(n){case"reflect":return P2t(e,t);case"wrap":return F2t(e,t);case"nearest":return B2t(e,t);case"constant":default:return L2t(e)}}function P2t(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{const r=2*t;n-=r*Math.trunc(n/r),n>=t&&(n=r-n-1)}return Al(0,n,t-1)}function F2t(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{const r=t-1;n-=t*Math.trunc(n/r)}return Al(0,n,t-1)}function L2t(e,t){return e}function B2t(e,t){return Al(0,e,t-1)}function Vh(e,t,n,r,i,a,s,o,l,c,h){const d=s*r+o*i+l*a+c;return 0<=o&&o<t&&0<=l&&l<n?e[d]:h}function z2t(e,t,n,r,i,a,s,o,l,c,h){const d=Math.round(o),p=Math.round(l);return Vh(e,t,n,r,i,a,s,d,p,c,h)}function j2t(e,t,n,r,i,a,s,o,l,c,h){const d=Math.floor(o),p=Math.floor(l),g=d+1,v=p+1,x=(v-l)*Vh(e,t,n,r,i,a,s,d,p,c,h)+(l-p)*Vh(e,t,n,r,i,a,s,d,v,c,h),b=(v-l)*Vh(e,t,n,r,i,a,s,g,p,c,h)+(l-p)*Vh(e,t,n,r,i,a,s,g,v,c,h);return(g-o)*x+(o-d)*b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2t(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:a}=t;Mt(a,"unique");const s=r.data.get(a.dataId).values,{outputValues:o,outputShape:l,indices:c}=_5(s,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const V2t={kernelName:CI,backendName:"cpu",kernelFunc:U2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W2t(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:a}=r;a<0&&(a+=i.shape.length);const s=i.shape.length,o=i.shape[a],l=new Array(s-1);let c=0;for(let g=0;g<s;g++)g!==a&&(l[c++]=i.shape[g]);const h=new Array(s).fill(0),d=i.shape.slice();d[a]=1;const p=new Array(o);for(let g=0;g<p.length;g++){h[a]=g;const v=Ll({inputs:{x:i},backend:n,attrs:{begin:h,size:d}});p[g]=Ve({inputs:{x:v},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(v)}return p}const G2t={kernelName:u0,backendName:"cpu",kernelFunc:W2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:a}=t,{numSegments:s}=r;Mt(i,"unsortedSegmentSum");const o=i.shape.length,l=a.shape.length,c=[],h=[],d=o-l;let p=a;for(let v=0;v<d;++v){const x=Ov({inputs:{input:p},backend:n,attrs:{dim:v+1}});p=x,h.push(x)}for(let v=0;v<s;++v){const x=Io(v,"int32"),b=n.makeTensorInfo([],"int32",x),w=H6({inputs:{a:b,b:p},backend:n}),S=bo({inputs:{x:w},backend:n,attrs:{dtype:"float32"}}),T=F0({inputs:{a:S,b:i},backend:n}),$=fm({inputs:{x:T},backend:n,attrs:{axis:0,keepDims:!1}});c.push($),h.push(b),h.push(w),h.push(S),h.push(T),h.push($)}const g=H5({inputs:c,backend:n,attrs:{axis:0}});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}const H2t={kernelName:c0,backendName:"cpu",kernelFunc:q2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X2t=[Uwt,S1t,Wwt,qwt,I1t,Xwt,Ywt,Qwt,tSt,nSt,iSt,sSt,lSt,fSt,dSt,gSt,vSt,xSt,SSt,zwt,TSt,ASt,ISt,O1t,OSt,A1t,_1t,_St,C1t,DSt,PSt,FSt,BSt,jSt,VSt,GSt,HSt,KSt,ZSt,JSt,eCt,rCt,aCt,oCt,lCt,cCt,hCt,pCt,mCt,gCt,yCt,bCt,SCt,Rwt,TCt,R1t,_Ct,D1t,RCt,P1t,BCt,zCt,UCt,L1t,z1t,WCt,qCt,XCt,YCt,U1t,W1t,T1t,QCt,MSt,tTt,nTt,iTt,Dwt,q1t,X1t,sTt,Y1t,lTt,fTt,dTt,gTt,vTt,xTt,wTt,Q1t,CTt,$Tt,kTt,ETt,NTt,RTt,MTt,twt,FTt,zTt,VTt,nwt,iwt,qTt,KTt,QTt,swt,t$t,n$t,r$t,X5,o$t,Pwt,uwt,u$t,f$t,d$t,m$t,$1t,SA,y$t,Fwt,Lwt,Bwt,b$t,w$t,C$t,$$t,k$t,I$t,O$t,ywt,_$t,F$t,B$t,V$t,bwt,G$t,H$t,K$t,xwt,jTt,Q$t,t2t,n2t,i2t,s2t,l2t,c2t,h2t,Cwt,d2t,$wt,kwt,m2t,y2t,b2t,w2t,C2t,Nwt,xCt,$2t,k2t,E2t,N2t,R2t,M2t,owt,V2t,G2t,H2t,e$t];for(const e of X2t)DW(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ll={},Hg={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function K2t(e,t){ll[e]=t}function ua(e,t){if(!(e in ll)||t!=null){const r=Z2t(e,t);if(r!==null)ll[e]=r;else return console.log("Could not get context for WebGL version",e),null}const n=ll[e];return n==null||n.isContextLost()?(delete ll[e],ua(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),ll[e])}function Y2t(e){if(!ct().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Z2t(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=t??Y2t(e);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete ll[e]},!1),ct().getBool("SOFTWARE_WEBGL_ENABLED")&&(Hg.failIfMajorPerformanceCaveat=!1),e===1?n.getContext("webgl",Hg)||n.getContext("experimental-webgl",Hg):n.getContext("webgl2",Hg)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var jd;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(jd||(jd={}));var fi;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(fi||(fi={}));var Hn;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Hn||(Hn={}));function hm(e,t){return[t,e]}function Q2t(e,t){return e*t}function Xg(e){const t=pt(e),n=Math.ceil(t/4);return G2(n)}function mf(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function J2t(e,t){const[n,r]=mf(e,t);return n*r*4}function aO(e,t){const n=e;let r,i,a,s,o,l,c,h,d,p;return ct().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,a=n.RGBA16F,s=n.RGBA32F,o=n.RED,c=4,h=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=e.RGBA,i=e.RGBA,a=e.RGBA,s=n.RGBA,o=e.RGBA,c=4,h=4,d=t!=null?t.HALF_FLOAT_OES:null,p=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:h,textureTypeHalfFloat:d,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _t(e,t){const n=t();return ct().getBool("DEBUG")&&tAt(e),n}function tAt(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+iAt(e,t))}const eAt=596e-10,nAt=65504;function rAt(e){return!!(ct().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||eAt<Math.abs(e)&&Math.abs(e)<nAt)}function iAt(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function Kg(e,t){return Es(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function aAt(e,t){const n=Es(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(_t(e,()=>e.shaderSource(n,t)),_t(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function sAt(e,t){const n=Es(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(_t(e,()=>e.shaderSource(n,t)),_t(e,()=>e.compileShader(n)),ct().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw K5(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const oAt=/ERROR: [0-9]+:([0-9]+):/g;function K5(e,t){const n=oAt.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}const r=+n[1],i=e.split(`
`),a=i.length.toString().length+2,s=i.map((d,p)=>ac((p+1).toString(),a)+d);let o=0;for(let d=0;d<s.length;d++)o=Math.max(s[d].length,o);const l=s.slice(0,r-1),c=s.slice(r-1,r),h=s.slice(r);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${ac(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join(`
`))}function lAt(e){return Es(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function uAt(e,t){if(_t(e,()=>e.linkProgram(t)),!ct().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function x$(e,t){if(_t(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function cAt(e,t){const n=Es(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return _t(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),_t(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function fAt(e,t){const n=Es(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return _t(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),_t(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function hAt(e){return Es(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function dAt(e,t){const n=ct().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const r=`[${e}x${t}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){const r=`[${e}x${t}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function pAt(e){return Es(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function y4(e,t,n,r,i,a,s){const o=e.getAttribLocation(t,n);return o===-1?!1:(_t(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),_t(e,()=>e.vertexAttribPointer(o,i,e.FLOAT,!1,a,s)),_t(e,()=>e.enableVertexAttribArray(o)),!0)}function mAt(e,t,n){xAt(e,n),_t(e,()=>e.activeTexture(e.TEXTURE0+n)),_t(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function gAt(e,t,n){return Es(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function yAt(e,t,n){return e.getUniformLocation(t,n)}function vAt(e,t,n,r){_t(e,()=>mAt(e,t,r)),_t(e,()=>e.uniform1i(n,r))}function w$(e,t,n){_t(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),_t(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function v4(e,t){_t(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),_t(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function Yg(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+bAt(e,t))}function bAt(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function Es(e,t,n){const r=_t(e,()=>t());if(r==null)throw new Error(n);return r}function xAt(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Xc(e,t=2){return pt(e.slice(0,e.length-t))}function Kc(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Zg(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Xc(e),...Kc(e)]),t}function wAt(e,t=!1){let n=ct().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ct().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ct().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n=n*2,r=r*2,e=e.map((o,l)=>l>=e.length-2?Rk(e[l]):e[l]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=ko(e).newShape);let i=pt(e),a=null;e.length<=1&&i<=n?a=[1,i]:e.length===2&&e[0]<=n&&e[1]<=n?a=e:e.length===3&&e[0]*e[1]<=n&&e[2]<=n?a=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=n&&e[1]*e[2]<=n?a=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n?a=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(a=[e[0],e[1]*e[2]*e[3]]);const s=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(t?2:1)&&Math.min(...a)>0;if(a==null||s)if(t){const o=Xc(e);let l=2,c=2;e.length&&([l,c]=Kc(e)),i=o*(l/2)*(c/2),a=G2(i).map(h=>h*2)}else a=G2(i);return a}function Qg(e){return e%2===0}function _v(e,t){if(e=e.slice(-2),t=t.slice(-2),Te(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r||Qg(n)&&Qg(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Qg(e[0])&&Qg(t[0])}let S$,C$;function SAt(e){if(S$==null){const t=ua(e);S$=t.getParameter(t.MAX_TEXTURE_SIZE)}return S$}function CAt(e){if(C$==null){const t=ua(e);C$=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,C$)}function TAt(e){if(e===0)return 0;let t;const n=ua(e);return Ri(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:Ri(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function Ri(e,t){return e.getExtension(t)!=null}function b4(e){try{if(ua(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function $At(e){if(e===0)return!1;const t=ua(e);if(e===1){if(!Ri(t,"OES_texture_float"))return!1}else if(!Ri(t,"EXT_color_buffer_float"))return!1;return TA(t)}function AAt(e){if(e===0)return!1;const t=ua(e);if(e===1){if(!Ri(t,"OES_texture_float")||!Ri(t,"WEBGL_color_buffer_float"))return!1}else{if(Ri(t,"EXT_color_buffer_float"))return TA(t);const r="EXT_color_buffer_half_float";if(Ri(t,r)){const i=t.getExtension(r);return kAt(t,i)}return!1}return TA(t)}function TA(e){const t=aO(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(a),s}function kAt(e,t){const n=aO(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(s),o}function IAt(e){return e!==2?!1:ua(e).fenceSync!=null}function dm(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ft=ct();Ft.registerFlag("HAS_WEBGL",()=>Ft.getNumber("WEBGL_VERSION")>0);Ft.registerFlag("WEBGL_VERSION",()=>b4(2)?2:b4(1)?1:0);Ft.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ft.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ft.get("WEBGL_VERSION")===2);Ft.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ft.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ft.registerFlag("WEBGL_PACK",()=>Ft.getBool("HAS_WEBGL"));Ft.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_CLIP",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_REDUCE",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_CONV_IM2COL",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>SAt(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>CAt(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=Ft.getNumber("WEBGL_VERSION");return e===0?0:TAt(e)});Ft.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ft.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!HW());Ft.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>$At(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ft.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ft.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ft.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>AAt(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_FENCE_API_ENABLED",()=>IAt(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ft.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ft.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});Ft.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>HW()?1:-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});Ft.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ft.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ft.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ft.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ft.registerFlag("WEBGL_EXP_CONV",()=>!1);Ft.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ft.getBool("IS_TEST"));Ft.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ft.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ft.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ft.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $r(){let e,t,n,r,i,a,s,o,l,c;return ct().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",i="texture",a="outputColor",s="out vec4 outputColor;",o=ct().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",s="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zl(e,t,n="index"){const r=Bt(t);return r.map((i,a)=>{const s=`int ${e[a]} = ${n} / ${i}`,o=a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${i}`:`index -= ${e[a]} * ${i}`;return`${s}; ${o};`}).join("")}function L0(e,t,n="index"){const r=Bt(t);return r.map((i,a)=>{const s=`int ${e[a]} = ${n} / outShapeStrides[${a}]`,o=a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * outShapeStrides[${a}]`:`index -= ${e[a]} * outShapeStrides[${a}]`;return`${s}; ${o};`}).join("")}function EAt(e,t){const n=e.length,r=e.map(a=>`${t}[${a}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let a=n-3;a>=0;--a)i[a]=`(${i[a+1]} * ${r[a+1]})`;return i}function OAt(e,t,n="index"){const r=e.map((a,s)=>s),i=EAt(r,t);return i.map((a,s)=>{const o=`int ${e[s]} = ${n} / ${i[s]}`,l=s===i.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * ${i[s]}`:`index -= ${e[s]} * ${i[s]}`;return`${o}; ${l};`}).join("")}function sO(e){const t=Bt(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function oO(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Y5=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Z5}=vvt;function NAt(e,t,n){const r=[];if(e.forEach(g=>{const v=pt(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?r.push(`uniform float ${g.name}${v>1?`[${v}]`:""};`):(r.push(`uniform sampler2D ${g.name};`),r.push(`uniform int offset${g.name};`)),n.enableShapeUniforms){const{uniformShape:x}=lO(n.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(x.length){case 1:r.push(`uniform int ${g.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${g.name}Shape;`);break}r.push(`uniform ivec2 ${g.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(g=>{r.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const i=r.join(`
`),a=e.map(g=>_At(g,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),s=t.texShape,o=$r(),l=MAt(o);let c,h,d=LAt(o);return t.isPacked?(c=RAt(t.logicalShape,s,n.enableShapeUniforms),h=FAt(o)):(c=DAt(t.logicalShape,s,n.enableShapeUniforms),h=PAt(o)),n.packedInputs&&(d+=UAt),[d,l,h,i,c,a,n.userCode].join(`
`)}function gf(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return tkt(e,t);case 1:return nkt(e,t);case 2:return ikt(e,t);case 3:return skt(e,t);case 4:return lkt(e,t);case 5:return ukt(e);case 6:return ckt(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function Q5(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return JAt(e);case 1:return ekt(e,t);case 2:return rkt(e,t);case 3:return akt(e,t);default:return okt(e,t)}}function _At(e,t,n=!1,r){let i="";n?i+=Q5(e,r):i+=gf(e,r);const a=e.shapeInfo.logicalShape,s=t.logicalShape;return a.length<=s.length&&(n?i+=fkt(e,t):i+=hkt(e,t)),i}function RAt(e,t,n){switch(e.length){case 0:return J5();case 1:return VAt(e,t,n);case 2:return ZAt(e,t,n);case 3:return GAt(e,t,n);default:return HAt(e,t,n)}}function DAt(e,t,n){switch(e.length){case 0:return J5();case 1:return WAt(e,t,n);case 2:return QAt(e,t,n);case 3:return qAt(e,t,n);case 4:return XAt(e,t,n);case 5:return KAt(e,t);case 6:return YAt(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function MAt(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function PAt(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function FAt(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function LAt(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${BAt}
    ${zAt}
    ${jAt}
  `}const BAt=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,zAt=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,jAt=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,UAt=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function J5(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function VAt(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function WAt(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function GAt(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),a=i*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function qAt(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${L0(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;const r=Zl(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function HAt(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),a=i*Math.ceil(e[e.length-2]/2);let s=a,o="",l="b, r, c";for(let c=2;c<e.length-1;c++)s*=e[e.length-c-1],o=`
      int b${c} = index / ${s};
      index -= b${c} * ${s};
    `+o,l=`b${c}, `+l;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${e.length}(${l});
    }
  `}function XAt(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${L0(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Zl(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function KAt(e,t){const n=Zl(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function YAt(e,t){const n=Zl(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function ZAt(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Te(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function QAt(e,t,n){return Te(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function Ql(e){return`offset${e}`}function JAt(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=$r();return`
    vec4 ${n}() {
      return ${r.texture2D}(${t}, halfCR);
    }
  `}function tkt(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,a]=e.shapeInfo.texShape;if(i===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=Ql(n);if(t)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=e.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${s});
      return sampleTexture(${n}, uv);
    }
  `}function ekt(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,a=$r();if(t)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${n}, uv);
    }
  `;const s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${a.texture2D}(${n}, uv);
    }
  `}function nkt(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${yf(e)}
      }
    `;const i=e.shapeInfo.texShape,a=i[0],s=i[1];if(s===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Ql(n);return s===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${a}.0);
        return sampleTexture(${n}, uv);
      }
    `:a===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${s}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function rkt(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,s=a[0],o=a[1],l=$r();if(a!=null&&Te(n,a))return t?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${s}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(t)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],h=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${h}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function ikt(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape;if(a!=null&&Te(n,a)){if(t)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=a[0],g=a[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:s,keptDims:o}=ko(n),l=s;if(l.length<n.length){const p=vf(e,l),g=["row","col"];return`
      ${gf(p,t)}
      float ${i}(int row, int col) {
        return ${i}(${bf(g,o)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${yf(e)}
      }
    `;const c=a[0],h=a[1],d=Ql(r);return h===1?t?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?t?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${h}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:t?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${h}, index);
    return sampleTexture(${r}, uv);
  }
`}function akt(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(n[0]===1){const p=n.slice(1),g=[1,2],v=vf(e,p),x=["b","row","col"];return`
        ${Q5(v,t)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${bf(x,g)});
        }
      `}const o=$r();if(t)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=s[0],c=s[1],h=Math.ceil(n[2]/2),d=h*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${h}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function skt(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],s=n[2],{newShape:o,keptDims:l}=ko(n),c=o;if(c.length<n.length){const x=vf(e,c),b=["row","col","depth"];return`
        ${gf(x,t)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${bf(b,l)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${s}, 1)));
        ${yf(e)}
      }
    `;const h=e.shapeInfo.texShape,d=h[0],p=h[1],g=e.shapeInfo.flatOffset;if(p===a&&g==null)return t?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===s&&g==null)return t?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const v=Ql(r);return t?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${v};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${s} + depth + ${v};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function okt(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=$r();if(t)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const a=e.shapeInfo.logicalShape,s=a.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],h=l[1],d=Math.ceil(a[s-1]/2);let p=d*Math.ceil(a[s-2]/2),g="int b, int row, int col",v=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let x=2;x<s-1;x++)g=`int b${x}, `+g,p*=a[s-x-1],v=`b${x} * ${p} + `+v;return`
    vec4 ${r}(${g}) {
      int index = ${v};
      int texR = index / ${h};
      int texC = index - texR * ${h};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function lkt(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],s=n[2]*a,o=n[1]*s,{newShape:l,keptDims:c}=ko(n);if(l.length<n.length){const S=vf(e,l),T=["row","col","depth","depth2"];return`
      ${gf(S,t)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${bf(T,c)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${s}, ${a}, 1)));
        ${yf(e)}
      }
    `;const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],g=d[1],v=`int stride2 = ${r}Shape[3];`,x=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(g===o&&h==null)return t?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${v}
        ${x}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(g===a&&h==null)return t?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const w=Ql(r);return t?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${v}
      ${x}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${w});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${w});
      return sampleTexture(${r}, uv);
    }
  `}function ukt(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],a=t[3]*i,s=t[2]*a,o=t[1]*s,{newShape:l,keptDims:c}=ko(t);if(l.length<t.length){const x=vf(e,l),b=["row","col","depth","depth2","depth3"];return`
      ${gf(x)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${bf(b,c)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${s}, ${a}, ${i})) +
          depth3;
        ${yf(e)}
      }
    `;const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],g=d[1];if(g===o&&h==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===i&&h==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=Ql(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} + depth * ${a} +
          depth2 * ${i} + depth3 + ${v};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ckt(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:a}=ko(t);if(i.length<t.length){const b=vf(e,i),w=["row","col","depth","depth2","depth3","depth4"];return`
      ${gf(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${bf(w,a)});
      }
    `}const s=t[5],o=t[4]*s,l=t[3]*o,c=t[2]*l,h=t[1]*c;if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${h}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${yf(e)}
      }
    `;const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,g=p[0],v=p[1];if(v===h&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${v}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(v===s&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${v}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;const x=Ql(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${h} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${s} + depth4 + ${x};
      vec2 uv = uvFromFlat(${g}, ${v}, index);
      return sampleTexture(${n}, uv);
    }
  `}function yf(e){const t=e.name,n=pt(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function fkt(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,o=Z5(e.shapeInfo.logicalShape,t.logicalShape),l=_e(s),c=s-a;let h;const d=["x","y","z","w","u","v"];a===0?h="":s<2&&o.length>=1?h="coords = 0;":h=o.map(S=>`coords.${d[S+c]} = 0;`).join(`
`);let p="";s<2&&a>0?p="coords":p=e.shapeInfo.logicalShape.map((S,T)=>`coords.${d[T+c]}`).join(", ");let g="return outputValue;";const x=pt(e.shapeInfo.logicalShape)===1,w=pt(t.logicalShape)===1;if(a===1&&!x&&!w)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(x&&!w)s===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(o.length){const S=a-2,T=a-1;o.indexOf(S)>-1&&o.indexOf(T)>-1?g="return vec4(outputValue.x);":o.indexOf(S)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(T)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${h}
      vec4 outputValue = get${r}(${p});
      ${g}
    }
  `}function hkt(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.texShape,s=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&e.shapeInfo.flatOffset==null&&Te(s,a))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=_e(l),h=Z5(e.shapeInfo.logicalShape,t.logicalShape),d=l-o;let p;const g=["x","y","z","w","u","v"];o===0?p="":l<2&&h.length>=1?p="coords = 0;":p=h.map(x=>`coords.${g[x+d]} = 0;`).join(`
`);let v="";return l<2&&o>0?v="coords":v=e.shapeInfo.logicalShape.map((x,b)=>`coords.${g[b+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${v});
    }
  `}function _e(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function lO(e,t,n){const{newShape:r,keptDims:i}=ko(t),a=t.length,s=e&&a===3&&t[0]===1,o=s?t.slice(1):r,l=!e&&a>1&&!Te(t,n)&&r.length<a||s;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:i}}function vf(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function bf(e,t){return t.map(n=>e[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dkt(e,t,n,r){const i=n.map((h,d)=>{const p={logicalShape:h.shape,texShape:h.isUniform?null:h.texData.texShape,isUniform:h.isUniform,isPacked:h.isUniform?!1:h.texData.isPacked,flatOffset:null};return h.texData!=null&&h.texData.slice!=null&&h.texData.slice.flatOffset>0&&(p.flatOffset=h.texData.slice.flatOffset),{name:t.variableNames[d],shapeInfo:p}}),a=i.map(h=>h.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=NAt(i,s,t),l=sAt(e.gl,o),c=e.createProgram(l);return ct().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:s},t8(e,t,c)))}function t8(e,t,n){const r=[],i=[];let a,s,o,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),ct().getNumber("WEBGL_VERSION")===1&&(l=e.getUniformLocation(n,"INFINITY",!1));const h=!1;for(const d of t.variableNames){const p={name:d,uniform:e.getUniformLocation(n,d,h),offset:e.getUniformLocation(n,`offset${d}`,h)};t.enableShapeUniforms&&(p.shape=e.getUniformLocation(n,`${d}Shape`,h),p.texShape=e.getUniformLocation(n,`${d}TexShape`,h)),r.push(p)}if(t.enableShapeUniforms&&(a=e.getUniformLocation(n,"outShape",h),o=e.getUniformLocation(n,"outShapeStrides",h),s=e.getUniformLocation(n,"outTexShape",h)),t.customUniforms)for(const d of t.customUniforms)i.push(e.getUniformLocation(n,d.name,h));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:s}}function x4(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,r)=>{const i=n.logicalShape,a=t[r],s=a.shape;if(!Te(i,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${s} must match`);if(n.isUniform&&a.isUniform)return;const o=n.texShape,l=a.isUniform?null:a.texData.texShape;if(!Te(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function pkt(e,t,n,r,i){t.program.enableShapeUniforms||(x4(t.inShapeInfos,n),x4([t.outShapeInfo],[r]));const a=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a.texture,s[0],s[1]):e.setOutputMatrixTexture(a.texture,s[0],s[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),ct().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:h,offset:d,shape:p,texShape:g}=t.variablesLocations[l];if(p){const{uniformShape:v}=lO(t.program.packedInputs,c.shape,c.texData.texShape);switch(v.length){case 1:e.gl.uniform1iv(p,new Int32Array(v));break;case 2:e.gl.uniform2iv(p,new Int32Array(v));break;case 3:e.gl.uniform3iv(p,new Int32Array(v));break;case 4:e.gl.uniform4iv(p,new Int32Array(v));break}}if(g&&e.gl.uniform2i(g,c.texData.texShape[0],c.texData.texShape[1]),h!=null){if(c.isUniform){if(pt(c.shape)<2)e.gl.uniform1f(h,c.uniformValues[0]);else{let v=c.uniformValues;v instanceof Float32Array||(v=new Float32Array(v)),e.gl.uniform1fv(h,v)}continue}c.texData.slice!=null&&d!=null&&e.gl.uniform1i(d,c.texData.slice.flatOffset),e.setInputMatrixTexture(c.texData.texture.texture,h,l)}}const o=t.outShapeLocation;if(o)switch(r.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(r.shape));break}if(t.outShapeStridesLocation){const l=Bt(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i)for(let l=0;l<t.program.customUniforms.length;++l){const c=t.program.customUniforms[l],h=t.customUniformLocations[l],d=i[l];if(c.type==="float")e.gl.uniform1fv(h,d);else if(c.type==="vec2")e.gl.uniform2fv(h,d);else if(c.type==="vec3")e.gl.uniform3fv(h,d);else if(c.type==="vec4")e.gl.uniform4fv(h,d);else if(c.type==="int")e.gl.uniform1iv(h,d);else if(c.type==="ivec2")e.gl.uniform2iv(h,d);else if(c.type==="ivec3")e.gl.uniform3iv(h,d);else if(c.type==="ivec4")e.gl.uniform4iv(h,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}e.executeProgram()}function mkt(e,t,n){let r="";t.concat(n).forEach(s=>{const o=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!s.isUniform){const l=s.texData.texShape,{useSqueezeShape:c,uniformShape:h,keptDims:d}=lO(e.packedInputs,s.shape,l);let p="",g="",v="";if(h.length===1&&e.packedInputs){const A=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${A[0]>1}_${A[1]>1}`}else if(h.length===2&&!e.packedInputs)g=`${h[0]>1}_${h[1]>1}`;else if(h.length>2&&!e.packedInputs){const A=Bt(h);v=`${A[0]===l[1]}_${A[A.length-1]===l[1]}`}const x=s.shape.length,b=h.length===2&&Te(s.shape,l),w=pt(s.shape)===1,S=jc(s.shape,n.shape),T=!e.packedInputs&&x===n.shape.length&&Te(l,n.texData.texShape),$=e.packedInputs||h.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${x}_${T}_${c?d:""}_${h.length}_${w}_${S}_${b}_${p}_${g}_${v}_${$}_${o}`}else{const l=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${l}_${o}`}});const i=e.userCode;let a=e.constructor.name;return a+="_"+r+"_"+i+`${ct().getNumber("WEBGL_VERSION")}`,a}function fr(e){return ct().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gkt{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=jd.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=$r();this.outputShape=t,this.enableShapeUniforms=fr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?L0(["r","c","d"],t):Zl(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ykt{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=jd.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=$r();this.outputShape=t,this.enableShapeUniforms=fr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?L0(["r","c","d"],t):Zl(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vkt{constructor(t){this.variableNames=["A"],this.outTexUsage=fi.DOWNLOAD;const n=$r();this.outputShape=t,this.userCode=`
      ${Y5}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bkt{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=fi.DOWNLOAD;const n=$r();this.outputShape=t,this.userCode=`
      ${Y5}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xkt={R:0,G:1,B:2,A:3};class w4{constructor(t,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=$r();this.outputShape=t,this.enableShapeUniforms=fr(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)");let s="";for(let o=0;o<r.length;o++){const l=r[o];s+=`
          if(offset == ${o}) {
            result = values[${xkt[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?oO():sO(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${s}
        }
        ${i.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wkt{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=$r();this.outputShape=t,this.enableShapeUniforms=fr(this.outputShape.length);let i="",a="result";n&&(a="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){const l=s*2+o;i+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?oO():sO(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${a};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Skt(e){const t=$r(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return aAt(e,n)}function Ckt(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return cAt(e,t)}function Tkt(e){const t=new Uint16Array([0,1,2,2,1,3]);return fAt(e,t)}function pm(e,t,n,r,i,a){dAt(t,n);const s=hAt(e),o=e.TEXTURE_2D;return _t(e,()=>e.bindTexture(o,s)),_t(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),_t(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),_t(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),_t(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),ct().getNumber("WEBGL_VERSION")===1?_t(e,()=>e.texImage2D(o,0,r,t,n,0,i,a,null)):_t(e,()=>e.texStorage2D(o,1,r,t,n)),_t(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[n,t]}}function e8(e){return e.internalFormatFloat}function $kt(e,t,n,r){const[i,a]=hm(t,n);return pm(e,i,a,e8(r),r.textureFormatFloat,e.FLOAT)}function n8(e){return e.internalFormatHalfFloat}function Akt(e,t,n,r){const[i,a]=hm(t,n);return pm(e,i,a,n8(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function r8(e){return e.downloadTextureFormat}function kkt(e,t,n,r){const[i,a]=hm(t,n);return pm(e,i,a,r8(r),e.RGBA,e.UNSIGNED_BYTE)}function i8(e){return e.internalFormatPackedFloat}function Ikt(e,t,n,r){const[i,a]=mf(t,n);return pm(e,i,a,i8(r),e.RGBA,e.FLOAT)}function a8(e){return e.internalFormatPackedHalfFloat}function Ekt(e,t,n,r){const[i,a]=mf(t,n);return pm(e,i,a,a8(r),e.RGBA,r.textureTypeHalfFloat)}function Okt(e,t,n){return _t(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),y4(e,t,"clipSpacePos",n,3,20,0)&&y4(e,t,"uv",n,2,20,12)}function Nkt(e,t,n,r,i,a){_t(e,()=>e.bindTexture(e.TEXTURE_2D,t));let s,o,l;i instanceof Uint8Array?(s=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(n*r*4),o=e.FLOAT,l=a.internalFormatPackedFloat),s.set(i),ct().getNumber("WEBGL_VERSION")===2?_t(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,o,s)):_t(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,s)),_t(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function _kt(e,t,n){_t(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?ct().getNumber("WEBGL_VERSION")===2?_t(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):_t(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):ct().getNumber("WEBGL_VERSION")===2?_t(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):_t(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),_t(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function Rkt(e,t,n,r){const i=e.createBuffer();_t(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,i));const o=4*4*t*n;return _t(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)),_t(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),_t(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),i}function Dkt(e,t,n){const r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function Mkt(e,t,n,r){const[i,a]=hm(t,n),s=4,o=new Uint8Array(Q2t(t*n,s));return _t(e,()=>e.readPixels(0,0,i,a,r.downloadTextureFormat,e.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function Pkt(e,t,n,r,i,a,s,o){const l=e,c=new Float32Array(J2t(a,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Fkt(e,t,n){const r=new Float32Array(t*n*4);return _t(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T${constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ct().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,K2t(n,t)):this.gl=ua(n),t=this.gl,ct().getNumber("WEBGL_VERSION")===2){const a=t;this.createVertexArray=()=>_t(a,()=>a.createVertexArray()),this.bindVertexArray=s=>_t(a,()=>a.bindVertexArray(s)),this.deleteVertexArray=s=>_t(a,()=>a.deleteVertexArray(s)),this.getVertexArray=()=>_t(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(t!=null){const a=t.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>_t(t,()=>a.createVertexArrayOES()),this.bindVertexArray=s=>_t(t,()=>a.bindVertexArrayOES(s)),this.deleteVertexArray=s=>_t(t,()=>a.deleteVertexArrayOES(s)),this.getVertexArray=()=>_t(t,()=>t.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ct().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=Kg(this.gl,a),Ri(this.gl,s))this.textureHalfFloatExtension=Kg(this.gl,s);else if(ct().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ri(this.gl,i))this.colorBufferHalfFloatExtension=Kg(this.gl,i);else if(ct().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ri(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Ri(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Ckt(this.gl),this.indexBuffer=Tkt(this.gl),this.framebuffer=pAt(this.gl),this.textureConfig=aO(this.gl,this.textureHalfFloatExtension)}get debug(){return ct().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;_t(t,()=>t.finish()),_t(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),_t(t,()=>t.deleteFramebuffer(this.framebuffer)),_t(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),_t(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),_t(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),$kt(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),Akt(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),kkt(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),_kt(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,r,i){this.throwIfDisposed(),Nkt(this.gl,t,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),Ekt(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),Ikt(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(v4(this.gl,this.framebuffer),this.outputTexture=null),_t(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,r){return this.downloadMatrixDriver(t,()=>Mkt(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,r,i,a,s){return Pkt(this.gl,t,n,r,i,a,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return Dkt(this.gl,t,n)}createBufferFromTexture(t,n,r){this.bindTextureToFrameBuffer(t);const i=Rkt(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,r;if(ct().getBool("WEBGL_FENCE_API_ENABLED")){const i=t,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=()=>{const s=i.clientWaitSync(a,0,0);return s===i.ALREADY_SIGNALED||s===i.CONDITION_SATISFIED},n=a}else ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(t,n,r){return this.downloadMatrixDriver(t,()=>Fkt(this.gl,n,r))}createProgram(t){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=Skt(n));const r=lAt(n);_t(n,()=>n.attachShader(r,this.vertexShader)),_t(n,()=>n.attachShader(r,t)),uAt(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&x$(n,i),i}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);const n=this.gl;_t(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Okt(n,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(_t(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&x$(this.gl,this.program),_t(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,r=!0){return this.throwIfDisposed(),r?gAt(this.gl,t,n):yAt(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),_t(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),vAt(this.gl,t,n,r)}setOutputMatrixTexture(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)}setOutputPackedMatrixTexture(t,n,r){this.throwIfDisposed();const[i,a]=mf(n,r);this.setOutputMatrixTextureDriver(t,i,a)}setOutputMatrixWriteRegion(t,n,r,i){this.setOutputMatrixWriteRegionDriver(r,t,i,n)}setOutputPackedMatrixWriteRegion(t,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&x$(this.gl,this.program),Yg(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}_t(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),_t(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Kg(this.gl,ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,a),a}const t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await rz(()=>this.disposed||this.isQueryAvailable(t,ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){const t=Lkt(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ct().platform&&(r=ct().platform.setTimeoutCustom.bind(ct().platform)),rz(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),w$(this.gl,t,this.framebuffer),this.debug&&Yg(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(w$(this.gl,this.outputTexture,this.framebuffer),this.debug&&Yg(this.gl)):v4(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(t,n,r){this.throwIfDisposed();const i=this.gl;w$(i,t,this.framebuffer),this.debug&&Yg(i),this.outputTexture=t,_t(i,()=>i.viewport(0,0,n,r)),_t(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(t,n,r,i){this.throwIfDisposed(),_t(this.gl,()=>this.gl.scissor(t,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Lkt(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:Bkt,bincountImpl:s8,bincountReduceImpl:zkt,bitwiseAndImpl:jkt,castImpl:Ukt,ceilImpl:Vkt,concatImpl:Wkt,equalImpl:Gkt,expImpl:qkt,expm1Impl:Hkt,floorImpl:Xkt,gatherNdImpl:Kkt,gatherV2Impl:Ykt,greaterImpl:Zkt,greaterEqualImpl:Qkt,lessImpl:Jkt,lessEqualImpl:tIt,linSpaceImpl:eIt,logImpl:nIt,maxImpl:rIt,maximumImpl:iIt,minimumImpl:aIt,multiplyImpl:sIt,negImpl:oIt,notEqualImpl:lIt,prodImpl:uIt,raggedGatherImpl:cIt,raggedRangeImpl:fIt,raggedTensorToTensorImpl:hIt,rangeImpl:dIt,rsqrtImpl:pIt,scatterImpl:mIt,sigmoidImpl:gIt,simpleAbsImpl:o8,sliceImpl:yIt,sparseFillEmptyRowsImpl:vIt,sparseReshapeImpl:bIt,sparseSegmentReductionImpl:l8,sqrtImpl:xIt,staticRegexReplaceImpl:wIt,stridedSliceImpl:SIt,stringNGramsImpl:CIt,stringSplitImpl:TIt,stringToHashBucketFastImpl:$It,subImpl:AIt,tileImpl:kIt,topKImpl:IIt,transposeImpl:uO,uniqueImpl:EIt}=_wt;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function Sr(e,t){return t===1?[e]:u8(e,t)}function OIt(e,t){if(e===1)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NIt{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=fr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Sr("rc",this.rank),r=_e(this.rank),i=this.getOutOfBoundsCondition(n),a=this.getSetup(n),s=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(t){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let a=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)a=`${t[t.length-1-s]},`+a;n.push(a)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${t[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";const n=t.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(t){const n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c8{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=fr(this.outputShape.length);let r="";for(let i=0;i<4;i++){let a="thisRC = rc;";i%2===1&&(a+="thisRC.z += 1;"),i>1&&(a+="thisRC.y += 1;"),r+=`
        ${a}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${_It(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?oO():sO(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${r}

        setOutput(result);
      }
    `}}function _It(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?OAt(["r","c","d"],"inputShape"):Zl(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RIt{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,n,r){const i=C4(n,r),a=T4(t,i,r);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const s=S4(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const l=this.freeTextures[a].pop();return this.usedTextures[a].push(l),l}let o;return i===Hn.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===Hn.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===Hn.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===Hn.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===Hn.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),o}releaseTexture(t,n,r,i){if(this.freeTextures==null)return;const a=C4(r,i),s=T4(n,a,i);s in this.freeTextures||(this.freeTextures[s]=[]);const o=S4(n,a,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=ct().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=o):(this.freeTextures[s].push(t),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[s],h=c&&c.indexOf(t);if(h==null||h<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[h]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function DIt(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function S4(e,t,n,r,i){const a=MIt(t,r);let s;if(i){const[l,c]=mf(e[0],e[1]);s=l*c}else{const[l,c]=hm(e[0],e[1]);s=l*c}const o=DIt(n,a);return s*o}function MIt(e,t){switch(e){case Hn.PACKED_2X2_FLOAT32:return i8(t);case Hn.PACKED_2X2_FLOAT16:return a8(t);case Hn.UNPACKED_FLOAT32:return e8(t);case Hn.UNPACKED_FLOAT16:return n8(t);case Hn.PACKED_4X1_UNSIGNED_BYTE:return r8(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function PIt(e){return ct().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Hn.PACKED_2X2_FLOAT32:Hn.UNPACKED_FLOAT32:e?Hn.PACKED_2X2_FLOAT16:Hn.UNPACKED_FLOAT16}function C4(e,t){if(e===fi.UPLOAD)return Hn.PACKED_2X2_FLOAT32;if(e===fi.RENDER||e==null)return PIt(t);if(e===fi.DOWNLOAD||e===fi.PIXELS)return Hn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function T4(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ta{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=fr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Ui="if (isnan(x)) return x;",FIt="return x;",$4="return abs(x);",LIt="return (x >= 0.0) ? x : (exp(x) - 1.0);",BIt=Ui+`
  return (x < 0.0) ? 0.0 : x;
`,zIt=Ui+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,eo="return x;",jIt="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIt="return x;",VIt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,WIt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,GIt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,qIt="return 1.0 / (1.0 + exp(-1.0 * x));";class oo{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=fr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HIt{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=fr(this.outputShape.length);const n=t.length,r=Sr("rc",n),i=_e(n),a=OIt(n,r),s=r.slice(-2),o=n<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XIt=MG,KIt=1e-7,YIt=1e-4,Jg={};function ZIt(e){return e in Jg||(Jg[e]={}),Jg[e]}const QIt=ct().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),JIt=600;function tEt(){return ct().global.screen==null?1024:ct().global.screen.height*ct().global.screen.width*window.devicePixelRatio*JIt/1024/1024}class B0 extends _k{nextDataId(){return B0.nextDataId++}constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ct().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(t!=null){if(t instanceof T$)n=t;else{const r=ua(ct().getNumber("WEBGL_VERSION"),t);n=new T$(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=ua(ct().getNumber("WEBGL_VERSION"));n=new T$(r),this.binaryCache=ZIt(ct().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new RIt(this.gpgpu),this.numMBBeforeWarning=tEt(),this.texData=new aW(this,ya())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,n,r,i,a,s){const o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:t,texShape:[i,a]},l.texShape=[i,a];const c=Zg(n),h=new w4(c,!1,s),d=this.runWebGLProgram(h,[o],r,[[i,a]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),d.dataId}write(t,n,r){if((ct().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ct().getBool("DEBUG"))&&this.checkNumericalProblems(t),r==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:t,usage:fi.UPLOAD,refCount:1}),i}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const n=this.texData.get(t);n.refCount++}decRef(t){if(this.texData.has(t)){const n=this.texData.get(t);n.refCount--}}move(t,n,r,i,a){if(ct().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:r,dtype:i,values:n,usage:fi.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const n=this.texData.get(t),{values:r,dtype:i,complexTensorInfos:a,slice:s,shape:o,isPacked:l}=n;if(s!=null){let p;l?p=new oo(o,eo):p=new Ta(o,eo);const g=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:i}],i),v=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),v}if(r!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return r;const c=this.activeTimers!=null;let h;c&&(h=Ir());let d;if(i==="complex64"){const p=this.readSync(a.real.dataId),g=this.readSync(a.imag.dataId);d=ws(p,g)}else d=this.getValuesFromTexture(t);return c&&(this.downloadWaitMs+=Ir()-h),this.convertAndCacheOnCPU(t,d)}async read(t){if(this.pendingRead.has(t)){const v=this.pendingRead.get(t);return new Promise(x=>v.push(x))}const n=this.texData.get(t),{values:r,shape:i,slice:a,dtype:s,complexTensorInfos:o,isPacked:l}=n;if(a!=null){let v;l?v=new oo(i,eo):v=new Ta(i,eo);const x=this.runWebGLProgram(v,[{dataId:t,shape:i,dtype:s}],s),b=this.read(x.dataId);return this.disposeIntermediateTensorInfo(x),b}if(r!=null)return this.convertAndCacheOnCPU(t);if(ct().getBool("DEBUG")&&!ct().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ct().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,h;if(s!=="complex64"&&ct().get("WEBGL_BUFFER_SUPPORTED")){h=this.decode(t);const v=this.texData.get(h.dataId);c=this.gpgpu.createBufferFromTexture(v.texture.texture,...Xg(i))}this.pendingRead.set(t,[]),s!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(s==="complex64"){const v=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),x=v[0],b=v[1];d=ws(x,b)}else if(c==null)d=this.getValuesFromTexture(t);else{const v=pt(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,v)}if(h!=null&&this.disposeIntermediateTensorInfo(h),c!=null){const v=this.gpgpu.gl;_t(v,()=>v.deleteBuffer(c))}const p=this.convertAndCacheOnCPU(t,d),g=this.pendingRead.get(t);return this.pendingRead.delete(t),g.forEach(v=>v(p)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&ya().removeDataId(t,this),this.pendingDeletes--),p}readToGPU(t,n={}){const r=this.texData.get(t),{values:i,shape:a,slice:s,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(s!=null){let g;l?g=new oo(a,eo):g=new Ta(a,eo);const v=this.runWebGLProgram(g,[{dataId:t,shape:a,dtype:o}],o),x=this.readToGPU(v,n);return this.disposeIntermediateTensorInfo(v),x}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const h=this.decode(t,n.customTexShape),d=ya().makeTensorFromTensorInfo(h),p=this.texData.get(h.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(t){const n=this.readSync(t.dataId);if(t.dtype==="string")try{const r=n.map(i=>po(i));return ie(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ie(t.shape,t.dtype,n)}checkNumericalProblems(t){if(t!=null)for(let n=0;n<t.length;n++){const r=t[n];if(!rAt(r))throw ct().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:n,dtype:r,isPacked:i}=this.texData.get(t),a=pt(n);if(ct().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(t),g=this.texData.get(p.dataId),v=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...Xg(n)).subarray(0,a);return this.disposeIntermediateTensorInfo(p),v}const s=ct().getBool("WEBGL_PACK")&&i===!0,o=s?Zg(n):n,l=s?new bkt(o):new vkt(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:t}],"float32"),h=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,t();const a=kl(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),s=kl(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(a);o.kernelMs=Fft(l),o.getExtraProfileInfo=()=>l.map((c,h)=>({name:s[h],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ir(),endMs:null}}endTimer(t){return ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Ir(),t)}async getQueryTime(t){if(ct().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(t,n=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(n?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!n&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:r}=this.texData.get(t);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:n,dtype:r,texShape:i,usage:a,isPacked:s,slice:o}=this.texData.get(t),l=o&&o.origDataId||t,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,a,s)));const h=this.texData.get(t);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,n=QIt){return ct().getBool("WEBGL_CPU_FORWARD")&&t.every(r=>this.texData.get(r.dataId).texture==null&&pt(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(t){ci("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=t.dataSync();return XIt(t.shape,n)}packedUnaryOp(t,n,r){const i=new oo(t.shape,n),a=this.compileAndRun(i,[t],r);return ya().makeTensorFromTensorInfo(a)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const i=o8(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,i)}if(ct().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,$4,t.dtype);const n=new Ta(t.shape,$4),r=this.compileAndRun(n,[t]);return ya().makeTensorFromTensorInfo(r)}makeTensorInfo(t,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&Jd(r[0])){const a=r.map(s=>co(s));i=this.write(a,t,n)}else i=this.write(r,t,n);return this.texData.get(i).usage=null,{dataId:i,shape:t,dtype:n}}makeOutput(t,n,r){return ya().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,r),this)}unpackTensor(t){const n=new HIt(t.shape);return this.runWebGLProgram(n,[t],t.dtype)}packTensor(t){const n=new NIt(t.shape);return this.runWebGLProgram(n,[t],t.dtype,null,!0)}packedReshape(t,n){const r=[Xc(t.shape),...Kc(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},a=[Xc(n),...Kc(n)],s=new c8(a,r),o=!0,l=[r],c=this.runWebGLProgram(s,[i],t.dtype,l,o);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(t,n){const r=this.texData.get(t),{isPacked:i,shape:a,dtype:s}=r;if(n!=null){const p=pt(a),g=n[0]*n[1]*4;V(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=Zg(a);let l;i?l=new ykt(o):l=new gkt(o);const c=!0,h=[n??Xg(o)],d=this.runWebGLProgram(l,[{shape:o,dtype:s,dataId:t}],s,h,c,n);return{dtype:s,shape:a,dataId:d.dataId}}runWebGLProgram(t,n,r,i,a=!1,s){const o=this.makeTensorInfo(t.outputShape,r),l=this.texData.get(o.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===jd.DENSE){const w=s??Xg(t.outputShape);l.texShape=w.map(S=>S*2)}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),pt(o.shape)===0)return l.values=sr(o.dtype,0),o;const c=[],h=n.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let S=this.texData.get(w.dataId);if(S.texture==null){if(!t.packedInputs&&pt(w.shape)<=ct().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:S.values};t.packedInputs&&(S.isPacked=!0,S.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!S.isPacked!=!!t.packedInputs)w=S.isPacked?this.unpackTensor(w):this.packTensor(w),c.push(w),S=this.texData.get(w.dataId);else if(S.isPacked&&!_v(S.shape,w.shape)){const T=w,$=w.shape;w.shape=S.shape,w=this.packedReshape(w,$),c.push(w),S=this.texData.get(w.dataId),T.shape=$}return{shape:w.shape,texData:S,isUniform:!1}});this.uploadToGPU(o.dataId);const d={shape:o.shape,texData:l,isUniform:!1},p=mkt(t,h,d),g=this.getAndSaveBinary(p,()=>dkt(this.gpgpu,t,h,d)),v=this.activeTimers!=null;let x;v&&(x=this.startTimer()),ct().get("ENGINE_COMPILE_ONLY")||pkt(this.gpgpu,g,h,d,i),c.forEach(w=>this.disposeIntermediateTensorInfo(w)),v&&(x=this.endTimer(x),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(x)}));const b=ct().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const w=Ir();w-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!ct().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){const w=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),w}return o}compileAndRun(t,n,r,i,a=!1){return r=r||n[0].dtype,this.runWebGLProgram(t,n,r,i,a)}getAndSaveBinary(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ct().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=st(()=>{if(!ct().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=ct().getBool("DEBUG");ct().set("DEBUG",!1);const n=this.abs(Se(1e-8)).dataSync()[0];if(ct().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?KIt:YIt}uploadToGPU(t){const n=this.texData.get(t),{shape:r,dtype:i,values:a,texture:s,usage:o,isPacked:l}=n;if(s!=null)return;const c=this.activeTimers!=null;let h;c&&(h=Ir());let d=n.texShape;if(d==null&&(d=wAt(r,l),n.texShape=d),a!=null){const p=Zg(r);let g,v=d[1],x=d[0];const b=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(l||!b)&&([v,x]=mf(d[0],d[1])),l?g=new wkt(p,b):g=new w4(p,b);const w=b?[x,v]:d,S=this.makeTensorInfo(w,i),T=this.texData.get(S.dataId);b?T.usage=fi.PIXELS:T.usage=fi.UPLOAD,T.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(S.dataId),v,x,a);const $=[[x,v]],I=this.runWebGLProgram(g,[S],i,$,!0),O=this.texData.get(I.dataId);n.texShape=O.texShape,n.isPacked=O.isPacked,n.usage=O.usage,ct().get("ENGINE_COMPILE_ONLY")?this.disposeData(I.dataId):(n.texture=O.texture,n.values=null,this.texData.delete(I.dataId)),this.disposeIntermediateTensorInfo(S),c&&(this.uploadWaitMs+=Ir()-h)}else{const p=this.acquireTexture(d,o,i,l);n.texture=p}}convertAndCacheOnCPU(t,n){const r=this.texData.get(t),{dtype:i}=r;return n!=null&&(r.values=eEt(n,i)),r.values}acquireTexture(t,n,r,i){if(this.numBytesInGPU+=this.computeBytes(t,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,n,i)}computeBytes(t,n){return t[0]*t[1]*lv(n)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(n));return Promise.all(t)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(a){throw a}});t.push(r)}return Promise.all(t)}}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await QG(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(K5(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const t of Object.values(this.binaryCache)){this.gpgpu.buildVao(t.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:a,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:l}=t8(this.gpgpu,t.program,t.webGLProgram);t.variablesLocations=n,t.customUniformLocations=r,t.infLoc=i,t.nanLoc=a,t.outShapeLocation=s,t.outShapeStridesLocation=o,t.outTexShapeLocation=l}}createTensorFromGPUData(t,n,r){t.channels=t.channels||"RGBA";const{texture:i,height:a,width:s,channels:o}=t,l=ya().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,n,r,a,s,o);return ya().makeTensorFromDataId(c,n,r,l)}}B0.nextDataId=0;function eEt(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){const n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}else throw new Error(`Unknown dtype ${t}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */XW()&&QW("webgl",()=>new B0,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cO=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Bl{constructor(t,n,r){this.variableNames=["A","B"],this.outputShape=Jt(n,r),this.enableShapeUniforms=fr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jl=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class xf{constructor(t,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Jt(n,r);const a=this.outputShape.length;this.enableShapeUniforms=fr(a);let s="";if(i)if(a===0||pt(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${_e(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Sr("coords",a);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zr(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const nEt={kernelName:xp,backendName:"webgl",kernelFunc:Zr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Po(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,a=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(a.dataId),o=Zr({inputs:{x:r},backend:n}),l=Zr({inputs:{x:i},backend:n});return s.complexTensorInfos={real:o,imag:l},a}const rEt={kernelName:Gk,backendName:"webgl",kernelFunc:Po};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f8="return (a < 0.) ? b * a : a;",h8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function iEt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:a}=r,s=n.makeTensorInfo([],"float32",Io(a,"float32")),o=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xf(h8,i.shape,s.shape):new Bl(f8,i.shape,s.shape),l=n.runWebGLProgram(o,[i,s],"float32");return n.disposeIntermediateTensorInfo(s),l}const aEt={kernelName:_b,backendName:"webgl",kernelFunc:iEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8="return (a < 0.) ? b * a : a;",p8=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function sEt(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t,a=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xf(p8,r.shape,i.shape):new Bl(d8,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],"float32")}const oEt={kernelName:Zb,backendName:"webgl",kernelFunc:sEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wf="if (isnan(x)) return x;";function ge({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:a})=>{const{x:s}=i,o=a,l=r||s.dtype;if(o.shouldExecuteOnCPU([s])&&n!=null){const d=o.texData.get(s.dataId),p=n(d.values,l);return o.makeTensorInfo(s.shape,l,p)}const c=ct().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let h;return c?h=new oo(s.shape,t):h=new Ta(s.shape,e),o.runWebGLProgram(h,[s],l)}}function Qn({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:s,backend:o})=>{const{a:l,b:c}=s,h=o;if(r&&l.dtype==="complex64"){const v=h.texData.get(l.dataId),x=h.texData.get(c.dataId),[b,w]=[[v.complexTensorInfos.real,x.complexTensorInfos.real],[v.complexTensorInfos.imag,x.complexTensorInfos.imag]].map(T=>{const[$,A]=T,I={dataId:$.dataId,dtype:$.dtype,shape:l.shape},O={dataId:A.dataId,dtype:A.dtype,shape:c.shape},N=new Bl(e,l.shape,c.shape);return h.runWebGLProgram(N,[I,O],Kr($.dtype,A.dtype))}),S=Po({inputs:{real:b,imag:w},backend:h});return h.disposeIntermediateTensorInfo(b),h.disposeIntermediateTensorInfo(w),S}const d=a||Kr(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||h.shouldExecuteOnCPU([l,c]))&&i!=null){const v=h.texData.get(l.dataId).values,x=h.texData.get(c.dataId).values,b=l.dtype==="string"?Ss(v):v,w=l.dtype==="string"?Ss(x):x,[S,T]=i(l.shape,c.shape,b,w,d),$=h.makeTensorInfo(T,d),A=h.texData.get($.dataId);return A.values=S,$}const p=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let g;return p?g=new xf(t,l.shape,c.shape,n):g=new Bl(e,l.shape,c.shape),h.runWebGLProgram(g,[l,c],d)}}function Ud(e,t=!1){if(e==="linear")return t?UIt:FIt;if(e==="relu")return t?WIt:BIt;if(e==="elu")return t?VIt:LIt;if(e==="relu6")return t?GIt:zIt;if(e==="prelu")return t?p8:d8;if(e==="leakyrelu")return t?h8:f8;if(e==="sigmoid")return t?qIt:jIt;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m8{constructor(t,n,r,i=!1,a=!1,s=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=fr(this.outputShape.length);const h=i?t[1]:t[2],d=Math.ceil(h/2),p=i?"i * 2, rc.y":"rc.y, i * 2",g=a?"rc.z, i * 2":"i * 2, rc.z",v=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",w="";o&&(l?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:b=`vec4 activation(vec4 x) {
          ${o}
        }`,w="result = activation(result);");const S=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let T="rc.x",$="rc.x";t[0]<n[0]?T=`imod(rc.x, ${t[0]})`:n[0]<t[0]&&($=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${T};
        int batchB = ${$};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${v[0]} * ${x[0]});
          result += (${v[1]} * ${x[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${S}

        ${w}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class k4{constructor(t,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Jt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4="return a * b;";function fO(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,a=Kr(r.dtype,i.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),c=new k4(A4.REAL,r.shape,i.shape),h=new k4(A4.IMAG,r.shape,i.shape),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],p=n.runWebGLProgram(c,d,"float32"),g=n.runWebGLProgram(h,d,"float32"),v=Po({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),v}if(n.shouldExecuteOnCPU([r,i])){const o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[c,h]=sIt(r.shape,i.shape,o.values,l.values,a),d=n.makeTensorInfo(h,a),p=n.texData.get(d.dataId);return p.values=c,d}let s;return ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new xf(I4,r.shape,i.shape):s=new Bl(I4,r.shape,i.shape),n.runWebGLProgram(s,[r,i],a)}const lEt={kernelName:Ep,backendName:"webgl",kernelFunc:fO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEt(e,t,n){const r=[Xc(e.shape),...Kc(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},a=[Xc(t),...Kc(t)],s=new c8(a,r),o=!0,l=[r],c=n.runWebGLProgram(s,[i],e.dtype,l,o);return{dataId:c.dataId,shape:t,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ot(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:a}=r,s=n,o=pt(i.shape),l=oW(a,o),c=pt(l);V(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const h=s.texData.get(i.dataId);return h.isPacked&&!_v(i.shape,l)&&!(h.texture!==null&&_v(h.shape,l))?uEt(i,l,s):(s.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const cEt={kernelName:Jb,backendName:"webgl",kernelFunc:Ot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E4{constructor(t,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:s}=t;this.outputShape=[i,s];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${Lc(d)?d.toPrecision(2):d}, ones);`}let h="";a%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fEt{constructor(t,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:s}=t;this.outputShape=[i,s];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const h=Math.floor(r/4)*4,d=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";n==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):n==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let v="";a%r>0&&(v=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${v}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${h}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${h};
        if (${d===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEt(e){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const n=t.length?t[t.length-1].outSize:e[1],r=S0(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function tu(e,t,n,r){const i=hEt(e.shape);let a=e;for(let s=0;s<i.length;s++){const{inSize:o,windowSize:l,outSize:c}=i[s];let h,d;n==="mean"?h=s===0?new E4({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},o):new E4({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c}):h=new fEt({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},n),d=a,a=r.runWebGLProgram(h,[a],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dEt{constructor(t,n){this.variableNames=["A"];const r=new Array(t.length);for(let s=0;s<r.length;s++)r[s]=t[n[s]];this.outputShape=r,this.rank=r.length;const i=_e(this.rank),a=pEt(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function pEt(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mEt{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(t.length);for(let h=0;h<r.length;h++)r[h]=t[n[h]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=_e(this.rank),a=u8("rc",this.rank),s=new Array(this.rank);for(let h=0;h<n.length;h++)s[n[h]]=a[h];const o=`vec2(${s.slice(-2).join()})`,l=`++${a[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${s.join()}), ${o})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z0(e,t,n){const r=ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mEt(e.shape,t):new dEt(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEt(e,t,n,r){const i=t,a=e.shape.length,s=ae(i,e.shape);let o=s;const l=en(o,a),c=l!=null;let h=e;c&&(h=z0(e,l,r),o=hn(o.length,a)),Zn("sum",o,a);const[d,p]=jn(h.shape,o);let g=d;n&&(g=bn(d,s));const v=pt(p),b=pt(e.shape)/v,w=Ot({inputs:{x:h},attrs:{shape:[b,v]},backend:r}),S=$I(e.dtype),T=tu(w,S,"sum",r),$=Ot({inputs:{x:T},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(T),c&&r.disposeIntermediateTensorInfo(h),$}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;return gEt(i,a,s,n)}const yEt={kernelName:a0,backendName:"webgl",kernelFunc:j0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tr(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:a}=r,s=n,o=i.shape.length,l=new Array(o);for(let h=0;h<l.length;h++)l[h]=i.shape[a[h]];let c;if(s.shouldExecuteOnCPU([i])){const d=s.texData.get(i.dataId).values,p=uO(d,i.shape,i.dtype,a,l);c=s.makeTensorInfo(l,i.dtype);const g=s.texData.get(c.dataId);g.values=p}else c=z0(i,a,s);return c}const vEt={kernelName:sc,backendName:"webgl",kernelFunc:Tr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g8=1e3;function Rv({a:e,b:t,transposeA:n,transposeB:r,backend:i,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:l=null}){const c=e.shape.length,h=t.shape.length,d=n?e.shape[c-2]:e.shape[c-1],p=r?t.shape[h-1]:t.shape[h-2],g=n?e.shape[c-1]:e.shape[c-2],v=r?t.shape[h-2]:t.shape[h-1],x=e.shape.slice(0,-2),b=t.shape.slice(0,-2),w=pt(x),S=pt(b),$=Jt(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([g,v]);V(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);const A=n?[w,d,g]:[w,g,d],I=r?[S,v,p]:[S,p,v],O=Ot({inputs:{x:e},backend:i,attrs:{shape:A}}),N=Ot({inputs:{x:t},backend:i,attrs:{shape:I}}),_=[O,N],R=Math.max(w,S),E=n?O.shape[1]:O.shape[2],F=a!=null,M=s!=null,B=l==="leakyrelu",j=l!=null?Ud(l,!0):null,P=F||M||B||j!=null;let U;if((g===1||v===1)&&E>g8&&P===!1){let q=O,L=N;n&&(q=Tr({inputs:{x:O},backend:i,attrs:{perm:[0,2,1]}}),_.push(q)),r&&(L=Tr({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),_.push(L));const G=v!==1,H=v===1;let Y=q;G&&(Y=Ot({inputs:{x:q},backend:i,attrs:{shape:[R,E,1]}}),_.push(Y));const ot=v===1?2:1;let ht=L;H&&(ht=Ot({inputs:{x:L},backend:i,attrs:{shape:[R,1,E]}}),_.push(ht));const yt=fO({inputs:{a:Y,b:ht},backend:i});U=j0({inputs:{x:yt},backend:i,attrs:{axis:ot,keepDims:!0}}),_.push(yt)}else{const q=Kr(e.dtype,t.dtype),L=new m8(A,I,[R,g,v],n,r,F,j,M,B),G=[O,N];if(a!=null&&G.push(a),M&&G.push(s),B){const H=i.makeTensorInfo([],"float32",Io(o,"float32"));G.push(H),_.push(H)}U=i.runWebGLProgram(L,G,q)}const W=Ot({inputs:{x:U},backend:i,attrs:{shape:$}});_.push(U);for(const q of _)i.disposeIntermediateTensorInfo(q);return W}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEt(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:a,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:h,leakyreluAlpha:d}=r;return Rv({a:i,b:a,transposeA:l,transposeB:c,backend:n,bias:s,preluActivationWeights:o,leakyreluAlpha:d,activation:h})}const xEt={kernelName:uv,backendName:"webgl",kernelFunc:bEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4="return abs(x);";function wEt(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const a=n.texData.get(r.dataId),s=o8(a.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let i;return ct().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new oo(r.shape,O4):i=new Ta(r.shape,O4),n.runWebGLProgram(i,[r],r.dtype)}const SEt={kernelName:hb,backendName:"webgl",kernelFunc:wEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CEt=Ui+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,TEt=ge({opSnippet:CEt}),$Et={kernelName:tp,backendName:"webgl",kernelFunc:TEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AEt=Ui+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,kEt=ge({opSnippet:AEt}),IEt={kernelName:ep,backendName:"webgl",kernelFunc:kEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N4="return a + b;",EEt=Qn({opSnippet:N4,packedOpSnippet:N4,supportsComplex:!0,cpuKernelImpl:Bkt}),OEt={kernelName:lf,backendName:"webgl",kernelFunc:EEt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NEt{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((a,s)=>`T${s}`);const r=[];this.variableNames.forEach(a=>{r.push(`float v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Et{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((a,s)=>`T${s}`);const r=[];this.variableNames.forEach(a=>{r.push(`vec4 v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uy(e){const{inputs:t,backend:n}=e,r=t;if(r.length===1)return Zr({inputs:{x:r[0]},backend:n});if(r.length>ct().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=uy({inputs:r.slice(0,l),backend:n}),h=uy({inputs:r.slice(l),backend:n});return uy({inputs:[c,h],backend:n})}const i=r.map(l=>l.dtype).reduce((l,c)=>Kr(l,c)),a=r.map(l=>l.shape),o=ct().getBool("WEBGL_PACK")?new _Et(r[0].shape,a):new NEt(r[0].shape,a);return n.runWebGLProgram(o,r,i)}const REt={kernelName:Lk,backendName:"webgl",kernelFunc:uy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r,o=i.shape.length,l=ae(a,i.shape);let c=l;const h=en(c,o);let d=i;h!=null&&(d=Tr({inputs:{x:i},backend:n,attrs:{perm:h}}),c=hn(c.length,o)),Zn("all",c,o);const[p,g]=jn(d.shape,c),v=pt(g),x=Ot({inputs:{x:d},backend:n,attrs:{shape:[-1,v]}}),b=tu(x,x.dtype,"all",n);let w;if(s){const S=bn(p,l);w=Ot({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=Ot({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),h!=null&&n.disposeIntermediateTensorInfo(d),w}const MEt={kernelName:Bk,backendName:"webgl",kernelFunc:DEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r,o=i.shape.length,l=ae(a,i.shape);let c=l;const h=en(c,o);let d=i;h!=null&&(d=Tr({inputs:{x:i},backend:n,attrs:{perm:h}}),c=hn(c.length,o)),Zn("any",c,o);const[p,g]=jn(d.shape,c),v=pt(g),x=Ot({inputs:{x:d},backend:n,attrs:{shape:[-1,v]}}),b=tu(x,x.dtype,"any",n);let w;if(s){const S=bn(p,l);w=Ot({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=Ot({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),h!=null&&n.disposeIntermediateTensorInfo(d),w}const FEt={kernelName:zk,backendName:"webgl",kernelFunc:PEt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LEt{constructor(t,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:a,outSize:s}=t;r||this.variableNames.push("bestIndicesA"),this.outputShape=[a,s];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BEt{constructor(t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,V(t.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const a=t[t.length-1],s=Math.ceil(a/n);this.outputShape=t.slice(0,-1),s>1&&this.outputShape.push(s),i||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=_e(l),h=Sr("coords",l);let d,p;if(s===1){p=l+1;const N=_e(p);d=`
        ${N} sourceLocR = ${N}(${h.join()}, 0);
        ++${h[l-1]};
        ${N} sourceLocG = ${N}(${h.join()}, 0);
        ++${h[l-2]};
        ${N} sourceLocA = ${N}(${h.join()}, 0);
        --${h[l-1]};
        ${N} sourceLocB = ${N}(${h.join()}, 0);
        --${h[l-2]};`}else p=l,d=`
        ${c} sourceLocR = coords;
        ++${h[l-1]};
        ${c} sourceLocG = coords;
        ++${h[l-2]};
        ${c} sourceLocA = coords;
        --${h[l-1]};
        ${c} sourceLocB = coords;
        --${h[l-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),v="."+g[p-1],x=g.map(N=>"int "+N),b=Sr("sourceLocR",p-1).concat("inIdx.r"),w=Sr("sourceLocG",p-1).concat("inIdx.g"),S=Sr("sourceLocB",p-1).concat("inIdx.b"),T=Sr("sourceLocA",p-1).concat("inIdx.a"),$=r==="max"?"greaterThan":"lessThan",A=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${T.join()})));`,I=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${w.join()}) : 0.,
            hasNextRow ? getAChannel(${S.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${T.join()}) : 0.)`,O=i?"":`
      float getBestIndicesAChannel(${x.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${x.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${O}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${h[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${h[l-2]} < ${o[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${v}, sourceLocG${v},
          sourceLocB${v}, sourceLocA${v}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${I};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${A}
          vec4 candidate = ${I};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${$}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y8(e,t,n,r=null){let i=t.shape[0],a=t.shape[1];r!=null&&(i=r.shape[0],a=r.shape[1]);const s=S0(a),o={windowSize:s,inSize:a,batchSize:i,outSize:Math.ceil(a/s)},l=new LEt(o,n,r==null),c=[t];r!=null&&c.push(r);const h=e.runWebGLProgram(l,c,"int32");if(h.shape[1]===1)return h;const d=y8(e,t,n,h);return e.disposeIntermediateTensorInfo(h),d}function v8(e,t,n,r=null){const i=r!=null?r.shape:t.shape,a=i[i.length-1],s=S0(a),o=new BEt(i,s,n,r==null),l=r==null?[t]:[t,r],c=e.runWebGLProgram(o,l,"int32");if(c.shape.length===t.shape.length){const h=v8(e,t,n,c);return e.disposeIntermediateTensorInfo(c),h}return c}function b8(e,t,n,r){const i=[n];if(Zn("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!ct().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const a=[],s=e.texData.get(t.dataId),o=s!==null&&s.isPacked;let l=t;o&&(l=e.unpackTensor(t),a.push(l));const[c,h]=jn(l.shape,i),d=pt(h),p=Ot({inputs:{x:l},backend:e,attrs:{shape:[-1,d]}});a.push(p);const g=y8(e,p,r);a.push(g);const v=Ot({inputs:{x:g},backend:e,attrs:{shape:c}});return a.forEach(x=>e.disposeIntermediateTensorInfo(x)),v}return v8(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;let s=ae(a,i.shape);const o=en(s,i.shape.length);let l=i;const c=[];o!=null&&(l=Tr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),s=hn(s.length,l.shape.length)),Zn("argMax",[s[0]],l.shape.length);const h=b8(n,l,s[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),h}const jEt={kernelName:db,backendName:"webgl",kernelFunc:zEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;let s=ae(a,i.shape);const o=en(s,i.shape.length);let l=i;const c=[];o!=null&&(l=Tr({inputs:{x:i},backend:n,attrs:{perm:o}}),c.push(l),s=hn(s.length,l.shape.length)),Zn("argMin",[s[0]],l.shape.length);const h=b8(n,l,s[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),h}const VEt={kernelName:pb,backendName:"webgl",kernelFunc:UEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WEt=Ui+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,GEt=ge({opSnippet:WEt}),qEt={kernelName:np,backendName:"webgl",kernelFunc:GEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HEt=Ui+"return log(x + sqrt(x * x + 1.0));",XEt=ge({opSnippet:HEt}),KEt={kernelName:rp,backendName:"webgl",kernelFunc:XEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YEt=Ui+`
  return atan(x);
`,ZEt=ge({opSnippet:YEt}),QEt={kernelName:ip,backendName:"webgl",kernelFunc:ZEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JEt=cO+`
  return atan(a, b);
`,tOt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jl+`
  return result;
`,eOt=Qn({opSnippet:JEt,packedOpSnippet:tOt}),nOt={kernelName:sp,backendName:"webgl",kernelFunc:eOt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rOt=Ui+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,iOt=ge({opSnippet:rOt}),aOt={kernelName:ap,backendName:"webgl",kernelFunc:iOt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vd{constructor(t,n,r,i=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=t.filterWidth,o=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,h=t.dilationWidth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,g=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;const x=n==="avg",b=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,w=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let S="0.0";if(x||(S="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${g}, ${v});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${h}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?a?b:w:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const T="max";let $=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&($="avgValue / max(count, 1.0)");const A=Math.floor(s/4)*4,I=s%4,O=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${T}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${g}, ${v});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${A}; wC += 4) {
            int xC = xCCorner + wC * ${h};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              getValue(batch, xR, xC + 2 * ${h}, d),
              getValue(batch, xR, xC + 3 * ${h}, d)
            );

            ${O}
          }

          int xC = xCCorner + ${A};
          if (${I===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${O}
          } else if (${I===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              initializationValue,
              initializationValue
            );

            ${O}
          } else if (${I===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              getValue(batch, xR, xC + 2 * ${h}, d),
              initializationValue
            );

            ${O}
          }
        }
        setOutput(${$});
      }
    `}}class hO{constructor(t,n,r,i=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=t.filterWidth,o=t.strideDepth,l=t.strideHeight,c=t.strideWidth,h=t.dilationDepth,d=t.dilationHeight,p=t.dilationWidth,g=t.effectiveFilterDepth,v=t.effectiveFilterHeight,x=t.effectiveFilterWidth,b=t.padInfo.front,w=t.padInfo.top,S=t.padInfo.left;this.outputShape=t.outShape;const T=n==="avg";let $="0.0";if(T||($="-1.0 / 1e-20"),r){const R=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${b}, ${w}, ${S});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${h}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${v};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${x};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${R} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?a?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${v} * ${x} +
                      wR * ${x} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const A="max";let I=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(I="avgValue / max(count, 1.0)");const O=Math.floor(s/4)*4,N=s%4,_=`
      if (${T}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${A}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${b}, ${w}, ${S});
      const float initializationValue = ${$};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${$});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${h}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${v};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${O}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${_}
            }

            int xC = xCCorner + ${O};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${_}
            }
          }
        }
        setOutput(${I});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sOt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;dm(i,"avgPool");const{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r,c=1;V(ur(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const h=zi(i.shape,a,s,c,o,l);if(h.filterWidth===1&&h.filterHeight===1&&Te(h.inShape,h.outShape))return Zr({inputs:{x:i},backend:n});const d=new Vd(h,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const oOt={kernelName:mb,backendName:"webgl",kernelFunc:sOt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lOt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,h=[1,1,1],d=ks(i.shape,a,s,h,o,l,c),p=new hO(d,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}const uOt={kernelName:gb,backendName:"webgl",kernelFunc:lOt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cOt{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,i=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,o=t.dilationWidth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,h=l-1-t.padInfo.top,d=c-1-t.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${h}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class fOt{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,r=t.filterHeight,i=t.filterWidth,a=t.strideDepth,s=t.strideHeight,o=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,h=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,g=t.effectiveFilterWidth,v=d-1-t.padInfo.front,x=p-1-t.padInfo.top,b=g-1-t.padInfo.left,w=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${v}, ${x}, ${b});
      const float avgMultiplier = float(${w});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${h}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hOt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,s=a,{filterSize:o,strides:l,pad:c,dimRoundingMode:h}=r,d=[1,1,1],p=ks(s.shape,o,l,d,c,h),g=new fOt(p);return n.runWebGLProgram(g,[i],s.dtype)}const dOt={kernelName:Uk,backendName:"webgl",kernelFunc:hOt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pOt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,s=a;dm([i,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,h=zi(s.shape,o,l,1,c),d=new cOt(h);return n.runWebGLProgram(d,[i],s.dtype)}const mOt={kernelName:jk,backendName:"webgl",kernelFunc:pOt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gOt(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:a}=t,{transposeA:s,transposeB:o}=r;return Rv({a:i,b:a,transposeA:s,transposeB:o,backend:n})}const yOt={kernelName:yb,backendName:"webgl",kernelFunc:gOt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vOt{constructor(t,n,r,i,a,s){this.outputShape=[],this.variableNames=["x","mean","variance"],Jt(t,n),Jt(t,r);let o="0.0";i!=null&&(Jt(t,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";a!=null&&(Jt(t,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bOt{constructor(t,n,r,i,a,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Jt(t,n),Jt(t,r);let o="vec4(0.0)";i!=null&&(Jt(t,i),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";a!=null&&(Jt(t,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xOt=({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:i,variance:a,offset:s,scale:o}=e;V(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(s==null||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,i,a];let h=null;s!=null&&(h=s.shape,c.push(s));let d=null;o!=null&&(d=o.shape,c.push(o));const p=ct().getBool("WEBGL_PACK_NORMALIZATION")?new bOt(r.shape,i.shape,a.shape,h,d,l):new vOt(r.shape,i.shape,a.shape,h,d,l);return t.runWebGLProgram(p,c,c[0].dtype)},wOt={kernelName:Eb,backendName:"webgl",kernelFunc:xOt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SOt{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const n=_e(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=COt(this.rank);let i;const a=t.map((s,o)=>`sourceLoc.${$A[o]} = start[${o}] + coords.${$A[o]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const $A=["x","y","z","w","u","v"];function COt(e){if(e===1)return"sourceLoc";if(e<=6)return $A.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TOt{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=_e(this.rank),r=Sr("coords",this.rank),i=Sr("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,s=`getChannel(getSource(${i.join()}), ${a})`,o=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${s};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${t[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${s};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((h,d)=>`start[${d}]`).join()});`:t.map((h,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ot(e,t,n,r){const i=r.texData.get(e.dataId),a=r.makeTensorInfo(n,e.dtype),s=r.texData.get(a.dataId);Object.assign(s,i),s.refCount=1,s.shape=n,s.dtype=e.dtype;let o=oE(t,Bt(e.shape));i.slice&&(o+=i.slice.flatOffset),s.slice={flatOffset:o,origDataId:i.slice&&i.slice.origDataId||e.dataId};const l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),a}function Sf(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,size:s}=r,[o,l]=w0(i,a,s);if(iE(i,o,l),pt(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=n.texData.get(i.dataId),p=yIt(d.values,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,p)}const{isPacked:c}=n.texData.get(i.dataId),h=sE(i.shape,o,l);if(c||!h){const d=ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TOt(l):new SOt(l),p=[o];return n.runWebGLProgram(d,[i],i.dtype,p)}return n.uploadToGPU(i.dataId),$Ot(i,o,l,n)}const AOt={kernelName:i0,backendName:"webgl",kernelFunc:Sf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kOt=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,crops:s}=r;V(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((S,T)=>S*T),l=tm(i.shape,a,o),c=em(l.length,a.length),h=nm(i.shape,a,o),d=hE(s,a.length),p=dE(h,s,a.length),g=[],v=Ot({inputs:{x:i},backend:n,attrs:{shape:l}}),x=Tr({inputs:{x:v},backend:n,attrs:{perm:c}}),b=Ot({inputs:{x},backend:n,attrs:{shape:h}}),w=Sf({inputs:{x:b},backend:n,attrs:{begin:d,size:p}});return g.push(v),g.push(x),g.push(b),g.forEach(S=>n.disposeIntermediateTensorInfo(S)),w},IOt={kernelName:vb,backendName:"webgl",kernelFunc:kOt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:s}=r,o=n.readSync(i.dataId),l=n.readSync(a.dataId),c=s8(o,l,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,c)}const OOt={kernelName:Vk,backendName:"webgl",kernelFunc:EOt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOt=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,_Ot=`
  return float(int(a.r) & int(b.r));
`;function ROt(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,a=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=ct().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||s===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(i.dataId).values,[h,d]=jkt(r.shape,i.shape,l,c,r.dtype),p=n.makeTensorInfo(d,r.dtype),g=n.texData.get(p.dataId);return g.values=h,p}let o;return a?o=new xf(NOt,r.shape,i.shape,!1):o=new Bl(_Ot,r.shape,i.shape),n.runWebGLProgram(o,[r,i],r.dtype)}const DOt={kernelName:Wk,backendName:"webgl",kernelFunc:ROt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MOt(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,a=n.readSync(r.dataId),s=n.readSync(i.dataId),o=Jt(Array.from(a),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const POt={kernelName:dW,backendName:"webgl",kernelFunc:MOt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FOt="return float(a != b);",x8=Qn({opSnippet:FOt,cpuKernelImpl:lIt,dtype:"bool"}),LOt={kernelName:qb,backendName:"webgl",kernelFunc:x8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mm(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.texData.get(r.dataId);return Zr({inputs:{x:i.complexTensorInfos.real},backend:n})}const BOt={kernelName:mI,backendName:"webgl",kernelFunc:mm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zOt="return float(int(x));";function jOt(e,t){const n=new Ta(e.shape,zOt),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AA(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return Zr({inputs:{x:i},backend:n});const s=Fn(i.shape),o=AA({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Po({inputs:{real:o,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(o),l}if(i.dtype==="complex64"){const s=mm({inputs:{input:i},backend:n}),o=AA({inputs:{x:s},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(s),o}if(!lW(i.dtype,a)){const s=Zr({inputs:{x:i},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:a}}if(n.shouldExecuteOnCPU([i])){const s=n.texData.get(i.dataId).values,[o,l,c]=Ukt(s,i.shape,i.dtype,a);return n.makeTensorInfo(o,l,c)}if(a==="int32")return jOt(i,n);if(a==="bool"){const s=n.makeTensorInfo([],"bool",sr("bool",1)),l=x8({inputs:{a:i,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}const UOt={kernelName:op,backendName:"webgl",kernelFunc:AA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4="return ceil(x);",VOt=ge({opSnippet:_4,packedOpSnippet:_4,cpuKernelImpl:Vkt}),WOt={kernelName:lp,backendName:"webgl",kernelFunc:VOt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GOt{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qOt{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:a,clipValueMax:s}=r;let o;ct().getBool("WEBGL_PACK_CLIP")?o=new qOt(i.shape):o=new GOt(i.shape);const l=[[a],[s]];return n.runWebGLProgram(o,[i],i.dtype,l)}const XOt={kernelName:up,backendName:"webgl",kernelFunc:HOt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KOt{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R4(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function YOt(e){const{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),a=new KOt(r.shape),s=[R4(r,i.complexTensorInfos.real),R4(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(a,s,s[0].dtype)}const ZOt={kernelName:bb,backendName:"webgl",kernelFunc:YOt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QOt{constructor(t){this.outputShape=[],this.outputShape=Ea(t,1),this.variableNames=t.map((s,o)=>`T${o}`);const n=new Array(t.length-1);n[0]=t[0][1];for(let s=1;s<n.length;s++)n[s]=n[s-1]+t[s][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<n.length;s++){const o=n[s-1];r.push(`else if (yC < ${n[s]}) setOutput(getT${s}(yR, yC-${o}));`)}const i=n.length,a=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JOt{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ea(t,n);const r=this.outputShape,i=r.length,a=_e(i),s=Sr("coords",i),o=["x","y","z","w","u","v"].slice(0,i);this.variableNames=t.map((x,b)=>`T${b}`);const l=new Array(t.length-1);l[0]=t[0][n];for(let x=1;x<l.length;x++)l[x]=l[x-1]+t[x][n];const c=o[n],h=o.slice(-2),d=o.join();let p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${h.join()}));
        }`;for(let x=1;x<l.length;x++){const b=l[x-1];p+=`
        if (${c} < ${l[x]}  && ${c} >= ${l[x-1]}) {
          return getChannel(
            getT${x}(${ty(o,c,b)}),
            vec2(${ty(h,c,b)}));
        }`}const g=l.length,v=l[l.length-1];p+=`
        return getChannel(
          getT${g}(${ty(o,c,v)}),
          vec2(${ty(h,c,v)}));`,this.userCode=`
      float getValue(${o.map(x=>"int "+x)}) {
        ${p}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[i-1]} = ${s[i-1]} + 1;
        if (${s[i-1]} < ${r[i-1]}) {
          result.g = getValue(${s});
        }

        ${s[i-2]} = ${s[i-2]} + 1;
        if (${s[i-2]} < ${r[i-2]}) {
          result.a = getValue(${s});
        }

        ${s[i-1]} = ${s[i-1]} - 1;
        if (${s[i-2]} < ${r[i-2]} &&
            ${s[i-1]} < ${r[i-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}}function ty(e,t,n){const r=e.indexOf(t);return e.map((a,s)=>s===r?`${a} - ${n}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U0(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.texData.get(r.dataId);return Zr({inputs:{x:i.complexTensorInfos.imag},backend:n})}const tNt={kernelName:oI,backendName:"webgl",kernelFunc:U0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wh(e,t,n){const r=e[0].dtype;if(r==="complex64"){const g=e.map(S=>mm({inputs:{input:S},backend:n})),v=e.map(S=>U0({inputs:{input:S},backend:n})),x=Wh(g,t,n),b=Wh(v,t,n),w=Po({inputs:{real:x,imag:b},backend:n});return g.forEach(S=>n.disposeIntermediateTensorInfo(S)),v.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),w}let i=n.shouldExecuteOnCPU(e);if(r==="string"&&(i=!0),i){const g=e.map($=>{const I=[-1,pt($.shape.slice(t))];return Ot({inputs:{x:$},backend:n,attrs:{shape:I}})}),v=g.map($=>({vals:n.readSync($.dataId),shape:$.shape})),x=Ea(g.map($=>$.shape),1),b=g[0].shape[0]===1,w=Wkt(v,x,r,b),S=Ea(e.map($=>$.shape),t),T=n.makeTensorInfo(S,r,w);return g.forEach($=>n.disposeIntermediateTensorInfo($)),T}const a=e.filter(g=>pt(g.shape)>0),s=ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const g=s?new Ta(e[0].shape,eo):new oo(e[0].shape,eo);return n.runWebGLProgram(g,e,r)}const o=ct().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>o){const g=[];for(let x=0;x<a.length;x+=o){const b=a.slice(x,x+o);g.push(Wh(b,t,n))}const v=Wh(g,t,n);for(const x of g)n.disposeIntermediateTensorInfo(x);return v}if(s){const g=new JOt(a.map(v=>v.shape),t);return n.runWebGLProgram(g,a,r)}const{tensors2D:l,outShape:c}=eNt(a,t,n),h=new QOt(l.map(g=>g.shape)),d=n.runWebGLProgram(h,l,r);l.forEach(g=>n.disposeIntermediateTensorInfo(g));const p=Ot({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),p}function eNt(e,t,n){const r=Ea(e.map(a=>a.shape),t);return{tensors2D:e.map(a=>Ot({inputs:{x:a},attrs:{shape:[-1,pt(a.shape.slice(t))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w8(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,a=ae(i,t[0].shape)[0],s=t.map(c=>c.shape);uE(s,a);const o=Ea(t.map(c=>c.shape),a);if(pt(o)===0)return n.makeTensorInfo(o,t[0].dtype,[]);const l=t.filter(c=>pt(c.shape)>0);return l.length===1?Zr({inputs:{x:l[0]},backend:n}):Wh(l,a,n)}const nNt={kernelName:xb,backendName:"webgl",kernelFunc:w8};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S8{constructor(t,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const s=t.padInfo.top,o=t.padInfo.left,l=t.strideHeight,c=t.strideWidth,h=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,g=t.filterWidth,v=Math.floor(t.inChannels/4)*4,x=t.inChannels%4,b=t.dataFormat==="channelsLast",w=b?1:2,S=b?2:3,T=b?3:1;let $="",A="";r&&(i?$=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?$=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:$=`
          float activation(float x) {
            ${r}
          }
        `,A="result = activation(result);");const I=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${$}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${T}];

        ivec2 xRCCorner =
            ivec2(coords[${w}], coords[${S}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${h};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${v}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${x===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${v}) *
                    getW(wR, wC, ${v}, d2);
              } else {
                dotProd +=
                    getX(batch, ${v}, xR, xC) *
                    getW(wR, wC, ${v}, d2);
              }

            } else if (${x===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${v}, d2),
                getW(wR, wC, ${v} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${v}),
                  getX(batch, xR, xC, ${v} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${v}, xR, xC),
                  getX(batch, ${v} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${x===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${v}, d2),
                getW(wR, wC, ${v} + 1, d2),
                getW(wR, wC, ${v} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${v}),
                  getX(batch, xR, xC, ${v} + 1),
                  getX(batch, xR, xC, ${v} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${v}, xR, xC),
                  getX(batch, ${v} + 1, xR, xC),
                  getX(batch, ${v} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${I}
        ${A}
        setOutput(result);
      }
    `}}class rNt{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const n=t.padInfo.front,r=t.padInfo.top,i=t.padInfo.left,a=t.strideDepth,s=t.strideHeight,o=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,h=t.dilationWidth,d=t.filterDepth,p=t.filterHeight,g=t.filterWidth,v=Math.floor(t.inChannels/4)*4,x=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${s}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${h};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${v}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${x===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${v}) *
                  getW(wF, wR, wC, ${v}, d2);
              } else if (${x===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${v}),
                  getX(batch, xF, xR, xC, ${v} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${v}, d2),
                  getW(wF, wR, wC, ${v} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${x===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${v}),
                  getX(batch, xF, xR, xC, ${v} + 1),
                  getX(batch, xF, xR, xC, ${v} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${v}, d2),
                  getW(wF, wR, wC, ${v} + 1, d2),
                  getW(wF, wR, wC, ${v} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C8{constructor(t,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=fr(this.outputShape.length);const s=t.padInfo.left,o=t.strideWidth,l=t.dilationWidth,c=t.filterHeight,h=t.filterWidth,d=h;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<h;b++)p+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let b=0;b<h;b++)p+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(d+1)/2;b++){const w=b*2;if(p+=`
           xC = xCCorner + ${w*l};
           `,o===1){if(w<h&&(s%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }
               `,l===1&&w>0?p+=`
                 xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                   } else {
                     xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xC${w} = xTexelC${w};
                 `,w+1<h)){const S=s%2===0?Rk(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${S};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                     xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${w+1}.zw = vec2(0.0);
                     }
                     xTexelC${w+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                     } else {
                      xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                     }
                     `:p+=`
                     xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                     `):S===1?p+=`
                     xC${w+1} = xTexelC${w};
                     `:p+=`
                     xCOffset = xC + ${S};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                       xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${w+1}.zw = vec2(0.0);
                       }
                       xTexelC${w+1}Ready = 1;
                     }

                     xC${w+1} = xTexelC${w+1};
                     `}}else w<h&&(s%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.0);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
               `,w+1<h&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(
                   xTexelC${w}.xy, xTexelC${w+1}.xy);
               `,w+1<h&&(p+=`
                   xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                 `)));w<h&&(p+=`
             wTexel = getW(r, ${w}, d1, d2);
             dotProd += xC${w}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${w}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,w+1<h&&(p+=`
               wTexel = getW(r, ${w+1}, d1, d2);
               dotProd += xC${w+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${w+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",v="";r&&(i?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:a?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:g=`vec4 activation(vec4 x) {
           ${r}
         }`,v="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${x}
         ${v}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iNt{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=fr(this.outputShape.length);const{dataFormat:r}=n,i=$r(),a=r==="channelsLast",s=a?1:2,o=a?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`;let c="";for(let h=0;h<=1;h++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${h};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${h*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${h*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dv(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&n===1&&e[0]>1?[e[0],1]:null}function T8({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:o=null}){const l=e.shape,c=r.texData.get(e.dataId),h=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,g=n.dataFormat==="channelsLast",v=!1,x=!1;let b;const w=[];if(a!=null){const $=Dv(a.shape,g);$!=null&&(a=Ot({inputs:{x:a},backend:r,attrs:{shape:$}}),w.push(a))}if(i!=null){const $=Dv(i.shape,g);$!=null&&(i=Ot({inputs:{x:i},backend:r,attrs:{shape:$}}),w.push(i))}if(!((d===1||p===1)&&h>g8)&&c.isPacked&&g&&c.texture!=null&&l[2]%2!==0&&Te(c.shape.slice(-3),l.slice(-3))){const $=l[0]*l[1]*(l[2]+1),A={dataId:e.dataId,shape:[1,$,n.inChannels],dtype:e.dtype},I=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,V(_v(c.shape,A.shape),()=>`packed reshape ${c.shape} to ${A.shape} isn't free`);const O=Ot({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});w.push(O);const N=Rv({a:A,b:O,backend:r,transposeA:v,transposeB:x,bias:i,activation:o,preluActivationWeights:a,leakyreluAlpha:s}),_=r.texData.get(N.dataId);V(_.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=I,_.shape=n.outShape,b=Zr({inputs:{x:N},backend:r}),b.shape=n.outShape,w.push(N)}else{const $=n.outHeight*n.outWidth,A=Ot({inputs:{x:e},backend:r,attrs:{shape:g?[n.batchSize,$,n.inChannels]:[n.batchSize,n.inChannels,$]}}),I=Ot({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),O=Rv({a:g?A:I,b:g?I:A,transposeA:!g,transposeB:x,backend:r,bias:i,activation:o,preluActivationWeights:a,leakyreluAlpha:s});b=Ot({inputs:{x:O},backend:r,attrs:{shape:n.outShape}}),w.push(A),w.push(I),w.push(O)}for(const $ of w)r.disposeIntermediateTensorInfo($);return b}function $8({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:h,outWidth:d,outHeight:p,dataFormat:g}=n,v=g==="channelsLast",x=l*c*h,b=p*d,w=[n.batchSize,x,b],S=!0,T=!1,$=[];if(a!=null){const W=Dv(a.shape,v);W!=null&&(a=Ot({inputs:{x:a},backend:r,attrs:{shape:W}}),$.push(a))}if(i!=null){const W=Dv(i.shape,v);W!=null&&(i=Ot({inputs:{x:i},backend:r,attrs:{shape:W}}),$.push(i))}const A=Ot({inputs:{x:t},backend:r,attrs:{shape:[1,x,pt(t.shape)/x]}});$.push(A);const I=new iNt(w,n),O=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],N=r.runWebGLProgram(I,[e],"float32",O),_=Ot({inputs:{x:N},backend:r,attrs:{shape:w}});$.push(N),$.push(_);const R=i!=null,E=a!=null,F=o==="leakyrelu",M=o?Ud(o,!0):null,B=new m8(v?_.shape:A.shape,v?A.shape:_.shape,v?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],S,T,R,M,E,F),j=v?[_,A]:[A,_];if(i&&j.push(i),E&&j.push(a),F){const W=r.makeTensorInfo([],"float32",Io(s,"float32"));j.push(W),$.push(W)}const P=r.runWebGLProgram(B,j,"float32"),U=Ot({inputs:{x:P},backend:r,attrs:{shape:n.outShape}});$.push(P);for(const W of $)r.disposeIntermediateTensorInfo(W);return U}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:h}=r,d=Is(l),p=Yn(i.shape,a.shape,s,c,o,h,!1,d);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=T8({x:i,filter:a,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&ct().getBool("WEBGL_EXP_CONV")){const x=new C8(p),b=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=n.runWebGLProgram(x,[i,a],"float32",b)}else if(ct().getBool("WEBGL_CONV_IM2COL"))g=$8({x:i,filter:a,convInfo:p,backend:n});else{const x=new S8(p);g=n.runWebGLProgram(x,[i,a],"float32")}const v=Ot({inputs:{x:g},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(g),v}const sNt={kernelName:wb,backendName:"webgl",kernelFunc:aNt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oNt{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,r=t.strideWidth,i=t.padInfo.top,a=t.padInfo.left,s=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class lNt{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,i=t.strideHeight,a=t.strideWidth,s=t.dataFormat==="channelsLast",o=n-1-t.padInfo.top,l=r-1-t.padInfo.left,c=s?1:2,h=s?2:3,d=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${h}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class uNt{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideDepth,r=t.strideHeight,i=t.strideWidth,a=t.padInfo.front,s=t.padInfo.top,o=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${a};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${o};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cNt{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterDepth,r=t.filterHeight,i=t.filterWidth,a=t.strideDepth,s=t.strideHeight,o=t.strideWidth,l=n-1-t.padInfo.front,c=r-1-t.padInfo.top,h=i-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:h}=r,d=Is(l),p=Yn(i.shape,h,s,1,o,c,!1,d),g=new oNt(p);return n.runWebGLProgram(g,[i,a],"float32")}const hNt={kernelName:qk,backendName:"webgl",kernelFunc:fNt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dNt{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=fr(this.outputShape.length);const n=t.filterHeight,r=t.filterWidth,i=n-1-t.padInfo.top,a=r-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pNt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:h}=r,d=Is(c),p=Yn(s,a.shape,o,1,l,h,!1,d);if(ct().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],v=new dNt(p);return n.runWebGLProgram(v,[i,a],"float32",g)}else{const g=new lNt(p);return n.runWebGLProgram(g,[i,a],"float32")}}const mNt={kernelName:Sb,backendName:"webgl",kernelFunc:pNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l}=r,c=Eo(i.shape,a.shape,s,l,o),h=new rNt(c);return n.runWebGLProgram(h,[i,a],"float32")}const yNt={kernelName:Cb,backendName:"webgl",kernelFunc:gNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,pad:o,filterShape:l}=r,c=Eo(i.shape,l,s,1,o),h=new uNt(c);return n.runWebGLProgram(h,[i,a],"float32")}const bNt={kernelName:Hk,backendName:"webgl",kernelFunc:vNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xNt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{pad:s,strides:o,inputShape:l}=r,c=Eo(l,a.shape,o,1,s),h=new cNt(c);return n.runWebGLProgram(h,[i,a],"float32")}const wNt={kernelName:Xk,backendName:"webgl",kernelFunc:xNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SNt=wf+`
  return cos(x);
`,CNt=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Jl}
  return result;
`,TNt=ge({opSnippet:SNt,packedOpSnippet:CNt}),$Nt={kernelName:cp,backendName:"webgl",kernelFunc:TNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ANt=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,kNt=ge({opSnippet:ANt}),INt={kernelName:fp,backendName:"webgl",kernelFunc:kNt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ENt{constructor(t,n,r,i,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,o,l,c]=t,[h]=n,[d,p]=r;this.outputShape=[h,d,p,c];const g=i==="bilinear"?1:0,[v,x]=[`${o-1}.0`,`${l-1}.0`],[b,w,S]=d>1?[`${(o-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${v} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${v}`],[T,$,A]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${x} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${x}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${T});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${w};
        float width_scale = ${$};

        float in_y = ${S};
        if( in_y < 0.0 || in_y > ${v} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${A};
        if( in_x < 0.0 || in_x > ${x} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ONt=e=>{const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:a,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:c}=r,h=new ENt(i.shape,a.shape,o,l,c);return n.runWebGLProgram(h,[i,a,s],"float32")},NNt={kernelName:Yk,backendName:"webgl",kernelFunc:ONt};var Wd;(function(e){e.Prod="*",e.Sum="+"})(Wd||(Wd={}));class D4{constructor(t,n,r,i){this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,s=this.op===Wd.Prod?"1.0":"0.0",o=r?s:`getX(${M4(a,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",h="";r?(c=i?`end != ${l-1}`:"end != 0",h=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",h=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${_e(a)} coords = getOutputCoords();
        int end = ${P4(a,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${h};
          ${P4(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${M4(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function M4(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function P4(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A8(e,t,n,r,i,a){const s=t.shape.length,o=en([r],s);let l=t;o!=null&&(l=Tr({inputs:{x:t},backend:n,attrs:{perm:o}}));const c=hn(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const h=l.shape[c];let d=Zr({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(h))-1;p++){const g=new D4(e,l.shape,!1,a),v=[[p]],x=d;d=n.runWebGLProgram(g,[d],d.dtype,v),n.disposeIntermediateTensorInfo(x)}if(i){const p=new D4(e,l.shape,i,a),g=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(g)}if(o!=null){const p=Oo(o),g=Tr({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),g}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Nt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:s,reverse:o}=r;return A8(Wd.Prod,i,n,a,s,o)}const RNt={kernelName:Kk,backendName:"webgl",kernelFunc:_Nt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DNt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:s,reverse:o}=r;return A8(Wd.Sum,i,n,a,s,o)}const MNt={kernelName:Tb,backendName:"webgl",kernelFunc:DNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PNt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:s,binaryOutput:o}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),c=n.readSync(a.dataId),h=s8(l,c,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,h)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(a),h=zkt(l,c,s,o);return n.makeTensorInfo(h.shape,a.dtype,h.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const FNt={kernelName:Zk,backendName:"webgl",kernelFunc:PNt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LNt{constructor(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:a,dataFormat:s}=r,o=i.shape[0],l=s==="NHWC"?i.shape[1]:i.shape[2],c=s==="NHWC"?i.shape[2]:i.shape[3],h=s==="NHWC"?i.shape[3]:i.shape[1],d=l*a,p=c*a,g=h/(a*a),v=s==="NHWC"?[o,d,p,g]:[o,g,d,p],x=new LNt(v,a,s);return n.runWebGLProgram(x,[i],i.dtype)}const zNt={kernelName:Qk,backendName:"webgl",kernelFunc:BNt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k8{constructor(t,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=fr(this.outputShape.length);const s=t.filterHeight,o=t.filterWidth,l=t.outChannels/t.inChannels;let c="",h="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,h="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I8{constructor(t,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=fr(this.outputShape.length);const s=t.outChannels/t.inChannels,o=t.padInfo.left,l=t.strideWidth,c=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=d;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<d;w++)g+=`
          vec4 xTexelC${w*2};
          int xTexelC${w*2}Ready;
          vec4 xTexelC${w*2+1};
          int xTexelC${w*2+1}Ready;
          vec4 xC${w};`;g+=`
    for (int r = 0; r < ${h}; r++) {
      `;for(let w=0;w<d;w++)g+=`
          xTexelC${w*2} = vec4(0.0);
          xTexelC${w*2}Ready = 0;
          xTexelC${w*2+1} = vec4(0.0);
          xTexelC${w*2+1}Ready = 0;
          xC${w} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let w=0;w<(p+1)/2;w++){const S=w*2;if(g+=`
          xC = xCCorner + ${S*c};
          `,l===1){if(S<d&&(o%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }
              `,c===1&&S>0?g+=`
                xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                  } else {
                    xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xC${S} = xTexelC${S};
                `,S+1<d)){const T=o%2===0?Rk(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${T};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                    xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${S+1}.zw = vec2(0.0);
                    }
                    xTexelC${S+1}Ready = 1;
                  }
                  `,c>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                    } else {
                     xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                    }
                    `:g+=`
                    xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                    `):T===1?g+=`
                    xC${S+1} = xTexelC${S};
                    `:g+=`
                    xCOffset = xC + ${T};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                      xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${S+1}.zw = vec2(0.0);
                      }
                      xTexelC${S+1}Ready = 1;
                    }

                    xC${S+1} = xTexelC${S+1};
                    `}}else S<d&&(o%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.0);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
              `,S+1<d&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(
                  xTexelC${S}.xy, xTexelC${S+1}.xy);
              `,S+1<d&&(g+=`
                  xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                `)));S<d&&(g+=`
            wTexel = getW(r, ${S}, d1, q);
            dotProd += xC${S} * vec4(wTexel.xz, wTexel.xz);
          `,S+1<d&&(g+=`
              wTexel = getW(r, ${S+1}, d1, q);
              dotProd += xC${S+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let v="",x="";r&&(i?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:v=`vec4 activation(vec4 x) {
          ${r}
        }`,x="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${v}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jNt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r;let h=l;h==null&&(h=[1,1]),V(ur(s,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${h}'`);const d=Yn(i.shape,a.shape,s,h,o,c,!0);let p;ct().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new I8(d):p=new k8(d);const g=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,a],"float32",g)}const UNt={kernelName:$b,backendName:"webgl",kernelFunc:jNt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VNt{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,r=t.strideWidth,i=t.padInfo.top,a=t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class WNt{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,i=t.strideHeight,a=t.strideWidth,s=n-1-t.padInfo.top,o=r-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GNt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:h}=r,d=Yn(i.shape,h,s,o,l,c,!0),p=new VNt(d);return n.runWebGLProgram(p,[i,a],"float32")}const qNt={kernelName:Jk,backendName:"webgl",kernelFunc:GNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HNt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:h}=r,d=Yn(h,a.shape,s,o,l,c,!0),p=new WNt(d);return n.runWebGLProgram(p,[i,a],"float32")}const XNt={kernelName:tI,backendName:"webgl",kernelFunc:HNt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KNt{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNt(e){const{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],a=pt(r.shape),s=Ot({inputs:{x:r},backend:n,attrs:{shape:[a]}}),o=new KNt(a),l=n.runWebGLProgram(o,[s],s.dtype),c=Ot({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}const ZNt={kernelName:pW,backendName:"webgl",kernelFunc:YNt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QNt{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:a,strideWidth:s,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:h}=t,{top:d,left:p}=i;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${s});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${h};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JNt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l}=r,c=Kp(i.shape,a.shape,s,o,"NHWC",l);let h;const d=new QNt(c);h=n.runWebGLProgram(d,[i,a],"float32");const p=Ot({inputs:{x:h},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(h),p}const t_t={kernelName:Ab,backendName:"webgl",kernelFunc:JNt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e_t(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,a=t,{allDims:s,summedDims:o,idDims:l}=wE(i,a.length);CE(s.length,l,a);const{path:c,steps:h}=TE(o,l),d=h.length;let p=null,g=s.length;const v=[];for(let x=0;x<d;++x){for(const b of h[x]){const{permutationIndices:w,expandDims:S}=SE(g,l[b]);let T;$E(w)?T=a[b]:(T=Tr({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),v.push(T));const $=T.shape.slice();for(let A=0;A<S.length;++A)$.splice(S[A],0,1);Te(T.shape,$)||(T=Ot({inputs:{x:T},backend:n,attrs:{shape:$}}),v.push(T)),p===null?p=T:(p=fO({inputs:{a:T,b:p},backend:n}),v.push(p))}x<d-1&&(c[x]>=0&&(p=j0({inputs:{x:p},backend:n,attrs:{axis:c[x]-(s.length-g),keepDims:!1}}),v.push(p)),g--)}for(const x of v)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const n_t={kernelName:eI,backendName:"webgl",kernelFunc:e_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r_t="return (x >= 0.0) ? x : (exp(x) - 1.0);",i_t=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,a_t=ge({opSnippet:r_t,packedOpSnippet:i_t}),s_t={kernelName:dp,backendName:"webgl",kernelFunc:a_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o_t="return (b >= 0.0) ? a : a * (b + 1.0);",l_t=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,u_t=e=>{const{inputs:t,backend:n}=e,{dy:r,y:i}=t,a=ct().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xf(l_t,r.shape,i.shape):new Bl(o_t,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],r.dtype)},c_t={kernelName:nI,backendName:"webgl",kernelFunc:u_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f_t=`
  return vec4(equal(a, b));
`,h_t="return float(a == b);",d_t=Qn({opSnippet:h_t,packedOpSnippet:f_t,dtype:"bool",cpuKernelImpl:Gkt}),p_t={kernelName:kb,backendName:"webgl",kernelFunc:d_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m_t=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${pE};
  float a1 = ${mE};
  float a2 = ${gE};
  float a3 = ${yE};
  float a4 = ${vE};
  float a5 = ${bE};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,g_t=ge({opSnippet:m_t}),y_t={kernelName:pp,backendName:"webgl",kernelFunc:g_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v_t=wf+`
  return exp(x);
`,b_t=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,E8=ge({opSnippet:v_t,packedOpSnippet:b_t,cpuKernelImpl:qkt,dtype:"float32"}),x_t={kernelName:mp,backendName:"webgl",kernelFunc:E8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kA(e){const{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:a}=t,s=a.shape.length,o=a.shape.slice();let l=i;return i<0&&(V(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),o.splice(l,0,1),Ot({inputs:{x:a},backend:r,attrs:{shape:o}})}const w_t={kernelName:Ib,backendName:"webgl",kernelFunc:kA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F4="return exp(x) - 1.0;",S_t=ge({opSnippet:F4,packedOpSnippet:F4,cpuKernelImpl:Hkt}),C_t={kernelName:gp,backendName:"webgl",kernelFunc:S_t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L4{constructor(t,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const a=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${i}.0`:"1.0";let o;if(t==="real")o="return real * expR - imag * expI;";else if(t==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O8(e,t,n){const r=n.texData.get(e.dataId),i=pt(e.shape),a=e.shape[e.shape.length-1],s=i/a,o=Ot({inputs:{x:e},backend:n,attrs:{shape:[s,a]}}),l=o.shape,c=new L4("real",l,t),h=new L4("imag",l,t),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(c,d,"float32"),g=n.runWebGLProgram(h,d,"float32"),v=Po({inputs:{real:p,imag:g},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g);const x=Ot({inputs:{x:v},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(v),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T_t(e){const{inputs:t,backend:n}=e,{input:r}=t;return O8(r,!1,n)}const $_t={kernelName:rI,backendName:"webgl",kernelFunc:T_t};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A_t{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gm(e){const{backend:t,attrs:n}=e,{shape:r,value:i}=n;let{dtype:a}=n;if(a=a||sf(i),a==="string"){const s=un(a,pt(r));return s.fill(i),t.makeTensorInfo(r,a,s)}else{const s=new A_t(r,i),o=[[i]];return t.runWebGLProgram(s,[],a,o)}}const k_t={kernelName:iI,backendName:"webgl",kernelFunc:gm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I_t{constructor(t){this.variableNames=["Image"],this.outputShape=[];const n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E_t={kernelName:aI,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,i=new I_t(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B4="return floor(x);",O_t=ge({opSnippet:B4,packedOpSnippet:B4,cpuKernelImpl:Xkt}),N_t={kernelName:yp,backendName:"webgl",kernelFunc:O_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const __t=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,R_t=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,D_t=Qn({opSnippet:__t,packedOpSnippet:R_t,dtype:"int32"}),M_t={kernelName:vp,backendName:"webgl",kernelFunc:D_t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P_t{constructor(t){this.variableNames=["A"];const n=$r(),[r,i]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F_t{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=$r(),[r,i]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L_t={kernelName:Qft,backendName:"webgl",kernelFunc:B_t};let Hu,$$=ct().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function B_t(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:i}=t;const{numChannels:a}=r,s=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],h=[c,l],d=[c,l,a];if(o||s){const x=ct().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Hu==null||x!==$$)&&($$=x,Hu=document.createElement("canvas").getContext("2d",{willReadFrequently:$$})),Hu.canvas.width=l,Hu.canvas.height=c,Hu.drawImage(i,0,0,l,c),i=Hu.canvas}const p=n.makeTensorInfo(h,"int32");n.texData.get(p.dataId).usage=fi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);const g=ct().getBool("WEBGL_PACK")?new F_t(d):new P_t(d),v=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z_t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:h,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:v}=r,x=Is(h),b=Yn(i.shape,a.shape,l,d,c,p,!1,x);let w;const S=[],T=s!=null,$=o!=null,A=g==="leakyrelu",I=()=>{const N=[i,a],_=(R,E)=>{if(E==="NCHW"&&R.shape.length===1&&R.shape[0]!==1){const F=Ot({inputs:{x:R},backend:n,attrs:{shape:[R.shape[0],1,1]}});return S.push(F),F}return R};if(T&&N.push(_(s,h)),$&&N.push(_(o,h)),A){const R=n.makeTensorInfo([],"float32",Io(v,"float32"));N.push(R),S.push(R)}return N};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))w=T8({x:i,filter:a,convInfo:b,backend:n,bias:s,activation:g,preluActivationWeights:o,leakyreluAlpha:v});else if(b.strideWidth<=2&&x==="channelsLast"&&ct().getBool("WEBGL_EXP_CONV")){const N=g?Ud(g,!0):null,_=new C8(b,T,N,$,A),R=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],E=I();w=n.runWebGLProgram(_,E,"float32",R)}else if(ct().getBool("WEBGL_CONV_IM2COL"))w=$8({x:i,filter:a,convInfo:b,backend:n,bias:s,activation:g,preluActivationWeights:o,leakyreluAlpha:v});else{const N=g?Ud(g,!1):null,_=new S8(b,T,N,$,A),R=I();w=n.runWebGLProgram(_,R,"float32")}const O=Ot({inputs:{x:w},backend:n,attrs:{shape:b.outShape}});return S.push(w),S.forEach(N=>n.disposeIntermediateTensorInfo(N)),O}const j_t={kernelName:cv,backendName:"webgl",kernelFunc:z_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U_t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:g}=r,v=[];let x=h;x==null&&(x=[1,1]),V(ur(l,x),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${x}'`);const b=Yn(i.shape,a.shape,l,x,c,d,!0),w=ct().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,S=p?Ud(p,w):null,T=[i,a],$=s!=null,A=o!=null,I=p==="leakyrelu";if($&&T.push(s),A&&T.push(o),I){const R=n.makeTensorInfo([],"float32",Io(g,"float32"));T.push(R),v.push(R)}let O;w?O=new I8(b,$,S,A,I):O=new k8(b,$,S,A,I);const N=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],_=n.runWebGLProgram(O,T,"float32",N);return v.forEach(R=>n.disposeIntermediateTensorInfo(R)),_}const V_t={kernelName:RW,backendName:"webgl",kernelFunc:U_t};class W_t{constructor(t,n,r,i){this.sliceDim=t,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const a=_e(r.length);let s=`
    int index;`;for(let o=0;o<this.sliceDim;o++)s+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G_t(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,a=i.shape,s=a[a.length-1],o=pt(r.shape),[l,c,h,d]=rE(r,i),p=Ot({inputs:{x:i},backend:n,attrs:{shape:[c,s]}}),g=Ot({inputs:{x:r},backend:n,attrs:{shape:[pt(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const w=n.readSync(i.dataId),S=n.bufferSync(r),T=Kkt(w,S,r.dtype,c,s,h,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,T.values)}const v=new W_t(s,d,[c,h],r.shape),x=n.runWebGLProgram(v,[g,p],g.dtype),b=Ot({inputs:{x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),b}const q_t={kernelName:mW,backendName:"webgl",kernelFunc:G_t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H_t{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=_e(this.rank),i=X_t(t);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function X_t(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<e.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:a}=t,{axis:s,batchDims:o}=r,l=ae(s,i.shape)[0];if(ct().get("DEBUG")){const S=n.readSync(a.dataId),T=i.shape[l];for(let $=0;$<S.length;++$){const A=S[$];V(A<=T-1&&A>=0,()=>`GatherV2: the index value ${A} is not in [0, ${T-1}]`)}}const c=kE(i,a,l,o),h=pt(a.shape),d=[],p=Ot({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),g=Ot({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,h/c.batchSize]}});d.push(p),d.push(g);const v=[c.batchSize,c.outerSize,h/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,a])||i.dtype==="string"){const S=n.bufferSync(g),T=n.bufferSync(p),$=Ykt(T,S,v);return d.forEach(A=>n.disposeIntermediateTensorInfo(A)),n.makeTensorInfo(c.outputShape,$.dtype,$.values)}const x=new H_t(p.shape,v),b=n.runWebGLProgram(x,[p,g],p.dtype);d.push(b);const w=Ot({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return d.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const K_t={kernelName:Ob,backendName:"webgl",kernelFunc:N8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y_t="return float(a > b);",Z_t=`
  return vec4(greaterThan(a, b));
`,Q_t=Qn({opSnippet:Y_t,packedOpSnippet:Z_t,cpuKernelImpl:Zkt,dtype:"bool"}),J_t={kernelName:Nb,backendName:"webgl",kernelFunc:Q_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRt="return float(a >= b);",eRt=`
  return vec4(greaterThanEqual(a, b));
`,nRt=Qn({opSnippet:tRt,packedOpSnippet:eRt,dtype:"bool",cpuKernelImpl:Qkt}),rRt={kernelName:bp,backendName:"webgl",kernelFunc:nRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRt(e){const{inputs:t,backend:n}=e,{input:r}=t;return O8(r,!0,n)}const aRt={kernelName:sI,backendName:"webgl",kernelFunc:iRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sRt="return float(!isnan(x) && !isinf(x));",oRt=ge({opSnippet:sRt,dtype:"bool"}),lRt={kernelName:wp,backendName:"webgl",kernelFunc:oRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uRt="return float(isinf(x));",cRt=ge({opSnippet:uRt,dtype:"bool"}),fRt={kernelName:Sp,backendName:"webgl",kernelFunc:cRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hRt="return float(isnan(x));",dRt=ge({opSnippet:hRt,dtype:"bool"}),pRt={kernelName:Cp,backendName:"webgl",kernelFunc:dRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mRt="return float(a < b);",gRt=`
  return vec4(lessThan(a, b));
`,yRt=Qn({opSnippet:mRt,packedOpSnippet:gRt,cpuKernelImpl:Jkt,dtype:"bool"}),vRt={kernelName:Rb,backendName:"webgl",kernelFunc:yRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bRt="return float(a <= b);",xRt=`
  return vec4(lessThanEqual(a, b));
`,wRt=Qn({opSnippet:bRt,packedOpSnippet:xRt,cpuKernelImpl:tIt,dtype:"bool"}),SRt={kernelName:Db,backendName:"webgl",kernelFunc:wRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CRt(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:a}=n,s=eIt(r,i,a);return t.makeTensorInfo([s.length],"float32",s)}const TRt={kernelName:gW,backendName:"webgl",kernelFunc:CRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Rt=wf+`
  return x < 0.0 ? 0./0. : log(x);
`,ARt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,kRt=ge({opSnippet:$Rt,packedOpSnippet:ARt,cpuKernelImpl:nIt}),IRt={kernelName:Tp,backendName:"webgl",kernelFunc:kRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERt=wf+`
  return log(1.0 + x);
`,ORt=ge({opSnippet:ERt}),NRt={kernelName:$p,backendName:"webgl",kernelFunc:ORt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Rt="return float(a >= 1.0 && b >= 1.0);",RRt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,DRt=Qn({opSnippet:_Rt,packedOpSnippet:RRt,dtype:"bool"}),MRt={kernelName:Mb,backendName:"webgl",kernelFunc:DRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRt="return float(!(x >= 1.0));",FRt=ge({opSnippet:PRt}),LRt={kernelName:Pb,backendName:"webgl",kernelFunc:FRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BRt="return float(a >= 1.0 || b >= 1.0);",zRt=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,jRt=Qn({opSnippet:BRt,packedOpSnippet:zRt,dtype:"bool"}),URt={kernelName:Fb,backendName:"webgl",kernelFunc:jRt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VRt{constructor(t,n,r,i,a){this.variableNames=["x"],this.outputShape=[];const s=n,o=t[3]-1;this.outputShape=t;let l;const c=`float(${r}) + float(${i}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WRt{constructor(t,n,r,i,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=n,o=t[3]-1;this.outputShape=t;let l;const c=`float(${r}) + float(${i}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GRt=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:a,bias:s,alpha:o,beta:l}=r,c=ct().getBool("WEBGL_PACK_NORMALIZATION")?new WRt(i.shape,a,s,o,l):new VRt(i.shape,a,s,o,l);return n.runWebGLProgram(c,[i],i.dtype)},qRt={kernelName:Lb,backendName:"webgl",kernelFunc:GRt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HRt{constructor(t,n,r,i,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XRt=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i,y:a,dy:s}=t,{depthRadius:o,bias:l,alpha:c,beta:h}=r,d=new HRt(i.shape,o,l,c,h);return n.runWebGLProgram(d,[i,a,s],i.dtype)},KRt={kernelName:lI,backendName:"webgl",kernelFunc:XRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YRt(e,t,n,r){const i=pt(t),s=pt(e.shape)/i,o=Ot({inputs:{x:e},attrs:{shape:[s,i]},backend:r}),l=tu(o,e.dtype,"max",r),c=Ot({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:a,keepDims:s}=r,o=i.shape.length,l=ae(a,i.shape);let c=l;const h=en(c,o),d=h!=null,p=n.shouldExecuteOnCPU([i]);let g=i;if(d){if(p){const T=n.texData.get(g.dataId).values,$=new Array(o);for(let O=0;O<$.length;O++)$[O]=i.shape[h[O]];const A=uO(T,i.shape,i.dtype,h,$);g=n.makeTensorInfo($,i.dtype);const I=n.texData.get(g.dataId);I.values=A}else g=z0(i,h,n);c=hn(c.length,o)}Zn("max",c,o);const[v,x]=jn(g.shape,c);let b=v;s&&(b=bn(v,l));let w;if(p){const T=n.texData.get(g.dataId).values,$=rIt(T,pt(x),b,i.dtype);w=n.makeTensorInfo(b,i.dtype);const A=n.texData.get(w.dataId);A.values=$}else w=YRt(g,x,b,n);return d&&n.disposeIntermediateTensorInfo(g),w}const ZRt={kernelName:Bb,backendName:"webgl",kernelFunc:_8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QRt=cO+`
  return max(a, b);
`,JRt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jl+`
  return result;
`,tDt=Qn({opSnippet:QRt,packedOpSnippet:JRt,cpuKernelImpl:iIt}),eDt={kernelName:Ap,backendName:"webgl",kernelFunc:tDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nDt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;dm(i,"maxPool");const{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r,c=1;V(ur(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const h=zi(i.shape,a,s,c,o,l);if(h.filterWidth===1&&h.filterHeight===1&&Te(h.inShape,h.outShape))return Zr({inputs:{x:i},backend:n});const d=new Vd(h,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const rDt={kernelName:zb,backendName:"webgl",kernelFunc:nDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,dataFormat:l,dimRoundingMode:c}=r,h=[1,1,1],d=ks(i.shape,a,s,h,o,c,l),p=new hO(d,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}const aDt={kernelName:jb,backendName:"webgl",kernelFunc:iDt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sDt{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideHeight,r=t.strideWidth,i=t.dilationHeight,a=t.effectiveFilterHeight,s=t.effectiveFilterWidth,o=a-1-t.padInfo.top,l=s-1-t.padInfo.left,c=a*s-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class oDt{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideDepth,r=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,o=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=l-1-t.padInfo.front,p=c-1-t.padInfo.top,g=h-1-t.padInfo.left,v=l*c*h-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${v} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${h} +
                  wR * ${h} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,s=a,{filterSize:o,strides:l,pad:c,dimRoundingMode:h}=r,d=[1,1,1],p=ks(s.shape,o,l,d,c,h),g=new hO(p,"max",!0),v=n.runWebGLProgram(g,[s],s.dtype),x=new oDt(p),b=n.runWebGLProgram(x,[i,v],s.dtype);return n.disposeIntermediateTensorInfo(v),b}const uDt={kernelName:cI,backendName:"webgl",kernelFunc:lDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDt(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a,output:s}=t,o=a;dm([a,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:h,dimRoundingMode:d}=r,p=zi(o.shape,l,c,1,h,d),g=!0,v=new Vd(p,"max",g),x=n.runWebGLProgram(v,[o],o.dtype),b=new sDt(p),w=n.runWebGLProgram(b,[i,x],o.dtype);return n.disposeIntermediateTensorInfo(x),w}const fDt={kernelName:uI,backendName:"webgl",kernelFunc:cDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDt(e,t,n,r){let i=new Vd(n,"max",!1);const a=r.runWebGLProgram(i,[e],"float32");i=new Vd(n,"max",!0,!0,t);const s=r.runWebGLProgram(i,[e],"float32");return[a,s]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dDt={kernelName:yW,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:i,strides:a,pad:s,includeBatchInIndex:o}=t,l=n;V(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];V(ur(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const h=zi(r.shape,i,a,c,s),[d,p]=hDt(r,o,h,l);return[d,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDt(e,t,n,r){const i=pt(t),s=pt(e.shape)/i,o=Ot({inputs:{x:e},attrs:{shape:[s,i]},backend:r}),l=tu(o,"float32","mean",r),c=Ot({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mDt={kernelName:Ub,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:i,axis:a}=t,s=n,o=r.shape.length,l=ae(a,r.shape);let c=l;const h=en(c,o),d=h!=null,p=s.shouldExecuteOnCPU([r]),g=[];let v=r;if(d){if(p){const $=s.texData.get(v.dataId).values,A=new Array(o);for(let N=0;N<A.length;N++)A[N]=r.shape[h[N]];const I=uO($,r.shape,r.dtype,h,A);v=s.makeTensorInfo(A,r.dtype);const O=s.texData.get(v.dataId);O.values=I}else v=z0(r,h,s);g.push(v),c=hn(c.length,o)}Zn("sum",c,o);const[x,b]=jn(v.shape,c);let w=x;i&&(w=bn(x,l));const S=pDt(v,b,w,s);for(const T of g)s.disposeIntermediateTensorInfo(T);return S}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r,o=i.shape.length,l=ae(a,i.shape);let c=l;const h=en(c,o);let d=i;h!=null&&(d=Tr({inputs:{x:i},backend:n,attrs:{perm:h}}),c=hn(c.length,i.shape.length)),Zn("min",c,o);const[p,g]=jn(d.shape,c),v=pt(g),x=Ot({inputs:{x:d},backend:n,attrs:{shape:[-1,v]}}),b=tu(x,x.dtype,"min",n);let w;if(s){const S=bn(p,l);w=Ot({inputs:{x:b},backend:n,attrs:{shape:S}})}else w=Ot({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),h!=null&&n.disposeIntermediateTensorInfo(d),w}const yDt={kernelName:Vb,backendName:"webgl",kernelFunc:gDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vDt=cO+`
  return min(a, b);
`,bDt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Jl+`
  return result;
`,xDt=Qn({opSnippet:vDt,packedOpSnippet:bDt,cpuKernelImpl:aIt}),wDt={kernelName:kp,backendName:"webgl",kernelFunc:xDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SDt{constructor(t,n,r){this.variableNames=["x"],this.outputShape=n.map((h,d)=>h[0]+t[d]+h[1]);const i=t.length,a=_e(i),s=n.map(h=>h[0]).join(","),o=n.map((h,d)=>h[0]+t[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${s};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${s});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CDt{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((v,x)=>v[0]+t[x]+v[1]);const i=t.length,a=_e(i),s=n.map(v=>v[0]).join(","),o=n.map((v,x)=>v[0]+t[x]).join(","),l=Sr("rc",i),c=Sr("source",i),h=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1;let g="";if(i===1){const v=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${a} rc = outputLoc;
        ${v}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${h}) {
          ${v}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const v=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${a} rc = outputLoc;
        ${v}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${h}) {
          ${v}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${v}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${h}) {
            ${v}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${s});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TDt=({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:i,mode:a}=n,s=ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CDt(r.shape,i,a):new SDt(r.shape,i,a);return t.runWebGLProgram(s,[r],r.dtype)},$Dt={kernelName:Wb,backendName:"webgl",kernelFunc:TDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADt=`if (b == 0.0) return NAN;
  return mod(a, b);`,kDt=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Jl+`
  return result;
`,IDt=Qn({opSnippet:ADt,packedOpSnippet:kDt}),EDt={kernelName:Ip,backendName:"webgl",kernelFunc:IDt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ODt{constructor(t,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NDt=`
if (a == b) {
  return 1.0;
};
return a / b;`,_Dt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,R8=Qn({opSnippet:NDt,packedOpSnippet:_Dt,checkOutOfBounds:!0}),RDt={kernelName:hp,backendName:"webgl",kernelFunc:R8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4="return a - b;",D8=Qn({opSnippet:z4,packedOpSnippet:z4,supportsComplex:!0,cpuKernelImpl:AIt}),DDt={kernelName:Wp,backendName:"webgl",kernelFunc:D8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M8(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:a}=r,s=ae([a],i.shape),o=_8({inputs:{x:i},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=bn(o.shape,s),c=Ot({inputs:{x:o},backend:n,attrs:{shape:l}}),h=D8({inputs:{a:i,b:c},backend:n}),d=E8({inputs:{x:h},backend:n}),p=j0({inputs:{x:d},backend:n,attrs:{axis:s,keepDims:!1}}),g=Ot({inputs:{x:p},backend:n,attrs:{shape:l}}),v=R8({inputs:{a:d,b:g},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),v}const MDt={kernelName:l0,backendName:"webgl",kernelFunc:M8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDt(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:a,seed:s,normalized:o}=r,l=o?i:M8({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],h=l.shape[1],d=new ODt(c,h,a),p=[[s]],g=n.runWebGLProgram(d,[l],"int32",p);return o||n.disposeIntermediateTensorInfo(l),g}const FDt={kernelName:vW,backendName:"webgl",kernelFunc:PDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LDt=Ui+`
  return -x;
`,BDt=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function zDt(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const a=n.texData.get(r.dataId),[s,o]=oIt(a.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}let i;return ct().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new oo(r.shape,BDt):i=new Ta(r.shape,LDt),n.runWebGLProgram(i,[r],r.dtype)}const jDt={kernelName:Gb,backendName:"webgl",kernelFunc:zDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UDt=QI;function VDt(e){ci("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(i.dataId),h=n.readSync(a.dataId),{selectedIndices:d}=UDt(c,h,s,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const WDt={kernelName:fI,backendName:"webgl",kernelFunc:VDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDt=JI;function qDt(e){ci("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,h=n.readSync(i.dataId),d=n.readSync(a.dataId),{selectedIndices:p,validOutputs:g}=GDt(h,d,s,o,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const HDt={kernelName:hI,backendName:"webgl",kernelFunc:qDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XDt=tE;function KDt(e){ci("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,h=n.readSync(i.dataId),d=n.readSync(a.dataId),p=s,g=o,v=l,x=c,{selectedIndices:b,selectedScores:w}=XDt(h,d,p,g,v,x);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const YDt={kernelName:dI,backendName:"webgl",kernelFunc:KDt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZDt{constructor(t,n,r,i){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QDt=e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:a,depth:s,onValue:o,offValue:l}=r,c=pt(i.shape),h=new ZDt(c,s,o,l),d=Ot({inputs:{x:i},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(h,[d],a);n.disposeIntermediateTensorInfo(d);const g=[...i.shape,s],v=Ot({inputs:{x:p},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(p),v},JDt={kernelName:Xb,backendName:"webgl",kernelFunc:QDt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mv(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="complex64"){const i=mm({inputs:{input:r},backend:n}),a=Mv({inputs:{x:i},backend:n}),s=U0({inputs:{input:r},backend:n}),o=Mv({inputs:{x:s},backend:n}),l=Po({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return gm({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const tMt={kernelName:f0,backendName:"webgl",kernelFunc:Mv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=mm({inputs:{input:r},backend:n}),a=P8({inputs:{x:i},backend:n}),s=U0({inputs:{input:r},backend:n}),o=Mv({inputs:{x:s},backend:n}),l=Po({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return gm({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const eMt={kernelName:Hb,backendName:"webgl",kernelFunc:P8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nMt(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(t.length===1)return kA({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const a=t[0].shape,s=t[0].dtype;t.forEach(h=>{Dk(a,h.shape,"All tensors passed to stack must have matching shapes"),V(s===h.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=t.map(h=>{const d=kA({inputs:{input:h},backend:n,attrs:{dim:i}});return o.push(d),d}),c=w8({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(h=>n.disposeIntermediateTensorInfo(h)),c}const rMt={kernelName:Kb,backendName:"webgl",kernelFunc:nMt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iMt{constructor(t,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,h)=>c[0]+t[h]+c[1]);const i=t.length,a=_e(i),s=n.map(c=>c[0]).join(","),o=n.map((c,h)=>c[0]+t[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${s};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${s});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aMt{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((x,b)=>x[0]+t[b]+x[1]);const i=t.length,a=_e(i),s=n.map(x=>x[0]).join(","),o=n.map((x,b)=>x[0]+t[b]).join(","),l=Sr("rc",i),c=Sr("source",i),h=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${a} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${h}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${h}) {`],g=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let v="";for(let x=0,b=i===1?2:4;x<b;x++)v+=`
        ${p[x]}
        if (${g}) {
          result[${x}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${x}] = getChannel(getX(${c.join()}), ${d});
        }
      `;v+=i===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${s});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F8=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,constantValue:s}=r;if(pt(i.shape)===0){const c=a.map((h,d)=>h[0]+i.shape[d]+h[1]);return gm({backend:n,attrs:{shape:c,value:s,dtype:i.dtype}})}const o=ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aMt(i.shape,a,s):new iMt(i.shape,a,s),l=[[s]];return n.runWebGLProgram(o,[i],i.dtype,l)},sMt={kernelName:Yb,backendName:"webgl",kernelFunc:F8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oMt=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,lMt=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Jl+`
  return result;
`,uMt=Qn({opSnippet:oMt,packedOpSnippet:lMt}),cMt={kernelName:Op,backendName:"webgl",kernelFunc:uMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fMt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r,o=i.shape.length,l=[],c=ae(a,i.shape);let h=c;const d=en(h,o);let p=i;d!=null&&(p=Tr({inputs:{x:i},backend:n,attrs:{perm:d}}),h=hn(h.length,o),l.push(p)),Zn("prod",h,o);let g;if(n.shouldExecuteOnCPU([p])){const v=n.texData.get(p.dataId).values,{outVals:x,outShape:b,outDtype:w}=uIt(p.shape,p.dtype,v,h);g=n.makeTensorInfo(b,w,x)}else{const[v,x]=jn(p.shape,h),b=pt(x),w=Ot({inputs:{x:p},backend:n,attrs:{shape:[-1,b]}}),S=$I(i.dtype),T=tu(w,S,"prod",n);g=Ot({inputs:{x:T},backend:n,attrs:{shape:v}}),l.push(w),l.push(T)}if(s){l.push(g);const v=bn(g.shape,c);g=Ot({inputs:{x:g},backend:n,attrs:{shape:v}})}return l.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}const hMt={kernelName:Qb,backendName:"webgl",kernelFunc:fMt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMt(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:a,indices:s}=t,{outputRaggedRank:o}=r,l=i.map(w=>n.readSync(w.dataId)),c=i.map(w=>w.shape),h=n.readSync(a.dataId),d=n.readSync(s.dataId),[p,g,v]=cIt(l,c,h,a.shape,a.dtype,d,s.shape,o),x=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),b=n.makeTensorInfo(v,a.dtype,g);return x.concat([b])}const pMt={kernelName:bW,backendName:"webgl",kernelFunc:dMt};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mMt(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:a}=t,s=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(a.dataId),[c,h]=fIt(s,r.shape,r.dtype,o,i.shape,l,a.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([h.length],r.dtype,h);return[d,p]}const gMt={kernelName:xW,backendName:"webgl",kernelFunc:mMt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMt(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:a,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),h=n.readSync(a.dataId),d=n.readSync(s.dataId),p=o.map(b=>n.readSync(b.dataId)),g=o.map(b=>b.shape),[v,x]=hIt(c,i.shape,h,a.shape,a.dtype,d,s.shape,p,g,l);return n.makeTensorInfo(v,a.dtype,x)}const vMt={kernelName:wW,backendName:"webgl",kernelFunc:yMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L8=e=>{const{backend:t,attrs:n}=e,{start:r,stop:i,step:a,dtype:s}=n,o=dIt(r,i,a,s);return t.makeTensorInfo([o.length],s,o)},bMt={kernelName:pI,backendName:"webgl",kernelFunc:L8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xMt="return 1.0 / x;",wMt=ge({opSnippet:xMt}),SMt={kernelName:Np,backendName:"webgl",kernelFunc:wMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CMt=Ui+`
  return (x < 0.0) ? 0.0 : x;
`,TMt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,$Mt=ge({opSnippet:CMt,packedOpSnippet:TMt}),AMt={kernelName:_p,backendName:"webgl",kernelFunc:$Mt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kMt=Ui+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,IMt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,EMt=ge({opSnippet:kMt,packedOpSnippet:IMt}),OMt={kernelName:Rp,backendName:"webgl",kernelFunc:EMt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NMt{constructor(t,n,r,i,a){this.variableNames=["A"],this.outputShape=[];const[s,o,l,c]=t;this.outputShape=[s,n,r,c];const h=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let p;a?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${h[0]/d[0]},
          ${h[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Mt{constructor(t,n,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,l,c]=t;this.outputShape=[s,n,r,c];const h=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let p;a?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${h[0]/d[0]},
          ${h[1]/d[1]},
          ${h[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMt(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:s,size:o}=r,[l,c]=o,h=ct().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new _Mt(i.shape,l,c,a,s):new NMt(i.shape,l,c,a,s);return n.runWebGLProgram(h,[i],"float32")}const DMt={kernelName:e0,backendName:"webgl",kernelFunc:RMt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MMt{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,a]=n,[,s,o]=t,l=[r&&s>1?i-1:i,r&&o>1?a-1:a],c=[r&&s>1?s-1:s,r&&o>1?o-1:o],h=l[0]/c[0],d=l[1]/c[1],p=1/h,g=1/d,v=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${h});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${v});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PMt(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:s}=r,o=new MMt(a.shape,i.shape,s);return n.runWebGLProgram(o,[a],a.dtype)}const FMt={kernelName:yI,backendName:"webgl",kernelFunc:PMt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LMt{constructor(t,n,r,i,a){this.variableNames=["A"],this.outputShape=[];const[s,o,l,c]=t;this.outputShape=[s,n,r,c];const h=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],p=i?"0.5":"0.0";let g;a?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${h[0]/d[0]},
          ${h[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BMt{constructor(t,n,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,l,c]=t;this.outputShape=[s,n,r,c];const h=[i&&n>1?o-1:o,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],p=i?"0.5":"0.0";let g;a?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${h[0]/d[0]},
          ${h[1]/d[1]},
          ${h[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMt(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:s,size:o}=r,[l,c]=o,h=ct().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new BMt(i.shape,l,c,a,s):new LMt(i.shape,l,c,a,s);return n.runWebGLProgram(h,[i],i.dtype)}const jMt={kernelName:t0,backendName:"webgl",kernelFunc:zMt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UMt{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,a]=n,[,s,o]=t,l=[r&&s>1?i-1:i,r&&o>1?a-1:a],c=[r&&s>1?s-1:s,r&&o>1?o-1:o],h=l[0]/c[0],d=l[1]/c[1],p=1/h,g=1/d,v=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${h});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${v});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VMt(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:s}=r,o=new UMt(a.shape,i.shape,s);return n.runWebGLProgram(o,[a],a.dtype)}const WMt={kernelName:gI,backendName:"webgl",kernelFunc:VMt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GMt{constructor(t,n){this.variableNames=["x"];const r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=t,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const i=o=>n.indexOf(o)!==-1&&t[o]!==1?`${t[o]} - coords[${o}] - 1`:`coords[${o}]`,a=t.map((o,l)=>i(l)).join(","),s=_e(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qMt{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=t;const i=Sr("rc",r),a=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,o=_e(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${a}){
            result.g = ${c(i.slice())};
          }
          if(${s}) {
            result.b = ${h(i.slice())};
            if(${a}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(v){return p(v)}function c(v){return v[r-1]="("+v[r-1]+" + 1)",p(v)}function h(v){return v[r-2]="("+v[r-2]+" + 1)",p(v)}function d(v){return v[r-1]="("+v[r-1]+" + 1)",v[r-2]="("+v[r-2]+" + 1)",p(v)}function p(v){const x=t.map((S,T)=>g(T,v)),b=x.join(","),w=x.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${w}))`}function g(v,x){return n.indexOf(v)!==-1&&t[v]!==1?`${t[v]} - ${x[v]} - 1`:`${x[v]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:a}=r,s=i.shape.length,o=ae(a,i.shape);if(s===0)return Zr({inputs:{x:i},backend:n});const l=ct().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qMt(i.shape,o):new GMt(i.shape,o);return n.runWebGLProgram(l,[i],i.dtype)}const XMt={kernelName:n0,backendName:"webgl",kernelFunc:HMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KMt{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=t[1],i=t[2];this.outputShape=t;let a="";typeof n=="number"?a=`float outputValue = ${n.toFixed(2)};`:a=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YMt={kernelName:TI,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:a,center:s}=t,o=n,l=new KMt(r.shape,a),[c,h]=fE(s,r.shape[1],r.shape[2]),d=[[c,h,Math.sin(i),Math.cos(i)]];return o.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZMt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,QMt=ge({opSnippet:ZMt}),JMt={kernelName:Dp,backendName:"webgl",kernelFunc:QMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tPt="return inversesqrt(x);",ePt=ge({opSnippet:tPt,cpuKernelImpl:pIt}),nPt={kernelName:Mp,backendName:"webgl",kernelFunc:ePt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dO{constructor(t,n,r,i,a,s,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const c=_e(a.length),h=_e(s.length);let d="";r===1?d="i":r===2&&(d="i, j");const p=`getIndices(${d})`;let g="";i===1?g="i":i===2&&(g="i, coords[1]");const v=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const b=`getDefaultValue(${x})`,w=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${a});

        void main() {
          ${h} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${w};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${v};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rPt{constructor(t,n,r,i,a,s,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;const c=_e(a.length),h=_e(s.length);let d="";r===1?d="i":r===2&&(d="i, j");const p=`getIndices(${d})`;let g="";i===1?g="i":i===2&&(g="i, coords[1]");const v=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const b=`getDefaultValue(${x})`,w=n>1?"strides[j]":"strides",S=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${a});

        void main() {
          ${h} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${w};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${S};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${v};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iPt(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:a}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:h,outputSize:d}=Xl(a,i,s),p=[d/c,c];if(d===0)return n.makeTensorInfo(s,i.dtype);const g=Ot({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),v=Ot({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),x=n.makeTensorInfo([],"float32",new Float32Array([0]));let b;ct().getBool("WEBGL_PACK")?b=new rPt(l,o,g.shape.length,v.shape.length,h,p):b=new dO(l,o,g.shape.length,v.shape.length,h,p);const w=n.runWebGLProgram(b,[v,g,x],v.dtype),S=Ot({inputs:{x:w},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),S}const aPt={kernelName:SW,backendName:"webgl",kernelFunc:iPt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sPt{constructor(t,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];const a="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=ct().getNumber("WEBGL_VERSION")===2?a:s,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oPt(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:a}=t,{side:s}=r,o=new sPt(i.shape[0],i.shape[1],a.shape[1],s),l=[[i.shape[1]]];return n.runWebGLProgram(o,[i,a],"int32",l)}const lPt={kernelName:TW,backendName:"webgl",kernelFunc:oPt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uPt{constructor(t,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,a;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)a="resRC",i="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let h=0;h<n.length;h++)c.push(`${o[h]}`),h<t&&l.push(`${o[h]}`);i=l.join(),a=c.join()}const s=_e(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cPt(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:a}=t,s=new uPt(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(s,[r,i,a],Kr(i.dtype,a.dtype))}const fPt={kernelName:r0,backendName:"webgl",kernelFunc:cPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hPt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${C0};
  float scale = ${T0};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,dPt=ge({opSnippet:hPt}),pPt={kernelName:Pp,backendName:"webgl",kernelFunc:dPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mPt=wf+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,gPt=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,yPt=ge({opSnippet:mPt,packedOpSnippet:gPt,cpuKernelImpl:gIt}),vPt={kernelName:zp,backendName:"webgl",kernelFunc:yPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bPt=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,xPt=ge({opSnippet:bPt}),wPt={kernelName:Bp,backendName:"webgl",kernelFunc:xPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SPt=wf+`
  return sin(x);
`,CPt=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Jl}
  return result;
`,TPt=ge({opSnippet:SPt,packedOpSnippet:CPt}),$Pt={kernelName:Fp,backendName:"webgl",kernelFunc:TPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const APt=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,kPt=ge({opSnippet:APt}),IPt={kernelName:Lp,backendName:"webgl",kernelFunc:kPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPt=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,OPt=ge({opSnippet:EPt}),NPt={kernelName:jp,backendName:"webgl",kernelFunc:OPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Pt=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,paddings:s}=r;V(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((w,S)=>w*S),l=[[0,0]];l.push(...s);for(let w=1+a.length;w<i.shape.length;++w)l.push([0,0]);const c=[],h=F8({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=tm(h.shape,a,o,!1),p=em(d.length,a.length,!1),g=nm(h.shape,a,o,!1),v=Ot({inputs:{x:h},backend:n,attrs:{shape:d}}),x=Tr({inputs:{x:v},backend:n,attrs:{perm:p}}),b=Ot({inputs:{x},backend:n,attrs:{shape:g}});return c.push(h),c.push(v),c.push(x),c.forEach(w=>n.disposeIntermediateTensorInfo(w)),b},RPt={kernelName:s0,backendName:"webgl",kernelFunc:_Pt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPt(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:a,defaultValue:s}=t;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const o=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(a.dataId),h=n.readSync(s.dataId)[0],[d,p,g,v,x]=vIt(o,r.shape,r.dtype,l,i.dtype,c,h);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,g),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map(b=>Number(b)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const MPt={kernelName:$W,backendName:"webgl",kernelFunc:DPt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PPt(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:a}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const s=Array.from(n.readSync(i.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[c,h,d]=bIt(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(h,r.dtype,c),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}const FPt={kernelName:AW,backendName:"webgl",kernelFunc:PPt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LPt(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const s=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(a.dataId),[c,h]=l8(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(h,r.dtype,c)}const BPt={kernelName:kW,backendName:"webgl",kernelFunc:LPt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zPt(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const s=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(a.dataId),[c,h]=l8(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(h,r.dtype,c)}const jPt={kernelName:IW,backendName:"webgl",kernelFunc:zPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UPt(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:h,strides:d,outputSize:p}=Xl(a,i,o),g=!1;if(a.dtype==="string"){const w=n.bufferSync(i),S=n.bufferSync(a),T=po(n.readSync(s.dataId)[0]),$=mIt(w,S,o,p,h,c,l,d,T,g);return n.makeTensorInfo(o,$.dtype,$.values)}const v=new dO(c,l,i.shape.length,a.shape.length,d,[p,1],g),x=n.runWebGLProgram(v,[a,i,s],a.dtype),b=Ot({inputs:{x},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(x),b}const VPt={kernelName:EW,backendName:"webgl",kernelFunc:UPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WPt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:a,axis:s}=r,o=ae(s,i.shape)[0],l=AE(i,a,o),c=i.shape.length,h=new Array(c).fill(0),d=i.shape.slice();return l.map(p=>{const g=[...d];g[o]=p;const v=Sf({inputs:{x:i},backend:n,attrs:{begin:h,size:g}});return h[o]+=p,v})}const GPt={kernelName:o0,backendName:"webgl",kernelFunc:WPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4="return sqrt(x);",qPt=ge({opSnippet:j4,packedOpSnippet:j4,cpuKernelImpl:xIt}),HPt={kernelName:Up,backendName:"webgl",kernelFunc:qPt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XPt="return x * x;",KPt=ge({opSnippet:XPt}),YPt={kernelName:vI,backendName:"webgl",kernelFunc:KPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U4="return (a - b) * (a - b);",ZPt=Qn({opSnippet:U4,packedOpSnippet:U4}),QPt={kernelName:Vp,backendName:"webgl",kernelFunc:ZPt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JPt(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const a=n.readSync(i.dataId),s=Ss(a),o=wIt(s,"string",r);return n.makeTensorInfo(i.shape,"string",o)}const t3t={kernelName:bI,backendName:"webgl",kernelFunc:JPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3t({inputs:e,attrs:t,backend:n}){const{x:r}=e,i=Ui+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,a=new Ta(r.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const n3t={kernelName:Xp,backendName:"webgl",kernelFunc:e3t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r3t{constructor(t,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,a=_e(r.length),s=_e(r.length);let o="";if(i===1)o="coords * strides + begin";else{let l=0;o=r.map((c,h)=>(l++,r.length===1?`coords * strides[${h}] + begin[${h}]`:`coords[${l-1}] * strides[${h}] + begin[${h}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${t});
      ${a} strides = ${a}(${n});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i3t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:h,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:g,finalShape:v,isIdentity:x,sliceDim0:b,isSimpleSlice:w,begin:S,end:T,strides:$}=lE(i.shape,a,s,o,l,c,h,d,p);let A;if(x)A=Ot({inputs:{x:i},backend:n,attrs:{shape:v}});else if(b||w){V(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const O=aE(S,T,$),N=Sf({inputs:{x:i},backend:n,attrs:{begin:S,size:O}});A=Ot({inputs:{x:N},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(N)}else if(n.shouldExecuteOnCPU([i])){const N=n.readSync(i.dataId),_=ie(i.shape,i.dtype,N),R=SIt(g,_,$,S);A=n.makeTensorInfo(v,i.dtype,R.values)}else{const N=new r3t(S,$,g);A=n.runWebGLProgram(N,[i],i.dtype)}const I=Ot({inputs:{x:A},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(A),I}const a3t={kernelName:xI,backendName:"webgl",kernelFunc:i3t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3t(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:a,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:h,dataSplits:d}=t,p=n.readSync(h.dataId),g=n.readSync(d.dataId),[v,x]=CIt(p,g,i,a,s,o,l,c);return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(d.shape,"int32",x)]}const o3t={kernelName:OW,backendName:"webgl",kernelFunc:s3t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3t(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:a,delimiter:s}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const o=n.readSync(a.dataId),l=n.readSync(s.dataId)[0],[c,h,d]=TIt(o,l,i),p=h.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",h),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const u3t={kernelName:NW,backendName:"webgl",kernelFunc:l3t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3t(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:a}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(a.dataId),o=$It(s,i);return n.makeTensorInfo(a.shape,"int32",o)}const f3t={kernelName:_W,backendName:"webgl",kernelFunc:c3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h3t="return tan(x);",d3t=ge({opSnippet:h3t}),p3t={kernelName:Gp,backendName:"webgl",kernelFunc:d3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3t=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,g3t=ge({opSnippet:m3t}),y3t={kernelName:qp,backendName:"webgl",kernelFunc:g3t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3t(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:a,updates:s}=t,{sliceRank:o,numUpdates:l,sliceSize:c,strides:h,outputSize:d}=Xl(s,a,i.shape),p=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,a.dtype);const g=Ot({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),v=Ot({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),x=Ot({inputs:{x:i},backend:n,attrs:{shape:p}}),b=new dO(l,o,g.shape.length,v.shape.length,h,p,!1,!0),w=n.runWebGLProgram(b,[v,g,x],x.dtype),S=Ot({inputs:{x:w},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),S}const b3t={kernelName:CW,backendName:"webgl",kernelFunc:v3t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x3t{constructor(t,n){this.variableNames=["A"];const r=new Array(t.length);for(let s=0;s<r.length;s++)r[s]=t[s]*n[s];this.outputShape=r,this.rank=r.length;const i=_e(this.rank),a=w3t(t);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function w3t(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<e.length;i++)r.push(`imod(${n[i]}, ${e[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B8(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:a}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),c=i.dtype==="string"?l.map(p=>po(p)):l,h=ie(i.shape,i.dtype,c),d=kIt(h,a);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const s=new x3t(i.shape,a);return n.runWebGLProgram(s,[i],i.dtype)}const S3t={kernelName:Hp,backendName:"webgl",kernelFunc:B8};class C3t{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class T3t{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nl(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function V4(e){let t=1;for(;t<e;)t*=2;return t}function $3t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:a,sorted:s}=r,o=ct().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ct().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,h=c[c.length-1];if(n.shouldExecuteOnCPU([i])||h<o||a>l){const R=n.readSync(i.dataId),[E,F]=IIt(R,c,i.dtype,a,s);return[n.makeTensorInfo(E.shape,E.dtype,E.values),n.makeTensorInfo(F.shape,F.dtype,F.values)]}if(a===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(h===1)return[i,gm({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),p=d!==null&&d.isPacked,g=p?n.unpackTensor(i):i,x=pt(c)/h,b=Ot({inputs:{x:g},attrs:{shape:[x,h]},backend:n});p&&nl(n,g);const w=V4(a),S=V4(h);let T=null;const $=()=>T===null?[b,b]:[b,T],A=(R,E,F)=>{const M=$(),B=new C3t(F),P=[[h],[T===null?1:0],[Number.NEGATIVE_INFINITY],[R],[E]],U=T;T=n.runWebGLProgram(B,M,"int32",P),nl(n,U)};for(let R=1;R<w;R*=2){const E=R*2;for(let F=R;F>=1;F/=2)A(E,F,[x,S])}for(let R=S;R>w;R/=2){const E=$(),F=new T3t([x,R/2]),B=[[h],[T===null?1:0],[w]],j=T;T=n.runWebGLProgram(F,E,"int32",B),nl(n,j);const P=w/2,U=P*2;for(let W=P;W>=1;W/=2)A(U,W,T.shape)}let I=T;T=Sf({inputs:{x:T},backend:n,attrs:{begin:0,size:[x,a]}}),nl(n,I);let O=N8({inputs:{x:b,indices:T},backend:n,attrs:{axis:1,batchDims:1}});nl(n,b);const N=c.slice(0,-1);N.push(a),I=T,T=Ot({inputs:{x:T},attrs:{shape:N},backend:n}),nl(n,I);const _=O;return O=Ot({inputs:{x:O},attrs:{shape:N},backend:n}),nl(n,_),[O,T]}const A3t={kernelName:wI,backendName:"webgl",kernelFunc:$3t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k3t{constructor(t,n,r,i,a,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const o=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3t(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:a}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=r,[h,d,p,g]=i.shape,[v,x]=c??[d,p],b=[h,v,x,g],w=new k3t(d,p,s,o,l,b);return n.runWebGLProgram(w,[i,a],"float32")}const E3t={kernelName:SI,backendName:"webgl",kernelFunc:I3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3t(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:a}=t;dm(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(a.dataId),{outputValues:o,outputShape:l,indices:c}=EIt(s,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const N3t={kernelName:CI,backendName:"webgl",kernelFunc:O3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3t(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:a}=r;a<0&&(a+=i.shape.length);const s=i,o=s.shape.length,l=i.shape[a],c=new Array(o-1);let h=0;for(let x=0;x<o;x++)x!==a&&(c[h++]=s.shape[x]);const d=[],p=new Array(o).fill(0),g=s.shape.slice();g[a]=1;const v=new Array(l);for(let x=0;x<v.length;x++){p[a]=x;const b=Sf({inputs:{x:s},backend:n,attrs:{begin:p,size:g}}),w=Ot({inputs:{x:b},backend:n,attrs:{shape:c}});v[x]=w,d.push(b)}return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const R3t={kernelName:u0,backendName:"webgl",kernelFunc:_3t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D3t{constructor(t,n){this.variableNames=["x","segmentIds"];const r=t.windowSize,i=t.batchSize,a=t.inSize,s=t.numSegments,o=s*Math.ceil(a/r);this.outputShape=[i,o];const l="0.0",c="sumValue",h=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";a%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let v="";a%r>0&&(v=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${v}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${h}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${h};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3t(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:a}=t,{numSegments:s}=r,o=i.shape.length,l=[];let c=0;const h=en([c],o);let d=i;h!=null&&(d=Tr({inputs:{x:i},backend:n,attrs:{perm:h}}),l.push(d),c=hn(1,o)[0]);const p=wq(d.shape,c,s),g=pt([d.shape[c]]),v=Ot({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}});l.push(v);const x=$I(i.dtype),b=($,A,I,O,N)=>{const _=$.shape[0],R=$.shape[1],E=xq(R,N),F={windowSize:E,inSize:R,batchSize:_,numSegments:N},M=new D3t(F,A),B=n.compileAndRun(M,[$,I],O);if(l.push(B),B.shape[1]===N)return B;const j=L8({backend:n,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),P=B8({inputs:{x:j},backend:n,attrs:{reps:[R/E]}});return l.push(j),l.push(P),b(B,A,P,O,N)},w=b(v,"unsortedSegmentSum",a,x,s),S=Ot({inputs:{x:w},backend:n,attrs:{shape:p}});let T=S;if(h!=null){l.push(S);const $=Oo(h);T=Tr({inputs:{x:T},backend:n,attrs:{perm:$}})}return l.forEach($=>n.disposeIntermediateTensorInfo($)),T}const P3t={kernelName:c0,backendName:"webgl",kernelFunc:M3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F3t=[xEt,SEt,$Et,IEt,OEt,REt,MEt,FEt,jEt,VEt,qEt,KEt,QEt,nOt,aOt,oOt,uOt,dOt,mOt,yOt,wOt,IOt,OOt,DOt,POt,UOt,WOt,XOt,rEt,ZOt,nNt,sNt,hNt,mNt,yNt,bNt,wNt,$Nt,INt,NNt,RNt,MNt,FNt,zNt,UNt,qNt,XNt,ZNt,t_t,n_t,s_t,c_t,p_t,y_t,x_t,w_t,C_t,$_t,k_t,E_t,N_t,M_t,L_t,j_t,V_t,q_t,K_t,J_t,rRt,nEt,aRt,tNt,lRt,fRt,pRt,aEt,vRt,SRt,TRt,IRt,NRt,MRt,LRt,URt,qRt,KRt,ZRt,eDt,rDt,aDt,uDt,fDt,dDt,mDt,yDt,wDt,$Dt,EDt,FDt,lEt,jDt,WDt,HDt,YDt,LOt,JDt,eMt,rMt,sMt,cMt,oEt,hMt,pMt,gMt,vMt,bMt,BOt,RDt,SMt,AMt,OMt,cEt,DMt,FMt,jMt,WMt,XMt,YMt,JMt,nPt,aPt,lPt,fPt,pPt,vPt,wPt,$Pt,IPt,AOt,MDt,NPt,RPt,MPt,FPt,BPt,jPt,VPt,GPt,HPt,YPt,QPt,t3t,n3t,a3t,o3t,u3t,f3t,DDt,yEt,p3t,y3t,b3t,S3t,A3t,E3t,vEt,N3t,R3t,P3t,tMt];for(const e of F3t)DW(e);const L3t=()=>{const[e,t]=Tt.useState(""),[n,r]=Tt.useState(""),[i,a]=Tt.useState(""),[s,o]=Tt.useState(""),[l,c]=Tt.useState(""),[h,d]=Tt.useState([]),[p,g]=Tt.useState(null),[v,x]=Tt.useState("normal"),[b,w]=Tt.useState(null),[S,T]=Tt.useState(!1),[$,A]=Tt.useState(window.innerWidth<768);Tt.useEffect(()=>{const B=()=>A(window.innerWidth<768);return window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]);const[I,O]=Tt.useState([{date:"2025-06-08",heartRate:72,systolic:120,diastolic:80},{date:"2025-06-09",heartRate:75,systolic:118,diastolic:78},{date:"2025-06-10",heartRate:68,systolic:122,diastolic:82},{date:"2025-06-11",heartRate:70,systolic:125,diastolic:85},{date:"2025-06-12",heartRate:73,systolic:119,diastolic:79},{date:"2025-06-13",heartRate:76,systolic:121,diastolic:81},{date:"2025-06-14",heartRate:71,systolic:123,diastolic:83}]);Tt.useEffect(()=>{N()},[]);const N=async()=>{T(!0);const B=t1t({layers:[b$({inputShape:[4],units:16,activation:"relu"}),v1t({rate:.2}),b$({units:8,activation:"relu"}),b$({units:3,activation:"softmax"})]});B.compile({optimizer:"adam",loss:"categoricalCrossentropy",metrics:["accuracy"]});const j=_(),P=lc(j.inputs),U=lc(j.outputs);await B.fit(P,U,{epochs:50,batchSize:32,validationSplit:.2,shuffle:!0}),w(B),T(!1)},_=()=>{const B=[],j=[];for(let P=0;P<1e3;P++){const U=Math.random()*60+20,W=Math.random()*80+60,q=Math.random()*60+90,L=Math.random()*150+150;B.push([U,W,q,L]);let G=0;U>50&&(G+=1),W>100&&(G+=1),q>130&&(G+=1),L>240&&(G+=1);const H=G<=1?[1,0,0]:G===2?[0,1,0]:[0,0,1];j.push(H)}return{inputs:B,outputs:j}},R=async()=>{if(!e||!n||!i||!s){alert("Please fill in all required fields");return}const B={id:Date.now(),heartRate:parseInt(e),systolic:parseInt(n),diastolic:parseInt(i),age:parseInt(s),cholesterol:parseInt(l)||200,timestamp:new Date().toLocaleString(),date:new Date().toISOString().split("T")[0]};d([...h,B]),O([...I,{date:B.date,heartRate:B.heartRate,systolic:B.systolic,diastolic:B.diastolic}]),b&&await E(B),t(""),r(""),a(""),c("")},E=async B=>{if(!b)return;const j=lc([[B.age,B.heartRate,B.systolic,B.cholesterol]]),U=await b.predict(j).data(),W=["Low Risk","Medium Risk","High Risk"],q=U.indexOf(Math.max(...U)),L=(U[q]*100).toFixed(1);g({risk:W[q],confidence:L,details:{low:(U[0]*100).toFixed(1),medium:(U[1]*100).toFixed(1),high:(U[2]*100).toFixed(1)}}),x(q===0?"normal":q===1?"warning":"danger")},F=()=>p?{"Low Risk":["Maintain your current healthy lifestyle","Continue regular exercise routine","Keep monitoring your vitals regularly"],"Medium Risk":["Consider increasing physical activity","Monitor your diet and reduce sodium intake","Schedule regular check-ups with your doctor"],"High Risk":["Consult with a healthcare provider immediately","Consider lifestyle modifications","Monitor blood pressure and heart rate daily"]}[p.risk]||[]:[],M={app:{minHeight:"100vh",width:"98vw",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px 0",boxSizing:"border-box",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif'},container:{width:"100%",maxWidth:"1200px",margin:"0 auto",padding:"0 20px",boxSizing:"border-box"},header:{textAlign:"center",marginBottom:"40px",color:"white"},headerTitle:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",marginBottom:"10px"},headerTitleH1:{fontSize:"3rem",fontWeight:"bold",margin:"0"},headerSubtitle:{fontSize:"1.2rem",opacity:"0.9",marginBottom:"20px"},trainingIndicator:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",padding:"10px 20px",borderRadius:"25px",animation:"pulse 2s infinite"},mainContent:{display:"flex",flexDirection:"column",gap:"30px",gap:"30px"},card:{background:"white",borderRadius:"15px",padding:"25px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.1)",marginBottom:"20px",border:"1px solid rgba(255, 255, 255, 0.2)"},sectionTitle:{display:"flex",alignItems:"center",gap:"10px",fontSize:"1.5rem",fontWeight:"bold",marginBottom:"20px",color:"#2c3e50"},formGroup:{marginBottom:"20px"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},formColumn:{flex:"1 1 500px",maxWidth:"500px",width:"100%",boxSizing:"border-box"},label:{display:"block",marginBottom:"8px",fontWeight:"600",color:"#555",fontSize:"0.9rem"},input:{width:"100%",padding:"12px 15px",border:"2px solid #e1e8ed",borderRadius:"8px",fontSize:"1rem",background:"#fafafa",transition:"all 0.3s ease",boxSizing:"border-box",color:"black"},submitBtn:{width:"100%",padding:"15px",background:"linear-gradient(135deg, #3498db, #9b59b6)",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",textTransform:"uppercase",letterSpacing:"0.5px"},riskIndicator:{padding:"15px",borderRadius:"10px",marginBottom:"20px",borderLeft:"5px solid"},riskIndicatorNormal:{background:"#d5f5d5",color:"#2d5a2d",borderLeftColor:"#27ae60"},riskIndicatorWarning:{background:"#fff3cd",color:"#856404",borderLeftColor:"#f39c12"},riskIndicatorDanger:{background:"#f8d7da",color:"#721c24",borderLeftColor:"#e74c3c"},riskHeader:{display:"flex",alignItems:"center",gap:"10px"},riskText:{fontWeight:"bold",fontSize:"1.1rem"},confidence:{marginLeft:"auto",fontSize:"0.9rem",fontWeight:"500"},riskDetails:{marginBottom:"20px",color:"black"},riskItem:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #eee",fontSize:"0.9rem"},lowRisk:{color:"#27ae60",fontWeight:"600"},mediumRisk:{color:"#f39c12",fontWeight:"600"},highRisk:{color:"#e74c3c",fontWeight:"600"},recommendations:{borderTop:"2px solid #f0f0f0",paddingTop:"15px",color:"black"},recommendationsList:{listStyle:"none",padding:"0",margin:"10px 0 0 0"},recommendationsItem:{padding:"5px 0",paddingLeft:"20px",position:"relative",fontSize:"0.9rem",color:"#555"},chartsSection:{display:"flex",flexDirection:"column",gap:"20px",flex:1},chartCard:{minHeight:"400px"},chartContainer:{marginTop:"20px"},tableContainer:{overflowX:"auto",marginTop:"15px"},readingsTable:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},tableHeader:{background:"#f8f9fa",fontWeight:"600",color:"#555",textTransform:"uppercase",letterSpacing:"0.5px",fontSize:"0.8rem"},tableCell:{padding:"12px 15px",textAlign:"left",borderBottom:"1px solid #eee",color:"black"}};return Ct.jsx("div",{style:M.app,children:Ct.jsxs("div",{style:M.container,children:[Ct.jsxs("div",{style:M.header,children:[Ct.jsxs("div",{style:M.headerTitle,children:[Ct.jsx(A7,{size:48,color:"#e74c3c"}),Ct.jsx("h1",{style:M.headerTitleH1,children:"CardioFola"})]}),Ct.jsx("p",{style:M.headerSubtitle,children:"Enhanced Heart Tracking with AI-Powered Health Predictions"}),S&&Ct.jsxs("div",{style:M.trainingIndicator,children:[Ct.jsx(pD,{size:20,color:"#3498db"}),Ct.jsx("span",{children:"Training AI model..."})]})]}),Ct.jsxs("div",{style:{...M.mainContent,flexDirection:$?"column":"row",gap:"30px"},children:[Ct.jsxs("div",{style:M.formColumn,children:[Ct.jsxs("div",{style:M.card,children:[Ct.jsxs("h2",{style:M.sectionTitle,children:[Ct.jsx(y7,{size:24,color:"#3498db"}),"Record Vitals"]}),Ct.jsxs("div",{style:M.formGroup,children:[Ct.jsx("label",{style:M.label,children:"Heart Rate (BPM) *"}),Ct.jsx("input",{type:"number",value:e,onChange:B=>t(B.target.value),placeholder:"e.g., 72",style:M.input})]}),Ct.jsxs("div",{style:M.formRow,children:[Ct.jsxs("div",{style:M.formGroup,children:[Ct.jsx("label",{style:M.label,children:"Systolic BP *"}),Ct.jsx("input",{type:"number",value:n,onChange:B=>r(B.target.value),placeholder:"120",style:M.input})]}),Ct.jsxs("div",{style:M.formGroup,children:[Ct.jsx("label",{style:M.label,children:"Diastolic BP *"}),Ct.jsx("input",{type:"number",value:i,onChange:B=>a(B.target.value),placeholder:"80",style:M.input})]})]}),Ct.jsxs("div",{style:M.formGroup,children:[Ct.jsx("label",{style:M.label,children:"Age *"}),Ct.jsx("input",{type:"number",value:s,onChange:B=>o(B.target.value),placeholder:"e.g., 35",style:M.input})]}),Ct.jsxs("div",{style:M.formGroup,children:[Ct.jsx("label",{style:M.label,children:"Cholesterol (mg/dL)"}),Ct.jsx("input",{type:"number",value:l,onChange:B=>c(B.target.value),placeholder:"e.g., 200",style:M.input})]}),Ct.jsx("button",{onClick:R,disabled:S,style:{...M.submitBtn,opacity:S?.6:1,cursor:S?"not-allowed":"pointer"},children:"Add Reading & Analyze"})]}),p&&Ct.jsxs("div",{style:M.card,children:[Ct.jsxs("h3",{style:M.sectionTitle,children:[Ct.jsx(pD,{size:20,color:"#9b59b6"}),"AI Health Analysis"]}),Ct.jsx("div",{style:{...M.riskIndicator,...v==="normal"?M.riskIndicatorNormal:v==="warning"?M.riskIndicatorWarning:M.riskIndicatorDanger},children:Ct.jsxs("div",{style:M.riskHeader,children:[v==="normal"&&Ct.jsx(T7,{size:20}),v!=="normal"&&Ct.jsx(O7,{size:20}),Ct.jsx("span",{style:M.riskText,children:p.risk}),Ct.jsxs("span",{style:M.confidence,children:["Confidence: ",p.confidence,"%"]})]})}),Ct.jsxs("div",{style:M.riskDetails,children:[Ct.jsxs("div",{style:M.riskItem,children:[Ct.jsx("span",{children:"Low Risk:"}),Ct.jsxs("span",{style:M.lowRisk,children:[p.details.low,"%"]})]}),Ct.jsxs("div",{style:M.riskItem,children:[Ct.jsx("span",{children:"Medium Risk:"}),Ct.jsxs("span",{style:M.mediumRisk,children:[p.details.medium,"%"]})]}),Ct.jsxs("div",{style:M.riskItem,children:[Ct.jsx("span",{children:"High Risk:"}),Ct.jsxs("span",{style:M.highRisk,children:[p.details.high,"%"]})]})]}),Ct.jsxs("div",{style:M.recommendations,children:[Ct.jsx("h4",{children:"Recommendations:"}),Ct.jsx("ul",{style:M.recommendationsList,children:F().map((B,j)=>Ct.jsxs("li",{style:M.recommendationsItem,children:[" ",B]},j))})]})]})]}),Ct.jsxs("div",{style:{...M.chartsSection,width:"100%",maxWidth:$?"100%":"700px"},children:[Ct.jsxs("div",{style:{...M.card,...M.chartCard},children:[Ct.jsxs("h3",{style:M.sectionTitle,children:[Ct.jsx(I7,{size:20,color:"#27ae60"}),"Heart Rate Trends"]}),Ct.jsx("div",{style:M.chartContainer,children:Ct.jsx(H3,{width:"100%",height:300,children:Ct.jsxs(Rft,{data:I,children:[Ct.jsx(_2,{strokeDasharray:"3 3"}),Ct.jsx(Rc,{dataKey:"date"}),Ct.jsx(Mc,{}),Ct.jsx(Yi,{}),Ct.jsx(Ao,{type:"monotone",dataKey:"heartRate",stroke:"#3498db",fill:"#3498db",fillOpacity:.3,name:"Heart Rate (BPM)"})]})})})]}),Ct.jsxs("div",{style:{...M.card,...M.chartCard},children:[Ct.jsxs("h3",{style:M.sectionTitle,children:[Ct.jsx(S7,{size:20,color:"#e74c3c"}),"Blood Pressure History"]}),Ct.jsx("div",{style:M.chartContainer,children:Ct.jsx(H3,{width:"100%",height:300,children:Ct.jsxs(_ft,{data:I,children:[Ct.jsx(_2,{strokeDasharray:"3 3"}),Ct.jsx(Rc,{dataKey:"date"}),Ct.jsx(Mc,{}),Ct.jsx(Yi,{}),Ct.jsx(Oc,{type:"monotone",dataKey:"systolic",stroke:"#e74c3c",strokeWidth:2,name:"Systolic"}),Ct.jsx(Oc,{type:"monotone",dataKey:"diastolic",stroke:"#f39c12",strokeWidth:2,name:"Diastolic"})]})})})]}),h.length>0&&Ct.jsxs("div",{style:M.card,children:[Ct.jsxs("h3",{style:M.sectionTitle,children:[Ct.jsx(x7,{size:20,color:"#8e44ad"}),"Recent Readings"]}),Ct.jsx("div",{style:M.tableContainer,children:Ct.jsxs("table",{style:M.readingsTable,children:[Ct.jsx("thead",{children:Ct.jsxs("tr",{children:[Ct.jsx("th",{style:{...M.tableCell,...M.tableHeader},children:"Time"}),Ct.jsx("th",{style:{...M.tableCell,...M.tableHeader},children:"Heart Rate"}),Ct.jsx("th",{style:{...M.tableCell,...M.tableHeader},children:"Blood Pressure"}),Ct.jsx("th",{style:{...M.tableCell,...M.tableHeader},children:"Cholesterol"})]})}),Ct.jsx("tbody",{children:h.slice(-5).reverse().map(B=>Ct.jsxs("tr",{children:[Ct.jsx("td",{style:M.tableCell,children:B.timestamp}),Ct.jsxs("td",{style:M.tableCell,children:[B.heartRate," BPM"]}),Ct.jsxs("td",{style:M.tableCell,children:[B.systolic,"/",B.diastolic]}),Ct.jsxs("td",{style:M.tableCell,children:[B.cholesterol," mg/dL"]})]},B.id))})]})})]}),Ct.jsx("div",{style:{textAlign:"center",marginTop:"40px",color:"white",opacity:.7,padding:"0 10px"},children:Ct.jsxs("p",{children:[" ",new Date().getFullYear()," CardioFola  Built by Fola "]})})]})]})]})})};function B3t(){return Ct.jsx("div",{className:"App",children:Ct.jsx(L3t,{})})}c7.createRoot(document.getElementById("root")).render(Ct.jsx(Tt.StrictMode,{children:Ct.jsx(B3t,{})}));
